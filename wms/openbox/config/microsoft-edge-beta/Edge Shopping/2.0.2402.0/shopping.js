/*! For license information please see shopping.js.LICENSE.txt */
!function(){var t={991:function(t,e,n){var i=n(236).default;function o(){"use strict";t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),r=new D(i||[]);return a._invoke=function(t,e,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return I()}for(n.method=o,n.arg=a;;){var r=n.delegate;if(r){var s=E(r,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=h(t,e,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(t,n,r),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p={};function f(){}function g(){}function m(){}var v={};u(v,s,(function(){return this}));var y=Object.getPrototypeOf,C=y&&y(y(k([])));C&&C!==n&&a.call(C,s)&&(v=C);var b=m.prototype=f.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,r,s,l){var c=h(t[o],t,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,l)}))}l(c.arg)}var o;this._invoke=function(t,i){function a(){return new e((function(e,o){n(t,i,e,o)}))}return o=o?o.then(a,a):a()}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function k(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return g.prototype=m,u(b,"constructor",m),u(m,"constructor",g),g.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},S(x.prototype),u(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,o,a){void 0===a&&(a=Promise);var r=new x(d(t,n,i,o),a);return e.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},S(b),u(b,c,"Generator"),u(b,s,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=k,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return r.type="throw",r.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},236:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},13:function(t,e,n){var i=n(991)();t.exports=i;try{regeneratorRuntime=i}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(t,e,n,i,o,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,o)}function e(e){return function(){var n=this,i=arguments;return new Promise((function(o,a){var r=e.apply(n,i);function s(e){t(r,o,a,s,l,"next",e)}function l(e){t(r,o,a,s,l,"throw",e)}s(void 0)}))}}var i=n(13),o=n.n(i);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(){function t(){s(this,t)}return r(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}();function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var v,y,C,b,S,x,E,A,T,D,k,I,w,P,O,R,M,N,L,_=function(t){u(n,t);var e=m(n);function n(t,i,o,a,r){var c;return s(this,n),f(l(c=e.call(this)),"EdgeFlyoutStatus",void 0),f(l(c),"ComparableOffersCount",void 0),f(l(c),"SavingsAmount",void 0),f(l(c),"Domain",void 0),f(l(c),"Metadata",void 0),c.EdgeFlyoutStatus=t,c.ComparableOffersCount=i,c.SavingsAmount=o,c.Domain=a,c.Metadata=r,c}return r(n)}(g);!function(t){t[t.Domains=0]="Domains",t[t.Deals=1]="Deals",t[t.Popup=2]="Popup",t[t.Overlay=3]="Overlay",t[t.BaseUXUrl=4]="BaseUXUrl",t[t.EventLogUrl=5]="EventLogUrl",t[t.PriceComparison=6]="PriceComparison",t[t.PriceNotification=7]="PriceNotification",t[t.ImageResize=8]="ImageResize",t[t.EdgeMobileOverlay=9]="EdgeMobileOverlay",t[t.ECOverlay=10]="ECOverlay"}(v||(v={})),function(t){t.Get="GET",t.Post="POST"}(y||(y={})),function(t){t.Json="application/json",t.Text="text/plain"}(C||(C={})),function(t){t.Trace="Trace",t.Debug="Debug",t.Information="Information",t.Warning="Warning",t.Error="Error",t.Critical="Critical",t.None="None"}(b||(b={})),function(t){t.AutoApply="AutoApply",t.ButtonClick="ButtonClick",t.ClientError="ClientError",t.DebugMessage="DebugMessage",t.EdgeFlyoutStatus="EdgeFlyoutStatus",t.CheckoutPageValidation="CheckoutPageValidation",t.CashbackInfo="CashbackInfo",t.OtherSellers="OtherSellers",t.RewardsActivity="RewardsActivity",t.ExpressCheckout="ExpressCheckout",t.EdgeFlyoutStatusDiagnostic="EdgeFlyoutStatusDiagnostic",t.RenderTime="RenderTime",t.PrintableGroceryCouponsOverlay="PrintableGroceryCouponsOverlay",t.CartExtraction="CartExtraction",t.CartExtractionError="CartExtractionError",t.FeedbackClicked="FeedbackClicked",t.ActiveExperiments="ActiveExperiments",t.ProductPageValidation="ProductPageValidation",t.VisibleClippingSelectors="VisibleClippingSelectors",t.PlatformDetection="PlatformDetection",t.ClippingExist="ClippingExist",t.CollectedCoupons="CollectedCoupons",t.PurchaseConfirmation="PurchaseConfirmation",t.CheckoutValidationPerf="CheckoutValidationPerf",t.ManualCouponApplication="ManualCouponApplication"}(S||(S={})),function(t){t.PriceHistoryGraph="PriceHistoryGraph"}(x||(x={})),function(t){t.AutoApply="AutoApply",t.BackgroundAutoApplyPositive="BackgroundAutoApplyPositive",t.BackgroundAutoApplyNegative="BackgroundAutoApplyNegative",t.PopupClose="PopupClose",t.CouponCopied="CouponCopied",t.SeeMoreCoupons="SeeMoreCoupons",t.SeeMoreRetailers="SeeMoreRetailers",t.SeeMoreSellers="SeeMoreSellers",t.SeeMoreTopRetailers="SeeMoreTopRetailers",t.SeeMorePaymentOptions="SeeMorePaymentOptions",t.SeeMoreGroceryCoupons="SeeMoreGroceryCoupons",t.SeeMoreExclusiveCoupons="SeeMoreExclusiveCoupons",t.SeeAllPrintableCoupons="SeeAllPrintableCoupons",t.SeeMoreItemizedCashback="SeeMoreItemizedCashback",t.SeeAllTrendingDeals="SeeAllTrendingDeals",t.PrintableCouponSelected="PrintableCouponSelected",t.PrintGroceryCoupons="PrintGroceryCoupons",t.FREManage="FREManage",t.FlyoutManage="FlyoutManage",t.FREDismiss="FREDismiss",t.FlyoutDismiss="FlyoutDismiss",t.FlyoutSnooze="FlyoutSnooze",t.DoNotShow="DoNotShow",t.DoNotShowFeatureForDomain="DoNotShowFeatureForDomain",t.FlyoutSnoozeUndo="FlyoutSnoozeUndo",t.RemindLater="RemindLater",t.BannerDismiss="BannerDismiss",t.AutoShowTurnedOff="AutoShowTurnedOff",t.AutoShowTurnedOn="AutoShowTurnedOn",t.FREGotIt="FREGotIt",t.FRENoThanks="FRENoThanks",t.NavigatedToAnotherRetailer="NavigatedToAnotherRetailer",t.ProceedToCheckoutWithImport="ProceedToCheckoutWithImport",t.ProceedToCheckoutWithOutImport="ProceedToCheckoutWithOutImport",t.ProceedToCheckout="ProceedToCheckout",t.UseCoupon="UseCoupon",t.UseRebates="UseRebates",t.ActivateCashBack="ActivateCashBack",t.PreviousCashBack="PreviousCashBack",t.ExpandedPreviousCashBack="ExpandedPreviousCashBack",t.NotificationDismiss="NotificationDismiss",t.OrganicFlowTurnedOff="OrganicFlowTurnedOff",t.OrganicFlowTurnedOn="OrganicFlowTurnedOn",t.RebatesLearnMore="RebatesLearnMore",t.RebatesAccount="RebatesAccount",t.CouponCopiedStackableWithCashBack="CouponCopiedStackableWithCashBack",t.CouponCopiedNonStackableWithCashBack="CouponCopiedNonStackableWithCashBack",t.ShareFB="ShareFB",t.ShareTwitter="ShareTwitter",t.ShareWhatsapp="ShareWhatsapp",t.ShareClipboard="ShareClipboard",t.ScrollVideoReviews="ScrollVideoReviews",t.ClickInlineRating="ClickInlineRating",t.ClickExpertReview="ClickExpertReview",t.ClickVideoReview="ClickVideoReview",t.NavigateToRetailerOffer="NavigateToRetailerOffer",t.NavigateToRecommendedDeal="NavigateToRecommendedDeal",t.NavigateToOtherSeller="NavigateToOtherSeller",t.AddToCart="AddToCart",t.TipsGotIt="TipsGotIt",t.TipsDwellTime="TipsDwellTime",t.MicroNotificationClick="MicroNotificationClick",t.AAWithoutEC="AAWithoutEC",t.AAWithEC="AAWithEC",t.ExpressCheckout="EC",t.RewardSignIn="RewardSignIn",t.RewardRedeem="RewardRedeem",t.RewardAdditionalLink="RewardAdditionalLink",t.RewardInfo="RewardInfo",t.ActivateCashbackToEarnReward="ActivateCashbackToEarnReward",t.ActivateCashbackToEarnRewardFail="ActivateCashbackToEarnRewardFail",t.HomePageNotificationHover="HomePageNotificationHover",t.DeletePackageTrackerByGuid="DeletePackageTrackerByGuid",t.PackageTrackingOptIn="PackageTrackingOptIn",t.PackageTrackingOptOut="PackageTrackingOptOut",t.PackageTrackingOrderClick="PackageTrackingOrderClick",t.PriceHistoryGotItBtn="PriceHistoryGotItBtn",t.DigitalGroceryCouponClick="DigitalGroceryCouponClick",t.DigitalGroceryCouponSeeAll="DigitalGroceryCouponSeeAll",t.RewardsClick="RewardsClick",t.ViewAccountActivity="ViewAccountActivity",t.CashbackRetailer="CashbackRetailer",t.SustainabilityShop="SustainabilityShop",t.ECWithoutPayment="ECWithoutPayment",t.ECWithBNPL="ECWithBNPL",t.FeedbackLike="FeedbackLike",t.FeedbackDislike="FeedbackDislike",t.FeedbackDislikeMenu0="FeedbackDislikeMenu0",t.FeedbackDislikeMenu1="FeedbackDislikeMenu1",t.FeedbackDislikeMenu2="FeedbackDislikeMenu2",t.FeedbackDislikeMenu3="FeedbackDislikeMenu3",t.FeedbackDislikeMenu4="FeedbackDislikeMenu4",t.FeedbackClose="FeedbackClose",t.FeedbackSubmit="FeedbackSubmit",t.FeedbackDismiss="FeedbackDismiss",t.SustainabilityLearnMore="SustainabilityLearnMore",t.PinterestNavigateToAnotherRetailer="PinterestNavigateToAnotherRetailer",t.YoutubeNavigateToAnohterRetailer="YoutubeNavigateToAnohterRetailer",t.SaveExclusiveCoupons="SaveExclusiveCoupons",t.DontSaveExclusiveCoupons="DontSaveExclusiveCoupons",t.PriceDropProductPage="PriceDropProductPage",t.PriceDropProductPageHover="PriceDropProductPageHover",t.SustainabilityConfirmationHover="SustainabilityConfirmationHover",t.AttainableInfoIcon="AttainableInfoIcon",t.AttainableInfoIconNotif="AttainableInfoIconNotif",t.AttainableContinueShopping="AttainableContinueShopping",t.DismissGiftCard="DismissGiftCard",t.GroceryItemShopAndActivate="GroceryItemShopAndActivate",t.GroceryItemTooltipViewed="GroceryItemTooltipViewed",t.GrocerySectionTooltipViewed="GrocerySectionTooltipViewed",t.GroceryItemDisclaimer="GroceryItemDisclaimer",t.JoinNow="JoinNow",t.MaybeLater="MaybeLater",t.NavigatedToAutosMarketplace="NavigatedToAutosMarketplace",t.NavigatedToAutosMarketplaceRecommendation="NavigatedToAutosMarketplaceRecommendation",t.ActivatedGroceryItem="ActivatedGroceryItem",t.TrendingOffersCard="TrendingOffersCard",t.TrendingOffersShowMore="TrendingOffersShowMore",t.DailyDealsCard="DailyDealsCard",t.DailyDealsShowMore="DailyDealsShowMore",t.InfiniteCategoryFeedCard="InfiniteCategoryFeedCard",t.InfiniteCategoryFeedShowMore="InfiniteCategoryFeedShowMore",t.ShopRunnerSignUp="ShopRunnerSignUp",t.AbandonedCartTile="AbandonedCartTile",t.Unknown="Unknown"}(E||(E={})),function(t){t.OpenedInCheckout="OpenedInCheckout",t.EmptyCoupons="EmptyCoupons",t.AutoTrigger="AutoTrigger",t.ErrorWrongAutoTrigger="ErrorWrongAutoTrigger",t.UserTrigger="UserTrigger",t.BannerRendered="BannerRendered",t.OnErrorInvoked="OnErrorInvoked",t.BestPrice="BestPrice",t.YouCanSave="YouCanSave",t.RebatesConfirmationNotification="RebatesConfirmationNotification",t.RebatesTurnedOffNotification="RebatesTurnedOffNotification",t.StackableCouponWithCashback="StackableCouponWithCashback",t.NonStackableCouponWithCashback="NonStackableCouponWithCashback",t.CashBackNotActiveAutoApply="CashBackNotActiveAutoApply",t.PriceHistoryPriceDrop="PriceHistoryPriceDrop",t.PriceHistoryPriceIncrease="PriceHistoryPriceIncrease",t.PriceHistoryPriceStable="PriceHistoryPriceStable",t.PriceHistoryDwellTimeHover="PriceHistoryDwellTimeHover",t.PriceHistoryInfoButtonDwellTimeHover="PriceHistoryInfoButtonDwellTimeHover",t.PriceHistoryNotificationHover="PriceHistoryNotificationHover",t.PriceHistoryNoImage="PriceHistoryNoImage",t.PriceHistoryShowMoreInfoTooltip="PriceHistoryShowMoreInfoTooltip",t.PriceHistoryHideMoreInfoTooltip="PriceHistoryHideMoreInfoTooltip",t.ActivateCashBackButton="ActivateCashBackButton",t.CashBackWillNotRender="CashBackWillNotRender",t.CashBackButtonShown="CashBackButtonShown",t.CashBackSignInButtonShown="CashBackSignInButtonShown",t.ErrorPageHandlerFunction="ErrorPageHandlerFunction",t.FlyoutAutoPriceHistoryTrigger="FlyoutAutoPriceHistoryTrigger",t.FlyoutDismissedPriceHistoryTrigger="FlyoutDismissedPriceHistoryTrigger",t.InlineRatingRendered="InlineRatingRendered",t.RatingsAndReviewsRendered="RatingsAndReviewsRendered",t.AutoOpenUsingUrlParam="AutoOpenUsingUrlParam",t.ContextMenuInfo="ContextMenuInfo",t.AddedToCartNotification="AddedToCartNotification",t.CashBackActivated="CashBackActivated",t.ErrorCashBackActivation="ErrorCashBackActivation",t.CheckoutUserDataInvalid="CUDInvalid",t.ExpressCheckout="ECOnly",t.OtherSeller="OtherSeller",t.ModuleViewed="ModuleViewed",t.RewardWillBeRendered="RewardWillBeRendered",t.RewardSignInSuccess="RewardSignInSuccess",t.ErrorRewardSignIn="ErrorRewardSignIn",t.RewardNotification="RewardNotification",t.PackageTrackingCardViewed="PackageTrackingCardViewed",t.ShownOnPinterest="ShownOnPinterest",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.SustainabilityConfirmation="SustainabilityConfirmation",t.SustainabilityPDP="SustainabilityPDP",t.AutosMarketplaceRenderNotification="AutosMarketplaceNotification",t.AutosPriceInsightRenderNotification="AutosPriceInsightRenderNotification",t.AutosMarketplaceRenderViewModule="AutosMarketplaceRenderViewModule",t.AutosPriceInsightRenderViewModule="AutosPriceInsightRenderViewModule",t.AutosMarketplaceListingHovered="AutosMarketplaceListingHovered",t.AutosMarketDwellTimeHover="AutosMarketDwellTimeHover",t.AutosPriceInsightHovered="AutosPriceInsightHovered",t.AutosPriceInsightDwellTimeHover="AutosPriceInsightDwellTimeHover",t.PerfViewModule="PerfViewModule",t.PerfCreateAndRender="PerfCreateAndRender",t.PerfPauseAutoShow="PerfPauseAutoShow",t.PerfAddModulesToTabs="PerfAddModulesToTabs",t.ErrorToRecordEngagement="ErrorToRecordEngagement",t.ErrorPaneStuckLoadingState="ErrorPaneStuckLoadingState",t.SavingsFoundShown="SavingsFoundShown",t.ErrorRewardsAdded="ErrorRewardsAdded",t.ItemizedCashback="ICList",t.ItemizedCashbackActivated="ICActivedList",t.ItemizedCashbackActivatedSeeAll="ICActivedListSeeAll",t.ItemizedCashbackActivatedNavigateToRetailer="ICActivatedNavigateToRetailer",t.ItemizedCashbackActivatedHover="ICActivatedHover",t.ItemizedCashbackActivateClick="ICActivateClick",t.ItemizedCashbackOfferClick="ICOfferClick",t.ItemizedCashbackShopCartClick="ICActivateShopCartClick",t.ItemizedCashbackHover="ICHoverItem",t.ICActivatedNotification="ICItemActivatedNotification",t.ICActivatedNotificationHover="ICItemActivatedNotificationHover",t.ICPDPActivatedHover="ICPDPActivatedHover",t.ICPdpCashbackNotificationHover="ICPdpCashbackNotificationHover",t.ICPDPCashbackActivateClick="ICPDPCashbackActivateClick",t.ICConfirmationNotification="ICItemConfirmNotification",t.BlockedAutoOpenEngagement="BlockedAutoOpenEngagement",t.ICApiDataUnavailable="ICApiDataUnavailable",t.CouponExpectationTooltipOpen="CouponExpectationTooltipOpen",t.CouponExpectationTooltipRead="CouponExpectationTooltipRead",t.NotificationModuleRequired="NotificationModuleRequired",t.PersonalizedCashbackList="PersonalizedCashbackList",t.CategoryFilterClick="CategoryFilterClick",t.PersonalizedAutoTriggerOff="PersonalizedAutoTriggerOff"}(A||(A={})),function(t){t.Error="Error",t.Negative="Negative",t.Positive="Positive",t.Cancelled="Cancelled"}(T||(T={})),function(t){t.Error="Error",t.Negative="Negative",t.Positive="Positive"}(D||(D={})),function(t){t.Valid="Valid",t.NotApplicable="NotApplicable",t.LowSuccess="LowSuccess",t.MinPurchaseNotMet="MinPurchaseNotMet",t.CalculatedCutOffPriceNotMet="CalculatedCutOffPriceNotMet",t.WorseDiscountPercent="WorseDiscountPercent"}(k||(k={})),function(t){t[t.ApplyCouponsMessage=1]="ApplyCouponsMessage",t[t.AutoApplyCompletedMessage=2]="AutoApplyCompletedMessage",t[t.CheckoutPageMessage=3]="CheckoutPageMessage",t[t.CloseOverlayMessage=4]="CloseOverlayMessage",t[t.ClosedPopupMessage=5]="ClosedPopupMessage",t[t.CountElementsResponse=6]="CountElementsResponse",t[t.CreateOverlayMessage=7]="CreateOverlayMessage",t[t.CreatePopupMessage=8]="CreatePopupMessage",t[t.CreatePriceComparisonMessage=9]="CreatePriceComparisonMessage",t[t.EdgeApplyCouponsMessage=10]="EdgeApplyCouponsMessage",t[t.EmptyResponse=11]="EmptyResponse",t[t.ErrorResponse=12]="ErrorResponse",t[t.GetCompetingPricesMessage=13]="GetCompetingPricesMessage",t[t.GetCompetingPricesResponse=14]="GetCompetingPricesResponse",t[t.GetTextValueResponse=15]="GetTextValueResponse",t[t.GetUIStateMessage=16]="GetUIStateMessage",t[t.GetUIStateResponse=17]="GetUIStateResponse",t[t.MoveProgressBarMessage=18]="MoveProgressBarMessage",t[t.ShowResultMessage=19]="ShowResultMessage",t[t.TelemetryMessage=20]="TelemetryMessage",t[t.UpdateCurrentCouponMessage=21]="UpdateCurrentCouponMessage",t[t.OpalMessage=22]="OpalMessage",t[t.ProductPageMessage=23]="ProductPageMessage",t[t.ProductPageResponse=24]="ProductPageResponse",t[t.EdgeCreateOverlayMessage=25]="EdgeCreateOverlayMessage",t[t.EdgeShowResultMessage=26]="EdgeShowResultMessage",t[t.VerifySelectorsMessage=27]="VerifySelectorsMessage",t[t.VerifySelectorsResponse=28]="VerifySelectorsResponse",t[t.AutoApplyCancelledMessage=29]="AutoApplyCancelledMessage",t[t.ContentInitMessage=30]="ContentInitMessage",t[t.ClearDataMessage=31]="ClearDataMessage",t[t.DOMMutationMessage=32]="DOMMutationMessage",t[t.UpdateCurrencyMessage=33]="UpdateCurrencyMessage",t[t.CheckoutProgressMessage=34]="CheckoutProgressMessage",t[t.ECCreateOverlayMessage=35]="ECCreateOverlayMessage",t[t.ECShowResultMessage=36]="ECShowResultMessage",t[t.ECFieldErrorMessage=37]="ECFieldErrorMessage",t[t.ECCreateUpdatePaymentOverlayMessage=38]="ECCreateUpdatePaymentOverlayMessage",t[t.PrintableGroceryCouponsMessage=39]="PrintableGroceryCouponsMessage",t[t.WalletDrawerCreateOverlayMessage=40]="WalletDrawerCreateOverlayMessage",t[t.WalletDrawerCloseMessage=41]="WalletDrawerCloseMessage",t[t.BackgroundAutoApplyCancelledMessage=42]="BackgroundAutoApplyCancelledMessage",t[t.GetChcekedValueResponse=43]="GetChcekedValueResponse"}(I||(I={})),function(t){t[t.IOS=0]="IOS",t[t.Android=1]="Android"}(w||(w={})),function(t){t[t.PlainString=0]="PlainString",t[t.JsonString=1]="JsonString"}(P||(P={})),function(t){t[t.FromBackground=1]="FromBackground",t[t.FromContent=2]="FromContent"}(O||(O={})),function(t){t.HandleBackgroundMessage="HandleBackgroundMessage",t.HandleContentMessage="HandleContentMessage"}(R||(R={})),function(t){t.Opal="Opal",t.Extension="Extension",t.Edge="Edge",t.EdgeMobile="EdgeMobile",t.Sapphire="Sapphire",t.RBC="RBC"}(M||(M={})),function(t){t.AutoApplyCoupons="AutoApplyCoupons",t.CouponClipping="CouponClipping",t.BackgroundAutoApply="BackgroundAutoApply",t.FallBackAutoApply="FallBackAutoApply",t.ProductPageBackgroundAutoApply="ProductPageBackgroundAutoApply",t.BackgroundAAResult="BackgroundAAResult",t.AutoCouponClipping="AutoCouponClipping"}(N||(N={})),function(t){t.ProductPageBackgroundAutoApply="ProductPageBackgroundAutoApply",t.BackgroundAutoApply="BackgroundAutoApply",t.ForegroundAutoApply="ForegroundAutoApply"}(L||(L={}));var F,H,B,U,V,G,W,$,z;!function(t){t.VALIDATION_ERROR="VALIDATION_ERROR",t.SERVER_ERROR="SERVER_ERROR"}(F||(F={})),function(t){t.AMEX="A",t.DISCOVER="D",t.MASTERCARD="M",t.VISA="V",t.ZIP="Z"}(H||(H={})),function(t){t.ExpressCheckout="ExpressCheckout",t.ECWithBNPL="ECWithBNPL",t.ECWithoutPayment="ECWithoutPayment"}(B||(B={})),function(t){t.Wallet="Wallet",t.Shopping="Shopping"}(U||(U={})),function(t){t.AutoApplyTransactionsKey="ListOfAutoApplyTransactions",t.CouponClippingTransactionsKey="ListOfCouponClippingTransactions",t.CashbackTransactionsKey="ListOfCashbackTransactions"}(V||(V={})),function(t){t.UserCouponFailed="UserCouponFailed",t.BetterInitialPrice="BetterInitialPrice",t.CouponNotInOurCorpus="CouponNotInOurCorpus",t.ManuallyAppliedCouponNotInOurCorpus="ManuallyAppliedCouponNotInOurCorpus",t.SuggestedCoupon="SuggestedCoupon"}(G||(G={})),function(t){t.Flyout="Flyout",t.Validator="Validator",t.Driver="Driver"}(W||(W={})),function(t){t.High="High",t.Medium="Medium",t.Low="Low",t.None="None"}($||($={})),function(t){t[t.PositiveResultShown=6]="PositiveResultShown",t[t.NegativeResultShown=7]="NegativeResultShown",t[t.PositiveResultClicked=10]="PositiveResultClicked",t[t.NegativeResultClicked=11]="NegativeResultClicked"}(z||(z={}));var K="2.098";document.body=document.createElement("body");var Y=function(){function t(){s(this,t)}return r(t,[{key:"HandleAdditionalBody",value:function(){var t=document.querySelectorAll("body");t&&t.length>1&&t[0].attributes[0].textContent&&(t[1].setAttribute("style",t[0].attributes[0].textContent),t[0].remove())}}]),t}();function j(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var q=!1,Z=function(t){return!!(t instanceof Array&&Object.isFrozen(t))},X=function(t,e){return function(t){if(Z(t)&&t.raw&&Z(t.raw)&&t.length===t.raw.length&&1===t.length)return t.join("");if(q)return t.join("");throw new TypeError("Static Types only allows static Template literals")}(e)},J={createHTML:X,createScript:X,createScriptURL:X},Q=function(){function t(){s(this,t)}return r(t,null,[{key:"getTrustedHTML",value:function(t){return this.staticPolicy.createHTML("",t)}},{key:"getTrustedScript",value:function(t){return this.staticPolicy.createHTML("",t)}},{key:"getTrustedScriptURL",value:function(t){return this.staticPolicy.createHTML("",t)}},{key:"setStoryBook",value:function(){q=!0}}]),t}();f(Q,"staticPolicy",window.trustedTypes?window.trustedTypes.createPolicy("shopping-static",J):J);var tt,et,nt,it,ot,at,rt,st,lt,ct,ut,dt,ht,pt,ft,gt,mt=Q;!function(t){t.Primary="btnPrimary",t.PrimarySmallNotification="btnPrimarySmallNotification",t.PrimaryColor="btnPrimaryColor",t.Secondary="btnSecondary",t.SimpleOutline="btnSimpleOutline"}(gt||(gt={}));var vt,yt,Ct,bt,St,xt,Et,At,Tt,Dt,kt,It,wt,Pt,Ot,Rt,Mt,Nt,Lt,_t,Ft,Ht,Bt,Ut,Vt,Gt,Wt,$t,zt,Kt,Yt,jt=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        fluent-design-system-provider {\n            --product-wrapper-border: 1px solid rgb(236, 236, 236);\n            --text-price-color: rgba(0, 0, 0, 0.83);\n            --text-savings-color: #DE3700;\n            --text-price-savings-color: #008A21;\n            --text-retailer-color: rgba(0, 0, 0, 0.83);\n\n            --section-separator-opacity: 1;\n\n            --show-more-btn-bg-color: inherit;\n\n            --tooltip-background-color: #FFFFFF;\n\n            --coupon-selected-color: #207A90;\n\n            --coupon-success-color: #DE3700;\n            --coupon-success-bg-start: #FFEEF5;\n            --coupon-success-bg-mid: #FFFBF0;\n            --coupon-success-bg-end: #FFFFFF;\n\n            --coupon-success-border: rgba(245, 214, 216, 0.3);\n\n            --coupon-success-hover-bg-start: #FFF1F7;\n            --coupon-success-hover-bg-mid: #FFFEF0;\n            --coupon-success-hover-bg-end: #FFFFFF;\n\n            --coupon-control-bg-start: #EDFBFF;\n            --coupon-control-bg-end: #FFFFFF;\n\n            --coupon-control-border: rgba(201, 225, 231, 0.3);\n            --coupon-control-hover-bg-start: #FFFFFF;\n            --coupon-control-hover-bg-end: #EDFBFF;\n\n            --coupon-success-rate-bg-start: #E4008A;\n            --coupon-success-rate-bg-mid: #FF4B14;\n            --coupon-success-rate-bg-end: #FF8D24;\n\n            --coupon-title-hover-color: #666666;\n            --coupon-non-stackable-msg-color: #666666;\n        }\n        html {\n            overflow: hidden;\n            --background-outline-rest: padding-box linear-gradient(#FFFFFF, #FFFFFF), border-box linear-gradient(#efefef 90%, #d6d6d6 100%);\n            --background-outline-hover: padding-box linear-gradient(#F7F7F7, #F7F7F7), border-box linear-gradient(#e5e5e5 90%, #cecece 100%);\n            --background-outline-secondary-rest: padding-box linear-gradient(var(--fill-color), var(--fill-color)), border-box linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n        }\n        msft-edge-shopping::part(header) {\n            margin-top: 12px;\n        }\n        fluent-anchor {\n            font-weight: 600;\n        }\n        .imgProduct {\n            width: auto;\n            height: auto;\n            box-sizing: border-box;\n            place-self: center;\n            object-fit: cover;\n        }\n        .divProductImageContainer {\n            position: relative;\n            background-color: #FFFFFF;\n            background-position: center;\n            background-size: cover;\n            border-radius: 8px;\n            font-weight: 600;\n            font-size: 12px;\n            line-height: 12px;\n            text-align: center;\n            color: #000000;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            overflow: hidden;\n            place-self: center;\n        }\n        .divProductImageAlpha {\n            background: rgba(0, 0, 0, 0.03);\n            position: absolute;\n            top: 0px;\n            left: 0px;\n            object-fit: cover;\n        }\n        msft-shopping-coupon,\n        msft-shopping-link {\n            margin-top: 5px;\n        }\n        msft-edge-shopping-section {\n            margin-top: 10px;\n            width: 100%;\n        }\n        msft-shopping-link:first-of-type,\n        msft-shopping-coupon:first-of-type {\n            margin-top: 0;\n        }\n        fluent-menu-item::part(content) {\n            width: 100%;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n        }\n        msft-edge-shopping::part(footer){\n            padding: 0px;\n            margin-top: 0px;\n            display: flex;\n            flex-direction: column;\n            border-top: none;\n        }\n        .noInlinePadding::part(action) {\n            margin-inline-start: 0px;\n        }\n        fluent-anchor,\n        fluent-button,\n        fluent-card {\n            font-size: 12px;\n        }\n        #remindLater::part(control) {\n            display: flex;\n            align-self: center;\n        }\n        #remindLater {\n            margin-top: 5px;\n            margin-bottom: 5px;\n        }\n        #footerDiv {\n            display: grid;\n            column-gap: 12px;\n            justify-content: center;\n            width: 100%;\n            margin-top: 10px;\n            margin-bottom: 10px;\n            grid-template-columns: calc(50% - 22px) calc(50% - 22px);\n        }\n        .headerMargin {\n            width: calc(100% - 32px)!important;\n            margin: auto;\n        }\n        #notshow::part(content) {\n            display: flex;\n            flex-direction: row;\n            width: 100%;\n            justify-content: space-between;\n        }\n        #doNotShowOverlay {\n            position: absolute;\n            right: 20px;\n            width: 73%;\n            bottom: 40px;\n            z-index: 1;\n        }\n        #doNotShowOverlay fluent-menu-item {\n            grid-template-columns: minmax(14px, auto) 1fr minmax(12px, auto);\n        }\n        ::part(sections) {\n            position: relative;\n            margin-top: 10px;\n            padding: 0px!important;\n        }\n        .noSections::part(sections) {\n            margin-top: 0px!important;\n        }\n        ::part(start-content) {\n            padding: 0px;\n        }\n        ::part(actions) {\n            width: 100%;\n            border-bottom: unset;\n            padding-bottom: 0px;\n            padding-top: 0px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n        [slot=\"actions\"] {\n            margin-top: 10px;\n        }\n        msft-shopping-link:last-of-type {\n            margin-bottom: 5px;\n        }\n        msft-shopping-coupon:last-of-type {\n            margin-bottom: 5px;\n        }\n        ::part(start-content) {\n            padding-top: 0px;\n            padding-bottom: 0px;\n        }\n        #divContentWrapper {\n            width: 360px;\n            height: auto;\n        }\n        body {\n            margin: 0px;\n        }\n        .hide {\n            display: none;\n        }\n        msft-edge-shopping {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            height: auto;\n            max-height: 580px;\n        }\n        #divContentWrapper.ms-edge-shopping-650 msft-edge-shopping {\n            max-height: 650px;\n        }\n        fluent-design-system-provider {\n            width: 360px;\n            margin: 0px;\n        }\n        .txtLarge {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 24px;\n            line-height: 28px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtMedium {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 16px;\n            line-height: 20px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 20px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtEmptyCoupons {\n            all: initial;\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 18px;\n            line-height: 25px;\n            margin: 0px;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        .defaultFontFamily {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        }\n        msft-shopping-link::part(attribution) {\n            margin-top: 6px;\n        }\n        .sectionSeparator {\n            position: absolute;\n            border: 1px solid #000000;\n            opacity: 0.04;\n            margin-bottom: 0px;\n            margin-top: 0px;\n            border-bottom: unset;\n            width: 360px;\n            left: 0px;\n            right: 0px;\n        }\n        ::part(control) {\n            margin-bottom: 0px;\n        }\n        .triviaTitle {\n            display: inline;\n            margin: 0px;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 36px;\n            vertical-align: middle;\n            text-align: center;\n        }\n        .savingsFoundTextContainer {\n            display: flex;\n            justify-content: center;\n            column-gap: 3px;\n            line-height: normal;\n            margin-top: 6px;\n        }\n        .savingsFoundTextContainer:last-child {\n            margin-bottom: 6px;\n        }\n        .infoicon {\n            align-self: center;\n            display: inline;\n            position: relative;\n            top: -10px;\n        }\n        ::part(tooltip) {\n            white-space: unset;\n            font-size: 10px;\n            hyphens: auto;\n            padding: 4px 6px;\n            line-height: 12px;\n            padding-bottom: 8px;\n        }\n        .btnTooltip {\n            border: none;\n            outline: none;\n            border-radius: 4px;\n            background: transparent;\n        }\n        #remindLaterFooter {\n            font-size: 14px;\n            margin-left: 10px;\n            --accent-foreground-hover: none;\n        }\n        .btnTooltip:focus-visible {\n            box-shadow: 0 0 0 2px inset #fbfdfe, 0 0 0 1px #878787;\n            border: 1px solid #878787;\n        }\n        .infoiconsvg {\n            fill: #000000;\n        }\n        .newSeeMore {\n            width: 100%;\n            border-radius: 8px;\n            padding: 2px 0px;\n            margin: 0px 20px 24px 20px;\n            background-color: #FFFFFF;\n        }\n        @keyframes updownAnimation {\n            0% {\n              transform: translateY(-40%);\n            }\n            50% {\n              transform: translateY(40%);\n            }\n            100% {\n              transform: translateY(-40%);\n            }\n        }\n        ::part(header-fixed) {\n            height: 44px;\n            box-sizing: border-box;\n        }\n        ::part(header-fixed-title) {\n            font-weight: 400;\n        }\n        .btnPrimary {\n            width: 100%;\n            height: 44px;\n            font-weight: 600;\n            font-size: 16px;\n            line-height: 20px;\n            border-radius: 8px;\n        }\n        .btnPrimaryColor {\n            width: 100%;\n            height: 48px;\n            font-weight: 600;\n            font-size: 16px;\n            line-height: 20px;\n            color: #FFFFFF;\n            background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n        }\n        .btnPrimaryColor:hover {\n            background: linear-gradient(90.05deg, #9E00FF 0.59%, #0048D4 67.54%, #00FFC2 104.11%);\n        }\n        .btnSimpleOutline {\n            height: 32px;\n            font-weight: 400;\n            font-size: 14px;\n            border-radius: 4px;\n        }\n        .btnSimpleOutline::part(control) {\n            background: var(--background-outline-rest);\n        }\n        .btnSimpleOutline::part(control):hover {\n            background: var(--background-outline-hover);\n        }\n        .btnSecondary {\n            color: #008076;\n            height: 32px;\n            font-weight: 400;\n            font-size: 14px;\n            border-radius: 4px;\n        }\n        .btnSecondary::part(control) {\n            background: var(--background-outline-secondary-rest);\n        }\n        .txtGradient {\n            font-weight: 500;\n            background: linear-gradient(93.45deg, #E4008A -4.64%, #FF4B14 75.79%, #ED7100 106.45%);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n        }\n        .btnPrimarySmallNotification {\n            width: 100%;\n            height: 32px;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 20px;\n            border-radius: 4px;\n        }\n        @media (forced-colors: active) {\n            msft-edge-shopping {\n                background-image: unset!important;\n            }\n            .btnTooltip:focus-visible {\n                border: 1px solid buttontext;\n                box-shadow: highlighttext 0px 0px 0px 2px inset;\n            }\n            #flyoutCloseWhite>path .viewMorePricesButton>svg>path {\n                fill: buttonText!important;\n            }\n        }\n        @media (-ms-high-contrast: active) {\n            .infoiconsvg {\n                fill:Text;\n            }\n            .btnTooltip:focus {\n                outline: auto;\n            }\n        }\n        .txtInstantSavings {\n            color: #107C10;\n        }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        fluent-design-system-provider {\n            --text-retailer-color: #FFFFFF;\n            --text-price-color: #FFFFFF;\n            --text-savings-color: #FFB833;\n            --text-price-savings-color:#35D95B;\n            --product-wrapper-border: 1px solid rgb(236, 236, 236, 0.08);\n\n            --section-separator-opacity: 0.08;\n            --section-separator-color: #FFFFFF;\n\n            --show-more-btn-bg-color: var(--neutral-fill-rest);\n\n            --tooltip-background-color: #3b3b3b;\n\n            --coupon-selected-color: #41CFF2;\n\n            --coupon-success-color: #FFB833;\n            --coupon-success-bg-start: rgba(255, 0, 107, 0.08);\n            --coupon-success-bg-mid: rgba(255, 184, 0, 0.08);\n            --coupon-success-bg-end: rgba(255, 255, 255, 0);\n\n            --coupon-success-border: rgba(245, 214, 216, 0.3);\n\n            --coupon-success-hover-bg-start: rgba(255, 0, 107, 0.08);\n            --coupon-success-hover-bg-mid: rgba(255, 230, 0, 0.08);\n            --coupon-success-hover-bg-end: rgba(255, 255, 255, 0);\n\n            --coupon-control-bg-start: rgba(0, 198, 255, 0.08);\n            --coupon-control-bg-end: rgba(255, 255, 255, 0);\n\n            --coupon-control-border: rgba(201, 225, 231, 0.3);\n            --coupon-control-hover-bg-start: rgba(255, 255, 255, 0);\n            --coupon-control-hover-bg-end: rgba(0, 198, 255, 0.08);\n\n            --coupon-success-rate-bg-start: #C11371;\n            --coupon-success-rate-bg-mid: #E74818;\n            --coupon-success-rate-bg-end: #F78216;\n            --coupon-title-hover-color: #C4C4C4;\n            --coupon-non-stackable-msg-color: #FFFFFF;\n        }\n        html {\n            --background-outline-rest: padding-box linear-gradient(#333333, #333333), border-box linear-gradient(#505050 0%, #383838 10%);\n            --background-outline-hover: padding-box linear-gradient(#383838, #383838), border-box linear-gradient(#595959 0%, #414141 10%);\n            --background-outline-secondary-rest: padding-box linear-gradient(#3b3b3b, #3b3b3b), border-box linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n        }\n        .txtEmptyCoupons {\n            color: #FFFFFF;\n        }\n        .tirivaSavings {\n            color: #FFFFFF!important;\n        }\n        .sectionSeparator {\n            opacity: 0.08;\n        }\n        .infoiconsvg {\n            fill: #FFFFFF;\n        }\n        #notshow::part(control) {\n            background: none;\n        }\n        #snooze::part(control) {\n            background: none;\n        }\n        .newSeeMore {\n            background-color: #424242;\n        }\n        .divSeeMore {\n            border-top: 1px solid rgba(236, 236, 236, 0.08)!important;\n        }\n        .txtGradient {\n            background: linear-gradient(90.3deg, #FF51BA 0.13%, #FF7348 48.78%, #FFAA2B 95.36%);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n        }\n        .btnSecondary {\n            color: #09E6C3;\n        }\n        .txtInstantSavings {\n            color: #62C90C;\n        }\n        "}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 280px;\n        }\n        .btnSimpleOutline::part(control) {\n            padding: 8px;\n        }\n        #footerDiv {\n            column-gap: 8px;\n            margin-top: 7px;\n            margin-bottom: 7px;\n        }\n        .headerMargin {\n            width: calc(100% - 36px)!important;\n            margin: auto;\n        }\n        ::part(header-fixed) {\n            border-bottom: 1px solid #EBEBEB;\n        }\n        .h2RebatesTitle {\n            font-weight: 500 !important;\n            line-height: 28px !important;\n            font-size: 20px!important;\n        }\n        .spanCommisionValue {\n            background: #036AC4!important;\n            height: 24px!important;\n            font-size: 20px!important;\n            line-height: 20px!important;\n            padding-top: 1px;\n            box-sizing: border-box;\n        }"}},{key:"getColoredHeaderCssExp1",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(90.79deg, #E4FCFF 3.55%, #D2F7FF 23.38%, #81D1FF 49.35%, #558EFF 70.12%, #1F65F1 90.42%);\n        }\n        ::part(header-fixed-title) {\n            color: #001C56;\n            font-weight: 400;\n        }\n        #flyoutMenu, #flyoutClose {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp2",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(270deg, #1F65F1 0%, #1F65F1 35.42%, #1F65F1 68.23%, #6BC1FF 88.54%, #B6FBFF 100%);\n        }\n        ::part(header-fixed-title) {\n            color: #FFFFFF;\n            font-weight: 400;\n        }\n        #flyoutClose, #flyoutMenu {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp3",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(270deg, #1F65F1 0%, #1F65F1 35.42%, #1F65F1 68.23%, #6BC1FF 88.54%, #B6FBFF 100%);\n        }\n        ::part(header-fixed-title) {\n            color: #FFFFFF;\n            font-weight: 400;\n        }\n        #flyoutClose, #flyoutMenu {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp4",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(268.01deg, #CFE1FF -2.15%, #D8F6FF 50.34%, #EEFEFA 88.77%);\n        }\n        ::part(header-fixed-title) {\n            font-weight: 400;\n        }\n        "}},{key:"getGreenCheck",value:function(){return mt.getTrustedHTML(tt||(tt=j(['<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0ZM13.2197 6.96967L8.75 11.4393L6.78033 9.46967C6.48744 9.17678 6.01256 9.17678 5.71967 9.46967C5.42678 9.76256 5.42678 10.2374 5.71967 10.5303L8.21967 13.0303C8.51256 13.3232 8.98744 13.3232 9.28033 13.0303L14.2803 8.03033C14.5732 7.73744 14.5732 7.26256 14.2803 6.96967C13.9874 6.67678 13.5126 6.67678 13.2197 6.96967Z" fill="#107C10"/></svg>'])))}},{key:"getInfoIcon",value:function(){return mt.getTrustedHTML(et||(et=j(['\n        <svg width="10" height="10" viewBox="0 0 10 10" aria-hidden="true" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path class="infoiconsvg" d="M4.5 5.5C4.5 5.22386 4.72386 5 5 5C5.27614 5 5.5 5.22386 5.5 5.5V7C5.5 7.27614 5.27614 7.5 5 7.5C4.72386 7.5 4.5 7.27614 4.5 7V5.5ZM5 2.75C4.58579 2.75 4.25 3.08579 4.25 3.5C4.25 3.91421 4.58579 4.25 5 4.25C5.41421 4.25 5.75 3.91421 5.75 3.5C5.75 3.08579 5.41421 2.75 5 2.75ZM0 5C0 2.23858 2.23858 0 5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1Z" fill="black" fill-opacity="0.55"/>\n        </svg>\n        '])))}},{key:"getGreenCheckCircle",value:function(){return mt.getTrustedHTML(nt||(nt=j(['<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="18" height="18" viewBox="0 0 18 18" fill="none">\n        <path d="M9 0C9.82617 0 10.623 0.108398 11.3906 0.325195C12.1582 0.536133 12.873 0.837891 13.5352 1.23047C14.2031 1.62305 14.8096 2.09473 15.3545 2.64551C15.9053 3.19043 16.377 3.79688 16.7695 4.46484C17.1621 5.12695 17.4639 5.8418 17.6748 6.60938C17.8916 7.37695 18 8.17383 18 9C18 9.82617 17.8916 10.623 17.6748 11.3906C17.4639 12.1582 17.1621 12.876 16.7695 13.5439C16.377 14.2061 15.9053 14.8125 15.3545 15.3633C14.8096 15.9082 14.2031 16.377 13.5352 16.7695C12.873 17.1621 12.1582 17.4668 11.3906 17.6836C10.623 17.8945 9.82617 18 9 18C8.17383 18 7.37695 17.8945 6.60938 17.6836C5.8418 17.4668 5.12402 17.1621 4.45605 16.7695C3.79395 16.377 3.1875 15.9082 2.63672 15.3633C2.0918 14.8125 1.62305 14.2061 1.23047 13.5439C0.837891 12.876 0.533203 12.1582 0.316406 11.3906C0.105469 10.623 0 9.82617 0 9C0 8.17383 0.105469 7.37695 0.316406 6.60938C0.533203 5.8418 0.837891 5.12695 1.23047 4.46484C1.62305 3.79688 2.0918 3.19043 2.63672 2.64551C3.1875 2.09473 3.79395 1.62305 4.45605 1.23047C5.12402 0.837891 5.8418 0.536133 6.60938 0.325195C7.37695 0.108398 8.17383 0 9 0ZM14.2998 6.02051L13.1045 4.8252L7.3125 10.6172L4.89551 8.2002L3.7002 9.39551L7.3125 13.0078L14.2998 6.02051Z" fill="#107C10"/>\n        <path d="M11.2547 0.806371L11.2547 0.806383L11.2581 0.807322C11.9842 1.00685 12.6577 1.29147 13.2801 1.66056L13.2818 1.66153C13.9125 2.03217 14.4846 2.47716 14.9991 2.99717L14.999 2.99719L15.0028 3.00095C15.5228 3.51542 15.9678 4.08755 16.3385 4.71819L16.3394 4.71985C16.7085 5.34233 16.9931 6.01579 17.1927 6.74187L17.1936 6.74528C17.3975 7.46707 17.5 8.21813 17.5 9C17.5 9.78187 17.3975 10.5329 17.1936 11.2547L17.1927 11.2581C16.9932 11.9842 16.7085 12.6609 16.339 13.2897C15.9681 13.9152 15.5223 14.4883 15.0009 15.0097C14.4862 15.5245 13.9134 15.9673 13.2818 16.3385L13.2802 16.3394C12.6572 16.7088 11.9831 16.9966 11.2564 17.202C10.5341 17.4003 9.78247 17.5 9 17.5C8.21755 17.5 7.46593 17.4003 6.74368 17.202C6.01692 16.9966 5.33955 16.7087 4.71019 16.3389C4.08456 15.9679 3.51145 15.5251 2.99028 15.0097C2.47492 14.4885 2.03207 13.9154 1.66101 13.2897C1.29126 12.6604 1.00347 11.9831 0.79807 11.2564C0.599745 10.5342 0.5 9.7825 0.5 9C0.5 8.21751 0.599742 7.46586 0.798061 6.74358C1.00346 6.01688 1.29118 5.34283 1.66055 4.71985L1.66056 4.71985L1.66153 4.71819C2.03274 4.08658 2.47549 3.51384 2.99027 2.99906C3.51164 2.47769 4.08476 2.032 4.71019 1.66107C5.33903 1.29158 6.01578 1.00686 6.74187 0.807322L6.74187 0.807334L6.74528 0.806371C7.46707 0.602506 8.21813 0.5 9 0.5C9.78187 0.5 10.5329 0.602506 11.2547 0.806371ZM14.6534 6.37406L15.0069 6.02051L14.6534 5.66695L13.458 4.47164L13.1045 4.11809L12.7509 4.47164L7.3125 9.91008L5.24906 7.84664L4.89551 7.49309L4.54195 7.84664L3.34664 9.04195L2.99309 9.39551L3.34664 9.74906L6.95895 13.3614L7.3125 13.7149L7.66605 13.3614L14.6534 6.37406Z" stroke="black" stroke-opacity="0.07"/>\n        </svg>'])))}},{key:"getCloseButton",value:function(){return mt.getTrustedHTML(it||(it=j(['<svg id="flyoutClose" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z"/>\n        </svg>'])))}},{key:"getArrowButtonIcon",value:function(){return mt.getTrustedHTML(ot||(ot=j(['<svg aria-hidden="true" width="17" height="17" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.8527 7.64582C16.0484 7.84073 16.0489 8.15731 15.854 8.35292L10.389 13.8374C10.1741 14.0531 9.82477 14.0531 9.60982 13.8374L4.14484 8.35292C3.94993 8.15731 3.95049 7.84073 4.1461 7.64582C4.34171 7.4509 4.65829 7.45147 4.85321 7.64708L9.99942 12.8117L15.1456 7.64708C15.3406 7.45147 15.6571 7.4509 15.8527 7.64582Z" fill="#FA003C"/>\n        </svg>'])))}},{key:"getSnoozeLineButton",value:function(){return mt.getTrustedHTML(at||(at=j(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7.96379 3C5.89462 3 3.96372 4.62135 3.96372 7.16667V9.9352L3.08616 12H12.8659L11.9637 9.93793V8.5C11.9637 8.22387 12.1876 8 12.4637 8C12.7399 8 12.9637 8.22387 12.9637 8.5V9.72873L13.8842 11.8327C14.1251 12.3832 13.7217 13 13.1207 13H9.96499C9.96446 14.1047 9.06873 15 7.96393 15C6.85913 15 5.96346 14.1047 5.96289 13H2.83422C2.23704 13 1.8337 12.3903 2.06728 11.8407L2.96372 9.73147V7.16667C2.96372 4.04532 5.36638 2 7.96379 2C8.53679 2 9.10039 2.09938 9.63079 2.28798C9.89099 2.38049 10.0269 2.66641 9.93439 2.92659C9.84186 3.18678 9.55593 3.3227 9.29573 3.23019C8.87146 3.07932 8.42113 3 7.96379 3ZM7.96393 14C8.51646 14 8.96446 13.5524 8.96499 13H6.96286C6.96346 13.5524 7.41146 14 7.96393 14ZM10.1311 5.33333H8.4644L8.39659 5.3379C8.15253 5.37101 7.9644 5.5802 7.9644 5.83333C7.9644 6.10947 8.18826 6.33333 8.4644 6.33333H9.15953L8.05753 7.87607L8.02066 7.93567C7.84959 8.25947 8.08166 8.66667 8.4644 8.66667H10.1311L10.1989 8.66213C10.443 8.629 10.6311 8.4198 10.6311 8.16667C10.6311 7.89053 10.4073 7.66667 10.1311 7.66667H9.43599L10.5379 6.12395L10.5748 6.06433C10.7459 5.74053 10.5139 5.33333 10.1311 5.33333ZM14.1311 2H11.7977L11.7299 2.00457C11.4859 2.03767 11.2977 2.24687 11.2977 2.5C11.2977 2.77614 11.5216 3 11.7977 3H13.2203L11.3759 5.89823L11.3432 5.95793C11.1928 6.28083 11.4264 6.66667 11.7977 6.66667H14.1311L14.1989 6.6621C14.443 6.62899 14.6311 6.4198 14.6311 6.16667C14.6311 5.89053 14.4073 5.66667 14.1311 5.66667H12.7086L14.5529 2.76844L14.5857 2.70874C14.7361 2.38584 14.5025 2 14.1311 2Z" fill="#1A1A1A"/>\n        </svg>\n        '])))}},{key:"getSnoozeFilledButton",value:function(){return mt.getTrustedHTML(rt||(rt=j(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M10.1656 4.33333H8.4989L8.4311 4.3379C8.18703 4.37101 7.9989 4.5802 7.9989 4.83333C7.9989 5.10947 8.22276 5.33333 8.4989 5.33333H9.19403L8.09203 6.87607L8.05516 6.93567C7.8841 7.25947 8.11616 7.66667 8.4989 7.66667H10.1656L10.2334 7.66213C10.4775 7.629 10.6656 7.4198 10.6656 7.16667C10.6656 6.89053 10.4418 6.66667 10.1656 6.66667H9.4705L10.5724 5.12395L10.6093 5.06433C10.7804 4.74053 10.5484 4.33333 10.1656 4.33333ZM14.1656 1H11.8322L11.7644 1.00457C11.5204 1.03767 11.3322 1.24687 11.3322 1.5C11.3322 1.77614 11.5561 2 11.8322 2H13.2548L11.4104 4.89823L11.3777 4.95793C11.2273 5.28083 11.4609 5.66667 11.8322 5.66667H14.1656L14.2334 5.6621C14.4775 5.62899 14.6656 5.4198 14.6656 5.16667C14.6656 4.89053 14.4418 4.66667 14.1656 4.66667H12.7431L14.5874 1.76844L14.6202 1.70874C14.7706 1.38584 14.537 1 14.1656 1ZM8.46483 3.33333H10.1651C10.5038 3.33333 10.8026 3.43895 11.0426 3.61283L11.4619 2.95404C10.8373 2.79563 10.369 2.24539 10.3339 1.58029C9.6369 1.21147 8.84216 1.00261 7.9987 1.00261C5.30262 1.00261 3.09443 3.14023 3.00172 5.82738L2.99877 5.99399L2.9987 8.66853L2.05544 10.7755C1.91252 11.0948 2.05546 11.4695 2.37471 11.6124C2.45612 11.6489 2.5443 11.6677 2.63349 11.6677H13.3664C13.7162 11.6677 13.9998 11.3841 13.9998 11.0343C13.9998 10.9449 13.9808 10.8565 13.9442 10.775L12.9987 8.66827V6.66667H11.8318C11.7424 6.66667 11.6556 6.65927 11.572 6.64513C11.6322 6.80753 11.6651 6.98327 11.6651 7.16667C11.6651 7.92687 11.1006 8.5536 10.3674 8.653L10.3339 8.6576L10.1987 8.66667H8.49843C7.34563 8.66667 6.65549 7.44327 7.17056 6.46847L7.18636 6.43853L7.25856 6.32184L7.51363 5.96476C7.19796 5.68977 6.99843 5.28485 6.99843 4.83333C6.99843 4.07313 7.56303 3.44643 8.29616 3.34697L8.3297 3.34243L8.46483 3.33333ZM9.9709 12.3353C9.81176 13.2807 8.98936 14.001 7.9987 14.001C7.00803 14.001 6.18561 13.2807 6.02652 12.3353H9.9709Z" fill="#1A1A1A"/>\n        </svg>\n        '])))}},{key:"getDisableAutoOpen",value:function(){return mt.getTrustedHTML(st||(st=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.2C4.24446 1.2 1.2 4.24446 1.2 8C1.2 11.7555 4.24446 14.8 8 14.8C11.7555 14.8 14.8 11.7555 14.8 8C14.8 4.24446 11.7555 1.2 8 1.2ZM4.59944 7.39944H11.3994C11.7308 7.39944 11.9994 7.66807 11.9994 7.99944C11.9994 8.30319 11.7737 8.55423 11.4809 8.59396L11.3994 8.59944H4.59944C4.26807 8.59944 3.99944 8.33081 3.99944 7.99944C3.99944 7.69568 4.22516 7.44464 4.51802 7.40491L4.59944 7.39944H11.3994H4.59944Z"/>\n        </svg>'])))}},{key:"getEnableAutoOpen",value:function(){return mt.getTrustedHTML(lt||(lt=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.2C4.24446 1.2 1.2 4.24446 1.2 8C1.2 11.7555 4.24446 14.8 8 14.8C11.7555 14.8 14.8 11.7555 14.8 8C14.8 4.24446 11.7555 1.2 8 1.2ZM7 9.15147L10.5757 5.57574C10.8101 5.34142 11.1899 5.34142 11.4243 5.57574C11.6373 5.78875 11.6566 6.12208 11.4824 6.35697L11.4243 6.42426L7.42426 10.4243C7.21125 10.6373 6.87792 10.6566 6.64303 10.4824L6.57574 10.4243L4.57574 8.42426C4.34142 8.18995 4.34142 7.81005 4.57574 7.57574C4.78875 7.36272 5.12208 7.34336 5.35697 7.51764L5.42426 7.57574L7 9.15147L10.5757 5.57574L7 9.15147Z"/>\n        </svg>'])))}},{key:"getHeaderIcon",value:function(){return mt.getTrustedHTML(ct||(ct=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n        <path d="M14.4407 11.9085C14.2304 12.0187 14.0107 12.1173 13.7824 12.2031C13.0961 12.4609 12.3381 12.6071 11.5386 12.6071C8.58104 12.6071 6.00467 10.5726 6.00467 7.96186C6.00467 7.22779 6.4294 6.59148 7.03128 6.25635C4.35654 6.36847 3.66895 9.15637 3.66895 10.7895C3.66895 15.4066 7.92454 15.8752 8.84155 15.8752C9.33568 15.8752 10.0816 15.7312 10.5309 15.5903C10.5584 15.5812 10.5856 15.572 10.6129 15.5626C12.3478 14.9642 13.8122 13.7871 14.7747 12.2613C14.9127 12.0425 14.67 11.7883 14.4407 11.9085Z" fill="url(#paint0_linear_header)"/>\n        <path opacity="0.35" d="M14.4407 11.9085C14.2304 12.0187 14.0107 12.1173 13.7824 12.2031C13.0961 12.4609 12.3381 12.6071 11.5386 12.6071C8.58104 12.6071 6.00467 10.5726 6.00467 7.96186C6.00467 7.22779 6.4294 6.59148 7.03128 6.25635C4.35654 6.36847 3.66895 9.15637 3.66895 10.7895C3.66895 15.4066 7.92454 15.8752 8.84155 15.8752C9.33568 15.8752 10.0816 15.7312 10.5309 15.5903C10.5584 15.5812 10.5856 15.572 10.6129 15.5626C12.3478 14.9642 13.8122 13.7871 14.7747 12.2613C14.9127 12.0425 14.67 11.7883 14.4407 11.9085Z" fill="url(#paint1_radial_header)"/>\n        <path d="M6.60699 15.0887C6.0511 14.7441 5.56853 14.2897 5.18603 13.7527C4.59415 12.9217 4.2403 11.8995 4.2403 10.7897C4.2403 9.15655 5.00079 7.70997 6.17302 6.79347C6.43924 6.58534 6.78012 6.3754 7.03131 6.25652C7.22631 6.16418 7.55988 5.99792 8.00288 6.0042C8.73739 6.01462 9.29233 6.38909 9.60821 6.81434C9.85096 7.14109 10.0006 7.54366 10.0056 7.98066C10.0058 7.96754 11.5347 3.00537 5.00249 3.00537C2.25916 3.00537 0 5.60973 0 7.89385C0 9.34274 0.336211 10.4995 0.757169 11.3959C1.69471 13.3928 3.43331 14.9383 5.56007 15.6193C6.33024 15.8659 7.15075 16.0003 8.00288 16.0003C8.8867 16.0003 9.73608 15.8549 10.531 15.5905C10.0816 15.7314 9.60514 15.8086 9.11102 15.8086C8.19407 15.8086 7.33938 15.5427 6.60699 15.0887Z" fill="url(#paint2_linear_header)"/>\n        <path opacity="0.41" d="M6.60699 15.0887C6.0511 14.7441 5.56853 14.2897 5.18603 13.7527C4.59415 12.9217 4.2403 11.8995 4.2403 10.7897C4.2403 9.15655 5.00079 7.70997 6.17302 6.79347C6.43924 6.58534 6.78012 6.3754 7.03131 6.25652C7.22631 6.16418 7.55988 5.99792 8.00288 6.0042C8.73739 6.01462 9.29233 6.38909 9.60821 6.81434C9.85096 7.14109 10.0006 7.54366 10.0056 7.98066C10.0058 7.96754 11.5347 3.00537 5.00249 3.00537C2.25916 3.00537 0 5.60973 0 7.89385C0 9.34274 0.336211 10.4995 0.757169 11.3959C1.69471 13.3928 3.43331 14.9383 5.56007 15.6193C6.33024 15.8659 7.15075 16.0003 8.00288 16.0003C8.8867 16.0003 9.73608 15.8549 10.531 15.5905C10.0816 15.7314 9.60514 15.8086 9.11102 15.8086C8.19407 15.8086 7.33938 15.5427 6.60699 15.0887Z" fill="url(#paint3_radial_header)"/>\n        <path d="M9.52007 9.30364C9.46944 9.36927 9.31363 9.45977 9.31363 9.65765C9.31363 9.82046 9.41988 9.97746 9.6087 10.1093C10.5075 10.7365 12.2016 10.652 12.2062 10.652C12.9055 10.6496 13.5347 10.4573 14.0982 10.1278C14.3546 9.9779 14.5919 9.79983 14.8059 9.59652C15.5401 8.89883 15.9877 7.91563 16.0001 6.82318C16.0161 5.42222 15.5026 4.49083 15.2916 4.07842C13.967 1.48976 11.1078 0 7.99906 0C3.61686 0 0.0595379 3.52166 0.000732422 7.88757C0.0304402 5.60364 2.30036 3.75932 4.99864 3.75932C5.21742 3.75932 6.46504 3.78066 7.62399 4.38892C8.64487 4.92472 9.18013 5.57215 9.55213 6.21442C9.93845 6.88131 10.0071 7.72357 10.0071 8.05938C10.0071 8.3952 9.83782 8.89239 9.52007 9.30364Z" fill="url(#paint4_radial_header)"/>\n        <path d="M9.52007 9.30364C9.46944 9.36927 9.31363 9.45977 9.31363 9.65765C9.31363 9.82046 9.41988 9.97746 9.6087 10.1093C10.5075 10.7365 12.2016 10.652 12.2062 10.652C12.9055 10.6496 13.5347 10.4573 14.0982 10.1278C14.3546 9.9779 14.5919 9.79983 14.8059 9.59652C15.5401 8.89883 15.9877 7.91563 16.0001 6.82318C16.0161 5.42222 15.5026 4.49083 15.2916 4.07842C13.967 1.48976 11.1078 0 7.99906 0C3.61686 0 0.0595379 3.52166 0.000732422 7.88757C0.0304402 5.60364 2.30036 3.75932 4.99864 3.75932C5.21742 3.75932 6.46504 3.78066 7.62399 4.38892C8.64487 4.92472 9.18013 5.57215 9.55213 6.21442C9.93845 6.88131 10.0071 7.72357 10.0071 8.05938C10.0071 8.3952 9.83782 8.89239 9.52007 9.30364Z" fill="url(#paint5_radial_header)"/>\n        <defs>\n        <linearGradient id="paint0_linear_header" x1="3.66895" y1="11.0658" x2="14.815" y2="11.0658" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#0C59A4"/>\n        <stop offset="1" stop-color="#114A8B"/>\n        </linearGradient>\n        <radialGradient id="paint1_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(9.8253 11.149) scale(5.96154 5.66985)">\n        <stop offset="0.71659" stop-opacity="0"/>\n        <stop offset="0.9459" stop-opacity="0.53"/>\n        <stop offset="1"/>\n        </radialGradient>\n        <linearGradient id="paint2_linear_header" x1="9.54527" y1="6.23047" x2="2.58302" y2="13.814" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#1B9DE2"/>\n        <stop offset="0.16164" stop-color="#1595DF"/>\n        <stop offset="0.66749" stop-color="#0680D7"/>\n        <stop offset="1" stop-color="#0078D4"/>\n        </linearGradient>\n        <radialGradient id="paint3_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(4.45659 12.4168) rotate(-81.464) scale(8.95226 7.21381)">\n        <stop offset="0.76293" stop-opacity="0"/>\n        <stop offset="0.9459" stop-opacity="0.5"/>\n        <stop offset="1"/>\n        </radialGradient>\n        <radialGradient id="paint4_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(1.57751 2.92536) rotate(92.129) scale(12.652 26.9468)">\n        <stop stop-color="#35C1F1"/>\n        <stop offset="0.11079" stop-color="#34C1ED"/>\n        <stop offset="0.23164" stop-color="#2FC2DF"/>\n        <stop offset="0.31446" stop-color="#2BC3D2"/>\n        <stop offset="0.67338" stop-color="#36C752"/>\n        </radialGradient>\n        <radialGradient id="paint5_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.1549 4.84846) rotate(73.6747) scale(6.08366 4.96699)">\n        <stop stop-color="#66EB6E"/>\n        <stop offset="1" stop-color="#66EB6E" stop-opacity="0"/>\n        </radialGradient>\n        </defs>\n        </svg>'])))}},{key:"getMenuIcon",value:function(){return mt.getTrustedHTML(ut||(ut=j(['<svg id="flyoutMenu" xmlns="http://www.w3.org/2000/svg" width="14" height="12" viewBox="0 0 14 12">\n        <path d="M1 5C1.14062 5 1.27083 5.02604 1.39062 5.07812C1.51042 5.13021 1.61458 5.20312 1.70312 5.29688C1.79688 5.38542 1.86979 5.48958 1.92188 5.60938C1.97396 5.72917 2 5.85938 2 6C2 6.14062 1.97396 6.27083 1.92188 6.39062C1.86979 6.51042 1.79688 6.61719 1.70312 6.71094C1.61458 6.79948 1.51042 6.86979 1.39062 6.92188C1.27083 6.97396 1.14062 7 1 7C0.859375 7 0.729167 6.97396 0.609375 6.92188C0.489583 6.86979 0.382812 6.79948 0.289062 6.71094C0.200521 6.61719 0.130208 6.51042 0.078125 6.39062C0.0260417 6.27083 0 6.14062 0 6C0 5.85938 0.0260417 5.72917 0.078125 5.60938C0.130208 5.48958 0.200521 5.38542 0.289062 5.29688C0.382812 5.20312 0.489583 5.13021 0.609375 5.07812C0.729167 5.02604 0.859375 5 1 5ZM7 5C7.14062 5 7.27083 5.02604 7.39062 5.07812C7.51042 5.13021 7.61458 5.20312 7.70312 5.29688C7.79688 5.38542 7.86979 5.48958 7.92188 5.60938C7.97396 5.72917 8 5.85938 8 6C8 6.14062 7.97396 6.27083 7.92188 6.39062C7.86979 6.51042 7.79688 6.61719 7.70312 6.71094C7.61458 6.79948 7.51042 6.86979 7.39062 6.92188C7.27083 6.97396 7.14062 7 7 7C6.85938 7 6.72917 6.97396 6.60938 6.92188C6.48958 6.86979 6.38281 6.79948 6.28906 6.71094C6.20052 6.61719 6.13021 6.51042 6.07812 6.39062C6.02604 6.27083 6 6.14062 6 6C6 5.85938 6.02604 5.72917 6.07812 5.60938C6.13021 5.48958 6.20052 5.38542 6.28906 5.29688C6.38281 5.20312 6.48958 5.13021 6.60938 5.07812C6.72917 5.02604 6.85938 5 7 5ZM13 5C13.1406 5 13.2708 5.02604 13.3906 5.07812C13.5104 5.13021 13.6146 5.20312 13.7031 5.29688C13.7969 5.38542 13.8698 5.48958 13.9219 5.60938C13.974 5.72917 14 5.85938 14 6C14 6.14062 13.974 6.27083 13.9219 6.39062C13.8698 6.51042 13.7969 6.61719 13.7031 6.71094C13.6146 6.79948 13.5104 6.86979 13.3906 6.92188C13.2708 6.97396 13.1406 7 13 7C12.8594 7 12.7292 6.97396 12.6094 6.92188C12.4896 6.86979 12.3828 6.79948 12.2891 6.71094C12.2005 6.61719 12.1302 6.51042 12.0781 6.39062C12.026 6.27083 12 6.14062 12 6C12 5.85938 12.026 5.72917 12.0781 5.60938C12.1302 5.48958 12.2005 5.38542 12.2891 5.29688C12.3828 5.20312 12.4896 5.13021 12.6094 5.07812C12.7292 5.02604 12.8594 5 13 5Z"/>\n        </svg>'])))}},{key:"getSettingsIcon",value:function(){return mt.getTrustedHTML(dt||(dt=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17">\n        <path d="M7.81044 0C8.42209 0.00704958 9.03134 0.0777185 9.62836 0.210865C9.88898 0.268988 10.0839 0.486259 10.1135 0.751636L10.2553 2.02401C10.3195 2.60822 10.8128 3.0507 11.4008 3.05132C11.5589 3.05156 11.7152 3.01865 11.8613 2.95403L13.0285 2.4413C13.2712 2.33466 13.5548 2.3928 13.7361 2.58635C14.5796 3.4872 15.2077 4.56762 15.5734 5.74632C15.6522 6.00048 15.5615 6.27669 15.3473 6.43459L14.3127 7.19716C14.0176 7.41399 13.8433 7.75834 13.8433 8.12455C13.8433 8.49076 14.0176 8.8351 14.3133 9.05241L15.3488 9.81525C15.5631 9.97311 15.6539 10.2494 15.575 10.5036C15.2096 11.6821 14.5817 12.7624 13.7387 13.6634C13.5577 13.8569 13.2743 13.9152 13.0315 13.8089L11.8596 13.2954C11.5243 13.1487 11.1393 13.1702 10.8224 13.3533C10.5056 13.5364 10.2947 13.8593 10.2544 14.2231L10.1135 15.4953C10.0845 15.7577 9.89375 15.9735 9.63698 16.0346C8.42994 16.3218 7.17236 16.3218 5.96532 16.0346C5.70855 15.9735 5.51783 15.7577 5.48878 15.4953L5.34809 14.225C5.30677 13.8619 5.09558 13.54 4.77898 13.3575C4.46238 13.175 4.07796 13.1536 3.74379 13.2995L2.57161 13.813C2.32881 13.9194 2.04532 13.8611 1.86428 13.6674C1.02081 12.7654 0.392955 11.6838 0.0279603 10.504C-0.0506552 10.2499 0.0401776 9.97385 0.254331 9.81608L1.29044 9.05277C1.58556 8.83594 1.75986 8.49159 1.75986 8.12538C1.75986 7.75917 1.58556 7.41483 1.29006 7.19771L0.254594 6.43571C0.0401229 6.27787 -0.0507935 6.00149 0.0280992 5.74715C0.393725 4.56846 1.02191 3.48804 1.8654 2.58718C2.04662 2.39363 2.33024 2.33549 2.573 2.44213L3.73998 2.95477C4.07576 3.10213 4.46179 3.07987 4.7801 2.89391C5.09704 2.71007 5.30803 2.38685 5.34877 2.02304L5.4905 0.751636C5.52009 0.486125 5.71518 0.268784 5.97596 0.210785C6.57369 0.0778498 7.18359 0.00721143 7.81044 0ZM7.81059 1.24992C7.43223 1.25437 7.05492 1.28702 6.68181 1.34751L6.59104 2.16182C6.50618 2.91973 6.06699 3.59252 5.40898 3.97419C4.74694 4.36098 3.93976 4.40752 3.23745 4.09931L2.48887 3.77047C2.01226 4.34894 1.63291 5.00113 1.36573 5.7014L2.03056 6.19066C2.64623 6.64301 3.00986 7.36139 3.00986 8.12538C3.00986 8.88937 2.64623 9.60775 2.03121 10.0596L1.36533 10.5502C1.63228 11.2517 2.01169 11.9051 2.48863 12.4847L3.2429 12.1542C3.94131 11.8493 4.743 11.8939 5.40323 12.2745C6.06347 12.6551 6.5039 13.3265 6.59029 14.0855L6.68109 14.9054C7.42246 15.0315 8.17984 15.0315 8.92121 14.9054L9.01201 14.0856C9.096 13.3267 9.53592 12.6531 10.1969 12.271C10.858 11.889 11.6613 11.8442 12.361 12.1504L13.1146 12.4806C13.5911 11.9019 13.9704 11.2495 14.2375 10.5491L13.5726 10.0593C12.9569 9.60692 12.5933 8.88854 12.5933 8.12455C12.5933 7.36056 12.9569 6.64218 13.5718 6.19039L14.2359 5.70091C13.9687 5.00051 13.5893 4.3482 13.1126 3.76963L12.3655 4.09781C12.0611 4.23251 11.7318 4.30184 11.3992 4.30132C10.1744 4.30003 9.14657 3.37796 9.0129 2.16152L8.92213 1.34725C8.55085 1.28683 8.17749 1.25427 7.81059 1.24992ZM7.80004 4.99996C9.52593 4.99996 10.925 6.39907 10.925 8.12496C10.925 9.85085 9.52593 11.25 7.80004 11.25C6.07415 11.25 4.67504 9.85085 4.67504 8.12496C4.67504 6.39907 6.07415 4.99996 7.80004 4.99996ZM7.80004 6.24996C6.76451 6.24996 5.92504 7.08943 5.92504 8.12496C5.92504 9.16049 6.76451 9.99996 7.80004 9.99996C8.83557 9.99996 9.67504 9.16049 9.67504 8.12496C9.67504 7.08943 8.83557 6.24996 7.80004 6.24996Z"/>\n        </svg>'])))}},{key:"getChevronIcon",value:function(){return mt.getTrustedHTML(ht||(ht=j(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="5" viewBox="0 0 8 5" fill="none">\n        <path d="M0.146447 0.646447C0.341709 0.451184 0.658291 0.451184 0.853553 0.646447L4 3.79289L7.14645 0.646447C7.34171 0.451184 7.65829 0.451184 7.85355 0.646447C8.04882 0.841709 8.04882 1.15829 7.85355 1.35355L4.35355 4.85355C4.15829 5.04882 3.84171 5.04882 3.64645 4.85355L0.146447 1.35355C-0.0488155 1.15829 -0.0488155 0.841709 0.146447 0.646447Z" fill="var(--neutral-foreground-rest)"/>\n        </svg>'])))}},{key:"getCaretDownIcon",value:function(){return mt.getTrustedHTML(pt||(pt=j(['<svg width="12" height="7" viewBox="0 0 12 7" fill="inherit" xmlns="http://www.w3.org/2000/svg">\n        <path d="M5.99935 4.94942L1.60796 0.558057C1.36388 0.313981 0.968148 0.313981 0.724072 0.558057C0.479997 0.802132 0.479997 1.19786 0.724072 1.44194L0.724073 1.44194L5.55743 6.27525C5.80151 6.51933 6.19719 6.51933 6.44127 6.27525L11.2746 1.44194C11.5187 1.19787 11.5187 0.802131 11.2746 0.558055C11.0305 0.313982 10.6348 0.313982 10.3908 0.558055L5.99935 4.94942Z" stroke="inherit" stroke-width="1"/>\n        </svg>'])))}},{key:"getErrorImage",value:function(){return mt.getTrustedHTML(ft||(ft=j(['<svg xmlns="http://www.w3.org/2000/svg" width="314" height="72" viewBox="0 0 314 72" fill="none">\n       <path d="M22.2505 70.9081C20.4564 68.0473 43.6258 53.3722 71.7396 56.2548C148.839 64.1601 174.218 0 228.893 0C283.567 0 284.573 70.9081 282.057 70.9081C279.541 70.9081 22.2505 70.9081 22.2505 70.9081Z" fill="#EBECEF"/>\n       <path d="M247.052 70.0138C246.724 70.5816 247.336 71.193 247.905 70.931C250.421 69.7299 253.55 69.3805 255.497 68.7253C260.113 67.1748 260.704 65.2094 264.227 62.1739C261.382 61.89 258.844 61.5843 256.394 62.5233C252.412 64.052 248.912 66.8254 247.052 70.0138Z" fill="#BFBFBF"/>\n       <path d="M243.377 54.9664C243.617 58.4387 245.893 66.6279 247.052 70.5806C247.205 71.1266 248.015 71.0829 248.102 70.5151C248.803 66.4532 250.159 58.0019 249.984 54.5297C249.7 48.4369 246.155 45.4014 246.155 45.4014C246.155 45.4014 242.961 48.8955 243.377 54.9664Z" fill="#BFBFBF"/>\n       <path d="M246.746 70.0787C246.549 70.7339 247.403 71.1925 247.84 70.6684C251.472 66.4536 259.239 57.1943 261.274 53.0887C264.752 46.0132 262.63 40.3572 262.63 40.3572C262.63 40.3572 256.81 42.3444 253.507 49.4855C251.581 53.6129 248.256 64.8376 246.746 70.0787Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M180.169 42.7802L169.252 52.8038C168.902 53.1096 168.377 53.0877 168.092 52.7165C167.786 52.3671 167.83 51.8211 168.158 51.4936L179.075 41.4699C179.425 41.1642 179.95 41.186 180.257 41.5573C180.541 41.9067 180.497 42.4526 180.169 42.7802Z" fill="#EBECEF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M243.135 21.947H203.535C203.535 24.9607 201.063 27.3847 198.022 27.3847C194.981 27.3847 192.53 24.9607 192.53 21.947H153.477C150.983 21.947 148.97 23.9561 148.97 26.4457V66.4311C148.97 68.8988 150.983 70.9079 153.477 70.9079H192.53C192.53 67.8942 195.003 65.4702 198.022 65.4702C198.241 65.4702 198.459 65.4921 198.656 65.5139C201.391 65.8196 203.535 68.1345 203.535 70.9079H243.135C245.629 70.9079 247.642 68.8988 247.642 66.4311V26.4457C247.642 23.9561 245.629 21.947 243.135 21.947ZM182.466 56.2109L183.079 59.6176L179.928 57.9579C178.244 57.0844 176.165 57.7396 175.312 59.4648L173.759 62.6313L172.205 59.4648C171.374 57.7396 169.273 57.0844 167.589 57.9579L164.46 59.6176L165.073 56.2109C165.423 54.3328 164.11 52.5203 162.207 52.2801L158.728 51.7996L161.244 49.4193C162.644 48.0871 162.644 45.8597 161.244 44.5275L158.728 42.1472L162.207 41.6668C164.11 41.4047 165.423 39.614 165.073 37.7359L164.46 34.3292L167.589 35.9889C169.273 36.8624 171.374 36.2073 172.205 34.5039L173.759 31.3374L175.312 34.5039C176.143 36.2073 178.244 36.8842 179.928 35.9889L183.079 34.3292L182.466 37.7359C182.138 39.614 183.429 41.4047 185.332 41.6668L188.811 42.1472L186.317 44.5275C184.917 45.8597 184.917 48.0871 186.317 49.4193L188.811 51.7996L185.332 52.2801C183.429 52.5203 182.138 54.311 182.466 56.2109Z" fill="white"/>\n       <path d="M198.678 29.2622V65.6007" stroke="#BFBFBF" stroke-linecap="round" stroke-dasharray="2 2"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M187.476 48.174C186.776 47.497 186.776 46.4051 187.476 45.7281L189.992 43.3478C191.021 42.3651 190.452 40.6398 189.052 40.4651L185.573 39.9847C184.61 39.8537 183.976 38.9583 184.151 38.0193L184.763 34.6126C185.026 33.2368 183.56 32.1449 182.313 32.8L179.163 34.4597C178.331 34.8964 177.281 34.5689 176.843 33.6954L175.29 30.5725C174.677 29.3059 172.883 29.3059 172.249 30.5725L170.696 33.739C170.28 34.6125 169.23 34.9401 168.398 34.5034L165.248 32.8437C164.001 32.1885 162.535 33.2586 162.797 34.6562L163.41 38.063C163.585 39.0238 162.929 39.8974 161.966 40.0284L158.487 40.5088C157.087 40.7054 156.518 42.4306 157.547 43.3914L160.063 45.7718C160.763 46.4488 160.763 47.5407 160.063 48.2176L157.547 50.598C156.518 51.5807 157.087 53.3059 158.487 53.4806L161.966 53.9611C162.929 54.0921 163.585 54.9874 163.41 55.9265L162.797 59.3332C162.535 60.709 164.001 61.7791 165.248 61.1239L168.398 59.4642C169.23 59.0275 170.28 59.3769 170.696 60.2286L172.249 63.3951C172.883 64.6617 174.677 64.6617 175.29 63.3951L176.843 60.2286C177.259 59.3769 178.309 59.0275 179.163 59.4642L182.313 61.1239C183.56 61.7791 185.026 60.709 184.763 59.3332L184.151 55.9265C183.976 54.9874 184.632 54.0921 185.573 53.9611L189.052 53.4806C190.452 53.2841 191.021 51.5589 189.992 50.598L187.476 48.174ZM185.332 52.2577C183.429 52.5197 182.116 54.3105 182.466 56.1885L183.079 59.5953L179.928 57.9356C178.244 57.0621 176.165 57.7172 175.312 59.4424L173.759 62.6089L172.205 59.4424C171.374 57.7172 169.273 57.0621 167.589 57.9356L164.46 59.5953L165.073 56.1885C165.423 54.3105 164.11 52.4979 162.207 52.2577L158.728 51.7772L161.244 49.3969C162.644 48.0648 162.644 45.8373 161.244 44.5052L158.728 42.1248L162.207 41.6444C164.11 41.3823 165.423 39.5916 165.073 37.7136L164.46 34.3068L167.589 35.9665C169.273 36.84 171.374 36.1849 172.205 34.4815L173.759 31.315L175.312 34.4815C176.143 36.1849 178.244 36.8619 179.928 35.9665L183.079 34.3068L182.466 37.7136C182.138 39.5916 183.429 41.3823 185.332 41.6444L188.811 42.1248L186.317 44.5052C184.917 45.8373 184.917 48.0648 186.317 49.3969L188.811 51.7772L185.332 52.2577Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M186.317 44.5273L188.811 42.147L185.332 41.6665C183.429 41.4045 182.116 39.6138 182.466 37.7357L183.079 34.329L179.928 35.9887C178.244 36.8622 176.165 36.207 175.312 34.5037L173.759 31.3372L172.205 34.5037C171.374 36.207 169.273 36.884 167.589 35.9887L164.46 34.329L165.073 37.7357C165.423 39.6138 164.11 41.4045 162.207 41.6665L158.728 42.147L161.244 44.5273C162.644 45.8594 162.644 48.0869 161.244 49.419L158.728 51.7994L162.207 52.2798C164.11 52.5419 165.423 54.3326 165.073 56.2107L164.46 59.6174L167.589 57.9577C169.273 57.0842 171.374 57.7393 172.205 59.4645L173.759 62.6311L175.312 59.4645C176.143 57.7393 178.244 57.0842 179.928 57.9577L183.079 59.6174L182.466 56.2107C182.138 54.3326 183.429 52.5201 185.332 52.2798L188.811 51.7994L186.317 49.419C184.917 48.0651 184.917 45.8594 186.317 44.5273ZM169.252 52.8039C168.902 53.1097 168.376 53.0878 168.092 52.7166C167.786 52.3672 167.829 51.8212 168.158 51.4937L179.075 41.47C179.425 41.1643 179.95 41.1861 180.256 41.5574C180.541 41.9068 180.519 42.4527 180.169 42.7803L169.252 52.8039Z" fill="white"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M170.433 40.6836C168.639 40.2032 166.78 41.2514 166.298 43.0421C165.817 44.8547 166.911 46.6673 168.683 47.1259C170.477 47.6063 172.337 46.5581 172.818 44.7674C173.299 42.9766 172.227 41.1641 170.433 40.6836ZM171.177 44.3306C170.937 45.2041 170.018 45.7501 169.121 45.5098C168.202 45.2696 167.677 44.3524 167.917 43.4789C168.158 42.6054 169.077 42.0594 169.996 42.2997C170.893 42.5617 171.418 43.4571 171.177 44.3306Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M179.447 46.7981C177.653 46.3177 175.793 47.3659 175.312 49.1566C174.831 50.9474 175.903 52.7818 177.697 53.2404C179.491 53.7208 181.35 52.6726 181.832 50.8818C182.313 49.113 181.241 47.2786 179.447 46.7981ZM180.191 50.4669C179.95 51.3404 179.031 51.8864 178.112 51.6462C177.193 51.3841 176.69 50.4888 176.931 49.6152C177.172 48.7417 178.091 48.1958 178.988 48.436C179.906 48.6544 180.432 49.5716 180.191 50.4669Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M180.169 42.7802L169.252 52.8038C168.902 53.1096 168.377 53.0877 168.092 52.7165C167.786 52.3671 167.83 51.8211 168.158 51.4936L179.075 41.4699C179.425 41.1642 179.95 41.186 180.257 41.5573C180.541 41.9067 180.497 42.4526 180.169 42.7802Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M223.729 30.5725C223.116 29.3059 221.322 29.3059 220.688 30.5725L219.135 33.739C218.719 34.5907 217.669 34.9401 216.837 34.4815L213.687 32.8218C212.44 32.1667 210.996 33.2368 211.236 34.6126L211.849 38.0193C212.024 38.9583 211.368 39.8537 210.405 39.9847L206.926 40.4651C205.526 40.6617 204.957 42.3869 205.986 43.3478L208.48 45.7281C209.18 46.3833 209.18 47.497 208.48 48.174L205.986 50.5543C204.957 51.537 205.526 53.2622 206.926 53.4369L210.405 53.9174C211.368 54.0484 212.002 54.9438 211.849 55.8828L211.236 59.2895C210.996 60.6653 212.44 61.7354 213.687 61.0803L216.837 59.4206C217.691 58.9838 218.719 59.3114 219.135 60.1631L220.688 63.3296C221.301 64.5962 223.095 64.5962 223.729 63.3296L225.282 60.1631C225.698 59.3114 226.748 58.962 227.58 59.4206L230.73 61.0803C231.977 61.7354 233.421 60.6653 233.181 59.2895L232.568 55.8828C232.393 54.9438 233.049 54.0484 234.012 53.9174L237.491 53.4369C238.891 53.2404 239.46 51.5152 238.431 50.5543L235.937 48.174C235.237 47.5188 235.237 46.4051 235.937 45.7281L238.431 43.3478C239.46 42.3651 238.891 40.6398 237.491 40.4651L234.012 39.9847C233.049 39.8537 232.415 38.9583 232.568 38.0193L233.181 34.6126C233.421 33.2368 231.977 32.1667 230.73 32.8218L227.58 34.4815C226.726 34.9183 225.698 34.5907 225.282 33.739L223.729 30.5725ZM216.356 43.4788C216.597 42.6053 217.516 42.0593 218.413 42.2995C219.331 42.5398 219.857 43.457 219.616 44.3305C219.375 45.204 218.456 45.75 217.559 45.5097C216.662 45.2695 216.137 44.3523 216.356 43.4788ZM218.872 40.6835C217.078 40.2031 215.218 41.2513 214.737 43.042C214.256 44.8328 215.328 46.6671 217.122 47.1476C218.916 47.628 220.775 46.5798 221.257 44.7891C221.76 42.9765 220.666 41.164 218.872 40.6835ZM227.448 48.4142C226.529 48.174 225.611 48.6981 225.392 49.5934C225.151 50.467 225.676 51.3842 226.595 51.6244C227.514 51.8646 228.433 51.3405 228.652 50.4451C228.87 49.5716 228.345 48.6544 227.448 48.4142ZM223.751 49.1567C224.232 47.366 226.092 46.3177 227.886 46.7982C229.68 47.2786 230.752 49.0912 230.271 50.9037C229.789 52.6944 227.93 53.7427 226.136 53.2622C224.342 52.7818 223.27 50.9474 223.751 49.1567ZM228.608 42.78C228.958 42.4742 228.98 41.9283 228.695 41.557C228.389 41.2076 227.864 41.164 227.536 41.4915L216.619 51.5152C216.268 51.8209 216.247 52.3669 216.531 52.7381C216.837 53.0875 217.362 53.1312 217.691 52.8036L228.608 42.78Z" fill="#BFBFBF"/>\n       <path d="M86.0258 60.5349L137.725 61.1682C139.694 61.19 141.269 62.806 141.225 64.7715L141.203 67.6978C141.181 69.6632 139.562 71.2355 137.593 71.1919L85.8945 70.5586C83.9254 70.5367 82.3502 68.9207 82.394 66.9553L82.4377 64.029C82.4596 62.0854 84.0567 60.5131 86.0258 60.5349Z" fill="#BFBFBF"/>\n       <path d="M89.3953 10.0013L141.029 10.6346C147.986 10.7219 153.543 16.4216 153.455 23.3661L153.105 51.0349C153.018 57.9794 147.308 63.5263 140.35 63.4389L88.7171 62.8056C81.7597 62.7183 76.2026 57.0185 76.2901 50.0741L76.6401 22.4053C76.7277 15.4608 82.4379 9.91391 89.3953 10.0013Z" fill="#BFBFBF"/>\n       <path d="M83.2693 9.91386L131.599 10.5253C138.556 10.6127 144.113 16.3124 144.026 23.2569L143.676 50.9257C143.588 57.8702 137.878 63.417 130.921 63.3297L82.5911 62.7182C75.6337 62.6309 70.0766 56.9311 70.1641 49.9866L70.5142 22.3179C70.6017 15.3952 76.312 9.8265 83.2693 9.91386Z" fill="#EBECEF"/>\n       <path d="M102.216 55.0098C112.39 58.8096 123.723 53.6558 127.529 43.5011C131.336 33.3464 126.173 22.0343 115.999 18.2345C105.826 14.4347 94.4929 19.5885 90.6861 29.7432C86.8792 39.8979 92.0425 51.21 102.216 55.0098Z" fill="white" stroke="#BFBFBF" stroke-miterlimit="10"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" fill="white"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" fill="white"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" stroke="#BFBFBF" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n       <path d="M1.09375 70.9077H312.906" stroke="#EBECEF" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n       </svg>'])))}},{key:"getDefaultProductImage",value:function(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NiIgaG\n                VpZ2h0PSI2NiIgdmlld0JveD0iMCAwIDY2IDY2IiBmaWxsPSJub25lIj4KICAgICAgICA8cmVjdCB3aWR0aD0iNjYiIGhlaW\n                dodD0iNjYiIHJ4PSI0IiBmaWxsPSIjRjdGN0Y3Ii8+CiAgICAgICAgPHBhdGggZD0iTTMyLjI5OTUgMzUuMjkwNkwzMi40MT\n                EgMzUuMTk1OUMzMi43NTY2IDM0Ljk0MzQgMzMuMjI3MyAzNC45NDAzIDMzLjU3NiAzNS4xODY2TDMzLjcwMDUgMzUuMjkwNk\n                w0Mi45Mzc0IDQ0LjM1ODFDNDIuMjc3MSA0NC43NjUyIDQxLjQ5OTMgNDUgNDAuNjY2NyA0NUgyNS4zMzMzQzI0LjUwMDcgND\n                UgMjMuNzIyOSA0NC43NjUyIDIzLjA2MjYgNDQuMzU4MUwzMi4yOTk1IDM1LjI5MDZMMzIuNDExIDM1LjE5NTlMMzIuMjk5NS\n                AzNS4yOTA2Wk00MC42NjY3IDIxQzQzLjA1OTkgMjEgNDUgMjIuOTQwMSA0NSAyNS4zMzMzVjQwLjY2NjdDNDUgNDEuNTAyNy\n                A0NC43NjMyIDQyLjI4MzUgNDQuMzUzMSA0Mi45NDU2TDM1LjEwMTYgMzMuODYzM0wzNC45MzAzIDMzLjcwNzVDMzMuODE5OS\n                AzMi43NzI0IDMyLjE5MjIgMzIuNzY5OCAzMS4wNzkgMzMuNjk5N0wzMC44OTg0IDMzLjg2MzNMMjEuNjQ2OSA0Mi45NDU2Qz\n                IxLjIzNjggNDIuMjgzNSAyMSA0MS41MDI3IDIxIDQwLjY2NjdWMjUuMzMzM0MyMSAyMi45NDAxIDIyLjk0MDEgMjEgMjUuMz\n                MzMyAyMUg0MC42NjY3Wk0zOC4wMDI4IDI1QzM2LjM0NDQgMjUgMzUgMjYuMzQ0NCAzNSAyOC4wMDI4QzM1IDI5LjY2MTIgMz\n                YuMzQ0NCAzMS4wMDU2IDM4LjAwMjggMzEuMDA1NkMzOS42NjEyIDMxLjAwNTYgNDEuMDA1NiAyOS42NjEyIDQxLjAwNTYgMj\n                guMDAyOEM0MS4wMDU2IDI2LjM0NDQgMzkuNjYxMiAyNSAzOC4wMDI4IDI1Wk0zOC4wMDI4IDI3QzM4LjU1NjcgMjcgMzkuMD\n                A1NiAyNy40NDkgMzkuMDA1NiAyOC4wMDI4QzM5LjAwNTYgMjguNTU2NyAzOC41NTY3IDI5LjAwNTYgMzguMDAyOCAyOS4wMD\n                U2QzM3LjQ0OSAyOS4wMDU2IDM3IDI4LjU1NjcgMzcgMjguMDAyOEMzNyAyNy40NDkgMzcuNDQ5IDI3IDM4LjAwMjggMjdaIi\n                BmaWxsPSIjRDZENkQ2Ii8+CiAgICAgICAgPC9zdmc+"}}]),t}();!function(t){t.PageStatus="pageStatus",t.EnabledFeatures="enabled_features",t.CouponsApiResponse="couponsApiResponse",t.PackageTrackingFreShown="packageTrackingFreShown",t.PackageTrackingUserConsented="packageTrackingUserConsented",t.PackageTrackerResponse="packageTrackingData",t.ShouldShowPackageTrackingNotification="shouldShowPackageTrackingNotification",t.EdgeDriverDataForFlyout="edgeDriverDataForFlyout",t.GuestCouponsApiResponse="guestCouponsApiResponse",t.AutofillProfileEnabled="autofillProfileEnabled",t.AutofillCreditCardEnabled="autofillCreditCardEnabled",t.BgaaInfo="bgaa_info",t.ProductItemizedCashBack="productItemizedCashBack"}(vt||(vt={})),function(t){t.Large="txtLarge",t.Medium="txtMedium",t.Small="txtSmall",t.EmptyCoupon="txtEmptyCoupons"}(yt||(yt={})),function(t){t.AutoOpen="AutoOpen",t.SaveMoneyPage="SaveMoneyPage",t.SaveMoneyOtherSites="SaveMoneyOtherSites",t.SaveMoneyRetailer="SaveMoneyRetailer",t.InformPage="InformPage",t.InformRetailer="InformRetailer",t.InformOtherSites="InformOtherSites",t.Unknown="Unknown"}(Ct||(Ct={})),function(t){t[t.COUPON=2]="COUPON",t[t.COUPONPANE=4]="COUPONPANE",t[t.DEAL=2]="DEAL",t[t.PRICECOMPARISON=3]="PRICECOMPARISON",t[t.RECOMMENDATIONS=4]="RECOMMENDATIONS",t[t.RECOMMENDATIONS_NOTIF=2]="RECOMMENDATIONS_NOTIF",t[t.SIMILARSELLERS=1]="SIMILARSELLERS",t[t.PRODUCTHISTORY=3]="PRODUCTHISTORY",t[t.TIPS=4]="TIPS",t[t.PAYMENT_OPTIONS=3]="PAYMENT_OPTIONS",t[t.ORDERTRACKING=1]="ORDERTRACKING",t[t.TOP_RETAILERS=4]="TOP_RETAILERS",t[t.GROCERY_COUPON=4]="GROCERY_COUPON",t[t.PRINTABLE_COUPON=4]="PRINTABLE_COUPON",t[t.PRINTABLE_COUPON_AUTO=2]="PRINTABLE_COUPON_AUTO",t[t.GROCERY_CASHBACK=3]="GROCERY_CASHBACK",t[t.PREVIOUS_CASHBACK=1]="PREVIOUS_CASHBACK",t[t.AUTOSMARKETPLACE=3]="AUTOSMARKETPLACE",t[t.ABANDONED_CART=1]="ABANDONED_CART"}(bt||(bt={})),function(t){t[t.Desktop=1]="Desktop",t[t.Mobile=2]="Mobile"}(St||(St={})),function(t){t[t.Dark=1]="Dark",t[t.Light=2]="Light"}(xt||(xt={})),function(t){t.Paid="cpc"}(Et||(Et={})),function(t){t[t.LTR=1]="LTR",t[t.RTL=2]="RTL"}(At||(At={})),function(t){t.Mouse="mouse",t.Keyboard="keyboard",t.Auto="auto",t.Banner="banner"}(Tt||(Tt={})),function(t){t.currency="placeholderCurrency"}(Dt||(Dt={})),function(t){t.Shipping="shipping",t.Used="Used",t.New="New",t.Refurbished="Refurbished",t.PriceDrop="price drop"}(kt||(kt={})),function(t){t.clippedSpan="clippedSpan"}(It||(It={})),function(t){t[t.GIFT_CARD=1]="GIFT_CARD",t[t.PRINTABLE_COUPON=2]="PRINTABLE_COUPON",t[t.GROCERY_COUPON=3]="GROCERY_COUPON",t[t.COUPONCLIPPING=4]="COUPONCLIPPING",t[t.SIMILARSELLERS=5]="SIMILARSELLERS",t[t.GROCERY_CASHBACK=6]="GROCERY_CASHBACK",t[t.GROCERY_CASHBACK_ACTIVATED=7]="GROCERY_CASHBACK_ACTIVATED",t[t.COUPON=8]="COUPON",t[t.PRICEHISTORY=10]="PRICEHISTORY",t[t.PRICECOMPARISON=11]="PRICECOMPARISON",t[t.CASHBACK=12]="CASHBACK",t[t.DEALS=13]="DEALS",t[t.RATINGSANDREVIEWS=14]="RATINGSANDREVIEWS",t[t.CHECKOUTAUTOFILL=15]="CHECKOUTAUTOFILL",t[t.RECOMMENDATIONS=16]="RECOMMENDATIONS",t[t.ORDERSTATUSTRACKING=17]="ORDERSTATUSTRACKING",t[t.SHOPRUNNER=18]="SHOPRUNNER",t[t.TOP_RETAILERS=19]="TOP_RETAILERS",t[t.TIPS=20]="TIPS",t[t.REWARD=21]="REWARD",t[t.PAYMENT_OPTIONS=22]="PAYMENT_OPTIONS",t[t.VIRTUAL_CARD=23]="VIRTUAL_CARD",t[t.EXCLUSIVECOUPONS=24]="EXCLUSIVECOUPONS",t[t.SUSTAINABILITY=25]="SUSTAINABILITY",t[t.PINTEREST=26]="PINTEREST",t[t.AUTOSPRICEINSIGHT=27]="AUTOSPRICEINSIGHT",t[t.PRODUCTHISTORY=28]="PRODUCTHISTORY",t[t.TRENDING_OFFERS=29]="TRENDING_OFFERS",t[t.DAILY_DEALS=30]="DAILY_DEALS",t[t.AUTOSMARKETPLACE=31]="AUTOSMARKETPLACE",t[t.ABANDONED_CART=32]="ABANDONED_CART",t[t.EMPTYCOUPON=99]="EMPTYCOUPON",t[t.MAX=100]="MAX"}(wt||(wt={})),function(t){t.CANARY="canary",t.STABLE="stable"}(Pt||(Pt={})),function(t){t.PRICECOMPARISON="3",t.PRICEHISTORY="4"}(Ot||(Ot={})),function(t){t.CHECKOUTAUTOFILL="CHECKOUTAUTOFILL",t.COUPON="COUPON",t.PRICECOMPARISON="PRICECOMPARISON",t.CASHBACK="CASHBACK",t.EMPTYCOUPON="EMPTYCOUPON",t.PRICEHISTORY="PRICEHISTORY",t.COUPONCLIPPING="COUPONCLIPPING",t.DEALS="DEALS",t.NUDGETIPSDATA="NUDGETIPSDATA",t.RATINGSANDREVIEWS="RATINGSANDREVIEWS",t.RECOMMENDATIONS="RECOMMENDATIONS",t.SIMILARSELLERS="SIMILARSELLERS",t.PRODUCTHISTORY="PRODUCTHISTORY",t.REWARD="REWARD",t.TIPS="TIPS",t.PAYMENT_OPTIONS="PAYMENT_OPTIONS",t.EXCLUSIVECOUPONS="EXCLUSIVECOUPONS",t.ORDERSTATUSTRACKING="ORDERSTATUSTRACKING",t.VIRTUAL_CARD="VIRTUAL_CARD",t.SUSTAINABILITY="SUSTAINABILITY",t.TOP_RETAILERS="TOP_RETAILERS",t.GROCERY_COUPON="GROCERY_COUPON",t.PRINTABLE_COUPON="PRINTABLE_COUPON",t.TRACKING_CONFIRMATION="TRACKING_CONFIRMATION",t.FEEDBACK="FEEDBACK",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.PINTEREST="PINTEREST",t.GIFT_CARD="GIFT_CARD",t.GROCERY_CASHBACK="GROCERY_CASHBACK",t.GROCERY_CASHBACK_ACTIVATED="GROCERY_CASHBACK_ACTIVATED",t.AUTOSMARKETPLACE="AUTOSMARKETPLACE",t.AUTOSPRICEINSIGHT="AUTOSPRICEINSIGHT",t.TRENDING_OFFERS="TRENDING_OFFERS",t.DAILY_DEALS="DAILY_DEALS",t.INFINITE_CATEGORY_FEED="INFINITE_CATEGORY_FEED",t.SHOPRUNNER="SHOPRUNNER",t.ABANDONED_CART="ABANDONED_CART"}(Rt||(Rt={})),function(t){t.CASHBACK="CASHBACK",t.CASHBACKCONFIRMATION="CASHBACKCONFIRMATION",t.CASHBACKTURNEDOFF="CASHBACKTURNEDOFF",t.HOMEPAGE="HOMEPAGE",t.REWARD="REWARD",t.SIMILARSELLERS="SIMILARSELLERS",t.PRICECOMPARISON="PRICECOMPARISON",t.EXCLUSIVECOUPONS="EXCLUSIVECOUPONS",t.MICRONOTIFICATION="MICRONOTIFICATION",t.TRACKING_CONFIRMATION="TRACKING_CONFIRMATION",t.VIRTUAL_CARD="VIRTUAL_CARD",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.SUSTAINABILITY="SUSTAINABILITY_NOTIFICATION",t.GIFT_CARD="GIFT_CARD",t.AUTOSMARKETPLACE="AUTOSMARKETPLACE_NOTIFICATION",t.GROCERY_CASHBACK_NOTIFICATION="GROCERY_CASHBACK_NOTIFICATION",t.PRICEHISTORY="PRICEHISTORY",t.COUPON="COUPON",t.RECOMMENDATION="RECOMMENDATION",t.SHOPRUNNER_SIGN_UP_NOTIFICATION="SHOPRUNNER_SIGN_UP_NOTIFICATION"}(Mt||(Mt={})),function(t){t[t.NOT_ACTIVATING=0]="NOT_ACTIVATING",t[t.STARTED=1]="STARTED",t[t.FAILED=2]="FAILED",t[t.FAILED_SWITCH_TO_MSA_PROFILE=3]="FAILED_SWITCH_TO_MSA_PROFILE",t[t.FAILED_SWITCH_TO_MSA_DECLINED=4]="FAILED_SWITCH_TO_MSA_DECLINED",t[t.FAILED_SIGN_INTO_PROFILE=5]="FAILED_SIGN_INTO_PROFILE",t[t.PENDING_ENROLL_REBATES_USER=6]="PENDING_ENROLL_REBATES_USER",t[t.PENDING_SWITCH_TO_MSA_PROFILE=7]="PENDING_SWITCH_TO_MSA_PROFILE",t[t.PENDING_SIGN_INTO_PROFILE=8]="PENDING_SIGN_INTO_PROFILE",t[t.PENDING_ACTIVATION_IN_PROFILE=9]="PENDING_ACTIVATION_IN_PROFILE",t[t.FAILED_ACTIVATION_NO_RETAILER_DATA=10]="FAILED_ACTIVATION_NO_RETAILER_DATA",t[t.FAILED_ACTIVATION_URL_FETCH=11]="FAILED_ACTIVATION_URL_FETCH",t[t.FAILED_ACTIVATION_INVALID_JSON=12]="FAILED_ACTIVATION_INVALID_JSON",t[t.FAILED_ACTIVATION_URL_PARSING=13]="FAILED_ACTIVATION_URL_PARSING",t[t.FAILED_ACTIVATION_URL_INVALID=14]="FAILED_ACTIVATION_URL_INVALID",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD=15]="FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT=16]="FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD=17]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT=18]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT",t[t.ACTIVATED=19]="ACTIVATED",t[t.FAILED_ACTIVATION_UNIFIED_API_BACKED_OFF=20]="FAILED_ACTIVATION_UNIFIED_API_BACKED_OFF",t[t.FAILED_ACTIVATION_ENROLL_VERIFY_COOKIE=21]="FAILED_ACTIVATION_ENROLL_VERIFY_COOKIE",t[t.FAILED_ACTIVATION_ENROLL_COOKIE_TIMED_OUT=22]="FAILED_ACTIVATION_ENROLL_COOKIE_TIMED_OUT",t[t.PENDING_BING_SSO=23]="PENDING_BING_SSO",t[t.PENDING_BING_IDENTITY_CHECK=24]="PENDING_BING_IDENTITY_CHECK"}(Nt||(Nt={})),function(t){t[t.NOT_ACTIVATING=0]="NOT_ACTIVATING",t[t.STARTED=1]="STARTED",t[t.FAILED=2]="FAILED",t[t.FAILED_SWITCH_TO_MSA_PROFILE=3]="FAILED_SWITCH_TO_MSA_PROFILE",t[t.FAILED_SWITCH_TO_MSA_DECLINED=4]="FAILED_SWITCH_TO_MSA_DECLINED",t[t.FAILED_SIGN_INTO_PROFILE=5]="FAILED_SIGN_INTO_PROFILE",t[t.PENDING_ENROLL_REWARDS_USER=6]="PENDING_ENROLL_REWARDS_USER",t[t.PENDING_SWITCH_TO_MSA_PROFILE=7]="PENDING_SWITCH_TO_MSA_PROFILE",t[t.PENDING_SIGN_INTO_PROFILE=8]="PENDING_SIGN_INTO_PROFILE",t[t.PENDING_ACTIVATION_IN_PROFILE=9]="PENDING_ACTIVATION_IN_PROFILE",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD=10]="FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT=11]="FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD=12]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT=13]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT",t[t.ACTIVATED=14]="ACTIVATED"}(Lt||(Lt={})),function(t){t.CONTEXTUAL="CONTEXTUAL",t.HOME="HOME"}(_t||(_t={})),function(t){t.SQUARES="SQUARES",t.LIST="LIST",t.BLOCK="BLOCK"}(Ft||(Ft={})),function(t){t.VIEWALL="viewAll",t.VIEWALLPC="viewAllPC",t.VIEWPRICEHISTORY="viewPriceHistory"}(Ht||(Ht={})),function(t){t.APPLY_COUPON_AND_AUTO_FILL="APPLY_COUPON_AND_AUTO_FILL",t.APPLY_COUPON="APPLY_COUPON",t.AUTO_FILL="AUTO_FILL",t.APPLY_COUPON_AND_AUTO_FILL_FOR_ZIP="APPLY_COUPON_AND_AUTO_FILL_FOR_ZIP",t.AUTO_FILLL_FOR_ZIP="AUTO_FILLL_FOR_ZIP"}(Bt||(Bt={})),function(t){t.CARD="card",t.ZIP="zipPay",t.AFFIRM="affirm",t.KLARNA="klarna"}(Ut||(Ut={})),function(t){t.PRICEDROP="PRICEDROP",t.PRICEINCREASE="PRICEINCREASE"}(Vt||(Vt={})),function(t){t.AUTOS="autos"}(Gt||(Gt={})),function(t){t.US="en-us",t.CA="en-ca",t.GB="en-gb"}(Wt||(Wt={})),function(t){t.ONLINEONLY="online only"}($t||($t={})),function(t){t.LISTING="Listing",t.PRICEINSIGHT="PriceInsight"}(zt||(zt={})),function(t){t.NO_ACCIDENT_OR_DAMAGE_REPORTED="no accident or damage reported",t.ACCIDENT_MINOR_DAMAGE="accident/minor damage",t.ACCIDENT_NO_DAMAGE="accident/no damage",t.DAMAGE_REPORTED="damage reported",t.HAIL_DAMAGE="hail damage",t.MINOR_DAMAGE="minor damage",t.VERY_MINOR_DAMAGE="very minor damage"}(Kt||(Kt={})),function(t){t.CLOSE="btnFlyoutClose",t.MENU="btnMainMenu",t.MENUCONTENT="divMenuContent",t.SNOOZE="btnFlyoutSnoozeOn",t.SNOOZE_CONTENT="divSnoozeContent"}(Yt||(Yt={}));var qt=r((function t(){s(this,t),f(this,"AutoApplyStatus",void 0),f(this,"ExpressCheckoutStatus",void 0),f(this,"PageValidations",void 0),f(this,"personalizationAutoOpenTelemetryData",void 0)})),Zt=function(){function t(){s(this,t),f(this,"shopping",void 0),f(this,"shoppingPersistent",void 0),f(this,"openedWith",void 0),f(this,"autoShowAllowed",void 0),f(this,"isOrganicFlowEnabled",void 0),f(this,"isShoppingPersonalizationEnabled",void 0),f(this,"shouldShowCookieConsent",void 0),f(this,"shouldShowBanner",void 0),f(this,"bannerContext",void 0),f(this,"domain",void 0),f(this,"foundLowerPrice",void 0),f(this,"showPCBannerUX",void 0),f(this,"currentUrl",void 0),f(this,"currentTheme",void 0),f(this,"isCheckoutPage",void 0),f(this,"isCheckoutPageUsingUrlMatch",void 0),f(this,"currentDirection",void 0),f(this,"lastCommittedURL",void 0),f(this,"resourcesEndpoint",void 0),f(this,"urlPrefix",void 0),f(this,"popupOrigination",void 0),f(this,"autoshowFeaturePref",void 0),f(this,"currentDevice",void 0),f(this,"seeInfoFromPCNotification",void 0),f(this,"seeMoreGroceryOffersNotification",void 0),f(this,"fullFlyoutFromNotification",void 0),f(this,"pageStatus",void 0),f(this,"microNotificationTitle",void 0),f(this,"isPane",void 0),f(this,"isPaneEnabled",void 0),f(this,"isPanePinned",void 0),f(this,"isRebatesEnabled",void 0),f(this,"edgeDriverDataForFlyout",void 0),f(this,"pageLocale",void 0),f(this,"channel",void 0),f(this,"market",void 0),f(this,"afdMarket",void 0),f(this,"muid",void 0),f(this,"isWebAssistPending",void 0),f(this,"lastClippingAutoApplyDetailsForCurrentUrl",void 0)}return r(t,[{key:"Create",value:function(t,e){var n=document.createElement("msft-edge-shopping"),i=document.createElement("msft-edge-shopping");this.currentDevice=t;var o=e.GetLoadTimeDataValue("dark_theme",!1);this.currentTheme=xt.Light,o&&(this.currentTheme=xt.Dark);var a=e.GetLoadTimeDataValue("is_rtl",!1);this.currentDirection=At.LTR,a&&(this.currentDirection=At.RTL),this.autoShowAllowed=e.GetLoadTimeDataValue("isAutoShowAllowed",!1),this.openedWith=e.GetLoadTimeDataValue("open_action",void 0),this.currentUrl=e.GetLoadTimeDataValue("url",void 0),this.shouldShowBanner=e.GetLoadTimeDataValue("shouldShowBanner",!1),this.bannerContext=e.GetLoadTimeDataValue("bannerContext",""),this.shouldShowCookieConsent=e.GetLoadTimeDataValue("shouldShowCookieConsent",!1),this.foundLowerPrice=e.GetLoadTimeDataValue("foundLowerPrice",void 0),this.showPCBannerUX=e.GetLoadTimeDataValue("showPCBannerUX",!1),this.isOrganicFlowEnabled=e.GetLoadTimeDataValue("allowOrganicRebates",!1),this.isShoppingPersonalizationEnabled=e.GetLoadTimeDataValue("is_personalized_shopping_enabled",void 0),this.isCheckoutPage=e.GetLoadTimeDataValue("isCheckoutPage",!1),this.isCheckoutPageUsingUrlMatch=e.GetLoadTimeDataValue("isCheckoutPageUsingUrlMatch",!1),this.lastCommittedURL=e.GetLoadTimeDataValue("lastCommittedURL",void 0),this.popupOrigination=e.GetLoadTimeDataValue("popupOrigination",void 0),this.autoshowFeaturePref=e.GetLoadTimeDataValue("autoShowFeatureDisabledPref",void 0),this.microNotificationTitle=e.GetLoadTimeDataValue("last_label_text",void 0),this.isPane=e.GetLoadTimeDataValue("is_hub",!1),this.isPaneEnabled=e.GetLoadTimeDataValue("is_hub_enabled",!1),this.isPanePinned=e.GetLoadTimeDataValue("is_hub_pinned",!1),this.isRebatesEnabled=e.GetLoadTimeDataValue("is_rebates_enabled",!1),this.pageLocale=e.GetLoadTimeDataValue("page_locale",void 0),this.channel=e.GetLoadTimeDataValue("channel",""),this.muid=e.GetLoadTimeDataValue("muid",void 0),this.isWebAssistPending=e.GetLoadTimeDataValue("is_web_assist_pending",!1),this.lastClippingAutoApplyDetailsForCurrentUrl=e.GetLoadTimeDataValue("lastAutoApplyDetailsForCurrentUrl",void 0),this.UpdatePageStatus(e),this.UpdateEdgeDriverDataForFlyout(e),this.domain="",this.market="",this.afdMarket="",this.shopping=n,this.shoppingPersistent=i,this.seeInfoFromPCNotification=!1,e.IsServerData()||t===St.Mobile?this.urlPrefix="":this.urlPrefix="edge://image?",this.resourcesEndpoint=this.urlPrefix+"https://www.bing.com/api/shopping/v1/ux/images/"}},{key:"UpdatePageStatus",value:function(t){var e=new qt,n=t.GetLoadTimeDataValue(vt.PageStatus,void 0);if(n)try{var i=JSON.parse(n);e.AutoApplyStatus=i.auto_apply_status,e.ExpressCheckoutStatus=i.express_checkout_status,e.PageValidations=i.page_validations,e.personalizationAutoOpenTelemetryData=i.personalizationAutoOpenTelemetryData}catch(t){}this.pageStatus=e}},{key:"UpdateEdgeDriverDataForFlyout",value:function(t){this.edgeDriverDataForFlyout=void 0;var e=t.GetLoadTimeDataValue(vt.EdgeDriverDataForFlyout,void 0);if(e)try{this.edgeDriverDataForFlyout=JSON.parse(e)}catch(t){}}}]),t}(),Xt=function(){function t(){s(this,t),f(this,"commissionType",void 0),f(this,"commissionValue",void 0),f(this,"isRebatesSupportedDomain",void 0),f(this,"isRebatesUser",void 0),f(this,"merchantName",void 0)}return r(t,null,[{key:"Create",value:function(e){var n,i,o,a,r,s=new t;return s.commissionType=null===(n=e.highestCashbackCategory)||void 0===n?void 0:n.commissionType,s.commissionValue=null===(i=e.highestCashbackCategory)||void 0===i?void 0:i.commissionValue,s.isRebatesSupportedDomain=null!==(o=e.IsRebatesSupportedDomain)&&void 0!==o?o:null,s.isRebatesUser=null!==(a=null===(r=e.userRebateResponse)||void 0===r?void 0:r.isRebatesUser)&&void 0!==a&&a,s.merchantName=e.merchantName,s}}]),t}(),Jt=function(){function t(){s(this,t),f(this,"title",void 0),f(this,"offerUrl",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.title=e.title,n.offerUrl=e.offerUrl,n}}]),t}(),Qt=function(){function t(e,n){s(this,t),f(this,"Lifetime",void 0),f(this,"Timestamp",void 0),this.Lifetime=e,this.Timestamp=n||t.Now()}return r(t,[{key:"Expired",value:function(){return t.Now()-this.Timestamp>=this.Lifetime}}],[{key:"Now",value:function(){return Math.round((new Date).getTime()/1e3)}}]),t}(),te=function(){function t(e){s(this,t),f(this,"Type",void 0),f(this,"ID",void 0),this.Type=e,this.ID=""}return r(t,[{key:"toString",value:function(){return JSON.stringify(this)}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}]),t}();function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var ne=function(t){u(n,t);var e=ee(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this,I.ErrorResponse)),"ErrorMsg",void 0),f(l(o),"ErrorName",void 0),o.ErrorMsg=t,o.ErrorName=i,o}return r(n)}(te),ie=function(){function t(){s(this,t)}return r(t,null,[{key:"GenerateErrorMessage",value:function(t,e,n){var i=null!=t?t:"";return n&&(i+="\r\nDOM element path: '"+n+"'"),i+="\r\nFriendly name: '"+e+"'"}},{key:"GetDomainName",value:function(t){if(!t)return"";var e=t.toLowerCase().match(/(w){3}.?\./);return e&&null!=e.index&&e[0]?t.substring(e.index+e[0].length):t}},{key:"GetProcessedString",value:function(e,n,i){if(i&&(i===M.Opal||i===M.EdgeMobile||i===M.Sapphire||i===M.RBC)){if(n===P.PlainString)return t.escapePlainString(e);if(n===P.JsonString)return t.escapeJsonString(e)}return e}},{key:"escapeJsonString",value:function(t){return t?t.replace(/\"|'/g,'\\"'):t}},{key:"escapePlainString",value:function(t){return t?t.replace(/"|'/g,'\\"'):t}},{key:"ModifyObjectProperty",value:function(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0})}},{key:"GenerateErrorResponse",value:function(e,n){return new ne(t.GetProcessedString(e,P.JsonString,n))}},{key:"ThrowError",value:function(t,e){var n=new Error(e);throw n.name=t,n}}]),t}(),oe=ie;function ae(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return re(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var se=function(){function t(){s(this,t)}var n,i,a;return r(t,null,[{key:"Sleep",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},{key:"StringifyMap",value:function(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e}},{key:"ParseMap",value:function(t,e){return"object"===d(e)&&null!==e&&"Map"===e.dataType?new Map(e.value):e}},{key:"WaitForCondition",value:(a=e(o().mark((function e(n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime();case 2:return e.next=4,n();case 4:if(e.t0=!e.sent,!e.t0){e.next=7;break}e.t0=a+i>(new Date).getTime();case 7:if(!e.t0){e.next=12;break}return e.next=10,t.Sleep(100);case 10:e.next=2;break;case 12:return e.next=15,n();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)}))),function(t,e){return a.apply(this,arguments)})},{key:"WaitUntilCondition",value:(i=e(o().mark((function e(n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime();case 2:if(!(a+i>(new Date).getTime())){e.next=11;break}return e.next=5,n();case 5:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.Sleep(100);case 9:e.next=2;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)}))),function(t,e){return i.apply(this,arguments)})},{key:"WaitForSyncCondition",value:(n=e(o().mark((function e(n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime();case 2:if(!(a+i>(new Date).getTime())){e.next=9;break}if(!n()){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,t.Sleep(100);case 7:e.next=2;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"IsValidDataField",value:function(t){return null!=t&&t.length>0&&"null"!==t}},{key:"IsOnPage",value:function(e,n){if(t.IsValidDataField(e)){var i,o=e.toLowerCase().replace(/\s+/g,"").split(","),a=n.toLowerCase(),r=!1,s=ae(o);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(a.indexOf(l)>=0){r=!0;break}}}catch(t){s.e(t)}finally{s.f()}return r}return!1}},{key:"ObserveUntil",value:function(t,n){var i=new MutationObserver(e(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t()&&(i.disconnect(),n());case 1:case"end":return e.stop()}}),e)}))));i.observe(document.body,{attributeFilter:["offsetWidth","offsetHeight"],childList:!0,subtree:!0})}}]),t}(),le=se,ce=function(){function t(){s(this,t),f(this,"clipCouponSelector",void 0),f(this,"signedInSelector",void 0),f(this,"discountSelector",void 0),f(this,"orderTotalDataElementSelector",void 0),f(this,"clippedDiscountSelector",void 0),f(this,"alreadyClippedSelector",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.clipCouponSelector=e.clipCouponSelector,n.signedInSelector=e.signedInSelector,n.discountSelector=e.discountSelector,n.orderTotalDataElementSelector=e.orderTotalDataElementSelector,n.clippedDiscountSelector=e.clippedDiscountSelector,n.alreadyClippedSelector=e.alreadyClippedSelector,n}}]),t}(),ue=function(){function t(){s(this,t),f(this,"otherSellersOverlayLinkSelector",void 0),f(this,"otherSellerOfferElementSelector",void 0),f(this,"otherSellerHeadingSelector",void 0),f(this,"otherSellerPriceSelector",void 0),f(this,"otherSellerNameSelector",void 0),f(this,"productImageSelector",void 0),f(this,"otherSellerRatingSelector",void 0),f(this,"otherSellerDeliverySelector",void 0),f(this,"otherSellerAddButtonSelector",void 0),f(this,"otherSellerAddedConfirmationSelector",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.otherSellersOverlayLinkSelector=e.otherSellersOverlayLinkSelector,n.otherSellerOfferElementSelector=e.otherSellerOfferElementSelector,n.otherSellerHeadingSelector=e.otherSellerHeadingSelector,n.otherSellerPriceSelector=e.otherSellerPriceSelector,n.otherSellerNameSelector=e.otherSellerNameSelector,n.productImageSelector=e.productImageSelector,n.otherSellerRatingSelector=e.otherSellerRatingSelector,n.otherSellerDeliverySelector=e.otherSellerDeliverySelector,n.otherSellerAddButtonSelector=e.otherSellerAddButtonSelector,n.otherSellerAddedConfirmationSelector=e.otherSellerAddedConfirmationSelector,n}}]),t}(),de=function(){function t(){s(this,t),f(this,"domainSelector",void 0),f(this,"productTitleSelector",void 0),f(this,"productImageSelector",void 0),f(this,"productLinkSelector",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.domainSelector=e.domainSelector,n.productTitleSelector=e.productTitleSelector,n.productImageSelector=e.productImageSelector,n.productLinkSelector=e.productLinkSelector,n}}]),t}(),he=function(){function t(){s(this,t),f(this,"descriptionSelector",void 0),f(this,"profileImageSelector",void 0),f(this,"influencerInfoSelector",void 0),f(this,"influencerIdSelector",void 0),f(this,"influencerFollowers",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.descriptionSelector=e.descriptionSelector,n.profileImageSelector=e.profileImageSelector,n.influencerInfoSelector=e.influencerInfoSelector,n.influencerIdSelector=e.influencerIdSelector,n.influencerFollowers=e.influencerFollowers,n}}]),t}(),pe=function(){function t(){s(this,t),f(this,"inputBoxSelector",void 0),f(this,"applyButtonSelector",void 0),f(this,"removeCouponButtonSelector",void 0),f(this,"orderTotalDataElementSelector",void 0),f(this,"orderSubTotalElementSelector",void 0),f(this,"enabledTips",void 0),f(this,"couponAcceptedMessageElementSelector",void 0),f(this,"errorMessageCloseButtonSelector",void 0),f(this,"waitBeforeReApplyingNextCoupon",void 0),f(this,"waitAfterApplyingCurrentCoupon",void 0),f(this,"checkoutPageUrl",void 0),f(this,"refreshAfterApplying",void 0),f(this,"refreshAfterRemoving",void 0),f(this,"closeModal",void 0),f(this,"layoutClickSelector",void 0),f(this,"clickBeforeStartSelector",void 0),f(this,"errorMessageSelector",void 0),f(this,"domMutationEnabled",void 0),f(this,"couponRemovalNotNeeded",void 0),f(this,"appliedCouponSelector",void 0),f(this,"finalCheckoutButtonSelector",void 0),f(this,"otherSellerSelectors",void 0),f(this,"clippingSelectors",void 0),f(this,"backgroundAAEnabled",void 0),f(this,"socialSelectors",void 0),f(this,"pinterestSelectors",void 0),f(this,"backgroundAutoApplyStartTimeout",void 0),f(this,"backgroundAutoApplyInProgressTimeout",void 0),f(this,"backgroundAutoApplyCancelTimeout",void 0),f(this,"edgeEnabled",void 0),f(this,"couponApplyMinWaitTime",void 0),f(this,"couponRemoveMinWaitTime",void 0),f(this,"autosDataSelector",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.inputBoxSelector=e.inputBoxSelector,n.applyButtonSelector=e.applyButtonSelector,n.removeCouponButtonSelector=e.removeCouponButtonSelector,n.orderTotalDataElementSelector=e.orderTotalDataElementSelector,n.orderSubTotalElementSelector=e.orderSubTotalElementSelector,n.enabledTips=e.enabledTips,n.couponAcceptedMessageElementSelector=e.couponAcceptedMessageElementSelector,n.errorMessageCloseButtonSelector=e.errorMessageCloseButtonSelector,n.waitBeforeReApplyingNextCoupon=e.waitBeforeReApplyingNextCoupon,n.waitAfterApplyingCurrentCoupon=e.waitAfterApplyingCurrentCoupon,n.checkoutPageUrl=e.checkoutPageUrl,n.refreshAfterApplying=e.refreshAfterApplying,n.refreshAfterRemoving=e.refreshAfterRemoving,n.closeModal=e.closeModal,n.clickBeforeStartSelector=e.clickBeforeStartSelector,n.errorMessageSelector=e.errorMessageSelector,n.domMutationEnabled=e.domMutationEnabled,n.couponRemovalNotNeeded=e.couponRemovalNotNeeded,n.appliedCouponSelector=e.appliedCouponSelector,n.finalCheckoutButtonSelector=e.finalCheckoutButtonSelector,n.layoutClickSelector=e.layoutClickSelector,n.backgroundAAEnabled=e.backgroundAAEnabled,n.backgroundAutoApplyCancelTimeout=e.backgroundAutoApplyCancelTimeout,n.backgroundAutoApplyStartTimeout=e.backgroundAutoApplyStartTimeout,n.backgroundAutoApplyInProgressTimeout=e.backgroundAutoApplyInProgressTimeout,n.edgeEnabled=e.edgeEnabled,n.couponApplyMinWaitTime=e.couponApplyMinWaitTime,n.couponRemoveMinWaitTime=e.couponRemoveMinWaitTime,e.otherSellerSelectors&&(n.otherSellerSelectors=ue.Create(e.otherSellerSelectors)),e.clippingSelectors&&(n.clippingSelectors=ce.Create(e.clippingSelectors)),e.socialSelectors&&(n.socialSelectors=he.Create(e.socialSelectors)),e.autosDataSelector&&(n.autosDataSelector=e.autosDataSelector),e.pinterestSelectors&&(n.pinterestSelectors=de.Create(e.pinterestSelectors)),n}},{key:"Process",value:function(t,e){return!e||e!==M.Opal&&e!==M.EdgeMobile&&e!==M.Sapphire||(t.inputBoxSelector=oe.escapeJsonString(t.inputBoxSelector),t.applyButtonSelector=oe.escapeJsonString(t.applyButtonSelector),t.removeCouponButtonSelector=oe.escapeJsonString(t.removeCouponButtonSelector),t.orderTotalDataElementSelector=oe.escapeJsonString(t.orderTotalDataElementSelector),t.orderSubTotalElementSelector=oe.escapeJsonString(t.orderSubTotalElementSelector),t.enabledTips=oe.escapeJsonString(t.enabledTips),t.couponAcceptedMessageElementSelector=oe.escapeJsonString(t.couponAcceptedMessageElementSelector),t.errorMessageCloseButtonSelector=oe.escapeJsonString(t.errorMessageCloseButtonSelector),t.closeModal=oe.escapeJsonString(t.closeModal),t.clickBeforeStartSelector=oe.escapeJsonString(t.clickBeforeStartSelector),t.layoutClickSelector=oe.escapeJsonString(t.layoutClickSelector),t.errorMessageSelector=oe.escapeJsonString(t.errorMessageSelector)),t}}]),t}(),fe=function(){function t(){s(this,t),f(this,"transactionIdSelector",void 0),f(this,"purchaseTotalSelector",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.transactionIdSelector=e.transactionIdSelector,n.purchaseTotalSelector=e.purchaseTotalSelector,n}}]),t}();function ge(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ve=function(){function t(){s(this,t)}return r(t,null,[{key:"IsOnCheckoutPage",value:function(t,e){return!(!e||!e.retailerData)&&e.retailerData.UpdateCurrentCheckoutPage(t)}},{key:"GetHtmlElement",value:function(t){var e,n=ge(t.split(";"));try{for(n.s();!(e=n.n()).done;){var i=e.value;try{var o=document.querySelector(i);if(o)return o}catch(t){}}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"GetHtmlElements",value:function(t){var e,n=[],i=ge(t.split(";"));try{for(i.s();!(e=i.n()).done;){var o=e.value;try{var a,r=ge(document.querySelectorAll(o));try{for(r.s();!(a=r.n()).done;){var s=a.value;s&&n.push(s)}}catch(t){r.e(t)}finally{r.f()}}catch(t){}}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"isElementVisible",value:function(t){return t&&t.offsetWidth>0&&t.offsetHeight>0}},{key:"getQuantity",value:function(t,e){var n,i=e.querySelector(t),o=null==i||null===(n=i.innerText)||void 0===n?void 0:n.trim(),a=Number(o);try{if(isNaN(a))if("select"===(null==i?void 0:i.nodeName.toLowerCase())){var r=e.querySelector(t);a=Number(r.value)}else{var s,l=null==i||null===(s=i.innerText)||void 0===s?void 0:s.trim().match(/[-]{0,1}[\d]*[.]{0,1}[\d]+/g);l&&(null==l?void 0:l.length)>0&&(a=Number(l[0]))}}catch(t){a=-1}return isNaN(a)&&(a=-1),a}},{key:"isElementDisabled",value:function(t){return"disabled"===t.getAttribute("disabled")}}]),t}(),ye=ve;let Ce=0;function be(t=""){return`${t}${Ce++}`}function Se(t){return!t||!t.trim()}function xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ee(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ae=function(){function t(){s(this,t)}return r(t,null,[{key:"GetInternationalSupportedMarkets",value:function(){return t.internationalSupportedMarkets}},{key:"GetPriceStringAsNumber",value:function(e){e=e.replace(/[^0-9\.,]+/g,"");try{!1===t.IsUsCurrencyFormat(e)&&(e=t.SwapCommaAndPeriod(e))}catch(t){}return e=e.replace(/[,]+/g,""),parseFloat(e)}},{key:"IsUsCurrencyFormat",value:function(t){var e=t.lastIndexOf(","),n=t.lastIndexOf(".");return!(n>-1&&e>-1&&e>n)&&(!(n>-1&&t.length-n-1>2)&&!(e>-1&&t.length-e-1<=2))}},{key:"GetCurrencyString",value:function(e){return Se(e)||!t.IsCurrencyValid(e)?"$":e}},{key:"GetCurrencyFromMarket",value:function(e){return t.marketCurrencyMap.get(e)}},{key:"GetCurrencyCodeFromSymbol",value:function(e){return t.symbolCurrencyCodeMap.get(e)}},{key:"GetOverridenCurrencyValue",value:function(e){var n;return e&&null!==(n=t.GetCurrencyFromMarket(e))&&void 0!==n?n:"$"}},{key:"GetStandardizedCurrency",value:function(e,n){return t.IsCurrencyValid(e)?e:t.GetOverridenCurrencyValue(n)}},{key:"IsCurrencyValid",value:function(e){return!(!e||!t.currencySet)&&t.currencySet.has(e)}},{key:"ExtractCurrencyString",value:function(e){var n,i=e.replace(/[0-9,. ]/g,"").trim(),o=xe(t.currencySet);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i.includes(a))return a}}catch(t){o.e(t)}finally{o.f()}return Se(i)?"":i}},{key:"SwapCommaAndPeriod",value:function(t){return t.replace(/[,.]/g,(function(t){return","===t?".":","}))}}]),t}();f(Ae,"currencySet",new Set(["USD","INR","GBP","CAD","EUR","AUD","YEN","BRL","MXN","US$","CA$","AU$","MX$","C$","A$","R$","","","","","","$","NZ$","NZD","","CNY","","KRW","","RUB","Rp","IDR","","PHP","","VND","","THB","NT$","TWD","E","EGP","kr.","DKK","Fr.","CHF","z","PLN","dr.","SEK","RM","MYR","NOK","S$","SGD","K","CZK","TL","TRY","COL$","COP","R","ZAR"])),f(Ae,"internationalSupportedMarkets",["en-us","en-gb","en-ca","en-au","en-in","fr-fr","de-de","ja-jp","it-it","nl-nl","es-es","en-nz","pt-br","zh-cn","es-mx","ko-kr","ru-ru","id-id","fil-ph","vi-vn","th-th","zh-tw","ar-eg","de-at","da-dk","de-ch","pl-pl","sv-se","en-my","no-no","en-sg","fi-fi","fr-be","cs-cz","tr-tr","es-co","en-za"]),f(Ae,"marketCurrencyMap",new Map([["en-us","$"],["en-gb",""],["en-ca","CA$"],["en-au","AU$"],["en-in",""],["fr-fr",""],["de-de",""],["ja-jp",""],["it-it",""],["nl-nl",""],["es-es",""],["en-nz","NZ$"],["pt-br","R$"],["zh-cn",""],["es-mx","MX$"],["ko-kr"," "],["ru-ru",""],["id-id","Rp"],["fil-ph",""],["vi-vn",""],["th-th",""],["zh-tw","NT$"],["ar-eg","E"],["de-at",""],["da-dk","kr."],["de-ch","Fr."],["pl-pl","z"],["sv-se","dr"],["en-my","RM"],["no-no","NOK"],["en-sg","S$"],["fi-fi",""],["fr-be",""],["cs-cz","K"],["tr-tr","TL"],["es-co","COL$"],["en-za","R"]])),f(Ae,"symbolCurrencyCodeMap",new Map([["$","USD"],["","INR"],["","GBP"],["","EUR"],["NZ$","NZD"],["R$","BRL"],["CA$","CAD"],["C$","CAD"],["A$","AUD"],["AU$","AUD"],["","YEN"],["","CNY"],["MX$","MXN"],["","GBP"],["","KRW"],["","RUB"],["Rp","IDR"],["","PHP"],["","VND"],["","THB"],["NT$","TWD"],["E","EGP"],["kr.","DKK"],["Fr.","CHF"],["z","PLN"],["dr.","SEK"],["RM","MYR"],["NOK","NOK"],["S$","SGD"],["K","CZK"],["TL","TRY"],["COL$","COP"],["R","ZAR"]]));var Te=Ae,De=function(){function t(e,n,i,o,a){s(this,t),f(this,"Text",void 0),f(this,"IconType",void 0),f(this,"MinimumPurchase",void 0),f(this,"RetailerData",void 0),f(this,"CheckoutPageUrl",void 0),this.Text=e,this.IconType=n,this.MinimumPurchase=i,this.RetailerData=o,this.CheckoutPageUrl=a}return r(t,[{key:"GetAmountForFreeShipping",value:function(){var t=this.RetailerData.GetCurrentCheckoutPageByPathName(location.pathname);if(t){var e=t.orderSubTotalElementSelector,n=t.orderTotalDataElementSelector;if(e){var i,o=null===(i=ye.GetHtmlElement(e))||void 0===i?void 0:i.innerText;if(o&&this.MinimumPurchase)return this.MinimumPurchase-Te.GetPriceStringAsNumber(o)}else if(n){var a,r=null===(a=ye.GetHtmlElement(n))||void 0===a?void 0:a.innerText;if(r&&this.MinimumPurchase)return this.MinimumPurchase-Te.GetPriceStringAsNumber(r)}}return 0}}]),t}();function ke(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var we=function(){function t(){s(this,t),f(this,"domainName",void 0),f(this,"productPageUrl",void 0),f(this,"productImageSelector",void 0),f(this,"productNameSelector",void 0),f(this,"productPriceSelector",void 0),f(this,"allCheckoutPages",void 0),f(this,"couponsFilteringEnabled",void 0),f(this,"shortCircuitAAEnabled",void 0),f(this,"checkoutPageKey",void 0),f(this,"orderConfirmationPageUrl",void 0),f(this,"orderConfirmationRegex",void 0),f(this,"isHighTrafficDomain",void 0),f(this,"exclusiveMarket",void 0),f(this,"confirmationPageTelemetry",void 0),f(this,"tips",void 0)}return r(t,[{key:"UpdateCurrentCheckoutPage",value:function(t){for(var e=0;e<this.allCheckoutPages.length;e++){if(le.IsOnPage(this.allCheckoutPages[e].checkoutPageUrl,t))return this.checkoutPageKey=e,!0}return this.checkoutPageKey=null,!1}},{key:"GetCurrentCheckoutPage",value:function(){if(null!=this.checkoutPageKey)return this.allCheckoutPages[this.checkoutPageKey]}},{key:"GetCurrentCheckoutPageByPathName",value:function(t){var e,n=ke(this.allCheckoutPages);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("none"===i.enabledTips)return;if(le.IsOnPage(i.checkoutPageUrl,t))return i}}catch(t){n.e(t)}finally{n.f()}}},{key:"IsConfirmationPage",value:function(t){return new RegExp(this.orderConfirmationPageUrl).test(t)}},{key:"CreateCheckoutPageList",value:function(t){if(this.allCheckoutPages=[],t.allCheckoutPages&&t.allCheckoutPages.length>0){var e,n=ke(t.allCheckoutPages);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.allCheckoutPages.push(pe.Create(i))}}catch(t){n.e(t)}finally{n.f()}}}},{key:"CreateTipsList",value:function(t){if(t.tips){this.tips=[];var e,n=ke(t.tips);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.tips.push(new De(i.text,i.iconType,i.minimumPurchase,this,t.checkoutPageUrl))}}catch(t){n.e(t)}finally{n.f()}}}}],[{key:"Create",value:function(e){var n=new t;return n.domainName=e.domainName,n.productPageUrl=e.productPageUrl,n.productImageSelector=e.productImageSelector,n.productNameSelector=e.productNameSelector,n.productPriceSelector=e.productPriceSelector,n.couponsFilteringEnabled=e.couponsFilteringEnabled,n.shortCircuitAAEnabled=e.shortCircuitAAEnabled,n.exclusiveMarket=e.exclusiveMarket,n.orderConfirmationPageUrl=e.orderConfirmationPageUrl,n.orderConfirmationRegex=e.orderConfirmationRegex,n.isHighTrafficDomain=e.isHighTrafficDomain,e.confirmationPageTelemetry&&(n.confirmationPageTelemetry=fe.Create(e.confirmationPageTelemetry)),n.CreateCheckoutPageList(e),n.CreateTipsList(e),n}},{key:"Process",value:function(t,e){if(e&&(e===M.Opal||e===M.EdgeMobile||e===M.Sapphire)){t.productImageSelector=oe.escapeJsonString(t.productImageSelector),t.productNameSelector=oe.escapeJsonString(t.productNameSelector),t.productPriceSelector=oe.escapeJsonString(t.productPriceSelector);for(var n=0;n<t.allCheckoutPages.length;n++)t.allCheckoutPages[n]=pe.Process(t.allCheckoutPages[n],e)}return t}}]),t}();function Pe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Oe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Me=function(t){u(n,t);var e=Re(n);function n(t){var i;return s(this,n),f(l(i=e.call(this,n.thirtyMinutesExpiryInSeconds,t)),"coupons",[]),f(l(i),"deals",[]),f(l(i),"retailerData",void 0),f(l(i),"cashback",void 0),f(l(i),"errorCode",void 0),f(l(i),"impressionId",void 0),f(l(i),"market",void 0),f(l(i),"aFDMarket",void 0),f(l(i),"userPersonalizationInfo",void 0),i}return r(n,[{key:"HasCoupons",value:function(){return this.coupons&&this.coupons.length>0}},{key:"HasDeals",value:function(){return this.deals&&this.deals.length>0}},{key:"GetOfferCount",value:function(){return this.HasCoupons()?this.coupons.length:this.HasDeals()?this.deals.length:0}}],[{key:"Create",value:function(t){if(t){var e=new n(t.Timestamp);if(t.errorCode&&(e.errorCode=t.errorCode),t.retailerData&&(e.retailerData=we.Create(t.retailerData)),e.coupons=[],t.coupons){var i,o=Pe(t.coupons);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.coupons.push(a)}}catch(t){o.e(t)}finally{o.f()}}if(e.deals=[],t.deals){var r,s=Pe(t.deals);try{for(s.s();!(r=s.n()).done;){var l=r.value;e.deals.push(Jt.Create(l))}}catch(t){s.e(t)}finally{s.f()}}return t.cashback&&(e.cashback=Xt.Create(t.cashback)),t.impressionId&&(e.impressionId=t.impressionId),t.aFDMarket&&(e.aFDMarket=t.aFDMarket),t.market&&(e.market=t.market),t.userPersonalizationInfo&&(e.userPersonalizationInfo=t.userPersonalizationInfo),e}return new n}},{key:"Process",value:function(t,e){return t.retailerData&&(t.retailerData=we.Process(t.retailerData,e)),t}}]),n}(Qt);f(Me,"thirtyMinutesExpiryInSeconds",1800);var Ne=Me;function Le(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Fe,He,Be,Ue=function(t){var e=function(){var t=new Map;return t.set("ALABAMA","AL"),t.set("ALASKA","AK"),t.set("ARIZONA","AZ"),t.set("ARKANSAS","AR"),t.set("CALIFORNIA","CA"),t.set("COLORADO","CO"),t.set("CONNECTICUT","CT"),t.set("DELAWARE","DE"),t.set("DISTRICT OF COLUMBIA","DC"),t.set("WASHINGTON DC","DC"),t.set("FLORIDA","FL"),t.set("GEORGIA","GA"),t.set("HAWAII","HI"),t.set("IDAHO","ID"),t.set("ILLINOIS","IL"),t.set("INDIANA","IN"),t.set("IOWA","IA"),t.set("KANSAS","KS"),t.set("KENTUCKY","KY"),t.set("LOUISIANA","LA"),t.set("MAINE","ME"),t.set("MARYLAND","MD"),t.set("MASSACHUSETTS","MA"),t.set("MICHIGAN","MI"),t.set("MINNESOTA","MN"),t.set("MISSISSIPPI","MS"),t.set("MISSOURI","MO"),t.set("MONTANA","MT"),t.set("NEBRASKA","NE"),t.set("NEVADA","NV"),t.set("NEW HAMPSHIRE","NH"),t.set("NEW JERSEY","NJ"),t.set("NEW MEXICO","NM"),t.set("NEW YORK","NY"),t.set("NORTH CAROLINA","NC"),t.set("NORTH DAKOTA","ND"),t.set("OHIO","OH"),t.set("OKLAHOMA","OK"),t.set("OREGON","OR"),t.set("PENNSYLVANIA","PA"),t.set("RHODE ISLAND","RI"),t.set("SOUTH CAROLINA","SC"),t.set("SOUTH DAKOTA","SD"),t.set("TENNESSEE","TN"),t.set("TEXAS","TX"),t.set("UTAH","UT"),t.set("VERMONT","VT"),t.set("VIRGINIA","VA"),t.set("WASHINGTON","WA"),t.set("WEST VIRGINIA","WV"),t.set("WISCONSIN","WI"),t.set("WYOMING","WY"),t.set("VIRGIN ISLANDS","VI"),t.set("U.S. VIRGIN ISLANDS","VI"),t.set("PALAU","PW"),t.set("N. MARIANA ISLANDS","MP"),t.set("NORTHERN MARIANA ISLANDS","MP"),t.set("GUAM","GU"),t.set("AMERICAN SAMOA","AS"),t.set("MICRONESIA","FM"),t.set("MARSHALL ISLANDS","MH"),t}(),n=new Set(e.values()),i=t.toUpperCase();if(n.has(i))return[i,!0];var o=e.get(i);return void 0!==o?[o,!0]:[i,!1]},Ve=function(t,e){var n=parseInt(t.substr(0,3),10),i=function(){var t=new Map;return t.set("NY",[[5,5],[100,149]]),t.set("PR",[[6,7],[9,9]]),t.set("VI",[[8,8]]),t.set("MA",[[10,27],[55,55]]),t.set("RI",[[28,29]]),t.set("NH",[[30,38]]),t.set("ME",[[39,49]]),t.set("VT",[[50,54],[56,59]]),t.set("CT",[[60,69]]),t.set("NJ",[[70,89]]),t.set("AE",[[90,99]]),t.set("PA",[[150,196]]),t.set("DE",[[197,199]]),t.set("DC",[[200,200],[202,205]]),t.set("VA",[[201,201],[220,246]]),t.set("MD",[[206,212],[214,219]]),t.set("WV",[[247,268]]),t.set("NC",[[270,289]]),t.set("SC",[[290,299]]),t.set("GA",[[300,319],[398,399]]),t.set("FL",[[320,339],[341,342],[344,344],[346,347],[349,349]]),t.set("AA",[[340,340]]),t.set("AL",[[350,352],[354,369]]),t.set("TN",[[370,385]]),t.set("MS",[[386,397]]),t.set("KY",[[400,427],[471,471]]),t.set("OH",[[430,459]]),t.set("IN",[[460,470],[472,479]]),t.set("MI",[[480,499]]),t.set("IA",[[500,528]]),t.set("WI",[[530,532],[534,535],[537,549]]),t.set("MN",[[550,551],[553,566]]),t.set("ND",[[567,567],[580,588]]),t.set("SD",[[570,577]]),t.set("MT",[[590,599]]),t.set("IL",[[600,620],[622,629]]),t.set("MO",[[630,631],[633,641],[644,658]]),t.set("KS",[[660,662],[664,679]]),t.set("NE",[[680,681],[683,693]]),t.set("LA",[[700,701],[703,708],[710,714]]),t.set("AR",[[716,729]]),t.set("OK",[[730,731],[734,741],[743,749]]),t.set("TX",[[733,733],[750,799],[885,885]]),t.set("CO",[[800,816]]),t.set("WY",[[820,831]]),t.set("ID",[[832,838]]),t.set("UT",[[840,847]]),t.set("AZ",[[850,850],[852,853],[855,857],[859,860],[863,865]]),t.set("NM",[[870,875],[877,884]]),t.set("NV",[[889,891],[893,895],[897,898]]),t.set("CA",[[900,908],[910,928],[930,961]]),t.set("AP",[[962,966]]),t.set("HI",[[967,968]]),t.set("GU",[[969,969]]),t.set("OR",[[970,979]]),t.set("WA",[[980,986],[988,994]]),t.set("AK",[[995,999]]),t}().get(e);if(void 0!==i){var o,a=Le(i);try{for(a.s();!(o=a.n()).done;){var r=o.value;if(n>=r[0]&&n<=r[1])return!0}}catch(t){a.e(t)}finally{a.f()}}return!1},Ge=null,We="test-shopping-localstorage";function $e(t){var e,n=ze(t);if(n)try{return e=JSON.parse(n)}catch(t){}return e}function ze(t){var e=null;return Ze()&&(e=window.localStorage.getItem(t)),e}function Ke(t){try{var e=ze(t);return e&&"undefined"!==e?JSON.parse(e):{}}catch(t){return{}}}function Ye(t,e){Ze()&&window.localStorage.setItem(t,e)}function je(t,e){var n=Ke(e),i=new Date,o=n[t],a=o?new Date(o.timestamp):null,r=a?i.getTime()-a.getTime():0;return Math.floor(r/1e3/60/60/24)>0&&(n[t]={},Ye(e,JSON.stringify(n)),!0)}function qe(t){Ze()&&localStorage.removeItem(t)}function Ze(){try{var t;if(null!==Ge)return Ge;"undefined"!=typeof window&&null!==(t=window)&&void 0!==t&&t.localStorage&&(window.localStorage.setItem(We,We),window.localStorage.getItem(We),window.localStorage.removeItem(We),Ge=!0)}catch(t){Ge=!1}return Ge}!function(t){t[t.AUTO_SHOW_FRE=0]="AUTO_SHOW_FRE",t[t.AUTO_SHOW_COUPONS_CHECKOUT=1]="AUTO_SHOW_COUPONS_CHECKOUT",t[t.GOT_IT=2]="GOT_IT",t[t.BUTTON_FRE=3]="BUTTON_FRE",t[t.BUTTON=4]="BUTTON",t[t.AUTO_SHOW_LOWER_PRICE_FOUND=5]="AUTO_SHOW_LOWER_PRICE_FOUND",t[t.AUTO_SHOW_BING_SEARCH=6]="AUTO_SHOW_BING_SEARCH",t[t.AUTO_SHOW_REBATES=7]="AUTO_SHOW_REBATES",t[t.AUTO_SHOW_REBATES_CONFIRMATION=8]="AUTO_SHOW_REBATES_CONFIRMATION",t[t.AUTO_SHOW_REBATES_DEACTIVATED=9]="AUTO_SHOW_REBATES_DEACTIVATED",t[t.AUTO_SHOW_REBATES_BING=10]="AUTO_SHOW_REBATES_BING",t[t.AUTO_SHOW_REBATES_ORGANIC=11]="AUTO_SHOW_REBATES_ORGANIC",t[t.BANNER=12]="BANNER",t[t.AUTO_SHOW_PRICE_HISTORY=13]="AUTO_SHOW_PRICE_HISTORY",t[t.AUTO_SHOW_REBATES_ORGANIC_NEW=14]="AUTO_SHOW_REBATES_ORGANIC_NEW",t[t.AUTO_SHOW_REBATES_CHECKOUT=15]="AUTO_SHOW_REBATES_CHECKOUT",t[t.AUTO_SHOW_SERVER_DRIVEN_CHECKOUT=16]="AUTO_SHOW_SERVER_DRIVEN_CHECKOUT",t[t.AUTO_SHOW_PERSONALIZED_CASHBACK=17]="AUTO_SHOW_PERSONALIZED_CASHBACK",t[t.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION=18]="AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION",t[t.AUTO_SHOW_URL_PARAM_REBATES=19]="AUTO_SHOW_URL_PARAM_REBATES",t[t.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON=20]="AUTO_SHOW_URL_PARAM_PRICE_COMPARISON",t[t.AUTO_SHOW_URL_PARAM_PRICE_HISTORY=21]="AUTO_SHOW_URL_PARAM_PRICE_HISTORY",t[t.AUTO_SHOW_EXPRESS_CHECKOUT=22]="AUTO_SHOW_EXPRESS_CHECKOUT",t[t.AUTO_SHOW_SERVER_DRIVEN_ALL_PAGES=23]="AUTO_SHOW_SERVER_DRIVEN_ALL_PAGES",t[t.AUTO_SHOW_SERVER_DRIVEN_CONFIRMATION_PAGE=24]="AUTO_SHOW_SERVER_DRIVEN_CONFIRMATION_PAGE",t[t.AUTO_SHOW_SERVER_DRIVEN_HOME_PAGE=25]="AUTO_SHOW_SERVER_DRIVEN_HOME_PAGE",t[t.AUTO_SHOW_SERVER_DRIVEN_REWARDS=26]="AUTO_SHOW_SERVER_DRIVEN_REWARDS",t[t.AUTO_SHOW_COUPONS_CLIPPING=27]="AUTO_SHOW_COUPONS_CLIPPING",t[t.AUTO_SHOW_REBATES_ACTIVATION_FAILED=28]="AUTO_SHOW_REBATES_ACTIVATION_FAILED",t[t.AUTO_SHOW_REBATES_SWITCHED_TO_MSA=29]="AUTO_SHOW_REBATES_SWITCHED_TO_MSA",t[t.AUTO_SHOW_NOTIFICATION=30]="AUTO_SHOW_NOTIFICATION",t[t.AUTO_SHOW_OTHER_SELLERS=31]="AUTO_SHOW_OTHER_SELLERS",t[t.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER=32]="AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER",t[t.AUTO_SHOW_PROFESSIONAL_REVIEWS=33]="AUTO_SHOW_PROFESSIONAL_REVIEWS",t[t.PIN_HUB=34]="PIN_HUB",t[t.AUTO_SHOW_VIRTUAL_CARD=35]="AUTO_SHOW_VIRTUAL_CARD",t[t.AUTO_SHOW_BING_CAMPAIGN=36]="AUTO_SHOW_BING_CAMPAIGN",t[t.OPEN_HUB_ICON=37]="OPEN_HUB_ICON",t[t.OPEN_FLYOUT_MICRO_NOTIFICATION=38]="OPEN_FLYOUT_MICRO_NOTIFICATION",t[t.OPEN_FLYOUT_MORE_MENU=39]="OPEN_FLYOUT_MORE_MENU",t[t.AUTO_SHOW_PACKAGE_TRACKING=40]="AUTO_SHOW_PACKAGE_TRACKING",t[t.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION=41]="AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION",t[t.OPEN_FLYOUT_FROM_EDGE_DRIVER=42]="OPEN_FLYOUT_FROM_EDGE_DRIVER",t[t.AUTO_SHOW_GUEST_DOMAIN_COUPONS=43]="AUTO_SHOW_GUEST_DOMAIN_COUPONS",t[t.AUTO_SHOW_EXCLUSIVE_COUPONS=44]="AUTO_SHOW_EXCLUSIVE_COUPONS",t[t.AUTO_SHOW_SUSTAINABILITY_LANDING=45]="AUTO_SHOW_SUSTAINABILITY_LANDING",t[t.AUTO_SHOW_SUSTAINABILITY_PURCHASE=46]="AUTO_SHOW_SUSTAINABILITY_PURCHASE",t[t.AUTO_SHOW_REWARDS_ACTIVATION_FAILED=47]="AUTO_SHOW_REWARDS_ACTIVATION_FAILED",t[t.AUTO_SHOW_REWARDS_SWITCHED_TO_MSA=48]="AUTO_SHOW_REWARDS_SWITCHED_TO_MSA",t[t.AUTO_SHOW_ATTAINABLE_COUPONS=49]="AUTO_SHOW_ATTAINABLE_COUPONS",t[t.AUTO_SHOW_GIFT_CARD=50]="AUTO_SHOW_GIFT_CARD",t[t.AUTO_SHOW_RECOMMENDATIONS=51]="AUTO_SHOW_RECOMMENDATIONS",t[t.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK=52]="AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK",t[t.AUTO_SHOW_AUTOS_MARKETPLACE=54]="AUTO_SHOW_AUTOS_MARKETPLACE",t[t.AUTO_SHOW_SHOPRUNNER=56]="AUTO_SHOW_SHOPRUNNER"}(Fe||(Fe={})),function(t){t[t.NONE=0]="NONE",t[t.COUPONS_CHECKOUT=1]="COUPONS_CHECKOUT",t[t.COUPONS_CLIPPING=2]="COUPONS_CLIPPING",t[t.PRICE_COMPARE=4]="PRICE_COMPARE",t[t.PRICE_HISTORY=8]="PRICE_HISTORY",t[t.REBATES_CONFIRMATION=16]="REBATES_CONFIRMATION",t[t.REBATES_BING=32]="REBATES_BING",t[t.REBATES_ORGANIC=64]="REBATES_ORGANIC",t[t.REBATES_CHECKOUT=128]="REBATES_CHECKOUT",t[t.PERSONALIZED_CASHBACK=256]="PERSONALIZED_CASHBACK",t[t.PERSONALIZED_CASHBACK_CONFIRMATION=512]="PERSONALIZED_CASHBACK_CONFIRMATION",t[t.EXPRESS_CHECKOUT=1024]="EXPRESS_CHECKOUT",t[t.REWARDS=2048]="REWARDS",t[t.OTHER_SELLER=4096]="OTHER_SELLER",t[t.REVIEWS=8192]="REVIEWS",t[t.VIRTUAL_CARD=16384]="VIRTUAL_CARD",t[t.PACKAGE_TRACKING=32768]="PACKAGE_TRACKING",t[t.ATTAINABLE_COUPONS=1048576]="ATTAINABLE_COUPONS",t[t.REWARDS_GIFT_CARD=2097152]="REWARDS_GIFT_CARD",t[t.PRINT_GROCERY=4194304]="PRINT_GROCERY",t[t.GROCERY_ITEMIZED_CASHBACK=8388608]="GROCERY_ITEMIZED_CASHBACK"}(He||(He={})),function(t){t.ruleBasedTriggering="msShoppingExp0",t.recommendationsTrending="msShoppingExp1",t.attainableCouponsAutoOpen="msShoppingExp2",t.groceryMultipleRetailers="msShoppingExp3",t.sustainability="msShoppingExp4",t.chinaTrendingDeals="msShoppingExp6",t.autoOpenController="msShoppingExp7",t.abandonedCart="msShoppingExp8",t.manualCoupon="msShoppingExp9",t.groceryCashback="msShoppingExp10",t.smallBloomFilterResponse="msShoppingExp11",t.doNotShowExperiment="msShoppingExp12",t.merchantNameFlyout="msShoppingExp13",t.smallNotification="msShoppingExp14",t.instantSavingsNotification="msShoppingExp15",t.categoriesFiltering="msShoppingExp18",t.oSAutoShowRestriction="msShoppingExp19",t.phExpandedGraph="msShoppingExp20",t.footerInAA="msShoppingExp21",t.rankCoupons="msShoppingExp22",t.implicitPriceTrackingFootet="msShoppingExp23",t.groceryAutoshow="msShoppingExp24",t.calculatedCutOffPriceFiltering="msShoppingExp25",t.couponsValidationCheck="msShoppingExp26",t.privacyBadge="msShoppingExp27",t.newStandardStyle="msShoppingExp28",t.disableAutoOpen="msShoppingExp29",t.htmlfragmentCollection="msShoppingExp30",t.cashbackEstimate="msShoppingExp31",t.startShoppingHomeModules="msShoppingExp32",t.autosPriceInsightsAutoShow="msShoppingExp33",t.ppdomainslist="msShoppingExp34",t.amazongiftCardExp="msShoppingExp35",t.instantcb="msShoppingExp36",t.autoClipExp="msShoppingExp37",t.groceryAnonymous="msShoppingExp38",t.isTrendingOffersEnabled="msShoppingExp39",t.pcbrefresh="msShoppingExp40",t.rewardNotification="msShoppingExp41",t.shopRunner="msShoppingExp42",t.autoShowControlForFeature="msEdgeShoppingAutoShowControlForFeature",t.autofillAutoPopup="msAutofillAutoPopup",t.bannerShowCashback="msEdgeShoppingBannerRebates",t.bannerShowCoupons="msEdgeShoppingBannerCoupons",t.bannerShowPriceComparison="msEdgeShoppingBannerPriceCompare",t.bannerShowPriceHistory="msEdgeShoppingBannerPriceHistory",t.clarity="msEdgeShoppingClarityEnabled",t.clarityWithCookies="msEdgeShoppingClarityEnabledWithCookies",t.clientUrlNavigation="msEdgeShoppingClientUrlNavigation",t.coloredHeader="msShoppingColoredHeader",t.couponsUX="msEdgeShoppingCouponsUXExperimentation",t.expressCheckout="msEdgeShoppingExpressCheckout",t.expressCheckoutFillDetails="msEdgeShoppingExpressCheckoutFillDetails",t.microNotification="msEdgeShoppingNotifications",t.pcBannerUXExperimentation1="msEdgeShoppingPCBannerUXExperimentation1",t.pcBannerUXExperimentation2="msEdgeShoppingPCBannerUXExperimentation2",t.pcBannerUXExperimentation3="msEdgeShoppingPCBannerUXExperimentation3",t.pcBannerUXExperimentation4="msEdgeShoppingPCBannerUXExperimentation4",t.pcBannerUXExperimentation5="msEdgeShoppingPCBannerUXExperimentation5",t.pcBannerUXExperimentation6="msEdgeShoppingPCBannerUXExperimentation6",t.priceDropNotification="msEdgeShoppingServerNotifications",t.ProductPageBackgroundAutoApply="msEdgeShoppingBackgroundAutoApplyForPDPAndHomePage",t.backgroundAutoApply="msEdgeShoppingBackgroundAutoApply",t.rewardFlyout="msEdgeShoppingRewards",t.serverSideRenderingEnabled="msEdgeServerSideShopping",t.showAmazonOtherSellers="msEdgeShoppingOtherSeller",t.showNudgeTipsOverlay="msShoppingExpNudge",t.showPaymentOptions="msZipPayVirtualCard",t.showPaymentOptionsOnProductPage="msEdgeShoppingProductFlyoutWallet",t.showProductHistory="msWebAssistQuery",t.showWalletFooter="msEnableWallet",t.signinRebates="msEdgeShoppingRebatesSignUp",t.signinRewards="msEdgeShoppingRewardsSignUp",t.socialSharingUpdate="msShoppingSocialSharingUpdate",t.youtubeCoupons="msEdgeShoppingExclusiveCoupons",t.youtubeCouponsAutoShow="msEdgeShoppingExclusiveCouponsAutoShow",t.msWalletBNPL="msWalletBNPL"}(Be||(Be={}));var Xe=function(){function t(){s(this,t)}return r(t,null,[{key:"SetSubmittedItemsCashbackItems",value:function(e,n,i){try{var o=Ke(t.redeemedCashbackKey);(!o[e]||o[e]&&!o[e].submittedIds)&&(o[e]={submittedIds:[]}),o[e].submittedIds=n,o[e].impressionId=i;var a=JSON.stringify(o);Ye(t.redeemedCashbackKey,a)}catch(t){}}},{key:"SetActivatedCashbackItem",value:function(t,e,n){if(e)try{var i=Ke(this.activatedCashbackKey),o=e.cashBackProducts[0].title,a=e.cashBackProducts[0].upc,r=e.value,s=e.minQty,l=e.id,c=e.imageUrl,u=e.description,d=e.cashBackProducts[0].url;(!i[t]||i[t]&&!i[t].items)&&(i[t]={items:{},fullItems:{}}),i[t].items[o]={minQty:s,offerId:l,upc:a,value:r,imageUrl:c,url:d,description:u},i[t].impressionId=n,i[t].fullItems[l]=e,Ye(this.activatedCashbackKey,JSON.stringify(i))}catch(t){}}},{key:"GetActivatedCashbackItems",value:function(t){var e,n=[];if(!t)return{activatedItems:n};var i=Ke(this.activatedCashbackKey);try{var o,a,r=i?i[t]:{};return e=r&&null!==(o=r.items)&&void 0!==o?o:{},{activatedItems:n=null!==(a=Object.keys(e))&&void 0!==a?a:[],activatedItemsList:e}}catch(t){return{activatedItems:n,activatedItemsList:e}}}}]),t}();f(Xe,"activatedCashbackKey","activatedGroceryCashback"),f(Xe,"redeemedCashbackKey","redeemedCashback"),f(Xe,"filteredOffersMapKey","filteredOffersMap");var Je=Xe;const Qe=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}();void 0===Qe.trustedTypes&&(Qe.trustedTypes={createPolicy:(t,e)=>e});const tn={configurable:!1,enumerable:!1,writable:!1};void 0===Qe.FAST&&Reflect.defineProperty(Qe,"FAST",Object.assign({value:Object.create(null)},tn));const en=Qe.FAST;if(void 0===en.getById){const t=Object.create(null);Reflect.defineProperty(en,"getById",Object.assign({value(e,n){let i=t[e];return void 0===i&&(i=n?t[e]=n():null),i}},tn))}const nn=Object.freeze([]),on=Qe.FAST.getById(1,(()=>{const t=[],e=[];function n(){if(e.length)throw e.shift()}function i(t){try{t.call()}catch(t){e.push(t),setTimeout(n,0)}}function o(){let e=0;for(;e<t.length;)if(i(t[e]),e++,e>1024){for(let n=0,i=t.length-e;n<i;n++)t[n]=t[n+e];t.length-=e,e=0}t.length=0}return Object.freeze({enqueue:function(e){t.length<1&&Qe.requestAnimationFrame(o),t.push(e)},process:o})})),an=Qe.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let rn=an;const sn=`fast-${Math.random().toString(36).substring(2,8)}`,ln=`${sn}{`,cn=`}${sn}`,un=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(rn!==an)throw new Error("The HTML policy can only be set once.");rn=t},createHTML:t=>rn.createHTML(t),isMarker:t=>t&&8===t.nodeType&&t.data.startsWith(sn),extractDirectiveIndexFromMarker:t=>parseInt(t.data.replace(`${sn}:`,"")),createInterpolationPlaceholder:t=>`${ln}${t}${cn}`,createCustomAttributePlaceholder(t,e){return`${t}="${this.createInterpolationPlaceholder(e)}"`},createBlockPlaceholder:t=>`\x3c!--${sn}:${t}--\x3e`,queueUpdate:on.enqueue,processUpdates:on.process,nextUpdate:()=>new Promise(on.enqueue),setAttribute(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)},setBooleanAttribute(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)},removeChildNodes(t){for(let e=t.firstChild;null!==e;e=t.firstChild)t.removeChild(e)},createTemplateWalker:t=>document.createTreeWalker(t,133,null,!1)});var dn,hn,pn;!function(t){t.EdgeImpressionId="EdgeImpressionId",t.CouponImpressionId="CouponImpressionId",t.DomainName="DomainName",t.Client="Client"}(dn||(dn={})),function(t){t.onCashbackActivationError="onCashbackActivationError",t.onCashBackActivated="onCashBackActivated",t.onCashBackActivatedForRewards="onCashBackActivatedForRewards",t.telemetryCashBackActivationError="telemetryCashBackActivationError",t.telemetryCashBackActivated="telemetryCashBackActivated",t.StyleActivatedState="StyleActivatedState",t.StyleProcessingState="StyleProcessingState",t.CreateCommissionArrow="CreateCommissionArrow",t.CreateModules="CreateModules",t.CreateInlineRating="CreateInlineRating",t.CreateFeedbackModule="CreateFeedbackModule",t.CreateShortFeedbackModule="CreateShortFeedbackModule",t.ModulesRendered="ModulesRendered",t.PWILOPriceHistory="PWILOPriceHistory",t.onRebatesTelemetrySuccess="onRebatesTelemetrySuccess",t.onRebatesTelemetryFail="onRebatesTelemetryFail",t.onRewardsTelemetrySuccess="onRewardsTelemetrySuccess",t.onRewardsTelemetryFail="onRewardsTelemetryFail",t.onMicroNotificationClick="onMicroNotificationClick",t.onNotificationClick="onNotificationClick",t.onFlyoutResize="onFlyoutResize",t.CreateAutoApplyButton="CreateAutoApplyButton",t.pcCreateHeader="pcCreateHeader",t.rebatesSignInPendingSuccess="rebatesSignInPendingSuccess",t.rebatesSignInFail="rebatesSignInFail",t.CreateCouponHeader="CreateCouponHeader",t.PDPUpdate="PDPUpdate",t.CreatePHHeader="CreatePHHEader",t.onDataUpdate="onDataUpdate",t.domainEligibility="domainEligibility",t.pdpEligibility="pdpEligibility",t.flyoutRefresh="flyoutRefresh",t.CreateTrivia="CreateTrivia",t.PWILODeleted="PWILODeleted",t.PWILOEmpty="PWILOEmpty",t.PDPRemoved="PDPRemoved",t.CreateCBLearnMore="CreateCBLearnMore",t.FooterCreated="FooterCreated",t.ReRankFlyout="ReRankFlyout",t.RequestRefresh="RequestRefresh"}(hn||(hn={})),function(t){t.isAutoApplyVisible="isAutoApplyVisible",t.topModuleName="topModuleName",t.topModulePriority="topModulePriority",t.renderedViewModuleCount="renderedViewModuleCount",t.microNotificationClicked="microNotificationClicked",t.modulesRendered="modulesRendered",t.isProductDetailPage="isProductDetailPage",t.pcLowestPriceImpression="pcLowestPriceImpression",t.canRenderAutoApply="canRenderAutoApply",t.ICOffersRendered="ICOffersRendered",t.nonICPDP="nonICPDP",t.ICRelatedOffersExist="ICRelatedOffersExist",t.icPdpAvailable="icPdpAvailable",t.isCreateTriviaRendered="isCreateTriviaRendered"}(pn||(pn={}));var fn=function(){function t(e,n){s(this,t),f(this,"logModule",void 0),f(this,"shopping",void 0),this.logModule=e,this.shopping=n,this.cleanStateMapping()}return r(t,[{key:"getState",value:function(e){return t.stateMapping.get(e)}},{key:"setState",value:function(e,n){t.stateMapping.set(e,n)}},{key:"addEventListener",value:function(t,e){try{this.shopping.addEventListener(t,e)}catch(e){var n=dn.EdgeImpressionId,i=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"addEventListener exception: ".concat(t," ").concat(e),i,n)}}},{key:"dispatchEvent",value:function(t){try{this.shopping.dispatchEvent(t)}catch(i){var e=dn.EdgeImpressionId,n=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"dispatchEvent exception: ".concat(null==t?void 0:t.type," ").concat(i),n,e)}}},{key:"cleanStateMapping",value:function(){t.stateMapping=new Map}}]),t}();f(fn,"stateMapping",new Map);var gn=fn;function mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function vn(t,e){if(t){if("string"==typeof t)return mn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(t,e):void 0}}function yn(t){return function(t){if(Array.isArray(t))return mn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r}class bn{createCSS(){return""}createBehavior(){}}class Sn{constructor(t,e){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=e}has(t){return void 0===this.spillover?this.sub1===t||this.sub2===t:-1!==this.spillover.indexOf(t)}subscribe(t){const e=this.spillover;if(void 0===e){if(this.has(t))return;if(void 0===this.sub1)return void(this.sub1=t);if(void 0===this.sub2)return void(this.sub2=t);this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else{-1===e.indexOf(t)&&e.push(t)}}unsubscribe(t){const e=this.spillover;if(void 0===e)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}notify(t){const e=this.spillover,n=this.source;if(void 0===e){const e=this.sub1,i=this.sub2;void 0!==e&&e.handleChange(n,t),void 0!==i&&i.handleChange(n,t)}else for(let i=0,o=e.length;i<o;++i)e[i].handleChange(n,t)}}class xn{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var e;const n=this.subscribers[t];void 0!==n&&n.notify(t),null===(e=this.sourceSubscribers)||void 0===e||e.notify(t)}subscribe(t,e){var n;if(e){let n=this.subscribers[e];void 0===n&&(this.subscribers[e]=n=new Sn(this.source)),n.subscribe(t)}else this.sourceSubscribers=null!==(n=this.sourceSubscribers)&&void 0!==n?n:new Sn(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,e){var n;if(e){const n=this.subscribers[e];void 0!==n&&n.unsubscribe(t)}else null===(n=this.sourceSubscribers)||void 0===n||n.unsubscribe(t)}}const En=en.getById(2,(()=>{const t=/(:|&&|\|\||if)/,e=new WeakMap,n=new WeakMap,i=un.queueUpdate;let o,a=t=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function r(t){let n=t.$fastController||e.get(t);return void 0===n&&(Array.isArray(t)?n=a(t):e.set(t,n=new xn(t))),n}function s(t){let e=n.get(t);if(void 0===e){let i=Reflect.getPrototypeOf(t);for(;void 0===e&&null!==i;)e=n.get(i),i=Reflect.getPrototypeOf(i);e=void 0===e?[]:e.slice(0),n.set(t,e)}return e}class l{constructor(t){this.name=t,this.field=`_${t}`,this.callback=`${t}Changed`}getValue(t){return void 0!==o&&o.watch(t,this.name),t[this.field]}setValue(t,e){const n=this.field,i=t[n];if(i!==e){t[n]=e;const o=t[this.callback];"function"==typeof o&&o.call(t,i,e),r(t).notify(this.name)}}}class c extends Sn{constructor(t,e,n=!1){super(t,e),this.binding=t,this.isVolatileBinding=n,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(t,e){this.needsRefresh&&null!==this.last&&this.disconnect();const n=o;o=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const i=this.binding(t,e);return o=n,i}disconnect(){if(null!==this.last){let t=this.first;for(;void 0!==t;)t.notifier.unsubscribe(this,t.propertyName),t=t.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(t,e){const n=this.last,i=r(t),a=null===n?this.first:{};if(a.propertySource=t,a.propertyName=e,a.notifier=i,i.subscribe(this,e),null!==n){if(!this.needsRefresh){let e;o=void 0,e=n.propertySource[n.propertyName],o=this,t===e&&(this.needsRefresh=!0)}n.next=a}this.last=a}handleChange(){this.needsQueue&&(this.needsQueue=!1,i(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let t=this.first;return{next:()=>{const e=t;return void 0===e?{value:void 0,done:!0}:(t=t.next,{value:e,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(t){a=t},getNotifier:r,track(t,e){void 0!==o&&o.watch(t,e)},trackVolatile(){void 0!==o&&(o.needsRefresh=!0)},notify(t,e){r(t).notify(e)},defineProperty(t,e){"string"==typeof e&&(e=new l(e)),s(t).push(e),Reflect.defineProperty(t,e.name,{enumerable:!0,get:function(){return e.getValue(this)},set:function(t){e.setValue(this,t)}})},getAccessors:s,binding(t,e,n=this.isVolatileBinding(t)){return new c(t,e,n)},isVolatileBinding:e=>t.test(e.toString())})}));function An(t,e){En.defineProperty(t,e)}const Tn=en.getById(3,(()=>{let t=null;return{get:()=>t,set(e){t=e}}}));class Dn{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return Tn.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){Tn.set(t)}}En.defineProperty(Dn.prototype,"index"),En.defineProperty(Dn.prototype,"length");const kn=Object.seal(new Dn);class In{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function wn(t){return t.map((t=>t instanceof In?wn(t.styles):[t])).reduce(((t,e)=>t.concat(e)),[])}function Pn(t){return t.map((t=>t instanceof In?t.behaviors:null)).reduce(((t,e)=>null===e?t:(null===t&&(t=[]),t.concat(e))),null)}In.create=(()=>{if(un.supportsAdoptedStyleSheets){const t=new Map;return e=>new On(e,t)}return t=>new Mn(t)})();class On extends In{constructor(t,e){super(),this.styles=t,this.styleSheetCache=e,this._styleSheets=void 0,this.behaviors=Pn(t)}get styleSheets(){if(void 0===this._styleSheets){const t=this.styles,e=this.styleSheetCache;this._styleSheets=wn(t).map((t=>{if(t instanceof CSSStyleSheet)return t;let n=e.get(t);return void 0===n&&(n=new CSSStyleSheet,n.replaceSync(t),e.set(t,n)),n}))}return this._styleSheets}addStylesTo(t){t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets],super.addStylesTo(t)}removeStylesFrom(t){const e=this.styleSheets;t.adoptedStyleSheets=t.adoptedStyleSheets.filter((t=>-1===e.indexOf(t))),super.removeStylesFrom(t)}}let Rn=0;class Mn extends In{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=Pn(t),this.styleSheets=wn(t),this.styleClass="fast-style-class-"+ ++Rn}addStylesTo(t){const e=this.styleSheets,n=this.styleClass;t=this.normalizeTarget(t);for(let i=0;i<e.length;i++){const o=document.createElement("style");o.innerHTML=e[i],o.className=n,t.append(o)}super.addStylesTo(t)}removeStylesFrom(t){const e=(t=this.normalizeTarget(t)).querySelectorAll(`.${this.styleClass}`);for(let n=0,i=e.length;n<i;++n)t.removeChild(e[n]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const Nn={toView:t=>t?"true":"false",fromView:t=>null!=t&&"false"!==t&&!1!==t&&0!==t},Ln={toView(t){if(null==t)return null;const e=1*t;return isNaN(e)?null:e.toString()},fromView(t){if(null==t)return null;const e=1*t;return isNaN(e)?null:e}};class _n{constructor(t,e,n=e.toLowerCase(),i="reflect",o){this.guards=new Set,this.Owner=t,this.name=e,this.attribute=n,this.mode=i,this.converter=o,this.fieldName=`_${e}`,this.callbackName=`${e}Changed`,this.hasCallback=this.callbackName in t.prototype,"boolean"===i&&void 0===o&&(this.converter=Nn)}setValue(t,e){const n=t[this.fieldName],i=this.converter;void 0!==i&&(e=i.fromView(e)),n!==e&&(t[this.fieldName]=e,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](n,e),t.$fastController.notify(this.name))}getValue(t){return En.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,e){this.guards.has(t)||(this.guards.add(t),this.setValue(t,e),this.guards.delete(t))}tryReflectToAttribute(t){const e=this.mode,n=this.guards;n.has(t)||"fromView"===e||un.queueUpdate((()=>{n.add(t);const i=t[this.fieldName];switch(e){case"reflect":const e=this.converter;un.setAttribute(t,this.attribute,void 0!==e?e.toView(i):i);break;case"boolean":un.setBooleanAttribute(t,this.attribute,i)}n.delete(t)}))}static collect(t,...e){const n=[];e.push(t.attributes);for(let i=0,o=e.length;i<o;++i){const o=e[i];if(void 0!==o)for(let e=0,i=o.length;e<i;++e){const i=o[e];"string"==typeof i?n.push(new _n(t,i)):n.push(new _n(t,i.property,i.attribute,i.mode,i.converter))}}return n}}function Fn(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e);const i=t.constructor.attributes||(t.constructor.attributes=[]);i.push(n)}return arguments.length>1?(n={},void i(t,e)):(n=void 0===t?{}:t,i)}const Hn={mode:"open"},Bn={},Un=en.getById(4,(()=>{const t=new Map;return Object.freeze({register:e=>!t.has(e.type)&&(t.set(e.type,e),!0),getByType:e=>t.get(e)})}));class Vn{constructor(t,e=t.definition){"string"==typeof e&&(e={name:e}),this.type=t,this.name=e.name,this.template=e.template;const n=_n.collect(t,e.attributes),i=new Array(n.length),o={},a={};for(let t=0,e=n.length;t<e;++t){const e=n[t];i[t]=e.attribute,o[e.name]=e,a[e.attribute]=e}this.attributes=n,this.observedAttributes=i,this.propertyLookup=o,this.attributeLookup=a,this.shadowOptions=void 0===e.shadowOptions?Hn:null===e.shadowOptions?void 0:Object.assign(Object.assign({},Hn),e.shadowOptions),this.elementOptions=void 0===e.elementOptions?Bn:Object.assign(Object.assign({},Bn),e.elementOptions),this.styles=void 0===e.styles?void 0:Array.isArray(e.styles)?In.create(e.styles):e.styles instanceof In?e.styles:In.create([e.styles])}get isDefined(){return!!Un.getByType(this.type)}define(t=customElements){const e=this.type;if(Un.register(this)){const t=this.attributes,n=e.prototype;for(let e=0,i=t.length;e<i;++e)En.defineProperty(n,t[e]);Reflect.defineProperty(e,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,e,this.elementOptions),this}}Vn.forType=Un.getByType;const Gn=new WeakMap,Wn={bubbles:!0,composed:!0,cancelable:!0};function $n(t){return t.shadowRoot||Gn.get(t)||null}class zn extends xn{constructor(t,e){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=e;const n=e.shadowOptions;if(void 0!==n){const e=t.attachShadow(n);"closed"===n.mode&&Gn.set(t,e)}const i=En.getAccessors(t);if(i.length>0){const e=this.boundObservables=Object.create(null);for(let n=0,o=i.length;n<o;++n){const o=i[n].name,a=t[o];void 0!==a&&(delete t[o],e[o]=a)}}}get isConnected(){return En.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,En.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=t,this.needsInitialization||null===t||this.addStyles(t))}addStyles(t){const e=$n(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.append(t);else if(!t.isAttachedTo(e)){const n=t.behaviors;t.addStylesTo(e),null!==n&&this.addBehaviors(n)}}removeStyles(t){const e=$n(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.removeChild(t);else if(t.isAttachedTo(e)){const n=t.behaviors;t.removeStylesFrom(e),null!==n&&this.removeBehaviors(n)}}addBehaviors(t){const e=this.behaviors||(this.behaviors=new Map),n=t.length,i=[];for(let o=0;o<n;++o){const n=t[o];e.has(n)?e.set(n,e.get(n)+1):(e.set(n,1),i.push(n))}if(this._isConnected){const t=this.element;for(let e=0;e<i.length;++e)i[e].bind(t,kn)}}removeBehaviors(t,e=!1){const n=this.behaviors;if(null===n)return;const i=t.length,o=[];for(let a=0;a<i;++a){const i=t[a];if(n.has(i)){const t=n.get(i)-1;0===t||e?n.delete(i)&&o.push(i):n.set(i,t)}}if(this._isConnected){const t=this.element;for(let e=0;e<o.length;++e)o[e].unbind(t)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(t,kn);const e=this.behaviors;if(null!==e)for(const[n]of e)n.bind(t,kn);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;null!==t&&t.unbind();const e=this.behaviors;if(null!==e){const t=this.element;for(const[n]of e)n.unbind(t)}}onAttributeChangedCallback(t,e,n){const i=this.definition.attributeLookup[t];void 0!==i&&i.onAttributeChangedCallback(this.element,n)}emit(t,e,n){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:e},Wn),n)))}finishInitialization(){const t=this.element,e=this.boundObservables;if(null!==e){const n=Object.keys(e);for(let i=0,o=n.length;i<o;++i){const o=n[i];t[o]=e[o]}this.boundObservables=null}const n=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():n.template&&(this._template=n.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():n.styles&&(this._styles=n.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const e=this.element,n=$n(e)||e;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||un.removeChildNodes(n),t&&(this.view=t.render(e,n,e))}static forCustomElement(t){const e=t.$fastController;if(void 0!==e)return e;const n=Vn.forType(t.constructor);if(void 0===n)throw new Error("Missing FASTElement definition.");return t.$fastController=new zn(t,n)}}function Kn(t){return class extends t{constructor(){super(),zn.forCustomElement(this)}$emit(t,e,n){return this.$fastController.emit(t,e,n)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,e,n){this.$fastController.onAttributeChangedCallback(t,e,n)}}}const Yn=Object.assign(Kn(HTMLElement),{from:t=>Kn(t),define:(t,e)=>new Vn(t,e).define().type});function jn(t){const e=t.parentElement;if(e)return e;{const e=t.getRootNode();if(e.host instanceof HTMLElement)return e.host}return null}const qn=document.createElement("div");class Zn{setProperty(t,e){un.queueUpdate((()=>this.target.setProperty(t,e)))}removeProperty(t){un.queueUpdate((()=>this.target.removeProperty(t)))}}class Xn extends Zn{constructor(){super();const t=new CSSStyleSheet;this.target=t.cssRules[t.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}}class Jn extends Zn{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:t}=this.style;if(t){const e=t.insertRule(":root{}",t.cssRules.length);this.target=t.cssRules[e].style}}}class Qn{constructor(t){this.store=new Map,this.target=null;const e=t.$fastController;this.style=document.createElement("style"),e.addStyles(this.style),En.getNotifier(e).subscribe(this,"isConnected"),this.handleChange(e,"isConnected")}targetChanged(){if(null!==this.target)for(const[t,e]of this.store.entries())this.target.setProperty(t,e)}setProperty(t,e){this.store.set(t,e),un.queueUpdate((()=>{null!==this.target&&this.target.setProperty(t,e)}))}removeProperty(t){this.store.delete(t),un.queueUpdate((()=>{null!==this.target&&this.target.removeProperty(t)}))}handleChange(t,e){const{sheet:n}=this.style;if(n){const t=n.insertRule(":host{}",n.cssRules.length);this.target=n.cssRules[t].style}else this.target=null}}Cn([An],Qn.prototype,"target",void 0);class ti{constructor(t){this.target=t.style}setProperty(t,e){un.queueUpdate((()=>this.target.setProperty(t,e)))}removeProperty(t){un.queueUpdate((()=>this.target.removeProperty(t)))}}class ei{setProperty(t,e){ei.properties[t]=e;for(const n of ei.roots.values())oi.getOrCreate(ei.normalizeRoot(n)).setProperty(t,e)}removeProperty(t){delete ei.properties[t];for(const e of ei.roots.values())oi.getOrCreate(ei.normalizeRoot(e)).removeProperty(t)}static registerRoot(t){const{roots:e}=ei;if(!e.has(t)){e.add(t);const n=oi.getOrCreate(this.normalizeRoot(t));for(const t in ei.properties)n.setProperty(t,ei.properties[t])}}static unregisterRoot(t){const{roots:e}=ei;if(e.has(t)){e.delete(t);const n=oi.getOrCreate(ei.normalizeRoot(t));for(const t in ei.properties)n.removeProperty(t)}}static normalizeRoot(t){return t===qn?document:t}}ei.roots=new Set,ei.properties={};const ni=new WeakMap,ii=un.supportsAdoptedStyleSheets?class extends Zn{constructor(t){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":host{}")].style,t.$fastController.addStyles(In.create([e]))}}:Qn,oi=Object.freeze({getOrCreate(t){if(ni.has(t))return ni.get(t);let e;return t===qn?e=new ei:t instanceof Document?e=un.supportsAdoptedStyleSheets?new Xn:new Jn:e=t instanceof Yn?new ii(t):new ti(t),ni.set(t,e),e}});class ai extends bn{constructor(t){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=t.name,null!==t.cssCustomPropertyName&&(this.cssCustomProperty=`--${t.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=ai.uniqueId(),ai.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(t){return new ai({name:"string"==typeof t?t:t.name,cssCustomPropertyName:"string"==typeof t?t:void 0===t.cssCustomPropertyName?t.name:t.cssCustomPropertyName})}static isCSSDesignToken(t){return"string"==typeof t.cssCustomProperty}static isDerivedDesignTokenValue(t){return"function"==typeof t}static getTokenById(t){return ai.tokensById.get(t)}getOrCreateSubscriberSet(t=this){return this.subscribers.get(t)||this.subscribers.set(t,new Set)&&this.subscribers.get(t)}createCSS(){return this.cssVar||""}getValueFor(t){const e=ui.getOrCreate(t).get(this);if(void 0!==e)return e;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${t} or an ancestor of ${t}.`)}setValueFor(t,e){return this._appliedTo.add(t),e instanceof ai&&(e=this.alias(e)),ui.getOrCreate(t).set(this,e),this}deleteValueFor(t){return this._appliedTo.delete(t),ui.existsFor(t)&&ui.getOrCreate(t).delete(this),this}withDefault(t){return this.setValueFor(qn,t),this}subscribe(t,e){const n=this.getOrCreateSubscriberSet(e);e&&!ui.existsFor(e)&&ui.getOrCreate(e),n.has(t)||n.add(t)}unsubscribe(t,e){const n=this.subscribers.get(e||this);n&&n.has(t)&&n.delete(t)}notify(t){const e=Object.freeze({token:this,target:t});this.subscribers.has(this)&&this.subscribers.get(this).forEach((t=>t.handleChange(e))),this.subscribers.has(t)&&this.subscribers.get(t).forEach((t=>t.handleChange(e)))}alias(t){return e=>t.getValueFor(e)}}ai.uniqueId=(()=>{let t=0;return()=>(t++,t.toString(16))})(),ai.tokensById=new Map;class ri{constructor(t,e,n){this.source=t,this.token=e,this.node=n,this.dependencies=new Set,this.observer=En.binding(t,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,kn))}}class si{constructor(){this.values=new Map}set(t,e){this.values.get(t)!==e&&(this.values.set(t,e),En.getNotifier(this).notify(t.id))}get(t){return En.track(this,t.id),this.values.get(t)}delete(t){this.values.delete(t)}all(){return this.values.entries()}}const li=new WeakMap,ci=new WeakMap;class ui{constructor(t){this.target=t,this.store=new si,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(t,e)=>{const n=ai.getTokenById(e);if(n&&(n.notify(this.target),ai.isCSSDesignToken(n))){const e=this.parent,i=this.isReflecting(n);if(e){const o=e.get(n),a=t.get(n);o===a||i?o===a&&i&&this.stopReflectToCSS(n):this.reflectToCSS(n)}else i||this.reflectToCSS(n)}}},li.set(t,this),En.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),t instanceof Yn?t.$fastController.addBehaviors([this]):t.isConnected&&this.bind()}static getOrCreate(t){return li.get(t)||new ui(t)}static existsFor(t){return li.has(t)}static findParent(t){if(qn!==t.target){let e=jn(t.target);for(;null!==e;){if(li.has(e))return li.get(e);e=jn(e)}return ui.getOrCreate(qn)}return null}static findClosestAssignedNode(t,e){let n=e;do{if(n.has(t))return n;n=n.parent?n.parent:n.target!==qn?ui.getOrCreate(qn):null}while(null!==n);return null}get parent(){return ci.get(this)||null}has(t){return this.assignedValues.has(t)}get(t){const e=this.store.get(t);if(void 0!==e)return e;const n=this.getRaw(t);return void 0!==n?(this.hydrate(t,n),this.get(t)):void 0}getRaw(t){var e;return this.assignedValues.has(t)?this.assignedValues.get(t):null===(e=ui.findClosestAssignedNode(t,this))||void 0===e?void 0:e.getRaw(t)}set(t,e){ai.isDerivedDesignTokenValue(this.assignedValues.get(t))&&this.tearDownBindingObserver(t),this.assignedValues.set(t,e),ai.isDerivedDesignTokenValue(e)?this.setupBindingObserver(t,e):this.store.set(t,e)}delete(t){this.assignedValues.delete(t),this.tearDownBindingObserver(t);const e=this.getRaw(t);e?this.hydrate(t,e):this.store.delete(t)}bind(){const t=ui.findParent(this);t&&t.appendChild(this);for(const t of this.assignedValues.keys())t.notify(this.target)}unbind(){if(this.parent){ci.get(this).removeChild(this)}}appendChild(t){t.parent&&ci.get(t).removeChild(t);const e=this.children.filter((e=>t.contains(e)));ci.set(t,this),this.children.push(t),e.forEach((e=>t.appendChild(e))),En.getNotifier(this.store).subscribe(t);for(const[e,n]of this.store.all())t.hydrate(e,this.bindingObservers.has(e)?this.getRaw(e):n)}removeChild(t){const e=this.children.indexOf(t);return-1!==e&&this.children.splice(e,1),En.getNotifier(this.store).unsubscribe(t),t.parent===this&&ci.delete(t)}contains(t){return function(t,e){let n=e;for(;null!==n;){if(n===t)return!0;n=jn(n)}return!1}(this.target,t.target)}reflectToCSS(t){this.isReflecting(t)||(this.reflecting.add(t),ui.cssCustomPropertyReflector.startReflection(t,this.target))}stopReflectToCSS(t){this.isReflecting(t)&&(this.reflecting.delete(t),ui.cssCustomPropertyReflector.stopReflection(t,this.target))}isReflecting(t){return this.reflecting.has(t)}handleChange(t,e){const n=ai.getTokenById(e);n&&this.hydrate(n,this.getRaw(n))}hydrate(t,e){if(!this.has(t)){const n=this.bindingObservers.get(t);ai.isDerivedDesignTokenValue(e)?n?n.source!==e&&(this.tearDownBindingObserver(t),this.setupBindingObserver(t,e)):this.setupBindingObserver(t,e):(n&&this.tearDownBindingObserver(t),this.store.set(t,e))}}setupBindingObserver(t,e){const n=new ri(e,t,this);return this.bindingObservers.set(t,n),n}tearDownBindingObserver(t){return!!this.bindingObservers.has(t)&&(this.bindingObservers.get(t).disconnect(),this.bindingObservers.delete(t),!0)}}ui.cssCustomPropertyReflector=new class{startReflection(t,e){t.subscribe(this,e),this.handleChange({token:t,target:e})}stopReflection(t,e){t.unsubscribe(this,e),this.remove(t,e)}handleChange(t){const{token:e,target:n}=t;this.add(e,n)}add(t,e){oi.getOrCreate(e).setProperty(t.cssCustomProperty,this.resolveCSSValue(ui.getOrCreate(e).get(t)))}remove(t,e){oi.getOrCreate(e).removeProperty(t.cssCustomProperty)}resolveCSSValue(t){return t&&"function"==typeof t.createCSS?t.createCSS():t}},Cn([An],ui.prototype,"children",void 0);const di=Object.freeze({create:function(t){return ai.from(t)},notifyConnection:t=>!(!t.isConnected||!ui.existsFor(t))&&(ui.getOrCreate(t).bind(),!0),notifyDisconnection:t=>!(t.isConnected||!ui.existsFor(t))&&(ui.getOrCreate(t).unbind(),!0),registerRoot(t=qn){ei.registerRoot(t)},unregisterRoot(t=qn){ei.unregisterRoot(t)}});var hi;function pi(t,e,n){return isNaN(t)||t<=e?e:t>=n?n:t}function fi(t,e,n){return isNaN(t)||t<=e?0:t>=n?1:t/(n-e)}function gi(t,e,n){return isNaN(t)?e:e+t*(n-e)}function mi(t){return t*(Math.PI/180)}function vi(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:e+t*(n-e)}function yi(t,e,n){if(t<=0)return e%360;if(t>=1)return n%360;const i=(e-n+360)%360;return i<=(n-e+360)%360?(e-i*t+360)%360:(e+i*t+360)%360}!function(t){t.ltr="ltr",t.rtl="rtl"}(hi||(hi={}));Math.PI;function Ci(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}class bi{constructor(t,e,n,i){this.r=t,this.g=e,this.b=n,this.a="number"!=typeof i||isNaN(i)?1:i}static fromObject(t){return!t||isNaN(t.r)||isNaN(t.g)||isNaN(t.b)?null:new bi(t.r,t.g,t.b,t.a)}equalValue(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}toStringHexRGB(){return"#"+[this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringHexRGBA(){return this.toStringHexRGB()+this.formatHexValue(this.a)}toStringHexARGB(){return"#"+[this.a,this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringWebRGB(){return`rgb(${Math.round(gi(this.r,0,255))},${Math.round(gi(this.g,0,255))},${Math.round(gi(this.b,0,255))})`}toStringWebRGBA(){return`rgba(${Math.round(gi(this.r,0,255))},${Math.round(gi(this.g,0,255))},${Math.round(gi(this.b,0,255))},${pi(this.a,0,1)})`}roundToPrecision(t){return new bi(Ci(this.r,t),Ci(this.g,t),Ci(this.b,t),Ci(this.a,t))}clamp(){return new bi(pi(this.r,0,1),pi(this.g,0,1),pi(this.b,0,1),pi(this.a,0,1))}toObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}formatHexValue(t){return function(t){const e=Math.round(pi(t,0,255)).toString(16);return 1===e.length?"0"+e:e}(gi(t,0,255))}}class Si{constructor(t,e,n){this.h=t,this.s=e,this.l=n}static fromObject(t){return!t||isNaN(t.h)||isNaN(t.s)||isNaN(t.l)?null:new Si(t.h,t.s,t.l)}equalValue(t){return this.h===t.h&&this.s===t.s&&this.l===t.l}roundToPrecision(t){return new Si(Ci(this.h,t),Ci(this.s,t),Ci(this.l,t))}toObject(){return{h:this.h,s:this.s,l:this.l}}}class xi{constructor(t,e,n){this.h=t,this.s=e,this.v=n}static fromObject(t){return!t||isNaN(t.h)||isNaN(t.s)||isNaN(t.v)?null:new xi(t.h,t.s,t.v)}equalValue(t){return this.h===t.h&&this.s===t.s&&this.v===t.v}roundToPrecision(t){return new xi(Ci(this.h,t),Ci(this.s,t),Ci(this.v,t))}toObject(){return{h:this.h,s:this.s,v:this.v}}}class Ei{constructor(t,e,n){this.l=t,this.a=e,this.b=n}static fromObject(t){return!t||isNaN(t.l)||isNaN(t.a)||isNaN(t.b)?null:new Ei(t.l,t.a,t.b)}equalValue(t){return this.l===t.l&&this.a===t.a&&this.b===t.b}roundToPrecision(t){return new Ei(Ci(this.l,t),Ci(this.a,t),Ci(this.b,t))}toObject(){return{l:this.l,a:this.a,b:this.b}}}Ei.epsilon=216/24389,Ei.kappa=24389/27;class Ai{constructor(t,e,n){this.l=t,this.c=e,this.h=n}static fromObject(t){return!t||isNaN(t.l)||isNaN(t.c)||isNaN(t.h)?null:new Ai(t.l,t.c,t.h)}equalValue(t){return this.l===t.l&&this.c===t.c&&this.h===t.h}roundToPrecision(t){return new Ai(Ci(this.l,t),Ci(this.c,t),Ci(this.h,t))}toObject(){return{l:this.l,c:this.c,h:this.h}}}class Ti{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromObject(t){return!t||isNaN(t.x)||isNaN(t.y)||isNaN(t.z)?null:new Ti(t.x,t.y,t.z)}equalValue(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}roundToPrecision(t){return new Ti(Ci(this.x,t),Ci(this.y,t),Ci(this.z,t))}toObject(){return{x:this.x,y:this.y,z:this.z}}}function Di(t){return.2126*t.r+.7152*t.g+.0722*t.b}function ki(t){function e(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return Di(new bi(e(t.r),e(t.g),e(t.b),1))}Ti.whitePoint=new Ti(.95047,1,1.08883);const Ii=(t,e)=>(t+.05)/(e+.05);function wi(t,e){const n=ki(t),i=ki(e);return n>i?Ii(n,i):Ii(i,n)}function Pi(t){const e=Math.max(t.r,t.g,t.b),n=Math.min(t.r,t.g,t.b),i=e-n;let o=0;0!==i&&(o=e===t.r?(t.g-t.b)/i%6*60:e===t.g?60*((t.b-t.r)/i+2):60*((t.r-t.g)/i+4)),o<0&&(o+=360);const a=(e+n)/2;let r=0;return 0!==i&&(r=i/(1-Math.abs(2*a-1))),new Si(o,r,a)}function Oi(t,e=1){const n=(1-Math.abs(2*t.l-1))*t.s,i=n*(1-Math.abs(t.h/60%2-1)),o=t.l-n/2;let a=0,r=0,s=0;return t.h<60?(a=n,r=i,s=0):t.h<120?(a=i,r=n,s=0):t.h<180?(a=0,r=n,s=i):t.h<240?(a=0,r=i,s=n):t.h<300?(a=i,r=0,s=n):t.h<360&&(a=n,r=0,s=i),new bi(a+o,r+o,s+o,e)}function Ri(t){const e=Math.max(t.r,t.g,t.b),n=e-Math.min(t.r,t.g,t.b);let i=0;0!==n&&(i=e===t.r?(t.g-t.b)/n%6*60:e===t.g?60*((t.b-t.r)/n+2):60*((t.r-t.g)/n+4)),i<0&&(i+=360);let o=0;return 0!==e&&(o=n/e),new xi(i,o,e)}function Mi(t){let e=0;(Math.abs(t.b)>.001||Math.abs(t.a)>.001)&&(e=Math.atan2(t.b,t.a)*(180/Math.PI)),e<0&&(e+=360);const n=Math.sqrt(t.a*t.a+t.b*t.b);return new Ai(t.l,n,e)}function Ni(t){function e(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}const n=e(t.r),i=e(t.g),o=e(t.b);return new Ti(.4124564*n+.3575761*i+.1804375*o,.2126729*n+.7151522*i+.072175*o,.0193339*n+.119192*i+.9503041*o)}function Li(t,e=1){function n(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}const i=n(3.2404542*t.x-1.5371385*t.y-.4985314*t.z),o=n(-.969266*t.x+1.8760108*t.y+.041556*t.z),a=n(.0556434*t.x-.2040259*t.y+1.0572252*t.z);return new bi(i,o,a,e)}function _i(t){return function(t){function e(t){return t>Ei.epsilon?Math.pow(t,1/3):(Ei.kappa*t+16)/116}const n=e(t.x/Ti.whitePoint.x),i=e(t.y/Ti.whitePoint.y),o=e(t.z/Ti.whitePoint.z);return new Ei(116*i-16,500*(n-i),200*(i-o))}(Ni(t))}function Fi(t,e=1){return Li(function(t){const e=(t.l+16)/116,n=e+t.a/500,i=e-t.b/200,o=Math.pow(n,3),a=Math.pow(e,3),r=Math.pow(i,3);let s=0;s=o>Ei.epsilon?o:(116*n-16)/Ei.kappa;let l=0;l=t.l>Ei.epsilon*Ei.kappa?a:t.l/Ei.kappa;let c=0;return c=r>Ei.epsilon?r:(116*i-16)/Ei.kappa,s=Ti.whitePoint.x*s,l=Ti.whitePoint.y*l,c=Ti.whitePoint.z*c,new Ti(s,l,c)}(t),e)}function Hi(t){return Mi(_i(t))}function Bi(t,e=1){return Fi(function(t){let e=0,n=0;return 0!==t.h&&(e=Math.cos(mi(t.h))*t.c,n=Math.sin(mi(t.h))*t.c),new Ei(t.l,e,n)}(t),e)}function Ui(t,e,n=18){const i=Hi(t);let o=i.c+e*n;return o<0&&(o=0),Bi(new Ai(i.l,o,i.h))}function Vi(t,e){return t*e}function Gi(t,e){return new bi(Vi(t.r,e.r),Vi(t.g,e.g),Vi(t.b,e.b),1)}function Wi(t,e){return pi(t<.5?2*e*t:1-2*(1-e)*(1-t),0,1)}function $i(t,e){return new bi(Wi(t.r,e.r),Wi(t.g,e.g),Wi(t.b,e.b),1)}var zi,Ki;function Yi(t,e,n,i){if(isNaN(t)||t<=0)return n;if(t>=1)return i;switch(e){case Ki.HSL:return Oi(function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new Si(yi(t,e.h,n.h),vi(t,e.s,n.s),vi(t,e.l,n.l))}(t,Pi(n),Pi(i)));case Ki.HSV:return function(t,e=1){const n=t.s*t.v,i=n*(1-Math.abs(t.h/60%2-1)),o=t.v-n;let a=0,r=0,s=0;return t.h<60?(a=n,r=i,s=0):t.h<120?(a=i,r=n,s=0):t.h<180?(a=0,r=n,s=i):t.h<240?(a=0,r=i,s=n):t.h<300?(a=i,r=0,s=n):t.h<360&&(a=n,r=0,s=i),new bi(a+o,r+o,s+o,e)}(function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new xi(yi(t,e.h,n.h),vi(t,e.s,n.s),vi(t,e.v,n.v))}(t,Ri(n),Ri(i)));case Ki.XYZ:return Li(function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new Ti(vi(t,e.x,n.x),vi(t,e.y,n.y),vi(t,e.z,n.z))}(t,Ni(n),Ni(i)));case Ki.LAB:return Fi(function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new Ei(vi(t,e.l,n.l),vi(t,e.a,n.a),vi(t,e.b,n.b))}(t,_i(n),_i(i)));case Ki.LCH:return Bi(function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new Ai(vi(t,e.l,n.l),vi(t,e.c,n.c),yi(t,e.h,n.h))}(t,Hi(n),Hi(i)));default:return function(t,e,n){return isNaN(t)||t<=0?e:t>=1?n:new bi(vi(t,e.r,n.r),vi(t,e.g,n.g),vi(t,e.b,n.b),vi(t,e.a,n.a))}(t,n,i)}}!function(t){t[t.Burn=0]="Burn",t[t.Color=1]="Color",t[t.Darken=2]="Darken",t[t.Dodge=3]="Dodge",t[t.Lighten=4]="Lighten",t[t.Multiply=5]="Multiply",t[t.Overlay=6]="Overlay",t[t.Screen=7]="Screen"}(zi||(zi={})),function(t){t[t.RGB=0]="RGB",t[t.HSL=1]="HSL",t[t.HSV=2]="HSV",t[t.XYZ=3]="XYZ",t[t.LAB=4]="LAB",t[t.LCH=5]="LCH"}(Ki||(Ki={}));class ji{constructor(t){if(null==t||0===t.length)throw new Error("The stops argument must be non-empty");this.stops=this.sortColorScaleStops(t)}static createBalancedColorScale(t){if(null==t||0===t.length)throw new Error("The colors argument must be non-empty");const e=new Array(t.length);for(let n=0;n<t.length;n++)0===n?e[n]={color:t[n],position:0}:n===t.length-1?e[n]={color:t[n],position:1}:e[n]={color:t[n],position:n*(1/(t.length-1))};return new ji(e)}getColor(t,e=Ki.RGB){if(1===this.stops.length)return this.stops[0].color;if(t<=0)return this.stops[0].color;if(t>=1)return this.stops[this.stops.length-1].color;let n=0;for(let e=0;e<this.stops.length;e++)this.stops[e].position<=t&&(n=e);let i=n+1;i>=this.stops.length&&(i=this.stops.length-1);return Yi((t-this.stops[n].position)*(1/(this.stops[i].position-this.stops[n].position)),e,this.stops[n].color,this.stops[i].color)}trim(t,e,n=Ki.RGB){if(t<0||e>1||e<t)throw new Error("Invalid bounds");if(t===e)return new ji([{color:this.getColor(t,n),position:0}]);const i=[];for(let n=0;n<this.stops.length;n++)this.stops[n].position>=t&&this.stops[n].position<=e&&i.push(this.stops[n]);if(0===i.length)return new ji([{color:this.getColor(t),position:t},{color:this.getColor(e),position:e}]);i[0].position!==t&&i.unshift({color:this.getColor(t),position:t}),i[i.length-1].position!==e&&i.push({color:this.getColor(e),position:e});const o=e-t,a=new Array(i.length);for(let e=0;e<i.length;e++)a[e]={color:i[e].color,position:(i[e].position-t)/o};return new ji(a)}findNextColor(t,e,n=!1,i=Ki.RGB,o=.005,a=32){isNaN(t)||t<=0?t=0:t>=1&&(t=1);const r=this.getColor(t,i),s=n?0:1;if(wi(r,this.getColor(s,i))<=e)return s;let l=n?0:t,c=n?t:0,u=s,d=0;for(;d<=a;){u=Math.abs(c-l)/2+l;const t=wi(r,this.getColor(u,i));if(Math.abs(t-e)<=o)return u;t>e?n?l=u:c=u:n?c=u:l=u,d++}return u}clone(){const t=new Array(this.stops.length);for(let e=0;e<t.length;e++)t[e]={color:this.stops[e].color,position:this.stops[e].position};return new ji(t)}sortColorScaleStops(t){return t.sort(((t,e)=>{const n=t.position,i=e.position;return n<i?-1:n>i?1:0}))}}const qi={aliceblue:{r:.941176,g:.972549,b:1},antiquewhite:{r:.980392,g:.921569,b:.843137},aqua:{r:0,g:1,b:1},aquamarine:{r:.498039,g:1,b:.831373},azure:{r:.941176,g:1,b:1},beige:{r:.960784,g:.960784,b:.862745},bisque:{r:1,g:.894118,b:.768627},black:{r:0,g:0,b:0},blanchedalmond:{r:1,g:.921569,b:.803922},blue:{r:0,g:0,b:1},blueviolet:{r:.541176,g:.168627,b:.886275},brown:{r:.647059,g:.164706,b:.164706},burlywood:{r:.870588,g:.721569,b:.529412},cadetblue:{r:.372549,g:.619608,b:.627451},chartreuse:{r:.498039,g:1,b:0},chocolate:{r:.823529,g:.411765,b:.117647},coral:{r:1,g:.498039,b:.313725},cornflowerblue:{r:.392157,g:.584314,b:.929412},cornsilk:{r:1,g:.972549,b:.862745},crimson:{r:.862745,g:.078431,b:.235294},cyan:{r:0,g:1,b:1},darkblue:{r:0,g:0,b:.545098},darkcyan:{r:0,g:.545098,b:.545098},darkgoldenrod:{r:.721569,g:.52549,b:.043137},darkgray:{r:.662745,g:.662745,b:.662745},darkgreen:{r:0,g:.392157,b:0},darkgrey:{r:.662745,g:.662745,b:.662745},darkkhaki:{r:.741176,g:.717647,b:.419608},darkmagenta:{r:.545098,g:0,b:.545098},darkolivegreen:{r:.333333,g:.419608,b:.184314},darkorange:{r:1,g:.54902,b:0},darkorchid:{r:.6,g:.196078,b:.8},darkred:{r:.545098,g:0,b:0},darksalmon:{r:.913725,g:.588235,b:.478431},darkseagreen:{r:.560784,g:.737255,b:.560784},darkslateblue:{r:.282353,g:.239216,b:.545098},darkslategray:{r:.184314,g:.309804,b:.309804},darkslategrey:{r:.184314,g:.309804,b:.309804},darkturquoise:{r:0,g:.807843,b:.819608},darkviolet:{r:.580392,g:0,b:.827451},deeppink:{r:1,g:.078431,b:.576471},deepskyblue:{r:0,g:.74902,b:1},dimgray:{r:.411765,g:.411765,b:.411765},dimgrey:{r:.411765,g:.411765,b:.411765},dodgerblue:{r:.117647,g:.564706,b:1},firebrick:{r:.698039,g:.133333,b:.133333},floralwhite:{r:1,g:.980392,b:.941176},forestgreen:{r:.133333,g:.545098,b:.133333},fuchsia:{r:1,g:0,b:1},gainsboro:{r:.862745,g:.862745,b:.862745},ghostwhite:{r:.972549,g:.972549,b:1},gold:{r:1,g:.843137,b:0},goldenrod:{r:.854902,g:.647059,b:.12549},gray:{r:.501961,g:.501961,b:.501961},green:{r:0,g:.501961,b:0},greenyellow:{r:.678431,g:1,b:.184314},grey:{r:.501961,g:.501961,b:.501961},honeydew:{r:.941176,g:1,b:.941176},hotpink:{r:1,g:.411765,b:.705882},indianred:{r:.803922,g:.360784,b:.360784},indigo:{r:.294118,g:0,b:.509804},ivory:{r:1,g:1,b:.941176},khaki:{r:.941176,g:.901961,b:.54902},lavender:{r:.901961,g:.901961,b:.980392},lavenderblush:{r:1,g:.941176,b:.960784},lawngreen:{r:.486275,g:.988235,b:0},lemonchiffon:{r:1,g:.980392,b:.803922},lightblue:{r:.678431,g:.847059,b:.901961},lightcoral:{r:.941176,g:.501961,b:.501961},lightcyan:{r:.878431,g:1,b:1},lightgoldenrodyellow:{r:.980392,g:.980392,b:.823529},lightgray:{r:.827451,g:.827451,b:.827451},lightgreen:{r:.564706,g:.933333,b:.564706},lightgrey:{r:.827451,g:.827451,b:.827451},lightpink:{r:1,g:.713725,b:.756863},lightsalmon:{r:1,g:.627451,b:.478431},lightseagreen:{r:.12549,g:.698039,b:.666667},lightskyblue:{r:.529412,g:.807843,b:.980392},lightslategray:{r:.466667,g:.533333,b:.6},lightslategrey:{r:.466667,g:.533333,b:.6},lightsteelblue:{r:.690196,g:.768627,b:.870588},lightyellow:{r:1,g:1,b:.878431},lime:{r:0,g:1,b:0},limegreen:{r:.196078,g:.803922,b:.196078},linen:{r:.980392,g:.941176,b:.901961},magenta:{r:1,g:0,b:1},maroon:{r:.501961,g:0,b:0},mediumaquamarine:{r:.4,g:.803922,b:.666667},mediumblue:{r:0,g:0,b:.803922},mediumorchid:{r:.729412,g:.333333,b:.827451},mediumpurple:{r:.576471,g:.439216,b:.858824},mediumseagreen:{r:.235294,g:.701961,b:.443137},mediumslateblue:{r:.482353,g:.407843,b:.933333},mediumspringgreen:{r:0,g:.980392,b:.603922},mediumturquoise:{r:.282353,g:.819608,b:.8},mediumvioletred:{r:.780392,g:.082353,b:.521569},midnightblue:{r:.098039,g:.098039,b:.439216},mintcream:{r:.960784,g:1,b:.980392},mistyrose:{r:1,g:.894118,b:.882353},moccasin:{r:1,g:.894118,b:.709804},navajowhite:{r:1,g:.870588,b:.678431},navy:{r:0,g:0,b:.501961},oldlace:{r:.992157,g:.960784,b:.901961},olive:{r:.501961,g:.501961,b:0},olivedrab:{r:.419608,g:.556863,b:.137255},orange:{r:1,g:.647059,b:0},orangered:{r:1,g:.270588,b:0},orchid:{r:.854902,g:.439216,b:.839216},palegoldenrod:{r:.933333,g:.909804,b:.666667},palegreen:{r:.596078,g:.984314,b:.596078},paleturquoise:{r:.686275,g:.933333,b:.933333},palevioletred:{r:.858824,g:.439216,b:.576471},papayawhip:{r:1,g:.937255,b:.835294},peachpuff:{r:1,g:.854902,b:.72549},peru:{r:.803922,g:.521569,b:.247059},pink:{r:1,g:.752941,b:.796078},plum:{r:.866667,g:.627451,b:.866667},powderblue:{r:.690196,g:.878431,b:.901961},purple:{r:.501961,g:0,b:.501961},red:{r:1,g:0,b:0},rosybrown:{r:.737255,g:.560784,b:.560784},royalblue:{r:.254902,g:.411765,b:.882353},saddlebrown:{r:.545098,g:.270588,b:.07451},salmon:{r:.980392,g:.501961,b:.447059},sandybrown:{r:.956863,g:.643137,b:.376471},seagreen:{r:.180392,g:.545098,b:.341176},seashell:{r:1,g:.960784,b:.933333},sienna:{r:.627451,g:.321569,b:.176471},silver:{r:.752941,g:.752941,b:.752941},skyblue:{r:.529412,g:.807843,b:.921569},slateblue:{r:.415686,g:.352941,b:.803922},slategray:{r:.439216,g:.501961,b:.564706},slategrey:{r:.439216,g:.501961,b:.564706},snow:{r:1,g:.980392,b:.980392},springgreen:{r:0,g:1,b:.498039},steelblue:{r:.27451,g:.509804,b:.705882},tan:{r:.823529,g:.705882,b:.54902},teal:{r:0,g:.501961,b:.501961},thistle:{r:.847059,g:.74902,b:.847059},tomato:{r:1,g:.388235,b:.278431},transparent:{r:0,g:0,b:0,a:0},turquoise:{r:.25098,g:.878431,b:.815686},violet:{r:.933333,g:.509804,b:.933333},wheat:{r:.960784,g:.870588,b:.701961},white:{r:1,g:1,b:1},whitesmoke:{r:.960784,g:.960784,b:.960784},yellow:{r:1,g:1,b:0},yellowgreen:{r:.603922,g:.803922,b:.196078}},Zi=/^rgb\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){2}(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*)\)$/i,Xi=/^rgba\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){3}(?:0|1|0?\.\d*)\s*)\)$/i,Ji=/^#((?:[0-9a-f]{6}|[0-9a-f]{3}))$/i,Qi=/^#((?:[0-9a-f]{8}|[0-9a-f]{4}))$/i;function to(t){return function(t){return Qi.test(t)}(t)}function eo(t){const e=Ji.exec(t);if(null===e)return null;let n=e[1];if(3===n.length){const t=n.charAt(0),e=n.charAt(1),i=n.charAt(2);n=t.concat(t,e,e,i,i)}const i=parseInt(n,16);return isNaN(i)?null:new bi(fi((16711680&i)>>>16,0,255),fi((65280&i)>>>8,0,255),fi(255&i,0,255),1)}function no(t){const e=Zi.exec(t);if(null===e)return null;const n=e[1].split(",");return new bi(fi(Number(n[0]),0,255),fi(Number(n[1]),0,255),fi(Number(n[2]),0,255),1)}function io(t){const e=t.toLowerCase();return function(t){return Ji.test(t)}(e)?eo(e):to(e)?function(t){const e=Qi.exec(t);if(null===e)return null;let n=e[1];if(4===n.length){const t=n.charAt(0),e=n.charAt(1),i=n.charAt(2),o=n.charAt(3);n=t.concat(t,e,e,i,i,o,o)}const i=parseInt(n,16);return isNaN(i)?null:new bi(fi((16711680&i)>>>16,0,255),fi((65280&i)>>>8,0,255),fi(255&i,0,255),fi((4278190080&i)>>>24,0,255))}(e):function(t){return Zi.test(t)}(e)?no(e):function(t){return Xi.test(t)}(e)?function(t){const e=Xi.exec(t);if(null===e)return null;const n=e[1].split(",");return 4===n.length?new bi(fi(Number(n[0]),0,255),fi(Number(n[1]),0,255),fi(Number(n[2]),0,255),Number(n[3])):null}(e):function(t){return qi.hasOwnProperty(t)}(e)?function(t){const e=qi[t.toLowerCase()];return e?new bi(e.r,e.g,e.b,e.hasOwnProperty("a")?e.a:void 0):null}(e):null}class oo{constructor(t){this.config=Object.assign({},oo.defaultPaletteConfig,t),this.palette=[],this.updatePaletteColors()}updatePaletteGenerationValues(t){let e=!1;for(const n in t)this.config[n]&&(this.config[n].equalValue?this.config[n].equalValue(t[n])||(this.config[n]=t[n],e=!0):t[n]!==this.config[n]&&(this.config[n]=t[n],e=!0));return e&&this.updatePaletteColors(),e}updatePaletteColors(){const t=this.generatePaletteColorScale();for(let e=0;e<this.config.steps;e++)this.palette[e]=t.getColor(e/(this.config.steps-1),this.config.interpolationMode)}generatePaletteColorScale(){const t=Pi(this.config.baseColor),e=new ji([{position:0,color:this.config.scaleColorLight},{position:.5,color:this.config.baseColor},{position:1,color:this.config.scaleColorDark}]).trim(this.config.clipLight,1-this.config.clipDark);let n=e.getColor(0),i=e.getColor(1);if(t.s>=this.config.saturationAdjustmentCutoff&&(n=Ui(n,this.config.saturationLight),i=Ui(i,this.config.saturationDark)),0!==this.config.multiplyLight){const t=Gi(this.config.baseColor,n);n=Yi(this.config.multiplyLight,this.config.interpolationMode,n,t)}if(0!==this.config.multiplyDark){const t=Gi(this.config.baseColor,i);i=Yi(this.config.multiplyDark,this.config.interpolationMode,i,t)}if(0!==this.config.overlayLight){const t=$i(this.config.baseColor,n);n=Yi(this.config.overlayLight,this.config.interpolationMode,n,t)}if(0!==this.config.overlayDark){const t=$i(this.config.baseColor,i);i=Yi(this.config.overlayDark,this.config.interpolationMode,i,t)}return this.config.baseScalePosition?this.config.baseScalePosition<=0?new ji([{position:0,color:this.config.baseColor},{position:1,color:i.clamp()}]):this.config.baseScalePosition>=1?new ji([{position:0,color:n.clamp()},{position:1,color:this.config.baseColor}]):new ji([{position:0,color:n.clamp()},{position:this.config.baseScalePosition,color:this.config.baseColor},{position:1,color:i.clamp()}]):new ji([{position:0,color:n.clamp()},{position:.5,color:this.config.baseColor},{position:1,color:i.clamp()}])}}oo.defaultPaletteConfig={baseColor:eo("#808080"),steps:11,interpolationMode:Ki.RGB,scaleColorLight:new bi(1,1,1,1),scaleColorDark:new bi(0,0,0,1),clipLight:.185,clipDark:.16,saturationAdjustmentCutoff:.05,saturationLight:.35,saturationDark:1.25,overlayLight:0,overlayDark:.25,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},oo.greyscalePaletteConfig={baseColor:eo("#808080"),steps:11,interpolationMode:Ki.RGB,scaleColorLight:new bi(1,1,1,1),scaleColorDark:new bi(0,0,0,1),clipLight:0,clipDark:0,saturationAdjustmentCutoff:0,saturationLight:0,saturationDark:0,overlayLight:0,overlayDark:0,multiplyLight:0,multiplyDark:0,baseScalePosition:.5};oo.defaultPaletteConfig.scaleColorLight,oo.defaultPaletteConfig.scaleColorDark;class ao{constructor(t){this.palette=[],this.config=Object.assign({},ao.defaultPaletteConfig,t),this.regenPalettes()}regenPalettes(){let t=this.config.steps;(isNaN(t)||t<3)&&(t=3);const e=.14,n=new bi(e,e,e,1),i=new oo(Object.assign(Object.assign({},oo.greyscalePaletteConfig),{baseColor:n,baseScalePosition:86/94,steps:t})).palette,o=(Di(this.config.baseColor)+Pi(this.config.baseColor).l)/2,a=this.matchRelativeLuminanceIndex(o,i)/(t-1),r=this.matchRelativeLuminanceIndex(e,i)/(t-1),s=Pi(this.config.baseColor),l=Oi(Si.fromObject({h:s.h,s:s.s,l:e})),c=Oi(Si.fromObject({h:s.h,s:s.s,l:.06})),u=new Array(5);u[0]={position:0,color:new bi(1,1,1,1)},u[1]={position:a,color:this.config.baseColor},u[2]={position:r,color:l},u[3]={position:.99,color:c},u[4]={position:1,color:new bi(0,0,0,1)};const d=new ji(u);this.palette=new Array(t);for(let e=0;e<t;e++){const n=d.getColor(e/(t-1),Ki.RGB);this.palette[e]=n}}matchRelativeLuminanceIndex(t,e){let n=Number.MAX_VALUE,i=0,o=0;const a=e.length;for(;o<a;o++){const a=Math.abs(Di(e[o])-t);a<n&&(n=a,i=o)}return i}}function ro(t,e){const n=t.relativeLuminance>e.relativeLuminance?t:e,i=t.relativeLuminance>e.relativeLuminance?e:t;return(n.relativeLuminance+.05)/(i.relativeLuminance+.05)}ao.defaultPaletteConfig={baseColor:eo("#808080"),steps:94};const so=Object.freeze({create:(t,e,n)=>new lo(t,e,n),from:t=>new lo(t.r,t.g,t.b)});class lo extends bi{constructor(t,e,n){super(t,e,n,1),this.toColorString=this.toStringHexRGB,this.contrast=ro.bind(null,this),this.createCSS=this.toColorString,this.relativeLuminance=ki(this)}static fromObject(t){return new lo(t.r,t.g,t.b)}}function co(t,e,n=0,i=t.length-1){if(i===n)return t[n];const o=Math.floor((i-n)/2)+n;return e(t[o])?co(t,e,n,o):co(t,e,o+1,i)}const uo=(-.1+Math.sqrt(.21))/2;function ho(t){return function(t){return t.relativeLuminance<=uo}(t)?-1:1}const po=Object.freeze({create:t=>fo.from(t)});class fo{constructor(t,e){this.closestIndexCache=new Map,this.source=t,this.swatches=e,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(t,e,n,i){void 0===n&&(n=this.closestIndexOf(t));let o=this.swatches;const a=this.lastIndex;let r=n;void 0===i&&(i=ho(t));return-1===i&&(o=this.reversedSwatches,r=a-r),co(o,(n=>ro(t,n)>=e),r,a)}get(t){return this.swatches[t]||this.swatches[pi(t,0,this.lastIndex)]}closestIndexOf(t){if(this.closestIndexCache.has(t.relativeLuminance))return this.closestIndexCache.get(t.relativeLuminance);let e=this.swatches.indexOf(t);if(-1!==e)return this.closestIndexCache.set(t.relativeLuminance,e),e;const n=this.swatches.reduce(((e,n)=>Math.abs(n.relativeLuminance-t.relativeLuminance)<Math.abs(e.relativeLuminance-t.relativeLuminance)?n:e));return e=this.swatches.indexOf(n),this.closestIndexCache.set(t.relativeLuminance,e),e}static from(t){return new fo(t,Object.freeze(new ao({baseColor:bi.fromObject(t)}).palette.map((t=>{const e=eo(t.toStringHexRGB());return so.create(e.r,e.g,e.b)}))))}}const go=so.create(1,1,1),mo=so.create(0,0,0),vo=so.create(.5,.5,.5),yo=eo("#0078D4"),Co=so.create(yo.r,yo.g,yo.b);function bo(t){return so.create(t,t,t)}var So;function xo(t,e,n,i,o,a){return Math.max(t.closestIndexOf(bo(e))+n,i,o,a)}!function(t){t[t.LightMode=1]="LightMode",t[t.DarkMode=.23]="DarkMode"}(So||(So={}));const{create:Eo}=di,Ao=Eo("direction").withDefault(hi.ltr),To=Eo("disabled-opacity").withDefault(.3),Do=Eo("base-height-multiplier").withDefault(8),ko=Eo("base-horizontal-spacing-multiplier").withDefault(3),Io=Eo("density").withDefault(0),wo=Eo("design-unit").withDefault(4),Po=Eo("control-corner-radius").withDefault(4),Oo=Eo("layer-corner-radius").withDefault(4),Ro=Eo("stroke-width").withDefault(1),Mo=Eo("focus-stroke-width").withDefault(2),No=Eo("body-font").withDefault("Segoe UI, sans-serif"),Lo=Eo("type-ramp-base-font-size").withDefault("14px"),_o=Eo("type-ramp-base-line-height").withDefault("20px"),Fo=Eo("type-ramp-minus-1-font-size").withDefault("12px"),Ho=Eo("type-ramp-minus-1-line-height").withDefault("16px"),Bo=Eo("type-ramp-minus-2-font-size").withDefault("10px"),Uo=Eo("type-ramp-minus-2-line-height").withDefault("14px"),Vo=Eo("type-ramp-plus-1-font-size").withDefault("16px"),Go=Eo("type-ramp-plus-1-line-height").withDefault("22px"),Wo=Eo("type-ramp-plus-2-font-size").withDefault("20px"),$o=Eo("type-ramp-plus-2-line-height").withDefault("28px"),zo=Eo("type-ramp-plus-3-font-size").withDefault("24px"),Ko=Eo("type-ramp-plus-3-line-height").withDefault("32px"),Yo=Eo("type-ramp-plus-4-font-size").withDefault("28px"),jo=Eo("type-ramp-plus-4-line-height").withDefault("36px"),qo=Eo("type-ramp-plus-5-font-size").withDefault("32px"),Zo=Eo("type-ramp-plus-5-line-height").withDefault("40px"),Xo=Eo("type-ramp-plus-6-font-size").withDefault("40px"),Jo=Eo("type-ramp-plus-6-line-height").withDefault("52px"),Qo=Eo("base-layer-luminance").withDefault(So.LightMode),ta=Eo("accent-fill-rest-delta").withDefault(0),ea=Eo("accent-fill-hover-delta").withDefault(4),na=Eo("accent-fill-active-delta").withDefault(-5),ia=Eo("accent-fill-focus-delta").withDefault(0),oa=Eo("accent-foreground-rest-delta").withDefault(0),aa=Eo("accent-foreground-hover-delta").withDefault(6),ra=Eo("accent-foreground-active-delta").withDefault(-4),sa=Eo("accent-foreground-focus-delta").withDefault(0),la=Eo("neutral-fill-rest-delta").withDefault(7),ca=Eo("neutral-fill-hover-delta").withDefault(10),ua=Eo("neutral-fill-active-delta").withDefault(5),da=Eo("neutral-fill-focus-delta").withDefault(0),ha=Eo("neutral-fill-input-rest-delta").withDefault(0),pa=Eo("neutral-fill-input-hover-delta").withDefault(0),fa=Eo("neutral-fill-input-active-delta").withDefault(0),ga=Eo("neutral-fill-input-focus-delta").withDefault(0),ma=Eo("neutral-fill-inverse-rest-delta").withDefault(0),va=Eo("neutral-fill-inverse-hover-delta").withDefault(-3),ya=Eo("neutral-fill-inverse-active-delta").withDefault(7),Ca=Eo("neutral-fill-inverse-focus-delta").withDefault(0),ba=Eo("neutral-fill-layer-rest-delta").withDefault(3),Sa=Eo("neutral-fill-stealth-rest-delta").withDefault(0),xa=Eo("neutral-fill-stealth-hover-delta").withDefault(5),Ea=Eo("neutral-fill-stealth-active-delta").withDefault(3),Aa=Eo("neutral-fill-stealth-focus-delta").withDefault(0),Ta=Eo("neutral-fill-strong-rest-delta").withDefault(0),Da=Eo("neutral-fill-strong-hover-delta").withDefault(8),ka=Eo("neutral-fill-strong-active-delta").withDefault(-5),Ia=Eo("neutral-fill-strong-focus-delta").withDefault(0),wa=Eo("neutral-stroke-rest-delta").withDefault(25),Pa=Eo("neutral-stroke-hover-delta").withDefault(40),Oa=Eo("neutral-stroke-active-delta").withDefault(16),Ra=Eo("neutral-stroke-focus-delta").withDefault(25),Ma=Eo("neutral-stroke-divider-rest-delta").withDefault(8),Na=Eo("neutral-stroke-strong-hover-delta").withDefault(40),La=Eo("neutral-stroke-strong-active-delta").withDefault(16),_a=Eo("neutral-stroke-strong-focus-delta").withDefault(25),Fa=Eo({name:"neutral-palette",cssCustomPropertyName:null}).withDefault(po.create(vo)),Ha=Eo({name:"accent-palette",cssCustomPropertyName:null}).withDefault(po.create(Co)),Ba=Eo({name:"neutral-layer-card-container-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n){const i=pi(t.closestIndexOf(bo(e))-n,0,t.swatches.length-1);return t.get(i+n)}(Fa.getValueFor(t),Qo.getValueFor(t),ba.getValueFor(t))}),Ua=(Eo("neutral-layer-card-container").withDefault((t=>Ba.getValueFor(t).evaluate(t))),Eo({name:"neutral-layer-floating-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n){const i=t.closestIndexOf(bo(e))-n;return t.get(i-n)}(Fa.getValueFor(t),Qo.getValueFor(t),ba.getValueFor(t))})),Va=Eo("neutral-layer-floating").withDefault((t=>Ua.getValueFor(t).evaluate(t))),Ga=Eo({name:"neutral-layer-1-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e){return t.get(t.closestIndexOf(bo(e)))}(Fa.getValueFor(t),Qo.getValueFor(t))}),Wa=Eo("neutral-layer-1").withDefault((t=>Ga.getValueFor(t).evaluate(t))),$a=Eo({name:"neutral-layer-2-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n,i,o,a){return t.get(xo(t,e,n,i,o,a))}(Fa.getValueFor(t),Qo.getValueFor(t),ba.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t))}),za=(Eo("neutral-layer-2").withDefault((t=>$a.getValueFor(t).evaluate(t))),Eo({name:"neutral-layer-3-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n,i,o,a){return t.get(xo(t,e,n,i,o,a)+n)}(Fa.getValueFor(t),Qo.getValueFor(t),ba.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t))})),Ka=(Eo("neutral-layer-3").withDefault((t=>za.getValueFor(t).evaluate(t))),Eo({name:"neutral-layer-4-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n,i,o,a){return t.get(xo(t,e,n,i,o,a)+2*n)}(Fa.getValueFor(t),Qo.getValueFor(t),ba.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t))})),Ya=(Eo("neutral-layer-4").withDefault((t=>Ka.getValueFor(t).evaluate(t))),Eo("fill-color").withDefault((t=>Wa.getValueFor(t))));var ja;!function(t){t[t.normal=4.5]="normal",t[t.large=7]="large"}(ja||(ja={}));const qa=Eo({name:"accent-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>(ja.normal,(t,e)=>function(t,e,n,i,o,a,r,s,l){const c=t.source,u=t.closestIndexOf(c),d=u+1*i,h=u+1*o,p=u+1*a;return{rest:t.get(u),hover:t.get(d),active:t.get(h),focus:t.get(p)}}(Ha.getValueFor(t),Fa.getValueFor(t),e||Ya.getValueFor(t),ea.getValueFor(t),na.getValueFor(t),ia.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t)))(t,e)}),Za=Eo("accent-fill-rest").withDefault((t=>qa.getValueFor(t).evaluate(t).rest)),Xa=Eo("accent-fill-hover").withDefault((t=>qa.getValueFor(t).evaluate(t).hover)),Ja=Eo("accent-fill-active").withDefault((t=>qa.getValueFor(t).evaluate(t).active)),Qa=Eo("accent-fill-focus").withDefault((t=>qa.getValueFor(t).evaluate(t).focus)),tr=t=>(e,n)=>function(t,e){return t.contrast(go)>=e?go:mo}(n||Za.getValueFor(e),t),er=Eo({name:"foreground-on-accent-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>tr(ja.normal)(t,e)}),nr=Eo("foreground-on-accent-rest").withDefault((t=>er.getValueFor(t).evaluate(t,Za.getValueFor(t)))),ir=Eo("foreground-on-accent-hover").withDefault((t=>er.getValueFor(t).evaluate(t,Xa.getValueFor(t)))),or=Eo("foreground-on-accent-active").withDefault((t=>er.getValueFor(t).evaluate(t,Ja.getValueFor(t)))),ar=Eo("foreground-on-accent-focus").withDefault((t=>er.getValueFor(t).evaluate(t,Qa.getValueFor(t)))),rr=Eo({name:"foreground-on-accent-large-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>tr(ja.large)(t,e)}),sr=(Eo("foreground-on-accent-rest-large").withDefault((t=>rr.getValueFor(t).evaluate(t))),Eo("foreground-on-accent-hover-large").withDefault((t=>rr.getValueFor(t).evaluate(t,Xa.getValueFor(t)))),Eo("foreground-on-accent-active-large").withDefault((t=>rr.getValueFor(t).evaluate(t,Ja.getValueFor(t)))),Eo("foreground-on-accent-focus-large").withDefault((t=>rr.getValueFor(t).evaluate(t,Qa.getValueFor(t)))),t=>(e,n)=>function(t,e,n,i,o,a,r){const s=t.source,l=t.closestIndexOf(s),c=ho(e),u=l+(1===c?Math.min(i,o):Math.max(c*i,c*o)),d=t.colorContrast(e,n,u,c),h=t.closestIndexOf(d),p=h+c*Math.abs(i-o);let f,g;return(1===c?i<o:c*i>c*o)?(f=h,g=p):(f=p,g=h),{rest:t.get(f),hover:t.get(g),active:t.get(f+c*a),focus:t.get(f+c*r)}}(Ha.getValueFor(e),n||Ya.getValueFor(e),t,oa.getValueFor(e),aa.getValueFor(e),ra.getValueFor(e),sa.getValueFor(e))),lr=Eo({name:"accent-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>sr(ja.normal)(t,e)}),cr=Eo("accent-foreground-rest").withDefault((t=>lr.getValueFor(t).evaluate(t).rest)),ur=Eo("accent-foreground-hover").withDefault((t=>lr.getValueFor(t).evaluate(t).hover)),dr=Eo("accent-foreground-active").withDefault((t=>lr.getValueFor(t).evaluate(t).active)),hr=(Eo("accent-foreground-focus").withDefault((t=>lr.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n,i,o,a){const r=t.closestIndexOf(e),s=r>=Math.max(n,i,o,a)?-1:1;return{rest:t.get(r+s*n),hover:t.get(r+s*i),active:t.get(r+s*o),focus:t.get(r+s*a)}}(Fa.getValueFor(t),e||Ya.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t),da.getValueFor(t))})),pr=Eo("neutral-fill-rest").withDefault((t=>hr.getValueFor(t).evaluate(t).rest)),fr=Eo("neutral-fill-hover").withDefault((t=>hr.getValueFor(t).evaluate(t).hover)),gr=Eo("neutral-fill-active").withDefault((t=>hr.getValueFor(t).evaluate(t).active)),mr=(Eo("neutral-fill-focus").withDefault((t=>hr.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-fill-input-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n,i,o,a){const r=ho(e),s=t.closestIndexOf(e);return{rest:t.get(s-r*n),hover:t.get(s-r*i),active:t.get(s-r*o),focus:t.get(s-r*a)}}(Fa.getValueFor(t),e||Ya.getValueFor(t),ha.getValueFor(t),pa.getValueFor(t),fa.getValueFor(t),ga.getValueFor(t))})),vr=Eo("neutral-fill-input-rest").withDefault((t=>mr.getValueFor(t).evaluate(t).rest)),yr=Eo("neutral-fill-input-hover").withDefault((t=>mr.getValueFor(t).evaluate(t).hover)),Cr=(Eo("neutral-fill-input-focus").withDefault((t=>mr.getValueFor(t).evaluate(t).focus)),Eo("neutral-fill-input-active").withDefault((t=>mr.getValueFor(t).evaluate(t).active))),br=Eo({name:"neutral-fill-inverse-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n,i,o,a){const r=ho(e),s=t.closestIndexOf(t.colorContrast(e,14)),l=s+r*Math.abs(n-i);let c,u;return(1===r?n<i:r*n>r*i)?(c=s,u=l):(c=l,u=s),{rest:t.get(c),hover:t.get(u),active:t.get(c+r*o),focus:t.get(c+r*a)}}(Fa.getValueFor(t),e||Ya.getValueFor(t),ma.getValueFor(t),va.getValueFor(t),ya.getValueFor(t),Ca.getValueFor(t))}),Sr=(Eo("neutral-fill-inverse-rest").withDefault((t=>br.getValueFor(t).evaluate(t).rest)),Eo("neutral-fill-inverse-hover").withDefault((t=>br.getValueFor(t).evaluate(t).hover)),Eo("neutral-fill-inverse-active").withDefault((t=>br.getValueFor(t).evaluate(t).active)),Eo("neutral-fill-inverse-focus").withDefault((t=>br.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-fill-layer-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n){const i=t.closestIndexOf(e);return t.get(i-n)}(Fa.getValueFor(t),e||Ya.getValueFor(t),ba.getValueFor(t))})),xr=Eo("neutral-fill-layer-rest").withDefault((t=>Sr.getValueFor(t).evaluate(t))),Er=Eo({name:"neutral-fill-stealth-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n,i,o,a,r,s,l,c){const u=Math.max(n,i,o,a,r,s,l,c),d=t.closestIndexOf(e),h=d>=u?-1:1;return{rest:t.get(d+h*n),hover:t.get(d+h*i),active:t.get(d+h*o),focus:t.get(d+h*a)}}(Fa.getValueFor(t),e||Ya.getValueFor(t),Sa.getValueFor(t),xa.getValueFor(t),Ea.getValueFor(t),Aa.getValueFor(t),la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t),da.getValueFor(t))}),Ar=Eo("neutral-fill-stealth-rest").withDefault((t=>Er.getValueFor(t).evaluate(t).rest)),Tr=Eo("neutral-fill-stealth-hover").withDefault((t=>Er.getValueFor(t).evaluate(t).hover)),Dr=Eo("neutral-fill-stealth-active").withDefault((t=>Er.getValueFor(t).evaluate(t).active)),kr=(Eo("neutral-fill-stealth-focus").withDefault((t=>Er.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-fill-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n,i,o,a){const r=ho(e),s=t.closestIndexOf(t.colorContrast(e,4.5)),l=s+r*Math.abs(n-i);let c,u;return(1===r?n<i:r*n>r*i)?(c=s,u=l):(c=l,u=s),{rest:t.get(c),hover:t.get(u),active:t.get(c+r*o),focus:t.get(c+r*a)}}(Fa.getValueFor(t),e||Ya.getValueFor(t),Ta.getValueFor(t),Da.getValueFor(t),ka.getValueFor(t),Ia.getValueFor(t))})),Ir=(Eo("neutral-fill-strong-rest").withDefault((t=>kr.getValueFor(t).evaluate(t).rest)),Eo("neutral-fill-strong-hover").withDefault((t=>kr.getValueFor(t).evaluate(t).hover)),Eo("neutral-fill-strong-active").withDefault((t=>kr.getValueFor(t).evaluate(t).active)),Eo("neutral-fill-strong-focus").withDefault((t=>kr.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-stroke-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n,i,o,a){const r=t.closestIndexOf(e),s=ho(e),l=r+s*n,c=l+s*(i-n),u=l+s*(o-n),d=l+s*(a-n);return{rest:t.get(l),hover:t.get(c),active:t.get(u),focus:t.get(d)}}(Fa.getValueFor(t),Ya.getValueFor(t),wa.getValueFor(t),Pa.getValueFor(t),Oa.getValueFor(t),Ra.getValueFor(t))})),wr=Eo("neutral-stroke-rest").withDefault((t=>Ir.getValueFor(t).evaluate(t).rest)),Pr=Eo("neutral-stroke-hover").withDefault((t=>Ir.getValueFor(t).evaluate(t).hover)),Or=Eo("neutral-stroke-active").withDefault((t=>Ir.getValueFor(t).evaluate(t).active)),Rr=(Eo("neutral-stroke-focus").withDefault((t=>Ir.getValueFor(t).evaluate(t).focus)),Eo({name:"neutral-stroke-divider-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,n){return t.get(t.closestIndexOf(e)+ho(e)*n)}(Fa.getValueFor(t),e||Ya.getValueFor(t),Ma.getValueFor(t))})),Mr=Eo("neutral-stroke-divider-rest").withDefault((t=>Rr.getValueFor(t).evaluate(t))),Nr=Eo({name:"neutral-stroke-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,n,i,o,a){const r=ho(e),s=t.colorContrast(e,n),l=t.closestIndexOf(s);return{rest:s,hover:t.get(l+r*i),active:t.get(l+r*o),focus:t.get(l+r*a)}}(Fa.getValueFor(t),Ya.getValueFor(t),3,Na.getValueFor(t),La.getValueFor(t),_a.getValueFor(t))}),Lr=Eo("neutral-stroke-strong-rest").withDefault((t=>Nr.getValueFor(t).evaluate(t).rest)),_r=Eo("neutral-stroke-strong-hover").withDefault((t=>Nr.getValueFor(t).evaluate(t).hover)),Fr=Eo("neutral-stroke-strong-active").withDefault((t=>Nr.getValueFor(t).evaluate(t).active)),Hr=(Eo("neutral-stroke-strong-focus").withDefault((t=>Nr.getValueFor(t).evaluate(t).focus)),Eo({name:"focus-stroke-outer-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Fa.getValueFor(t),n=Ya.getValueFor(t),e.colorContrast(n,3.5);var e,n}})),Br=Eo("focus-stroke-outer").withDefault((t=>Hr.getValueFor(t).evaluate(t))),Ur=Eo({name:"focus-stroke-inner-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Ha.getValueFor(t),n=Ya.getValueFor(t),i=Br.getValueFor(t),e.colorContrast(i,3.5,e.closestIndexOf(e.source),-1*ho(n));var e,n,i}}),Vr=Eo("focus-stroke-inner").withDefault((t=>Ur.getValueFor(t).evaluate(t))),Gr=Eo({name:"neutral-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Fa.getValueFor(t),n=Ya.getValueFor(t),e.colorContrast(n,14);var e,n}}),Wr=Eo("neutral-foreground-rest").withDefault((t=>Gr.getValueFor(t).evaluate(t))),$r=Eo({name:"neutral-foreground-hint-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Fa.getValueFor(t),n=Ya.getValueFor(t),e.colorContrast(n,4.5);var e,n}}),zr=Eo("neutral-foreground-hint").withDefault((t=>$r.getValueFor(t).evaluate(t)));function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Yr=function(t){u(n,t);var e=Kr(n);function n(t,i,o){var a;return s(this,n),f(l(a=e.call(this)),"ButtonClicked",void 0),f(l(a),"Domain",void 0),f(l(a),"Metadata",void 0),a.ButtonClicked=t,a.Domain=i,a.Metadata=o,a}return r(n)}(g),jr="AutoOpenData",qr="LastCleanedData",Zr="EngagementDataKey",Xr=r((function t(){s(this,t),f(this,"popupOrigination",void 0),f(this,"timeLastAutoOpen",void 0),f(this,"snoozeTime",void 0)})),Jr=function(){function t(){s(this,t)}return r(t,null,[{key:"getInitialPrice",value:function(t){if(t)return Te.GetPriceStringAsNumber(t)}},{key:"getAmazonClippingDiscount",value:function(t,e){var n;if(e&&t){var i=e.substring(e.search(/\d+/g)),o=i.search(/\s|%/),a=i;-1!==o&&(a=i.substring(0,o)),n=Te.GetPriceStringAsNumber(a),e.search(/%/)>0&&(n=t*n/100)}return n}}]),t}();var Qr,ts,es,ns;!function(t){t.ICLastAutoShowTime="ICLastAutoShowTime",t.ICNotificationType="ICNotificationType",t.ICMetadata="ICMetadata",t.ICCurrentPageInfo="ICCurrentPageInfo",t.GroceryCashbackItem="GroceryCashbackItem",t.GroceryCashbackActivated="GroceryCashbackActivated",t.ICActivatedPending="ICActivatedPending",t.ICConfirmationPending="ICConfirmationPending",t.AutoClipData="AutoClipData",t.GroceryOrder="GroceryOrder"}(Qr||(Qr={}));var is,os,as,rs,ss,ls,cs=function(){function t(){s(this,t)}return r(t,[{key:"getInfoIcon",value:function(){return mt.getTrustedHTML(ts||(ts=j(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13" fill="none" aria-hidden="true">\n        <path opacity="0.7" d="M5.4 7.14712C5.4 6.81575 5.66863 6.54712 6 6.54712C6.33137 6.54712 6.6 6.81575 6.6 7.14712V8.94712C6.6 9.27849 6.33137 9.54712 6 9.54712C5.66863 9.54712 5.4 9.27849 5.4 8.94712V7.14712ZM6 3.84712C5.50294 3.84712 5.1 4.25006 5.1 4.74712C5.1 5.24418 5.50294 5.64712 6 5.64712C6.49706 5.64712 6.9 5.24418 6.9 4.74712C6.9 4.25006 6.49706 3.84712 6 3.84712ZM0 6.54712C0 3.23341 2.68629 0.547119 6 0.547119C9.31371 0.547119 12 3.23341 12 6.54712C12 9.86083 9.31371 12.5471 6 12.5471C2.68629 12.5471 0 9.86083 0 6.54712ZM6 1.74712C3.34903 1.74712 1.2 3.89615 1.2 6.54712C1.2 9.19809 3.34903 11.3471 6 11.3471C8.65097 11.3471 10.8 9.19809 10.8 6.54712C10.8 3.89615 8.65097 1.74712 6 1.74712Z" fill="var(--neutral-foreground-rest)"/>\n        </svg>'])))}},{key:"getLockIcon",value:function(){return mt.getTrustedHTML(es||(es=j(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n        <path d="M6.00203 0.995361C7.47477 0.995361 8.6687 2.18927 8.6687 3.66203V4.99536H9.83537C10.6638 4.99536 11.3354 5.66694 11.3354 6.49536V12.8287C11.3354 13.6571 10.6638 14.3287 9.83537 14.3287H2.1687C1.34027 14.3287 0.668701 13.6571 0.668701 12.8287V6.49536C0.668701 5.66694 1.34027 4.99536 2.1687 4.99536H3.33537V3.66203C3.33537 2.18927 4.52927 0.995361 6.00203 0.995361ZM9.83537 5.99536H2.1687C1.89256 5.99536 1.6687 6.21922 1.6687 6.49536V12.8287C1.6687 13.1048 1.89256 13.3287 2.1687 13.3287H9.83537C10.1115 13.3287 10.3354 13.1048 10.3354 12.8287V6.49536C10.3354 6.21922 10.1115 5.99536 9.83537 5.99536ZM6.0021 8.66203C6.55443 8.66203 7.0021 9.10976 7.0021 9.66203C7.0021 10.2143 6.55443 10.662 6.0021 10.662C5.44983 10.662 5.0021 10.2143 5.0021 9.66203C5.0021 9.10976 5.44983 8.66203 6.0021 8.66203ZM6.00203 1.99536C5.08157 1.99536 4.33537 2.74155 4.33537 3.66203V4.99536H7.6687V3.66203C7.6687 2.74155 6.9225 1.99536 6.00203 1.99536Z" fill="black" fill-opacity="0.83"/>\n        </svg>'])))}},{key:"getUnlockedIcon",value:function(){return mt.getTrustedHTML(ns||(ns=j(['<svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 10 15" fill="none">\n        <path d="M5 10.9121C5.55228 10.9121 6 10.4644 6 9.91211C6 9.35982 5.55228 8.91211 5 8.91211C4.44772 8.91211 4 9.35982 4 9.91211C4 10.4644 4.44772 10.9121 5 10.9121ZM5 1.91211C4.17157 1.91211 3.5 2.58368 3.5 3.41211V5.41211H8.5C9.32843 5.41211 10 6.08368 10 6.91211V12.9121C10 13.7405 9.32843 14.4121 8.5 14.4121H1.5C0.671573 14.4121 0 13.7405 0 12.9121V6.91211C0 6.08368 0.671573 5.41211 1.5 5.41211H2.5V3.41211C2.5 2.0314 3.61929 0.912109 5 0.912109C6.38071 0.912109 7.5 2.0314 7.5 3.41211C7.5 3.68825 7.27614 3.91211 7 3.91211C6.72386 3.91211 6.5 3.68825 6.5 3.41211C6.5 2.58368 5.82843 1.91211 5 1.91211ZM1.5 6.41211C1.22386 6.41211 1 6.63597 1 6.91211V12.9121C1 13.1883 1.22386 13.4121 1.5 13.4121H8.5C8.77614 13.4121 9 13.1883 9 12.9121V6.91211C9 6.63597 8.77614 6.41211 8.5 6.41211H1.5Z" fill="#212121"/>\n        </svg>'])))}},{key:"getStyles",value:function(){return"\n        #attainableCouponDiv {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.12%, rgba(221, 235, 255, 0.6) 100%);\n            width: calc(100% + 40px);\n            height: 52px;\n            margin-left: -20px;\n            margin-right: -20px;\n        }\n        #attLock {\n            width: 20px;\n            height: 20px;\n            margin-right: 12px;\n            align-self: center;\n        }\n        #attPrompt {\n            font-size: 14px;\n            line-height: 20px;\n            margin: 0px;\n            align-self: center;\n        }\n        #notificationDiv {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.12%, rgba(221, 235, 255, 0.6) 100%);\n            width: calc(100%);\n            margin-top: -20px;\n        }\n        #notificationBanner {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            width: calc(100%);\n            height: 52px;\n        }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        #attainableCouponDiv, #notificationDiv {\n            background: linear-gradient(90deg, rgba(105, 99, 67, 0.6) 0%, rgba(83, 101, 105, 0.6) 53.12%, rgba(71, 85, 105, 0.6) 100%);\n        }\n        "}}]),t}(),us=function(){function t(){s(this,t),f(this,"stringValue",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.stringValue=e.stringValue,n}},{key:"CreateFromString",value:function(e){var n=new t;return n.stringValue=e,n}}]),t}(),ds=us;function hs(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ps(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ps(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function ps(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){t.COUPONS_COPIED="COUPONS_COPIED",t.DISMISSED="DISMISSED",t.FLYOUT_SNOOZED="SNOOZED",t.FLYOUT_SNOOZE_UNDO="FLYOUT_SNOOZE_UNDO",t.FRE_DISMISSED="FRE_DISMISSED",t.FRE_GOT_IT="FRE_GOT_IT",t.FRE_MANAGE="FRE_MANAGE",t.FRE_NO_THANKS="FRE_NO_THANKS",t.FRE_SETTINGS="FRE_SETTINGS",t.MANAGE="MANAGE",t.NAVIGATE_TO_RETAILER="NAVIGATE_TO_RETAILER",t.TRY_ALL_COUPONS="TRY_ALL_COUPONS",t.TURN_OFF_AUTO_SHOW="TURN_OFF_AUTO_SHOW",t.TURN_ON_AUTO_SHOW="TURN_ON_AUTO_SHOW",t.VIEW_MORE_COUPONS="VIEW_MORE_COUPONS",t.VIEW_MORE_RETAILERS="VIEW_MORE_RETAILERS",t.VIEW_MORE_TOP_RETAILERS="VIEW_MORE_TOP_RETAILERS",t.VIEW_MORE_GROCERY_COUPONS="VIEW_MORE_GROCERY_COUPONS",t.LIGHT_DISMISSED="LIGHT_DISMISSED",t.SHOW_MORE_SELLERS="SHOW_MORE_SELLERS",t.REBATES_LEARN_MORE="REBATES_LEARN_MORE",t.REBATES_ACCOUNT="REBATES_ACCOUNT",t.REBATES_HISTORY="REBATES_HISTORY",t.ACTIVATE_CASHBACK="ACTIVATE_CASHBACK",t.EXPAND_PRICE_HISTORY_GRAPH="EXPAND_PRICE_HISTORY_GRAPH",t.HIDE_PRICE_HISTORY_GRAPH="HIDE_PRICE_HISTORY_GRAPH",t.FIRST_HOVER_PRICE_HISTORY_GRAPH="FIRST_HOVER_PRICE_HISTORY_GRAPH",t.VIEW_PRICE_HISTORY="VIEW_PRICE_HISTORY",t.HIDE_PRICE_HISTORY="HIDE_PRICE_HISTORY",t.NAVIGATE_TO_DEAL_OFFER="NAVIGATE_TO_DEAL_OFFER",t.NAVIGATE_TO_PROFESSIONAL_REVIEW="NAVIGATE_TO_PROFESSIONAL_REVIEW",t.NAVIGATE_TO_VIDEO_REVIEW="NAVIGATE_TO_VIDEO_REVIEW",t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT",t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT_FORZIP="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT_FORZIP",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.EXPRESS_CHECKOUT_FORZIP="EXPRESS_CHECKOUT_FORZIP",t.EXPRESS_CHECKOUT_WITHOUT_PAYMENT="EXPRESS_CHECKOUT_WITHOUT_PAYMENT",t.NAVIGATE_TO_RECOMMENDATION_OFFER="NAVIGATE_TO_RECOMMENDATION_OFFER",t.CLIP_COUPON="CLIP_COUPON",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.NAVIGATE_TO_OTHER_SELLER="NAVIGATE_TO_OTHER_SELLER",t.ADD_TO_CART_FROM_OTHER_SELLER="ADD_TO_CART_FROM_OTHER_SELLER",t.PRODUCT_HISTORY_NAVIGATION="PRODUCT_HISTORY_NAVIGATION",t.PRODUCT_HISTORY_EXPAND_SECTION="PRODUCT_HISTORY_EXPAND_SECTION",t.PRODUCT_HISTORY_COLLAPSE_SECTION="PRODUCT_HISTORY_COLLAPSE_SECTION",t.TIPS_CLICK="TIPS_CLICK",t.OPEN_FLYOUT_MICRO_NOTIFICATION="OPEN_FLYOUT_MICRO_NOTIFICATION",t.WALLET_HUB_NAVIGATION="WALLET_HUB_NAVIGATION",t.PAYMENT_OPTIONS_EXPAND_SECTION="PAYMENT_OPTIONS_EXPAND_SECTION",t.PAYMENT_OPTIONS_COLLAPSE_SECTION="PAYMENT_OPTIONS_COLLAPSE_SECTION",t.EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED="EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED",t.EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE="EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE",t.EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN="EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN",t.CONTINUE_TO_ZIP_CLICKED="CONTINUE_TO_ZIP_CLICKED",t.DELETE_TRACKER="DELETE_TRACKER",t.CASHBACK_RETAILER_CLICK="CASHBACK_RETAILER_CLICK",t.ACTIVATE_CASHBACK_RETURNED="ACTIVATE_CASHBACK_RETURNED",t.PRINT_COUPONS_CLICK="PRINT_COUPONS_CLICK",t.SELECT_PRINTABLE_COUPON="SELECT_PRINTABLE_COUPON",t.CLICK_SEEALL_PRINTABLE_COUPON="CLICK_SEEALL_PRINTABLE_COUPON",t.DIGITAL_GROCERY_COUPONS_CLICK="DIGITAL_GROCERY_COUPONS_CLICK",t.DIGITAL_GROCERY_COUPONS_SEEALL="DIGITAL_GROCERY_COUPONS_SEEALL",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_TRACK_ORDER_OPT_IN",t.PACKAGE_TRACKING_OPT_OUT="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t.PACKAGE_TRACKING_EXPAND_SECTION="PACKAGE_TRACKING_EXPAND_SECTION",t.PACKAGE_TRACKING_SEE_MORE="PACKAGE_TRACKING_SEE_MORE",t.PACKAGE_TRACKING_COLLAPSE_SECTION="PACKAGE_TRACKING_COLLAPSE_SECTION",t.PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t.PACKAGE_TRACKING_CARD_CLICKED="PACKAGE_TRACKING_CARD_CLICKED",t.ACTIVATE_REWARDS_NEW="ACTIVATE_REWARDS_NEW",t.REWARDS_SIGNIN_CLICK="REWARDS_SIGNIN_CLICK",t.REWARDS_REDEEM_CLICK="REWARDS_REDEEM_CLICK",t.SUSTAINABILITYSHOP_CLICK="SUSTAINABILITYSHOP_CLICK",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.PWILO_NOTIFICATION_PRICE_DROP_DELETE="PWILO_NOTIFICATION_PRICE_DROP_DELETE",t.PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS="PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS",t.EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED="EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED",t.EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED="EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED",t.SUSTAINABILITY_LANDING_FULL_LEARN_MORE="SUSTAINABILITY_LANDING_FULL_LEARN_MORE",t.SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE="SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE",t.SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE="SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE",t.CLICK_PCB_CROSS_SESSION="CLICK_PCB_CROSS_SESSION",t.REWARD_JOIN_NOW="REWARD_JOIN_NOW",t.REWARD_MAYBE_LATER="REWARD_MAYBE_LATER",t.REWARD_DISMISS="REWARD_DISMISS",t.REWARD_LINK_CLICK="REWARD_LINK_CLICK",t.ATTAINABLE_COUPON_CONTINUE="ATTAINABLE_COUPON_CONTINUE",t.ATTAINABLE_COUPON_CLICK="ATTAINABLE_COUPON_CLICK",t.ACTIVATE_CLICK_ITEMIZED_CASHBACK="ACTIVATE_CLICK_ITEMIZED_CASHBACK",t.ACTIVATED_CLICK_ITEMIZED_CASHBACK="ACTIVATED_CLICK_ITEMIZED_CASHBACK",t.CLICK_ITEMIZED_CASHBACK_SEE_ALL="CLICK_ITEMIZED_CASHBACK_SEE_ALL",t.HOVER_INFO_ICON_ITEMIZED_CASHBACK="HOVER_INFO_ICON_ITEMIZED_CASHBACK",t.CLICK_DISCLAIMER_ITEMIZED_CASHBACK="CLICK_DISCLAIMER_ITEMIZED_CASHBACK",t.PERSONALIZED_CASHBACK_SEEMORE="PERSONALIZED_CASHBACK_SEEMORE",t.FEED_TRENDING_OFFERS="FEED_TRENDING_OFFERS",t.FEED_TRENDING_OFFERS_SHOW_MORE="FEED_TRENDING_OFFERS_SHOW_MORE",t.FEED_DAILY_DEALS="FEED_DAILY_DEALS",t.FEED_DAILY_DEALS_SHOW_MORE="FEED_DAILY_DEALS_SHOW_MORE",t.FEED_INFINITE_CATEGORY="FEED_INFINITE_CATEGORY",t.FEED_INFINITE_CATEGORY_SHOW_MORE="FEED_INFINITE_CATEGORY_SHOW_MORE",t.SWITCH_TO_TAB1="SWITCH_TO_TAB1",t.SWITCH_TO_TAB2="SWITCH_TO_TAB2",t.SHOPRUNNER_SEEMORE="SHOPRUNNER_SEEMORE",t.SHOPRUNNER_SIGNUP_CLICK="SHOPRUNNER_SIGNUP_CLICK",t.SHOPRUNNER_SUCCESSFUL_SIGNUP="SHOPRUNNER_SUCCESSFUL_SIGNUP",t.SHOPRUNNER_FLYOUT_EXPAND_SECTION="SHOPRUNNER_FLYOUT_EXPAND_SECTION",t.SHOPRUNNER_FLYOUT_COLLAPSE_SECTION="SHOPRUNNER_FLYOUT_COLLAPSE_SECTION",t.AUTOS_SEE_MORE_CLICKED="AUTOS_SEE_MORE_CLICKED",t.AUTOS_PRICE_BAR_CLICKED="AUTOS_PRICE_BAR_CLICKED",t.AUTOS_VIN_HISTORY_CLICKED="AUTOS_VIN_HISTORY_CLICKED",t.SEE_ALL_TRENDING_DEALS="SEE_ALL_TRENDING_DEALS",t.NAVIGATE_TO_TRENDING_DEAL="NAVIGATE_TO_TRENDING_DEAL"}(is||(is={})),function(t){t.CARD_VIEWED="CARD_VIEWED",t.CARD_CLICKED="CARD_CLICKED",t.CARD_DELETED="CARD_DELETED"}(os||(os={})),function(t){t[t.COUPONS_COPIED=0]="COUPONS_COPIED",t[t.DISMISSED=1]="DISMISSED",t[t.FRE_DISMISSED=2]="FRE_DISMISSED",t[t.FRE_GOT_IT=3]="FRE_GOT_IT",t[t.FRE_MANAGE=4]="FRE_MANAGE",t[t.FRE_NO_THANKS=5]="FRE_NO_THANKS",t[t.FRE_SETTINGS=6]="FRE_SETTINGS",t[t.MANAGE=7]="MANAGE",t[t.NAVIGATE_TO_RETAILER=8]="NAVIGATE_TO_RETAILER",t[t.TRY_ALL_COUPONS=9]="TRY_ALL_COUPONS",t[t.TURN_OFF_AUTO_SHOW=10]="TURN_OFF_AUTO_SHOW",t[t.TURN_ON_AUTO_SHOW=11]="TURN_ON_AUTO_SHOW",t[t.VIEW_MORE_COUPONS=12]="VIEW_MORE_COUPONS",t[t.VIEW_MORE_RETAILERS=13]="VIEW_MORE_RETAILERS",t[t.LIGHT_DISMISSED=14]="LIGHT_DISMISSED",t[t.SHOW_MORE_SELLERS=15]="SHOW_MORE_SELLERS",t[t.REBATES_LEARN_MORE=16]="REBATES_LEARN_MORE",t[t.REBATES_ACCOUNT=17]="REBATES_ACCOUNT",t[t.REBATES_HISTORY=18]="REBATES_HISTORY",t[t.ACTIVATE_CASHBACK=19]="ACTIVATE_CASHBACK",t[t.EXPAND_PRICE_HISTORY_GRAPH=20]="EXPAND_PRICE_HISTORY_GRAPH",t[t.HIDE_PRICE_HISTORY_GRAPH=21]="HIDE_PRICE_HISTORY_GRAPH",t[t.FIRST_HOVER_PRICE_HISTORY_GRAPH=22]="FIRST_HOVER_PRICE_HISTORY_GRAPH",t[t.VIEW_PRICE_HISTORY=23]="VIEW_PRICE_HISTORY",t[t.HIDE_PRICE_HISTORY=24]="HIDE_PRICE_HISTORY",t[t.NAVIGATE_TO_DEAL_OFFER=25]="NAVIGATE_TO_DEAL_OFFER",t[t.NAVIGATE_TO_PROFESSIONAL_REVIEW=26]="NAVIGATE_TO_PROFESSIONAL_REVIEW",t[t.NAVIGATE_TO_VIDEO_REVIEW=27]="NAVIGATE_TO_VIDEO_REVIEW",t[t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT=28]="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT",t[t.EXPRESS_CHECKOUT=29]="EXPRESS_CHECKOUT",t[t.NAVIGATE_TO_RECOMMENDATION_OFFER=30]="NAVIGATE_TO_RECOMMENDATION_OFFER",t[t.CLIP_COUPON=31]="CLIP_COUPON",t[t.ACTIVATE_CASHBACK_NEW=32]="ACTIVATE_CASHBACK_NEW",t[t.ACTIVATE_REWARDS_NEW=33]="ACTIVATE_REWARDS_NEW",t[t.ADD_TO_CART_FROM_OTHER_SELLER=34]="ADD_TO_CART_FROM_OTHER_SELLER",t[t.PRODUCT_HISTORY_NAVIGATION=35]="PRODUCT_HISTORY_NAVIGATION",t[t.PRODUCT_HISTORY_EXPAND_SECTION=36]="PRODUCT_HISTORY_EXPAND_SECTION",t[t.PRODUCT_HISTORY_COLLAPSE_SECTION=37]="PRODUCT_HISTORY_COLLAPSE_SECTION",t[t.NAVIGATE_TO_OTHER_SELLER=38]="NAVIGATE_TO_OTHER_SELLER",t[t.TIPS_CLICK=39]="TIPS_CLICK",t[t.REWARDS_SIGNIN_CLICK=40]="REWARDS_SIGNIN_CLICK",t[t.REWARDS_REDEEM_CLICK=41]="REWARDS_REDEEM_CLICK",t[t.CASHBACK_OTHERSITES_CLICK=42]="CASHBACK_OTHERSITES_CLICK",t[t.WALLET_HUB_NAVIGATION=43]="WALLET_HUB_NAVIGATION",t[t.PAYMENT_OPTIONS_EXPAND_SECTION=44]="PAYMENT_OPTIONS_EXPAND_SECTION",t[t.PAYMENT_OPTIONS_COLLAPSE_SECTION=45]="PAYMENT_OPTIONS_COLLAPSE_SECTION",t[t.CASHBACK_RETAILER_CLICK=59]="CASHBACK_RETAILER_CLICK",t[t.ACTIVATE_CASHBACK_RETURNED=60]="ACTIVATE_CASHBACK_RETURNED",t[t.PRINT_COUPONS_CLICK=61]="PRINT_COUPONS_CLICK",t[t.SELECT_PRINTABLE_COUPON=62]="SELECT_PRINTABLE_COUPON",t[t.CLICK_SEEALL_PRINTABLE_COUPON=63]="CLICK_SEEALL_PRINTABLE_COUPON",t[t.DIGITAL_GROCERY_COUPONS_CLICK=64]="DIGITAL_GROCERY_COUPONS_CLICK",t[t.DIGITAL_GROCERY_COUPONS_SEEALL=65]="DIGITAL_GROCERY_COUPONS_SEEALL",t[t.PINTEREST_COUPON_COPIED=66]="PINTEREST_COUPON_COPIED",t[t.PINTEREST_CASHBACK_ACTIVATED=67]="PINTEREST_CASHBACK_ACTIVATED",t[t.PINTEREST_VIEW_PRICE_HISTORY=68]="PINTEREST_VIEW_PRICE_HISTORY",t[t.PACKAGE_TRACKING_EXPAND_SECTION=69]="PACKAGE_TRACKING_EXPAND_SECTION",t[t.PACKAGE_TRACKING_COLLAPSE_SECTION=70]="PACKAGE_TRACKING_COLLAPSE_SECTION",t[t.PACKAGE_TRACKING_TRACK_ORDER_OPT_IN=71]="PACKAGE_TRACKING_TRACK_ORDER_OPT_IN",t[t.PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK=72]="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t[t.PACKAGE_TRACKING_CARD_CLICKED=73]="PACKAGE_TRACKING_CARD_CLICKED",t[t.PACKAGE_TRACKING_SEE_MORE=74]="PACKAGE_TRACKING_SEE_MORE",t[t.CLICK_PCB_CROSS_SESSION=75]="CLICK_PCB_CROSS_SESSION",t[t.REWARD_JOIN_NOW=76]="REWARD_JOIN_NOW",t[t.REWARD_MAYBE_LATER=77]="REWARD_MAYBE_LATER",t[t.REWARD_DISMISS=78]="REWARD_DISMISS",t[t.REWARD_LINK_CLICK=79]="REWARD_LINK_CLICK",t[t.ATTAINABLE_COUPON_CONTINUE=80]="ATTAINABLE_COUPON_CONTINUE",t[t.ATTAINABLE_COUPON_CLICK=81]="ATTAINABLE_COUPON_CLICK",t[t.ATTAINABLE_COUPON_VIEWED=82]="ATTAINABLE_COUPON_VIEWED",t[t.FEED_TRENDING_OFFERS=125]="FEED_TRENDING_OFFERS",t[t.FEED_TRENDING_OFFERS_SHOW_MORE=126]="FEED_TRENDING_OFFERS_SHOW_MORE",t[t.FEED_DAILY_DEALS=127]="FEED_DAILY_DEALS",t[t.FEED_DAILY_DEALS_SHOW_MORE=128]="FEED_DAILY_DEALS_SHOW_MORE",t[t.FEED_INFINITE_CATEGORY=129]="FEED_INFINITE_CATEGORY",t[t.FEED_INFINITE_CATEGORY_SHOW_MORE=130]="FEED_INFINITE_CATEGORY_SHOW_MORE",t[t.SWITCH_TO_TAB1=131]="SWITCH_TO_TAB1",t[t.SWITCH_TO_TAB2=132]="SWITCH_TO_TAB2"}(as||(as={})),function(t){t[t.CARD_VIEWED=0]="CARD_VIEWED",t[t.CARD_CLICKED=1]="CARD_CLICKED",t[t.CARD_DELETED=2]="CARD_DELETED"}(rs||(rs={})),function(t){t.COUPONS_AVAILABLE="COUPONS_AVAILABLE",t.COUPONS_AUTO_APPLY="COUPONS_AUTO_APPLY",t.COUPONS_CLIPPING="COUPONS_CLIPPING",t.PRICE_COMPARE_LOWER_PRICES="PRICE_COMPARE_LOWER_PRICES",t.PRICE_COMPARE_BEST_PRICE="PRICE_COMPARE_BEST_PRICE",t.REBATES_ACTIVATE_CASHBACK="REBATES_ACTIVATE_CASHBACK",t.REBATES_BING_CONFIRMATION="REBATES_BING_CONFIRMATION",t.PRICE_HISTORY_DROP="PRICE_HISTORY_DROP",t.PRICE_HISTORY_STABLE="PRICE_HISTORY_STABLE",t.PRICE_HISTORY_INCREASE="PRICE_HISTORY_INCREASE",t.DEALS="DEALS",t.PROFESSIONAL_REVIEWS="PROFESSIONAL_REVIEWS",t.VIDEO_REVIEWS="VIDEO_REVIEWS",t.RECOMMENDATIONS="RECOMMENDATIONS",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.ACTIVATE_REWARDS_NEW="ACTIVATE_REWARDS_NEW",t.OTHER_SELLER="OTHER_SELLER",t.PRODUCT_HISTORY="PRODUCT_HISTORY",t.PAYMENT_OPTIONS="PAYMENT_OPTIONS",t.TIPS="TIPS",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_OPT_IN",t.PACKAGE_TRACKING_STATUS_VIEW="PACKAGE_TRACKING_STATUS_VIEW",t.CASHBACK_RETAILER="CASHBACK_RETAILER",t.GROCERY_PRINT_COUPONS="GROCERY_PRINT_COUPONS",t.GROCERY_DIGITAL_COUPONS="GROCERY_DIGITAL_COUPONS",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.SUSTAINABILITY_LANDING_FULL="SUSTAINABILITY_LANDING_FULL",t.SUSTAINABILITY_LANDING_FOOTER="SUSTAINABILITY_LANDING_FOOTER",t.SUSTAINABILITY_PURCHASE_CONFIRMATION="SUSTAINABILITY_PURCHASE_CONFIRMATION",t.ATTAINABLE_COUPONS="ATTAINABLE_COUPONS",t.COUPON_ATTAINED="COUPON_ATTAINED",t.ATTAINABLE_COUPONS_OVERLAY="ATTAINABLE_COUPONS_OVERLAY",t.ITEMIZED_CASHBACK="ITEMIZED_CASHBACK",t.FEED_TRENDING_OFFERS="FEED_TRENDING_OFFERS",t.FEED_DAILY_DEALS="FEED_DAILY_DEALS",t.FEED_INFINITE_CATEGORY="FEED_INFINITE_CATEGORY",t.SHOPRUNNER_SIGNUP="SHOPRUNNER_SIGNUP",t.AUTOS_MARKETPLACE="AUTOS_MARKETPLACE",t.AUTOS_PRICE_INSIGHT="AUTOS_PRICE_INSIGHT"}(ss||(ss={})),function(t){t[t.COUPONS_AVAILABLE=0]="COUPONS_AVAILABLE",t[t.COUPONS_AUTO_APPLY=1]="COUPONS_AUTO_APPLY",t[t.COUPONS_CLIPPING=2]="COUPONS_CLIPPING",t[t.PRICE_COMPARE_LOWER_PRICES=3]="PRICE_COMPARE_LOWER_PRICES",t[t.PRICE_COMPARE_BEST_PRICE=4]="PRICE_COMPARE_BEST_PRICE",t[t.PRICE_COMPARE_SHOW_MORE_SELLERS=5]="PRICE_COMPARE_SHOW_MORE_SELLERS",t[t.REBATES_ACTIVATE_CASHBACK=6]="REBATES_ACTIVATE_CASHBACK",t[t.REBATES_BING_CONFIRMATION=7]="REBATES_BING_CONFIRMATION",t[t.PRICE_HISTORY_DROP=8]="PRICE_HISTORY_DROP",t[t.PRICE_HISTORY_STABLE=9]="PRICE_HISTORY_STABLE",t[t.PRICE_HISTORY_INCREASE=10]="PRICE_HISTORY_INCREASE",t[t.DEALS=11]="DEALS",t[t.PROFESSIONAL_REVIEWS=12]="PROFESSIONAL_REVIEWS",t[t.VIDEO_REVIEWS=13]="VIDEO_REVIEWS",t[t.RECOMMENDATIONS=14]="RECOMMENDATIONS",t[t.ACTIVATE_CASHBACK_NEW=15]="ACTIVATE_CASHBACK_NEW",t[t.EXPRESS_CHECKOUT=16]="EXPRESS_CHECKOUT",t[t.ACTIVATE_REWARDS_NEW=17]="ACTIVATE_REWARDS_NEW",t[t.OTHER_SELLER=18]="OTHER_SELLER",t[t.PRODUCT_HISTORY=19]="PRODUCT_HISTORY",t[t.TIPS=20]="TIPS",t[t.PAYMENT_OPTIONS=21]="PAYMENT_OPTIONS",t[t.PWILO_NOTIFICATION_PRICE_DROP=22]="PWILO_NOTIFICATION_PRICE_DROP",t[t.YOUTUBE_COUPONS_HOME=23]="YOUTUBE_COUPONS_HOME",t[t.YOUTUBE_COUPONS_VIDEO=24]="YOUTUBE_COUPONS_VIDEO",t[t.YOUTUBE_COUPONS_RETAILER=25]="YOUTUBE_COUPONS_RETAILER",t[t.YOUTUBE_COUPONS_RETAILER_CHECKOUT=26]="YOUTUBE_COUPONS_RETAILER_CHECKOUT",t[t.YOUTUBE_COUPONS_AUTO_APPLY=27]="YOUTUBE_COUPONS_AUTO_APPLY",t[t.CASHBACK_RETAILER=28]="CASHBACK_RETAILER",t[t.GROCERY_PRINT_COUPONS=29]="GROCERY_PRINT_COUPONS",t[t.GROCERY_DIGITAL_COUPONS=30]="GROCERY_DIGITAL_COUPONS",t[t.PINTEREST_COUPONS_AVAILABLE=31]="PINTEREST_COUPONS_AVAILABLE",t[t.PINTEREST_REBATES_ACTIVATE_CASHBACK=32]="PINTEREST_REBATES_ACTIVATE_CASHBACK",t[t.PINTEREST_PRICE_HISTORY_DROP=33]="PINTEREST_PRICE_HISTORY_DROP",t[t.PINTEREST_PRICE_HISTORY_STABLE=34]="PINTEREST_PRICE_HISTORY_STABLE",t[t.PINTEREST_PRICE_HISTORY_INCREASE=35]="PINTEREST_PRICE_HISTORY_INCREASE",t[t.PACKAGE_TRACKING_OPT_IN=36]="PACKAGE_TRACKING_OPT_IN",t[t.PACKAGE_TRACKING_STATUS_VIEW=37]="PACKAGE_TRACKING_STATUS_VIEW",t[t.ATTAINABLE_COUPONS=38]="ATTAINABLE_COUPONS",t[t.SHOPRUNNER_SIGNUP=52]="SHOPRUNNER_SIGNUP",t[t.FEED_TRENDING_OFFERS=54]="FEED_TRENDING_OFFERS",t[t.FEED_DAILY_DEALS=55]="FEED_DAILY_DEALS",t[t.FEED_INFINITE_CATEGORY=56]="FEED_INFINITE_CATEGORY"}(ls||(ls={}));var fs=function(){function t(e,n,i,o){s(this,t),f(this,"utilities",void 0),f(this,"flyoutData",void 0),f(this,"lastAttainableCoupon",void 0),f(this,"attainableCouponList",[]),f(this,"assets",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),f(this,"lockedCoupons",void 0),f(this,"cartValue",void 0),this.utilities=e.viewModulesUtilities,this.flyoutData=n,this.assets=new cs,this.pageHandlerModule=i,this.logModule=o,this.cartValue=-1,this.lockedCoupons=[]}var n,i,a;return r(t,[{key:"setupAttainableCoupons",value:(a=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(je(s=this.flyoutData.common.domain,"lastAttainableCoupon"),je(s,"attainableCouponMap"),!(l=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=9;break}u={value:{stringValue:l.CartValues}},c=u,t.next=12;break;case 9:return t.next=11,this.pageHandlerModule.GetStorageValue("CartValues");case 11:c=t.sent;case 12:if(null!==(e=c)&&void 0!==e&&null!==(n=e.value)&&void 0!==n&&n.stringValue)try{h=JSON.parse(null===(d=c)||void 0===d?void 0:d.value.stringValue),p=new Date,f=h?h[s]:void 0,g=f?new Date(f.timestamp):null,m=g?p.getTime()-g.getTime():0,Math.floor(m/1e3/60/60/24)>0?(h[s]=null,v=JSON.stringify({value:JSON.stringify(h)}),(y=new ds).stringValue=v,this.pageHandlerModule.SetStorageValue("CartValues",y)):(C=f.cartValue,this.cartValue=C?C.OrderTotal:-1)}catch(t){}if(b=Ke("lastAttainableCoupon"),S=null!==(i=b[s])&&void 0!==i?i:{},this.lastAttainableCoupon=S.referenceCoupon,x=Ke("attainableCouponMap"),E=null!==(a=x[s])&&void 0!==a?a:{},this.attainableCouponList=null!==(r=E.attainableCouponList)&&void 0!==r?r:[],!l){t.next=24;break}T={value:{stringValue:l.CompletedPurchase}},A=T,t.next=27;break;case 24:return t.next=26,this.pageHandlerModule.GetStorageValue("CompletedPurchase");case 26:A=t.sent;case 27:if(A)try{b[s]={},x[s]={},this.utilities.setStorageBoolean("CompletedPurchase",!1),Ye("lastAttainableCoupon",JSON.stringify(b)),Ye("attainableCouponMap",JSON.stringify(x))}catch(t){}case 28:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"shouldCreateBanner",value:function(){this.updateLockedCoupons(this.cartValue);var t=this.lockedCoupons.length>0,e=this.flyoutData.common.isCheckoutPage,n=this.flyoutData.common.isPane,i=e&&t&&!n;return i||Ye("attainableCouponDisplayed","false"),i}},{key:"createBanner",value:(i=e(o().mark((function t(e){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),(n=this.utilities.createElement("div")).slot="start-content",n.id="attainableCouponDiv",n.setAttribute("role","group"),n.setAttribute("aria-labelledby","attPrompt"),i=this.flyoutData.common.domain,t.next=9,this.parseInfo(i);case 9:if(!((a=t.sent)&&a.isCouponAttained&&a.lastAttainableCoupon)||a.referenceCoupon){t.next=15;break}this.populateCouponAttained(a.lastSavings,n),this.recordViewed(!0,a.lastAttainableCoupon),t.next=23;break;case 15:if(!(a&&a.referenceCoupon&&this.lockedCoupons.length>0)){t.next=21;break}this.populateAttainableCoupon(a.referenceCoupon,a.referenceSavings,a.lastAttainableCoupons,i,n),this.createInfoTooltip(n,a.referenceCoupon,a.referenceSavings),this.recordViewed(!1,a.referenceCoupon),t.next=23;break;case 21:return Ye("attainableCouponDisplayed","false"),t.abrupt("return",Promise.resolve(null));case 23:Ye("attainableCouponDisplayed","true"),e.prepend(n);case 25:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"recordViewed",value:function(t,e){var n=new _(A.ModuleViewed,void 0,void 0,void 0,e),i=t?ss.COUPON_ATTAINED:ss.ATTAINABLE_COUPONS;this.pageHandlerModule.RecordAsContentViewed(i),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(i),n)}},{key:"populateCouponAttained",value:function(e,n){var i,o,a,r=this.utilities.createElement("p");r.id="attPrompt";var s=this.flyoutData.strings.attFlyoutUnlocked,l=Dl.GetMarket(null===(i=this.flyoutData.dataStoreModule.ApiData)||void 0===i?void 0:i.market,null===(o=this.flyoutData.dataStoreModule.ApiData)||void 0===o||null===(a=o.retailerData)||void 0===a?void 0:a.exclusiveMarket),c=t.GetSavingsString(e,l),u=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});u.textContent=c,this.utilities.populateSingleChildHtml(r,s,u),n.append(r)}},{key:"populateAttainableCoupon",value:function(e,n,i,o,a){var r,s,l,c,u,d=this.utilities.createElement("img");if(d.id="attLock",d.src=this.flyoutData.common.resourcesEndpoint+"common/Lock.png",d.setAttribute("aria-hidden","true"),a.append(d),void 0===e||void 0===n)return Promise.resolve(null);var h=new Date;i[o]={referenceCoupon:e,timestamp:h},Ye("lastAttainableCoupon",JSON.stringify(i));var p=this.utilities.createElement("p");p.id="attPrompt";var f=null!==(r=null==e?void 0:e.minimumPurchase)&&void 0!==r?r:null!==(s=null==e?void 0:e.calculatedCutoffPrice)&&void 0!==s?s:0,g=this.flyoutData.strings.attFlyoutLocked,m=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});m.textContent="".concat(Dt.currency).concat(f.toFixed(2)),m.textContent=Dl.replaceStringsPlaceholders(m.textContent);var v=Dl.GetMarket(null===(l=this.flyoutData.dataStoreModule.ApiData)||void 0===l?void 0:l.market,null===(c=this.flyoutData.dataStoreModule.ApiData)||void 0===c||null===(u=c.retailerData)||void 0===u?void 0:u.exclusiveMarket),y=t.GetSavingsString(n,v),C=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});C.textContent=y,this.utilities.populateMultipleChildrenHTML(p,g,m,C),a.append(p)}},{key:"createInfoTooltip",value:function(e,n,i){var o,a,r,s,l,c,u=this,d=Dl.GetMarket(null===(o=this.flyoutData.dataStoreModule.ApiData)||void 0===o?void 0:o.market,null===(a=this.flyoutData.dataStoreModule.ApiData)||void 0===a||null===(r=a.retailerData)||void 0===r?void 0:r.exclusiveMarket),h=null!==(s=t.GetSavingsString(i,d))&&void 0!==s?s:"savings",p=null!==(l=null==n?void 0:n.minimumPurchase)&&void 0!==l?l:null!==(c=null==n?void 0:n.calculatedCutoffPrice)&&void 0!==c?c:0,f="".concat(Dt.currency).concat(p.toFixed(2)),g="".concat(Dt.currency).concat(p.toFixed(2)),m=this.utilities.createElement("div");m.innerHTML=this.assets.getInfoIcon(),m.href="#",m.slot="hover-anchor";var v=this.utilities.createElement("msft-shopping-tooltip");v.id="header-tooltip",v.style.alignSelf="center",v.style.marginLeft="4px",v.style.marginTop="2px",v.header=this.utilities.replaceValueInKey("attTooltipHeader",this.flyoutData.strings.attTooltipHeader,h,f),v.header=Dl.replaceStringsPlaceholders(v.header),v.content=this.utilities.replaceValueInKey("attTooltipText",this.flyoutData.strings.attTooltipText,g),v.content=Dl.replaceStringsPlaceholders(v.content),v.addEventListener("hover",(function(){u.utilities.setupTooltip(v);var t=new Yr(E.AttainableInfoIcon);u.pageHandlerModule.RecordAsUserAction(is.ATTAINABLE_COUPON_CLICK),u.logModule.LogInfoEvent(S.ButtonClick,"Attainable coupon info viewed",t)})),v.append(m),e.append(v)}},{key:"parseInfo",value:(n=e(o().mark((function e(n){var i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T,D,k=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageHandlerModule.GetStorageValue("CartValues").then((function(t){var e;if(null!=t&&null!==(e=t.value)&&void 0!==e&&e.stringValue)try{var i=JSON.parse(null==t?void 0:t.value.stringValue)[n].cartValue;k.cartValue=i.OrderTotal}catch(t){return{}}}));case 2:i=!1,e.prev=3,l=ze("lastAttainableCoupon"),s=l?JSON.parse(l):{},this.cartValue>0&&s&&(f=null!==(c=s[n])&&void 0!==c?c:{},a=f.referenceCoupon,g=null!==(u=null===(d=a)||void 0===d?void 0:d.minimumPurchase)&&void 0!==u?u:null!==(h=null===(p=a)||void 0===p?void 0:p.calculatedCutoffPrice)&&void 0!==h?h:0,a&&(i=g<this.cartValue,r=t.GetSavingsAmount(a.shortHeader))),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",{});case 13:this.updateLockedCoupons(this.cartValue),m=75,b=hs(this.lockedCoupons);try{for(b.s();!(S=b.n()).done;)A=S.value,T=t.GetSavingsAmount(A.shortHeader),D=null!==(x=A.minimumPurchase)&&void 0!==x?x:null!==(E=A.calculatedCutoffPrice)&&void 0!==E?E:0,C=t.ShouldPromoteAttainableCoupon(T,this.cartValue,D),A.successRate&&A.successRate>m&&C&&(v=A,y=T,m=A.successRate)}catch(t){b.e(t)}finally{b.f()}return e.abrupt("return",{isCouponAttained:i,lastAttainableCoupon:a,lastAttainableCoupons:s,lastSavings:r,referenceCoupon:v,referenceSavings:y});case 18:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(t){return n.apply(this,arguments)})},{key:"addLockIcon",value:function(e,n){var i,o,a=this.flyoutData.common.domain,r=Ke("attainableCouponMap"),s=null!==(i=null==e?void 0:e.minimumPurchase)&&void 0!==i?i:null!==(o=null==e?void 0:e.calculatedCutoffPrice)&&void 0!==o?o:0;if(t.IsAttainableCoupon(e,this.cartValue)){n.hasIcon=!0;var l=this.utilities.createElement("div");l.innerHTML=this.assets.getLockIcon(),l.slot="icon";var c=l.querySelector("path");if(this.flyoutData.common.currentTheme===xt.Dark&&c&&(c.style.fill="#FFFFFF"),n.append(l),!this.attainableCouponList.includes(e.couponCode)){this.attainableCouponList.push(e.couponCode);var u=new Date;r[a]={attainableCouponList:this.attainableCouponList,timestamp:u},Ye("attainableCouponMap",JSON.stringify(r))}}else if(this.attainableCouponList.includes(e.couponCode)&&s<this.cartValue){n.hasIcon=!0,n.regularColors=!0;var d=this.utilities.createElement("div");d.innerHTML=this.assets.getUnlockedIcon(),d.slot="icon";var h=d.querySelector("path");this.flyoutData.common.currentTheme===xt.Dark&&h&&(h.style.fill="#FFFFFF"),n.append(d)}}},{key:"updateLockedCoupons",value:function(t){var e;if(null!==(e=this.flyoutData.dataStoreModule.CouponData)&&void 0!==e&&e.Coupons){var n,i,o=hs(null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Coupons);try{for(o.s();!(i=o.n()).done;){var a,r,s=i.value,l=null!==(a=s.minimumPurchase)&&void 0!==a?a:null!==(r=s.calculatedCutoffPrice)&&void 0!==r?r:0;l&&l>t&&s.shortHeader&&this.lockedCoupons.push(s)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"hasOnlyAttainableCoupons",value:function(){var e,n,i,o=this,a=null!==(e=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Coupons)&&void 0!==e?e:[];if(this.lastAttainableCoupon||(null===(i=this.attainableCouponList)||void 0===i?void 0:i.length)>0){var r=a.filter((function(e){var n;return!(t.IsAttainableCoupon(e,o.cartValue)||null!==(n=o.attainableCouponList)&&void 0!==n&&n.includes(e.couponCode)||o.lastAttainableCoupon&&o.lastAttainableCoupon.couponCode===e.couponCode)}));return r.length<1}return!1}},{key:"isCouponAttained",value:function(){var t,e,n,i;return!!this.lastAttainableCoupon&&(null!==(t=null===(e=this.lastAttainableCoupon)||void 0===e?void 0:e.minimumPurchase)&&void 0!==t?t:null!==(n=null===(i=this.lastAttainableCoupon)||void 0===i?void 0:i.calculatedCutoffPrice)&&void 0!==n?n:0)<this.cartValue}},{key:"filterAttainableCouponList",value:function(){var e,n,i=this,o=null!==(e=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Coupons)&&void 0!==e?e:[];if(o.length<1)return[];var a=o.filter((function(e){var n,o,a=null!==(n=e.minimumPurchase)&&void 0!==n?n:null!==(o=e.calculatedCutoffPrice)&&void 0!==o?o:0;return t.IsAttainableCoupon(e,i.cartValue)||i.attainableCouponList.includes(e.couponCode)||i.lastAttainableCoupon&&a<i.cartValue&&i.lastAttainableCoupon.couponCode===e.couponCode})),r=o.filter((function(e){var n,o,a=null!==(n=e.minimumPurchase)&&void 0!==n?n:null!==(o=e.calculatedCutoffPrice)&&void 0!==o?o:0;return!(t.IsAttainableCoupon(e,i.cartValue)||i.attainableCouponList.includes(e.couponCode)||i.lastAttainableCoupon&&a<i.cartValue&&i.lastAttainableCoupon.couponCode===e.couponCode)}));return this.sortCoupons(a).concat(this.sortCoupons(r))}},{key:"sortCoupons",value:function(t){return t.sort((function(t,e){var n,i;return(null!==(n=e.successRate)&&void 0!==n?n:0)-(null!==(i=t.successRate)&&void 0!==i?i:0)}))}}],[{key:"IsAttainableCoupon",value:function(t,e){var n,i,o=null!==(n=null==t?void 0:t.minimumPurchase)&&void 0!==n?n:null!==(i=null==t?void 0:t.calculatedCutoffPrice)&&void 0!==i?i:0;return(null==t?void 0:t.shortHeader)&&e&&o>e}},{key:"ShouldPromoteAttainableCoupon",value:function(t,e,n){var i=n&&e?n-e:0;if(!t||i<=0)return!1;var o=Number(t.amount);if(t.type.includes("Percent"))o=n*t.amount/100;else if("Amount"!==t.type)return!1;return i<o&&{couponSavings:o,amountToThreshold:i}}},{key:"GetSavingsAmount",value:function(t){if(!t)return null;var e=/(Percentage|Amount)Offer ([0-9]+)/.exec(t);return e&&e[1]&&e[2]?{amount:e[2],type:e[1]}:void 0}},{key:"GetSavingsString",value:function(t,e){if(!t)return null;if(t.type.includes("Percent"))return"".concat(t.amount,"% OFF");if("Amount"===t.type){var n="".concat(Dt.currency).concat(t.amount," OFF");return Dl.replaceStringsPlaceholders(n,e)}return null}}]),t}(),gs=fs,ms=r((function t(){s(this,t),f(this,"BgAutoApplyInProgress",void 0),f(this,"ForegroundApplyingBestCoupon",void 0),f(this,"progressBarStartPos",void 0),f(this,"progressBarEndPos",void 0),f(this,"currentCoupon",void 0),f(this,"currentCouponIndex",void 0),f(this,"couponsTotal",void 0),f(this,"result",void 0)}));function vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var ys=function(t){u(n,t);var e=vs(n);function n(){var t;s(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return f(l(t=e.call.apply(e,[this].concat(o))),"StartTime",void 0),f(l(t),"CouponsApplied",void 0),f(l(t),"ContextID",void 0),f(l(t),"InitialPrice",void 0),f(l(t),"BestCoupon",void 0),f(l(t),"MaxDiscount",void 0),f(l(t),"CouponResults",void 0),f(l(t),"ImpressionId",void 0),f(l(t),"StringifiedMap",void 0),f(l(t),"ImportOptions",void 0),f(l(t),"Currency",void 0),f(l(t),"PageCurrency",void 0),f(l(t),"CashBackActive",void 0),f(l(t),"AppliedCoupon",void 0),f(l(t),"TrueInitialPrice",void 0),f(l(t),"BackgroundAACancelled",void 0),f(l(t),"BackgroundAAStatus",void 0),f(l(t),"SuggestedCoupons",void 0),t}return r(n,[{key:"StringifyMap",value:function(){this.StringifiedMap=JSON.stringify(Array.from(this.CouponsApplied.entries()))}},{key:"ToString",value:function(){return this.StringifyMap(),JSON.stringify(this)}}],[{key:"CreateNew",value:function(t,e){var i=new n(n.fourMinutesExpiryInSeconds);return i.ContextID=t,i.StartTime=Date.now(),i.CouponsApplied=new Map,i.MaxDiscount=0,i.CouponResults=[],i.BackgroundAAStatus=new ms,e&&(i.ImpressionId=e),i}},{key:"CreateFromObject",value:function(t){if(t&&null!==t.ContextID&&void 0!==t.ContextID){var e=n.CreateNew(t.ContextID);if(t.StringifiedMap)JSON.parse(t.StringifiedMap).forEach((function(t){var n=t[0],i=t[1];e.CouponsApplied.set(n,i)}));return t.BestCoupon&&(e.BestCoupon=t.BestCoupon),null!==t.InitialPrice&&void 0!==t.InitialPrice&&(e.InitialPrice=t.InitialPrice),null!==t.MaxDiscount&&void 0!==t.MaxDiscount&&(e.MaxDiscount=t.MaxDiscount),t.CouponResults&&(e.CouponResults=t.CouponResults),t.ImpressionId&&(e.ImpressionId=t.ImpressionId),t.ImportOptions&&(e.ImportOptions=t.ImportOptions),t.CashBackActive&&(e.CashBackActive=t.CashBackActive),t.Currency&&(e.Currency=t.Currency),t.PageCurrency&&(e.PageCurrency=t.PageCurrency),t.StartTime&&(e.StartTime=t.StartTime),t.AppliedCoupon&&(e.AppliedCoupon=t.AppliedCoupon),t.TrueInitialPrice&&(e.TrueInitialPrice=t.TrueInitialPrice),t.BackgroundAACancelled&&(e.BackgroundAACancelled=t.BackgroundAACancelled),t.BackgroundAAStatus&&(e.BackgroundAAStatus=t.BackgroundAAStatus),t.SuggestedCoupons&&(e.SuggestedCoupons=t.SuggestedCoupons),e}return null}}]),n}(Qt);f(ys,"fourMinutesExpiryInSeconds",480);var Cs=function(){function t(e){var n,i;s(this,t),f(this,"clarityEnabled",!1),null!==(n=e.experimentData)&&void 0!==n&&n.isExperimentActive(Be.clarity||(null===(i=e.experimentData)||void 0===i?void 0:i.isExperimentActive(Be.clarityWithCookies)))&&(this.clarityEnabled=!0)}var n,i;return r(t,[{key:"WaitForClarityToLoad",value:(i=e(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:if(window.hasOwnProperty(t.clarityKey)){e.next=6;break}return e.next=4,new Promise((function(t){setTimeout(t,1e3)}));case 4:e.next=1;break;case 6:case 7:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}],[{key:"CreateInstance",value:function(e){t.instance=new t(e)}},{key:"SetTag",value:(n=e(o().mark((function e(n,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.instance&&i&&t.instance.clarityEnabled&&t.instance.WaitForClarityToLoad().then((function(){window[t.clarityKey]("set",n,i)}));case 1:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"ReportClientInfo",value:function(e,n,i){t.reportedClientContextInfo||(t.SetTag(t.TAGNAME_CLIENTNAME,e),t.SetTag(t.TAGNAME_JSVERSION,n),t.SetTag(t.TAGNAME_EDGEVERSION,i),t.reportedClientContextInfo=!0)}}]),t}();f(Cs,"TAGNAME_DOMAIN","domain"),f(Cs,"TAGNAME_FLIGHT","flight"),f(Cs,"TAGNAME_VIEW","view"),f(Cs,"TAGNAME_CLIENTNAME","appinfoclientname"),f(Cs,"TAGNAME_JSVERSION","jsversion"),f(Cs,"TAGNAME_EDGEVERSION","edgeversion"),f(Cs,"clarityKey","clarity"),f(Cs,"instance",void 0),f(Cs,"reportedClientContextInfo",!1);var bs=Cs,Ss=r((function t(e,n,i){s(this,t),f(this,"AppInfoClientName",void 0),f(this,"JSVersion",void 0),f(this,"BuildVersion",void 0),this.AppInfoClientName=e,this.JSVersion=n,this.BuildVersion=i,bs.ReportClientInfo(e,n,i)})),xs=function(){function t(){s(this,t)}return r(t,null,[{key:"GetBuildVersion",value:function(){try{var t=navigator.userAgent.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);if(t&&t.length>1&&t[0]&&t[0].length>4)return t[0].substr(4)}catch(t){}}},{key:"CompareBuildVersions",value:function(t,e){if(t&&e){var n=t.split("."),i=e.split(".");if(4!==n.length||4!==i.length)return;for(var o=0;o<4;o++){var a=parseInt(n[o],10),r=parseInt(i[o],10);if(a>r)return 1;if(r>a)return-1}return 0}}},{key:"IsOtherSellersExpActive",value:function(t,e){return"walmart.com"===e||t.isExperimentActive(Be.showAmazonOtherSellers)}}]),t}();var Es,As;!function(t){t.Confirmation="confirmation",t.Activated="activated",t.Landing="landing",t.Search="search",t.Category="category",t.PDP="pdp"}(Es||(Es={})),function(t){t.ClippingGrocery="ClippingGrocery",t.GroceryNoClipping="GroceryNoClipping",t.Clipping="Clipping",t.GiftCard="GiftCard",t.SaveExclusiveCoupons="SaveExclusiveCoupons",t.GroceryCashback="GroceryCashback",t.Grocery="Grocery",t.OtherSellers="OtherSellers",t.NoRetailerData="NoRetailerData",t.FailUpdateCheckoutPage="FailUpdateCheckoutPage",t.NoCheckoutPageUrl="NoCheckoutPageUrl",t.NoPDPPage="NoPDPPage",t.NotGiftCard="NotGiftCard",t.NotGroceries="NotGroceries",t.IsPageValid="IsPageValid",t.NoPinterestDeals="NoPinterestDeals",t.PinterestDeals="PinterestDeals",t.NoExclusiveCoupons="NoExclusiveCoupons",t.NoSelectors="NoSelectors",t.FallbackValidation="FallbackValidation",t.FallbackError="FallbackError",t.NoCoupons="NoCoupons",t.DisableAutoOpen="DisableAutoOpen",t.PageBecameValid="PageBecameValid",t.CheckingOtherSellers="CheckingOtherSellers",t.AutosMarketplace="AutosMarketplace",t.TrendingDealsChina="TrendingDealsChina",t.SuggestedCouponsOnlyPage="SuggestedCouponsOnlyPage"}(As||(As={}));var Ts=r((function t(){s(this,t)}));f(Ts,"ruleBasedTriggerDataKey","RuleBasedTriggerData"),f(Ts,"defaultCouponExpectationWeight",2),f(Ts,"positiveEngagementWeight",3),f(Ts,"isSpiritedShopperWeight",1),f(Ts,"mlAutoApplyWeight",3),f(Ts,"scoreThreshold",.4),f(Ts,"noPreviousUserDataAutoOpenRate",.7),f(Ts,"noPreviousUserDataAlwaysOpenCouponExpectation",.5),f(Ts,"mlFirstHighConfidenceRange",.3),f(Ts,"mlSecondHighConfidenceRange",.7),f(Ts,"minEngagementCount",2);var Ds;!function(t){t.GetBoxValue="GetBoxValue",t.GetCurrentCheckoutPage="GetCurrentCheckoutPage",t.BetterInitialPrice="BetterInitialPrice",t.CheckoutPageWithoutCoupons="CheckoutPageWithoutCoupons",t.AutoApplyWithoutCoupons="AutoApplyWithoutCoupons",t.AutoApplyWithoutCheckout="AutoApplyWithoutCheckout",t.RemoveCouponFailure="RemoveCouponFailure",t.ApplyButtonUndefined="ApplyButtonUndefined",t.InputUndefined="InputUndefined",t.GetAppliedCoupon="GetAppliedCoupon",t.CouponClippingFailed="CouponClippingFailed",t.OtherSellerFailed="OtherSellerFailed",t.ContinueButtonUndefined="ContinueButtonUndefined",t.ECIframeResponseNotReceived="ECIframeResponseNotReceived",t.ECFrameNameUndefined="ECFrameNameUndefined",t.ECFrameOriginMisMatch="ECFrameOriginMisMatch",t.ExpressCheckoutBNPLFailed="ExpressCheckoutBNPLFailed",t.ErrorParsingBackgroundAutoApplyState="ErrorParsingBackgroundAutoApplyState",t.ExpiredBackgroundAAState="ExpiredBackgroundAAState",t.GetSuggestedCoupon="GetSuggestedCoupon",t.UndefinedState="UndefinedState",t.DomainDisabled="DomainDisabled",t.BackgroundAAError="BackgroundAAError",t.BackgroundAAPDPDisabled="BackgroundAAPDPDisabled",t.SavingsFoundTransactionFailure="SavingsFoundTransactionFailure",t.ApplyButtonDisabled="ApplyButtonDisabled",t.ContinueButtonDisabled="ContinueButtonDisabled"}(Ds||(Ds={}));var ks,Is,ws,Ps,Os;!function(t){t.CheckoutPageValidationError="CheckoutPageValidationError",t.LogScriptTelemetry="LogScriptTelemetry",t.PageStatus="PageStatus",t.CheckoutPageGMV="CheckoutPageGMV",t.ExpressCheckoutPageGMV="ExpressCheckoutPageGMV",t.CheckoutPageValidationStatus="CheckoutPageValidationStatus",t.PurchaseCompleted="PurchaseCompleted",t.SetStorageValue="SetStorageValue",t.GuestDomain="GuestDomain",t.BackgroundAutoApplyStateValid="BackgroundAutoApplyStateValid",t.PlatformExpansionDomain="PlatformExpansionDomain",t.UpdateAddressBar="UpdateAddressBar",t.RecordShoppingUserEngagement="RecordShoppingUserEngagement",t.RecordShoppingUserAction="RecordShoppingUserAction",t.GetCashBack="GetCashBack"}(ks||(ks={})),function(t){t.CouponClipping="18"}(Is||(Is={})),function(t){t.CouponClipping="31"}(ws||(ws={})),function(t){t.AutoShowAvailable="AutoShowAvailable"}(Ps||(Ps={})),function(t){t[t.COUPONS_CLIPPING=0]="COUPONS_CLIPPING",t[t.OTHER_SELLERS=1]="OTHER_SELLERS",t[t.OTHER_SELLERS_CONFIRMATION=2]="OTHER_SELLERS_CONFIRMATION",t[t.EXCLUSIVE_COUPONS=3]="EXCLUSIVE_COUPONS",t[t.OTHER_SELLERS_TRIGGER=4]="OTHER_SELLERS_TRIGGER",t[t.ATTAINABLE_COUPONS=5]="ATTAINABLE_COUPONS",t[t.REWARDS_GIFT_CARD=6]="REWARDS_GIFT_CARD",t[t.PRINT_GROCERY=7]="PRINT_GROCERY",t[t.GROCERY_ITEMIZED_CASHBACK=8]="GROCERY_ITEMIZED_CASHBACK",t[t.AUTOS_MARKETPLACE=9]="AUTOS_MARKETPLACE",t[t.SHOPRUNNER=10]="SHOPRUNNER"}(Os||(Os={}));var Rs=r((function t(){s(this,t),f(this,"blockedList",void 0),f(this,"paths",void 0),this.blockedList=[],this.paths=new Map})),Ms=r((function t(){s(this,t),f(this,"blockedListPath",void 0)})),Ns=function(){function t(e,n,i,o,a,r,l,c){if(s(this,t),f(this,"domainName",void 0),f(this,"currentPath",void 0),f(this,"impressionId",void 0),f(this,"autoOpenDataStr",void 0),f(this,"domainData",void 0),f(this,"autoOpenData",void 0),f(this,"lastCleanedData",void 0),f(this,"sendErrorMessage",void 0),f(this,"sendStorageMessage",void 0),f(this,"totalPrice",void 0),f(this,"caller",void 0),this.caller=c,this.impressionId=i,this.domainName=o,this.currentPath=a,this.autoOpenDataStr=r,this.sendErrorMessage=e,this.sendStorageMessage=n,this.autoOpenDataStr)try{this.autoOpenData=JSON.parse(this.autoOpenDataStr,le.ParseMap),this.autoOpenData.value&&(this.autoOpenData=JSON.parse(this.autoOpenData.value,le.ParseMap)),this.autoOpenData&&(this.domainData=this.autoOpenData.get(o),this.domainData||(this.domainData=new Rs))}catch(t){this.autoOpenData=new Map,this.sendErrorMessageHandler("AutoOpenController constructor "+t);var u=JSON.stringify(this.autoOpenData,le.StringifyMap);this.sendStorageMessage(jr,u)}else this.autoOpenData=new Map,this.domainData=new Rs;l&&"{}"!==l&&(this.lastCleanedData=JSON.parse(l,le.ParseMap))}return r(t,[{key:"setTotalPrice",value:function(t){this.totalPrice=t}},{key:"updateTotalPriceInStorage",value:function(t){var e,n;(this.totalPrice=t,null!==(e=this.domainData)&&void 0!==e&&e.blockedList)&&this.writeToList(null===(n=this.domainData)||void 0===n?void 0:n.blockedList,Fe.AUTO_SHOW_COUPONS_CHECKOUT)}},{key:"canAutoOpenForPageValidation",value:function(t){var e=this.convertPageValidation(t);return null===e||this.canAutoOpenForPopupOrigination(e)}},{key:"convertPageValidation",value:function(t){switch(t){case Os.ATTAINABLE_COUPONS:return Fe.AUTO_SHOW_ATTAINABLE_COUPONS;case Os.COUPONS_CLIPPING:return Fe.AUTO_SHOW_COUPONS_CLIPPING;case Os.EXCLUSIVE_COUPONS:return Fe.AUTO_SHOW_EXCLUSIVE_COUPONS;case Os.OTHER_SELLERS:case Os.OTHER_SELLERS_CONFIRMATION:case Os.OTHER_SELLERS_TRIGGER:return Fe.AUTO_SHOW_OTHER_SELLERS;case Os.PRINT_GROCERY:return Fe.AUTO_SHOW_RECOMMENDATIONS;case Os.REWARDS_GIFT_CARD:return Fe.AUTO_SHOW_GIFT_CARD;case Os.GROCERY_ITEMIZED_CASHBACK:return Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK;case Os.AUTOS_MARKETPLACE:return Fe.AUTO_SHOW_AUTOS_MARKETPLACE;default:return this.sendErrorMessageHandler("ConvertPageValidation: unknown enum "+t),null}}},{key:"canAutoOpenForPopupOrigination",value:function(t){if(!this.autoOpenDataStr)return!0;if(!this.domainData)return!0;if(this.shouldBlockForDomain(t))return this.isPopupOriginationBlocked(this.domainData.blockedList,t);try{this.domainData.paths.get(this.currentPath)||this.domainData.paths.set(this.currentPath,new Ms);var e=this.domainData.paths.get(this.currentPath);return e?this.isPopupOriginationBlocked(e.blockedListPath,t):(this.sendErrorMessageHandler("auto open controller: pathData undefined"),!0)}catch(t){return!0}}},{key:"updateLocalStorage",value:function(t,e){if(this.autoOpenDataStr||this.addDomainToLocalStorage(t),this.domainData)if(this.shouldBlockForDomain(t))this.updatePopupOriginationList(this.domainData.blockedList,t,e);else{this.domainData.paths.get(this.currentPath)||this.domainData.paths.set(this.currentPath,new Ms);var n=this.domainData.paths.get(this.currentPath);n?this.updatePopupOriginationList(n.blockedListPath,t,e):this.sendErrorMessageHandler("auto open controller: pathData undefined")}else this.addDomainToLocalStorage(t)}},{key:"cleanLocalStorage",value:function(){var t=this;try{this.lastCleanedData||(this.lastCleanedData=new Map),this.autoOpenData.forEach((function(e,n){var i=t.lastCleanedData.get(n);if(i){if(!(void 0!==i&&Date.now()-i<6048e5)){var o=!1,a=!1,r=e;if(r.blockedList&&r.blockedList.length>0){var s=r.blockedList,l=t.cleanList(s);l&&l.length>0?(o=!0,r.blockedList=l):r.blockedList=[]}if(r.paths&&r.paths.forEach((function(e,n){if(e){var i=e.blockedListPath,o=t.cleanList(i);o&&o.length>0?(a=!0,e.blockedListPath=o,r.paths.set(n,e)):r.paths.delete(n)}})),a||o){t.autoOpenData.set(n,r),t.lastCleanedData.set(n,Date.now());var c=JSON.stringify(t.lastCleanedData,le.StringifyMap);t.sendStorageMessage(qr,JSON.stringify({value:c}))}else t.autoOpenData.delete(n)}}else{t.lastCleanedData.set(n,Date.now());var u=JSON.stringify(t.lastCleanedData,le.StringifyMap);t.sendStorageMessage(qr,JSON.stringify({value:u}))}}));var e=JSON.stringify({value:JSON.stringify(this.autoOpenData,le.StringifyMap)});this.sendStorageMessage(jr,e)}catch(t){this.sendErrorMessageHandler("auto open controller: "+t)}}},{key:"cleanList",value:function(t){var e=this,n=[];if(t&&t.length>0){var i=[];t.forEach((function(t){Date.now()-t.timeLastAutoOpen>=e.getSnoozeTime(t,!0)&&i.push(t.popupOrigination)})),n=t.filter((function(t){return!i.includes(t.popupOrigination)}))}return n}},{key:"shouldBlockForDomain",value:function(t){return t===Fe.AUTO_SHOW_COUPONS_CHECKOUT||t===Fe.AUTO_SHOW_GIFT_CARD||t===Fe.AUTO_SHOW_RECOMMENDATIONS}},{key:"isPopupOriginationBlocked",value:function(t,e){var n=-1;if(t&&(n=null==t?void 0:t.findIndex((function(t){return t.popupOrigination===e}))),-1!==n&&t){var i=t[n],o=Date.now(),a=this.getSnoozeTime(i,!1);if(-1===a){var r=t.filter((function(t){return t.popupOrigination!==e}));return this.writeToList(r,e),!0}return o-i.timeLastAutoOpen>=a}return!0}},{key:"updatePopupOriginationList",value:function(t,e,n){var i,o=-1;t&&(o=null===(i=t)||void 0===i?void 0:i.findIndex((function(t){return t.popupOrigination===e})));if(-1!==o&&t){var a=t[o];a.timeLastAutoOpen=Date.now(),n&&(a.snoozeTime=n),t[o]=a,this.writeToList(t,e)}else{var r=new Xr;r.popupOrigination=e,r.timeLastAutoOpen=Date.now(),n&&(r.snoozeTime=n),t||(t=[]),t.push(r),this.writeToList(t,e)}}},{key:"getSnoozeTime",value:function(t,e){return t.snoozeTime?t.snoozeTime:this.shouldBlockForDomain(t.popupOrigination)?t.popupOrigination===Fe.AUTO_SHOW_COUPONS_CHECKOUT?t.totalPrice&&t.totalPrice!==this.totalPrice&&!e?-1:288e5:t.popupOrigination===Fe.AUTO_SHOW_GIFT_CARD||t.popupOrigination===Fe.AUTO_SHOW_RECOMMENDATIONS?6048e5:0:864e5}},{key:"addDomainToLocalStorage",value:function(t){if(this.domainData){var e=[];if(this.shouldBlockForDomain(t)&&this.domainData&&this.domainData.blockedList)e=this.domainData.blockedList;else{var n,i=null===(n=this.domainData)||void 0===n?void 0:n.paths.get(this.currentPath);i||(this.domainData||(this.domainData=new Rs),i=new Ms,this.domainData.paths.set(this.currentPath,i)),e=i.blockedListPath}this.updatePopupOriginationList(e,t)}else{var o=new Rs,a=new Map;if(this.shouldBlockForDomain(t))this.updatePopupOriginationList(o.blockedList,t);else{var r=new Ms;a.set(this.currentPath,r),this.updatePopupOriginationList(r.blockedListPath,t)}}}},{key:"writeToList",value:function(t,e){if(this.domainData){if(this.shouldBlockForDomain(e)){if(this.domainData.blockedList=t,e===Fe.AUTO_SHOW_COUPONS_CHECKOUT&&this.totalPrice){var n=this.domainData.blockedList.findIndex((function(t){return t.popupOrigination===Fe.AUTO_SHOW_COUPONS_CHECKOUT}));-1!==n&&(this.domainData.blockedList[n].totalPrice=this.totalPrice)}}else{var i=this.domainData.paths.get(this.currentPath);i||(i=new Ms),i.blockedListPath=t,this.domainData.paths.set(this.currentPath,i)}this.autoOpenData.set(this.domainName,this.domainData);var o=JSON.stringify({value:JSON.stringify(this.autoOpenData,le.StringifyMap)});this.sendStorageMessage(jr,o)}}},{key:"sendErrorMessageHandler",value:function(t){this.caller===W.Flyout||W.Driver?this.sendErrorMessage(t):this.sendErrorMessage(this.impressionId,t)}}],[{key:"SendAutoOpenMessage",value:function(t,e){window.autoOpenControllerScriptRuntime.postMessageToHost(t,e)}}]),t}(),Ls=Ns,_s=r((function t(){s(this,t),f(this,"negativeEngagementCount",void 0)})),Fs=function(){function t(){s(this,t),f(this,"boolValue",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.boolValue=e.boolValue,n}},{key:"CreateFromBool",value:function(e){var n=new t;return n.boolValue=e,n}}]),t}(),Hs=Fs,Bs=function(){function t(){s(this,t),f(this,"nullValue",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.nullValue=e.nullValue,n}}]),t}(),Us="feedbackOptionCouponsDontWork",Vs="feedbackOptionTooFrequently",Gs="feedbackOptionIncorrectInfo",Ws="feedbackOptionUntrustworthy",$s="feedbackOptionAutofillDontWork",zs="feedbackOptionTookTooMuchTime",Ks="feedbackOptionOthers",Ys="UserEngagementData",js=new Map([[Us,5],[Vs,3],[Gs,3],[Ws,2],[$s,5],[zs,4],[Ks,2]]),qs=r((function t(){s(this,t)}));f(qs,"dislikeDefaultWeight",4),f(qs,"likeWeight",4),f(qs,"autoApplyWeight",3),f(qs,"selectCouponWeight",1),f(qs,"seeMoreCouponsWeight",1),f(qs,"dismissWeight",1),f(qs,"manuallyTriggerWeight",1),f(qs,"snoozeBtnWeight",3),f(qs,"doNotShowBtnWeight",3);function Zs(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}}(t,e)||vn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Xs,Js,Qs=r((function t(e,n){s(this,t),f(this,"dtg",void 0),f(this,"minPrice",void 0),this.dtg=e,n&&(this.minPrice=n.minPrice)})),tl=Qs,el=r((function t(e){s(this,t),f(this,"nUrl",void 0),e&&(this.nUrl=e.nUrl)})),nl=r((function t(e,n,i){s(this,t),f(this,"title",void 0),f(this,"imageUrl",void 0),f(this,"currency",void 0),f(this,"extractedImage",void 0),f(this,"base64ProductImage",void 0),this.title=e,this.imageUrl=n,this.currency=i}));function il(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ol(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ol(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){t[t.PRICEDROP=0]="PRICEDROP",t[t.PRICEINCREASE=1]="PRICEINCREASE",t[t.FAIRPRICE=2]="FAIRPRICE"}(Xs||(Xs={})),function(t){t.NoInsight="NoInsight",t.ShowInsight="ShowInsight"}(Js||(Js={}));var al,rl,sl,ll,cl,ul=function(){function t(e,n,i,o,a){var r,l,c;s(this,t),f(this,"TriggerPriceHistoryAlert",void 0),f(this,"DailyPrices",[]),f(this,"ProductDetails",void 0),f(this,"CurrentPrice",void 0),f(this,"DailyPriceDropPercentage",void 0),f(this,"SourceType",void 0),f(this,"MedianPrice",void 0),f(this,"ShowPriceHistoryInsight",!0),f(this,"PriceHistoryInsightType",void 0),f(this,"PriceHistoryDebug",void 0),this.TriggerPriceHistoryAlert=e.triggerPriceHistoryAlert,this.DailyPriceDropPercentage=null===(r=e.priceHistoryData)||void 0===r?void 0:r.dailyPriceDropPercentage,this.SourceType=null===(l=e.priceHistoryData)||void 0===l?void 0:l.sourceType,this.MedianPrice=null===(c=e.priceHistoryData)||void 0===c?void 0:c.medianPrice,this.PriceHistoryDebug=new el(e.debug),this.DailyPrices=this.getDailyPrices(e,a);var u,d=e.productDetails;(d&&(this.ProductDetails=new nl(d.title,d.imageUrl,d.currency)),this.DailyPrices.length>0)?(this.PriceHistoryInsightType=e.triggerInsight,this.PriceHistoryInsightType&&this.PriceHistoryInsightType===Js.NoInsight||null==(null===(u=e.priceHistoryData)||void 0===u?void 0:u.dailyPriceDropPercentage)?(this.CurrentPrice=n,this.ShowPriceHistoryInsight=!1):this.CurrentPrice=this.DailyPrices[this.DailyPrices.length-1].minPrice):this.CurrentPrice=n;i&&this.ProductDetails&&(this.ProductDetails.base64ProductImage=i),o&&this.ProductDetails&&(this.ProductDetails.extractedImage=o)}return r(t,[{key:"addBase64ProductImage",value:function(t){this.ProductDetails&&(this.ProductDetails.base64ProductImage=t)}},{key:"getDaysDifference",value:function(t,e){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Math.abs(Math.floor((t.getTime()-e.getTime())/864e5))}},{key:"getHoursDifference",value:function(t,e){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),Math.abs((t.getTime()-e.getTime())/36e5)}},{key:"getPriceHistoryType",value:function(){return this.DailyPriceDropPercentage>2?Xs.PRICEDROP:this.DailyPriceDropPercentage<-2?Xs.PRICEINCREASE:Xs.FAIRPRICE}},{key:"checkLastDate",value:function(t){var e=new Date;return Math.floor(e.getTime()-t.getTime())<0?e:t}},{key:"getDailyPrices",value:function(t,e){var n,i,o,a=[],r=null===(n=t.priceHistoryData)||void 0===n?void 0:n.sourceType;if(null!==(i=t.priceHistoryData)&&void 0!==i&&null!==(o=i.dailyPrice)&&void 0!==o&&o.entries()){var s,l=il(t.priceHistoryData.dailyPrice.entries());try{for(l.s();!(s=l.n()).done;){var c=Zs(s.value,2),u=c[0],d=c[1],h=new Date(d.date),p=new Date(h.getTime()+Math.abs(60*h.getTimezoneOffset()*1e3));u===t.priceHistoryData.dailyPrice.length-1&&(p=this.checkLastDate(p));var f=new tl(p,d.priceData);(0===r&&this.isDailyPriceValid(f,e)||0!==r)&&a.push(f)}}catch(t){l.e(t)}finally{l.f()}}return a}},{key:"isDailyPriceValid",value:function(t,e){var n=new Date(2021,4,1),i=new Date(2021,8,24),o={"asos.com":i,"bestbuy.ca":i,"canadiantire.ca":i,"gapcanada.ca":i,"globalindustrial.ca":i,"homedepot.ca":i,"ikea.com":i,"sportchek.ca":i,"target.com":n,"walmart.com":n,"wayfair.ca":i};return!Object.keys(o).find((function(t){return t===e}))||t.dtg>=o[e]}}]),t}(),dl=ul;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Bottom=3]="Bottom"}(al||(al={})),function(t){t.COUPONS_COPIED="COUPONS_COPIED",t.NAVIGATE_TO_RETAILER="NAVIGATE_TO_RETAILER",t.TRY_ALL_COUPONS="TRY_ALL_COUPONS",t.SHOW_MORE_SELLERS="SHOW_MORE_SELLERS",t.REBATES_LEARN_MORE="REBATES_LEARN_MORE",t.REBATES_ACCOUNT="REBATES_ACCOUNT",t.REBATES_HISTORY="REBATES_HISTORY",t.ACTIVATE_CASHBACK="ACTIVATE_CASHBACK",t.EXPAND_GRAPH="EXPAND_GRAPH",t.VIEW_PRICE_HISTORY="VIEW_PRICE_HISTORY",t.COUPONS_COPIED_AUTOFILL="COUPONS_COPIED_AUTOFILL",t.TRY_ALL_COUPONS_AUTOFILL="TRY_ALL_COUPONS_AUTOFILL",t.NAVIGATE_TO_DEAL_OFFER="NAVIGATE_TO_DEAL_OFFER",t.NAVIGATE_TO_PROFESSIONAL_REVIEW="NAVIGATE_TO_PROFESSIONAL_REVIEW",t.NAVIGATE_TO_VIDEO_REVIEW="NAVIGATE_TO_VIDEO_REVIEW",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.OPEN_FLYOUT="OPEN_FLYOUT",t.NAVIGATE_TO_RECOMMENDED_OFFER="NAVIGATE_TO_RECOMMENDED_OFFER",t.CLIP_COUPON="CLIP_COUPON",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.PRODUCT_HISTORY_NAVIGATION="PRODUCT_HISTORY_NAVIGATION",t.NAVIGATE_TO_OTHER_SELLER="NAVIGATE_TO_OTHER_SELLER",t.TIPS_CLICK="TIPS_CLICK",t.REWARDS_SIGNIN_CLICK="REWARDS_SIGNIN_CLICK",t.REWARDS_REDEEM_CLICK="REWARDS_REDEEM_CLICK",t.CASHBACK_OTHERSITES_CLICK="CASHBACK_OTHERSITES_CLICK",t.OPEN_FLYOUT_MICRO_NOTIFICATION="OPEN_FLYOUT_MICRO_NOTIFICATION",t.ZIP_CHECKOUT="ZIP_CHECKOUT",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.YOUTUBE_COUPON_COPIED_HOME="YOUTUBE_COUPON_COPIED_HOME",t.YOUTUBE_COUPON_COPIED_VIDEO="YOUTUBE_COUPON_COPIED_VIDEO",t.YOUTUBE_COUPON_COPIED_RETAILER="YOUTUBE_COUPON_COPIED_RETAILER",t.YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT="YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT",t.YOUTUBE_TRY_ALL_COUPONS="YOUTUBE_TRY_ALL_COUPONS",t.CASHBACK_RETAILER_CLICK="CASHBACK_RETAILER_CLICK",t.ACTIVATE_CASHBACK_RETURNED="ACTIVATE_CASHBACK_RETURNED",t.PRINT_COUPONS_CLICK="PRINT_COUPONS_CLICK",t.SELECT_PRINTABLE_COUPON="SELECT_PRINTABLE_COUPON",t.DIGITAL_GROCERY_COUPONS_CLICK="DIGITAL_GROCERY_COUPONS_CLICK",t.PINTEREST_COUPON_COPIED="PINTEREST_COUPON_COPIED",t.PINTEREST_CASHBACK_ACTIVATED="PINTEREST_CASHBACK_ACTIVATED",t.PINTEREST_VIEW_PRICE_HISTORY="PINTEREST_VIEW_PRICE_HISTORY",t.PACKAGE_TRACKING_EXPAND_SECTION="PACKAGE_TRACKING_EXPAND_SECTION",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_OPT_IN",t.PACKAGE_TRACKING_CARD_CLICKED="PACKAGE_TRACKING_CARD_CLICKED",t.VIEW_AUTOS_MARKETPLACE="VIEW_AUTOS_MARKETPLACE",t.VIEW_AUTOS_PRICE_INSIGHT="VIEW_AUTOS_PRICE_INSIGHT",t.VIEW_AUTOS_HISTORY="VIEW_AUTOS_HISTORY",t.VIEW_AUTOS_VIN_HISTORY="VIEW_AUTOS_VIN_HISTORY",t.SHOPRUNNER_SEEMORE="SHOPRUNNER_SEEMORE",t.SHOPRUNNER_SIGNUP_CLICK="SHOPRUNNER_SIGNUP_CLICK",t.SHOPRUNNER_FLYOUT_EXPAND_SECTION="SHOPRUNNER_FLYOUT_EXPAND_SECTION"}(rl||(rl={})),function(t){t[t.COUPONS_COPIED=0]="COUPONS_COPIED",t[t.NAVIGATE_TO_RETAILER=1]="NAVIGATE_TO_RETAILER",t[t.TRY_ALL_COUPONS=2]="TRY_ALL_COUPONS",t[t.SHOW_MORE_SELLERS=3]="SHOW_MORE_SELLERS",t[t.REBATES_LEARN_MORE=4]="REBATES_LEARN_MORE",t[t.REBATES_ACCOUNT=5]="REBATES_ACCOUNT",t[t.REBATES_HISTORY=6]="REBATES_HISTORY",t[t.ACTIVATE_CASHBACK=7]="ACTIVATE_CASHBACK",t[t.EXPAND_GRAPH=8]="EXPAND_GRAPH",t[t.VIEW_PRICE_HISTORY=9]="VIEW_PRICE_HISTORY",t[t.COUPONS_COPIED_AUTOFILL=10]="COUPONS_COPIED_AUTOFILL",t[t.TRY_ALL_COUPONS_AUTOFILL=11]="TRY_ALL_COUPONS_AUTOFILL",t[t.NAVIGATE_TO_DEAL_OFFER=12]="NAVIGATE_TO_DEAL_OFFER",t[t.NAVIGATE_TO_PROFESSIONAL_REVIEW=13]="NAVIGATE_TO_PROFESSIONAL_REVIEW",t[t.NAVIGATE_TO_VIDEO_REVIEW=14]="NAVIGATE_TO_VIDEO_REVIEW",t[t.EXPRESS_CHECKOUT=15]="EXPRESS_CHECKOUT",t[t.OPEN_FLYOUT=16]="OPEN_FLYOUT",t[t.NAVIGATE_TO_RECOMMENDATION_OFFER=17]="NAVIGATE_TO_RECOMMENDATION_OFFER",t[t.CLIP_COUPON=18]="CLIP_COUPON",t[t.ACTIVATE_CASHBACK_NEW=19]="ACTIVATE_CASHBACK_NEW",t[t.PRODUCT_HISTORY_NAVIGATION=20]="PRODUCT_HISTORY_NAVIGATION",t[t.NAVIGATE_TO_OTHER_SELLER=23]="NAVIGATE_TO_OTHER_SELLER",t[t.TIPS_CLICK=24]="TIPS_CLICK",t[t.REWARDS_SIGNIN_CLICK=25]="REWARDS_SIGNIN_CLICK",t[t.REWARDS_REDEEM_CLICK=26]="REWARDS_REDEEM_CLICK",t[t.CASHBACK_OTHERSITES_CLICK=27]="CASHBACK_OTHERSITES_CLICK",t[t.OPEN_FLYOUT_MICRO_NOTIFICATION=28]="OPEN_FLYOUT_MICRO_NOTIFICATION",t[t.ZIP_CHECKOUT=29]="ZIP_CHECKOUT",t[t.PWILO_NOTIFICATION_PRICE_DROP=30]="PWILO_NOTIFICATION_PRICE_DROP",t[t.YOUTUBE_COUPON_COPIED_HOME=31]="YOUTUBE_COUPON_COPIED_HOME",t[t.YOUTUBE_COUPON_COPIED_VIDEO=32]="YOUTUBE_COUPON_COPIED_VIDEO",t[t.YOUTUBE_COUPON_COPIED_RETAILER=33]="YOUTUBE_COUPON_COPIED_RETAILER",t[t.YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT=34]="YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT",t[t.YOUTUBE_TRY_ALL_COUPONS=35]="YOUTUBE_TRY_ALL_COUPONS",t[t.CASHBACK_RETAILER_CLICK=36]="CASHBACK_RETAILER_CLICK",t[t.ACTIVATE_CASHBACK_RETURNED=37]="ACTIVATE_CASHBACK_RETURNED",t[t.PRINT_COUPONS_CLICK=38]="PRINT_COUPONS_CLICK",t[t.SELECT_PRINTABLE_COUPON=39]="SELECT_PRINTABLE_COUPON",t[t.DIGITAL_GROCERY_COUPONS_CLICK=40]="DIGITAL_GROCERY_COUPONS_CLICK",t[t.PINTEREST_COUPON_COPIED=41]="PINTEREST_COUPON_COPIED",t[t.PINTEREST_CASHBACK_ACTIVATED=42]="PINTEREST_CASHBACK_ACTIVATED",t[t.PINTEREST_VIEW_PRICE_HISTORY=43]="PINTEREST_VIEW_PRICE_HISTORY",t[t.PACKAGE_TRACKING_EXPAND_SECTION=44]="PACKAGE_TRACKING_EXPAND_SECTION",t[t.PACKAGE_TRACKING_OPT_IN=45]="PACKAGE_TRACKING_OPT_IN",t[t.PACKAGE_TRACKING_CARD_CLICKED=46]="PACKAGE_TRACKING_CARD_CLICKED"}(sl||(sl={})),function(t){t[t.POSITIVE=0]="POSITIVE",t[t.NEGATIVE=1]="NEGATIVE"}(ll||(ll={})),function(t){t[t.CURRENT_TAB=0]="CURRENT_TAB",t[t.NEW_FOREGROUND_TAB=1]="NEW_FOREGROUND_TAB",t[t.NEW_BACKGROUND_TAB=2]="NEW_BACKGROUND_TAB",t[t.NEW_WINDOW=3]="NEW_WINDOW",t[t.NEW_IN_PRIVATE_TAB=4]="NEW_IN_PRIVATE_TAB"}(cl||(cl={}));var hl=r((function t(){s(this,t),f(this,"element",void 0),f(this,"name",void 0),f(this,"moduleInterface",void 0)}));function pl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return fl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function fl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var gl='button:enabled:not([slot="header-actions"]), textarea, input[type="text"], input[type="password"], div[role="slider"],\n      input[type="radio"]:checked, input[type="checkbox"]:enabled, a[href]:not([slot="header-actions"]):not(#infoIcon),\n      select:not([style*="display: none"]), details, msft-shopping-coupon, msft-shopping-link, msft-product-card,\n      fluent-button:not([slot="header-actions"]), fluent-anchor:not([class="aHeaderContent"]), msft-shopping-recommendation,\n      fluent-accordion, fluent-option, fluent-listbox, div.tipsDiv, msft-shopping-cashback-card, msft-shopping-coupon-new,\n      div#divHomeNotification, msft-shopping-coupon-printable, div#divExclusiveCouponsNotification, msft-micro-feedback-item,\n      msft-shopping-tooltip, #divPriceHistory svg',ml=function(){function t(){var e=this;s(this,t),f(this,"container",void 0),f(this,"currentFocusElement",void 0),f(this,"isEdgeDriver",!1),f(this,"flyoutData",void 0),f(this,"initialize",(function(t,n,i){e.container=t,e.isEdgeDriver=n,e.flyoutData=i,e.container.addEventListener("keydown",e.trapFocus)})),f(this,"removeListeners",(function(){e.container.removeEventListener("keydown",e.trapFocus)})),f(this,"trapFocus",(function(t){if("Tab"===t.key&&!t.ctrlKey&&e.container){var n=Array.prototype.slice.call(e.container.querySelectorAll('fluent-button[slot="header-actions"], a[slot="header-actions"], button[slot="header-actions"]')),i=Array.prototype.slice.call(e.container.querySelectorAll('#divPinterestSubTitle[slot="header-content"], fluent-anchor[slot="header-content"], fluent-button[slot="header-content"], button[slot="header-content"], div#divExclusiveCouponsNotification, msft-shopping-tooltip#header-tooltip'));n.push.apply(n,i),e.flyoutData&&e.flyoutData.common.openedWith===Tt.Auto&&e.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PRICE_HISTORY&&(gl+=", #divPriceHistorySection");var o=Array.prototype.slice.call(e.container.querySelectorAll(gl));o=o.filter((function(t){return!i.includes(t)})),n.push.apply(n,o),e.isEdgeDriver&&(n=n.filter((function(t){return"fluent-accordion"!==t.nodeName.toLowerCase()&&t.offsetHeight>0}))),e.flyoutData&&e.flyoutData.common.openedWith===Tt.Auto&&(n=n.filter((function(t){return"msft-micro-feedback-item"!==t.nodeName.toLowerCase()})));var a=Array.prototype.slice.call(e.container.querySelectorAll('fluent-anchor[slot="footer"], fluent-button[slot="footer"],\n           button[slot="footer"], #footerDiv fluent-button'));if(n=n.filter((function(t){return!a.includes(t)})),n.push.apply(n,a),n&&n.length>0){var r,s=n[0],l=n[n.length-1],c=pl(n);try{for(c.s();!(r=c.n()).done;){var u=r.value;u.classList.contains("checkoutButton")&&(l=u)}}catch(t){c.e(t)}finally{c.f()}var d=document.activeElement;if(d){if("divOverlayWrapper"===d.id){var h=d.shadowRoot;h&&(d=h.activeElement)}if(d===s&&t.shiftKey){var p,f,g,m,v=null===(p=l)||void 0===p||null===(f=p.parentElement)||void 0===f?void 0:f.shadowRoot;if("previousCashBackSection"===(null===(g=l.parentElement)||void 0===g?void 0:g.id)){var y,C,b=null===(y=l.parentElement)||void 0===y||null===(C=y.parentElement)||void 0===C?void 0:C.shadowRoot;if(b){var S=b.querySelector("fluent-accordion-item");if(S&&!S.classList.contains("expanded")){var x,E=null===(x=S.shadowRoot)||void 0===x?void 0:x.querySelector("button");E&&(E.focus(),v=null)}}}if(v){var A=v.querySelector("fluent-accordion-item");if(A&&!A.classList.contains("expanded")){var T,D=null===(T=A.shadowRoot)||void 0===T?void 0:T.querySelector("button");D&&D.focus()}else l.focus()}else"previousCashBackSection"!==(null===(m=l.parentElement)||void 0===m?void 0:m.id)&&(l.focus(),t.preventDefault())}else d!==l||t.shiftKey||(s.focus(),t.preventDefault())}}}}))}return r(t,[{key:"makeFocusOnActiveElement",value:function(t){var e=this;if(this.currentFocusElement!==document.activeElement){var n=t.querySelectorAll(gl);0!==n.length&&(n.forEach((function(t){document.activeElement!==t||(e.currentFocusElement=t)})),this.currentFocusElement&&this.currentFocusElement.focus())}}}],[{key:"getInstance",value:function(){return null===t.currentInstance&&(t.currentInstance=new t),t.currentInstance}}]),t}();f(ml,"currentInstance",null);var vl=ml,yl=r((function t(e,n){s(this,t),f(this,"userEngagementResults",void 0),f(this,"couponExpectationWeight",void 0),this.userEngagementResults=e,this.couponExpectationWeight=null!=n?n:Ts.defaultCouponExpectationWeight})),Cl=r((function t(){s(this,t),f(this,"positiveEngagementCount",0),f(this,"negativeEngagementCount",0)})),bl=r((function t(){s(this,t),f(this,"positiveEngagementScore",-1),f(this,"totalEngagementsCount",0),this.positiveEngagementScore=-1,this.totalEngagementsCount=0})),Sl=function(){function t(e,n,i){s(this,t),f(this,"storage",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),this.storage=e,this.pageHandlerModule=n,this.logModule=i}var n,i,a,l,c;return r(t,[{key:"addEngagement",value:(c=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p,f,g,m,v,y,C=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=C.length>3&&void 0!==C[3]?C[3]:1,r=C.length>4?C[4]:void 0,t.prev=2,!n&&i&&(n=this.getPopupOriginationFromRenderedModule(i)),n){t.next=11;break}return c="Undefined popup origination in UserEngagementUtilities. RenderedModule: ".concat(i),u=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,c,u),t.abrupt("return");case 11:if(e!==ll.NEGATIVE||r!==E.FlyoutDismiss||!this.storage.PositiveEngagement){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,this.getStorageValueHelper(Ys);case 16:(d=t.sent)&&null!=d&&null!==(s=d.value)&&void 0!==s&&s.stringValue||(h=this.startUserEngagementMap(n));try{(h=JSON.parse(null==d||null===(p=d.value)||void 0===p?void 0:p.stringValue,le.ParseMap))||(h=this.startUserEngagementMap(n))}catch(t){f=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"user engagement map parsing error ".concat(t),f)}return(g=null===(l=h)||void 0===l?void 0:l.get(n.toString()))||(g=new Cl),e===ll.POSITIVE?(g.positiveEngagementCount+=a,this.storage.PositiveEngagement=!0):g.negativeEngagementCount+=a,h.set(n.toString(),g),this.storeUserEngagementMap(h),m=this.getEngagementResults(g),v=new yl(m),t.next=33,this.updateRuleBasedTriggerData(n,v);case 33:t.next=40;break;case 35:t.prev=35,t.t0=t.catch(2),y=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error adding user engagement ".concat(t.t0),y),this.pageHandlerModule.SetStorageValue(Ys,new Bs);case 40:case"end":return t.stop()}}),t,this,[[2,35]])}))),function(t,e,n){return c.apply(this,arguments)})},{key:"increaseCouponExpectationWeight",value:(l=e(o().mark((function t(e,n){var i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e&&n&&(e=this.getPopupOriginationFromRenderedModule(n)),void 0!==e){t.next=8;break}return i=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Undefined popup origination - can't increase coupon expectation weight. renderedModule: ".concat(n),i),t.abrupt("return");case 8:return a=new yl(void 0,Ts.defaultCouponExpectationWeight+2),t.next=11,this.updateRuleBasedTriggerData(e,a);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"getEngagementResults",value:function(t){var e=new bl,n=t.positiveEngagementCount+t.negativeEngagementCount;return e.positiveEngagementScore=t.positiveEngagementCount/n,e.totalEngagementsCount=n,e}},{key:"getStorageValueHelper",value:(a=e(o().mark((function t(e){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.storage){t.next=5;break}i={value:{stringValue:this.storage[e]}},n=i,t.next=8;break;case 5:return t.next=7,this.pageHandlerModule.GetStorageValue(e);case 7:n=t.sent;case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"startUserEngagementMap",value:function(t){var e=new Map,n=new Cl;return e.set(t.toString(),n),e}},{key:"startRuleBasedTriggerMap",value:function(t){var e=new Map,n=new yl(new bl);return e.set(t.toString(),n),e}},{key:"storeUserEngagementMap",value:function(t){if(0===t.size)this.pageHandlerModule.SetStorageValue(Ys,new Bs);else{var e=new ds,n=JSON.stringify(t,le.StringifyMap);e.stringValue=n,this.storage.UserEngagementData=n,this.pageHandlerModule.SetStorageValue(Ys,e)}}},{key:"updateRuleBasedTriggerData",value:(i=e(o().mark((function t(e,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,this.updateLocalStorage(e,n);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),i=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error updating RuleBasedTriggerData for ".concat(e," ").concat(t.t0),i);case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e){return i.apply(this,arguments)})},{key:"updateLocalStorage",value:(n=e(o().mark((function t(e,n){var i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getStorageValueHelper(Ts.ruleBasedTriggerDataKey);case 2:(a=t.sent)&&null!=a&&null!==(i=a.value)&&void 0!==i&&i.stringValue||(r=this.startRuleBasedTriggerMap(e));try{l=JSON.parse(null==a||null===(s=a.value)||void 0===s?void 0:s.stringValue),(r=JSON.parse(l,le.ParseMap))||(r=this.startRuleBasedTriggerMap(e))}catch(t){c=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"rule based trigger map parsing error ".concat(t),c)}return Object.entries(n).forEach((function(t){var n=Zs(t,2),i=n[0],o=n[1];void 0!==o&&(r.get(e.toString())[i]=o)})),u=new ds,d=JSON.stringify(JSON.stringify(r,le.StringifyMap)),u.stringValue=d,this.storage[Ts.ruleBasedTriggerDataKey]=d,this.pageHandlerModule.SetStorageValue(Ts.ruleBasedTriggerDataKey,u),t.t0=console,t.next=17,this.getStorageValueHelper(Ts.ruleBasedTriggerDataKey);case 17:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"getPopupOriginationFromRenderedModule",value:function(t){return t===Rt.COUPON?Fe.AUTO_SHOW_COUPONS_CHECKOUT:t===Rt.PRICEHISTORY?Fe.AUTO_SHOW_PRICE_HISTORY:void 0}}]),t}(),xl=Sl;function El(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Al(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Al(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Al(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Tl=function(){function t(e,n,i,o){s(this,t),f(this,"commonAssets",void 0),f(this,"userEngagementUtilities",void 0),f(this,"flyoutData",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),f(this,"storage",void 0),this.flyoutData=e,this.pageHandlerModule=n,this.logModule=i,this.commonAssets=o,this.storage=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0),this.userEngagementUtilities=new xl(this.storage,this.pageHandlerModule,this.logModule)}var n,i,a,l;return r(t,[{key:"isAndroidBridgeAvailable",value:function(){return!!window.couponsUIWebViewBridge}},{key:"isIOSBridgeAvailable",value:function(){var t=window;return!!t.webkit&&!!t.webkit.messageHandlers}},{key:"IsDarkMode",value:function(){var t=window;return!!(t&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches)}},{key:"createAdsSlug",value:function(){var t=this.createElement("IMG");return t.src=this.flyoutData.common.resourcesEndpoint+"priceComparison/adSlug.png",t.style.marginLeft="8px",t.style.width="22px",t.style.height="14px",t.setAttribute("aria-label","Ad"),t}},{key:"createPrimaryButton",value:function(){var t=this.createElement("fluent-button");return t.setAttribute("appearance","accent"),this.flyoutData.experimentData.isExperimentActive(Be.newStandardStyle)?this.shouldRenderSmallNotification()?t.classList.add(gt.PrimarySmallNotification):t.classList.add(gt.Primary):t.classList.add(gt.PrimaryColor),t}},{key:"createSecondaryButton",value:function(){var t=this.createElement("fluent-button");return t.classList.add(gt.Secondary),t}},{key:"createSimpleOutlineButton",value:function(){var t=this.createElement("fluent-button");return t.classList.add(gt.SimpleOutline),t}},{key:"isPinterest",value:function(){var t,e;return null!==(t=void 0!==(null===(e=this.flyoutData.dataStoreModule.PinterestData)||void 0===e?void 0:e.productLink)&&void 0!==this.flyoutData.common.lastCommittedURL&&null!==this.flyoutData.common.lastCommittedURL&&this.flyoutData.common.lastCommittedURL.includes("pinterest.com/pin"))&&void 0!==t&&t}},{key:"styleModulesHeader",value:function(t,e,n){var i=e.element,o=e.name;if(0===t&&i.expanded){var a=!1,r=this.flyoutData.dataStoreModule.CashBackData;o===Rt.PRODUCTHISTORY||o===Rt.GROCERY_CASHBACK||o===Rt.COUPON&&null!=r&&r.canRenderCashback&&(null==r||!r.isCashBackActivated)||n.classList.contains("isStoryBook")&&!n.classList.contains("isPolePositionStory")||(e.element.hideTitle=!0,a=!0),a&&(o!==Rt.PRODUCTHISTORY||!this.flyoutData.common.isPane)||n.classList.contains("isStoryBook")&&!n.classList.contains("isPolePositionStory")||(i.accordion=!1,i.classList.add("accordionPadding")),i.style.marginTop="0px"}}},{key:"isStoryBookSection",value:function(t){return t.classList.contains("isStoryBook")&&!t.classList.contains("isPolePositionStory")}},{key:"hasSocialSelectors",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData;return!!(e&&e.allCheckoutPages&&e.allCheckoutPages.length>0&&e.allCheckoutPages[0].socialSelectors)}},{key:"createPDPLoadingStateUX",value:function(t,e,n,i){t.id=n,t.accordion=!0,t.expanded=!0;var o=this.createElement("DIV",{style:'\n                display: grid;\n                grid-template-areas:\n                    "img img title title title title"\n                    "img img subTitle subTitle subTitle subTitle"\n                    "content1 content1 content1 content1 content1 content1"\n                    "content2 content2 content2 content2 content2 content2"\n                    "content3 content3 content3 content3 content3 content3";\n                grid-gap: 20px;\n                padding: 0px 2px;\n            '});o.id=e;var a=1;this.flyoutData.common.currentTheme===xt.Dark&&(a=.08);var r=this.createElement("DIV",{style:"\n                grid-area: img;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 100px;\n                opacity: ".concat(a,";\n            ")}),s=this.createElement("DIV",{style:"\n                grid-area: title;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-top: 20px;\n                margin-right: 50px;\n                opacity: ".concat(a,";\n            ")}),l=this.createElement("DIV",{style:"\n                grid-area: subTitle;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-bottom: 20px;\n                margin-right: 50px;\n                opacity: ".concat(a,";\n            ")}),c=this.createElement("DIV",{style:"\n                grid-area: content1;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")}),u=this.createElement("DIV",{style:"\n                grid-area: content2;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")}),d=this.createElement("DIV",{style:"\n                grid-area: content3;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")});o.appendChild(r),o.appendChild(s),o.appendChild(l),o.appendChild(c),o.appendChild(u),o.appendChild(d),t.appendChild(o),setTimeout((function(){var t=document.querySelector("#".concat(e));if(t){var n;null===(n=t.parentElement)||void 0===n||n.remove();var o=new CustomEvent(hn.PDPRemoved,{detail:{moduleName:e.includes("PH")?Rt.PRICEHISTORY:Rt.PRICECOMPARISON}});i.dispatchEvent(o)}}),7e3)}},{key:"addChevronNotificationFooter",value:function(t,e){var n=this.flyoutData.common.currentTheme===xt.Light?"#F7F7F7":"#474747",i=this.createElement("DIV",{style:"height: 11px; background-color: ".concat(n,"; width: 100%; position: relative;")});this.showNewFooter()&&(i.slot="footer"),this.flyoutData.common.shopping.appendChild(i);var o=this.createElement("DIV",{style:"height: 18px; width: 18px; background-color: var(--fill-color); position: absolute;\n            top: -9px; box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.08); border-radius: 100px; display: flex; justify-content: center; align-items: center;\n            left: 134px;"});this.shouldRenderSmallNotification()?(o.style.left="131px",e(),r()):o.style.left="171px";var a=this.createElement("DIV",{style:"display: flex; justify-content: center; animation: updownAnimation 2s ease infinite;"});function r(){i&&i.remove(),t.removeEventListener("mouseover",r),t.removeEventListener("focus",r)}a.innerHTML=this.commonAssets.getChevronIcon(),o.appendChild(a),e&&(o.addEventListener("mouseover",(function(){e(),r()})),o.addEventListener("focus",(function(){e(),r()}))),i.appendChild(o),t.addEventListener("mouseover",r),t.addEventListener("focus",r)}},{key:"addImageSrc",value:function(t,e){var n=this;t.src=e,t.addEventListener("error",(function(){t.src=n.commonAssets.getDefaultProductImage()}))}},{key:"sendCTRLog",value:function(t,e,n,i,o){if("MSFT-EDGE-SHOPPING-SECTION"===t.element.nodeName)if(!t.element.hasAttribute("accordion")||t.element.hasAttribute("expanded")||0===e)this.recordContentViewed(t.name,n,o,0===e,!1);else{t.element.addEventListener("click",(function e(){if(t.element&&!t.element.hasAttribute("expanded")){var i=s(t.name,n,o,!0),c=l(t.name);if(i){a.RecordAsContentViewed(i);var u=new _(A.ModuleViewed,void 0,void 0,void 0,c);r.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(i," expanded"),u,o)}t.element&&t.element.removeEventListener("click",e)}}));var a=this.pageHandlerModule,r=this.logModule,s=this.setContentViewed.bind(this),l=this.getViewedContent.bind(this)}else this.recordContentViewed(t.name,n,o,0===e,!1);if(this.isPinterest()){var c=new _(A.ShownOnPinterest);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Module on top ".concat(i),c)}}},{key:"handleFlyoutFocus",value:function(t,e,n,i){if(this.flyoutData.common.currentDevice===St.Desktop&&n&&(this.flyoutData.common.openedWith===Tt.Keyboard||i)){var o=n.querySelectorAll("[slot=actions]");if(o&&o.length>0)if("DIV"===o[0].nodeName){var a=o[0].querySelectorAll(gl);a&&a.length>0&&a[0].focus()}else o[0].focus();else if(e){var r,s=null===(r=e.element)||void 0===r?void 0:r.querySelectorAll(gl);s&&s.length>0&&s[0].focus()}else if(t&&t.length>0){var l,c=El(t);try{for(c.s();!(l=c.n()).done;){var u=l.value.element.querySelectorAll(gl);if(u&&u.length>0){u[0].focus();break}}}catch(t){c.e(t)}finally{c.f()}}}}},{key:"addCommonStyles",value:function(t,e,n){try{var i,o;(i=e||document.querySelector("fluent-design-system-provider"))&&(this.flyoutData.common.currentTheme===xt.Light?(i.setAttribute("fill-color","#FFFFFF"),Qo.setValueFor(i,So.LightMode)):(i.setAttribute("fill-color","#3b3b3b"),Qo.setValueFor(i,.23)),this.flyoutData.common.currentDirection===At.RTL?i.style.direction="rtl":i.style.direction="ltr",i.setAttribute("aria-label",this.flyoutData.strings.commonFixedTitle)),(o=n||document.querySelector("#divContentWrapper"))&&(this.shouldRenderSmallNotification()?this.applyStyles(o,t.getStyles()+t.getSmallerNotificationCssStyles(),void 0,t.getDarkModeStyles()):this.applyStyles(o,t.getStyles(),void 0,t.getDarkModeStyles()),this.flyoutData.experimentData.isExperimentActive(Be.showPaymentOptions)&&o.classList.add("ms-edge-shopping-650"))}catch(t){var a=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error adding common styles ".concat(t),a)}}},{key:"createElement",value:function(t,e,n){var i=document.createElement(t);if(e)for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);return n&&(i.innerText=n),i}},{key:"createSeeMoreBtnWrapper",value:function(t){var e=document.createElement("div");return e.className="gcSeeMoreBtnWrapper",e.style.height="fir-content",e.style.backgroundColor="#F7F7F7",e.style.padding="8px 13px",e.style.display="flex",e.style.alignItems="center",t.style.height="fit-content",t.textContent="See more",e.appendChild(t),e}},{key:"createCommonListStructure",value:function(t,e,n,i,o,a,r){var s=this,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];l=this.flyoutData.common.isPane;var u=20;this.flyoutData.common.currentDevice===St.Desktop?t.accordion=!0:t.accordion=!1,t.title=e,t.expanded=!1;var d=o(n),h=c?n?yn(n.keys()):null:n;if(h&&h.length>d){var p,f=document.createElement("fluent-button"),g=this.flyoutData.common.isPane;if(f.slot="action",f.className+="action btnSeeMore",l&&g||(f.appearance="lightweight",f.style.backgroundColor="transparent",f.style.padding="0px"),g&&(f.style.fontWeight="400",l?(f.classList.add("newSeeMore"),f.appearance="neutral",t.classList.add("noInlinePadding")):(f.style.height="unset",f.style.marginBottom="14px",f.style.marginInlineStart="6px")),l&&g){var m=this.createElement("DIV");m.style.display="inline-block",m.style.paddingLeft="10px",m.innerHTML=this.commonAssets.getCaretDownIcon(),f.textContent=this.flyoutData.strings.sectionSeeMoreOnly,f.appendChild(m)}else n.length-d>u?f.textContent=this.replaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,"".concat(u,"+")):f.textContent=this.replaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,(n.length-d).toString());if(this.flyoutData.common.currentTheme===xt.Dark?f.style.color="#FFFFFF":f.style.color=this.flyoutData.common.isPane?"#1A1A1A":"#666666",i===Rt.COUPON||i===Rt.RECOMMENDATIONS||i===Rt.GROCERY_COUPON||i===Rt.PRINTABLE_COUPON||i===Rt.EXCLUSIVECOUPONS||i===Rt.CASHBACK||i===Rt.GROCERY_CASHBACK||this.flyoutData.common.isPane)t.appendChild(f);else{var v=this.flyoutData.common.currentTheme===xt.Dark?"linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%)":"linear-gradient(90deg, #FFFBF2 0%, #EEFCFF 53.12%, #F5F9FF 100%)";(p=this.createElement("DIV",{style:"\n                    background: ".concat(v,";\n                    height: 40px;\n                    padding-left: 12px;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    border-top: 1px solid rgb(236, 236, 236);\n                ")})).className="divSeeMore",p.appendChild(f),t.appendChild(p),p&&p.addEventListener("click",(function(e){s.seeMoreClickHandler(e,t,a,p,n,r)}))}f&&f.addEventListener("click",(function(e){p||s.seeMoreClickHandler(e,t,a,f,n,r)}))}else t.style.marginBottom="10px"}},{key:"populateSingleChildHtml",value:function(e,n,i,o){var a,r,s=window.trustedTypes.emptyHTML;e.innerHTML=s;var l=n.split(/\$\d/);if(this.flyoutData.common.isCheckoutPageUsingUrlMatch&&null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&a.isCashbackEstimationSupportedForDomain&&this.pageHandlerModule.TriggerExperiment(Be.cashbackEstimate),1===l.length&&this.flyoutData.experimentData.isExperimentActive(Be.cashbackEstimate)&&this.flyoutData.common.isCheckoutPageUsingUrlMatch&&null!==(r=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==r&&r.isCashbackEstimationSupportedForDomain)l[0]=t.replaceStringsPlaceholders(l[0]),e.textContent=l[0];else{if(l.length>0)if(l[0]=t.replaceStringsPlaceholders(l[0]),e.textContent=l[0],o){var c=this.createElement("DIV",{style:"font-style:normal;font-weight:600;line-height:32px;color:#008A21;"});c.textContent=o.currency+o.cashbackValue,e.appendChild(c)}else e.appendChild(i);if(l.length>1&&l[1]){l[1]=t.replaceStringsPlaceholders(l[1]);var u=document.createTextNode(l[1]);e.appendChild(u)}}}},{key:"populateMultipleChildrenHTML",value:function(e,n){var i=window.trustedTypes.emptyHTML;e.innerHTML=i;for(var o=n.split(/\$\d/),a=o.length,r=arguments.length,s=new Array(r>2?r-2:0),l=2;l<r;l++)s[l-2]=arguments[l];for(var c=0;c<a;c++){if(o[c]=t.replaceStringsPlaceholders(o[c]),0===c)e.textContent=o[c];else{var u=document.createTextNode(o[c]);e.appendChild(u)}c!==a-1&&e.appendChild(s[c])}}},{key:"replaceElementInKey",value:function(t,e,n){var i=e.split("*br*");if(i&&i.length>1){if(i[0].includes("$"))this.populateSingleChildHtml(t,i[0],n);else{var o=this.createElement("P",{style:"margin: 0px; display: inline-block"},i[0]);t.appendChild(o)}var a=this.createElement("BR");if(t.appendChild(a),i[1].includes("$")){var r=this.createElement("DIV");this.populateSingleChildHtml(r,i[1],n),t.appendChild(r)}else{var s=this.createElement("P",{style:"margin: 0px; display: inline-block"},i[1]);t.appendChild(s)}}else this.populateSingleChildHtml(t,e,n)}},{key:"replaceValueInKey",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var a="",r=Array.prototype.slice.call(arguments);return r=r.slice(1),e?a=e=e.replace(/\$(.|$|\n)/g,(function(t){return void 0!==r[t[1]]?"$$"===t?"$":r[t[1]]:"$2"})):a}},{key:"addFavIconSrc",value:function(t,e,n){var i=this.getFavIconSrc(n),o=!0;t.style.maxWidth="16px",t.slot="icon",t.setAttribute("aria-hidden","true"),t.addEventListener("error",(function(){o=!1,t.remove()})),i?t.src=i:o=!1,o&&e.appendChild(t)}},{key:"trapFlyoutFocusMac",value:function(){this.flyoutData.common.isPane||vl.getInstance().initialize(this.flyoutData.common.shopping,!1,this.flyoutData)}},{key:"applyStyles",value:function(t,e,n,i){if(t){var o=this.createElement("STYLE"),a=e,r=window.matchMedia("(prefers-color-scheme: dark)").matches;(this.flyoutData.common.currentTheme===xt.Dark||r)&&(a="".concat(a,"\n").concat(i)),o.textContent=a,o.type="text/css",o.rel="stylesheet",n&&(o.id=n),t.appendChild(o)}}},{key:"addSectionSeparator",value:function(t){var e=this.createElement("HR",{className:"sectionSeparator"});e.setAttribute("aria-hidden","true"),t.appendChild(e)}},{key:"createCookieConsent",value:function(){var t=this,e=this.createElement("DIV",{className:"divCookies",style:"margin: 10px 10px 12px; text-align: left;line-height: 16px; font-size: 12px;"}),n=this.createElement("P",{className:"txtSmall"});if(n.style.display="inline",n.style.fontSize="12px",n.textContent=this.replaceValueInKey("privacyConsent",this.flyoutData.strings.privacyConsent,""),this.flyoutData.dataLoader.IsServerData()){n.textContent=this.replaceValueInKey("privacyConsent",this.flyoutData.strings.privacyConsent,"");var i=document.createElement("fluent-anchor");i.id="thirdPartyConsent",i.setAttribute("href","#"),i.className+=" txtSmall",i.style.fontSize="12px",i.style.verticalAlign="bottom",i.textContent=this.flyoutData.strings.thirdPartCookiesText,i.setAttribute("appearance","lightweight"),i.style.display="inline",this.populateSingleChildHtml(n,this.flyoutData.strings.privacyConsentNew,i),this.flyoutData.dataLoader.IsServerData()&&i&&i.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()}))}var o=document.createElement("fluent-anchor");return o.id="aPrivacy",o.setAttribute("href","#"),o.style.fontSize="12px",o.textContent=this.flyoutData.strings.commonMicrosoftPolicy,o.setAttribute("appearance","hypertext"),o.style.display="inline",n.appendChild(o),e.appendChild(n),o&&o.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()})),e}},{key:"styleModules",value:function(t,e,n){this.styleModulesHeader(e,t,n),this.flyoutData.common.isPane&&(t.moduleLayout===Ft.BLOCK?t.element.classList.add("actionBlock"):t.element.classList.add("actionPane"),t.name!==Rt.PRODUCTHISTORY||n.classList.contains("isStoryBook")&&!n.classList.contains("isPolePositionStory")||(t.element.accordion=!1,t.element.classList.add("accordionPadding")))}},{key:"toFixedSafe",value:function(t,e){return t&&t.toFixed?t.toFixed(e):""}},{key:"formatPrice",value:function(t,e){try{var n;return n=e||this.flyoutData.common.pageLocale,(t%1!=0?new Intl.NumberFormat(n,{maximumFractionDigits:2,minimumFractionDigits:2}).format(t):new Intl.NumberFormat(n).format(t))||t.toFixed(2)}catch(e){return t.toFixed(2)}}},{key:"hideModule",value:function(t,e){return this.flyoutData.common.openedWith===Tt.Auto&&t>0&&!this.flyoutData.common.seeInfoFromPCNotification&&!e.moduleInterface.ShowAlways()}},{key:"appendNewModuleToFlyout",value:function(t){var e=this.flyoutData.common.shopping.querySelectorAll("msft-edge-shopping-section"),n=!1;if(e&&e.length>0&&!this.flyoutData.common.isPane)try{if(1===e.length){var i=this.createElement("HR",{className:"sectionSeparator"});i.setAttribute("aria-hidden","true"),e[0].nextSibling?(this.flyoutData.common.shopping.insertBefore(i,e[0].nextSibling),this.flyoutData.common.shopping.insertBefore(t.element,i.nextSibling),n=!0):(this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),n=!0)}else for(var o=1;o<e.length;o++){var a=e[o];if(null!==a.getAttribute("accordion")){var r,s=this.createElement("HR",{className:"sectionSeparator"});s.setAttribute("aria-hidden","true"),"HR"===(null===(r=a.previousSibling)||void 0===r?void 0:r.nodeName)?(this.flyoutData.common.shopping.insertBefore(s,a.previousSibling),this.flyoutData.common.shopping.insertBefore(t.element,a.previousSibling)):(this.flyoutData.common.shopping.insertBefore(s,a),this.flyoutData.common.shopping.insertBefore(t.element,a)),n=!0}}}catch(e){this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),n=!0}else{var l=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(l){var c=this.createElement("HR",{className:"sectionSeparator"});c.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(c,l),this.flyoutData.common.shopping.insertBefore(t.element,l)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),n=!0}if(!n){var u=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(u){var d=this.createElement("HR",{className:"sectionSeparator"});d.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(d,u),this.flyoutData.common.shopping.insertBefore(t.element,u)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element)}}},{key:"shouldRenderSmallNotification",value:function(){if(this.flyoutData.common.openedWith===Tt.Auto&&!this.flyoutData.common.fullFlyoutFromNotification){var t,e,n=this.flyoutData.common.popupOrigination;if(this.flyoutData.experimentData.isExperimentActive(Be.smallNotification)){if(n===Fe.AUTO_SHOW_PRICE_HISTORY||n===Fe.AUTO_SHOW_PACKAGE_TRACKING||n===Fe.AUTO_SHOW_COUPONS_CHECKOUT||n===Fe.AUTO_SHOW_LOWER_PRICE_FOUND||n===Fe.AUTO_SHOW_OTHER_SELLERS||n===Fe.AUTO_SHOW_REBATES_ORGANIC||n===Fe.AUTO_SHOW_REBATES_ORGANIC_NEW||n===Fe.AUTO_SHOW_REBATES_CHECKOUT||n===Fe.AUTO_SHOW_REBATES||n===Fe.AUTO_SHOW_COUPONS_CLIPPING||n===Fe.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION)return!0}else if(this.flyoutData.experimentData.isExperimentActive(Be.phExpandedGraph)&&n===Fe.AUTO_SHOW_PRICE_HISTORY&&this.flyoutData.common.openedWith===Tt.Auto)return!0;if(n===Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK&&this.storage&&(this.storage[Qr.ICNotificationType]===Es.Landing||this.storage[Qr.ICNotificationType]===Es.Activated))return!0;if(n===Fe.AUTO_SHOW_LOWER_PRICE_FOUND&&(null===(t=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===t||null===(e=t.segment)||void 0===e?void 0:e.toLowerCase())===Gt.AUTOS)return!0;if(n===Fe.AUTO_SHOW_AUTOS_MARKETPLACE)return!0;if(n===Fe.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER)return!0}return!1}},{key:"dismissNotificationTimeOut",value:function(t){var e=this,n=setTimeout((function(){e.pageHandlerModule.DismissPopup()}),null!=t?t:4500);this.flyoutData.common.shopping.addEventListener("mouseover",(function(){clearTimeout(n)}))}},{key:"setContentViewed",value:function(t,e,n,i,o){var a,r,s,l,c,u,d;if(!t)return null;switch(t){case Rt.COUPON:return e?ss.COUPONS_AUTO_APPLY:ss.COUPONS_AVAILABLE;case Rt.CASHBACK:return null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&null!==(r=a.userRebatesResponse)&&void 0!==r&&r.isRebatesUser||!this.flyoutData.common.isRebatesEnabled||!this.flyoutData.experimentData.isExperimentActive(Be.signinRebates)?null===(s=this.flyoutData.dataStoreModule.CashBackData)||void 0===s||null===(l=s.userRebatesResponse)||void 0===l||!l.isRebatesUser||null!==(c=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==c&&c.isCashBackActivated?ss.REBATES_BING_CONFIRMATION:ss.REBATES_ACTIVATE_CASHBACK:ss.ACTIVATE_CASHBACK_NEW;case Rt.COUPONCLIPPING:return ss.COUPONS_CLIPPING;case Rt.DEALS:return ss.DEALS;case Rt.RECOMMENDATIONS:return ss.RECOMMENDATIONS;case Rt.SIMILARSELLERS:return ss.OTHER_SELLER;case Rt.PRODUCTHISTORY:return ss.PRODUCT_HISTORY;case Rt.TIPS:return ss.TIPS;case Rt.TRACKING_CONFIRMATION:return ss.PACKAGE_TRACKING_OPT_IN;case Rt.ORDERSTATUSTRACKING:return ss.PACKAGE_TRACKING_STATUS_VIEW;case Rt.PRICECOMPARISON:return null!==(u=this.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==u&&u.shouldBeInPolePosition?ss.PRICE_COMPARE_LOWER_PRICES:ss.PRICE_COMPARE_BEST_PRICE;case Rt.PRICEHISTORY:var h=null===(d=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===d?void 0:d.getPriceHistoryType();return h===Xs.PRICEDROP?ss.PRICE_HISTORY_DROP:h===Xs.FAIRPRICE?ss.PRICE_HISTORY_STABLE:ss.PRICE_HISTORY_INCREASE;case Rt.RATINGSANDREVIEWS:var p=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(null!=p&&p.videos&&p.videos.length>0){if(p.expertReviews&&p.expertReviews.length>0){this.pageHandlerModule.RecordAsContentViewed(ss.PROFESSIONAL_REVIEWS);var f=new _(A.ModuleViewed),g="".concat(ss.PROFESSIONAL_REVIEWS);i?g+=" expanded":o&&(g+=" pole position"),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,g,f,n)}return ss.VIDEO_REVIEWS}if(p&&p.expertReviews&&p.expertReviews.length>0){if(null!=p&&p.videos&&p.videos.length>0){this.pageHandlerModule.RecordAsContentViewed(ss.VIDEO_REVIEWS);var m=new _(A.ModuleViewed),v="".concat(ss.VIDEO_REVIEWS);i?v+=" expanded":o&&(v+=" pole position"),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,v,m,n)}return ss.PROFESSIONAL_REVIEWS}case Rt.CHECKOUTAUTOFILL:return ss.EXPRESS_CHECKOUT;case Rt.SIMILARSELLERS:return ss.OTHER_SELLER;case Rt.REWARD:return ss.ACTIVATE_REWARDS_NEW;case Rt.GROCERY_CASHBACK:case Rt.GROCERY_CASHBACK_ACTIVATED:case Mt.GROCERY_CASHBACK_NOTIFICATION:return ss.ITEMIZED_CASHBACK;case Rt.TRENDING_OFFERS:return ss.FEED_TRENDING_OFFERS;case Rt.DAILY_DEALS:return ss.FEED_DAILY_DEALS;case Rt.INFINITE_CATEGORY_FEED:return ss.FEED_INFINITE_CATEGORY;case Rt.SHOPRUNNER:return ss.SHOPRUNNER_SIGNUP;default:return null}}},{key:"recordContentViewed",value:function(t,e,n,i,o){var a=this.setContentViewed(t,e,n,!1,i),r=this.getViewedContent(t),s="".concat(t),l=new _(A.ModuleViewed,void 0,void 0,void 0,r);a&&(this.pageHandlerModule.RecordAsContentViewed(a),s="".concat(a),o?s+=" notification":i&&(s+=" pole position"));var c=n;t!==Mt.GROCERY_CASHBACK_NOTIFICATION&&t!==Rt.GROCERY_CASHBACK&&t!==Rt.GROCERY_CASHBACK_ACTIVATED||(c=dn.CouponImpressionId),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,s,l,c)}},{key:"getViewedContent",value:function(t){var e,n,i;if(t)try{switch(t){case Rt.SIMILARSELLERS:return this.flyoutData.dataStoreModule.SimilarSellerData?JSON.stringify(this.flyoutData.dataStoreModule.SimilarSellerData):void 0;case Mt.GROCERY_CASHBACK_NOTIFICATION:case Rt.GROCERY_CASHBACK:case Rt.GROCERY_CASHBACK_ACTIVATED:if(this.storage){var o=this.storage[Qr.ICNotificationType];return JSON.stringify({module:t,notificationType:o,openedWith:this.flyoutData.common.openedWith})}return;case Rt.COUPON:return JSON.stringify({result:null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.BgaaResultState,savings:null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.BgaaSavings,viewedContent:null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.BgaaViewedContent});default:return}}catch(t){return}}},{key:"seeMoreClickHandler",value:function(t,e,n,i,o,a){var r=this.isKeyboardClick(t);n(e,!0,r,o,a),i.remove(),un.queueUpdate((function(){var t=e.shadowRoot;if(t){var n=t.querySelector(".action");n&&(n.style.display="none")}}))}},{key:"isKeyboardClick",value:function(t){return!(!t||0!==t.offsetX||0!==t.offsetY)}},{key:"manageMenuEvents",value:function(t,e,n){var i=this;t.addEventListener("keydown",(function(n){if("Escape"===n.key)t.className="hide",e.setAttribute("aria-expanded","undefined"),e.focus(),n.preventDefault();else if("Tab"===n.key){var i;"btnFeedbackDislike"!==(null===(i=n.target)||void 0===i?void 0:i.id)||n.shiftKey||n.preventDefault()}})),e.addEventListener("focus",(function(){"hide"!==t.className&&(t.className="hide",e.setAttribute("aria-expanded","undefined"))})),e.addEventListener("keydown",(function(n){"Escape"!==n.key&&"Tab"!==n.key||"hide"===t.className||(t.className="hide",e.setAttribute("aria-expanded","undefined"),e.focus(),n.preventDefault())}));var o=!1;e.addEventListener("click",(function(a){if(t.classList.toggle("hide"),"hide"===t.className)e.setAttribute("aria-expanded","undefined");else{var r=t.querySelectorAll("*")[0];if(r&&i.isKeyboardClick(a))if("feedbackDiv"===r.id&&r.children&&r.children.length>1){var s,l=null===(s=r.children[1])||void 0===s?void 0:s.querySelectorAll("msft-micro-feedback-item");if(l&&l.length>0){var c,u=null===(c=l[0].shadowRoot)||void 0===c?void 0:c.querySelector("fluent-button");u&&u.focus()}}else r.focus();n&&i.flyoutData.common.openedWith!==Tt.Auto&&!o&&(i.recordContentViewed(Rt.FEEDBACK,n.getState(pn.isAutoApplyVisible),dn.EdgeImpressionId,!1,!1),o=!0),e.setAttribute("aria-expanded","true")}a.stopPropagation()}))}},{key:"disableFooterButtons",value:function(){var t=document.querySelector("#snooze"),e=document.querySelector("#notshow");null==t||t.remove(),null==e||e.remove()}},{key:"createSnoozeButton",value:function(){var t=this,n=this.createSimpleOutlineButton();n.id="snooze",n.textContent=this.flyoutData.strings.snoozeButton,n.title=this.flyoutData.strings.snoozeHoverText;var i={popuporigination:this.flyoutData.common.popupOrigination};return n.addEventListener("click",e(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Yr(E.FlyoutSnooze,t.flyoutData.common.domain,JSON.stringify(i)),t.pageHandlerModule.RecordAsUserAction(is.FLYOUT_SNOOZED),t.logModule.LogInfoEvent(S.ButtonClick,"Flyout Snoozed",n,dn.CouponImpressionId),!t.flyoutData.common.popupOrigination||!t.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){e.next=6;break}return e.next=6,t.userEngagementUtilities.addEngagement(ll.NEGATIVE,t.flyoutData.common.popupOrigination,void 0,qs.snoozeBtnWeight);case 6:t.pageHandlerModule.AutoShowForAllFeatures(!1),t.pageHandlerModule.DismissPopup();case 8:case"end":return e.stop()}}),e)})))),n}},{key:"createProductImage",value:function(t,e,n,i){var o=this.createElement("DIV");o.className="divProductImageContainer",n.classList.add("imgProduct"),i?n.setAttribute("aria-label",i):n.setAttribute("aria-hidden","true"),o.style.width="".concat(t,"px"),o.style.height="".concat(e,"px"),n.style.maxWidth="".concat(t-10,"px"),n.style.maxHeight="".concat(e-10,"px");var a=this.createElement("DIV");return a.className="divProductImageAlpha",a.style.width="".concat(t,"px"),a.style.height="".concat(e,"px"),o.appendChild(n),o.appendChild(a),o}},{key:"getFriendlyFeatureName",value:function(t){return t===Fe.AUTO_SHOW_COUPONS_CLIPPING?this.flyoutData.strings.clippingFeatureName:t===Fe.AUTO_SHOW_GIFT_CARD?this.flyoutData.strings.giftFeatureName:t===Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK||t===Fe.AUTO_SHOW_VIRTUAL_CARD?this.flyoutData.strings.groceriesFeatureName:t===Fe.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER||t===Fe.AUTO_SHOW_OTHER_SELLERS?this.flyoutData.strings.similarSellerFeatureName:t===Fe.AUTO_SHOW_LOWER_PRICE_FOUND?this.flyoutData.strings.pcFeatureName:t===Fe.AUTO_SHOW_PACKAGE_TRACKING?this.flyoutData.strings.packageTrackingFeatureName:t===Fe.AUTO_SHOW_PERSONALIZED_CASHBACK||t===Fe.AUTO_SHOW_REBATES||t===Fe.AUTO_SHOW_REBATES_BING||t===Fe.AUTO_SHOW_REBATES_ORGANIC||t===Fe.AUTO_SHOW_REBATES_ORGANIC_NEW?this.flyoutData.strings.cbFeatureName:t===Fe.AUTO_SHOW_PRICE_HISTORY?this.flyoutData.strings.phFeatureName:t===Fe.AUTO_SHOW_PROFESSIONAL_REVIEWS?this.flyoutData.strings.rrFeatureName:t===Fe.AUTO_SHOW_SUSTAINABILITY_LANDING||t===Fe.AUTO_SHOW_SUSTAINABILITY_PURCHASE?this.flyoutData.strings.sustainabilityFeatureName:t===Fe.AUTO_SHOW_VIRTUAL_CARD?this.flyoutData.strings.virtualCardFeatureName:t===Fe.AUTO_SHOW_COUPONS_CHECKOUT?this.flyoutData.strings.couponFeatureName:t===Fe.AUTO_SHOW_RECOMMENDATIONS?this.flyoutData.strings.recommendationsFeatureName:t===Fe.AUTO_SHOW_SHOPRUNNER?this.flyoutData.strings.shopRunnerFeatureName:""}},{key:"closeFooterOverlay",value:function(t,e){e.addEventListener("keydown",(function(e){"Tab"===e.key&&"hide"!==t.className&&(t.className="hide")}))}},{key:"createDoNotShowButton",value:function(t,n,i){var a=this;function r(t,e){var n=t.querySelector("path");null!==n&&(n.style.fill=e)}var s=this.createSimpleOutlineButton();s.id="notshow",s.ariaHaspopup="menu";var l=this.createElement("SPAN");l.textContent=this.flyoutData.strings.doNotShowString,s.appendChild(l);var c=this.createElement("DIV",{style:"display: flex; align-items: center;"});c.innerHTML=(new jt).getArrowButtonIcon(),this.flyoutData.common.currentTheme===xt.Dark?r(c,"#FFFFFF"):r(c,"#1A1A1A"),s.appendChild(c);var u=document.createElement("fluent-menu");u.id="doNotShowOverlay",u.classList.toggle("hide"),this.shouldRenderSmallNotification()&&(u.style.width="89%",u.style.right="11px"),t.appendChild(u);var d=document.createElement("fluent-menu-item"),h=this.getFriendlyFeatureName(n.common.popupOrigination);d.textContent="Don't show ".concat(h," for this site"),d.className+="defaultFontFamily",d.addEventListener("click",(function(){var t=new Yr(E.DoNotShowFeatureForDomain);a.logModule.LogInfoEvent(S.ButtonClick,"".concat(n.common.popupOrigination),t),a.pageHandlerModule.DisablePopupForDomain(n.common.popupOrigination),a.pageHandlerModule.DismissPopup()})),this.closeFooterOverlay(u,d),u.appendChild(d),i.addAutoShowItem(u,n.common.popupOrigination,!0);var p=document.createElement("fluent-menu-item");p.textContent=this.flyoutData.strings.commonCMManage,p.style.borderTop="1px solid #F1F1F1",p.className+="defaultFontFamily",p.addEventListener("change",(function(){a.pageHandlerModule.RecordAsUserAction(is.MANAGE);var t=new Yr(E.FlyoutManage);a.logModule.LogInfoEvent(S.ButtonClick,"Flyout Menu Manage",t),a.pageHandlerModule.NavigateToEdgeUrl("edge://settings/privacy#Shopping",cl.NEW_FOREGROUND_TAB)})),this.closeFooterOverlay(u,p),u.appendChild(p);var f={popuporigination:this.flyoutData.common.popupOrigination};return s.addEventListener("click",e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new Yr(E.DoNotShow,a.flyoutData.common.domain,JSON.stringify(f)),a.logModule.LogInfoEvent(S.ButtonClick,"".concat(n.common.popupOrigination),e,dn.CouponImpressionId),!a.flyoutData.common.popupOrigination||!a.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=5;break}return t.next=5,a.userEngagementUtilities.addEngagement(ll.NEGATIVE,a.flyoutData.common.popupOrigination,void 0,qs.doNotShowBtnWeight);case 5:case"end":return t.stop()}}),t)})))),i.handleClickOutsideMenu(this.flyoutData.common.shopping,u,s),this.manageMenuEvents(u,s,null),s}},{key:"createNotificationModule",value:function(t,e,n){var i=new hl;return i.element=t,i.name=e,i.moduleInterface=n,i}},{key:"createRemindLaterButton",value:function(){var t=this,e=this.createElement("fluent-button");e.className+="action aOfferDetails",e.appearance="lightweight",e.id="remindLaterFooter",this.flyoutData.common.currentTheme===xt.Dark?e.style.color="#ffffff":e.style.color="#000000",e.style.alignSelf="center",e.style.lineHeight="16px",e.textContent=this.flyoutData.strings.remindLater,e.style.display="flex";var n={popuporigination:this.flyoutData.common.popupOrigination};return e.addEventListener("click",(function(){var e=new Yr(E.RemindLater,t.flyoutData.common.domain,JSON.stringify(n));t.pageHandlerModule.RecordAsUserAction(is.FLYOUT_SNOOZED),t.logModule.LogInfoEvent(S.ButtonClick,"Flyout Snoozed (Remind Later)",e,dn.CouponImpressionId),t.pageHandlerModule.AutoShowForAllFeatures(!1),t.pageHandlerModule.DismissPopup()})),e}},{key:"CapitalizeString",value:function(t){if(t){var e="";return t.length>0&&(e+=t[0].toUpperCase()+t.substring(1)),e}return t}},{key:"CapitalizeWordsInString",value:function(t){if(t){var e="",n=t.split(" "),i=["or","of","and","a","an"];return n.forEach((function(t){t.length>0&&(i.includes(t)?e+=t+" ":e+=t[0].toUpperCase()+t.substring(1).toLowerCase()+" ")})),e.substring(0,e.length-1)}return t}},{key:"GetStorageStringValue",value:function(t){return this.storage?this.storage[t]:""}},{key:"cleanInput",value:function(t){try{return t.replace(/[^%\w\.@\-, !$---]/,"")}catch(t){return""}}},{key:"handleToolTipInteraction",value:function(t,e){t.addEventListener("mouseenter",(function(){e&&(e.visible=!0)})),t.addEventListener("mouseleave",(function(){e&&(e.visible=!1)})),t.addEventListener("focus",(function(){e&&(e.visible=!0)})),t.addEventListener("blur",(function(){e&&(e.visible=!1)}))}},{key:"setupTooltip",value:function(t){var e=t.getBoundingClientRect();if(this.shouldDisplayTooltipSide(t)){t.caratSide=al.Right;var n=e.left-e.width-10;t.width="".concat(n,"px");var i=this.getTooltipAreaSize(t.content)/n+10;i>this.getFullHeight()&&(t.fontSize="10px",i=this.getTooltipAreaSize(t.content,!0)/n+10);var o=this.getAvailableHeight(e.top,e.height);t.caratTopOffset=i>o?"".concat(i-o,"px"):"2px"}else{t.caratSide=al.Top;var a=this.getFullWidth();if(257>a)t.caratLeftOffset="".concat(a-this.getSideMargins(),"px"),t.width="".concat(a,"px");else{var r=this.getAvailableWidth(e.left,e.width);r>245&&(r=245),t.caratLeftOffset="".concat(r,"px"),t.width="257px"}}}},{key:"sendFlyoutUpdateEvent",value:function(t,e){un.queueUpdate((function(){var n=new CustomEvent(hn.onDataUpdate,{detail:{moduleType:e}});t.dispatchEvent(n)}))}},{key:"setStorageBoolean",value:function(t,e){this.pageHandlerModule.SetStorageValue(t,Hs.CreateFromBool(e))}},{key:"setStorageString",value:function(t,e){var n=new ds;n.stringValue=e,this.pageHandlerModule.SetStorageValue(t,n)}},{key:"clearDomainMappedStringStorage",value:(l=e(o().mark((function t(e,n){var i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.flyoutData.common.domain,!this.storage){t.next=7;break}(s=new ds).stringValue=JSON.stringify(this.storage[e]),r=s,t.next=11;break;case 7:if(!n){t.next=11;break}return t.next=10,this.pageHandlerModule.GetStorageValue(e);case 10:r=t.sent;case 11:if(null!==(i=r)&&void 0!==i&&i.stringValue)try{u=null!==(l=JSON.parse(r.stringValue))&&void 0!==l?l:"{}",(d=null!==(c=JSON.parse(u))&&void 0!==c?c:{})[a]="",this.setStorageString(e,JSON.stringify(d))}catch(t){}case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"showNewFooter",value:function(){var t;return null!==(t=Tt.Auto===this.flyoutData.common.openedWith&&!this.excludeFooter())&&void 0!==t&&t}},{key:"addNegativeEngagement",value:(a=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p,f,g;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.storage){t.next=6;break}l={value:{stringValue:this.storage.EngagementDataKey}},s=l,t.next=9;break;case 6:return t.next=8,this.pageHandlerModule.GetStorageValue(Zr);case 8:s=t.sent;case 9:if(s&&null!==(a=s)&&void 0!==a&&null!==(r=a.value)&&void 0!==r&&r.stringValue){t.next=14;break}return this.startEngagementMap(e,null,n,i),t.abrupt("return");case 14:if(t.prev=14,c=JSON.parse(null===(u=s)||void 0===u||null===(d=u.value)||void 0===d?void 0:d.stringValue,le.ParseMap)){t.next=21;break}return this.startEngagementMap(e,null,n),t.abrupt("return");case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(14),h=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"engagement map parsing error ".concat(t.t0),h);case 27:if(p=c.get(this.flyoutData.common.domain)){t.next=33;break}return this.startEngagementMap(e,c,n),t.abrupt("return");case 33:if((f=null==p?void 0:p.get(e.toString()))||((f=new _s).negativeEngagementCount=0),f.negativeEngagementCount++,!(f.negativeEngagementCount>=n)){t.next=44;break}return t.next=39,this.pauseAutoOpenForPopupOrigination(e,i);case 39:this.sendEngagementInfo(e,n,"auto open paused - engagement"),p.delete(e.toString()),c.set(this.flyoutData.common.domain,p),t.next=46;break;case 44:p.set(e.toString(),f),c.set(this.flyoutData.common.domain,p);case 46:this.storeNewEngagementMap(c),t.next=55;break;case 50:t.prev=50,t.t1=t.catch(0),g=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error adding negative engagement ".concat(t.t1),g),this.clearEngagementData();case 55:case"end":return t.stop()}}),t,this,[[0,50],[14,23]])}))),function(t,e,n){return a.apply(this,arguments)})},{key:"pauseAutoOpenForPopupOrigination",value:(i=e(o().mark((function t(e,n){var i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,x,E;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h=performance.now(),!this.storage){t.next=12;break}m={value:{stringValue:this.storage.AutoOpenData}},p=m,v={value:{stringValue:this.storage.LastCleanedData}},f=v,y={value:{stringValue:this.storage["price"+this.flyoutData.common.domain]}},g=y,t.next=21;break;case 12:return t.next=14,this.pageHandlerModule.GetStorageValue(jr);case 14:return p=t.sent,t.next=17,this.pageHandlerModule.GetStorageValue(qr);case 17:return f=t.sent,t.next=20,this.pageHandlerModule.GetStorageValue("price"+this.flyoutData.common.domain);case 20:g=t.sent;case 21:C=new Ls(this.sendErrorTelemetry.bind(this),this.setStorageFromController.bind(this),dn.EdgeImpressionId,this.flyoutData.common.domain,"",null!==(i=null===(a=p)||void 0===a||null===(r=a.value)||void 0===r?void 0:r.stringValue)&&void 0!==i?i:void 0,null!==(s=null===(l=f)||void 0===l||null===(c=l.value)||void 0===c?void 0:c.stringValue)&&void 0!==s?s:void 0,W.Flyout),null!==(u=g)&&void 0!==u&&null!==(d=u.value)&&void 0!==d&&d.stringValue&&C.setTotalPrice(g.value.stringValue),C.updateLocalStorage(e,n),b=performance.now(),x=b-h,this.sendControllerPerfInfo(x.toString()),t.next=36;break;case 32:t.prev=32,t.t0=t.catch(0),E=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error pausing auto open for ".concat(e," ").concat(t.t0),E);case 36:case"end":return t.stop()}}),t,this,[[0,32]])}))),function(t,e){return i.apply(this,arguments)})},{key:"getFavIconSrc",value:function(t){return t?(t=(t=t.replace("http://","")).replace("https://",""),this.flyoutData.dataLoader.IsServerData()?"https://edge.microsoft.com/favicon/v1/?client=chrome_desktop&nfrp=2&check_seen=true&size=20&fallback_opts=TYPE,SIZE,URL&url=http://".concat(t,"&origin=shoppingv2"):this.flyoutData.common.currentDevice===St.Mobile?"https://".concat(t,"/favicon.ico"):"edge://favicon2/?size=16&scale_factor=1x&page_url=http://".concat(t,"&allow_google_server_fallback=1")):""}},{key:"shouldDisplayTooltipSide",value:function(t){var e=this.getFullHeight(),n=t.getBoundingClientRect(),i=this.getAvailableWidth(n.left,n.width),o=this.getFullWidth();o>257&&(o=257);var a=this.getAvailableHeight(n.top,n.height);if(a>=300)return!1;var r=e*i>o*a;return t.className=r?"vertical":"horizontal",r}},{key:"getFullHeight",value:function(){var t=this.showNewFooter()?32+this.getFooterMargins():0;return window.innerHeight-44-t}},{key:"getAvailableHeight",value:function(t,e){return this.getFullHeight()-(t-44)-e}},{key:"getFullWidth",value:function(){return window.innerWidth-this.getSideMargins()-20}},{key:"getAvailableWidth",value:function(t,e){return t-this.getSideMargins()/2-e}},{key:"getTooltipAreaSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(this.flyoutData.strings.cbLearnMore+". "+this.flyoutData.strings.cbToolTips).length,i=t.length,o=e?44:70;return i*o/n*257}},{key:"getFooterMargins",value:function(){return this.shouldRenderSmallNotification()?14:20}},{key:"getSideMargins",value:function(){return this.shouldRenderSmallNotification()||this.flyoutData.common.isPane?40:32}},{key:"clearEngagementData",value:function(){this.pageHandlerModule.SetStorageValue(Zr,new Bs)}},{key:"startEngagementMap",value:(n=e(o().mark((function t(e,n,i,a){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}if(!(1>=i)){t.next=5;break}return t.next=4,this.pauseAutoOpenForPopupOrigination(e,a);case 4:return t.abrupt("return");case 5:n=new Map;case 6:r=new Map,(s=new _s).negativeEngagementCount=1,r.set(e.toString(),s),n.set(this.flyoutData.common.domain,r),this.storeNewEngagementMap(n);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e,i,o){return n.apply(this,arguments)})},{key:"storeNewEngagementMap",value:function(t){if(0===t.size)this.pageHandlerModule.SetStorageValue(Zr,new Bs);else{var e=new ds;e.stringValue=JSON.stringify(t,le.StringifyMap),this.pageHandlerModule.SetStorageValue(Zr,e)}}},{key:"setStorageFromController",value:function(t,e){var n=new ds;n.stringValue=e,this.pageHandlerModule.SetStorageValue(t,n)}},{key:"sendControllerPerfInfo",value:function(t){var e=new _(A.PerfPauseAutoShow,void 0,void 0,this.flyoutData.common.domain);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,t,e,dn.EdgeImpressionId)}},{key:"sendEngagementInfo",value:function(t,e,n){var i=new _(A.BlockedAutoOpenEngagement,void 0,void 0,this.flyoutData.common.domain,JSON.stringify({negativeEngagementCount:e,popupOrigination:t}));this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,n,i,dn.EdgeImpressionId)}},{key:"sendErrorTelemetry",value:function(t){var e=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,t,e)}},{key:"excludeFooter",value:function(){var t;return null!==(t=!this.flyoutData.experimentData.isExperimentActive(Be.footerInAA)&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_COUPONS_CHECKOUT||!this.flyoutData.experimentData.isExperimentActive(Be.implicitPriceTrackingFootet)&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_CONFIRMATION||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_DEACTIVATED||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK&&this.storage&&(this.storage[Qr.ICNotificationType]!==Es.Landing||this.storage[Qr.ICNotificationType]!==Es.PDP))&&void 0!==t&&t}}],[{key:"replaceStringsPlaceholders",value:function(t,e){e||(e="en-us");var n=Te.GetCurrencyFromMarket(e);return n||(n="$"),t.replace(Dt.currency,n)}},{key:"GetMarket",value:function(t,e){return t||(e||"en-us")}}]),t}(),Dl=Tl,kl=function(){function t(e,n,i,o){s(this,t),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),f(this,"viewModulesUtilities",void 0),f(this,"commonAssets",void 0),this.pageHandlerModule=e,this.logModule=n,this.viewModulesUtilities=new Dl(i,e,n,o)}return r(t,null,[{key:"getErrorString",value:function(t){var e,n,i,o=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"",a=null!==(n=null==t?void 0:t.message)&&void 0!==n?n:"",r=null!==(i=null==t?void 0:t.stack)&&void 0!==i?i:"";return"".concat(o," ").concat(a," ").concat(r)}},{key:"setFlyoutFooter",value:function(t,e,n,i,o){var a=e.createElement("DIV");a.id="footerDiv",a.slot="footer";var r=e.createSnoozeButton(),s=e.createDoNotShowButton(a,t,i);r&&a.appendChild(r),s&&a.appendChild(s),t.common.shopping&&t.common.shopping.appendChild(a),un.queueUpdate((function(){var t=new CustomEvent(hn.FooterCreated);n.dispatchEvent(t)}))}}]),t}(),Il=kl,wl=r((function t(e){s(this,t),f(this,"Timestamp",void 0),f(this,"ProductId",void 0),f(this,"Title",void 0),f(this,"CurrencySymbol",void 0),f(this,"ProductUrl",void 0),f(this,"ImageUrl",void 0),f(this,"CurrentPrice",void 0),f(this,"OlderPrice",void 0),this.Timestamp=null==e?void 0:e.timestamp,this.ProductId=null==e?void 0:e.productId,this.Title=null==e?void 0:e.title,this.CurrencySymbol=null==e?void 0:e.currencySymbol,this.ProductUrl=null==e?void 0:e.productUrl,this.ImageUrl=null==e?void 0:e.imageUrl,this.CurrentPrice=null==e?void 0:e.currentPrice,this.OlderPrice=null==e?void 0:e.olderPrice}));function Pl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ol(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ol(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Rl=r((function t(e){if(s(this,t),f(this,"Timestamp",void 0),f(this,"CurrencySymbol",void 0),f(this,"CouponCode",void 0),f(this,"DiscountRate",void 0),f(this,"RetailerName",void 0),f(this,"RetailerCartPage",void 0),f(this,"Products",void 0),this.Timestamp=null==e?void 0:e.timestamp,this.CurrencySymbol=null==e?void 0:e.currencySymbol,this.CouponCode=null==e?void 0:e.couponCode,this.DiscountRate=null==e?void 0:e.discountRate,this.RetailerName=null==e?void 0:e.retailerName,this.RetailerCartPage=null==e?void 0:e.retailerCartPage,this.Products=[],null!=e&&e.products){var n,i=Pl(e.products);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.Products.push(new wl(o))}}catch(t){i.e(t)}finally{i.f()}}}));function Ml(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Nl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Nl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ll,_l=function(){function t(e,n,i,o,a,r,l,c,u,d,h){var p,g,m,v,y,C,b,S,x,E,A,T,D,k,I,w,P,O,R,M,N,L,_;(s(this,t),f(this,"highestCashBackCategory",void 0),f(this,"userRebatesResponse",void 0),f(this,"merchantName",void 0),f(this,"image",void 0),f(this,"merchantId",void 0),f(this,"merchantFullName",void 0),f(this,"merchantUri",void 0),f(this,"affiliateNetwork",void 0),f(this,"IsRebatesSupportedDomain",void 0),f(this,"isSignInSupportedDomain",void 0),f(this,"isCashBackActivated",void 0),f(this,"isConfirmationPage",void 0),f(this,"isTurnedOff",void 0),f(this,"personalizedCashback",void 0),f(this,"shouldRenderCashBackNotification",void 0),f(this,"isPersonalizedCashback",void 0),f(this,"isSignInSupportedDomainCashBack",void 0),f(this,"popupOrigination",void 0),f(this,"activateRebatesStatus",void 0),f(this,"adsCashback",void 0),f(this,"isEdgeSignedInMsa",void 0),f(this,"canRenderCashback",void 0),f(this,"isCashbackEstimationSupportedForDomain",!1),f(this,"experiments",void 0),e)&&(this.highestCashBackCategory={category:null===(p=e.highestCashbackCategory)||void 0===p?void 0:p.category,commissionType:null===(g=e.highestCashbackCategory)||void 0===g?void 0:g.commissionType,commissionValue:null===(m=e.highestCashbackCategory)||void 0===m?void 0:m.commissionValue,priority:null===(v=e.highestCashbackCategory)||void 0===v?void 0:v.priority},this.userRebatesResponse={cashbackAvailable:null===(y=e.userRebateResponse)||void 0===y?void 0:y.cashbackAvailable,isRebatesUser:null!==(C=null===(b=e.userRebateResponse)||void 0===b?void 0:b.isRebatesUser)&&void 0!==C&&C,latestCashbackApproved:null===(S=e.userRebateResponse)||void 0===S?void 0:S.latestCashbackApproved,latestCashbackApprovedCurrency:null===(x=e.userRebateResponse)||void 0===x?void 0:x.latestCashbackApprovedCurrency,latestOrderDate:null===(E=e.userRebateResponse)||void 0===E?void 0:E.latestOrderDate,latestOrderMerchantName:null===(A=e.userRebateResponse)||void 0===A?void 0:A.latestOrderMerchantName,latestOrderMerchantUrl:null===(T=e.userRebateResponse)||void 0===T?void 0:T.latestOrderMerchantUrl,lifetimeBalance:null===(D=e.userRebateResponse)||void 0===D?void 0:D.lifetimeBalance},this.isSignInSupportedDomain=e.isSignInSupportedDomain,this.merchantName=e.merchantName,this.image=e.image,this.merchantId=e.merchantId,this.merchantFullName=e.merchantFullName,this.merchantUri=e.merchantUri,this.affiliateNetwork=e.affiliateNetwork,this.IsRebatesSupportedDomain=null!==(k=e.IsRebatesSupportedDomain)&&void 0!==k?k:null,this.isCashbackEstimationSupportedForDomain=h);n&&(this.personalizedCashback={commissionType:null===(I=n.personalizedCashback)||void 0===I?void 0:I.commissionType,commissionValue:null===(w=n.personalizedCashback)||void 0===w?void 0:w.commissionValue,imageUrl:null===(P=n.personalizedCashback)||void 0===P?void 0:P.imageUrl,isAdClick:null===(O=n.personalizedCashback)||void 0===O?void 0:O.isAdClick,offerId:null===(R=n.personalizedCashback)||void 0===R?void 0:R.offerId,productUrl:null===(M=n.personalizedCashback)||void 0===M?void 0:M.productUrl,rGuid:null===(N=n.personalizedCashback)||void 0===N?void 0:N.rGuid,scope:null===(L=n.personalizedCashback)||void 0===L?void 0:L.scope},this.adsCashback=null===(_=n.personalizedCashback)||void 0===_?void 0:_.adsCashback);this.isCashBackActivated=null!=i&&i,this.isConfirmationPage=null!=o&&o,this.isTurnedOff=null!=a&&a,this.experiments=r,this.popupOrigination=c,this.activateRebatesStatus=u,this.shouldRenderCashBackNotification=this.ShouldRenderCashBackNotification(this,l),this.isPersonalizedCashback=this.IsPersonalizedCashback(this),this.isSignInSupportedDomainCashBack=this.IsSignInSupportedDomainCashBack(this,l),this.canRenderCashback=this.CanRenderCashback(this,d)}var n;return r(t,[{key:"CanRenderCashback",value:function(t,e){return!!e&&(!!(t&&t.userRebatesResponse&&t.userRebatesResponse.isRebatesUser&&(null===t.IsRebatesSupportedDomain||!0===t.IsRebatesSupportedDomain)&&t.highestCashBackCategory&&t.highestCashBackCategory.commissionValue&&t.highestCashBackCategory.commissionType&&t.highestCashBackCategory.category&&t.merchantFullName)||(!(!t||!t.isPersonalizedCashback)||!(!t||!t.isSignInSupportedDomainCashBack)))}},{key:"IsSignInSupportedDomainCashBack",value:function(t,e){var n,i,o,a,r,s,l;return!(!(t&&t.isSignInSupportedDomain&&(null===(n=t.userRebatesResponse)||void 0===n||!n.isRebatesUser)&&this.experiments.isExperimentActive(Be.signinRebates)&&null!==(i=t.personalizedCashback)&&void 0!==i&&i.commissionType&&null!==(o=t.personalizedCashback)&&void 0!==o&&o.commissionValue&&null!==(a=t.personalizedCashback)&&void 0!==a&&a.scope&&null!==(r=t.personalizedCashback)&&void 0!==r&&r.offerId)||this.popupOrigination!==Fe.AUTO_SHOW_REBATES_SWITCHED_TO_MSA&&this.popupOrigination!==Fe.AUTO_SHOW_PERSONALIZED_CASHBACK&&e===Tt.Auto)||null!==(s=t&&t.isSignInSupportedDomain&&!(null!==(l=t.userRebatesResponse)&&void 0!==l&&l.isRebatesUser)&&this.experiments.isExperimentActive(Be.signinRebates)&&t.highestCashBackCategory&&t.highestCashBackCategory.commissionValue&&t.highestCashBackCategory.commissionType&&t.highestCashBackCategory.category&&t.merchantFullName&&(!t.isCashBackActivated||this.popupOrigination===Fe.AUTO_SHOW_REBATES_SWITCHED_TO_MSA))&&void 0!==s&&s}},{key:"IsPersonalizedCashback",value:function(t){var e;return null!==(e=t&&t.personalizedCashback&&t.personalizedCashback.commissionValue)&&void 0!==e&&e}},{key:"ShouldRenderCashBackNotification",value:function(t,e){return!(!t.isConfirmationPage&&!t.isTurnedOff)||!(!t||e!==Tt.Auto||this.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC&&this.popupOrigination!==Fe.AUTO_SHOW_REBATES)}}],[{key:"getEstimatedCashbackData",value:(n=e(o().mark((function t(e,n,i){var a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e)try{a=JSON.parse(null==e||null===(r=e.value)||void 0===r?void 0:r.stringValue)}catch(t){}if(!a){t.next=6;break}if(!((s=Object.keys(a)).length>0)){t.next=6;break}return t.next=6,fetch("https://www.bing.com/api/shopping/v1/savings/cashback/estimate",{body:JSON.stringify({Domain:i,SkuIds:s}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then((function(t){if(t.ok)return t.json();throw new Error("Estimate Cashback Api call fail")})).then((function(t){var e=0;if(t&&t.skuIdToCashback){var o,r=Ml(s);try{for(r.s();!(o=r.n()).done;){var l=o.value,c=t.skuIdToCashback[l];if(c&&void 0!==a){var u=a[l];c.type===Ll.Percent?e+=u.price*(c.value/100):c.type===Ll.Cash&&(e+=u.count*c.value)}}}catch(t){r.e(t)}finally{r.f()}}if(parseFloat(e.toFixed(2))>0){var d=new Fl(i,e.toFixed(2),"$"),h=JSON.stringify({value:JSON.stringify(d)}),p=new ds;return p.stringValue=h,n.SetStorageValue("EstimatedCashback:Data",p),d}})).catch((function(t){}));case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)}))),function(t,e,i){return n.apply(this,arguments)})},{key:"isCashbackEstimateActive",value:function(t,e,n){var i;return!!(t.experimentData.isExperimentActive(Be.cashbackEstimate)&&t.common.isCheckoutPageUsingUrlMatch&&null!==(i=t.dataStoreModule.CashBackData)&&void 0!==i&&i.isCashbackEstimationSupportedForDomain&&e&&e.domainName===t.common.domain&&e.cashbackValue)&&(n.TriggerExperiment(Be.cashbackEstimate),!0)}},{key:"isCashbackEstimateEnabled",value:function(t){var e;return!!(t.experimentData.isExperimentActive(Be.cashbackEstimate)&&t.common.isCheckoutPageUsingUrlMatch&&null!==(e=t.dataStoreModule.CashBackData)&&void 0!==e&&e.isCashbackEstimationSupportedForDomain)}}]),t}(),Fl=r((function t(e,n,i){s(this,t),f(this,"domainName",void 0),f(this,"cashbackValue",void 0),f(this,"currency",void 0),this.domainName=e,this.currency=i,this.cashbackValue=n}));!function(t){t.Cash="Cash",t.Percent="Percent"}(Ll||(Ll={}));var Hl=_l,Bl=r((function t(e,n,i,o,a){s(this,t),f(this,"Profiles",void 0),f(this,"Payments",void 0),f(this,"shouldRenderCheckoutAutofill",void 0),f(this,"AllProfiles",void 0),f(this,"AllPayments",void 0),this.AllProfiles=[],this.AllPayments=[],this.Profiles=[],this.Payments=[],e&&(this.AllProfiles=e),n&&(this.AllPayments=n),i&&(this.Profiles=i),o&&(this.Payments=o),this.shouldRenderCheckoutAutofill=a})),Ul=r((function t(e,n){s(this,t),f(this,"couponCode",void 0),f(this,"title",void 0),f(this,"attribution",void 0),f(this,"isLowSuccessRateCoupon",void 0),f(this,"isStackable",void 0),f(this,"successRate",void 0),f(this,"minimumPurchase",void 0),f(this,"shortHeader",void 0),f(this,"calculatedCutoffPrice",void 0),f(this,"discountPercent",void 0),this.couponCode=null==e?void 0:e.couponCode,this.title=null==e?void 0:e.title,this.attribution=null==e?void 0:e.attribution,this.isLowSuccessRateCoupon=null==e?void 0:e.isLowSuccessRateCoupon,n===St.Mobile?this.isStackable=!0:this.isStackable=null==e?void 0:e.isStackable,this.successRate=null==e?void 0:e.successRate,this.minimumPurchase=null==e?void 0:e.minimumPurchase,this.shortHeader=null==e?void 0:e.shortHeader,this.calculatedCutoffPrice=null==e?void 0:e.calculatedCutoffPrice,this.discountPercent=null==e?void 0:e.discountPercent})),Vl=function(){function t(){s(this,t),f(this,"offerUrl",void 0),f(this,"headerText",void 0),f(this,"id",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.offerUrl=e.offerUrl,n.headerText=e.headerText,n.id=e.id,n}}]),t}(),Gl=function(){function t(){s(this,t),f(this,"title",void 0),f(this,"offerUrl",void 0),f(this,"imageUrl",void 0),f(this,"originalPrice",void 0),f(this,"newPrice",void 0),f(this,"discountPercentage",void 0),f(this,"shippingText",void 0),f(this,"sellerName",void 0),f(this,"id",void 0),f(this,"priceDropPercentage",void 0),f(this,"isTrendingOffer",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.title=e.title,n.offerUrl=e.offerUrl,n.imageUrl=e.imageUrl,n.originalPrice=e.originalPrice,n.newPrice=e.newPrice,n.discountPercentage=e.discountPercentage,n.shippingText=e.shippingText,n.id=e.id,n.priceDropPercentage=e.priceDropPercentage,n.isTrendingOffer=e.isTrendingOffer,n}}]),t}(),Wl=r((function t(e,n){s(this,t),f(this,"AverageSavings",void 0),f(this,"AverageUsers",void 0),f(this,"SellerName",void 0),f(this,"Domain",void 0),this.AverageSavings=e.averageSavings,this.AverageUsers=e.averageUsers,this.Domain=n,this.SellerName=e.websiteName})),$l=r((function t(e){s(this,t),f(this,"EventInfoTime",void 0),f(this,"EventInfoName",void 0),f(this,"Domain",void 0),f(this,"BestCoupon",void 0),f(this,"CashbackCategory",void 0),f(this,"StartingPrice",void 0),f(this,"CashbackSavings",void 0),f(this,"Discount",void 0),f(this,"AutoApplyScenario",void 0),f(this,"AutoApplyProcessTime",void 0),f(this,"ImpressionId",void 0),f(this,"JSVersion",void 0),f(this,"BuildVersion",void 0),f(this,"Currency",void 0),this.EventInfoTime=null==e?void 0:e.eventInfo_Time,this.EventInfoName=null==e?void 0:e.eventInfo_Name,this.Domain=null==e?void 0:e.domain,this.BestCoupon=null==e?void 0:e.bestCoupon,this.CashbackCategory=null==e?void 0:e.cashbackCategory,this.StartingPrice=null==e?void 0:e.startingPrice,this.CashbackSavings=null==e?void 0:e.cashbackSavings,this.Discount=null==e?void 0:e.discount,this.AutoApplyScenario=null==e?void 0:e.autoApplyScenario,this.AutoApplyProcessTime=null==e?void 0:e.autoApplyProcessTime,this.ImpressionId=null==e?void 0:e.impressionId,this.JSVersion=null==e?void 0:e.jSVersion,this.BuildVersion=null==e?void 0:e.buildVersion,this.Currency=null==e?void 0:e.currency}));function zl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Yl=r((function t(e){s(this,t),f(this,"TotalAutoApplySavingsAmount",void 0),f(this,"LastUpdatedAutoApplySavingsTimestamp",void 0),f(this,"ListOfAutoApplyTransactions",new Array),f(this,"TotalCouponClippingSavingsAmount",void 0),f(this,"LastUpdatedCouponClippingSavingsTimestamp",void 0),f(this,"ListOfCouponClippingTransactions",new Array),f(this,"TotalCashbackSavingsAmount",void 0),f(this,"LastUpdatedCashbackSavingsTimestamp",void 0),f(this,"ListOfCashbackTransactions",new Array),this.TotalAutoApplySavingsAmount=null==e?void 0:e.totalAutoApplySavingsAmount,this.LastUpdatedAutoApplySavingsTimestamp=null==e?void 0:e.lastUpdatedAutoApplySavingsTimestamp;var n=null==e?void 0:e.listOfAutoApplyTransactions;if((null==n?void 0:n.length)>0){var i,o=zl(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.ListOfAutoApplyTransactions.push(new $l(a))}}catch(t){o.e(t)}finally{o.f()}}this.TotalCouponClippingSavingsAmount=null==e?void 0:e.totalCouponClippingSavingsAmount,this.LastUpdatedCouponClippingSavingsTimestamp=null==e?void 0:e.lastUpdatedCouponClippingSavingsTimestamp;var r=null==e?void 0:e.listOfCouponClippingTransactions;if((null==r?void 0:r.length)>0){var l,c=zl(r);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.ListOfCouponClippingTransactions.push(new $l(u))}}catch(t){c.e(t)}finally{c.f()}}this.TotalCashbackSavingsAmount=null==e?void 0:e.totalCashbackSavingsAmount,this.LastUpdatedCashbackSavingsTimestamp=null==e?void 0:e.lastUpdatedCashbackSavingsTimestamp;var d=null==e?void 0:e.listOfCashbackTransactions;if((null==d?void 0:d.length)>0){var h,p=zl(d);try{for(p.s();!(h=p.n()).done;){var g=h.value;this.ListOfCashbackTransactions.push(new $l(g))}}catch(t){p.e(t)}finally{p.f()}}}));function jl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ql(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ql(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function ql(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Zl=r((function t(e,n,i){s(this,t),f(this,"IsAutoApplyAvailable",void 0),f(this,"Coupons",void 0),f(this,"Trivia",void 0),f(this,"FriendlyDomainName",void 0),f(this,"DomainName",void 0),f(this,"isCheckoutPageWithAutoApply",void 0),f(this,"IsPackageTrackingEnabled",void 0),f(this,"IsAmazonGiftCardEnabled",void 0),f(this,"Deals",void 0),f(this,"Recommendations",void 0),f(this,"SavingsFound",void 0),f(this,"BgaaResultState",void 0),f(this,"BgaaSavings",void 0),f(this,"BgaaViewedContent",void 0);var o=i.common.isCheckoutPage,a=i.common.currentDevice;if(this.IsAutoApplyAvailable=n,e){var r;if(this.Coupons=[],e.coupons){var l,c=jl(e.coupons);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.Coupons.push(new Ul(u,a))}}catch(t){c.e(t)}finally{c.f()}}if(this.Deals=[],e.deals){var d,h=jl(e.deals);try{for(h.s();!(d=h.n()).done;){var p=d.value;this.Deals.push(Vl.Create(p))}}catch(t){h.e(t)}finally{h.f()}}if(this.Recommendations=[],e.recommendations){var g,m=jl(e.recommendations);try{for(m.s();!(g=m.n()).done;){var v=g.value;this.Recommendations.push(Gl.Create(v))}}catch(t){m.e(t)}finally{m.f()}}e.retailerData&&(this.DomainName=e.retailerData.domainName,e.retailerData.retailerTrivia&&(this.Trivia=new Wl(e.retailerData.retailerTrivia,e.retailerData.domainName))),this.FriendlyDomainName=e.friendlyDomainName,this.IsPackageTrackingEnabled=e.isPackageTrackingEnabled,this.IsAmazonGiftCardEnabled=e.isAmazonGiftCardEnabled,this.isCheckoutPageWithAutoApply=null!==(r=this.Coupons&&this.Coupons.length>0&&this.IsAutoApplyAvailable&&o)&&void 0!==r&&r,null!=e&&e.savingsFound&&(this.SavingsFound=new Yl(null==e?void 0:e.savingsFound));try{var y=i.dataLoader.GetLoadTimeDataValue(vt.BgaaInfo,void 0);if(y){var C=JSON.parse(y);C&&(this.BgaaResultState=C.Result,this.BgaaSavings=C.Savings)}}catch(t){throw Error(t.message)}}})),Xl=r((function t(){s(this,t),f(this,"influencerName",void 0),f(this,"imgSrc",void 0),f(this,"followers",void 0),f(this,"channelId",void 0),f(this,"coupons",void 0)})),Jl=r((function t(e,n,i){var o=this;s(this,t),f(this,"exclusiveCouponsForDomain",[]),f(this,"youtubeCouponsData",void 0),f(this,"hasExclusiveCoupons",!1),f(this,"permission",null),e&&e.length>0&&(this.youtubeCouponsData=e,this.youtubeCouponsData.forEach((function(t){var e,a=new Xl;a.followers=t.followers,a.imgSrc=t.imgSrc,a.influencerName=t.influencerName,a.channelId=t.channelId,a.coupons=[];var r=/(http|https):\/\/(www\.)?([A-Za-z0-9]*\.(com|net|org|info|coop|int|co\.uk|org\.uk|ac\.uk|uk))/;null===(e=t.coupons)||void 0===e||e.forEach((function(t){var e,i,s=r.exec(t.retailerLink);t.retailerDomain&&(e=null===(i=t.retailerDomain)||void 0===i?void 0:i.replace(" ",""));(s&&5===s.length&&s[3]===n||e&&e.includes(n)||n.includes(e))&&(a.coupons.push(t),o.hasExclusiveCoupons=!0)})),o.hasExclusiveCoupons&&a.coupons.length>0&&o.exclusiveCouponsForDomain.push(a),o.permission=i})))})),Ql=Jl,tc=function(){function t(){s(this,t),f(this,"displayCategory",void 0),f(this,"image",void 0),f(this,"price",void 0),f(this,"productId",void 0),f(this,"retailerIdentifier",void 0),f(this,"title",void 0),f(this,"upc",void 0),f(this,"url",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.displayCategory=e.displayCategory,n.image=e.image,n.price=e.price,n.productId=e.productId,n.retailerIdentifier=e.retailerIdentifier,n.title=e.title,n.upc=e.upc,n.url=e.url,n}},{key:"CreateFromGroceryApi",value:function(e){var n=new t;return n.displayCategory=e.productDisplayCategory,n.image=e.productImage,n.price=e.productPrice,n.productId=e.productGTIN,n.retailerIdentifier=e.retailerIdentifier,n.title=e.productTitle,n.upc=e.productUPC,n.url=e.productURL,n}},{key:"CreateFromUAPI",value:function(e){var n=new t;return n.displayCategory=e.displayCategory,n.image=e.image,n.price=e.price,n.productId=e.productId,n.retailerIdentifier="",n.title=e.title,n.upc=e.upc,n.url=e.url,n}}]),t}();function ec(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function nc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ic=function(){function t(){s(this,t),f(this,"imageUrl",void 0),f(this,"value",void 0),f(this,"id",void 0),f(this,"description",void 0),f(this,"brand",void 0),f(this,"disclaimer",void 0),f(this,"expiryDate",void 0),f(this,"minQty",void 0),f(this,"cashBackProducts",void 0),this.cashBackProducts=[]}return r(t,null,[{key:"Create",value:function(e){var n=new t;if(n.cashBackProducts=[],e.cashbackProducts){var i,o=ec(e.cashbackProducts);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.cashBackProducts.push(tc.Create(a))}}catch(t){o.e(t)}finally{o.f()}}return n.imageUrl=e.imageUrl,n.value=e.value,n.id=e.id,n.description=e.description,n.brand=e.brand,n.disclaimer=e.disclaimer,n.expiryDate=e.expiryDate,n.minQty=e.minQty,n}},{key:"CreateFromGroceryApi",value:function(e){var n=new t;return n.imageUrl=e.offerImage.offerImage1,n.value=e.offerValue,n.id=e.offerId,n.description=e.offerDescription,n.brand=e.brandName,n.disclaimer=e.offerDisclaimer,n.expiryDate=e.offerExpiryDate,n.minQty=e.requirements.minQty,n.cashBackProducts=e.edgeRebateOfferProducts.map((function(t){return tc.CreateFromGroceryApi(t)})),n}},{key:"CreateFromUAPI",value:function(e){var n=new t;return n.imageUrl=e.imageUrl,n.value=e.value,n.id=e.id,n.description=e.description,n.brand=e.brand,n.disclaimer="",n.expiryDate=e.expiryDate,n.minQty=e.minQty,n.cashBackProducts=e.cashbackProducts.map((function(t){return tc.CreateFromUAPI(t)})),n}}]),t}();function oc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ac(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ac(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var rc=function(){function t(){s(this,t),f(this,"pdpOffer",void 0),f(this,"relatedOffers",void 0),this.relatedOffers=[]}return r(t,null,[{key:"Create",value:function(e){var n=new t;if(e.offer&&e.offer.id&&(n.pdpOffer=ic.Create(e.offer)),e.relatedOffers&&e.relatedOffers.length>0){var i,o=oc(e.relatedOffers);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.relatedOffers.push(ic.Create(a))}}catch(t){o.e(t)}finally{o.f()}}return n}}]),t}(),sc=r((function t(e){s(this,t),f(this,"offerValue",void 0),f(this,"offerImage",void 0),f(this,"offerDescription",void 0),f(this,"brandName",void 0),f(this,"offerSummary",void 0),f(this,"offerExpiryDate",void 0),f(this,"retailerClickThroughUrl",void 0),e&&(this.offerValue=e.offerValue,this.offerImage=e.offerImage,this.offerDescription=e.offerDescription,this.brandName=e.brandName,this.offerSummary=e.offerSummary,this.offerExpiryDate=e.offerExpiryDate,this.retailerClickThroughUrl=e.retailerClickThroughUrl)})),lc=r((function t(e){s(this,t),f(this,"couponId",void 0),f(this,"value",void 0),f(this,"categoryDescription",void 0),f(this,"offerSummary",void 0),f(this,"brand",void 0),f(this,"description",void 0),f(this,"imageUrlSuffix",void 0),f(this,"expirationDate",void 0),f(this,"redemptionLimit",void 0),e&&(this.couponId=e.coupon_id,this.value=e.value,this.categoryDescription=e.category_description,this.offerSummary=e.offer_summary_top,this.brand=e.brand,this.description=e.offer_print_detail,this.imageUrlSuffix=e.image_url_suffix,this.expirationDate=e.expiration_date,this.redemptionLimit=e.redemption_limit)}));function cc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var dc=r((function t(e){var n,i;if(s(this,t),f(this,"NationalOffers",void 0),f(this,"Restrictions",void 0),f(this,"NationalOffersImageUrlPrefix",void 0),f(this,"HashCode",void 0),this.NationalOffers=[],(null==e||null===(n=e.nationalOffers)||void 0===n?void 0:n.length)>0){var o,a=cc(e.nationalOffers);try{for(a.s();!(o=a.n()).done;){var r=o.value;this.NationalOffers.push(new lc(r))}}catch(t){a.e(t)}finally{a.f()}}if(this.Restrictions=[],(null==e||null===(i=e.restrictions)||void 0===i?void 0:i.length)>0){var l,c=cc(e.restrictions);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.Restrictions.push(new lc(u))}}catch(t){c.e(t)}finally{c.f()}}this.NationalOffersImageUrlPrefix=null==e?void 0:e.nationalOffersImageUrlPrefix,this.HashCode=null==e?void 0:e.hashCode}));function hc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return pc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function pc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var fc=r((function t(e){var n,i,o;if(s(this,t),f(this,"DigitalCoupons",void 0),f(this,"PrintableCoupons",void 0),f(this,"Cashback",void 0),f(this,"DomainName",void 0),this.DigitalCoupons=[],null!=e&&null!==(n=e.groceryOffers)&&void 0!==n&&n.digitalCoupons&&(null===(i=e.groceryOffers.digitalCoupons)||void 0===i?void 0:i.length)>0){var a,r=hc(e.groceryOffers.digitalCoupons);try{for(r.s();!(a=r.n()).done;){var l=a.value;this.DigitalCoupons.push(new sc(l))}}catch(t){r.e(t)}finally{r.f()}}null!=e&&null!==(o=e.groceryOffers)&&void 0!==o&&o.printableCoupons&&(this.PrintableCoupons=new dc(e.groceryOffers.printableCoupons)),this.DomainName=null==e?void 0:e.friendlyDomainName})),gc=r((function t(e,n){s(this,t),f(this,"name",void 0),f(this,"id",void 0),this.id=e,this.name=n})),mc=gc;function vc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function yc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Cc=[{name:"Household",id:"15342811"},{name:"Personal care",id:"3760911"},{name:"Food",id:"16310101"},{name:"Baby",id:"10787321"},{name:"Beverages",id:"16310231"},{name:"Pet",id:"2619533011"}],bc=function(){function t(){s(this,t),f(this,"ItemizedCashback",void 0),f(this,"ActivatedOfferIds",void 0),f(this,"SubmittedOfferIds",void 0),f(this,"pdpCashBack",void 0),f(this,"Categories",void 0),f(this,"InitialCategoryId",void 0),this.ItemizedCashback=[],this.ActivatedOfferIds=new Set,this.SubmittedOfferIds=[],this.Categories=new Map,this.InitialCategoryId=""}return r(t,null,[{key:"Create",value:function(e,n,i){var o=new t;if(e&&e.itemizedCashback){var a,r=vc(e.itemizedCashback);try{for(r.s();!(a=r.n()).done;){var s=a.value;o.ItemizedCashback.push(ic.Create(s))}}catch(t){r.e(t)}finally{r.f()}if(n){var l=e.filterCategories?e.filterCategories:[].concat(Cc),c=new mc("0","Popular");l.unshift(c),o.InitialCategoryId=l.length>0?l[0].id:"";l.slice(0,4).forEach((function(t){o.Categories.set(t.id,t.name)}))}if(Array.isArray(e.activatedOfferIds)){var u,d=vc(e.activatedOfferIds);try{for(d.s();!(u=d.n()).done;){var h=u.value;o.ActivatedOfferIds.add(h)}}catch(t){d.e(t)}finally{d.f()}}if(Array.isArray(e.submittedOfferIds)){var p,f=vc(e.submittedOfferIds);try{for(f.s();!(p=f.n()).done;){var g=p.value;o.SubmittedOfferIds.push(g)}}catch(t){f.e(t)}finally{f.f()}}}return o}}]),t}(),Sc=r((function t(e){s(this,t),f(this,"Tips",void 0),this.Tips=e})),xc=r((function t(e,n){s(this,t),f(this,"trackerKey",void 0),f(this,"actionURL",void 0),f(this,"orderSummary",void 0),f(this,"domain",void 0),f(this,"orderStatus",void 0),f(this,"productsInOrder",void 0),e&&n&&(this.trackerKey=e.trackerKey,this.actionURL=e.actionURL,this.orderStatus=e.orderStatus,this.domain=e.domain,this.orderSummary=e.orderSummary,this.productsInOrder=n)})),Ec=r((function t(e,n,i,o){s(this,t),f(this,"packageTrackingFreShown",void 0),f(this,"packageTrackingUserConsented",void 0),f(this,"orders",void 0),f(this,"shouldShowPackageTrackingNotification",void 0),this.packageTrackingFreShown=null!=e&&e,this.packageTrackingUserConsented=null!=n&&n,this.orders=i,this.shouldShowPackageTrackingNotification=null!=o&&o})),Ac=function(){function t(e){s(this,t),f(this,"Guid",void 0),f(this,"ExpMonth",void 0),f(this,"ExpYear",void 0),f(this,"FullName",void 0),f(this,"MaskedCardNumber",void 0),f(this,"CardNumber",void 0),f(this,"CardType",void 0),f(this,"Address",void 0);var n=e.metadata.summaryLabel.substr(0,e.metadata.summaryLabel.indexOf(" ")),i=e.metadata.summaryLabel.substr(e.metadata.summaryLabel.length-5,e.metadata.summaryLabel.length);this.UpdateFileds(e.guid,e.expirationMonth,e.expirationYear,e.name,e.cardNumber,H[n.toUpperCase().trim()],i,e.address)}return r(t,[{key:"UpdateFileds",value:function(t,e,n,i,o,a,r,s){this.Guid=t,this.ExpMonth=e,this.ExpYear=n,this.FullName=i,this.CardNumber=o,this.CardType=a,this.MaskedCardNumber=r,this.Address=s}}]),t}(),Tc=r((function t(e){s(this,t),f(this,"providerName",void 0),f(this,"projectedMonthlyPaymentDetails",void 0),f(this,"paymentSuggestion",void 0),f(this,"period",void 0),f(this,"lowerThreshold",void 0),f(this,"upperThreshold",void 0),f(this,"amount",void 0),f(this,"helpInformation",void 0),f(this,"managePaymentLabel",void 0),f(this,"managePaymentLinkText",void 0),e&&(this.providerName=e.providerName,this.projectedMonthlyPaymentDetails=e.projectedMonthlyPaymentDetails,this.paymentSuggestion=e.paymentSuggestion,this.period=e.period,this.lowerThreshold=e.lowerThreshold,this.upperThreshold=e.upperThreshold,this.amount=e.amount,this.helpInformation=e.helpInformation,this.managePaymentLabel=e.managePaymentLabel,this.managePaymentLinkText=e.managePaymentLinkText)})),Dc=r((function t(e){s(this,t),f(this,"productLink",void 0),this.productLink=e})),kc=Dc,Ic=r((function t(e){if(s(this,t),f(this,"aggregatedNumVehInBucket",void 0),f(this,"aggregatedBuckets",void 0),f(this,"maxPrice",void 0),f(this,"minPrice",void 0),f(this,"avgPrice",void 0),f(this,"cumulativePricePosition",void 0),f(this,"currency",void 0),f(this,"validData",!1),f(this,"make",void 0),f(this,"model",void 0),e){var n=e.aggNumVehInBucket,i=e.aggBuckets;if(!n||7!==n.length)return;if(!i||7!==i.length)return;this.aggregatedNumVehInBucket=n,this.aggregatedBuckets=i,this.maxPrice=e.maxPrice,this.minPrice=e.minPrice,this.avgPrice=e.avgPrice,this.cumulativePricePosition=e.cumePricePosition,this.currency=e.currency,this.make=e.make,this.model=e.model,this.validData=!0}})),wc=r((function t(e){var n=this;if(s(this,t),f(this,"Url",void 0),f(this,"Description",void 0),f(this,"SellerName",void 0),f(this,"Domain",void 0),f(this,"InstallmentAmount",void 0),f(this,"InstallmentDescription",void 0),f(this,"LowPrice",void 0),f(this,"Price",void 0),f(this,"FavIcon",void 0),f(this,"CurrencySymbol",void 0),f(this,"ImpressionToken",void 0),f(this,"ProductImageUrl",void 0),f(this,"ProductImageOriginalUrl",void 0),f(this,"PriceId",void 0),f(this,"IntendedPrice",void 0),f(this,"Extensions",void 0),f(this,"BillingType",void 0),f(this,"ShouldOnTop",void 0),f(this,"geoDistance",void 0),f(this,"mileageUnit",void 0),f(this,"mileageValue",void 0),f(this,"isPopular",void 0),f(this,"dealRating",void 0),f(this,"marketHint",void 0),f(this,"listingTypes",void 0),f(this,"listingAccidentText",void 0),f(this,"valideOffer",!1),e){var i,o,a,r,l=e.installmentInfo;l&&(this.InstallmentAmount=l.amount,this.InstallmentDescription=l.description);var c,u,d,h,p,g,m,v,y,C,b,S,x,E,A,T=e.offer,D=e.offerLevelSignals;if(T)this.LowPrice=T.lowPrice,this.Price=T.price,this.Description=null===(c=T.itemOffered)||void 0===c?void 0:c.name,this.SellerName=null===(u=T.seller)||void 0===u?void 0:u.name,this.Domain=null===(d=T.seller)||void 0===d?void 0:d.domain,this.FavIcon=null===(h=T.seller)||void 0===h?void 0:h.favicon,this.Url=T.url,this.CurrencySymbol=T.priceCurrencySymbol,this.ProductImageUrl=null===(p=T.itemOffered)||void 0===p||null===(g=p.image)||void 0===g?void 0:g.contentUrl,this.ProductImageOriginalUrl=T.itemOffered.image.originalUrl,this.geoDistance=null===(m=T.metadata)||void 0===m?void 0:m.geoDistance,this.mileageUnit=null===(v=T.metadata)||void 0===v?void 0:v.mileageUnit,this.mileageValue=null===(y=T.metadata)||void 0===y?void 0:y.mileageValue,this.isPopular=null===(C=T.metadata)||void 0===C?void 0:C.isPopular,this.dealRating=null===(b=T.metadata)||void 0===b?void 0:b.dealRating,this.marketHint=null===(S=T.metadata)||void 0===S?void 0:S.marketHint,this.listingTypes=null===(x=T.metadata)||void 0===x||null===(E=x.listingTypes)||void 0===E?void 0:E.map((function(t){return t.toLowerCase()})),this.listingAccidentText=null===(A=T.metadata)||void 0===A?void 0:A.accidentsIconText,this.valideOffer=!0;D&&(this.ShouldOnTop=D.autoshow),this.BillingType=null!==(i=null===(o=e.billingType)||void 0===o?void 0:o.toLowerCase())&&void 0!==i?i:"",this.ImpressionToken=null!==(a=e.impressionToken)&&void 0!==a?a:"",this.PriceId=null!==(r=e.price_comparison_id)&&void 0!==r?r:"";var k=e.extensions;k&&k.length>0&&(this.Extensions=new Array,k.forEach((function(t){var e=t.text,i=t._type;n.Extensions.push({ExtensionText:e,ExtensionType:i})})))}})),Pc=wc;function Oc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Mc=function(){function t(e,n,i,o,a){var r=this;if(s(this,t),f(this,"Price",void 0),f(this,"CompetingPrices",void 0),f(this,"currentImageUrl",void 0),f(this,"currentProductTitle",void 0),f(this,"entityName",void 0),f(this,"shouldBeInPolePosition",void 0),f(this,"lowestPrice",void 0),f(this,"shoudlRenderPriceComparisonNotification",void 0),f(this,"segment",void 0),f(this,"autosNotificationScenario",void 0),f(this,"autosPriceInsight",void 0),e){var l="",c="";if(e&&e.value&&n&&(i&&i.image_url&&(l=i.image_url,c=i.title),i&&i.entity&&i.entity.name&&(this.entityName=i.entity.name)),this.Price=n,this.currentImageUrl=l,this.currentProductTitle=c,this.CompetingPrices=[],e.value&&e.value.length>0){var u,d=Oc(e.value);try{for(d.s();!(u=d.n()).done;){var h=u.value;this.CompetingPrices.push(new Pc(h))}}catch(t){d.e(t)}finally{d.f()}}this.CompetingPrices&&this.CompetingPrices.length>0&&this.CompetingPrices.forEach((function(t){t.IntendedPrice=r.getIntendedPrice(t)})),e&&e.segment&&(this.segment=e.segment),e&&e.priceInsights&&(this.autosPriceInsight=new Ic(e.priceInsights)),e&&e.autosAutoshowScenario&&(this.autosNotificationScenario=e.autosAutoshowScenario),this.lowestPrice=this.getLowestPrice(),this.shouldBeInPolePosition=this.ShouldBeInPolePosition(this),this.shoudlRenderPriceComparisonNotification=this.ShouldRenderNotification(this,o,a)}}return r(t,[{key:"getIntendedPrice",value:function(t){if(t.InstallmentAmount){var e=parseFloat(t.InstallmentAmount.replace(/[^0-9.]/g,""));if(t.InstallmentDescription){var n=parseInt(t.InstallmentDescription.replace(/[^0-9]/g,""),10);n&&(e*=n)}return e}return t.LowPrice?t.LowPrice:t.Price}},{key:"ShouldBeInPolePosition",value:function(t){if(t&&t.CompetingPrices&&t.CompetingPrices.length>0){var e=this.getLowestPrice(),n=t.Price-e;if(e>0&&n>0&&n>Math.ceil(.05*t.Price))return!0}return!1}},{key:"ShouldRenderNotification",value:function(t,e,n){var i;return null!==(i=t&&t.CompetingPrices&&t.CompetingPrices.length>0&&e===Tt.Auto&&n===Fe.AUTO_SHOW_LOWER_PRICE_FOUND)&&void 0!==i&&i}},{key:"getLowestPrice",value:function(){if(this.Price&&-1!==this.Price){var t=this.Price;return this.CompetingPrices.forEach((function(e){var n=e.IntendedPrice;n&&n<t&&(t=n)})),t===this.Price?-1:t}return-1}}]),t}(),Nc=r((function t(e){s(this,t),f(this,"canonicalUrl",void 0),f(this,"image",void 0),f(this,"name",void 0),f(this,"price",void 0),f(this,"pageLocale",void 0),f(this,"priceCurrency",void 0),f(this,"priceValue",void 0),f(this,"type",void 0),f(this,"latestPrice",void 0),e&&(this.canonicalUrl=e.canonical_url,this.image=e.image,this.name=e.name,this.price=e["offers/price"],this.pageLocale=e.page_locale,this.priceCurrency=e.price_currency,this.priceValue=e.price_value,this.type=e.type,this.latestPrice=e.latestPrice)})),Lc=r((function t(e){if(s(this,t),f(this,"category",void 0),f(this,"entity",void 0),f(this,"title",void 0),f(this,"url",void 0),f(this,"domain",void 0),f(this,"newTimestamp",void 0),e&&(this.category=e.category,this.entity=new Nc(e.entity),this.title=e.title,this.url=e.url,this.newTimestamp=e.newTimestamp,this.url)){var n=this.url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);n&&n.length>2&&"string"==typeof n[2]&&(this.domain=n[2])}})),_c=r((function t(e,n){s(this,t),f(this,"productImageUrl",void 0),f(this,"productName",void 0),this.productImageUrl=e,this.productName=n})),Fc=function(){function t(e){var n,i,o,a,r,l;s(this,t),f(this,"Guid",void 0),f(this,"Emails",void 0),f(this,"FirstName",void 0),f(this,"MiddleName",void 0),f(this,"LastName",void 0),f(this,"FullName",void 0),f(this,"AddressLines",void 0),f(this,"City",void 0),f(this,"State",void 0),f(this,"Country",void 0),f(this,"Zip",void 0),f(this,"PhoneNumbers",void 0),f(this,"Honorific",void 0),this.UpdateFields(e.guid,e.emailAddresses,null!==(n=null===(i=e.fullNameSplit)||void 0===i?void 0:i.firstName)&&void 0!==n?n:"",null!==(o=null===(a=e.fullNameSplit)||void 0===a?void 0:a.middleName)&&void 0!==o?o:"",null!==(r=null===(l=e.fullNameSplit)||void 0===l?void 0:l.lastName)&&void 0!==r?r:"",e.fullNames,e.honorific,e.addressLines,e.addressLevel2,e.addressLevel1,e.countryCode,e.postalCode,e.phoneNumbers)}return r(t,[{key:"UpdateFields",value:function(t,e,n,i,o,a,r,s,l,c,u,d,h){this.Guid=t,this.Emails=e,this.FirstName=n,this.MiddleName=i,this.LastName=o,this.FullName=null==a?void 0:a[0],this.AddressLines=s,this.City=l,this.State=c,this.Country=u,this.Zip=d,this.PhoneNumbers=h,this.Honorific=r}}]),t}(),Hc=function(){function t(){s(this,t),f(this,"rawValue",void 0),f(this,"maxValue",void 0)}return r(t,[{key:"normalizedValue",get:function(){return t.NormalizedMaxRating*(this.rawValue/this.maxValue)}}],[{key:"createRating",value:function(e,n){if(n<1||e<0||e>n)return null;var i=new t;return i.rawValue=e,i.maxValue=n,i}}]),t}();f(Hc,"NormalizedMaxRating",5);var Bc=Hc;function Uc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Vc=function(t){u(n,t);var e=Uc(n);function n(){var t;s(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return f(l(t=e.call.apply(e,[this].concat(o))),"totalReviews",void 0),f(l(t),"displayText",void 0),t}return r(n,null,[{key:"createAggregateRating",value:function(t,e,n,i){if(n<1)return null;var o=Bc.createRating(t,e);return o.totalReviews=n,o&&(o.displayText=i),o}}]),n}(Bc),Gc=Vc,Wc=function(){function t(){s(this,t),f(this,"cardOrder",void 0)}return r(t,null,[{key:"Compare",value:function(t,e){return t.cardOrder-e.cardOrder}}]),t}();function $c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var zc,Kc=function(t){u(n,t);var e=$c(n);function n(){var t;s(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return f(l(t=e.call.apply(e,[this].concat(o))),"id",void 0),f(l(t),"url",void 0),f(l(t),"favIconDomain",void 0),f(l(t),"provider",void 0),f(l(t),"title",void 0),f(l(t),"rating",void 0),f(l(t),"caption",void 0),f(l(t),"attribution",void 0),t}return r(n,null,[{key:"create",value:function(t,e,i,o,a,r,s,l,c,u){if(t&&i&&c&&!u?!a:!r)return null;var d,h=new n;(h.id=t,h.cardOrder=e,h.url=i,h.favIconDomain=o,h.provider=a,h.title=r,h.caption=c,h.attribution=u,s&&l)&&(h.rating=null!==(d=Bc.createRating(s,l))&&void 0!==d?d:void 0);return h}}]),n}(Wc),Yc=Kc;function jc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}!function(t){t[t.H=0]="H",t[t.V=1]="V"}(zc||(zc={}));var qc=function(t){u(n,t);var e=jc(n);function n(){var t;s(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return f(l(t=e.call.apply(e,[this].concat(o))),"id",void 0),f(l(t),"cardOrientation",void 0),f(l(t),"title",void 0),f(l(t),"thumbnailId",void 0),f(l(t),"thumbnailUrl",void 0),f(l(t),"clickthroughUrl",void 0),f(l(t),"publisher",void 0),f(l(t),"creator",void 0),f(l(t),"durationText",void 0),f(l(t),"durationLabel",void 0),t}return r(n,null,[{key:"create",value:function(t,e,i,o,a,r,s,l,c,u){if(!t||!o||!s||!a&&!r)return null;var d=new n;if(d.id=t,d.cardOrder=e,d.cardOrientation=(null==i?void 0:i.toUpperCase())===zc[zc.H]?zc.H:zc.V,d.title=o,d.thumbnailId=a,d.thumbnailUrl=r,d.clickthroughUrl=s,d.publisher=l,d.creator=c,u>0){var h=Math.floor(u/60),p=Math.round(u)%60,f=p<10?"0"+p:p;d.durationText=h+":"+f,d.durationLabel=h>0?"".concat(h," minutes ").concat(f," seconds"):"".concat(f," seconds")}return d}},{key:"Narrow",value:function(t){return"clickthroughUrl"in t?t:void 0}}]),n}(Wc),Zc=qc;function Xc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Jc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Jc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Qc=function(){function t(){s(this,t),f(this,"aggregateRating",void 0),f(this,"sectionTitle",void 0),f(this,"entityName",void 0),f(this,"expertReviews",void 0),f(this,"videos",void 0)}return r(t,[{key:"canCreateInlineRating",get:function(){return!!this.aggregateRating}},{key:"totalCards",get:function(){var t,e,n,i;return(null!==(t=null===(e=this.expertReviews)||void 0===e?void 0:e.length)&&void 0!==t?t:0)+(null!==(n=null===(i=this.videos)||void 0===i?void 0:i.length)&&void 0!==n?n:0)}},{key:"hasExpertReviews",get:function(){return!!this.expertReviews&&this.expertReviews.length>0}},{key:"hasVideos",get:function(){return!!this.videos&&this.videos.length>0}},{key:"CanRankInPole",value:function(t,e){var n,i,o,a,r;if(this.totalCards<3)return!1;if((null===(n=t.PriceHistoryData)||void 0===n?void 0:n.getPriceHistoryType())===Xs.PRICEDROP)return!1;if((null!==(i=null===(o=t.PriceComparisonData)||void 0===o||null===(a=o.CompetingPrices)||void 0===a?void 0:a.length)&&void 0!==i?i:0)>0&&(null!==(r=t.PriceComparisonData)&&void 0!==r&&r.shouldBeInPolePosition))return!1;return!0}}],[{key:"create",value:function(e,n){if(e){var i,o,a,r,s,l=new t;if(l.sectionTitle=e.sectionTitle,l.entityName=null!==(i=null==n||null===(o=n.entity)||void 0===o?void 0:o.name)&&void 0!==i?i:null==n?void 0:n.title,l.aggregateRating=null!==(a=t.createAggregateRating(e.aggregatedRatingReview))&&void 0!==a?a:void 0,Array.isArray(null===(r=e.professionalReviews)||void 0===r?void 0:r.reviews)){var c,u=[],d=Xc(e.professionalReviews.reviews);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=t.createExpertReview(h);p&&u.push(p)}}catch(t){d.e(t)}finally{d.f()}u.length>0&&(l.expertReviews=u)}if(Array.isArray(null===(s=e.videoReviews)||void 0===s?void 0:s.reviews)){var f,g=[],m=Xc(e.videoReviews.reviews);try{for(m.s();!(f=m.n()).done;){var v=f.value,y=t.createVideo(v);y&&g.push(y)}}catch(t){m.e(t)}finally{m.f()}g.length>0&&(l.videos=g)}return l.aggregateRating||l.expertReviews||l.videos?l:void 0}}},{key:"createAggregateRating",value:function(t){return t&&t.rating?Gc.createAggregateRating(t.rating.value,t.rating.maxValue,t.totalReviewCount):null}},{key:"createExpertReview",value:function(t){if(t&&t.publisher){var e,n,i;try{var o;i=new URL(null!==(o=t.iconUri)&&void 0!==o?o:t.url).hostname}catch(t){}return Yc.create(t.id,t.cardOrder,t.url,i,t.publisher,t.title,null===(e=t.rating)||void 0===e?void 0:e.value,null===(n=t.rating)||void 0===n?void 0:n.maxValue,t.caption,t.attribution)}return null}},{key:"createVideo",value:function(t){if(null!=t&&t.publisher||null!=t&&t.creator){var e,n=null!==(e=t.clickthroughUrl)&&void 0!==e?e:t.contentUrl;return Zc.create(t.id,t.cardOrder,t.cardOrientation,t.title,t.thumbnailId,t.thumbnailUrl,n,t.publisher,t.creator,t.lengthSeconds)}return null}}]),t}(),tu=function(){function t(e,n,i,o){s(this,t),f(this,"Points",void 0),f(this,"IsRewardsActive",void 0),f(this,"IsSignedInUser",void 0),f(this,"IsAssociatedUser",void 0),f(this,"IsTrialUser",void 0),f(this,"TrialUserExpiryInDays",void 0),f(this,"ActivateRewardsStatus",void 0),f(this,"shouldRenderRewardNotification",void 0),f(this,"IsControlUser",void 0),f(this,"experiments",void 0),this.Points=e.points,this.IsRewardsActive=e.isRewardsActive,this.IsAssociatedUser=e.isAssociatedUser,this.IsSignedInUser=e.isSignedInUser,this.IsTrialUser=e.isTrialUser,this.TrialUserExpiryInDays=e.trialUserExpiryInDays,this.IsControlUser=e.isControlUser,this.ActivateRewardsStatus=n,this.experiments=o,this.shouldRenderRewardNotification=this.ShouldRenderRewardNotification(this,i)}return r(t,[{key:"isUserDefined",value:function(){return this.IsSignedInUser||this.IsAssociatedUser||this.IsTrialUser}},{key:"ShouldRenderRewardNotification",value:function(t,e){return t&&t.IsRewardsActive&&this.experiments.isExperimentActive(Be.rewardNotification)&&e===Tt.Auto}}]),t}(),eu=function(){function t(e,n){s(this,t),f(this,"shouldRenderSustainability",void 0),f(this,"isDomainSustainabilitySupported",void 0),f(this,"experiments",void 0),this.experiments=n,this.isDomainSustainabilitySupported=e,this.shouldRenderSustainability=this.ShouldRenderSustainability()}return r(t,[{key:"ShouldRenderSustainability",value:function(){return this.isDomainSustainabilitySupported&&this.experiments.isExperimentActive(Be.sustainability)}}]),t}(),nu=r((function t(e,n,i,o,a){s(this,t),f(this,"Text",void 0),f(this,"IconType",void 0),f(this,"MinimumPurchase",void 0),f(this,"RetailerData",void 0),f(this,"CheckoutPageUrl",void 0),this.Text=e,this.IconType=n,this.MinimumPurchase=i,this.RetailerData=we.Create(o),this.CheckoutPageUrl=a})),iu=nu,ou=r((function t(e){s(this,t),f(this,"merchantName",void 0),f(this,"merchantFullName",void 0),f(this,"merchantId",void 0),f(this,"merchantUri",void 0),f(this,"originalUrl",void 0),f(this,"description",void 0),f(this,"image",void 0),f(this,"priority",void 0),f(this,"affiliateNetwork",void 0),f(this,"commissionType",void 0),f(this,"commissionValue",void 0),f(this,"exclusions",void 0),this.merchantName=e.merchantName,this.merchantFullName=e.merchantFullName,this.merchantId=e.merchantId,this.merchantUri=e.merchantUri,this.originalUrl=e.originalUrl,this.description=e.description,this.image=e.image,this.priority=e.priority,this.affiliateNetwork=e.affiliateNetwork,this.commissionType=e.commissionType,this.commissionValue=e.commissionValue,this.exclusions=e.exclusions})),au=ou;function ru(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return su(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return su(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function su(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var lu=r((function t(e){if(s(this,t),f(this,"Retailers",void 0),this.Retailers=[],null!=e&&e.topRetailers){var n,i=ru(e.topRetailers);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.Retailers.push(new au(o))}}catch(t){i.e(t)}finally{i.f()}}})),cu=r((function t(e){s(this,t),f(this,"domain",void 0),f(this,"title",void 0),f(this,"currencySymbol",void 0),f(this,"productUrl",void 0),f(this,"imageUrl",void 0),f(this,"currentPrice",void 0),f(this,"olderPrice",void 0),f(this,"priceDropPercent",void 0),e&&e.product&&(this.domain=e.product.domain,this.title=e.product.title,this.currencySymbol=e.product.currencySymbol,this.productUrl=e.product.productUrl,this.imageUrl=e.product.imageUrl,this.currentPrice=e.product.currentPrice,this.olderPrice=e.product.olderPrice,this.priceDropPercent=e.product.priceDropPercent)}));function uu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return du(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return du(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function du(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var hu=r((function t(e){if(s(this,t),f(this,"productShowItem",void 0),f(this,"highestDropPercentageApiResponse",void 0),f(this,"maxDropPercent",void 0),e&&e.userDataResponseList){var n,i=uu(e.userDataResponseList);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.priceHistory&&o.priceHistory.product&&o.priceHistory.product.priceDropPercent&&(void 0===this.maxDropPercent||o.priceHistory.product.priceDropPercent>this.maxDropPercent)&&(this.maxDropPercent=o.priceHistory.product.priceDropPercent,this.highestDropPercentageApiResponse=o)}}catch(t){i.e(t)}finally{i.f()}this.highestDropPercentageApiResponse&&this.highestDropPercentageApiResponse.priceHistory&&(this.productShowItem=new cu(this.highestDropPercentageApiResponse.priceHistory))}})),pu=function(){function t(e){var n;s(this,t),f(this,"cardNumber",void 0),f(this,"cardHolderName",void 0),f(this,"cardCVC",void 0),f(this,"expires",void 0),f(this,"billingInfo",void 0),f(this,"isLinking",void 0),f(this,"isLinkingSuccess",void 0),f(this,"isAutofillSuccess",void 0),f(this,"hasError",void 0),f(this,"cardProvider",void 0),this.cardNumber=null==e?void 0:e.cardNumber,this.cardHolderName=null==e?void 0:e.cardHolderName,this.cardCVC=null==e?void 0:e.cardCVC,this.expires=null==e?void 0:e.expires,this.billingInfo=null==e?void 0:e.billingInfo,this.isLinking=null==e?void 0:e.isLinking,this.isLinkingSuccess=null==e?void 0:e.isLinkingSuccess,this.isAutofillSuccess=this.parseIsAutofillSuccessMessage(null==e?void 0:e.isAutofillSuccess),this.hasError=null!==(n=null==e?void 0:e.hasError)&&void 0!==n?n:null,this.cardProvider=null==e?void 0:e.cardProvider}return r(t,[{key:"parseIsAutofillSuccessMessage",value:function(t){return"null"===t?null:"true"===t}}]),t}();function fu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return gu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function gu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var mu=function(){function t(e,n){s(this,t),f(this,"apiResponse",void 0),f(this,"flyoutData",void 0),f(this,"logModule",void 0),f(this,"pageHandlerModule",void 0),f(this,"apiResponseStr",void 0),this.logModule=e,this.pageHandlerModule=n}var n,i,a,l,c,u,d,h,p;return r(t,[{key:"InitializeData",value:(p=e(o().mark((function t(e){var n,i,a,r,s,l,c,u,d,h,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.flyoutData=e,(s=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.GuestCouponsApiResponse,void 0))&&this.flyoutData.common.lastCommittedURL&&this.flyoutData.common.lastCommittedURL.includes("pinterest.com/pin")?this.apiResponseStr=s:this.apiResponseStr=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.CouponsApiResponse,void 0),this.apiResponseStr&&(this.apiResponse=JSON.parse(this.apiResponseStr),(l=Ne.Create(this.apiResponse))&&(this.flyoutData.dataStoreModule.ApiData=l))}catch(t){c=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"InitializeData error ".concat(t),c)}return null!==(n=this.flyoutData.dataStoreModule.ApiData)&&void 0!==n&&null!==(i=n.retailerData)&&void 0!==i&&i.domainName?e.common.domain=null===(u=this.flyoutData.dataStoreModule.ApiData)||void 0===u||null===(d=u.retailerData)||void 0===d?void 0:d.domainName:e.common.currentUrl&&(h=this.getDomainNameFromUrl(e.common.currentUrl))&&(e.common.domain=h),null!==(a=this.flyoutData.dataStoreModule.ApiData)&&void 0!==a&&a.market&&(e.common.market=null===(p=this.flyoutData.dataStoreModule.ApiData)||void 0===p?void 0:p.market),null!==(r=this.flyoutData.dataStoreModule.ApiData)&&void 0!==r&&r.aFDMarket&&(e.common.afdMarket=null===(f=this.flyoutData.dataStoreModule.ApiData)||void 0===f?void 0:f.aFDMarket),t.next=6,this.createDataWithErrorHandling(Rt.COUPON);case 6:return this.createDataWithErrorHandling(Rt.CASHBACK),this.createDataWithErrorHandling(Rt.PRICECOMPARISON),this.flyoutData.experimentData.setShowPCBannerUX(this.flyoutData.common.showPCBannerUX,$e("banneropen")||this.flyoutData.common.shouldShowBanner,this.flyoutData.dataStoreModule.PriceComparisonData,this.flyoutData.common.foundLowerPrice),this.createDataWithErrorHandling(Rt.PRICEHISTORY),t.next=12,this.createDataWithErrorHandling(Rt.CHECKOUTAUTOFILL);case 12:return this.createDataWithErrorHandling(Rt.NUDGETIPSDATA),this.createDataWithErrorHandling(Rt.RATINGSANDREVIEWS),this.createDataWithErrorHandling(Rt.COUPONCLIPPING),this.createDataWithErrorHandling(Rt.PRODUCTHISTORY),this.createDataWithErrorHandling(Rt.REWARD),this.createDataWithErrorHandling(Rt.PAYMENT_OPTIONS),t.next=20,this.createDataWithErrorHandling(Rt.EXCLUSIVECOUPONS);case 20:return this.createDataWithErrorHandling(Rt.VIRTUAL_CARD),this.createDataWithErrorHandling(Rt.TOP_RETAILERS),this.createDataWithErrorHandling(Rt.GROCERY_COUPON),this.createDataWithErrorHandling(Rt.ORDERSTATUSTRACKING),this.createDataWithErrorHandling(Rt.ViewedProductPriceDrop),this.createDataWithErrorHandling(Rt.SUSTAINABILITY),t.next=28,this.createDataWithErrorHandling(Rt.PINTEREST);case 28:this.createDataWithErrorHandling(Rt.ABANDONED_CART);case 29:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"createDataWithErrorHandling",value:(h=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=e,t.next=t.t0===Rt.CASHBACK?4:t.t0===Rt.COUPON?6:t.t0===Rt.PRICECOMPARISON?10:t.t0===Rt.PRICEHISTORY?12:t.t0===Rt.NUDGETIPSDATA?14:t.t0===Rt.CHECKOUTAUTOFILL?16:t.t0===Rt.RATINGSANDREVIEWS?20:t.t0===Rt.PRODUCTHISTORY?22:t.t0===Rt.REWARD?24:t.t0===Rt.PAYMENT_OPTIONS?26:t.t0===Rt.EXCLUSIVECOUPONS?28:t.t0===Rt.VIRTUAL_CARD?31:t.t0===Rt.TOP_RETAILERS?33:t.t0===Rt.GROCERY_COUPON?35:t.t0===Rt.ORDERSTATUSTRACKING?37:t.t0===Rt.ViewedProductPriceDrop?39:t.t0===Rt.SUSTAINABILITY?40:t.t0===Rt.PINTEREST?42:t.t0===Rt.ABANDONED_CART?46:47;break;case 4:return this.flyoutData.dataStoreModule.CashBackData=this.GetCashBackData(),t.abrupt("break",47);case 6:return t.next=8,this.GetCouponData();case 8:return this.flyoutData.dataStoreModule.CouponData=t.sent,t.abrupt("break",47);case 10:return this.flyoutData.dataStoreModule.PriceComparisonData=this.GetPriceComparisonData(),t.abrupt("break",47);case 12:return this.flyoutData.dataStoreModule.PriceHistoryData=this.GetPriceHistoryData(),t.abrupt("break",47);case 14:return this.flyoutData.dataStoreModule.NudgeTipsData=this.GetNudgeTipsData(),t.abrupt("break",47);case 16:return t.next=18,this.GetCheckoutUserData();case 18:return this.flyoutData.dataStoreModule.CheckoutUserData=t.sent,t.abrupt("break",47);case 20:return this.flyoutData.dataStoreModule.RatingsAndReviewsData=this.GetRatingsAndReviewsData(),t.abrupt("break",47);case 22:return this.flyoutData.dataStoreModule.ProductHistoryData=this.GetProductHistoryData(),t.abrupt("break",47);case 24:return this.flyoutData.dataStoreModule.RewardData=this.GetRewardData(),t.abrupt("break",47);case 26:return this.flyoutData.dataStoreModule.PaymentOptionsData=this.GetPaymentOptionsData(),t.abrupt("break",47);case 28:return t.next=30,this.GetExclusiveCouponData();case 30:this.flyoutData.dataStoreModule.ExclusiveCouponsData=t.sent;case 31:return this.flyoutData.dataStoreModule.VirtualCardData=this.GetVirtualCardData(),t.abrupt("break",47);case 33:return this.flyoutData.dataStoreModule.TopRetailerData=this.GetTopRetailerData(),t.abrupt("break",47);case 35:return this.flyoutData.dataStoreModule.GroceryCouponData=this.GetGroceryData(),t.abrupt("break",47);case 37:return this.flyoutData.dataStoreModule.OrderTrackingData=this.GetOrderTrackingData(),t.abrupt("break",47);case 39:this.flyoutData.dataStoreModule.ViewedProductListData=this.GetViewedProductPriceDropData();case 40:return this.flyoutData.dataStoreModule.SustainabilityData=this.GetSustainabilityData(),t.abrupt("break",47);case 42:return t.next=44,this.GetPinterestData();case 44:return this.flyoutData.dataStoreModule.PinterestData=t.sent,t.abrupt("break",47);case 46:this.flyoutData.dataStoreModule.AbandonedCartData=this.GetAbandonedCartData();case 47:t.next=53;break;case 49:t.prev=49,t.t1=t.catch(0),n=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Data creation Exception: ".concat(e," ").concat(Il.getErrorString(t.t1)),n);case 53:case"end":return t.stop()}}),t,this,[[0,49]])}))),function(t){return h.apply(this,arguments)})},{key:"GetCashBackData",value:function(){var t,e,n;this.apiResponse&&(t=this.apiResponse.cashback,e=this.apiResponse.personalizedAdsResponse,n=this.apiResponse.isCashbackEstimationSupportedForDomain);var i=this.flyoutData.dataLoader.GetLoadTimeDataValue("rebatesActive",!1),o=this.flyoutData.dataLoader.GetLoadTimeDataValue("isConfirmationPage",!1),a=this.flyoutData.dataLoader.GetLoadTimeDataValue("rebatesDeactivating",!1),r=this.flyoutData.dataLoader.GetLoadTimeDataValue("activateRebatesStatus",null);return new Hl(t,e,i,o,a,this.flyoutData.experimentData,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination,r,this.flyoutData.common.isRebatesEnabled,!!n)}},{key:"GetCouponData",value:(d=e(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.apiResponse){t.next=12;break}if(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("isAutoApplyAvailable",!1),n=this.apiResponse,this.flyoutData.common.isCheckoutPage||this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_CHECKOUT||!e){t.next=11;break}return t.prev=4,t.next=7,this.ExecuteAutoApplyAutoOpenRebatesHack();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:return t.abrupt("return",new Zl(n,e,this.flyoutData));case 12:return t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(){return d.apply(this,arguments)})},{key:"ExecuteAutoApplyAutoOpenRebatesHack",value:(u=e(o().mark((function t(){var e,n,i,a,r,s,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="isCheckoutPage_"+this.flyoutData.common.lastCommittedURL,!(n=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=7;break}a={value:{stringValue:n[e]}},i=a,t.next=10;break;case 7:return t.next=9,this.pageHandlerModule.GetStorageValue(e);case 9:i=t.sent;case 10:r=null,i&&""!==i&&(s=i.value)&&(r=null!==(l=s.stringValue)&&void 0!==l?l:null)&&(!0===(c=JSON.parse(r)).isCheckoutPage&&Date.now()-c.validationTime<=18e5?this.flyoutData.common.isCheckoutPage=!0:this.pageHandlerModule.SetStorageValue(e,new Bs));case 12:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"GetExclusiveCouponData",value:(c=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.flyoutData.experimentData.isExperimentActive(Be.youtubeCoupons)){t.next=21;break}return t.next=3,this.pageHandlerModule.GetStorageValue("CanSaveExclusiveCoupons");case 3:if(e=t.sent,n=null,e&&""!==e&&(i=e.value)&&(n=null!==(a=i.boolValue)&&void 0!==a?a:null),null!==n&&!0!==n){t.next=21;break}return r="exclusiveCoupons",null===n&&(this.pageHandlerModule.SetStorageValue(r,new Bs),r="".concat(r,"Temp")),t.next=11,this.pageHandlerModule.GetStorageValue(r);case 11:if(!(s=t.sent)||""===s){t.next=21;break}if(!(l=s)){t.next=21;break}if(!((c=this.deserializeStorageData(null==l?void 0:l.value))&&c.length>0)){t.next=21;break}return(u=this.flyoutData.common.domain)||(u=this.flyoutData.common.lastCommittedURL)&&-1!==(u=(u=u.replace("http://www.","")).replace("https://www.","")).indexOf("/")&&(u=u.substring(0,u.indexOf("/"))),d=new Ql(c,u,n),t.abrupt("return",Promise.resolve(d));case 21:return t.abrupt("return",Promise.resolve(void 0));case 22:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"GetPinterestData",value:(l=e(o().mark((function t(){var e,n,i,a,r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=6;break}i={value:{stringValue:e.pinterestProductLink}},n=i,t.next=9;break;case 6:return t.next=8,this.pageHandlerModule.GetStorageValue("pinterestProductLink");case 8:n=t.sent;case 9:if(!n||""===n){t.next=15;break}if(!(a=n)){t.next=15;break}return s=null===(r=ds.Create(null==a?void 0:a.value))||void 0===r?void 0:r.stringValue,l=new kc(s),t.abrupt("return",Promise.resolve(l));case 15:return t.abrupt("return",Promise.resolve(void 0));case 16:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"deserializeStorageData",value:function(t){var e,n=null===(e=ds.Create(t))||void 0===e?void 0:e.stringValue;if(n)return JSON.parse(n)}},{key:"GetPriceComparisonData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("comparableOffers",void 0),e=this.flyoutData.dataLoader.GetLoadTimeDataValue("price",void 0),n=this.flyoutData.dataLoader.GetLoadTimeDataValue("extracted_entity",void 0);return new Mc(t,e,n,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination)}},{key:"GetPriceHistoryData",value:function(){var t,e=this.flyoutData.dataLoader.GetLoadTimeDataValue("priceHistory",void 0);if(e&&e.priceHistoryData&&e.productDetails){var n,i=this.flyoutData.dataLoader.GetLoadTimeDataValue("price",void 0),o=this.flyoutData.dataLoader.GetLoadTimeDataValue("base64ProductImage",void 0),a=null===(n=this.flyoutData.dataLoader.GetLoadTimeDataValue("extracted_entity",void 0).entity)||void 0===n?void 0:n.image;t=new dl(e,i,o,a,this.flyoutData.common.domain)}if(!(t&&t.DailyPrices.length<=1))return t}},{key:"GetCheckoutUserData",value:(a=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.common.currentDevice!==St.Desktop||!this.flyoutData.experimentData.isExperimentActive(Be.expressCheckout)){t.next=27;break}if(t.prev=1,!this.IsExpressCheckout(this.apiResponse)){t.next=22;break}if(e=[],n=[],!this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.AutofillProfileEnabled,!0)){t.next=12;break}return t.next=10,this.GetProfilesData().catch((function(t){}));case 10:if(n=t.sent){i=fu(n);try{for(i.s();!(a=i.n()).done;)r=a.value,this.IsValidProfile(r)&&e.push(r)}catch(t){i.e(t)}finally{i.f()}}case 12:if(s=[],l=[],!this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.AutofillCreditCardEnabled,!0)){t.next=20;break}return t.next=18,this.GetPaymentsData().catch((function(t){}));case 18:if(l=t.sent){c=fu(l);try{for(c.s();!(u=c.n()).done;)(d=u.value).Guid&&d.MaskedCardNumber&&d.ExpMonth&&d.ExpYear&&d.FullName&&s.push(d)}catch(t){c.e(t)}finally{c.f()}}case 20:return h=e.length>0&&s.length>0&&this.flyoutData.experimentData.isExperimentActive(Be.expressCheckoutFillDetails),t.abrupt("return",new Bl(n,l,e,s,h));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1);case 27:return t.abrupt("return",void 0);case 28:case"end":return t.stop()}}),t,this,[[1,24]])}))),function(){return a.apply(this,arguments)})},{key:"IsValidProfile",value:function(t){if(t.City&&t.FullName&&t.FirstName&&t.LastName&&t.Country&&t.State&&t.Zip&&t.Guid&&t.AddressLines&&"US"===t.Country.toUpperCase()&&t.Emails&&t.Emails.length>0&&t.PhoneNumbers&&t.PhoneNumbers.length>0){var e=!1,n=t.AddressLines.split("\n");if(n.length>=1&&n[0].trim().length>0&&(e=!0),!e)return!1;var i=t.PhoneNumbers[0],o=!1;if(i){var a=i.replace(/\D/g,"");a&&a.length>=10&&(o=!0)}if(!o)return!1;var r=t.Emails[0],s=!1;if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)&&(s=!0),!s)return!1;var l=!1,c=Ue(t.State);return t.Zip.length>=5&&/^\d+$/.test(t.Zip.substr(0,5))&&c[1]&&Ve(t.Zip,c[0])&&(l=!0),!!l}return!1}},{key:"GetRatingsAndReviewsData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("ratingReview",void 0),e=this.flyoutData.dataLoader.GetLoadTimeDataValue("extracted_entity",void 0);return Qc.create(t,e)}},{key:"GetNudgeTipsData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.retailerData;if(t){var e=t.tips,n=[];if(e){var i,o=fu(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;a&&n.push(new iu(a.text,a.iconType,a.minimumPurchase,t,t.checkoutPageUrl))}}catch(t){o.e(t)}finally{o.f()}}return new Sc(n)}}}catch(t){}}},{key:"GetProfilesData",value:(i=e(o().mark((function t(){var e,n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetProfilesData().catch((function(t){return Promise.reject("unable to find profiles.")}));case 2:if(e=t.sent,n=[],!(e&&e.length>0)){t.next=11;break}i=fu(e);try{for(i.s();!(a=i.n()).done;)(r=a.value)&&n.push(new Fc(r))}catch(t){i.e(t)}finally{i.f()}return t.abrupt("return",Promise.resolve(n));case 11:return t.abrupt("return",Promise.reject("can not find profiles"));case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"GetPaymentsData",value:(n=e(o().mark((function t(){var e,n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetPaymentsData().catch((function(t){return Promise.reject("unable to find payments.")}));case 2:if(e=t.sent,n=[],!e){t.next=11;break}i=fu(e);try{for(i.s();!(a=i.n()).done;)(r=a.value)&&n.push(new Ac(r))}catch(t){i.e(t)}finally{i.f()}return t.abrupt("return",Promise.resolve(n));case 11:return t.abrupt("return",Promise.reject("can not find payments"));case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"GetProductHistoryData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("webAssistEntities",void 0),e=[];return t&&t.length>0&&t.forEach((function(t){var n=new Lc(t);n.domain&&n.entity.price&&n.title&&e.push(n)})),e}},{key:"GetRewardData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.rewards,e=this.flyoutData.dataLoader.GetLoadTimeDataValue("activateRewardsStatus",null);if(t)return new tu(t,e,this.flyoutData.common.openedWith,this.flyoutData.experimentData)}}catch(t){}}},{key:"GetTopRetailerData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.cashback;if(t)return new lu(t)}}catch(t){}}},{key:"GetGroceryData",value:function(){var t=this;try{if(this.apiResponse){var e=new fc(this.apiResponse);try{var n,i,o,a=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.ProductItemizedCashBack,void 0),r=null===(n=this.apiResponse)||void 0===n?void 0:n.itemLevelCashBack;if(!r)r=null===(i=this.apiResponse)||void 0===i||null===(o=i.groceryOffers)||void 0===o?void 0:o.cashback;if(this.flyoutData.experimentData.isExperimentActive(Be.groceryCashback)&&(r||void 0!==a)){var s,l;e.Cashback=bc.Create(r,this.flyoutData.experimentData.isExperimentActive(Be.categoriesFiltering),this.flyoutData.common.isPane);var c,u=this.flyoutData.common.domain,d=Ke(Je.activatedCashbackKey),h=null!==(s=null===(l=this.flyoutData.dataStoreModule.ApiData)||void 0===l?void 0:l.impressionId)&&void 0!==s?s:"",p=!1;if(d){if(d[u]&&d[u].impressionId!==h){delete d[u];var f=JSON.stringify(d);Ye(Je.activatedCashbackKey,f),this.pageHandlerModule.SetStorageValue(Qr.GroceryCashbackActivated,ds.CreateFromString(f)),p=!0}if(!p&&d[u]&&d[u].fullItems)for(var g=Object.keys(d[u].fullItems),m=0,v=g;m<v.length;m++){var y=v[m];e.Cashback.ActivatedOfferIds.has(y)||e.Cashback.ActivatedOfferIds.add(y)}}if(e.Cashback.ActivatedOfferIds.size>0)null===(c=e.Cashback.ItemizedCashback)||void 0===c||c.forEach((function(n,i){var o,a;!e.Cashback.ActivatedOfferIds.has(n.id)||null!==(o=Je.GetActivatedCashbackItems(t.flyoutData.common.domain))&&void 0!==o&&null!==(a=o.activatedItems)&&void 0!==a&&a.includes(n.id)||Je.SetActivatedCashbackItem(t.flyoutData.common.domain,n,h)}));var C=ze(Je.activatedCashbackKey);C&&this.pageHandlerModule.SetStorageValue(Qr.GroceryCashbackActivated,ds.CreateFromString(C));var b=Ke(Je.redeemedCashbackKey);if(b){if(b[u]&&b[u].impressionId!==h){delete b[u];var S=JSON.stringify(b);Ye(Je.redeemedCashbackKey,S)}if(b[u]&&b[u].submittedIds&&b[u].submittedIds.length>0){var x,E=fu(b[u].submittedIds);try{for(E.s();!(x=E.n()).done;){var A=x.value;e.Cashback.SubmittedOfferIds.includes(A)||e.Cashback.SubmittedOfferIds.push(A)}}catch(t){E.e(t)}finally{E.f()}}Je.SetSubmittedItemsCashbackItems(u,e.Cashback.SubmittedOfferIds,h)}a&&(e.Cashback.pdpCashBack=rc.Create(a))}}catch(t){}return e}}catch(t){}}},{key:"GetViewedProductPriceDropData",value:function(){try{var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("notification_data",void 0);if(t)return new hu(t)}catch(t){}}},{key:"GetSustainabilityData",value:function(){if(this.apiResponse){var t=this.apiResponse.shouldRenderSustainability;if(t)return new eu(t,this.flyoutData.experimentData)}}},{key:"GetAbandonedCartData",value:function(){if(this.apiResponse){var t=this.apiResponse.abandonedCarts;if(t&&Object.keys(t).length>0){var e=new Map;return Object.keys(t).forEach((function(n){e.set(n,new Rl(t[n]))})),e}}}},{key:"GetOrderTrackingData",value:function(){try{var t=[],e=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.PackageTrackingFreShown,void 0),n=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.PackageTrackingUserConsented,void 0),i=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.PackageTrackerResponse,void 0),o=this.flyoutData.dataLoader.GetLoadTimeDataValue(vt.ShouldShowPackageTrackingNotification,void 0);if(i&&i.length>0){var a,r=fu(i);try{for(r.s();!(a=r.n()).done;){var s=a.value,l=null==s?void 0:s.listOfProducts,c=[];if(l){var u,d=fu(l);try{for(d.s();!(u=d.n()).done;){var h=u.value;h&&c.push(new _c(h.productImageUrl,h.productName))}}catch(t){d.e(t)}finally{d.f()}s&&c.length>=1&&t.push(new xc(s,c))}}}catch(t){r.e(t)}finally{r.f()}}return new Ec(e,n,t,o)}catch(t){}}},{key:"IsExpressCheckout",value:function(t){if(t&&t.checkoutData&&t.checkoutData.isExpressCheckoutEnabled){var e,n=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.Coupons,i=this.flyoutData.common.pageStatus.ExpressCheckoutStatus&&(!this.flyoutData.common.pageStatus.AutoApplyStatus||!(n&&n.length>0))&&void 0===this.flyoutData.common.edgeDriverDataForFlyout,o=this.flyoutData.common.edgeDriverDataForFlyout&&this.flyoutData.common.edgeDriverDataForFlyout.is_auto_apply_completed&&this.flyoutData.common.edgeDriverDataForFlyout.express_checkout_status;return i||o}return!1}},{key:"getDomainNameFromUrl",value:function(t){try{var e,n=new URL(t);return n&&n.hostname&&(e=this.getDomainNameFromHostname(n.hostname)),e}catch(t){}return null}},{key:"getDomainNameFromHostname",value:function(t){if(!t)return"";var e=t.toLowerCase().match(/(w){3}.?\./);return e&&null!=e.index&&e[0]?t.substring(e.index+e[0].length):t}},{key:"GetPaymentOptionsData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("paymentOptions",void 0),e=[];return t&&t.length>0&&t.forEach((function(t){e.push(new Tc(t))})),e}},{key:"GetVirtualCardData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("virtualCard",void 0);return new pu(t)}}]),t}(),vu=mu,yu=r((function t(){s(this,t),f(this,"CouponData",void 0),f(this,"PriceComparisonData",void 0),f(this,"PriceHistoryData",void 0),f(this,"CashBackData",void 0),f(this,"ApiData",void 0),f(this,"CheckoutUserData",void 0),f(this,"NudgeTipsData",void 0),f(this,"RatingsAndReviewsData",void 0),f(this,"ProductHistoryData",void 0),f(this,"RewardData",void 0),f(this,"PaymentOptionsData",void 0),f(this,"ExclusiveCouponsData",void 0),f(this,"OrderTrackingData",void 0),f(this,"VirtualCardData",void 0),f(this,"SustainabilityData",void 0),f(this,"TopRetailerData",void 0),f(this,"GroceryCouponData",void 0),f(this,"ViewedProductListData",void 0),f(this,"PinterestData",void 0),f(this,"SimilarSellerData",void 0),f(this,"AbandonedCartData",void 0)})),Cu=r((function t(){s(this,t),f(this,"name",void 0),f(this,"supported",void 0),f(this,"variant",void 0)})),bu=function(){function t(){s(this,t),f(this,"experiments",void 0),f(this,"experimentsSet",void 0),f(this,"enablePCBannerUX",!1),this.experiments=new Map,this.experimentsSet=new Set}return r(t,[{key:"Create",value:function(t){var e=this,n=new Map;if(t&&t.length>0){var i=Object.values(Be);t.forEach((function(t){var o,a=new Cu;a.name=t.name,a.supported=!1,(null===(o=t.params)||void 0===o?void 0:o.length)>0&&(a.variant=t.params[0].value),i.includes(t.name)&&(a.supported=!0,e.experimentsSet.add(t.name)),n.set(a.name,a)}))}this.experiments=n}},{key:"CreateFromJsonStr",value:function(t){try{if(t){var e=JSON.parse(t);this.Create(e)}}catch(t){}}},{key:"isExperimentActive",value:function(t){return this.experimentsSet.has(t)}},{key:"setShowPCBannerUX",value:function(t,e,n,i){this.enablePCBannerUX=void 0!==t&&t||void 0!==e&&e&&void 0!==n&&n.CompetingPrices&&n.CompetingPrices.length>0&&void 0!==i&&i}},{key:"isPCBannerUXExperimentActive",value:function(){return(this.experimentsSet.has(Be.pcBannerUXExperimentation1)||this.experimentsSet.has(Be.pcBannerUXExperimentation2)||this.experimentsSet.has(Be.pcBannerUXExperimentation3)||this.experimentsSet.has(Be.pcBannerUXExperimentation4)||this.experimentsSet.has(Be.pcBannerUXExperimentation5)||this.experimentsSet.has(Be.pcBannerUXExperimentation6))&&this.enablePCBannerUX}},{key:"isVariantActive",value:function(t,e){var n;return!!this.isExperimentActive(t)&&(null===(n=this.experiments.get(t))||void 0===n?void 0:n.variant)===e}}]),t}(),Su=function(){function t(e){s(this,t),f(this,"couponEmptyCouponSubTitle","We couldn't find any coupons at this time."),f(this,"couponEmptyCouponTitle","Check back for coupons!"),f(this,"couponAutoApplyButton","Try all Coupons"),f(this,"couponAutoApplyButtonRetry","Retry all Coupons"),f(this,"couponAutoApplyButtonAlt","Apply Coupons"),f(this,"couponAutoApplyButtonInstantSavings","Apply Savings"),f(this,"couponFeatureName","coupons"),f(this,"mergedAutoApplyButton","Try all coupons and activate cash back"),f(this,"mergedNewAutoApplyButton","Apply coupons & cash back"),f(this,"pcBestPriceHeader","You have the best price!"),f(this,"pcBestPriceRefreshHeader","You have the $1"),f(this,"pcBestPriceTitle","Best Price"),f(this,"pcLowest","Lowest"),f(this,"pcLowestUpdated","Lowest Price"),f(this,"pcSmallSavingsHeader","Compare Price at other Stores"),f(this,"pcNotificationSeeMoreInfo","See more info"),f(this,"pcNotificationVisitItem","Visit item"),f(this,"commonCMAutoShowDisable","Don't show this automatically"),f(this,"commonCMAutoShowDisableFeature","Don't show $1 again"),f(this,"commonCMAutoShowEnable","Show this flyout automatically"),f(this,"commonCMAutoShowEnableFeature","Show $1 automatically"),f(this,"commonSnoozeShopping","Snooze shopping notifications"),f(this,"turnOffSnooze","Turn off snooze"),f(this,"snoozeTooltip","Snooze"),f(this,"remindLater","Remind me later"),f(this,"commonCMManage","Manage Settings"),f(this,"commonAltSettings","Settings and more"),f(this,"commonMoreOptionsLabel","More options"),f(this,"commonContextualTab","Shopping assistant"),f(this,"commonHomeTab","Discover"),f(this,"commonErrorTitle","It's not you, it's us"),f(this,"commonErrorSubTitle","We will be back soon"),f(this,"commonLearnMore","Learn more"),f(this,"commonSave","Save $1"),f(this,"commonSaveSimple","Save"),f(this,"commonMicrosoftRewards","Microsoft Rewards"),f(this,"commonAriaLogo","$1 logo"),f(this,"commonGotIt","Got it"),f(this,"commonInternationalDisclaimer","Shopping data shown here is gathered periodically and it may not be completely accurate at all times."),f(this,"couponCopied","Copied"),f(this,"couponCopyLabel","Copy code"),f(this,"couponCopyLabelRefresh","Copy"),f(this,"couponSectionTitle","1 coupon"),f(this,"couponTitle","Coupons found"),f(this,"couponTitleWithNum","$1 Coupons found"),f(this,"couponTitleWithNumSingular","1 Coupon found"),f(this,"couponTitleInstantSavings","Save with coupons"),f(this,"couponExpandableTitleWithNum","$1 coupons found"),f(this,"couponExpandableTitleWithNumSingular","1 coupon found"),f(this,"couponExpandableTitleViewCoupons","View coupons"),f(this,"bgaaSuccessLeftTitle","You could save"),f(this,"bgaaSuccessRightTitle","Coupon Success"),f(this,"bgaaSuccessRightText","Very high"),f(this,"bgaaFailedTitle","You have the best price"),f(this,"bgaaFailedLeftTitle","coupons"),f(this,"bgaaFailedLeftText"," All checked"),f(this,"bgaaFailedRightTitle","Results"),f(this,"bgaaFailedRightText","No valid coupons"),f(this,"couponAutoApplyWithoutCB","Try all coupons without cash back"),f(this,"commonFixedTitle","Shopping"),f(this,"commonFixedTitlePane","Shopping"),f(this,"commonMicrosoftPolicy","Microsoft Privacy Statement"),f(this,"thirdPartCookiesText","third-party cookies"),f(this,"commonClose","Close"),f(this,"doNotShowString","Do not show"),f(this,"snoozeButton","Snooze"),f(this,"ariaSnoozeOn","Snooze On"),f(this,"ariaSnoozeoff","Snooze Off"),f(this,"pcPriceSectionTitle","Compare with other retailers"),f(this,"cbActivateButtonRefresh","Activate now"),f(this,"cbBingActivateButton","Join now and activate cash back"),f(this,"cbActivatedButton","Cash back is activated!"),f(this,"cbLearnMore","See offer details on Bing Rebates"),f(this,"cbConfirmationTitle","Thanks for shopping with Bing Rebates!"),f(this,"cbTopRetailerTitle","Popular cash back partners"),f(this,"pcbConfirmationTitle","You can earn up to $1 cash back with $2"),f(this,"pcbBingRebates","Bing Rebates!"),f(this,"instantcbBingRebates","Bing Rebates"),f(this,"cbAutoShowTitle","Get cash back"),f(this,"cbAutoShowButtonMessage","Activate up to $1 cashback"),f(this,"cbConfirmationMessage","You'll get cash back for any eligible purchases. We'll let you know in the next few days."),f(this,"pcbConfirmationMessage","The funds can be redeemed within 90 days, when the sale is confirmed. Well email you to let you know if its available"),f(this,"cbTurnedOffTitle","Bing Rebates was turned off for this purchase"),f(this,"cbTurnedOffMessage","Sometimes this happens when you use another coupon or rebates service. But you can easily turn it back on to earn cash back."),f(this,"cbEnableRebatesButton","Activate Bing Rebates"),f(this,"cbDontFindAutomatically","Don't find rebates automatically"),f(this,"cbFindAutomatically","Show rebates when available"),f(this,"notificationPrivacyTitle","Microsoft Edge may remind you of products youve visited to help you save time and money."),f(this,"notificationPrivacyDesc","If you are shopping in InPrivate mode, you will never be reminded about products you visit. If you wish to turn off reminders for a product, you can click Dont remind me again for this product (below). Additional controls can be found under the  menu at the top right of this popup. If you wish to disable Shopping in Microsoft Edge entirely, you can visit Manage Edge Shopping."),f(this,"reminderDisabled","Disable shopping reminders"),f(this,"reminderEnabled","Enable shopping reminders"),f(this,"reminderInfoButtonName","Learn more about product reminders"),f(this,"cbPreviousTransactions","Previous transactions"),f(this,"cbRebatesOff","off"),f(this,"cbRebatesOn","on"),f(this,"cbNonStackableCoupon","This coupon can't be used with Bing Rebates"),f(this,"cbRetailerTitle","Up to $1 cash back"),f(this,"cbSnapshotTitle","Your Bing Rebates snapshot"),f(this,"cbViewAccount","View account activity"),f(this,"cbCurrBalance","current balance"),f(this,"cbErrorMessage","Cash back activation failed"),f(this,"cbProcessing","Processing"),f(this,"cbPrivacyMessage","You will join and receive emails about $1, which include offers about partner products."),f(this,"cbPrivacyMessageTerm","Terms | Privacy & Cookies"),f(this,"cbPrivacyMessagePrivacyCookies","Privacy & Cookies"),f(this,"privacyDataCollectionMessage","Microsoft will collect your browsing history and page content to improve the shopping experience provided by Microsoft products. $1"),f(this,"cbMergedSingularTitle","We found 1 coupon and up to $2 cash back!"),f(this,"cbMergedSingularTitleEstimate","We found 1 coupon and estimated $2 cash back!"),f(this,"cashback","Cash back"),f(this,"forYou","FOR YOU"),f(this,"previousOffers","Previous Offers ($1)"),f(this,"cbPromotionsOnSubHeader","on first eligible purchase!"),f(this,"trSectionTitle","Popular cashback partners"),f(this,"bannerFoundBestPrice","We've found |a better| price!"),f(this,"bannerFoundBestPriceAlt","We found you a better price!"),f(this,"bannerYouHaveBestPrice","You have |the best price!|"),f(this,"bannerSubTitleFlyout","Click below to copy a coupon code, or we can help auto apply at check out!"),f(this,"bannerShowPriceHistory","Show price history"),f(this,"bannerSeeDetails","See details"),f(this,"bannerViewAll","View all"),f(this,"bannerVisitItem","Visit item in new tab"),f(this,"bannerViewAllCouponsSingular","View coupon"),f(this,"getDeal","Get Deal"),f(this,"dealsTitle","Trending deals on $1"),f(this,"dealsSubTitle","Best deals for you on $1"),f(this,"phTitlePriceDropped","The price on this product has dropped!"),f(this,"phTitlePriceIncrease","The price on this product has increased"),f(this,"phTitleStable","The price on this product is stable"),f(this,"phToday","today"),f(this,"phLow","low"),f(this,"phHigh","high"),f(this,"phMedian","median"),f(this,"phStableLabel","stable"),f(this,"phPriceDrop","Price drop"),f(this,"phPriceDropped","Price dropped"),f(this,"phSee","See Price History"),f(this,"phPriceIncrease","Price increase"),f(this,"phPriceStable","Price stable"),f(this,"phOldPrice","Old price"),f(this,"phNewPrice","New price"),f(this,"phGraphLabel","The price has not fluctuated much. Today price is $1"),f(this,"phTooltipText","Price drop/increase is determined by >= 2% change from the historical median price ($1) seen by users for this product."),f(this,"phFeatureName","price drop"),f(this,"phSectionTitle","Price history"),f(this,"rrExpertAndVideoReviews","Expert reviews and related videos"),f(this,"rrExpertReviews","Expert reviews"),f(this,"rrVideoReviews","Related videos"),f(this,"rrFeatureName","reviews"),f(this,"checkoutCreditOrDebitCardDropDown","Choose a different Credit or Debit card:"),f(this,"checkoutShippingAddress","Shipping address:"),f(this,"checkoutPaymentInfo","Payment info:"),f(this,"checkoutSameBilling","Billing address is same as shipping address"),f(this,"checkoutFillOnly","Quick and easy checkout"),f(this,"checkoutButtonWithoutAA","Fill details"),f(this,"checkoutButtonWithoutAAForOtherPayment","Fill details and checkout with $1"),f(this,"checkoutSectionTitle","Autofill checkout details"),f(this,"checkoutAddressSectionTitle","Autofill address details"),f(this,"checkoutPaymentSectionTitle","Autofill payment details"),f(this,"checkoutValidTill","valid till"),f(this,"checkoutZip","ZIP"),f(this,"ytSectionTitleOnRetailer","Saved from YouTube"),f(this,"ytHeader","We saved $1 exclusive coupons from $2"),f(this,"ytHeaderSingular","We saved 1 exclusive coupon from $2"),f(this,"ytHeaderPermission","We found $1 exclusive coupons from $2"),f(this,"ytHeaderPermissionSingular","We found 1 exclusive coupon from $2"),f(this,"ytPhotoLabel","Profile picture for $1"),f(this,"ytMoreCoupons","More coupons from Youtube"),f(this,"ytSectionTitleOnYoutube","Your coupons from Youtube"),f(this,"ytShopOn","Shop on $1"),f(this,"ytSaveCouponsPermission","Save coupons for me"),f(this,"ytDontSaveCouponsPermission","Never save coupons from Youtube"),f(this,"prodHSectionTitle","Your recently viewed items"),f(this,"prodHPriceDropRefresh","$1 price drop"),f(this,"prodHPriceIncreaseRefresh","$1 price increase"),f(this,"prodHPriceDropTitle","Price drop on recently viewed item"),f(this,"prodHPriceDropDonotRemindMe","Dont remind me again for this product"),f(this,"prodHPriceDropViewAt","View at $1"),f(this,"prodHAnnotation","was $1"),f(this,"prodHDeleteItem","delete item"),f(this,"similarSellerNotificationError","Failed to add product!"),f(this,"similarSellerStringCollapsedAmazon","Other Amazon sellers found!"),f(this,"similarSellerStringCollapsed","Other sellers found!"),f(this,"similarSellerAddToCartTitle","Add to cart"),f(this,"similarSellerNewAddToCartTitle","Add to cart ($1)"),f(this,"similarSellerAddedToCartTitle","Added to cart"),f(this,"similarSellerShipFromString","Ship from:"),f(this,"similarSellerRatingLabel","Rating:"),f(this,"similarSellerFreeDelivery","FREE Delivery"),f(this,"similarSellerFeatureName","other sellers"),f(this,"tipsTiltleSingle","1 tip found!"),f(this,"tipsSubTitleSingle","1 tip found"),f(this,"paymentOptionLabel","More payment options at checkout"),f(this,"microsoftWalletLinkText","Wallet"),f(this,"virtualCardCardHolderNameHeader","Your name"),f(this,"virtualCardBillingAddressHeader","Your billing address"),f(this,"virtualCardBillingInfoHeader","Your name & billing address"),f(this,"virtualCardNumberHeader","Virtual card number"),f(this,"virtualCardExpirationHeader","Expiration"),f(this,"virtualCardCVCHeader","CVC"),f(this,"visualizedCardHolderHeader","Card Holder"),f(this,"visualizedCardExpiresHeader","Expires"),f(this,"showContentToggleTooltipCardNumber","Show content for virtual card number"),f(this,"showContentToggleTooltipCVC","Show content for CVC"),f(this,"hideContentToggleTooltipCardNumber","Hide content for virtual card number"),f(this,"hideContentToggleTooltipCVC","Hide content for CVC"),f(this,"copyButtonTooltip","Copy"),f(this,"virtualCardSystemFailureHeader","Uh oh"),f(this,"buyNowPayLater","Buy now, pay later"),f(this,"masterCardPayment","Master"),f(this,"visaPayment","Visa"),f(this,"amexPayment","American Express"),f(this,"discoverPayment","Discover"),f(this,"disablePackageTrackingFromMenuText","Disable order tracking"),f(this,"enablePackageTrackingFromMenuText","Enable order tracking"),f(this,"packageTrackingOptInButtonText","Track my orders"),f(this,"packageTrackingNewOptInButtonText","Enable order tracking"),f(this,"packageTrackingOptOutButtonText","Do not track my orders"),f(this,"packageTrackingDeactivatedTitle","Order tracking is Off"),f(this,"packageTrackingActivatedTitle","Order tracking is On"),f(this,"packageTrackingOptInAcknowledgement","Order tracking is activated!"),f(this,"packageTrackingOptInAcknowledgementFailure","Order tracking failed to activate"),f(this,"packageTrackingOptOutAcknowledgement","Successfully opted out of order tracking"),f(this,"packageTrackingOptOutAcknowledgementFailure","Failed to opt out of order tracking"),f(this,"packageTrackingNotificationTitle","Track your orders now!"),f(this,"packageTrackingNewNotificationTitle","Microsoft Edge can track your orders now!"),f(this,"packageTrackingNotificationDescription","We will keep you updated on your order statuses."),f(this,"packageTrackingFeatureName","package tracking"),f(this,"packageTrackingOrderPlaced","Order Placed"),f(this,"checkBackForOrders","Check back for orders!"),f(this,"deteTrackerText","Delete order tracker"),f(this,"rewardGiftConsentSubtext","Offer valid for 1 per person/account within first 14 days of joining Microsoft Rewards."),f(this,"rewardsPrivacyText","Privacy"),f(this,"rewardsTermsText","Terms"),f(this,"giftCardDismiss","Don't show this again"),f(this,"giftFeatureName","gift card offer"),f(this,"privacySettingsManage","Manage"),f(this,"productDetailsOrderTracking","$1 Order containing Products $2!"),f(this,"feedbackPrompt","Do you find this content useful?"),f(this,"feedbackThanks","Thanks for your feedback!"),f(this,"feedbackAriaLike","Thumbs up"),f(this,"feedbackAriaDislike","Thumbs down"),f(this,"feedbackAriaClose","Close feedback"),f(this,"bnplFeedbackPrompt","Did this feature help with your shopping experience?"),f(this,"attCouponHeaderLocked","Unlock a better deal!"),f(this,"attCouponHeaderUnlocked","Unlocked better deal!"),f(this,"autosMarketplaceSectionTitle","Start Autos recommended listings"),f(this,"autosMarketplaceNotifivationLowPriceHeader","Similar car with lower price"),f(this,"autosMarketplaceNotificationHeader","A car you might like!"),f(this,"autosMarketplaceNotificationNoAccident","No accidents"),f(this,"autosMarketplaceOnlineDealer","Online dealer"),f(this,"autosMarketplaceSeeMoreButton","See more similar"),f(this,"autosMarketplaceSimilarCarFound","Similar car found"),f(this,"autosMarketplaceSimilarCarsFound","Similar cars found"),f(this,"autosMarketplaceNoAccident","No accidents cars only"),f(this,"autosMarketplacePopular","Popular"),f(this,"autosMarketplaceGreatDeal","Great deal"),f(this,"autosMarketplaceSeeAll","See all"),f(this,"autosPriceInsightSectionTitle","Price insight for "),f(this,"autosOemPriceInsightSeeMoreButton","Learn more"),f(this,"autosPriceInsightBelowAverage","below average of"),f(this,"autosPriceInsightAboveAverage","above average of"),f(this,"autosPriceInsightPriceRangeText","% of listings within this price range"),f(this,"gcSectionTitle","Grocery coupons"),f(this,"gcbSectionTitle","Cash back offers"),f(this,"gcbSectionHeaderTooltipText","Spicy jalapeno bacon ipsum dolor amet andouille beef ribs bacon salami pork loin chicken shoulder meatball meatloaf ham hock porchetta pastrami. Turkey chicken ribeye, boudin bacon filet mignon short loin flank fatback sirloin jowl."),f(this,"gcbSearchSectionTitle",'Offers related to "$1"'),f(this,"gcbActivatedSectionTitle","Cash back activated"),f(this,"gcbActivatedSectionDescr","$1 Cash back activated"),f(this,"gcbActivatedSubSectionTitle","Add this item to Cart and Checkout to earn Cash back"),f(this,"gcbLandingNotificationSectionTitle","Cash back found!"),f(this,"gcbLandingButton","See offers"),f(this,"gcbButton","Shop and Activate"),f(this,"gcbPdpSectionTitle","Cash back offer"),f(this,"gcbActivateButton","Activate"),f(this,"gcbPdpHeaderText","Earn Cash back"),f(this,"gcbPdpActivateButton","Activate now"),f(this,"gcbActivated","Activated"),f(this,"gcbButtonShop","Shop"),f(this,"gcbNotifRebates","Bing Rebates account"),f(this,"gcbNotifSubtitle","You'll get cash back for any eligible purchases within 24 hours of your purchase."),f(this,"groceriesFeatureName","groceries savings"),f(this,"couponSectionPanePluralTitle","Coupons found"),f(this,"recommendationsFriendlyDomainTitle","Trending on $1"),f(this,"recommendationsTitle","Trending products!"),f(this,"recommendationsDiscountPercent","$1 OFF"),f(this,"recommendationsPriceDrop","$1 Price Drop"),f(this,"recommendationsFeatureName","recommendations"),f(this,"abandonedCartTitle","Products in your carts"),f(this,"abandonedCartPrompt","Save up to $1 with coupons"),f(this,"cbMainTitleOff","Get up to $1 cash back"),f(this,"cbMainTitleOffWithCashbackEstimate","Estimated cash back"),f(this,"pcbMainTitleOff","Get $1 cash back with Bing Rebates!"),f(this,"cbMainTitleOn","You're earning up to $1 cash back!"),f(this,"cbMainTitleOnStoreWide","You're earning up to $1 cash back storewide!"),f(this,"pcbMainTitleOnStoreWide","You're earning up to $1 cash back off $2 storewide!"),f(this,"cbSubtitle","You recently earned $1 cashback from $2"),f(this,"cbMainTitleOffStoreWide","Get up to $1 cash back storewide!"),f(this,"pcbMainTitleOffStoreWide","Get up to $1 cash back off $2 storewide!"),f(this,"cbPersonalized","You're earning $1 cash back with Bing Rebates!"),f(this,"instantcb","You've just earned up to $1 cash back!"),f(this,"instantcbSecond","Track it on your $1 dashboard"),f(this,"walmartMessage","Please use Add to Cart and follow the full check out process"),f(this,"cbTitleSignInOn","You're earning up to $1 cash back with Bing Rebates!"),f(this,"cbPromotionsSubTitle","And up to $1 cash back"),f(this,"cbPromotionsSubTitleStoreWide","And up to $1 cash back storewide"),f(this,"cbCashBackOnOff","Cash back is $1"),f(this,"cbLifetimeEarned","Lifetime earned $1"),f(this,"cbToolTips","Edge Shopping is powered by Bing Rebates, part of Microsoft Rewards."),f(this,"cbFeatureName","cash back"),f(this,"bannerFoundCoupons","We've found |$1 coupons| for this site!"),f(this,"bannerFoundCouponsSingular","We've found |1 coupon| for this site!"),f(this,"bannerPriceDropTitle","There was a |$1 price drop| for this product"),f(this,"bannerPriceIncreaseTitle","There was a |$1 price increase| for this product"),f(this,"bannerPriceStableTitle","There have been |no drastic price changes| for this product"),f(this,"bannerCouponSingularTitle","Shoppers save money |$1%| of the time with this coupon"),f(this,"bannerCouponPluralTitle","Shoppers save money |$1%| of the time with these coupons"),f(this,"bannerCashBackOffTitle","You could be earning |$1 cash back!|"),f(this,"bannerCashBackOnTitle","|Cash back is on!| You're earning up to $1 cash back!"),f(this,"bannerRecentPurchase","You earned $1 from a recent purchase!"),f(this,"bannerLifetime","Lifetime earned: $1"),f(this,"microsoftWalletManage","Manage payment info in $1"),f(this,"phPriceStableRefresh","Price is*br*$1"),f(this,"ptCouponsTitle","$1 coupons found on $2"),f(this,"ptCouponsTitleSingular","1 coupon found on $1"),f(this,"snoozeHoverText","Snooze all for 24 hours"),f(this,"privacyConsent","I consent to the placement of cookies on my browser to facilitate billing with the coupon provider as per $1"),f(this,"privacyConsentNew","I allow placing of $1 on my device to help billing with the coupon provider as per $2"),f(this,"rewardGiftCardConsent","You will receive emails about Microsoft Rewards, which include offers about Microsoft and partner products. $1 | $2"),f(this,"rewardsjoinAckText","Keep shopping on Microsoft Edge for more savings and deals $1"),f(this,"sectionSeeMoreOnly","See more"),f(this,"sectionSeeMore","See more ($1)"),f(this,"sectionSeeMoreViewLess","View less"),f(this,"couponSectionPluralTitle","$1 coupons"),f(this,"couponSuccessful","$1% successful"),f(this,"triviaTitleNew","On average our users save $2 on $1"),f(this,"savingsFoundTitle","Your total savings on Edge: $1"),f(this,"savingsFoundTriviaTitle","Average savings on $1: $2"),f(this,"triviaAverageSavingsHeader","On average users save"),f(this,"couponExpectationHeader","Coupon success rate:"),f(this,"highCouponExpectationTooltip","High means 75%+ coupon success rate on this site"),f(this,"mediumCouponExpectationTooltip","Medium means 50-75% coupon success rate on this site"),f(this,"lowCouponExpectationTooltip","Low means <50% coupon success rate on this site"),f(this,"orderTrackingTitle","My Orders"),f(this,"clippingMainTitle","Save $1 with this coupon"),f(this,"clippingMainTitleSmallNotification","Save $1 with coupon"),f(this,"clippingSubTitle","Click below to save |$1%| on this item at checkout"),f(this,"defaultClippingTitle","Save money with this coupon"),f(this,"defaultClippingSubTitle","Click below to save on this item at checkout"),f(this,"clippingButtonTitle","Clip coupon"),f(this,"clippedTitle","You will save $1 on this item at checkout"),f(this,"clippedSubTitle","Coupon successfully clipped"),f(this,"clippingFeatureName","clip coupon"),f(this,"clippingMainTitleEnGb","Save $1 with this voucher"),f(this,"defaultClippingTitleEnGb","Save money with this voucher"),f(this,"clippingButtonTitleEnGb","Collect voucher"),f(this,"clippedSubTitleEnGb","Voucher successfully collected"),f(this,"autoClipSubTitle","Click below to turn on automatic savings"),f(this,"autoClipButtonTitle","Auto-clip coupons"),f(this,"bannerSave","Save $1 at $2"),f(this,"bannerViewAllCoupons","View all $1 coupons"),f(this,"phFinalDrop","$1% drop"),f(this,"phFinalIncrease","$1% increase"),f(this,"pcNotificationTitle","You can save $1"),f(this,"commonYouCanSave","You can save"),f(this,"pcNotificationTitleRefresh","You could save *br*$1!"),f(this,"pcNotificationTitleSmall","Save *br*$1"),f(this,"pcNotificationNarratorIntro","New toolbar on screen. "),f(this,"viewMorePricesButtonText","View more prices"),f(this,"savingsHeader","You can save $1"),f(this,"pcLowestPriceAria","$1, current price on $2"),f(this,"pcCurrentPriceAria","$1, higher price on this page"),f(this,"pcFeatureName","lower prices"),f(this,"trAriaLabel","$1 cash back at $2, shop now!"),f(this,"cbPromotionsTitle","Earn $1 bonus from Microsoft"),f(this,"cbExpiryDateTime","ends in $1"),f(this,"cbCommissionStr","$1 cash back"),f(this,"pcbCommissionStoreWide","$1 off $2 cash back"),f(this,"cbPreviousCashbackDomain","Cash back earned on $1 from $2"),f(this,"cbMergedTitle","We found $1 coupons and up to $2 cash back!"),f(this,"cbMergedTitleEstimate","We found $1 coupons and estimated $2 cash back!"),f(this,"rewardFailedSignin","Sign in Unsuccessful"),f(this,"rewardTitleDefault","Get Microsoft Rewards"),f(this,"rewardTitleEarnedMaximum","You've earned 5000 points!"),f(this,"rewardTitleRewardsAdded","You've Earned $1 points!"),f(this,"rewardTitleRewardTwo","Save $$ and earn rewards!"),f(this,"rewardPointMax","5000"),f(this,"rewardPerMaxPoint","/5000"),f(this,"rewardDetail","Activate cash back and get |$1 points!|"),f(this,"rewardDetailFirstLine","Activate cash back and get "),f(this,"rewardDetailFirstLineBold","$1 points!"),f(this,"rewardKeepExploringText","Keep shopping with Edge to earn more points!"),f(this,"rewardDetailTwo","Click Microsoft Edges little blue tag to find"),f(this,"rewardSignIn","Sign in to earn points"),f(this,"rewardRedeem","Redeem"),f(this,"rewardCoupons","Coupons"),f(this,"rewardCashback","Cashback"),f(this,"rewardRewards","Rewards"),f(this,"rewardAssociateSignIn","Sign in"),f(this,"similarSellerStringAmazon","Save $1 if you buy from a different Amazon seller!"),f(this,"similarSellerString","Save $1 if you buy from a different seller!"),f(this,"similarSellerStringSubtitleAmazon","Other Amazon sellers found"),f(this,"similarSellerStringSubtitle","Other sellers found"),f(this,"similarSellerNotificationTitle","You saved $1"),f(this,"sustainabilityDescriptionLight","When you make purchases on Microsoft Edge, Microsoft donates money to reforestation |at no cost to you.|"),f(this,"sustainabilityDescription","Microsoft makes donation to plant trees for purchases made on Edge. Youre making a difference by shopping with us!"),f(this,"sustainabilityString","Microsoft plants trees when you shop!"),f(this,"sustainabilityConfirmationTitle","Youre making a difference by shopping in Edge!"),f(this,"sustainabilityFeatureName","tree plantation"),f(this,"similarSellerAddToCartAriaLable","Add to cart from other seller, Product price: $1, Product condition: $2"),f(this,"tipsMainTitle","$1 tips found!"),f(this,"tipsSubTitle","$1 tips found"),f(this,"tipsFreeShipping","Get free shipping with a minimum purchase of $1"),f(this,"tipsMinimumPurchase","Make a minimum purchase of $1"),f(this,"virtualCardSystemFailureDescription","We are unable to retrieve your virtual card details. Please visit $1 for your virtual card details."),f(this,"virtualCardSystemFailureLink","Visit $1"),f(this,"virtualCardLinkSuccess","We successfully linked your Microsoft account to $1."),f(this,"virtualCardLinkFail","We are unable to link your Microsoft account to $1. Please try again later."),f(this,"virtualCardFeatureName","virtual card"),f(this,"cardPaymentOptionBanner","Credit or Debit card"),f(this,"otherPaymentMethodBanner","Other ways to pay"),f(this,"howItWorkLinkAriaLabel","$1 for $2"),f(this,"dismissMessageAriaLabel","Dismiss this message"),f(this,"virtualCardDetailsActions","Actions"),f(this,"msZipDescription","Microsoft does not charge you or get paid by this provider for the transaction."),f(this,"giftCardTitle","Gift Card"),f(this,"giftCardSubtitle","Join Microsoft Rewards and search in Bing for 5 days to get $1.25 Amazon gift card"),f(this,"giftCardSubtitleFiveDollar","Join Microsoft Rewards and search in Bing for 5 days to get $5 Amazon gift card"),f(this,"joinNowButtonText","Join now"),f(this,"maybeLaterButtontext","Maybe later"),f(this,"rewardJoinSuccess","You joined"),f(this,"rewardOfferSuccess","See progress on"),f(this,"attFlyoutLocked","Boost your cart to $1 to unlock $2"),f(this,"attFlyoutUnlocked","Congrats! You unlocked the $1 coupon"),f(this,"attTooltipHeader","We found a coupon for $1 that requires $2 of items in your cart"),f(this,"attTooltipText","Once your cart exceeds $1 we'll show you that coupon and apply it at checkout to save you even more money. *Restrictions may apply.*"),f(this,"gcbCashBack","$1 cash back"),f(this,"gcbNotifTitle","Microsoft will add $1 to your $2"),f(this,"gcbOnMerchantName","on $1"),f(this,"pcNotificationdisclaimerText","Compensation was not a factor in the selection of this offer. To view all offers, 'See more info'."),f(this,"pcdisclaimerText","Compensation and relevance influence offer ranking."),f(this,"paneForYou","Coupons & Savings"),f(this,"paneHome","Your Shopping"),f(this,"paneNullStateMessage","Visit a shopping site to find savings with Microsoft Edge"),f(this,"phTodayPriceAriaLabel","Today's price is $1"),f(this,"phHighPriceAriaLabel","The highest price in history is $1 in $2"),f(this,"phLowPriceArialLabel","The lowest price in history is $1 in $2"),f(this,"zipPayPayment","Zip"),f(this,"zipPayVirtualCardHeaderTitle","Pay with your Zip Visa Card"),f(this,"zipPayVirtualCardHeaderDescription","We've automatically filled your card information from Zip. Please confirm your card information and copy and paste any information that we didn't automatically fill correctly."),f(this,"zipPayVirtualCardHeaderAutofillFailedDescription","We are unable to autofill your card information from Zip. Please manually enter your Zip card information during checkout."),f(this,"zipPayVisualizedCardDetails","Illustration of Zip Visa card ending with $1, card holder $2, expires $3"),f(this,"affirmPayment","Affirm"),f(this,"affirmVirtualCardHeaderTitle","Pay with the Affirm Virtual Card"),f(this,"affirmVirtualCardHeaderDescription","We securely auto filled your Affirm virtual card info and billing address to help save you time making this purchase."),f(this,"affirmVirtualCardHeaderNoBillingInfoDescription","We securely auto filled your Affirm virtual card info to help save you time. To compete this purchase, please fill in your billing address."),f(this,"affirmVirtualCardHeaderAutofillFailedDescription","We are unable to autofill your card information from Affirm. Please manually enter your Affirm card information during checkout."),f(this,"affirmVisualizedCardDetails","Illustration of Affirm virtual card ending with $1, expires $2"),f(this,"klarnaPayment","Klarna"),f(this,"klarnaVirtualCardHeaderTitle","Pay with your Klarna virtual card"),f(this,"klarnaVirtualCardHeaderDescription","We securely auto filled your Klarna virtual card info and billing address to help save you time making this purchase."),f(this,"klarnaVirtualCardHeaderNoBillingInfoDescription","We securely auto filled your Klarna virtual card info to help save you time. To compete this purchase, please fill in your billing address."),f(this,"klarnaVirtualCardHeaderAutofillFailedDescription","We are unable to autofill your card information from Klarna. Please manually enter your Klarna card information during checkout."),f(this,"klarnaVisualizedCardDetails","Illustration of Klarna virtual card ending with $1, expires $2"),f(this,"klarnaDisclaimerText","The Klarna Visa Commercial Card is issued by Sutton Bank, Member FDIC, pursuant to a license from Visa U.S.A Inc. The Klarna Card is powered by Marqeta. Customer Service $1"),f(this,"klarnaCustomerServiceNumber","+1 (844) 552-7621"),f(this,"affirmDisclaimerText","The Affirm Card is a limited use virtual card and funded by either Cross River Bank, Member FDIC or Affirm Loan Services, LLC, depending on the terms of your loan agreement, and issued by Sutton Bank, Member FDIC, pursuant to license from Visa U.S.A. Inc. The Affirm Card is issued by Marqeta. $1 if you have any questions."),f(this,"affirmDisclaimerLinkText","Contact Affirm"),f(this,"trendingOffersPersonalizedTitle","Trending products for you"),f(this,"trendingOffersTitle","Trending Products"),f(this,"dailyDealsPersonalizedTitle","Deals for you"),f(this,"dailyDealsTitle","Today's Deal"),f(this,"percentageOff","{0} OFF"),f(this,"shopRunnerFeatureName","ShopRunner"),f(this,"shopRunnerFlyoutTitle","Free 2-day shipping"),f(this,"shopRunnerFlyoutHeading","1 year free ShopRunner"),f(this,"shopRunnerFlyoutSubHeading1","membership with Edge"),f(this,"shopRunnerFlyoutSubHeading2","Reg Price $69"),f(this,"shopRunnerIconDescription1","Free Returns"),f(this,"shopRunnerIconDescription2","1000+ stores"),f(this,"shopRunnerSignUpButtonText","Sign up for ShopRunner"),f(this,"shopRunnerPrivacyMsg","You will be signed in to Microsoft Edge which will back up your browsing data and let you see your favorites, passwords, history, and more on all your devices $1. You will not be charged a membership fee. Microsoft will share your name and email address with ShopRunner. By activating this offer you are agreeing to the ShopRunner Terms of Service and Privacy Policy."),f(this,"shopRunnerNotificationHeading","Free 2-day shipping with Microsoft Edge"),f(this,"dataLoader",void 0),this.dataLoader=e}return r(t,[{key:"Create",value:function(t){var e=this.dataLoader;this.commonCMAutoShowDisable=e.GetString("contextMenuAutoShowDisable",this.commonCMAutoShowDisable),this.commonCMAutoShowDisableFeature=e.GetString("commonCMAutoShowDisableFeature",this.commonCMAutoShowDisableFeature),this.commonCMAutoShowEnable=e.GetString("contextMenuAutoShowEnable",this.commonCMAutoShowEnable),this.commonCMAutoShowEnableFeature=e.GetString("commonCMAutoShowEnableFeature",this.commonCMAutoShowEnableFeature),this.commonSnoozeShopping=e.GetString("commonSnoozeShopping",this.commonSnoozeShopping),this.commonCMManage=e.GetString("contextMenuManage",this.commonCMManage),this.commonMoreOptionsLabel=e.GetString("moreOptionsLabel",this.commonMoreOptionsLabel),this.commonFixedTitle=e.GetString("fixedTitle",this.commonFixedTitle),this.commonFixedTitlePane=e.GetString("fixedTitlePane",this.commonFixedTitlePane),this.commonMicrosoftPolicy=e.GetString("microsoftPolicy",this.commonMicrosoftPolicy),this.commonLearnMore=e.GetString("learnMore",this.commonLearnMore),this.commonYouCanSave=e.GetString("youCanSave",this.commonYouCanSave),this.commonSave=e.GetString("saveX",this.commonSave),this.commonSaveSimple=e.GetString("save",this.commonSaveSimple),this.commonAltSettings=e.GetString("commonAltSettings",this.commonAltSettings),this.commonInternationalDisclaimer=e.GetString("internationalDisclaimer",this.commonInternationalDisclaimer),this.thirdPartCookiesText=e.GetString("thirdPartCookiesText",this.thirdPartCookiesText),this.commonClose=e.GetString("closeLabel",this.commonClose),this.doNotShowString=e.GetString("doNotShowBtn",this.doNotShowString),this.snoozeButton=e.GetString("snoozeEnable",this.snoozeButton),this.turnOffSnooze=e.GetString("snoozeDisable",this.turnOffSnooze),this.remindLater=e.GetString("remindLater",this.remindLater),this.snoozeTooltip=e.GetString("snoozeTooltip",this.snoozeTooltip),this.ariaSnoozeOn=e.GetString("ariaSnoozeOn",this.ariaSnoozeOn),this.ariaSnoozeoff=e.GetString("ariaSnoozeoff",this.ariaSnoozeoff),this.commonContextualTab=e.GetString("tabContextualTitle",this.commonContextualTab),this.commonHomeTab=e.GetString("tabHomeTitle",this.commonHomeTab),this.commonErrorTitle=e.GetString("errorTitle",this.commonErrorTitle),this.commonErrorSubTitle=e.GetString("errorSubTitle",this.commonErrorSubTitle),this.privacyConsentNew=e.GetString("privacyConsentNew",this.privacyConsentNew),this.rewardGiftCardConsent=e.GetString("rewardGiftCardConsent",this.rewardGiftCardConsent),this.rewardsjoinAckText=e.GetString("rewardsjoinAckText",this.rewardsjoinAckText),this.couponEmptyCouponSubTitle=e.GetString("EmptyCouponSubTitle",this.couponEmptyCouponSubTitle),this.couponEmptyCouponTitle=e.GetString("EmptyCouponTitle",this.couponEmptyCouponTitle),this.couponAutoApplyButton=e.GetString("autoApplyButton",this.couponAutoApplyButton),this.couponAutoApplyButtonRetry=e.GetString("couponAutoApplyButtonRetry",this.couponAutoApplyButtonRetry),this.couponAutoApplyButtonAlt=e.GetString("autoApplyButtonAlt",this.couponAutoApplyButtonAlt),this.couponAutoApplyButtonInstantSavings=e.GetString("couponAutoApplyButtonInstantSavings",this.couponAutoApplyButtonInstantSavings),this.couponFeatureName=e.GetString("couponFeatureName",this.couponFeatureName),this.mergedAutoApplyButton=e.GetString("mergedAutoApplyButton",this.mergedAutoApplyButton),this.mergedNewAutoApplyButton=e.GetString("mergedNewAutoApplyButton",this.mergedNewAutoApplyButton),this.couponCopied=e.GetString("copyCoupon",this.couponCopied),this.couponCopyLabel=e.GetString("copyCodeLabel",this.couponCopyLabel),this.couponCopyLabelRefresh=e.GetString("copyButtonTooltip",this.couponCopyLabelRefresh),this.couponSectionTitle=e.GetString("couponSectionSingularTitle",this.couponSectionTitle),this.couponTitle=e.GetString("couponTitleNew",this.couponTitle),this.couponTitleWithNum=e.GetString("couponTitleWithNum",this.couponTitleWithNum),this.couponTitleWithNumSingular=e.GetString("couponTitleWithNumSingular",this.couponTitleWithNumSingular),this.couponTitleInstantSavings=e.GetString("couponTitleInstantSavings",this.couponTitleInstantSavings),this.pcBestPriceHeader=e.GetString("bestPriceHeader",this.pcBestPriceHeader),this.pcBestPriceRefreshHeader=e.GetString("bestPriceRefreshHeader",this.pcBestPriceRefreshHeader),this.pcNotificationSeeMoreInfo=e.GetString("pcNotificationSeeMoreInfo",this.pcNotificationSeeMoreInfo),this.pcLowest=e.GetString("pcLowest",this.pcLowest),this.pcLowestUpdated=e.GetString("pcLowestUpdated",this.pcLowestUpdated),this.pcSmallSavingsHeader=e.GetString("pcSmallSavingsHeader",this.pcSmallSavingsHeader),this.pcNotificationVisitItem=e.GetString("pcNotificationVisitItem",this.pcNotificationVisitItem),this.pcPriceSectionTitle=e.GetString("priceSectionTitle",this.pcPriceSectionTitle),this.pcBestPriceTitle=e.GetString("pcBestPriceTitle",this.pcBestPriceTitle),this.cbActivateButtonRefresh=e.GetString("activateCashBackButtonRefresh",this.cbActivateButtonRefresh),this.cbActivatedButton=e.GetString("cashBackActivatedButton",this.cbActivatedButton),this.cbLearnMore=e.GetString("learnMoreLabel",this.cbLearnMore),this.cbConfirmationTitle=e.GetString("rebatesThanksMessage",this.cbConfirmationTitle),this.cbTopRetailerTitle=e.GetString("topRetailerTitle",this.cbTopRetailerTitle),this.pcbConfirmationMessage=e.GetString("pcbConfirmationMessage",this.pcbConfirmationMessage),this.pcbConfirmationTitle=e.GetString("pcbConfirmationTitle",this.pcbConfirmationTitle),this.pcbBingRebates=e.GetString("pcbBingRebates",this.pcbBingRebates),this.instantcbBingRebates=e.GetString("instantcbBingRebates",this.instantcbBingRebates),this.cbAutoShowTitle=e.GetString("cbAutoShowTitle",this.cbAutoShowTitle),this.cbConfirmationMessage=e.GetString("rebatesProcessingMessage",this.cbConfirmationMessage),this.cbTurnedOffTitle=e.GetString("rebatesTurnedOffMessage",this.cbTurnedOffTitle),this.cbTurnedOffMessage=e.GetString("rebatesTurnedOffNextSteps",this.cbTurnedOffMessage),this.cbEnableRebatesButton=e.GetString("activateRebatesButton",this.cbEnableRebatesButton),this.cbDontFindAutomatically=e.GetString("rebatesDontFindAutomatically",this.cbDontFindAutomatically),this.cbFindAutomatically=e.GetString("rebatesFindAutomatically",this.cbFindAutomatically),this.cbPreviousTransactions=e.GetString("rebatesSeeMore",this.cbPreviousTransactions),this.reminderInfoButtonName=e.GetString("reminderInfoButtonName",this.reminderInfoButtonName),this.notificationPrivacyTitle=e.GetString("notificationPrivacyTitle",this.notificationPrivacyTitle),this.notificationPrivacyDesc=e.GetString("notificationPrivacyDesc",this.notificationPrivacyDesc),this.reminderDisabled=e.GetString("reminderDisabled",this.reminderDisabled),this.reminderEnabled=e.GetString("reminderEnabled",this.reminderEnabled),this.cbRebatesOn=e.GetString("rebatesOnAndPercent",this.cbRebatesOn),this.cbRebatesOff=e.GetString("rebatesOffAndPercent",this.cbRebatesOff),this.cbNonStackableCoupon=e.GetString("rebatesNonStackable",this.cbNonStackableCoupon),this.cbProcessing=e.GetString("rebatesProcessing",this.cbProcessing),this.commonMicrosoftRewards=e.GetString("cbPrivacyMessageLearn",this.commonMicrosoftRewards),this.cbPrivacyMessage=e.GetString("rebatesPrivacyMessage",this.cbPrivacyMessage),this.cbPrivacyMessageTerm=e.GetString("cbPrivacyMessageTerm",this.cbPrivacyMessageTerm),this.cbPrivacyMessagePrivacyCookies=e.GetString("cbPrivacyMessagePrivacyCookies",this.cbPrivacyMessagePrivacyCookies),this.commonGotIt=e.GetString("rebatesGotIt",this.commonGotIt),this.cbErrorMessage=e.GetString("rebatesErrorMessage",this.cbErrorMessage),this.cbPromotionsOnSubHeader=e.GetString("cbPromotionsOnSubHeader",this.cbPromotionsOnSubHeader),this.cbBingActivateButton=e.GetString("cbBingActivateButton",this.cbBingActivateButton),this.cbRetailerTitle=e.GetString("cbRetailerTitle",this.cbRetailerTitle),this.cbSnapshotTitle=e.GetString("snapshotTitle",this.cbSnapshotTitle),this.cbViewAccount=e.GetString("viewAccount",this.cbViewAccount),this.cbCurrBalance=e.GetString("currBalance",this.cbCurrBalance),this.cbFeatureName=e.GetString("cbFeatureName",this.cbFeatureName),this.couponAutoApplyWithoutCB=e.GetString("rebatesApplyCoupons",this.couponAutoApplyWithoutCB),this.bannerFoundBestPrice=e.GetString("bannerPriceComparisonHeading",this.bannerFoundBestPrice),this.bannerFoundBestPriceAlt=e.GetString("bannerFoundBestPriceAlt",this.bannerFoundBestPriceAlt),this.bannerYouHaveBestPrice=e.GetString("bannerYouHaveBestPrice",this.bannerYouHaveBestPrice),this.bannerSubTitleFlyout=e.GetString("rebatesCouponsDescriptions",this.bannerSubTitleFlyout),this.bannerSeeDetails=e.GetString("bannerSeeDetails",this.bannerSeeDetails),this.bannerShowPriceHistory=e.GetString("bannerShowPriceHistory",this.bannerShowPriceHistory),this.bannerViewAll=e.GetString("bannerOpenFlyoutLabel",this.bannerViewAll),this.bannerVisitItem=e.GetString("bannerPriceComparisonHover",this.bannerVisitItem),this.bannerPriceStableTitle=e.GetString("bannerPriceStableTitle",this.bannerPriceStableTitle),this.bannerViewAllCouponsSingular=e.GetString("bannerViewAllCouponsSingular",this.bannerViewAllCouponsSingular),this.defaultClippingTitle=e.GetString("defaultClippingTitle",this.defaultClippingTitle),this.defaultClippingSubTitle=e.GetString("defaultClippingSubTitle",this.defaultClippingSubTitle),this.clippingMainTitle=e.GetString("clippingMainTitle",this.clippingMainTitle),this.clippingMainTitleSmallNotification=e.GetString("clippingMainTitleSmallNotification",this.clippingMainTitleSmallNotification),this.clippingSubTitle=e.GetString("clippingSubTitle",this.clippingSubTitle),this.clippingButtonTitle=e.GetString("clippingButtonTitle",this.clippingButtonTitle),this.clippedTitle=e.GetString("clippedTitle",this.clippedTitle),this.clippedSubTitle=e.GetString("clippedSubTitle",this.clippedSubTitle),this.clippingMainTitleEnGb=e.GetString("clippingMainTitleEnGb",this.clippingMainTitleEnGb),this.defaultClippingTitleEnGb=e.GetString("defaultClippingTitleEnGb",this.defaultClippingTitleEnGb),this.clippingButtonTitleEnGb=e.GetString("clippingButtonTitleEnGb",this.clippingButtonTitleEnGb),this.clippedSubTitleEnGb=e.GetString("clippedSubTitleEnGb",this.clippedSubTitleEnGb),this.clippingFeatureName=e.GetString("clippingFeatureName",this.clippingFeatureName),this.autoClipSubTitle=e.GetString("autoClipSubTitle",this.autoClipSubTitle),this.autoClipButtonTitle=e.GetString("autoClipButtonTitle",this.autoClipButtonTitle),this.getDeal=e.GetString("getDeal",this.getDeal),this.dealsTitle=e.GetString("dealsTitle",this.dealsTitle),this.dealsSubTitle=e.GetString("dealsSubTitle",this.dealsSubTitle),this.phTitlePriceDropped=e.GetString("phTitlePriceDropped",this.phTitlePriceDropped),this.phTitlePriceIncrease=e.GetString("phTitlePriceIncrease",this.phTitlePriceIncrease),this.phTitleStable=e.GetString("phTitleStable",this.phTitleStable),this.phToday=e.GetString("phToday",this.phToday),this.phLow=e.GetString("phLow",this.phLow),this.phHigh=e.GetString("phHigh",this.phHigh),this.phMedian=e.GetString("phMedian",this.phMedian),this.phPriceStable=e.GetString("phPriceStable",this.phPriceStable),this.phPriceDrop=e.GetString("phPriceDrop",this.phPriceDrop),this.phPriceDropped=e.GetString("phPriceDropped",this.phPriceDropped),this.phSee=e.GetString("phSee",this.phSee),this.prodHPriceDropTitle=e.GetString("prodHPriceDropTitle",this.prodHPriceDropTitle),this.prodHPriceDropDonotRemindMe=e.GetString("prodHPriceDropDonotRemindMe",this.prodHPriceDropDonotRemindMe),this.prodHPriceDropViewAt=e.GetString("prodHPriceDropViewAt",this.prodHPriceDropViewAt),this.prodHAnnotation=e.GetString("prodHAnnotation",this.prodHAnnotation),this.prodHDeleteItem=e.GetString("prodHDeleteItem",this.prodHDeleteItem),this.phPriceIncrease=e.GetString("phPriceIncrease",this.phPriceIncrease),this.phFinalDrop=e.GetString("phFinalDrop",this.phFinalDrop),this.phFinalIncrease=e.GetString("phFinalIncrease",this.phFinalIncrease),this.phPriceStableRefresh=e.GetString("phPriceStableRefresh",this.phPriceStableRefresh),this.phGraphLabel=e.GetString("phGraphLabel",this.phGraphLabel),this.phStableLabel=e.GetString("phStableLabel",this.phStableLabel),this.phOldPrice=e.GetString("phOldPrice",this.phOldPrice),this.phNewPrice=e.GetString("phNewPrice",this.phNewPrice),this.phTooltipText=e.GetString("phTooltipText",this.phTooltipText),this.phFeatureName=e.GetString("phFeatureName",this.phFeatureName),this.phSectionTitle=e.GetString("phSectionTitle",this.phSectionTitle),this.prodHPriceDropRefresh=e.GetString("prodHPriceDropRefresh",this.prodHPriceDropRefresh),this.prodHPriceIncreaseRefresh=e.GetString("prodHPriceIncreaseRefresh",this.prodHPriceIncreaseRefresh),this.prodHSectionTitle=e.GetString("prodHSectionTitle",this.prodHSectionTitle),this.rrExpertAndVideoReviews=e.GetString("rrExpertAndVideoReviews",this.rrExpertAndVideoReviews),this.rrExpertReviews=e.GetString("rrExpertReviews",this.rrExpertReviews),this.rrVideoReviews=e.GetString("rrVideoReviews",this.rrVideoReviews),this.rrFeatureName=e.GetString("rrFeatureName",this.rrFeatureName),this.checkoutCreditOrDebitCardDropDown=e.GetString("checkoutCreditOrDebitCardDropDown",this.checkoutCreditOrDebitCardDropDown),this.checkoutShippingAddress=e.GetString("checkoutShippingAddress",this.checkoutShippingAddress),this.checkoutPaymentInfo=e.GetString("checkoutPaymentInfo",this.checkoutPaymentInfo),this.checkoutSameBilling=e.GetString("checkoutSameBilling",this.checkoutSameBilling),this.checkoutFillOnly=e.GetString("checkoutFillOnly",this.checkoutFillOnly),this.checkoutButtonWithoutAA=e.GetString("checkoutButtonWithoutAA",this.checkoutButtonWithoutAA),this.checkoutButtonWithoutAAForOtherPayment=e.GetString("checkoutButtonWithoutAAForOtherPayment",this.checkoutButtonWithoutAAForOtherPayment),this.checkoutSectionTitle=e.GetString("checkoutSectionTitle",this.checkoutSectionTitle),this.checkoutAddressSectionTitle=e.GetString("checkoutAddressSectionTitle",this.checkoutAddressSectionTitle),this.checkoutPaymentSectionTitle=e.GetString("checkoutPaymentSectionTitle",this.checkoutPaymentSectionTitle),this.checkoutValidTill=e.GetString("checkoutValidTill",this.checkoutValidTill),this.checkoutZip=e.GetString("checkoutZip",this.checkoutZip),this.paymentOptionLabel=e.GetString("paymentOptionLabel",this.paymentOptionLabel),this.microsoftWalletLinkText=e.GetString("microsoftWalletLinkText",this.microsoftWalletLinkText),this.virtualCardCardHolderNameHeader=e.GetString("virtualCardCardHolderNameHeader",this.virtualCardCardHolderNameHeader),this.virtualCardBillingAddressHeader=e.GetString("virtualCardBillingAddressHeader",this.virtualCardBillingAddressHeader),this.virtualCardBillingInfoHeader=e.GetString("virtualCardBillingInfoHeader",this.virtualCardBillingInfoHeader),this.virtualCardNumberHeader=e.GetString("virtualCardNumberHeader",this.virtualCardNumberHeader),this.virtualCardExpirationHeader=e.GetString("virtualCardExpirationHeader",this.virtualCardExpirationHeader),this.virtualCardCVCHeader=e.GetString("virtualCardCVCHeader",this.virtualCardCVCHeader),this.visualizedCardHolderHeader=e.GetString("visualizedCardHolderHeader",this.visualizedCardHolderHeader),this.visualizedCardExpiresHeader=e.GetString("visualizedCardExpiresHeader",this.visualizedCardExpiresHeader),this.showContentToggleTooltipCardNumber=e.GetString("showContentToggleTooltipCardNumber",this.showContentToggleTooltipCardNumber),this.showContentToggleTooltipCVC=e.GetString("showContentToggleTooltipCVC",this.showContentToggleTooltipCVC),this.hideContentToggleTooltipCardNumber=e.GetString("hideContentToggleTooltipCardNumber",this.hideContentToggleTooltipCardNumber),this.hideContentToggleTooltipCVC=e.GetString("hideContentToggleTooltipCVC",this.hideContentToggleTooltipCVC),this.copyButtonTooltip=e.GetString("copyButtonTooltip",this.copyButtonTooltip),this.virtualCardSystemFailureHeader=e.GetString("virtualCardSystemFailureHeader",this.virtualCardSystemFailureHeader),this.virtualCardLinkSuccess=e.GetString("virtualCardLinkSuccess",this.virtualCardLinkSuccess),this.buyNowPayLater=e.GetString("billNowPayLater",this.buyNowPayLater),this.masterCardPayment=e.GetString("masterCardPayment",this.masterCardPayment),this.visaPayment=e.GetString("visaPayment",this.visaPayment),this.amexPayment=e.GetString("amexPayment",this.amexPayment),this.discoverPayment=e.GetString("discoverPayment",this.discoverPayment),this.couponExpandableTitleWithNum=e.GetString("couponExpandableTitleWithNum",this.couponExpandableTitleWithNum),this.couponExpandableTitleWithNumSingular=e.GetString("couponExpandableTitleWithNumSingular",this.couponExpandableTitleWithNumSingular),this.couponExpandableTitleViewCoupons=e.GetString("couponExpandableTitleViewCoupons",this.couponExpandableTitleViewCoupons),this.bgaaSuccessLeftTitle=e.GetString("bgaaSuccessLeftTitle",this.bgaaSuccessLeftTitle),this.bgaaSuccessRightTitle=e.GetString("bgaaSuccessRightTitle",this.bgaaSuccessRightTitle),this.bgaaSuccessRightText=e.GetString("bgaaSuccessRightText",this.bgaaSuccessRightText),this.bgaaFailedTitle=e.GetString("bgaaFailedTitle",this.bgaaFailedTitle),this.bgaaFailedLeftTitle=e.GetString("bgaaFailedLeftTitle",this.bgaaFailedLeftTitle),this.bgaaFailedLeftText=e.GetString("bgaaFailedLeftText",this.bgaaFailedLeftText),this.bgaaFailedRightTitle=e.GetString("bgaaFailedRightTitle",this.bgaaFailedRightTitle),this.bgaaFailedRightText=e.GetString("bgaaFailedRightText",this.bgaaFailedRightText),this.disablePackageTrackingFromMenuText=e.GetString("disablePackageTrackingFromMenuText",this.disablePackageTrackingFromMenuText),this.enablePackageTrackingFromMenuText=e.GetString("enablePackageTrackingFromMenuText",this.enablePackageTrackingFromMenuText),this.packageTrackingOptInButtonText=e.GetString("packageTrackingOptInButtonText",this.packageTrackingOptInButtonText),this.packageTrackingNewOptInButtonText=e.GetString("packageTrackingNewOptInButtonText",this.packageTrackingNewOptInButtonText),this.packageTrackingNotificationTitle=e.GetString("packageTrackingNotificationTitle",this.packageTrackingNotificationTitle),this.packageTrackingNewNotificationTitle=e.GetString("packageTrackingNewNotificationTitle",this.packageTrackingNewNotificationTitle),this.packageTrackingNotificationDescription=e.GetString("packageTrackingNotificationDescription",this.packageTrackingNotificationDescription),this.packageTrackingFeatureName=e.GetString("packageTrackingFeatureName",this.packageTrackingFeatureName),this.packageTrackingOrderPlaced=e.GetString("packageTrackingOrderPlaced",this.packageTrackingOrderPlaced),this.checkBackForOrders=e.GetString("checkBackForOrders",this.checkBackForOrders),this.deteTrackerText=e.GetString("deteTrackerText",this.deteTrackerText),this.packageTrackingOptOutButtonText=e.GetString("packageTrackingOptOutButtonText",this.packageTrackingOptOutButtonText),this.productDetailsOrderTracking=e.GetString("productDetailsOrderTracking",this.productDetailsOrderTracking),this.packageTrackingDeactivatedTitle=e.GetString("packageTrackingDeactivatedTitle",this.packageTrackingDeactivatedTitle),this.packageTrackingActivatedTitle=e.GetString("packageTrackingActivatedTitle",this.packageTrackingActivatedTitle),this.packageTrackingOptInAcknowledgement=e.GetString("packageTrackingOptInAcknowledgement",this.packageTrackingOptInAcknowledgement),this.packageTrackingOptInAcknowledgementFailure=e.GetString("packageTrackingOptInAcknowledgementFailure",this.packageTrackingOptInAcknowledgementFailure),this.packageTrackingOptOutAcknowledgement=e.GetString("packageTrackingOptOutAcknowledgement",this.packageTrackingOptOutAcknowledgement),this.packageTrackingOptOutAcknowledgementFailure=e.GetString("packageTrackingOptOutAcknowledgementFailure",this.packageTrackingOptOutAcknowledgementFailure),this.rewardGiftConsentSubtext=e.GetString("rewardGiftConsentSubtext",this.rewardGiftConsentSubtext),this.rewardsPrivacyText=e.GetString("rewardsPrivacyText",this.rewardsPrivacyText),this.rewardsTermsText=e.GetString("rewardsTermsText",this.rewardsTermsText),this.giftCardDismiss=e.GetString("giftCardDismiss",this.giftCardDismiss),this.giftFeatureName=e.GetString("giftFeatureName",this.giftFeatureName),this.privacySettingsManage=e.GetString("privacySettingsManage",this.privacySettingsManage),this.feedbackPrompt=e.GetString("feedbackPrompt",this.feedbackPrompt),this.bnplFeedbackPrompt=e.GetString("bnplFeedbackPrompt",this.bnplFeedbackPrompt),this.feedbackThanks=e.GetString("feedbackThanks",this.feedbackThanks),this.feedbackAriaLike=e.GetString("feedbackAriaLike",this.feedbackAriaLike),this.feedbackAriaDislike=e.GetString("feedbackAriaDislike",this.feedbackAriaDislike),this.feedbackAriaClose=e.GetString("feedbackAriaClose",this.feedbackAriaClose),this.sustainabilityDescriptionLight=e.GetString("sustainabilityDescriptionLight",this.sustainabilityDescriptionLight),this.sustainabilityDescription=e.GetString("sustainabilityDescription",this.sustainabilityDescription),this.sustainabilityString=e.GetString("sustainabilityString",this.sustainabilityString),this.sustainabilityConfirmationTitle=e.GetString("sustainabilityConfirmationTitle",this.sustainabilityConfirmationTitle),this.sustainabilityFeatureName=e.GetString("sustainabilityFeatureName",this.sustainabilityFeatureName),this.attCouponHeaderLocked=e.GetString("attCouponHeaderLocked",this.attCouponHeaderLocked),this.attCouponHeaderUnlocked=e.GetString("attCouponHeaderUnlocked",this.attCouponHeaderUnlocked),this.gcSectionTitle=e.GetString("gcSectionTitle",this.gcSectionTitle),this.gcbSectionTitle=e.GetString("gcbSectionTitle",this.gcbSectionTitle),this.gcbSectionHeaderTooltipText=e.GetString("gcbSectionHeaderTooltipText",this.gcbSectionHeaderTooltipText),this.gcbSearchSectionTitle=e.GetString("gcbSearchSectionTitle",this.gcbSearchSectionTitle),this.gcbActivatedSectionTitle=e.GetString("gcbActivatedSectionTitle",this.gcbActivatedSectionTitle),this.gcbActivatedSubSectionTitle=e.GetString("gcbActivatedSubSectionTitle",this.gcbActivatedSubSectionTitle),this.gcbActivatedSectionDescr=e.GetString("gcbActivatedSectionDescr",this.gcbActivatedSectionDescr),this.gcbLandingNotificationSectionTitle=e.GetString("gcbLandingNotificationSectionTitle",this.gcbLandingNotificationSectionTitle),this.gcbLandingButton=e.GetString("gcbLandingButton",this.gcbLandingButton),this.gcbButton=e.GetString("gcbButton",this.gcbButton),this.gcbPdpSectionTitle=e.GetString("gcbPdpSectionTitle",this.gcbPdpSectionTitle),this.gcbActivateButton=e.GetString("gcbActivateButton",this.gcbActivateButton),this.gcbPdpHeaderText=e.GetString("gcbPdpHeaderText",this.gcbPdpHeaderText),this.gcbPdpActivateButton=e.GetString("gcbPdpActivateButton",this.gcbPdpActivateButton),this.gcbActivated=e.GetString("gcbActivated",this.gcbActivated),this.gcbButtonShop=e.GetString("gcbButtonShop",this.gcbButtonShop),this.gcbNotifRebates=e.GetString("gcbNotifRebates",this.gcbNotifRebates),this.gcbNotifSubtitle=e.GetString("gcbNotifSubtitle",this.gcbNotifSubtitle),this.couponSectionPanePluralTitle=e.GetString("couponSectionPanePluralTitle",this.couponSectionPanePluralTitle),this.groceriesFeatureName=e.GetString("groceriesFeatureName",this.groceriesFeatureName),this.pcdisclaimerText=e.GetString("pcdisclaimerText",this.pcdisclaimerText),this.pcNotificationdisclaimerText=e.GetString("pcNotificationdisclaimerText",this.pcNotificationdisclaimerText),this.cbMainTitleOff=e.GetString("rebatesPercentage",this.cbMainTitleOff),this.cbMainTitleOffWithCashbackEstimate=e.GetString("cbMainTitleOffWithCashbackEstimate",this.cbMainTitleOffWithCashbackEstimate),this.pcbMainTitleOff=e.GetString("pcbMainTitleOff",this.pcbMainTitleOff),this.cbMainTitleOn=e.GetString("rebatesPercentageEarn",this.cbMainTitleOn),this.cbAutoShowButtonMessage=e.GetString("cbAutoShowButtonMessage",this.cbAutoShowButtonMessage),this.cbMainTitleOnStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.cbMainTitleOnStoreWide),this.pcbMainTitleOnStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.pcbMainTitleOnStoreWide),this.cbMainTitleOffStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.cbMainTitleOffStoreWide),this.pcbMainTitleOffStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.pcbMainTitleOffStoreWide),this.cbSubtitle=e.GetString("cbSubtitle",this.cbSubtitle),this.walmartMessage=e.GetString("walmartMessage",this.walmartMessage),this.cbPromotionsSubTitle=e.GetString("subRebatesPercentageEarn",this.cbPromotionsSubTitle),this.cbPromotionsSubTitleStoreWide=e.GetString("subRebatesPercentageEarnStorewide",this.cbPromotionsSubTitleStoreWide),this.cbTitleSignInOn=e.GetString("cbMergedTitleSignInOn",this.cbTitleSignInOn),this.cbCashBackOnOff=e.GetString("rebatesOnAndOffPrefix",this.cbCashBackOnOff),this.cbLifetimeEarned=e.GetString("cbLifetimeEarned",this.cbLifetimeEarned),this.cbToolTips=e.GetString("cbToolTips",this.cbToolTips),this.bannerPriceDropTitle=e.GetString("bannerPriceDropTitle",this.bannerPriceDropTitle),this.bannerPriceIncreaseTitle=e.GetString("bannerPriceIncreaseTitle",this.bannerPriceIncreaseTitle),this.bannerCouponSingularTitle=e.GetString("bannerCouponSingularTitle",this.bannerCouponSingularTitle),this.bannerFoundCoupons=e.GetString("bannerCouponHeadingLabelPlural",this.bannerFoundCoupons),this.bannerFoundCouponsSingular=e.GetString("bannerCouponHeadingLabelSingular",this.bannerFoundCouponsSingular),this.bannerCouponPluralTitle=e.GetString("bannerCouponPluralTitle",this.bannerCouponPluralTitle),this.bannerCashBackOffTitle=e.GetString("bannerCashBackOffTitle",this.bannerCashBackOffTitle),this.bannerCashBackOnTitle=e.GetString("bannerCashBackOnTitle",this.bannerCashBackOnTitle),this.bannerRecentPurchase=e.GetString("bannerRecentPurchase",this.bannerRecentPurchase),this.bannerLifetime=e.GetString("bannerLifetime",this.bannerLifetime),this.privacyDataCollectionMessage=e.GetString("privacyDataCollectionMessage",this.privacyDataCollectionMessage),this.recommendationsFriendlyDomainTitle=e.GetString("recommendationsFriendlyDomainTitle",this.recommendationsFriendlyDomainTitle),this.recommendationsTitle=e.GetString("recommendationsTitle",this.recommendationsTitle),this.recommendationsDiscountPercent=e.GetString("recommendationsDiscountPercent",this.recommendationsDiscountPercent),this.recommendationsPriceDrop=e.GetString("recommendationsPriceDrop",this.recommendationsPriceDrop),this.recommendationsFeatureName=e.GetString("recommendationsFeatureName",this.recommendationsFeatureName),this.abandonedCartTitle=e.GetString("abandonedCartTitle",this.abandonedCartTitle),this.abandonedCartPrompt=e.GetString("abandonedCartPrompt",this.abandonedCartPrompt),this.microsoftWalletManage=e.GetString("microsoftWalletManage",this.microsoftWalletManage),this.trAriaLabel=e.GetString("trAriaLabel",this.trAriaLabel),this.couponSectionPluralTitle=e.GetString("couponSectionPluralTitle",this.couponSectionPluralTitle),this.privacyConsent=e.GetString("privacyConsent",this.privacyConsent),this.savingsHeader=e.GetString("savingsHeader",this.savingsHeader),this.sectionSeeMore=e.GetString("sectionSeeMore",this.sectionSeeMore),this.sectionSeeMoreOnly=e.GetString("sectionSeeMoreOnly",this.sectionSeeMoreOnly),this.sectionSeeMoreViewLess=e.GetString("sectionSeeMoreViewLess",this.sectionSeeMoreViewLess),this.bannerSave=e.GetString("bannerSave",this.bannerSave),this.bannerViewAllCoupons=e.GetString("bannerViewAllCoupons",this.bannerViewAllCoupons),this.pcNotificationTitle=e.GetString("pcNotificationTitle",this.pcNotificationTitle),this.pcNotificationTitleRefresh=e.GetString("pcNotificationTitleRefresh",this.pcNotificationTitleRefresh),this.pcNotificationTitleSmall=e.GetString("pcNotificationTitleSmall",this.pcNotificationTitleSmall),this.pcNotificationNarratorIntro=e.GetString("pcNotificationNarratorIntro",this.pcNotificationNarratorIntro),this.viewMorePricesButtonText=e.GetString("viewMorePricesButtonText",this.viewMorePricesButtonText),this.pcLowestPriceAria=e.GetString("pcLowestPriceAria",this.pcLowestPriceAria),this.pcCurrentPriceAria=e.GetString("pcCurrentPriceAria",this.pcCurrentPriceAria),this.pcFeatureName=e.GetString("pcFeatureName",this.pcFeatureName),this.cbPromotionsTitle=e.GetString("cbPromotionsTitle",this.cbPromotionsTitle),this.cbExpiryDateTime=e.GetString("cbExpiryDateTime",this.cbExpiryDateTime),this.cbCommissionStr=e.GetString("cbCommissionStr",this.cbCommissionStr),this.pcbCommissionStoreWide=e.GetString("cbCommissionStr",this.pcbCommissionStoreWide),this.cbPersonalized=e.GetString("cbPersonalized",this.cbPersonalized),this.instantcb=e.GetString("instantcb",this.instantcb),this.instantcbSecond=e.GetString("instantcbSecond",this.instantcbSecond),this.couponSuccessful=e.GetString("couponSuccessful",this.couponSuccessful),this.cbMergedTitle=e.GetString("rebatesFoundCouponsAndCashback",this.cbMergedTitle),this.cbMergedTitleEstimate=e.GetString("cbMergedTitleEstimate",this.cbMergedTitleEstimate),this.cbPreviousCashbackDomain=e.GetString("cbPreviousCashbackDomain",this.cbPreviousCashbackDomain),this.cbMergedSingularTitle=e.GetString("rebatesFoundCouponsAndCashbackSingular",this.cbMergedSingularTitle),this.cbMergedSingularTitleEstimate=e.GetString("cbMergedSingularTitleEstimate",this.cbMergedSingularTitleEstimate),this.cashback=e.GetString("cashback",this.cashback),this.forYou=e.GetString("forYou",this.forYou),this.previousOffers=e.GetString("previousOffers",this.previousOffers),this.commonAriaLogo=e.GetString("rebatesNotificationLogo",this.commonAriaLogo),this.tipsFreeShipping=e.GetString("tipsFreeShipping",this.tipsFreeShipping),this.tipsMinimumPurchase=e.GetString("tipsMinimumPurchase",this.tipsMinimumPurchase),this.triviaTitleNew=e.GetString("triviaTitleNew",this.triviaTitleNew),this.savingsFoundTitle=e.GetString("savingsFoundTitle",this.savingsFoundTitle),this.savingsFoundTriviaTitle=e.GetString("savingsFoundTriviaTitle",this.savingsFoundTriviaTitle),this.triviaAverageSavingsHeader=e.GetString("triviaAverageSavingsHeader",this.triviaAverageSavingsHeader),this.couponExpectationHeader=e.GetString("couponExpectationHeader",this.couponExpectationHeader),this.highCouponExpectationTooltip=e.GetString("highCouponExpectationTooltip",this.highCouponExpectationTooltip),this.mediumCouponExpectationTooltip=e.GetString("mediumCouponExpectationTooltip",this.mediumCouponExpectationTooltip),this.lowCouponExpectationTooltip=e.GetString("lowCouponExpectationTooltip",this.lowCouponExpectationTooltip),this.virtualCardSystemFailureDescription=e.GetString("virtualCardSystemFailureDescription",this.virtualCardSystemFailureDescription),this.virtualCardSystemFailureLink=e.GetString("virtualCardSystemFailureLink",this.virtualCardSystemFailureLink),this.virtualCardLinkFail=e.GetString("virtualCardLinkFail",this.virtualCardLinkFail),this.virtualCardFeatureName=e.GetString("virtualCardFeatureName",this.virtualCardFeatureName),this.cardPaymentOptionBanner=e.GetString("cardPaymentOptionBanner",this.cardPaymentOptionBanner),this.otherPaymentMethodBanner=e.GetString("otherPaymentMethodBanner",this.otherPaymentMethodBanner),this.howItWorkLinkAriaLabel=e.GetString("howItWorkLinkAriaLabel",this.howItWorkLinkAriaLabel),this.msZipDescription=e.GetString("msZipDescription",this.msZipDescription),this.similarSellerNotificationError=e.GetString("similarSellerNotificationError",this.similarSellerNotificationError),this.similarSellerStringCollapsedAmazon=e.GetString("similarSellerStringCollapsedAmazon",this.similarSellerStringCollapsedAmazon),this.similarSellerStringCollapsed=e.GetString("similarSellerStringCollapsed",this.similarSellerStringCollapsed),this.similarSellerAddToCartTitle=e.GetString("similarSellerAddToCartTitle",this.similarSellerAddToCartTitle),this.similarSellerNewAddToCartTitle=e.GetString("similarSellerNewAddToCartTitle",this.similarSellerNewAddToCartTitle),this.similarSellerAddedToCartTitle=e.GetString("similarSellerAddedToCartTitle",this.similarSellerAddedToCartTitle),this.similarSellerShipFromString=e.GetString("similarSellerShipFromString",this.similarSellerShipFromString),this.similarSellerRatingLabel=e.GetString("similarSellerRatingLabel",this.similarSellerRatingLabel),this.similarSellerFreeDelivery=e.GetString("similarSellerFreeDelivery",this.similarSellerFreeDelivery),this.similarSellerFeatureName=e.GetString("similarSellerFeatureName",this.similarSellerFeatureName),this.similarSellerStringAmazon=e.GetString("similarSellerStringAmazon",this.similarSellerStringAmazon),this.similarSellerString=e.GetString("similarSellerString",this.similarSellerString),this.similarSellerStringSubtitleAmazon=e.GetString("similarSellerStringSubtitleAmazon",this.similarSellerStringSubtitleAmazon),this.similarSellerStringSubtitle=e.GetString("similarSellerStringSubtitle",this.similarSellerStringSubtitle),this.similarSellerNotificationTitle=e.GetString("similarSellerNotificationTitle",this.similarSellerNotificationTitle),this.similarSellerAddToCartAriaLable=e.GetString("similarSellerAddToCartAriaLable",this.similarSellerAddToCartAriaLable),this.tipsTiltleSingle=e.GetString("tipsTiltleSingle",this.tipsTiltleSingle),this.tipsSubTitleSingle=e.GetString("tipsSubTitleSingle",this.tipsSubTitleSingle),this.tipsMainTitle=e.GetString("tipsMainTitle",this.tipsMainTitle),this.tipsSubTitle=e.GetString("tipsSubTitle",this.tipsSubTitle),this.orderTrackingTitle=e.GetString("orderTrackingTitle",this.orderTrackingTitle),this.rewardFailedSignin=e.GetString("rewardFailedSignin",this.rewardFailedSignin),this.rewardTitleDefault=e.GetString("rewardTitleDefault",this.rewardTitleDefault),this.rewardTitleEarnedMaximum=e.GetString("rewardTitleEarnedMaximum",this.rewardTitleEarnedMaximum),this.rewardTitleRewardTwo=e.GetString("rewardTitleRewardTwo",this.rewardTitleRewardTwo),this.rewardPointMax=e.GetString("rewardPointMax",this.rewardPointMax),this.rewardPerMaxPoint=e.GetString("rewardPerMaxPoint",this.rewardPerMaxPoint),this.rewardDetailFirstLine=e.GetString("rewardDetailFirstLine",this.rewardDetailFirstLine),this.rewardTitleRewardsAdded=e.GetString("rewardTitleRewardsAdded",this.rewardTitleRewardsAdded),this.rewardDetailFirstLineBold=e.GetString("rewardDetailFirstLineBold",this.rewardDetailFirstLineBold),this.rewardKeepExploringText=e.GetString("rewardKeepExploringText",this.rewardKeepExploringText),this.rewardDetailTwo=e.GetString("rewardDetailTwo",this.rewardDetailTwo),this.rewardDetail=e.GetString("rewardDetail",this.rewardDetail),this.rewardSignIn=e.GetString("rewardSignIn",this.rewardSignIn),this.rewardRedeem=e.GetString("rewardRedeem",this.rewardRedeem),this.rewardCoupons=e.GetString("rewardCoupons",this.rewardCoupons),this.rewardCashback=e.GetString("rewardCashback",this.rewardCashback),this.rewardRewards=e.GetString("rewardRewards",this.rewardRewards),this.rewardAssociateSignIn=e.GetString("rewardAssociateSignIn",this.rewardAssociateSignIn),this.dismissMessageAriaLabel=e.GetString("dismissMessageAriaLabel",this.dismissMessageAriaLabel),this.virtualCardDetailsActions=e.GetString("virtualCardDetailsActions",this.virtualCardDetailsActions),this.giftCardTitle=e.GetString("giftCardTitle",this.giftCardTitle),this.giftCardSubtitle=e.GetString("giftCardSubtitle",this.giftCardSubtitle),this.giftCardSubtitleFiveDollar=e.GetString("giftCardSubtitleFiveDollar",this.giftCardSubtitleFiveDollar),this.maybeLaterButtontext=e.GetString("maybeLaterButtontext",this.maybeLaterButtontext),this.rewardJoinSuccess=e.GetString("rewardJoinSuccess",this.rewardJoinSuccess),this.rewardOfferSuccess=e.GetString("rewardOfferSuccess",this.rewardOfferSuccess),this.joinNowButtonText=e.GetString("joinNowButtonText",this.joinNowButtonText),this.ytSectionTitleOnRetailer=e.GetString("ytSectionTitleOnRetailer",this.ytSectionTitleOnRetailer),this.ytHeader=e.GetString("ytHeader",this.ytHeader),this.ytPhotoLabel=e.GetString("ytPhotoLabel",this.ytPhotoLabel),this.ytMoreCoupons=e.GetString("ytMoreCoupons",this.ytMoreCoupons),this.ytSectionTitleOnYoutube=e.GetString("ytSectionTitleOnYoutube",this.ytSectionTitleOnYoutube),this.ytShopOn=e.GetString("ytShopOn",this.ytShopOn),this.ytHeaderPermission=e.GetString("ytHeaderPermission",this.ytHeaderPermission),this.ytSaveCouponsPermission=e.GetString("ytSaveCouponsPermission",this.ytSaveCouponsPermission),this.ytDontSaveCouponsPermission=e.GetString("ytDontSaveCouponsPermission",this.ytDontSaveCouponsPermission),this.ytHeaderSingular=e.GetString("ytHeaderSingular",this.ytHeaderSingular),this.ytHeaderPermissionSingular=e.GetString("ytHeaderPermissionSingular",this.ytHeaderPermissionSingular),this.ptCouponsTitle=e.GetString("ptCouponsTitle",this.ptCouponsTitle),this.ptCouponsTitleSingular=e.GetString("ptCouponsTitleSingular",this.ptCouponsTitleSingular),this.snoozeHoverText=e.GetString("snoozeHoverText",this.snoozeHoverText),this.attFlyoutLocked=e.GetString("attFlyoutLocked",this.attFlyoutLocked),this.attFlyoutUnlocked=e.GetString("attFlyoutUnlocked",this.attFlyoutUnlocked),this.attTooltipHeader=e.GetString("attTooltipHeader",this.attTooltipHeader),this.attTooltipText=e.GetString("attTooltipText",this.attTooltipText),this.gcbCashBack=e.GetString("gcbCashBack",this.gcbCashBack),this.gcbNotifTitle=e.GetString("gcbNotifTitle",this.gcbNotifTitle),this.gcbOnMerchantName=e.GetString("gcbOnMerchantName",this.gcbOnMerchantName),this.paneForYou=e.GetString("paneForYou",this.paneForYou),this.paneHome=e.GetString("paneHome",this.paneHome),this.paneNullStateMessage=e.GetString("paneNullStateMessage",this.paneNullStateMessage),this.phTodayPriceAriaLabel=e.GetString("phTodayPriceAriaLabel",this.phTodayPriceAriaLabel),this.phHighPriceAriaLabel=e.GetString("phHighPriceAriaLabel",this.phHighPriceAriaLabel),this.phLowPriceArialLabel=e.GetString("phLowPriceArialLabel",this.phLowPriceArialLabel),this.trSectionTitle=e.GetString("trSectionTitle",this.trSectionTitle),this.autosMarketplaceSectionTitle=e.GetString("autosMarketplaceSectionTitle",this.autosMarketplaceSectionTitle),this.autosMarketplaceNotifivationLowPriceHeader=e.GetString("autosMarketplaceNotifivationLowPriceHeader",this.autosMarketplaceNotifivationLowPriceHeader),this.autosMarketplaceNotificationHeader=e.GetString("autosMarketplaceNotificationHeader",this.autosMarketplaceNotificationHeader),this.autosMarketplaceNotificationNoAccident=e.GetString("autosMarketplaceNotificationNoAccident",this.autosMarketplaceNotificationNoAccident),this.autosMarketplaceOnlineDealer=e.GetString("autosMarketplaceOnlineDealer",this.autosMarketplaceOnlineDealer),this.autosMarketplaceSeeMoreButton=e.GetString("autosMarketplaceSeeMoreButton",this.autosMarketplaceSeeMoreButton),this.autosMarketplaceSimilarCarFound=e.GetString("autosMarketplaceSimilarCarFound",this.autosMarketplaceSimilarCarFound),this.autosMarketplaceSimilarCarsFound=e.GetString("autosMarketplaceSimilarCarsFound",this.autosMarketplaceSimilarCarsFound),this.autosMarketplaceNoAccident=e.GetString("autosMarketplaceNoAccident",this.autosMarketplaceNoAccident),this.autosMarketplacePopular=e.GetString("autosMarketplacePopular",this.autosMarketplacePopular),this.autosMarketplaceGreatDeal=e.GetString("autosMarketplaceGreatDeal",this.autosMarketplaceGreatDeal),this.autosMarketplaceSeeAll=e.GetString("autosMarketplaceSeeAll",this.autosMarketplaceSeeAll),this.autosPriceInsightSectionTitle=e.GetString("autosPriceInsightSectionTitle",this.autosPriceInsightSectionTitle),this.autosOemPriceInsightSeeMoreButton=e.GetString("autosOemPriceInsightSeeMoreButton",this.autosOemPriceInsightSeeMoreButton),this.autosPriceInsightBelowAverage=e.GetString("autosPriceInsightBelowAverage",this.autosPriceInsightBelowAverage),this.autosPriceInsightAboveAverage=e.GetString("autosPriceInsightAboveAverage",this.autosPriceInsightAboveAverage),this.autosPriceInsightPriceRangeText=e.GetString("autosPriceInsightPriceRangeText",this.autosPriceInsightPriceRangeText),this.zipPayPayment=e.GetString("zipPayment",this.zipPayPayment),this.zipPayVirtualCardHeaderTitle=e.GetString("zipVirtualCardHeaderTitle",this.zipPayVirtualCardHeaderTitle),this.zipPayVirtualCardHeaderDescription=e.GetString("zipVirtualCardHeaderDescription",this.zipPayVirtualCardHeaderDescription),this.zipPayVirtualCardHeaderAutofillFailedDescription=e.GetString("zipVirtualCardHeaderAutofillFailedDescription",this.zipPayVirtualCardHeaderAutofillFailedDescription),this.zipPayVisualizedCardDetails=e.GetString("zipVisualizedCardDetails",this.zipPayVisualizedCardDetails),this.affirmVirtualCardHeaderTitle=e.GetString("affirmVirtualCardHeaderTitle",this.affirmVirtualCardHeaderTitle),this.affirmVirtualCardHeaderDescription=e.GetString("affirmVirtualCardHeaderDescription",this.affirmVirtualCardHeaderDescription),this.affirmVirtualCardHeaderNoBillingInfoDescription=e.GetString("affirmVirtualCardHeaderNoBillingInfoDescription",this.affirmVirtualCardHeaderNoBillingInfoDescription),this.affirmVirtualCardHeaderAutofillFailedDescription=e.GetString("affirmVirtualCardHeaderAutofillFailedDescription",this.affirmVirtualCardHeaderAutofillFailedDescription),this.affirmPayment=e.GetString("affirmPayment",this.affirmPayment),this.affirmVisualizedCardDetails=e.GetString("affirmVisualizedCardDetails",this.affirmVisualizedCardDetails),this.affirmDisclaimerText=e.GetString("affirmDisclaimerText",this.affirmDisclaimerText),this.affirmDisclaimerLinkText=e.GetString("affirmDisclaimerLinkText",this.affirmDisclaimerLinkText),this.klarnaVirtualCardHeaderTitle=e.GetString("klarnaVirtualCardHeaderTitle",this.klarnaVirtualCardHeaderTitle),this.klarnaVirtualCardHeaderDescription=e.GetString("klarnaVirtualCardHeaderDescription",this.klarnaVirtualCardHeaderDescription),this.klarnaVirtualCardHeaderNoBillingInfoDescription=e.GetString("klarnaVirtualCardHeaderNoBillingInfoDescription",this.klarnaVirtualCardHeaderNoBillingInfoDescription),this.klarnaVirtualCardHeaderAutofillFailedDescription=e.GetString("klarnaVirtualCardHeaderAutofillFailedDescription",this.klarnaVirtualCardHeaderAutofillFailedDescription),this.klarnaPayment=e.GetString("klarnaPayment",this.klarnaPayment),this.klarnaVisualizedCardDetails=e.GetString("klarnaVisualizedCardDetails",this.klarnaVisualizedCardDetails),this.klarnaDisclaimerText=e.GetString("klarnaDisclaimerText",this.klarnaDisclaimerText),this.klarnaCustomerServiceNumber=e.GetString("klarnaCustomerServiceNumber",this.klarnaCustomerServiceNumber),this.trendingOffersPersonalizedTitle=e.GetString("trendingOffersPersonalizedTitle",this.trendingOffersPersonalizedTitle),this.trendingOffersTitle=e.GetString("trendingOffersTitle",this.trendingOffersTitle),this.dailyDealsPersonalizedTitle=e.GetString("dailyDealsPersonalizedTitle",this.dailyDealsPersonalizedTitle),this.dailyDealsTitle=e.GetString("dailyDeailsTitle",this.dailyDealsTitle),this.percentageOff=e.GetString("percentageOff",this.percentageOff),this.shopRunnerFeatureName=e.GetString("shopRunnerFeatureName",this.shopRunnerFeatureName),this.shopRunnerFlyoutTitle=e.GetString("shopRunnerFlyoutTitle",this.shopRunnerFlyoutTitle),this.shopRunnerFlyoutHeading=e.GetString("shopRunnerFlyoutHeading",this.shopRunnerFlyoutHeading),this.shopRunnerFlyoutSubHeading1=e.GetString("shopRunnerFlyoutSubHeading1",this.shopRunnerFlyoutSubHeading1),this.shopRunnerFlyoutSubHeading2=e.GetString("shopRunnerFlyoutSubHeading2",this.shopRunnerFlyoutSubHeading2),this.shopRunnerIconDescription1=e.GetString("shopRunnerIconDescription1",this.shopRunnerIconDescription1),this.shopRunnerIconDescription2=e.GetString("shopRunnerIconDescription2",this.shopRunnerIconDescription2),this.shopRunnerSignUpButtonText=e.GetString("shopRunnerSignUpButtonText",this.shopRunnerSignUpButtonText),this.shopRunnerPrivacyMsg=e.GetString("shopRunnerPrivacyMsg",this.shopRunnerPrivacyMsg),this.shopRunnerNotificationHeading=e.GetString("shopRunnerNotificationHeading",this.shopRunnerNotificationHeading)}}]),t}(),xu=function(){function t(e,n){s(this,t),f(this,"dataLoader",void 0),f(this,"common",new Zt),f(this,"strings",void 0),f(this,"dataStoreModule",new yu),f(this,"experimentData",new bu),this.dataLoader=n,this.strings=new Su(n),this.strings.Create(e);var i=n.GetLoadTimeDataValue(vt.EnabledFeatures,void 0);this.experimentData.Create(i),this.common.Create(e,n)}var n;return r(t,[{key:"initializeModuleData",value:(n=e(o().mark((function t(e,n,i){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new vu(e,n).InitializeData(i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t,e,i){return n.apply(this,arguments)})}]),t}(),Eu=xu;function Au(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Tu=function(t){u(n,t);var e=Au(n);function n(){var t;return s(this,n),(t=e.call(this)).IsV2Data=!1,t}return r(n,[{key:"GetLoadTimeDataValue",value:function(t,e){try{return loadTimeData.valueExists(t)?loadTimeData.getValue(t):e}catch(t){}return e}},{key:"GetString",value:function(t,e){try{return loadTimeData.valueExists(t)?loadTimeData.getValue(t)!==e&&this.isEnglish()?e:loadTimeData.getValue(t):e}catch(t){}return e}},{key:"SetLoadTimeDataValue",value:function(t,e){}},{key:"isEnglish",value:function(){var t="EmptyCouponSubTitle";return!(!loadTimeData.valueExists(t)||"We couldn't find any coupons at this time."!==loadTimeData.getValue(t))}}]),n}(function(){function t(){s(this,t),f(this,"IsV2Data",void 0)}return r(t,[{key:"IsServerData",value:function(){return this.IsV2Data}}]),t}());const Du=new Map;"metadata"in Reflect||(Reflect.metadata=function(t,e){return function(n){Reflect.defineMetadata(t,e,n)}},Reflect.defineMetadata=function(t,e,n){let i=Du.get(n);void 0===i&&Du.set(n,i=new Map),i.set(t,e)},Reflect.getOwnMetadata=function(t,e){const n=Du.get(e);if(void 0!==n)return n.get(t)});class ku{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Qu(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new Vu(i,t,e))}}function Iu(t){const e=t.slice(),n=Object.keys(t),i=n.length;let o;for(let a=0;a<i;++a)o=n[a],sd(o)||(e[o]=t[o]);return e}const wu=Object.freeze({none(t){throw Error(`${t.toString()} not registered, did you forget to add @singleton()?`)},singleton:t=>new Vu(t,1,t),transient:t=>new Vu(t,2,t)}),Pu=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:wu.singleton})}),Ou=new Map;function Ru(t){return e=>Reflect.getOwnMetadata(t,e)}let Mu=null;const Nu=Object.freeze({createContainer:t=>new Xu(null,Object.assign({},Pu.default,t)),findResponsibleContainer(t){const e=t.$$container$$;return e&&e.responsibleForOwnerRequests?e:Nu.findParentContainer(t)},findParentContainer(t){const e=new CustomEvent(qu,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return t.dispatchEvent(e),e.detail.container||Nu.getOrCreateDOMContainer()},getOrCreateDOMContainer:(t,e)=>t?t.$$container$$||new Xu(t,Object.assign({},Pu.default,e,{parentLocator:Nu.findParentContainer})):Mu||(Mu=new Xu(null,Object.assign({},Pu.default,e,{parentLocator:()=>null}))),getDesignParamtypes:Ru("design:paramtypes"),getAnnotationParamtypes:Ru("di:paramtypes"),getOrCreateAnnotationParamTypes(t){let e=this.getAnnotationParamtypes(t);return void 0===e&&Reflect.defineMetadata("di:paramtypes",e=[],t),e},getDependencies(t){let e=Ou.get(t);if(void 0===e){const n=t.inject;if(void 0===n){const n=Nu.getDesignParamtypes(t),i=Nu.getAnnotationParamtypes(t);if(void 0===n)if(void 0===i){const n=Object.getPrototypeOf(t);e="function"==typeof n&&n!==Function.prototype?Iu(Nu.getDependencies(n)):[]}else e=Iu(i);else if(void 0===i)e=Iu(n);else{e=Iu(n);let t,o=i.length;for(let n=0;n<o;++n)t=i[n],void 0!==t&&(e[n]=t);const a=Object.keys(i);let r;o=a.length;for(let t=0;t<o;++t)r=a[t],sd(r)||(e[r]=i[r])}}else e=Iu(n);Ou.set(t,e)}return e},defineProperty(t,e,n,i=!1){const o=`$di_${e}`;Reflect.defineProperty(t,e,{get:function(){let t=this[o];if(void 0===t){const a=this instanceof HTMLElement?Nu.findResponsibleContainer(this):Nu.getOrCreateDOMContainer();if(t=a.get(n),this[o]=t,i&&this instanceof Yn){const i=this.$fastController,a=()=>{Nu.findResponsibleContainer(this).get(n)!==this[o]&&(this[o]=t,i.notify(e))};i.subscribe({handleChange:a},"isConnected")}}return t}})},createInterface(t,e){const n="function"==typeof t?t:e,i="string"==typeof t?t:t&&"friendlyName"in t&&t.friendlyName||id,o="string"!=typeof t&&(t&&"respectConnection"in t&&t.respectConnection||!1),a=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`No registration for interface: '${a.friendlyName}'`);if(e)Nu.defineProperty(t,e,a,o);else{Nu.getOrCreateAnnotationParamTypes(t)[n]=a}};return a.$isInterface=!0,a.friendlyName=null==i?"(anonymous)":i,null!=n&&(a.register=function(t,e){return n(new ku(t,null!=e?e:a))}),a.toString=function(){return`InterfaceSymbol<${a.friendlyName}>`},a},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=Nu.getOrCreateAnnotationParamTypes(e),o=t[0];void 0!==o&&(n[i]=o)}else if(n)Nu.defineProperty(e,n,t[0]);else{const n=i?Nu.getOrCreateAnnotationParamTypes(i.value):Nu.getOrCreateAnnotationParamTypes(e);let o;for(let e=0;e<t.length;++e)o=t[e],void 0!==o&&(n[e]=o)}},transient:t=>(t.register=function(e){return td.transient(t,t).register(e)},t.registerInRequestor=!1,t),singleton:(t,e=Fu)=>(t.register=function(e){return td.singleton(t,t).register(e)},t.registerInRequestor=e.scoped,t)}),Lu=Nu.createInterface("Container");function _u(t){return function(e){const n=function(t,e,i){Nu.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}Nu.inject;const Fu={scoped:!1};Hu=(t,e,n,i)=>n.getAll(t,i);var Hu;_u(((t,e,n)=>()=>n.get(t))),_u(((t,e,n)=>n.has(t,!0)?n.get(t):void 0));function Bu(t,e,n){Nu.inject(Bu)(t,e,n)}Bu.$isResolver=!0,Bu.resolve=()=>{};_u(((t,e,n)=>{const i=Uu(t,e),o=new Vu(t,0,i);return n.registerResolver(t,o),i})),_u(((t,e,n)=>Uu(t,e)));function Uu(t,e){return e.getFactory(t).construct(e)}class Vu{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t){return t.registerResolver(this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function Gu(t){return this.get(t)}function Wu(t,e){return e(t)}class $u{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(Gu,t)):new this.Type(...this.dependencies.map(Gu,t),...e),null==this.transformers?n:this.transformers.reduce(Wu,n)}registerTransformer(t){(this.transformers||(this.transformers=[])).push(t)}}const zu={$isResolver:!0,resolve:(t,e)=>e};function Ku(t){return"function"==typeof t.register}function Yu(t){return function(t){return Ku(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}const ju=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),qu="__DI_LOCATE_PARENT__",Zu=new Map;class Xu{constructor(t,e){this.owner=t,this.config=e,this._parent=void 0,this.registerDepth=0,this.context=null,null!==t&&(t.$$container$$=this),this.resolvers=new Map,this.resolvers.set(Lu,zu),t instanceof Node&&t.addEventListener(qu,(t=>{t.composedPath()[0]!==this.owner&&(t.detail.container=this,t.stopImmediatePropagation())}))}get parent(){return void 0===this._parent&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return null===this.parent?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(t,...e){return this.context=t,this.register(...e),this.context=null,this}register(...t){if(100==++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,n,i,o,a;const r=this.context;for(let s=0,l=t.length;s<l;++s)if(e=t[s],od(e))if(Ku(e))e.register(this,r);else if(void 0!==e.prototype)td.singleton(e,e).register(this);else for(n=Object.keys(e),o=0,a=n.length;o<a;++o)i=e[n[o]],od(i)&&(Ku(i)?i.register(this,r):this.register(i));return--this.registerDepth,this}registerResolver(t,e){ed(t);const n=this.resolvers,i=n.get(t);return null==i?n.set(t,e):i instanceof Vu&&4===i.strategy?i.state.push(e):n.set(t,new Vu(t,4,[i,e])),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(ed(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.resolvers.get(t),null!=n)return n;if(null==i.parent){const n=Yu(t)?this:i;return e?this.jitRegister(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(ed(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.resolvers.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=Yu(t)?this:n;return e=this.jitRegister(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`Unable to resolve key: ${t}`)}getAll(t,e=!1){ed(t);const n=this;let i,o=n;if(e){let e=nn;for(;null!=o;)i=o.resolvers.get(t),null!=i&&(e=e.concat(nd(i,o,n))),o=o.parent;return e}for(;null!=o;){if(i=o.resolvers.get(t),null!=i)return nd(i,o,n);if(o=o.parent,null==o)return nn}return nn}getFactory(t){let e=Zu.get(t);if(void 0===e){if(ad(t))throw new Error(`${t.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);Zu.set(t,e=new $u(t,Nu.getDependencies(t)))}return e}registerFactory(t,e){Zu.set(t,e)}createChild(t){return new Xu(null,Object.assign({},this.config,t,{parentLocator:()=>this}))}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this dependency?`);if(ju.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(Ku(t)){const n=t.register(e);if(!(n instanceof Object)||null==n.resolve){const n=e.resolvers.get(t);if(null!=n)return n;throw new Error("A valid resolver was not returned from the static register method")}return n}if(t.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.resolvers.set(t,n),n}}}const Ju=new WeakMap;function Qu(t){return function(e,n,i){if(Ju.has(i))return Ju.get(i);const o=t(e,n,i);return Ju.set(i,o),o}}const td=Object.freeze({instance:(t,e)=>new Vu(t,0,e),singleton:(t,e)=>new Vu(t,1,e),transient:(t,e)=>new Vu(t,2,e),callback:(t,e)=>new Vu(t,3,e),cachedCallback:(t,e)=>new Vu(t,3,Qu(e)),aliasTo:(t,e)=>new Vu(e,5,t)});function ed(t){if(null==t)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function nd(t,e,n){if(t instanceof Vu&&4===t.strategy){const i=t.state;let o=i.length;const a=new Array(o);for(;o--;)a[o]=i[o].resolve(e,n);return a}return[t.resolve(e,n)]}const id="(anonymous)";function od(t){return"object"==typeof t&&null!==t||"function"==typeof t}const ad=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(o){return e=t.get(o),void 0===e&&(n=o.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(o,e)),e}}(),rd={};function sd(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=rd[t];if(void 0!==e)return e;const n=t.length;if(0===n)return rd[t]=!1;let i=0;for(let e=0;e<n;++e)if(i=t.charCodeAt(e),0===e&&48===i&&n>1||i<48||i>57)return rd[t]=!1;return rd[t]=!0}default:return!1}}function ld(t){return`${t.toLowerCase()}:presentation`}const cd=new Map,ud=Object.freeze({define(t,e,n){const i=ld(t);void 0===cd.get(i)?cd.set(i,e):cd.set(i,!1),n.register(td.instance(i,e))},forTag(t,e){const n=ld(t),i=cd.get(n);if(!1===i){return Nu.findResponsibleContainer(e).get(n)}return i||null}});class dd{constructor(t,e){this.template=t||null,this.styles=void 0===e?null:Array.isArray(e)?In.create(e):e instanceof In?e:In.create([e])}applyTo(t){const e=t.$fastController;null===e.template&&(e.template=this.template),null===e.styles&&(e.styles=this.styles)}}class hd extends Yn{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return void 0===this._presentation&&(this._presentation=ud.forTag(this.tagName,this)),this._presentation}templateChanged(){void 0!==this.template&&(this.$fastController.template=this.template)}stylesChanged(){void 0!==this.styles&&(this.$fastController.styles=this.styles)}connectedCallback(){null!==this.$presentation&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(t){return(e={})=>new fd(this===hd?class extends hd{}:this,t,e)}}function pd(t,e,n){return"function"==typeof t?t(e,n):t}Cn([An],hd.prototype,"template",void 0),Cn([An],hd.prototype,"styles",void 0);class fd{constructor(t,e,n){this.type=t,this.elementDefinition=e,this.overrideDefinition=n,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(t,e){const n=this.definition,i=this.overrideDefinition,o=`${n.prefix||e.elementPrefix}-${n.baseName}`;e.tryDefineElement({name:o,type:this.type,baseClass:this.elementDefinition.baseClass,callback:t=>{const e=new dd(pd(n.template,t,n),pd(n.styles,t,n));t.definePresentation(e);let o=pd(n.shadowOptions,t,n);t.shadowRootMode&&(o?i.shadowOptions||(o.mode=t.shadowRootMode):null!==o&&(o={mode:t.shadowRootMode})),t.defineElement({elementOptions:pd(n.elementOptions,t,n),shadowOptions:o,attributes:pd(n.attributes,t,n)})}})}}const gd=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),md=new Map,vd=new Map;let yd=null;const Cd=Nu.createInterface((t=>t.cachedCallback((t=>(null===yd&&(yd=new Sd(null,t)),yd))))),bd=Object.freeze({tagFor:t=>vd.get(t),responsibleFor(t){const e=t.$$designSystem$$;if(e)return e;return Nu.findResponsibleContainer(t).get(Cd)},getOrCreate(t){if(!t)return null===yd&&(yd=Nu.getOrCreateDOMContainer().get(Cd)),yd;const e=t.$$designSystem$$;if(e)return e;const n=Nu.getOrCreateDOMContainer(t);if(n.has(Cd,!1))return n.get(Cd);{const e=new Sd(t,n);return n.register(td.instance(Cd,e)),e}}});class Sd{constructor(t,e){this.owner=t,this.container=e,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>gd.definitionCallbackOnly,null!==t&&(t.$$designSystem$$=this)}withPrefix(t){return this.prefix=t,this}withShadowRootMode(t){return this.shadowRootMode=t,this}withElementDisambiguation(t){return this.disambiguate=t,this}withDesignTokenRoot(t){return this.designTokenRoot=t,this}register(...t){const e=this.container,n=[],i=this.disambiguate,o=this.shadowRootMode,a={elementPrefix:this.prefix,tryDefineElement(t,a,r){const s=function(t,e,n){return"string"==typeof t?{name:t,type:e,callback:n}:t}(t,a,r),{name:l,callback:c,baseClass:u}=s;let{type:d}=s,h=l,p=md.get(h),f=!0;for(;p;){const t=i(h,d,p);switch(t){case gd.ignoreDuplicate:return;case gd.definitionCallbackOnly:f=!1,p=void 0;break;default:h=t,p=md.get(h)}}f&&((vd.has(d)||d===hd)&&(d=class extends d{}),md.set(h,d),vd.set(d,h),u&&vd.set(u,h)),n.push(new xd(e,h,d,o,c,f))}};this.designTokensInitialized||(this.designTokensInitialized=!0,null!==this.designTokenRoot&&di.registerRoot(this.designTokenRoot)),e.registerWithContext(a,...t);for(const t of n)t.callback(t),t.willDefine&&null!==t.definition&&t.definition.define();return this}}class xd{constructor(t,e,n,i,o,a){this.container=t,this.name=e,this.type=n,this.shadowRootMode=i,this.callback=o,this.willDefine=a,this.definition=null}definePresentation(t){ud.define(this.name,t,this.container)}defineElement(t){this.definition=new Vn(this.type,Object.assign(Object.assign({},t),{name:this.name}))}tagFor(t){return bd.tagFor(t)}}function Ed(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r}function Ad(t,e){const n=[];let i="";const o=[];for(let a=0,r=t.length-1;a<r;++a){i+=t[a];let r=e[a];if(r instanceof bn){const t=r.createBehavior();r=r.createCSS(),t&&o.push(t)}r instanceof In||r instanceof CSSStyleSheet?(""!==i.trim()&&(n.push(i),i=""),n.push(r)):i+=r}return i+=t[t.length-1],""!==i.trim()&&n.push(i),{styles:n,behaviors:o}}function Td(t,...e){const{styles:n,behaviors:i}=Ad(t,e),o=In.create(n);return i.length&&o.withBehaviors(...i),o}class Dd extends bn{constructor(t,e){super(),this.behaviors=e,this.css="";const n=t.reduce(((t,e)=>("string"==typeof e?this.css+=e:t.push(e),t)),[]);n.length&&(this.styles=In.create(n))}createBehavior(){return this}createCSS(){return this.css}bind(t){this.styles&&t.$fastController.addStyles(this.styles),this.behaviors.length&&t.$fastController.addBehaviors(this.behaviors)}unbind(t){this.styles&&t.$fastController.removeStyles(this.styles),this.behaviors.length&&t.$fastController.removeBehaviors(this.behaviors)}}class kd{constructor(){this.targetIndex=0}}class Id extends kd{constructor(){super(...arguments),this.createPlaceholder=un.createInterpolationPlaceholder}}class wd extends kd{constructor(t,e,n){super(),this.name=t,this.behavior=e,this.options=n}createPlaceholder(t){return un.createCustomAttributePlaceholder(this.name,t)}createBehavior(t){return new this.behavior(t,this.options)}}function Pd(t,e){this.source=t,this.context=e,null===this.bindingObserver&&(this.bindingObserver=En.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,e))}function Od(t,e){this.source=t,this.context=e,this.target.addEventListener(this.targetName,this)}function Rd(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function Md(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function Nd(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function Ld(t){un.setAttribute(this.target,this.targetName,t)}function _d(t){un.setBooleanAttribute(this.target,this.targetName,t)}function Fd(t){if(null==t&&(t=""),t.create){this.target.textContent="";let e=this.target.$fastView;void 0===e?e=t.create():this.target.$fastTemplate!==t&&(e.isComposed&&(e.remove(),e.unbind()),e=t.create()),e.isComposed?e.needsBindOnly&&(e.needsBindOnly=!1,e.bind(this.source,this.context)):(e.isComposed=!0,e.bind(this.source,this.context),e.insertBefore(this.target),this.target.$fastView=e,this.target.$fastTemplate=t)}else{const e=this.target.$fastView;void 0!==e&&e.isComposed&&(e.isComposed=!1,e.remove(),e.needsBindOnly?e.needsBindOnly=!1:e.unbind()),this.target.textContent=t}}function Hd(t){this.target[this.targetName]=t}function Bd(t){const e=this.classVersions||Object.create(null),n=this.target;let i=this.version||0;if(null!=t&&t.length){const o=t.split(/\s+/);for(let t=0,a=o.length;t<a;++t){const a=o[t];""!==a&&(e[a]=i,n.classList.add(a))}}if(this.classVersions=e,this.version=i+1,0!==i){i-=1;for(const t in e)e[t]===i&&n.classList.remove(t)}}class Ud extends Id{constructor(t){super(),this.binding=t,this.bind=Pd,this.unbind=Rd,this.updateTarget=Ld,this.isBindingVolatile=En.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,void 0!==t)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=Hd,"innerHTML"===this.cleanedTargetName){const t=this.binding;this.binding=(e,n)=>un.createHTML(t(e,n))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=_d;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=Od,this.unbind=Nd;break;default:this.cleanedTargetName=t,"class"===t&&(this.updateTarget=Bd)}}targetAtContent(){this.updateTarget=Fd,this.unbind=Md}createBehavior(t){return new Vd(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class Vd{constructor(t,e,n,i,o,a,r){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=e,this.isBindingVolatile=n,this.bind=i,this.unbind=o,this.updateTarget=a,this.targetName=r}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){Dn.setEvent(t);const e=this.binding(this.source,this.context);Dn.setEvent(null),!0!==e&&t.preventDefault()}}let Gd=null;class Wd{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){Gd=this}static borrow(t){const e=Gd||new Wd;return e.directives=t,e.reset(),Gd=null,e}}function $d(t){if(1===t.length)return t[0];let e;const n=t.length,i=t.map((t=>"string"==typeof t?()=>t:(e=t.targetName||e,t.binding))),o=new Ud(((t,e)=>{let o="";for(let a=0;a<n;++a)o+=i[a](t,e);return o}));return o.targetName=e,o}const zd=cn.length;function Kd(t,e){const n=e.split(ln);if(1===n.length)return null;const i=[];for(let e=0,o=n.length;e<o;++e){const o=n[e],a=o.indexOf(cn);let r;if(-1===a)r=o;else{const e=parseInt(o.substring(0,a));i.push(t.directives[e]),r=o.substring(a+zd)}""!==r&&i.push(r)}return i}function Yd(t,e,n=!1){const i=e.attributes;for(let o=0,a=i.length;o<a;++o){const r=i[o],s=r.value,l=Kd(t,s);let c=null;null===l?n&&(c=new Ud((()=>s)),c.targetName=r.name):c=$d(l),null!==c&&(e.removeAttributeNode(r),o--,a--,t.addFactory(c))}}function jd(t,e,n){const i=Kd(t,e.textContent);if(null!==i){let o=e;for(let a=0,r=i.length;a<r;++a){const r=i[a],s=0===a?e:o.parentNode.insertBefore(document.createTextNode(""),o.nextSibling);"string"==typeof r?s.textContent=r:(s.textContent=" ",t.captureContentBinding(r)),o=s,t.targetIndex++,s!==e&&n.nextNode()}t.targetIndex--}}const qd=document.createRange();class Zd{constructor(t,e){this.fragment=t,this.behaviors=e,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const e=t.parentNode,n=this.lastChild;let i,o=this.firstChild;for(;o!==n;)i=o.nextSibling,e.insertBefore(o,t),o=i;e.insertBefore(n,t)}}remove(){const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;i!==e;)n=i.nextSibling,t.appendChild(i),i=n;t.appendChild(e)}dispose(){const t=this.firstChild.parentNode,e=this.lastChild;let n,i=this.firstChild;for(;i!==e;)n=i.nextSibling,t.removeChild(i),i=n;t.removeChild(e);const o=this.behaviors,a=this.source;for(let t=0,e=o.length;t<e;++t)o[t].unbind(a)}bind(t,e){const n=this.behaviors;if(this.source!==t)if(null!==this.source){const i=this.source;this.source=t,this.context=e;for(let o=0,a=n.length;o<a;++o){const a=n[o];a.unbind(i),a.bind(t,e)}}else{this.source=t,this.context=e;for(let i=0,o=n.length;i<o;++i)n[i].bind(t,e)}}unbind(){if(null===this.source)return;const t=this.behaviors,e=this.source;for(let n=0,i=t.length;n<i;++n)t[n].unbind(e);this.source=null}static disposeContiguousBatch(t){if(0!==t.length){qd.setStartBefore(t[0].firstChild),qd.setEndAfter(t[t.length-1].lastChild),qd.deleteContents();for(let e=0,n=t.length;e<n;++e){const n=t[e],i=n.behaviors,o=n.source;for(let t=0,e=i.length;t<e;++t)i[t].unbind(o)}}}}class Xd{constructor(t,e){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=e}create(t){if(null===this.fragment){let t;const e=this.html;if("string"==typeof e){t=document.createElement("template"),t.innerHTML=un.createHTML(e);const n=t.content.firstElementChild;null!==n&&"TEMPLATE"===n.tagName&&(t=n)}else t=e;const n=function(t,e){const n=t.content;document.adoptNode(n);const i=Wd.borrow(e);Yd(i,t,!0);const o=i.behaviorFactories;i.reset();const a=un.createTemplateWalker(n);let r;for(;r=a.nextNode();)switch(i.targetIndex++,r.nodeType){case 1:Yd(i,r);break;case 3:jd(i,r,a);break;case 8:un.isMarker(r)&&i.addFactory(e[un.extractDirectiveIndexFromMarker(r)])}let s=0;(un.isMarker(n.firstChild)||1===n.childNodes.length&&e.length)&&(n.insertBefore(document.createComment(""),n.firstChild),s=-1);const l=i.behaviorFactories;return i.release(),{fragment:n,viewBehaviorFactories:l,hostBehaviorFactories:o,targetOffset:s}}(t,this.directives);this.fragment=n.fragment,this.viewBehaviorFactories=n.viewBehaviorFactories,this.hostBehaviorFactories=n.hostBehaviorFactories,this.targetOffset=n.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const e=this.fragment.cloneNode(!0),n=this.viewBehaviorFactories,i=new Array(this.behaviorCount),o=un.createTemplateWalker(e);let a=0,r=this.targetOffset,s=o.nextNode();for(let t=n.length;a<t;++a){const t=n[a],e=t.targetIndex;for(;null!==s;){if(r===e){i[a]=t.createBehavior(s);break}s=o.nextNode(),r++}}if(this.hasHostBehaviors){const e=this.hostBehaviorFactories;for(let n=0,o=e.length;n<o;++n,++a)i[a]=e[n].createBehavior(t)}return new Zd(e,i)}render(t,e,n){"string"==typeof e&&(e=document.getElementById(e)),void 0===n&&(n=e);const i=this.create(n);return i.bind(t,kn),i.appendTo(e),i}}const Jd=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Qd(t,...e){const n=[];let i="";for(let o=0,a=t.length-1;o<a;++o){const a=t[o];let r=e[o];if(i+=a,r instanceof Xd){const t=r;r=()=>t}if("function"==typeof r&&(r=new Ud(r)),r instanceof Id){const t=Jd.exec(a);null!==t&&(r.targetName=t[2])}r instanceof kd?(i+=r.createPlaceholder(n.length),n.push(r)):i+=r}return i+=t[t.length-1],new Xd(i,n)}class th extends class{constructor(t){this.listenerCache=new WeakMap,this.query=t}bind(t){const{query:e}=this,n=this.constructListener(t);n.bind(e)(),e.addListener(n),this.listenerCache.set(t,n)}unbind(t){const e=this.listenerCache.get(t);e&&(this.query.removeListener(e),this.listenerCache.delete(t))}}{constructor(t,e){super(t),this.styles=e}static with(t){return e=>new th(t,e)}constructListener(t){let e=!1;const n=this.styles;return function(){const{matches:i}=this;i&&!e?(t.$fastController.addStyles(n),e=i):!i&&e&&(t.$fastController.removeStyles(n),e=i)}}unbind(t){super.unbind(t),t.$fastController.removeStyles(this.styles)}}const eh=th.with(window.matchMedia("(forced-colors)")),nh=th.with(window.matchMedia("(prefers-color-scheme: dark)"));th.with(window.matchMedia("(prefers-color-scheme: light)"));function ih(t){return`:host([hidden]){display:none}:host{display:${t}}`}var oh;!function(t){t.Canvas="Canvas",t.CanvasText="CanvasText",t.LinkText="LinkText",t.VisitedText="VisitedText",t.ActiveText="ActiveText",t.ButtonFace="ButtonFace",t.ButtonText="ButtonText",t.Field="Field",t.FieldText="FieldText",t.Highlight="Highlight",t.HighlightText="HighlightText",t.GrayText="GrayText"}(oh||(oh={}));const ah={toView(t){var e;return null==t?null:null===(e=t)||void 0===e?void 0:e.toColorString()},fromView(t){if(null==t)return null;const e=eo(t);return e?so.create(e.r,e.g,e.b):null}},rh=Td`
  :host {
    background-color: ${Ya};
    color: ${Wr};
  }
`.withBehaviors(eh(Td`
      :host {
        background-color: ${oh.Canvas};
        box-shadow: 0 0 0 1px ${oh.CanvasText};
        color: ${oh.CanvasText};
      }
    `));function sh(t){return(e,n)=>{e[n+"Changed"]=function(e,n){null!=n?t.setValueFor(this,n):t.deleteValueFor(this)}}}class lh extends hd{constructor(){super(),this.noPaint=!1,En.getNotifier(this).subscribe({handleChange:this.noPaintChanged.bind(this)},"fillColor")}noPaintChanged(){this.noPaint||void 0===this.fillColor?this.$fastController.removeStyles(rh):this.$fastController.addStyles(rh)}accentBaseColorChanged(t,e){null!=e?Ha.setValueFor(this,po.create(e)):Ha.deleteValueFor(this)}neutralBaseColorChanged(t,e){null!=e?Fa.setValueFor(this,po.create(e)):Fa.deleteValueFor(this)}}Ed([Fn({attribute:"no-paint",mode:"boolean"})],lh.prototype,"noPaint",void 0),Ed([Fn({attribute:"fill-color",converter:ah}),sh(Ya)],lh.prototype,"fillColor",void 0),Ed([Fn({attribute:"accent-base-color",converter:ah,mode:"fromView"})],lh.prototype,"accentBaseColor",void 0),Ed([Fn({attribute:"neutral-base-color",converter:ah,mode:"fromView"})],lh.prototype,"neutralBaseColor",void 0),Ed([An,sh(Fa)],lh.prototype,"neutralPalette",void 0),Ed([An,sh(Ha)],lh.prototype,"accentPalette",void 0),Ed([Fn({converter:Ln}),sh(Io)],lh.prototype,"density",void 0),Ed([Fn({attribute:"design-unit",converter:Ln}),sh(wo)],lh.prototype,"designUnit",void 0),Ed([Fn({attribute:"direction"}),sh(Ao)],lh.prototype,"direction",void 0),Ed([Fn({attribute:"base-height-multiplier",converter:Ln}),sh(Do)],lh.prototype,"baseHeightMultiplier",void 0),Ed([Fn({attribute:"base-horizontal-spacing-multiplier",converter:Ln}),sh(ko)],lh.prototype,"baseHorizontalSpacingMultiplier",void 0),Ed([Fn({attribute:"control-corner-radius",converter:Ln}),sh(Po)],lh.prototype,"controlCornerRadius",void 0),Ed([Fn({attribute:"stroke-width",converter:Ln}),sh(Ro)],lh.prototype,"strokeWidth",void 0),Ed([Fn({attribute:"focus-stroke-width",converter:Ln}),sh(Mo)],lh.prototype,"focusStrokeWidth",void 0),Ed([Fn({attribute:"disabled-opacity",converter:Ln}),sh(To)],lh.prototype,"disabledOpacity",void 0),Ed([Fn({attribute:"type-ramp-minus-2-font-size"}),sh(Bo)],lh.prototype,"typeRampMinus2FontSize",void 0),Ed([Fn({attribute:"type-ramp-minus-2-line-height"}),sh(Uo)],lh.prototype,"typeRampMinus2LineHeight",void 0),Ed([Fn({attribute:"type-ramp-minus-1-font-size"}),sh(Fo)],lh.prototype,"typeRampMinus1FontSize",void 0),Ed([Fn({attribute:"type-ramp-minus-1-line-height"}),sh(Ho)],lh.prototype,"typeRampMinus1LineHeight",void 0),Ed([Fn({attribute:"type-ramp-base-font-size"}),sh(Lo)],lh.prototype,"typeRampBaseFontSize",void 0),Ed([Fn({attribute:"type-ramp-base-line-height"}),sh(_o)],lh.prototype,"typeRampBaseLineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-1-font-size"}),sh(Vo)],lh.prototype,"typeRampPlus1FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-1-line-height"}),sh(Go)],lh.prototype,"typeRampPlus1LineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-2-font-size"}),sh(Wo)],lh.prototype,"typeRampPlus2FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-2-line-height"}),sh($o)],lh.prototype,"typeRampPlus2LineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-3-font-size"}),sh(zo)],lh.prototype,"typeRampPlus3FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-3-line-height"}),sh(Ko)],lh.prototype,"typeRampPlus3LineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-4-font-size"}),sh(Yo)],lh.prototype,"typeRampPlus4FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-4-line-height"}),sh(jo)],lh.prototype,"typeRampPlus4LineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-5-font-size"}),sh(qo)],lh.prototype,"typeRampPlus5FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-5-line-height"}),sh(Zo)],lh.prototype,"typeRampPlus5LineHeight",void 0),Ed([Fn({attribute:"type-ramp-plus-6-font-size"}),sh(Xo)],lh.prototype,"typeRampPlus6FontSize",void 0),Ed([Fn({attribute:"type-ramp-plus-6-line-height"}),sh(Jo)],lh.prototype,"typeRampPlus6LineHeight",void 0),Ed([Fn({attribute:"accent-fill-rest-delta",converter:Ln}),sh(ta)],lh.prototype,"accentFillRestDelta",void 0),Ed([Fn({attribute:"accent-fill-hover-delta",converter:Ln}),sh(ea)],lh.prototype,"accentFillHoverDelta",void 0),Ed([Fn({attribute:"accent-fill-active-delta",converter:Ln}),sh(na)],lh.prototype,"accentFillActiveDelta",void 0),Ed([Fn({attribute:"accent-fill-focus-delta",converter:Ln}),sh(ia)],lh.prototype,"accentFillFocusDelta",void 0),Ed([Fn({attribute:"accent-foreground-rest-delta",converter:Ln}),sh(oa)],lh.prototype,"accentForegroundRestDelta",void 0),Ed([Fn({attribute:"accent-foreground-hover-delta",converter:Ln}),sh(aa)],lh.prototype,"accentForegroundHoverDelta",void 0),Ed([Fn({attribute:"accent-foreground-active-delta",converter:Ln}),sh(ra)],lh.prototype,"accentForegroundActiveDelta",void 0),Ed([Fn({attribute:"accent-foreground-focus-delta",converter:Ln}),sh(sa)],lh.prototype,"accentForegroundFocusDelta",void 0),Ed([Fn({attribute:"neutral-fill-rest-delta",converter:Ln}),sh(la)],lh.prototype,"neutralFillRestDelta",void 0),Ed([Fn({attribute:"neutral-fill-hover-delta",converter:Ln}),sh(ca)],lh.prototype,"neutralFillHoverDelta",void 0),Ed([Fn({attribute:"neutral-fill-active-delta",converter:Ln}),sh(ua)],lh.prototype,"neutralFillActiveDelta",void 0),Ed([Fn({attribute:"neutral-fill-focus-delta",converter:Ln}),sh(da)],lh.prototype,"neutralFillFocusDelta",void 0),Ed([Fn({attribute:"neutral-fill-input-rest-delta",converter:Ln}),sh(ha)],lh.prototype,"neutralFillInputRestDelta",void 0),Ed([Fn({attribute:"neutral-fill-input-hover-delta",converter:Ln}),sh(pa)],lh.prototype,"neutralFillInputHoverDelta",void 0),Ed([Fn({attribute:"neutral-fill-input-active-delta",converter:Ln}),sh(fa)],lh.prototype,"neutralFillInputActiveDelta",void 0),Ed([Fn({attribute:"neutral-fill-input-focus-delta",converter:Ln}),sh(ga)],lh.prototype,"neutralFillInputFocusDelta",void 0),Ed([Fn({attribute:"neutral-fill-layer-rest-delta",converter:Ln}),sh(ba)],lh.prototype,"neutralFillLayerRestDelta",void 0),Ed([Fn({attribute:"neutral-fill-stealth-rest-delta",converter:Ln}),sh(Sa)],lh.prototype,"neutralFillStealthRestDelta",void 0),Ed([Fn({attribute:"neutral-fill-stealth-hover-delta",converter:Ln}),sh(xa)],lh.prototype,"neutralFillStealthHoverDelta",void 0),Ed([Fn({attribute:"neutral-fill-stealth-active-delta",converter:Ln}),sh(Ea)],lh.prototype,"neutralFillStealthActiveDelta",void 0),Ed([Fn({attribute:"neutral-fill-stealth-focus-delta",converter:Ln}),sh(Aa)],lh.prototype,"neutralFillStealthFocusDelta",void 0),Ed([Fn({attribute:"neutral-fill-strong-hover-delta",converter:Ln}),sh(Da)],lh.prototype,"neutralFillStrongHoverDelta",void 0),Ed([Fn({attribute:"neutral-fill-strong-active-delta",converter:Ln}),sh(ka)],lh.prototype,"neutralFillStrongActiveDelta",void 0),Ed([Fn({attribute:"neutral-fill-strong-focus-delta",converter:Ln}),sh(Ia)],lh.prototype,"neutralFillStrongFocusDelta",void 0),Ed([Fn({attribute:"base-layer-luminance",converter:Ln}),sh(Qo)],lh.prototype,"baseLayerLuminance",void 0),Ed([Fn({attribute:"neutral-stroke-divider-rest-delta",converter:Ln}),sh(Ma)],lh.prototype,"neutralStrokeDividerRestDelta",void 0),Ed([Fn({attribute:"neutral-stroke-rest-delta",converter:Ln}),sh(wa)],lh.prototype,"neutralStrokeRestDelta",void 0),Ed([Fn({attribute:"neutral-stroke-hover-delta",converter:Ln}),sh(Pa)],lh.prototype,"neutralStrokeHoverDelta",void 0),Ed([Fn({attribute:"neutral-stroke-active-delta",converter:Ln}),sh(Oa)],lh.prototype,"neutralStrokeActiveDelta",void 0),Ed([Fn({attribute:"neutral-stroke-focus-delta",converter:Ln}),sh(Ra)],lh.prototype,"neutralStrokeFocusDelta",void 0);const ch=lh.compose({baseName:"design-system-provider",template:Qd` <slot></slot> `,styles:Td`
    ${ih("block")}
  `});var uh;!function(t){t[t.alt=18]="alt",t[t.arrowDown=40]="arrowDown",t[t.arrowLeft=37]="arrowLeft",t[t.arrowRight=39]="arrowRight",t[t.arrowUp=38]="arrowUp",t[t.back=8]="back",t[t.backSlash=220]="backSlash",t[t.break=19]="break",t[t.capsLock=20]="capsLock",t[t.closeBracket=221]="closeBracket",t[t.colon=186]="colon",t[t.colon2=59]="colon2",t[t.comma=188]="comma",t[t.ctrl=17]="ctrl",t[t.delete=46]="delete",t[t.end=35]="end",t[t.enter=13]="enter",t[t.equals=187]="equals",t[t.equals2=61]="equals2",t[t.equals3=107]="equals3",t[t.escape=27]="escape",t[t.forwardSlash=191]="forwardSlash",t[t.function1=112]="function1",t[t.function10=121]="function10",t[t.function11=122]="function11",t[t.function12=123]="function12",t[t.function2=113]="function2",t[t.function3=114]="function3",t[t.function4=115]="function4",t[t.function5=116]="function5",t[t.function6=117]="function6",t[t.function7=118]="function7",t[t.function8=119]="function8",t[t.function9=120]="function9",t[t.home=36]="home",t[t.insert=45]="insert",t[t.menu=93]="menu",t[t.minus=189]="minus",t[t.minus2=109]="minus2",t[t.numLock=144]="numLock",t[t.numPad0=96]="numPad0",t[t.numPad1=97]="numPad1",t[t.numPad2=98]="numPad2",t[t.numPad3=99]="numPad3",t[t.numPad4=100]="numPad4",t[t.numPad5=101]="numPad5",t[t.numPad6=102]="numPad6",t[t.numPad7=103]="numPad7",t[t.numPad8=104]="numPad8",t[t.numPad9=105]="numPad9",t[t.numPadDivide=111]="numPadDivide",t[t.numPadDot=110]="numPadDot",t[t.numPadMinus=109]="numPadMinus",t[t.numPadMultiply=106]="numPadMultiply",t[t.numPadPlus=107]="numPadPlus",t[t.openBracket=219]="openBracket",t[t.pageDown=34]="pageDown",t[t.pageUp=33]="pageUp",t[t.period=190]="period",t[t.print=44]="print",t[t.quote=222]="quote",t[t.scrollLock=145]="scrollLock",t[t.shift=16]="shift",t[t.space=32]="space",t[t.tab=9]="tab",t[t.tilde=192]="tilde",t[t.windowsLeft=91]="windowsLeft",t[t.windowsOpera=219]="windowsOpera",t[t.windowsRight=92]="windowsRight"}(uh||(uh={}));const dh=32,hh="ArrowDown",ph="ArrowLeft",fh="ArrowRight",gh="ArrowUp",mh="Enter",vh="Escape",yh="Home",Ch="End",bh=" ",Sh={ArrowDown:hh,ArrowLeft:ph,ArrowRight:fh,ArrowUp:gh};function xh(t,e,n){return n<t?e:n>e?t:n}function Eh(t,e,n=0){return[e,n]=[e,n].sort(((t,e)=>t-e)),e<=t&&t<n}class Ah{constructor(t,e){this.target=t,this.propertyName=e}bind(t){t[this.propertyName]=this.target}unbind(){}}function Th(t){return new wd("fast-ref",Ah,t)}class Dh{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const kh=(t,e)=>Qd`
    <span
        part="end"
        ${Th("endContainer")}
        class=${t=>e.end?"end":void 0}
    >
        <slot name="end" ${Th("end")} @slotchange="${t=>t.handleEndContentChange()}">
            ${e.end||""}
        </slot>
    </span>
`,Ih=(t,e)=>Qd`
    <span
        part="start"
        ${Th("startContainer")}
        class="${t=>e.start?"start":void 0}"
    >
        <slot
            name="start"
            ${Th("start")}
            @slotchange="${t=>t.handleStartContentChange()}"
        >
            ${e.start||""}
        </slot>
    </span>
`;Qd`
    <span part="end" ${Th("endContainer")}>
        <slot
            name="end"
            ${Th("end")}
            @slotchange="${t=>t.handleEndContentChange()}"
        ></slot>
    </span>
`,Qd`
    <span part="start" ${Th("startContainer")}>
        <slot
            name="start"
            ${Th("start")}
            @slotchange="${t=>t.handleStartContentChange()}"
        ></slot>
    </span>
`;function wh(t,...e){e.forEach((e=>{if(Object.getOwnPropertyNames(e.prototype).forEach((n=>{"constructor"!==n&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))})),e.attributes){const n=t.attributes||[];t.attributes=n.concat(e.attributes)}}))}class Ph extends hd{constructor(){super(...arguments),this.headinglevel=2,this.expanded=!1,this.clickHandler=t=>{this.expanded=!this.expanded,this.change()},this.change=()=>{this.$emit("change")}}}Cn([Fn({attribute:"heading-level",mode:"fromView",converter:Ln})],Ph.prototype,"headinglevel",void 0),Cn([Fn({mode:"boolean"})],Ph.prototype,"expanded",void 0),Cn([Fn],Ph.prototype,"id",void 0),wh(Ph,Dh);const Oh="single",Rh="multi";class Mh extends hd{constructor(){super(...arguments),this.expandmode=Rh,this.activeItemIndex=0,this.change=()=>{this.$emit("change")},this.setItems=()=>{var t;if(0!==this.accordionItems.length&&(this.accordionIds=this.getItemIds(),this.accordionItems.forEach(((t,e)=>{t instanceof Ph&&(t.addEventListener("change",this.activeItemChange),this.isSingleExpandMode()&&(this.activeItemIndex!==e?t.expanded=!1:t.expanded=!0));const n=this.accordionIds[e];t.setAttribute("id","string"!=typeof n?`accordion-${e+1}`:n),this.activeid=this.accordionIds[this.activeItemIndex],t.addEventListener("keydown",this.handleItemKeyDown),t.addEventListener("focus",this.handleItemFocus)})),this.isSingleExpandMode())){(null!==(t=this.findExpandedItem())&&void 0!==t?t:this.accordionItems[0]).setAttribute("aria-disabled","true")}},this.removeItemListeners=t=>{t.forEach(((t,e)=>{t.removeEventListener("change",this.activeItemChange),t.removeEventListener("keydown",this.handleItemKeyDown),t.removeEventListener("focus",this.handleItemFocus)}))},this.activeItemChange=t=>{const e=t.target;this.activeid=e.getAttribute("id"),this.isSingleExpandMode()&&(this.resetItems(),e.expanded=!0,e.setAttribute("aria-disabled","true"),this.accordionItems.forEach((t=>{t.hasAttribute("disabled")||t.id===this.activeid||t.removeAttribute("aria-disabled")}))),this.activeItemIndex=Array.from(this.accordionItems).indexOf(e),this.change()},this.handleItemKeyDown=t=>{if(t.target===t.currentTarget)switch(this.accordionIds=this.getItemIds(),t.key){case gh:t.preventDefault(),this.adjust(-1);break;case hh:t.preventDefault(),this.adjust(1);break;case yh:this.activeItemIndex=0,this.focusItem();break;case Ch:this.activeItemIndex=this.accordionItems.length-1,this.focusItem()}},this.handleItemFocus=t=>{if(t.target===t.currentTarget){const e=t.target,n=this.activeItemIndex=Array.from(this.accordionItems).indexOf(e);this.activeItemIndex!==n&&-1!==n&&(this.activeItemIndex=n,this.activeid=this.accordionIds[this.activeItemIndex])}}}accordionItemsChanged(t,e){this.$fastController.isConnected&&(this.removeItemListeners(t),this.setItems())}findExpandedItem(){for(let t=0;t<this.accordionItems.length;t++)if("true"===this.accordionItems[t].getAttribute("expanded"))return this.accordionItems[t];return null}resetItems(){this.accordionItems.forEach(((t,e)=>{t.expanded=!1}))}getItemIds(){return this.accordionItems.map((t=>t.getAttribute("id")))}isSingleExpandMode(){return this.expandmode===Oh}adjust(t){this.activeItemIndex=xh(0,this.accordionItems.length-1,this.activeItemIndex+t),this.focusItem()}focusItem(){const t=this.accordionItems[this.activeItemIndex];t instanceof Ph&&t.expandbutton.focus()}}function Nh(t){return t?function(e,n,i){return 1===e.nodeType&&e.matches(t)}:function(t,e,n){return 1===t.nodeType}}Cn([Fn({attribute:"expand-mode"})],Mh.prototype,"expandmode",void 0),Cn([An],Mh.prototype,"accordionItems",void 0);class Lh{constructor(t,e){this.target=t,this.options=e,this.source=null}bind(t){const e=this.options.property;this.shouldUpdate=En.getAccessors(t).some((t=>t.name===e)),this.source=t,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(nn),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let t=this.getNodes();return void 0!==this.options.filter&&(t=t.filter(this.options.filter)),t}updateTarget(t){this.source[this.options.property]=t}}class _h extends Lh{constructor(t,e){super(t,e)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function Fh(t){return"string"==typeof t&&(t={property:t}),new wd("fast-slotted",_h,t)}const Hh=Mh.compose({baseName:"accordion",template:(t,e)=>Qd`
    <template>
        <slot ${Fh({property:"accordionItems",filter:Nh()})}></slot>
        <slot name="item" part="item" ${Fh("accordionItems")}></slot>
    </template>
`,styles:(t,e)=>Td`
    ${ih("flex")} :host {
      box-sizing: border-box;
      flex-direction: column;
      font-family: ${No};
      font-size: ${Fo};
      line-height: ${Ho};
      color: ${Wr};
      border-top: calc(${Ro} * 1px) solid ${Mr};
    }
  `});function Bh(...t){return t.every((t=>t instanceof HTMLElement))}let Uh;const Vh=function(){if("boolean"==typeof Uh)return Uh;if("undefined"==typeof window||!window.document||!window.document.createElement)return Uh=!1,Uh;const t=document.createElement("style"),e=function(){const t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}();null!==e&&t.setAttribute("nonce",e),document.head.appendChild(t);try{t.sheet.insertRule("foo:focus-visible {color:inherit}",0),Uh=!0}catch(t){Uh=!1}finally{document.head.removeChild(t)}return Uh}()?"focus-visible":"focus",Gh=(function(t,...e){const{styles:n,behaviors:i}=Ad(t,e);return new Dd(n,i)})`(${Do} + ${Io}) * ${wo}`,Wh=Ph.compose({baseName:"accordion-item",template:(t,e)=>Qd`
    <template class="${t=>t.expanded?"expanded":""}">
        <div
            class="heading"
            part="heading"
            role="heading"
            aria-level="${t=>t.headinglevel}"
        >
            <button
                class="button"
                part="button"
                ${Th("expandbutton")}
                aria-expanded="${t=>t.expanded}"
                aria-controls="${t=>t.id}-panel"
                id="${t=>t.id}"
                @click="${(t,e)=>t.clickHandler(e.event)}"
            >
                <span class="heading-content" part="heading-content">
                    <slot name="heading"></slot>
                </span>
            </button>
            ${Ih(0,e)}
            ${kh(0,e)}
            <span class="icon" part="icon" aria-hidden="true">
                <slot name="expanded-icon" part="expanded-icon">
                    ${e.expandedIcon||""}
                </slot>
                <slot name="collapsed-icon" part="collapsed-icon">
                    ${e.collapsedIcon||""}
                </slot>
            <span>
        </div>
        <div
            class="region"
            part="region"
            id="${t=>t.id}-panel"
            role="region"
            aria-labelledby="${t=>t.id}"
        >
            <slot></slot>
        </div>
    </template>
`,styles:(t,e)=>Td`
    ${ih("flex")} :host {
      box-sizing: border-box;
      font-family: ${No};
      flex-direction: column;
      font-size: ${Fo};
      line-height: ${Ho};
      border-bottom: calc(${Ro} * 1px) solid ${Mr};
    }

    .region {
      display: none;
      padding: calc((6 + (${wo} * 2 * ${Io})) * 1px);
    }

    .heading {
      display: grid;
      position: relative;
      grid-template-columns: auto 1fr auto calc(${Gh} * 1px);
      z-index: 2;
    }

    .button {
      appearance: none;
      border: none;
      background: none;
      grid-column: 2;
      grid-row: 1;
      outline: none;
      padding: 0 calc((6 + (${wo} * 2 * ${Io})) * 1px);
      text-align: left;
      height: calc(${Gh} * 1px);
      color: ${Wr};
      cursor: pointer;
      font-family: inherit;
    }

    .button:hover,
    .button:active {
      color: ${Wr};
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
      cursor: pointer;
    }

    .button:${Vh}::before {
      outline: none;
      border: calc(${Ro} * 1px) solid ${Br};
      box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
    }

    :host(.expanded) .region {
      display: block;
    }

    .icon {
      display: flex;
      align-items: center;
      justify-content: center;
      grid-column: 4;
      z-index: 2;
      pointer-events: none;
      fill: ${Za};
    }

    slot[name='collapsed-icon'] {
      display: flex;
    }

    :host(.expanded) slot[name='collapsed-icon'] {
      display: none;
    }

    slot[name='expanded-icon'] {
      display: none;
    }

    :host(.expanded) slot[name='expanded-icon'] {
      display: flex;
    }

    .start {
      display: flex;
      align-items: center;
      padding-inline-start: calc(${wo} * 1px);
      justify-content: center;
      grid-column: 1;
      z-index: 2;
    }

    .end {
      display: flex;
      align-items: center;
      justify-content: center;
      grid-column: 3;
      z-index: 2;
    }
  `.withBehaviors(eh(Td`
        .button:${Vh}::before {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${oh.Highlight};
        }
        .icon {
          fill: ${oh.ButtonText};
        }
      `)),collapsedIcon:'\n    <svg\n        width="20"\n        height="20"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M16.22 3H3.78a.78.78 0 00-.78.78v12.44c0 .43.35.78.78.78h12.44c.43 0 .78-.35.78-.78V3.78a.78.78 0 00-.78-.78zM3.78 2h12.44C17.2 2 18 2.8 18 3.78v12.44c0 .98-.8 1.78-1.78 1.78H3.78C2.8 18 2 17.2 2 16.22V3.78C2 2.8 2.8 2 3.78 2zM11 9h3v2h-3v3H9v-3H6V9h3V6h2v3z"\n        />\n    </svg>\n  ',expandedIcon:'\n    <svg\n        width="20"\n        height="20"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M3.78 3h12.44c.43 0 .78.35.78.78v12.44c0 .43-.35.78-.78.78H3.78a.78.78 0 01-.78-.78V3.78c0-.43.35-.78.78-.78zm12.44-1H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.78-.8 1.78-1.78V3.78C18 2.8 17.2 2 16.22 2zM14 9H6v2h8V9z"\n        />\n    </svg>\n  '});class $h{}Cn([Fn({attribute:"aria-atomic"})],$h.prototype,"ariaAtomic",void 0),Cn([Fn({attribute:"aria-busy"})],$h.prototype,"ariaBusy",void 0),Cn([Fn({attribute:"aria-controls"})],$h.prototype,"ariaControls",void 0),Cn([Fn({attribute:"aria-current"})],$h.prototype,"ariaCurrent",void 0),Cn([Fn({attribute:"aria-describedby"})],$h.prototype,"ariaDescribedby",void 0),Cn([Fn({attribute:"aria-details"})],$h.prototype,"ariaDetails",void 0),Cn([Fn({attribute:"aria-disabled"})],$h.prototype,"ariaDisabled",void 0),Cn([Fn({attribute:"aria-errormessage"})],$h.prototype,"ariaErrormessage",void 0),Cn([Fn({attribute:"aria-flowto"})],$h.prototype,"ariaFlowto",void 0),Cn([Fn({attribute:"aria-haspopup"})],$h.prototype,"ariaHaspopup",void 0),Cn([Fn({attribute:"aria-hidden"})],$h.prototype,"ariaHidden",void 0),Cn([Fn({attribute:"aria-invalid"})],$h.prototype,"ariaInvalid",void 0),Cn([Fn({attribute:"aria-keyshortcuts"})],$h.prototype,"ariaKeyshortcuts",void 0),Cn([Fn({attribute:"aria-label"})],$h.prototype,"ariaLabel",void 0),Cn([Fn({attribute:"aria-labelledby"})],$h.prototype,"ariaLabelledby",void 0),Cn([Fn({attribute:"aria-live"})],$h.prototype,"ariaLive",void 0),Cn([Fn({attribute:"aria-owns"})],$h.prototype,"ariaOwns",void 0),Cn([Fn({attribute:"aria-relevant"})],$h.prototype,"ariaRelevant",void 0),Cn([Fn({attribute:"aria-roledescription"})],$h.prototype,"ariaRoledescription",void 0);class zh extends hd{constructor(){super(...arguments),this.handleUnsupportedDelegatesFocus=()=>{var t;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(t=this.$fastController.definition.shadowOptions)||void 0===t?void 0:t.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}connectedCallback(){super.connectedCallback(),this.handleUnsupportedDelegatesFocus()}}Cn([Fn],zh.prototype,"download",void 0),Cn([Fn],zh.prototype,"href",void 0),Cn([Fn],zh.prototype,"hreflang",void 0),Cn([Fn],zh.prototype,"ping",void 0),Cn([Fn],zh.prototype,"referrerpolicy",void 0),Cn([Fn],zh.prototype,"rel",void 0),Cn([Fn],zh.prototype,"target",void 0),Cn([Fn],zh.prototype,"type",void 0),Cn([An],zh.prototype,"defaultSlottedContent",void 0);class Kh{}Cn([Fn({attribute:"aria-expanded"})],Kh.prototype,"ariaExpanded",void 0),wh(Kh,$h),wh(zh,Dh,Kh);const Yh=(t,e)=>Td`
    ${ih("inline-flex")} :host {
      font-family: ${No};
      outline: none;
      font-size: ${Lo};
      line-height: ${_o};
      height: calc(${Gh} * 1px);
      min-width: calc(${Gh} * 1px);
      background-color: ${pr};
      color: ${Wr};
      border-radius: calc(${Po} * 1px);
      fill: currentcolor;
      cursor: pointer;
    }

    .control {
      background: transparent;
      height: inherit;
      flex-grow: 1;
      box-sizing: border-box;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      padding: 0 calc((10 + (${wo} * 2 * ${Io})) * 1px);
      white-space: nowrap;
      outline: none;
      text-decoration: none;
      border: calc(${Ro} * 1px) solid transparent;
      color: inherit;
      border-radius: inherit;
      fill: inherit;
      cursor: inherit;
      font-family: inherit;
    }

    .control,
    .end,
    .start {
      font: inherit;
    }

    .control.icon-only {
      padding: 0;
      line-height: 0;
    }

    :host(:hover) {
      background-color: ${fr};
    }

    :host(:active) {
      background-color: ${gr};
    }

    .control:${Vh} {
      border: calc(${Ro} * 1px) solid ${Br};
      box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
    }

    .control::-moz-focus-inner {
      border: 0;
    }

    .content {
      pointer-events: none;
    }

    .start,
    .end {
      display: flex;
      pointer-events: none;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
      pointer-events: none;
    }

    .start {
      margin-inline-end: 11px;
    }

    .end {
      margin-inline-start: 11px;
    }
  `.withBehaviors(eh(Td`
        :host,
        :host([appearance="neutral"]) .control {
          background-color: ${oh.ButtonFace};
          border-color: ${oh.ButtonText};
          color: ${oh.ButtonText};
          fill: currentcolor;
        }

        :host(:not([disabled][href]):hover),
        :host([appearance="neutral"]:not([disabled]):hover) .control {
          forced-color-adjust: none;
          background-color: ${oh.Highlight};
          color: ${oh.HighlightText};
        }

        .control:${Vh},
        :host([appearance="outline"]) .control:${Vh},
        :host([appearance="neutral"]:${Vh}) .control {
          forced-color-adjust: none;
          background-color: ${oh.Highlight};
          border-color: ${oh.ButtonText};
          box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${oh.ButtonText};
          color: ${oh.HighlightText};
        }

        .control:not([disabled]):hover,
        :host([appearance="outline"]) .control:hover {
          border-color: ${oh.ButtonText};
        }

        :host([href]) .control {
          border-color: ${oh.LinkText};
          color: ${oh.LinkText};
        }

        :host([href]) .control:hover,
        :host(.neutral[href]) .control:hover,
        :host(.outline[href]) .control:hover,
        :host([href]) .control:${Vh}{
          forced-color-adjust: none;
          background: ${oh.ButtonFace};
          border-color: ${oh.LinkText};
          box-shadow: 0 0 0 1px ${oh.LinkText} inset;
          color: ${oh.LinkText};
          fill: currentcolor;
        }
    `)),jh=Td`
  :host([appearance='accent']) {
    background: ${Za};
    color: ${nr};
  }

  :host([appearance='accent']:hover) {
    background: ${Xa};
    color: ${ir};
  }

  :host([appearance='accent']:active) .control:active {
    background: ${Ja};
    color: ${or};
  }

  :host([appearance="accent"]) .control:${Vh} {
    box-shadow: 0 0 0 calc(${Mo} * 1px) inset ${Vr},
      0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
  }
`.withBehaviors(eh(Td`
      :host([appearance='accent']) .control {
        forced-color-adjust: none;
        background: ${oh.Highlight};
        color: ${oh.HighlightText};
      }

      :host([appearance='accent']) .control:hover,
      :host([appearance='accent']:active) .control:active {
        background: ${oh.HighlightText};
        border-color: ${oh.Highlight};
        color: ${oh.Highlight};
      }

      :host([appearance="accent"]) .control:${Vh} {
        border-color: ${oh.ButtonText};
        box-shadow: 0 0 0 2px ${oh.HighlightText} inset;
      }

      :host([appearance='accent'][href]) .control {
        background: ${oh.LinkText};
        color: ${oh.HighlightText};
      }

      :host([appearance='accent'][href]) .control:hover {
        background: ${oh.ButtonFace};
        border-color: ${oh.LinkText};
        box-shadow: none;
        color: ${oh.LinkText};
        fill: currentcolor;
      }

      :host([appearance="accent"][href]) .control:${Vh} {
        border-color: ${oh.LinkText};
        box-shadow: 0 0 0 2px ${oh.HighlightText} inset;
      }
    `)),qh=Td`
  :host([appearance='hypertext']) {
    height: auto;
    font-size: inherit;
    line-height: inherit;
    background: transparent;
    min-width: 0;
  }

  :host([appearance='hypertext']) .control {
    display: inline;
    padding: 0;
    border: none;
    box-shadow: none;
    border-radius: 0;
    line-height: 1;
  }
  :host a.control:not(:link) {
    background-color: transparent;
    cursor: default;
  }
  :host([appearance='hypertext']) .control:link,
  :host([appearance='hypertext']) .control:visited {
    background: transparent;
    color: ${cr};
    border-bottom: calc(${Ro} * 1px) solid ${cr};
  }
  :host([appearance='hypertext']) .control:hover {
    border-bottom-color: ${ur};
  }
  :host([appearance='hypertext']) .control:active {
    border-bottom-color: ${dr};
  }
  :host([appearance="hypertext"]) .control:${Vh} {
    border-bottom: calc(${Mo} * 1px) solid ${Br};
    margin-bottom: calc(calc(${Ro} - ${Mo}) * 1px);
  }
`.withBehaviors(eh(Td`
      :host([appearance="hypertext"]) .control:${Vh} {
        color: ${oh.LinkText};
        border-bottom-color: ${oh.LinkText};
      }
    `)),Zh=Td`
  :host([appearance='lightweight']) {
    background: transparent;
    color: ${cr};
  }

  :host([appearance='lightweight']) .control {
    padding: 0;
    height: initial;
    border: none;
    box-shadow: none;
    border-radius: 0;
  }

  :host([appearance='lightweight']:hover) {
    color: ${ur};
  }

  :host([appearance='lightweight']:active) {
    color: ${dr};
  }

  :host([appearance='lightweight']) .content {
    position: relative;
  }

  :host([appearance='lightweight']) .content::before {
    content: '';
    display: block;
    height: calc(${Ro} * 1px);
    position: absolute;
    top: calc(1em + 3px);
    width: 100%;
  }

  :host([appearance='lightweight']:hover) .content::before {
    background: ${ur};
  }

  :host([appearance='lightweight']:active) .content::before {
    background: ${dr};
  }

  :host([appearance="lightweight"]) .control:${Vh} .content::before {
    background: ${Wr};
    height: calc(${Mo} * 1px);
  }
`.withBehaviors(eh(Td`
      :host([appearance='lightweight']) {
        color: ${oh.ButtonText};
      }
      :host([appearance="lightweight"]) .control:hover,
        :host([appearance="lightweight"]) .control:${Vh} {
        forced-color-adjust: none;
        background: ${oh.ButtonFace};
        color: ${oh.Highlight};
      }
      :host([appearance="lightweight"]) .control:hover .content::before,
        :host([appearance="lightweight"]) .control:${Vh} .content::before {
        background: ${oh.Highlight};
      }

      :host([appearance="lightweight"][href]) .control:hover,
        :host([appearance="lightweight"][href]) .control:${Vh} {
        background: ${oh.ButtonFace};
        box-shadow: none;
        color: ${oh.LinkText};
      }

      :host([appearance="lightweight"][href]) .control:hover .content::before,
        :host([appearance="lightweight"][href]) .control:${Vh} .content::before {
        background: ${oh.LinkText};
      }
    `)),Xh=Td`
  :host([appearance='outline']) {
    background: transparent;
    border-color: ${wr};
  }

  :host([appearance='outline']:hover) {
    border-color: ${Pr};
  }

  :host([appearance='outline']:active) {
    border-color: ${Or};
  }

  :host([appearance='outline']) .control {
    border-color: inherit;
  }

  :host([appearance="outline"]) .control:${Vh} {
    box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
    border-color: ${Br};
  }
`.withBehaviors(eh(Td`
      :host([appearance='outline']) {
        border-color: ${oh.ButtonText};
      }
      :host([appearance='outline'][href]) {
        border-color: ${oh.LinkText};
      }
    `)),Jh=Td`
  :host([appearance='stealth']) {
    background: ${Ar};
  }

  :host([appearance='stealth']:hover) {
    background: ${Tr};
  }

  :host([appearance='stealth']:active) {
    background: ${Dr};
  }
`.withBehaviors(eh(Td`
      :host([appearance='stealth']),
      :host([appearance='stealth']) .control {
        forced-color-adjust: none;
        background: ${oh.ButtonFace};
        border-color: transparent;
        color: ${oh.ButtonText};
        fill: currentcolor;
      }

      :host([appearance='stealth']:hover) .control {
        background: ${oh.Highlight};
        border-color: ${oh.Highlight};
        color: ${oh.HighlightText};
        fill: currentcolor;
      }

      :host([appearance="stealth"]:${Vh}) .control {
        background: ${oh.Highlight};
        box-shadow: 0 0 0 1px ${oh.Highlight};
        color: ${oh.HighlightText};
        fill: currentcolor;
      }

      :host([appearance='stealth'][href]) .control {
        color: ${oh.LinkText};
      }

      :host([appearance="stealth"]:hover[href]) .control,
        :host([appearance="stealth"]:${Vh}[href]) .control {
        background: ${oh.LinkText};
        border-color: ${oh.LinkText};
        color: ${oh.HighlightText};
        fill: currentcolor;
      }

      :host([appearance="stealth"]:${Vh}[href]) .control {
        box-shadow: 0 0 0 1px ${oh.LinkText};
      }
    `));class Qh{constructor(t,e,n){this.propertyName=t,this.value=e,this.styles=n}bind(t){En.getNotifier(t).subscribe(this,this.propertyName),this.handleChange(t,this.propertyName)}unbind(t){En.getNotifier(t).unsubscribe(this,this.propertyName),t.$fastController.removeStyles(this.styles)}handleChange(t,e){t[e]===this.value?t.$fastController.addStyles(this.styles):t.$fastController.removeStyles(this.styles)}}function tp(t,e){return new Qh("appearance",t,e)}class ep extends zh{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="neutral")}defaultSlottedContentChanged(){const t=this.defaultSlottedContent.filter((t=>t.nodeType===Node.ELEMENT_NODE));1===t.length&&t[0]instanceof SVGElement?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}Ed([Fn],ep.prototype,"appearance",void 0);const np=ep.compose({baseName:"anchor",baseClass:zh,template:(t,e)=>Qd`
    <a
        class="control"
        part="control"
        download="${t=>t.download}"
        href="${t=>t.href}"
        hreflang="${t=>t.hreflang}"
        ping="${t=>t.ping}"
        referrerpolicy="${t=>t.referrerpolicy}"
        rel="${t=>t.rel}"
        target="${t=>t.target}"
        type="${t=>t.type}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedby="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
        ${Th("control")}
    >
        ${Ih(0,e)}
        <span class="content" part="content">
            <slot ${Fh("defaultSlottedContent")}></slot>
        </span>
        ${kh(0,e)}
    </a>
`,styles:(t,e)=>Td`
    ${Yh()}
  `.withBehaviors(tp("accent",jh),tp("hypertext",qh),tp("lightweight",Zh),tp("outline",Xh),tp("stealth",Jh)),shadowOptions:{delegatesFocus:!0}}),ip="form-associated-proxy",op="ElementInternals",ap=op in window&&"setFormValue"in window.ElementInternals.prototype,rp=new WeakMap;function sp(t){const e=class extends t{constructor(...t){super(...t),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return ap}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const t=this.proxy.labels,e=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),n=t?e.concat(Array.from(t)):e;return Object.freeze(n)}return nn}valueChanged(t,e){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(t,e){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),un.queueUpdate((()=>this.classList.toggle("disabled",this.disabled)))}nameChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),un.queueUpdate((()=>this.classList.toggle("required",this.required))),this.validate()}get elementInternals(){if(!ap)return null;let t=rp.get(this);return t||(t=this.attachInternals(),rp.set(this,t)),t}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){this.proxyEventsToBlock.forEach((t=>this.proxy.removeEventListener(t,this.stopPropagation))),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(t,e,n){this.elementInternals?this.elementInternals.setValidity(t,e,n):"string"==typeof e&&this.proxy.setCustomValidity(e)}formDisabledCallback(t){this.disabled=t}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var t;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach((t=>this.proxy.addEventListener(t,this.stopPropagation))),this.proxy.disabled=this.disabled,this.proxy.required=this.required,"string"==typeof this.name&&(this.proxy.name=this.name),"string"==typeof this.value&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",ip),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",ip)),null===(t=this.shadowRoot)||void 0===t||t.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var t;this.removeChild(this.proxy),null===(t=this.shadowRoot)||void 0===t||t.removeChild(this.proxySlot)}validate(){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage)}setFormValue(t,e){this.elementInternals&&this.elementInternals.setFormValue(t,e||t)}_keypressHandler(t){if(t.key===mh)if(this.form instanceof HTMLFormElement){const t=this.form.querySelector("[type=submit]");null==t||t.click()}}stopPropagation(t){t.stopPropagation()}};return Fn({mode:"boolean"})(e.prototype,"disabled"),Fn({mode:"fromView",attribute:"value"})(e.prototype,"initialValue"),Fn({attribute:"current-value"})(e.prototype,"currentValue"),Fn(e.prototype,"name"),Fn({mode:"boolean"})(e.prototype,"required"),An(e.prototype,"value"),e}function lp(t){class e extends(sp(t)){}class n extends e{constructor(...t){super(t),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(t,e){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),void 0!==t&&this.$emit("change"),this.validate()}currentCheckedChanged(t,e){this.checked=this.currentChecked}updateForm(){const t=this.checked?this.value:null;this.setFormValue(t,t)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return Fn({attribute:"checked",mode:"boolean"})(n.prototype,"checkedAttribute"),Fn({attribute:"current-checked",converter:Nn})(n.prototype,"currentChecked"),An(n.prototype,"defaultChecked"),An(n.prototype,"checked"),n}class cp extends hd{}class up extends(sp(cp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class dp extends up{constructor(){super(...arguments),this.handleClick=t=>{var e;this.disabled&&(null===(e=this.defaultSlottedContent)||void 0===e?void 0:e.length)<=1&&t.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const t=this.proxy.isConnected;t||this.attachProxy(),"function"==typeof this.form.requestSubmit?this.form.requestSubmit(this.proxy):this.proxy.click(),t||this.detachProxy()},this.handleFormReset=()=>{var t;null===(t=this.form)||void 0===t||t.reset()},this.handleUnsupportedDelegatesFocus=()=>{var t;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(t=this.$fastController.definition.shadowOptions)||void 0===t?void 0:t.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(t,e){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),"submit"===e&&this.addEventListener("click",this.handleSubmission),"submit"===t&&this.removeEventListener("click",this.handleSubmission),"reset"===e&&this.addEventListener("click",this.handleFormReset),"reset"===t&&this.removeEventListener("click",this.handleFormReset)}connectedCallback(){var t;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const e=Array.from(null===(t=this.control)||void 0===t?void 0:t.children);e&&e.forEach((t=>{t.addEventListener("click",this.handleClick)}))}disconnectedCallback(){var t;super.disconnectedCallback();const e=Array.from(null===(t=this.control)||void 0===t?void 0:t.children);e&&e.forEach((t=>{t.removeEventListener("click",this.handleClick)}))}}Cn([Fn({mode:"boolean"})],dp.prototype,"autofocus",void 0),Cn([Fn({attribute:"form"})],dp.prototype,"formId",void 0),Cn([Fn],dp.prototype,"formaction",void 0),Cn([Fn],dp.prototype,"formenctype",void 0),Cn([Fn],dp.prototype,"formmethod",void 0),Cn([Fn({mode:"boolean"})],dp.prototype,"formnovalidate",void 0),Cn([Fn],dp.prototype,"formtarget",void 0),Cn([Fn],dp.prototype,"type",void 0),Cn([An],dp.prototype,"defaultSlottedContent",void 0);class hp{}Cn([Fn({attribute:"aria-expanded"})],hp.prototype,"ariaExpanded",void 0),Cn([Fn({attribute:"aria-pressed"})],hp.prototype,"ariaPressed",void 0),wh(hp,$h),wh(dp,Dh,hp);const pp="not-allowed";class fp extends dp{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="neutral")}defaultSlottedContentChanged(){const t=this.defaultSlottedContent.filter((t=>t.nodeType===Node.ELEMENT_NODE));1===t.length&&t[0]instanceof SVGElement?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}Ed([Fn],fp.prototype,"appearance",void 0);const gp=fp.compose({baseName:"button",baseClass:dp,template:(t,e)=>Qd`
    <button
        class="control"
        part="control"
        ?autofocus="${t=>t.autofocus}"
        ?disabled="${t=>t.disabled}"
        form="${t=>t.formId}"
        formaction="${t=>t.formaction}"
        formenctype="${t=>t.formenctype}"
        formmethod="${t=>t.formmethod}"
        formnovalidate="${t=>t.formnovalidate}"
        formtarget="${t=>t.formtarget}"
        name="${t=>t.name}"
        type="${t=>t.type}"
        value="${t=>t.value}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedby="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-pressed="${t=>t.ariaPressed}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
        ${Th("control")}
    >
        ${Ih(0,e)}
        <span class="content" part="content">
            <slot ${Fh("defaultSlottedContent")}></slot>
        </span>
        ${kh(0,e)}
    </button>
`,styles:(t,e)=>Td`
    :host([disabled]),
    :host([disabled]:hover),
    :host([disabled]:active) {
      opacity: ${To};
      background-color: ${pr};
      cursor: ${pp};
    }

    ${Yh()}
  `.withBehaviors(eh(Td`
        :host([disabled]),
        :host([disabled]:hover),
        :host([disabled]:active),
        :host([disabled]) .control,
        :host([disabled]) .control:hover,
        :host([appearance='neutral'][disabled]:hover) .control {
          forced-color-adjust: none;
          background-color: ${oh.ButtonFace};
          border-color: ${oh.GrayText};
          color: ${oh.GrayText};
          opacity: 1;
        }
      `),tp("accent",Td`
        :host([appearance='accent'][disabled]),
        :host([appearance='accent'][disabled]:hover),
        :host([appearance='accent'][disabled]:active) {
          background: ${Za};
        }

        ${jh}
      `.withBehaviors(eh(Td`
            :host([appearance='accent'][disabled]) .control,
            :host([appearance='accent'][disabled]) .control:hover {
              background: ${oh.ButtonFace};
              border-color: ${oh.GrayText};
              color: ${oh.GrayText};
            }
          `))),tp("lightweight",Td`
        :host([appearance='lightweight'][disabled]:hover),
        :host([appearance='lightweight'][disabled]:active) {
          background-color: transparent;
          color: ${cr};
        }

        :host([appearance='lightweight'][disabled]) .content::before,
        :host([appearance='lightweight'][disabled]:hover) .content::before,
        :host([appearance='lightweight'][disabled]:active) .content::before {
          background: transparent;
        }

        ${Zh}
      `.withBehaviors(eh(Td`
            :host([appearance='lightweight'][disabled]) .control {
              forced-color-adjust: none;
              color: ${oh.GrayText};
            }

            :host([appearance='lightweight'][disabled]) .control:hover .content::before {
              background: none;
            }
          `))),tp("outline",Td`
        :host([appearance='outline'][disabled]:hover),
        :host([appearance='outline'][disabled]:active) {
          background: transparent;
          border-color: ${wr};
        }

        ${Xh}
      `.withBehaviors(eh(Td`
            :host([appearance='outline'][disabled]) .control {
              border-color: ${oh.GrayText};
            }
          `))),tp("stealth",Td`
        :host([appearance='stealth'][disabled]),
        :host([appearance='stealth'][disabled]:hover),
        :host([appearance='stealth'][disabled]:active) {
          background: ${Ar};
        }

        ${Jh}
      `.withBehaviors(eh(Td`
            :host([appearance='stealth'][disabled]),
            :host([appearance='stealth'][disabled]:hover) {
              background: ${oh.ButtonFace};
            }

            :host([appearance='stealth'][disabled]) .control {
              background: ${oh.ButtonFace};
              border-color: transparent;
              color: ${oh.GrayText};
            }
          `)))),shadowOptions:{delegatesFocus:!0}});class mp extends hd{}const vp="box-shadow: 0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(.11 * (2 - var(--background-luminance, 1)))), 0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(.13 * (2 - var(--background-luminance, 1))));",yp=(t,e)=>Td`
      ${ih("block")} :host {
        --elevation: 4;
        display: block;
        contain: content;
        height: var(--card-height, 100%);
        width: var(--card-width, 100%);
        box-sizing: border-box;
        background: ${Ya};
        color: ${Wr};
        border-radius: calc(${Oo} * 1px);
        ${vp}
      }

      :host(:hover) {
        --elevation: 8;
      }

      :host(:focus-within) {
        --elevation: 8;
      }

      :host {
        content-visibility: auto;
      }
    `.withBehaviors(eh(Td`
          :host {
            forced-color-adjust: none;
            background: ${oh.Canvas};
            box-shadow: 0 0 0 1px ${oh.CanvasText};
          }
        `));class Cp extends mp{cardFillColorChanged(t,e){if(e){const t=eo(e);null!==t&&(this.neutralPaletteSource=e,Ya.setValueFor(this,so.create(t.r,t.g,t.b)))}}neutralPaletteSourceChanged(t,e){if(e){const t=eo(e),n=so.create(t.r,t.g,t.b);Fa.setValueFor(this,po.create(n))}}handleChange(t,e){this.cardFillColor||Ya.setValueFor(this,(e=>Sr.getValueFor(e).evaluate(e,Ya.getValueFor(t))))}connectedCallback(){super.connectedCallback();const t=jn(this);if(t){const e=En.getNotifier(t);e.subscribe(this,"fillColor"),e.subscribe(this,"neutralPalette"),this.handleChange(t,"fillColor")}}}Ed([Fn({attribute:"card-fill-color",mode:"fromView"})],Cp.prototype,"cardFillColor",void 0),Ed([Fn({attribute:"neutral-palette-source",mode:"fromView"})],Cp.prototype,"neutralPaletteSource",void 0);const bp=Cp.compose({baseName:"card",baseClass:mp,template:(t,e)=>Qd`
    <slot></slot>
`,styles:yp}),Sp=yp,xp="menuitem",Ep="menuitemcheckbox",Ap="menuitemradio",Tp={[xp]:"menuitem",[Ep]:"menuitemcheckbox",[Ap]:"menuitemradio"},Dp=t=>{const e=t.closest("[dir]");return null!==e&&"rtl"===e.dir?hi.rtl:hi.ltr};class kp extends hd{constructor(){super(...arguments),this.role=xp,this.hasSubmenu=!1,this.currentDirection=hi.ltr,this.focusSubmenuOnLoad=!1,this.handleMenuItemKeyDown=t=>{if(t.defaultPrevented)return!1;switch(t.key){case mh:case bh:return this.invoke(),!1;case fh:return this.expandAndFocus(),!1;case ph:if(this.expanded)return this.expanded=!1,this.focus(),!1}return!0},this.handleMenuItemClick=t=>(t.defaultPrevented||this.disabled||this.invoke(),!1),this.submenuLoaded=()=>{this.focusSubmenuOnLoad&&(this.focusSubmenuOnLoad=!1,this.hasSubmenu&&(this.submenu.focus(),this.setAttribute("tabindex","-1")))},this.handleMouseOver=t=>(this.disabled||!this.hasSubmenu||this.expanded||(this.expanded=!0),!1),this.handleMouseOut=t=>(!this.expanded||this.contains(document.activeElement)||(this.expanded=!1),!1),this.expandAndFocus=()=>{this.hasSubmenu&&(this.focusSubmenuOnLoad=!0,this.expanded=!0)},this.invoke=()=>{if(!this.disabled)switch(this.role){case Ep:this.checked=!this.checked;break;case xp:this.updateSubmenu(),this.hasSubmenu?this.expandAndFocus():this.$emit("change");break;case Ap:this.checked||(this.checked=!0)}},this.updateSubmenu=()=>{this.submenu=this.domChildren().find((t=>"menu"===t.getAttribute("role"))),this.hasSubmenu=void 0!==this.submenu}}expandedChanged(t){if(this.$fastController.isConnected){if(void 0===this.submenu)return;!1===this.expanded?this.submenu.collapseExpandedItem():this.currentDirection=Dp(this),this.$emit("expanded-change",this,{bubbles:!1})}}checkedChanged(t,e){this.$fastController.isConnected&&this.$emit("change")}connectedCallback(){super.connectedCallback(),un.queueUpdate((()=>{this.updateSubmenu()})),this.startColumnCount||(this.startColumnCount=1),this.observer=new MutationObserver(this.updateSubmenu)}disconnectedCallback(){super.disconnectedCallback(),this.submenu=void 0,void 0!==this.observer&&(this.observer.disconnect(),this.observer=void 0)}domChildren(){return Array.from(this.children).filter((t=>!t.hasAttribute("hidden")))}}Cn([Fn({mode:"boolean"})],kp.prototype,"disabled",void 0),Cn([Fn({mode:"boolean"})],kp.prototype,"expanded",void 0),Cn([An],kp.prototype,"startColumnCount",void 0),Cn([Fn],kp.prototype,"role",void 0),Cn([Fn({mode:"boolean"})],kp.prototype,"checked",void 0),Cn([An],kp.prototype,"submenuRegion",void 0),Cn([An],kp.prototype,"hasSubmenu",void 0),Cn([An],kp.prototype,"currentDirection",void 0),Cn([An],kp.prototype,"submenu",void 0),wh(kp,Dh);class Ip extends hd{constructor(){super(...arguments),this.expandedItem=null,this.focusIndex=-1,this.isNestedMenu=()=>null!==this.parentElement&&Bh(this.parentElement)&&"menuitem"===this.parentElement.getAttribute("role"),this.handleFocusOut=t=>{if(!this.contains(t.relatedTarget)&&void 0!==this.menuItems){this.collapseExpandedItem();const t=this.menuItems.findIndex(this.isFocusableElement);this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.menuItems[t].setAttribute("tabindex","0"),this.focusIndex=t}},this.handleItemFocus=t=>{const e=t.target;void 0!==this.menuItems&&e!==this.menuItems[this.focusIndex]&&(this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.focusIndex=this.menuItems.indexOf(e),e.setAttribute("tabindex","0"))},this.handleExpandedChanged=t=>{if(t.defaultPrevented||null===t.target||void 0===this.menuItems||this.menuItems.indexOf(t.target)<0)return;t.preventDefault();const e=t.target;null===this.expandedItem||e!==this.expandedItem||!1!==e.expanded?e.expanded&&(null!==this.expandedItem&&this.expandedItem!==e&&(this.expandedItem.expanded=!1),this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.expandedItem=e,this.focusIndex=this.menuItems.indexOf(e),e.setAttribute("tabindex","0")):this.expandedItem=null},this.removeItemListeners=()=>{void 0!==this.menuItems&&this.menuItems.forEach((t=>{t.removeEventListener("expanded-change",this.handleExpandedChanged),t.removeEventListener("focus",this.handleItemFocus)}))},this.setItems=()=>{const t=this.domChildren();this.removeItemListeners(),this.menuItems=t;const e=this.menuItems.filter(this.isMenuItemElement);e.length&&(this.focusIndex=0);const n=e.reduce(((t,e)=>{const n=function(t){const e=t.getAttribute("role"),n=t.querySelector("[slot=start]");return e!==xp&&null===n||e===xp&&null!==n?1:e!==xp&&null!==n?2:0}(e);return t>n?t:n}),0);e.forEach(((t,e)=>{t.setAttribute("tabindex",0===e?"0":"-1"),t.addEventListener("expanded-change",this.handleExpandedChanged),t.addEventListener("focus",this.handleItemFocus),t instanceof kp&&(t.startColumnCount=n)}))},this.changeHandler=t=>{if(void 0===this.menuItems)return;const e=t.target,n=this.menuItems.indexOf(e);if(-1!==n&&"menuitemradio"===e.role&&!0===e.checked){for(let t=n-1;t>=0;--t){const e=this.menuItems[t],n=e.getAttribute("role");if(n===Ap&&(e.checked=!1),"separator"===n)break}const t=this.menuItems.length-1;for(let e=n+1;e<=t;++e){const t=this.menuItems[e],n=t.getAttribute("role");if(n===Ap&&(t.checked=!1),"separator"===n)break}}},this.isMenuItemElement=t=>Bh(t)&&Ip.focusableElementRoles.hasOwnProperty(t.getAttribute("role")),this.isFocusableElement=t=>this.isMenuItemElement(t)}itemsChanged(t,e){this.$fastController.isConnected&&void 0!==this.menuItems&&this.setItems()}connectedCallback(){super.connectedCallback(),un.queueUpdate((()=>{this.setItems()})),this.addEventListener("change",this.changeHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeItemListeners(),this.menuItems=void 0,this.removeEventListener("change",this.changeHandler)}focus(){this.setFocus(0,1)}collapseExpandedItem(){null!==this.expandedItem&&(this.expandedItem.expanded=!1,this.expandedItem=null)}handleMenuKeyDown(t){if(!t.defaultPrevented&&void 0!==this.menuItems)switch(t.key){case hh:return void this.setFocus(this.focusIndex+1,1);case gh:return void this.setFocus(this.focusIndex-1,-1);case Ch:return void this.setFocus(this.menuItems.length-1,-1);case yh:return void this.setFocus(0,1);default:return!0}}domChildren(){return Array.from(this.children).filter((t=>!t.hasAttribute("hidden")))}setFocus(t,e){if(void 0!==this.menuItems)for(;t>=0&&t<this.menuItems.length;){const n=this.menuItems[t];if(this.isFocusableElement(n)){this.focusIndex>-1&&this.menuItems.length>=this.focusIndex-1&&this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.focusIndex=t,n.setAttribute("tabindex","0"),n.focus();break}t+=e}}}Ip.focusableElementRoles=Tp,Cn([An],Ip.prototype,"items",void 0);const wp=Ip.compose({baseName:"menu",template:(t,e)=>Qd`
    <template
        slot="${t=>t.slot?t.slot:t.isNestedMenu()?"submenu":void 0}"
        role="menu"
        @keydown="${(t,e)=>t.handleMenuKeyDown(e.event)}"
        @focusout="${(t,e)=>t.handleFocusOut(e.event)}"
    >
        <slot ${Fh("items")}></slot>
    </template>
`,styles:(t,e)=>Td`
      ${ih("block")} :host {
        --elevation: 11;
        background: ${Va};
        border: calc(${Ro} * 1px) solid transparent;
        border-radius: ${Oo};
        ${vp}
        margin: 0;
        border-radius: calc(${Po} * 1px);
        padding: calc(${wo} * 1px) 0;
        max-width: 368px;
        min-width: 64px;
      }

      :host([slot='submenu']) {
        width: max-content;
        margin: 0 calc(${wo} * 1px);
      }

      ::slotted(hr) {
        box-sizing: content-box;
        height: 0;
        margin: 0;
        border: none;
        border-top: calc(${Ro} * 1px) solid ${Mr};
      }
    `});function Pp(t,e){const n="function"==typeof e?e:()=>e;return(e,i)=>t(e,i)?n(e,i):null}const Op="resize",Rp="scroll";class Mp extends hd{constructor(){super(...arguments),this.anchor="",this.viewport="",this.horizontalPositioningMode="uncontrolled",this.horizontalDefaultPosition="unset",this.horizontalViewportLock=!1,this.horizontalInset=!1,this.horizontalScaling="content",this.verticalPositioningMode="uncontrolled",this.verticalDefaultPosition="unset",this.verticalViewportLock=!1,this.verticalInset=!1,this.verticalScaling="content",this.fixedPlacement=!1,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.initialLayoutComplete=!1,this.resizeDetector=null,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.pendingPositioningUpdate=!1,this.pendingReset=!1,this.currentDirection=hi.ltr,this.regionVisible=!1,this.forceUpdate=!1,this.updateThreshold=.5,this.update=()=>{this.pendingPositioningUpdate||this.requestPositionUpdates()},this.startObservers=()=>{this.stopObservers(),null!==this.anchorElement&&(this.requestPositionUpdates(),null!==this.resizeDetector&&(this.resizeDetector.observe(this.anchorElement),this.resizeDetector.observe(this)))},this.requestPositionUpdates=()=>{null===this.anchorElement||this.pendingPositioningUpdate||(Mp.intersectionService.requestPosition(this,this.handleIntersection),Mp.intersectionService.requestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&Mp.intersectionService.requestPosition(this.viewportElement,this.handleIntersection),this.pendingPositioningUpdate=!0)},this.stopObservers=()=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,Mp.intersectionService.cancelRequestPosition(this,this.handleIntersection),null!==this.anchorElement&&Mp.intersectionService.cancelRequestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&Mp.intersectionService.cancelRequestPosition(this.viewportElement,this.handleIntersection)),null!==this.resizeDetector&&this.resizeDetector.disconnect()},this.getViewport=()=>"string"!=typeof this.viewport||""===this.viewport?document.documentElement:document.getElementById(this.viewport),this.getAnchor=()=>document.getElementById(this.anchor),this.handleIntersection=t=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,this.applyIntersectionEntries(t)&&this.updateLayout())},this.applyIntersectionEntries=t=>{const e=t.find((t=>t.target===this)),n=t.find((t=>t.target===this.anchorElement)),i=t.find((t=>t.target===this.viewportElement));return void 0!==e&&void 0!==i&&void 0!==n&&(!!(!this.regionVisible||this.forceUpdate||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect||this.isRectDifferent(this.anchorRect,n.boundingClientRect)||this.isRectDifferent(this.viewportRect,i.boundingClientRect)||this.isRectDifferent(this.regionRect,e.boundingClientRect))&&(this.regionRect=e.boundingClientRect,this.anchorRect=n.boundingClientRect,this.viewportElement===document.documentElement?this.viewportRect=new DOMRectReadOnly(i.boundingClientRect.x+document.documentElement.scrollLeft,i.boundingClientRect.y+document.documentElement.scrollTop,i.boundingClientRect.width,i.boundingClientRect.height):this.viewportRect=i.boundingClientRect,this.updateRegionOffset(),this.forceUpdate=!1,!0))},this.updateRegionOffset=()=>{this.anchorRect&&this.regionRect&&(this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRect.left-this.regionRect.left)+(this.translateX-this.baseHorizontalOffset),this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorRect.top-this.regionRect.top)+(this.translateY-this.baseVerticalOffset))},this.isRectDifferent=(t,e)=>Math.abs(t.top-e.top)>this.updateThreshold||Math.abs(t.right-e.right)>this.updateThreshold||Math.abs(t.bottom-e.bottom)>this.updateThreshold||Math.abs(t.left-e.left)>this.updateThreshold,this.handleResize=t=>{this.update()},this.reset=()=>{this.pendingReset&&(this.pendingReset=!1,null===this.anchorElement&&(this.anchorElement=this.getAnchor()),null===this.viewportElement&&(this.viewportElement=this.getViewport()),this.currentDirection=Dp(this),this.startObservers())},this.updateLayout=()=>{let t,e;if("uncontrolled"!==this.horizontalPositioningMode){const t=this.getPositioningOptions(this.horizontalInset);if("center"===this.horizontalDefaultPosition)e="center";else if("unset"!==this.horizontalDefaultPosition){let t=this.horizontalDefaultPosition;if("start"===t||"end"===t){const e=Dp(this);if(e!==this.currentDirection)return this.currentDirection=e,void this.initialize();t=this.currentDirection===hi.ltr?"start"===t?"left":"right":"start"===t?"right":"left"}switch(t){case"left":e=this.horizontalInset?"insetStart":"start";break;case"right":e=this.horizontalInset?"insetEnd":"end"}}const n=void 0!==this.horizontalThreshold?this.horizontalThreshold:void 0!==this.regionRect?this.regionRect.width:0,i=void 0!==this.anchorRect?this.anchorRect.left:0,o=void 0!==this.anchorRect?this.anchorRect.right:0,a=void 0!==this.anchorRect?this.anchorRect.width:0,r=void 0!==this.viewportRect?this.viewportRect.left:0,s=void 0!==this.viewportRect?this.viewportRect.right:0;(void 0===e||"locktodefault"!==this.horizontalPositioningMode&&this.getAvailableSpace(e,i,o,a,r,s)<n)&&(e=this.getAvailableSpace(t[0],i,o,a,r,s)>this.getAvailableSpace(t[1],i,o,a,r,s)?t[0]:t[1])}if("uncontrolled"!==this.verticalPositioningMode){const e=this.getPositioningOptions(this.verticalInset);if("center"===this.verticalDefaultPosition)t="center";else if("unset"!==this.verticalDefaultPosition)switch(this.verticalDefaultPosition){case"top":t=this.verticalInset?"insetStart":"start";break;case"bottom":t=this.verticalInset?"insetEnd":"end"}const n=void 0!==this.verticalThreshold?this.verticalThreshold:void 0!==this.regionRect?this.regionRect.height:0,i=void 0!==this.anchorRect?this.anchorRect.top:0,o=void 0!==this.anchorRect?this.anchorRect.bottom:0,a=void 0!==this.anchorRect?this.anchorRect.height:0,r=void 0!==this.viewportRect?this.viewportRect.top:0,s=void 0!==this.viewportRect?this.viewportRect.bottom:0;(void 0===t||"locktodefault"!==this.verticalPositioningMode&&this.getAvailableSpace(t,i,o,a,r,s)<n)&&(t=this.getAvailableSpace(e[0],i,o,a,r,s)>this.getAvailableSpace(e[1],i,o,a,r,s)?e[0]:e[1])}const n=this.getNextRegionDimension(e,t),i=this.horizontalPosition!==e||this.verticalPosition!==t;if(this.setHorizontalPosition(e,n),this.setVerticalPosition(t,n),this.updateRegionStyle(),!this.initialLayoutComplete)return this.initialLayoutComplete=!0,void this.requestPositionUpdates();this.regionVisible||(this.regionVisible=!0,this.style.removeProperty("pointer-events"),this.style.removeProperty("opacity"),this.classList.toggle("loaded",!0),this.$emit("loaded",this,{bubbles:!1})),this.updatePositionClasses(),i&&this.$emit("positionchange",this,{bubbles:!1})},this.updateRegionStyle=()=>{this.style.width=this.regionWidth,this.style.height=this.regionHeight,this.style.transform=`translate(${this.translateX}px, ${this.translateY}px)`},this.updatePositionClasses=()=>{this.classList.toggle("top","start"===this.verticalPosition),this.classList.toggle("bottom","end"===this.verticalPosition),this.classList.toggle("inset-top","insetStart"===this.verticalPosition),this.classList.toggle("inset-bottom","insetEnd"===this.verticalPosition),this.classList.toggle("vertical-center","center"===this.verticalPosition),this.classList.toggle("left","start"===this.horizontalPosition),this.classList.toggle("right","end"===this.horizontalPosition),this.classList.toggle("inset-left","insetStart"===this.horizontalPosition),this.classList.toggle("inset-right","insetEnd"===this.horizontalPosition),this.classList.toggle("horizontal-center","center"===this.horizontalPosition)},this.setHorizontalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let n=0;switch(this.horizontalScaling){case"anchor":case"fill":n=this.horizontalViewportLock?this.viewportRect.width:e.width,this.regionWidth=`${n}px`;break;case"content":n=this.regionRect.width,this.regionWidth="unset"}let i=0;switch(t){case"start":this.translateX=this.baseHorizontalOffset-n,this.horizontalViewportLock&&this.anchorRect.left>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.right));break;case"insetStart":this.translateX=this.baseHorizontalOffset-n+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.right));break;case"insetEnd":this.translateX=this.baseHorizontalOffset,this.horizontalViewportLock&&this.anchorRect.left<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.left));break;case"end":this.translateX=this.baseHorizontalOffset+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.left));break;case"center":if(i=(this.anchorRect.width-n)/2,this.translateX=this.baseHorizontalOffset+i,this.horizontalViewportLock){const t=this.anchorRect.left+i,e=this.anchorRect.right-i;t<this.viewportRect.left&&!(e>this.viewportRect.right)?this.translateX=this.translateX-(t-this.viewportRect.left):e>this.viewportRect.right&&!(t<this.viewportRect.left)&&(this.translateX=this.translateX-(e-this.viewportRect.right))}}this.horizontalPosition=t},this.setVerticalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let n=0;switch(this.verticalScaling){case"anchor":case"fill":n=this.verticalViewportLock?this.viewportRect.height:e.height,this.regionHeight=`${n}px`;break;case"content":n=this.regionRect.height,this.regionHeight="unset"}let i=0;switch(t){case"start":this.translateY=this.baseVerticalOffset-n,this.verticalViewportLock&&this.anchorRect.top>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.bottom));break;case"insetStart":this.translateY=this.baseVerticalOffset-n+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.bottom));break;case"insetEnd":this.translateY=this.baseVerticalOffset,this.verticalViewportLock&&this.anchorRect.top<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.top));break;case"end":this.translateY=this.baseVerticalOffset+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.top));break;case"center":if(i=(this.anchorRect.height-n)/2,this.translateY=this.baseVerticalOffset+i,this.verticalViewportLock){const t=this.anchorRect.top+i,e=this.anchorRect.bottom-i;t<this.viewportRect.top&&!(e>this.viewportRect.bottom)?this.translateY=this.translateY-(t-this.viewportRect.top):e>this.viewportRect.bottom&&!(t<this.viewportRect.top)&&(this.translateY=this.translateY-(e-this.viewportRect.bottom))}}this.verticalPosition=t},this.getPositioningOptions=t=>t?["insetStart","insetEnd"]:["start","end"],this.getAvailableSpace=(t,e,n,i,o,a)=>{const r=e-o,s=a-(e+i);switch(t){case"start":return r;case"insetStart":return r+i;case"insetEnd":return s+i;case"end":return s;case"center":return 2*Math.min(r,s)+i}},this.getNextRegionDimension=(t,e)=>{const n={height:void 0!==this.regionRect?this.regionRect.height:0,width:void 0!==this.regionRect?this.regionRect.width:0};return void 0!==t&&"fill"===this.horizontalScaling?n.width=this.getAvailableSpace(t,void 0!==this.anchorRect?this.anchorRect.left:0,void 0!==this.anchorRect?this.anchorRect.right:0,void 0!==this.anchorRect?this.anchorRect.width:0,void 0!==this.viewportRect?this.viewportRect.left:0,void 0!==this.viewportRect?this.viewportRect.right:0):"anchor"===this.horizontalScaling&&(n.width=void 0!==this.anchorRect?this.anchorRect.width:0),void 0!==e&&"fill"===this.verticalScaling?n.height=this.getAvailableSpace(e,void 0!==this.anchorRect?this.anchorRect.top:0,void 0!==this.anchorRect?this.anchorRect.bottom:0,void 0!==this.anchorRect?this.anchorRect.height:0,void 0!==this.viewportRect?this.viewportRect.top:0,void 0!==this.viewportRect?this.viewportRect.bottom:0):"anchor"===this.verticalScaling&&(n.height=void 0!==this.anchorRect?this.anchorRect.height:0),n},this.startAutoUpdateEventListeners=()=>{window.addEventListener(Op,this.update,{passive:!0}),window.addEventListener(Rp,this.update,{passive:!0,capture:!0}),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.observe(this.viewportElement)},this.stopAutoUpdateEventListeners=()=>{window.removeEventListener(Op,this.update),window.removeEventListener(Rp,this.update),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.unobserve(this.viewportElement)}}anchorChanged(){this.initialLayoutComplete&&(this.anchorElement=this.getAnchor())}viewportChanged(){this.initialLayoutComplete&&(this.viewportElement=this.getViewport())}horizontalPositioningModeChanged(){this.requestReset()}horizontalDefaultPositionChanged(){this.updateForAttributeChange()}horizontalViewportLockChanged(){this.updateForAttributeChange()}horizontalInsetChanged(){this.updateForAttributeChange()}horizontalThresholdChanged(){this.updateForAttributeChange()}horizontalScalingChanged(){this.updateForAttributeChange()}verticalPositioningModeChanged(){this.requestReset()}verticalDefaultPositionChanged(){this.updateForAttributeChange()}verticalViewportLockChanged(){this.updateForAttributeChange()}verticalInsetChanged(){this.updateForAttributeChange()}verticalThresholdChanged(){this.updateForAttributeChange()}verticalScalingChanged(){this.updateForAttributeChange()}fixedPlacementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}autoUpdateModeChanged(t,e){this.$fastController.isConnected&&this.initialLayoutComplete&&("auto"===t&&this.stopAutoUpdateEventListeners(),"auto"===e&&this.startAutoUpdateEventListeners())}anchorElementChanged(){this.requestReset()}viewportElementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}connectedCallback(){super.connectedCallback(),"auto"===this.autoUpdateMode&&this.startAutoUpdateEventListeners(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),"auto"===this.autoUpdateMode&&this.stopAutoUpdateEventListeners(),this.stopObservers(),this.disconnectResizeDetector()}adoptedCallback(){this.initialize()}disconnectResizeDetector(){null!==this.resizeDetector&&(this.resizeDetector.disconnect(),this.resizeDetector=null)}initializeResizeDetector(){this.disconnectResizeDetector(),this.resizeDetector=new window.ResizeObserver(this.handleResize)}updateForAttributeChange(){this.$fastController.isConnected&&this.initialLayoutComplete&&(this.forceUpdate=!0,this.update())}initialize(){this.initializeResizeDetector(),null===this.anchorElement&&(this.anchorElement=this.getAnchor()),this.requestReset()}requestReset(){this.$fastController.isConnected&&!1===this.pendingReset&&(this.setInitialState(),un.queueUpdate((()=>this.reset())),this.pendingReset=!0)}setInitialState(){this.initialLayoutComplete=!1,this.regionVisible=!1,this.translateX=0,this.translateY=0,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.viewportRect=void 0,this.regionRect=void 0,this.anchorRect=void 0,this.verticalPosition=void 0,this.horizontalPosition=void 0,this.style.opacity="0",this.style.pointerEvents="none",this.forceUpdate=!1,this.style.position=this.fixedPlacement?"fixed":"absolute",this.updatePositionClasses(),this.updateRegionStyle()}}Mp.intersectionService=new class{constructor(){this.intersectionDetector=null,this.observedElements=new Map,this.requestPosition=(t,e)=>{var n;null!==this.intersectionDetector&&(this.observedElements.has(t)?null===(n=this.observedElements.get(t))||void 0===n||n.push(e):(this.observedElements.set(t,[e]),this.intersectionDetector.observe(t)))},this.cancelRequestPosition=(t,e)=>{const n=this.observedElements.get(t);if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},this.initializeIntersectionDetector=()=>{Qe.IntersectionObserver&&(this.intersectionDetector=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"0px",threshold:[0,1]}))},this.handleIntersection=t=>{if(null===this.intersectionDetector)return;const e=[],n=[];t.forEach((t=>{var i;null===(i=this.intersectionDetector)||void 0===i||i.unobserve(t.target);const o=this.observedElements.get(t.target);void 0!==o&&(o.forEach((i=>{let o=e.indexOf(i);-1===o&&(o=e.length,e.push(i),n.push([])),n[o].push(t)})),this.observedElements.delete(t.target))})),e.forEach(((t,e)=>{t(n[e])}))},this.initializeIntersectionDetector()}},Cn([Fn],Mp.prototype,"anchor",void 0),Cn([Fn],Mp.prototype,"viewport",void 0),Cn([Fn({attribute:"horizontal-positioning-mode"})],Mp.prototype,"horizontalPositioningMode",void 0),Cn([Fn({attribute:"horizontal-default-position"})],Mp.prototype,"horizontalDefaultPosition",void 0),Cn([Fn({attribute:"horizontal-viewport-lock",mode:"boolean"})],Mp.prototype,"horizontalViewportLock",void 0),Cn([Fn({attribute:"horizontal-inset",mode:"boolean"})],Mp.prototype,"horizontalInset",void 0),Cn([Fn({attribute:"horizontal-threshold"})],Mp.prototype,"horizontalThreshold",void 0),Cn([Fn({attribute:"horizontal-scaling"})],Mp.prototype,"horizontalScaling",void 0),Cn([Fn({attribute:"vertical-positioning-mode"})],Mp.prototype,"verticalPositioningMode",void 0),Cn([Fn({attribute:"vertical-default-position"})],Mp.prototype,"verticalDefaultPosition",void 0),Cn([Fn({attribute:"vertical-viewport-lock",mode:"boolean"})],Mp.prototype,"verticalViewportLock",void 0),Cn([Fn({attribute:"vertical-inset",mode:"boolean"})],Mp.prototype,"verticalInset",void 0),Cn([Fn({attribute:"vertical-threshold"})],Mp.prototype,"verticalThreshold",void 0),Cn([Fn({attribute:"vertical-scaling"})],Mp.prototype,"verticalScaling",void 0),Cn([Fn({attribute:"fixed-placement",mode:"boolean"})],Mp.prototype,"fixedPlacement",void 0),Cn([Fn({attribute:"auto-update-mode"})],Mp.prototype,"autoUpdateMode",void 0),Cn([An],Mp.prototype,"anchorElement",void 0),Cn([An],Mp.prototype,"viewportElement",void 0),Cn([An],Mp.prototype,"initialLayoutComplete",void 0);const Np=kp.compose({baseName:"menu-item",template:(t,e)=>Qd`
    <template
        role="${t=>t.role}"
        aria-haspopup="${t=>t.hasSubmenu?"menu":void 0}"
        aria-checked="${t=>t.role!==xp?t.checked:void 0}"
        aria-disabled="${t=>t.disabled}"
        aria-expanded="${t=>t.expanded}"
        @keydown="${(t,e)=>t.handleMenuItemKeyDown(e.event)}"
        @click="${(t,e)=>t.handleMenuItemClick(e.event)}"
        @mouseover="${(t,e)=>t.handleMouseOver(e.event)}"
        @mouseout="${(t,e)=>t.handleMouseOut(e.event)}"
        class="${t=>t.disabled?"disabled":""} ${t=>t.expanded?"expanded":""} ${t=>`indent-${t.startColumnCount}`}"
    >
            ${Pp((t=>t.role===Ep),Qd`
                    <div part="input-container" class="input-container">
                        <span part="checkbox" class="checkbox">
                            <slot name="checkbox-indicator">
                                ${e.checkboxIndicator||""}
                            </slot>
                        </span>
                    </div>
                `)}
            ${Pp((t=>t.role===Ap),Qd`
                    <div part="input-container" class="input-container">
                        <span part="radio" class="radio">
                            <slot name="radio-indicator">
                                ${e.radioIndicator||""}
                            </slot>
                        </span>
                    </div>
                `)}
        </div>
        ${Ih(0,e)}
        <span class="content" part="content">
            <slot></slot>
        </span>
        ${kh(0,e)}
        ${Pp((t=>t.hasSubmenu),Qd`
                <div
                    part="expand-collapse-glyph-container"
                    class="expand-collapse-glyph-container"
                >
                    <span part="expand-collapse" class="expand-collapse">
                        <slot name="expand-collapse-indicator">
                            ${e.expandCollapseGlyph||""}
                        </slot>
                    </span>
                </div>
            `)}
        ${Pp((t=>t.expanded),Qd`
                <${t.tagFor(Mp)}
                    :anchorElement="${t=>t}"
                    vertical-positioning-mode="dynamic"
                    vertical-default-position="bottom"
                    vertical-inset="true"
                    horizontal-positioning-mode="dynamic"
                    horizontal-default-position="end"
                    class="submenu-region"
                    dir="${t=>t.currentDirection}"
                    @loaded="${t=>t.submenuLoaded()}"
                    ${Th("submenuRegion")}
                    part="submenu-region"
                >
                    <slot name="submenu"></slot>
                </${t.tagFor(Mp)}>
            `)}
    </template>
`,styles:(t,e)=>Td`
    ${ih("grid")} :host {
      contain: layout;
      overflow: visible;
      font-family: ${No};
      outline: none;
      box-sizing: border-box;
      height: calc(${Gh} * 1px);
      grid-template-columns: minmax(42px, auto) 1fr minmax(42px, auto);
      grid-template-rows: auto;
      justify-items: center;
      align-items: center;
      padding: 0;
      margin: 0 calc(${wo} * 1px);
      white-space: nowrap;
      color: ${Wr};
      fill: currentcolor;
      cursor: pointer;
      font-size: ${Lo};
      line-height: ${_o};
      border-radius: calc(${Po} * 1px);
      border: calc(${Ro} * 1px) solid transparent;
    }

    :host(.indent-0) {
      grid-template-columns: auto 1fr minmax(42px, auto);
    }

    :host(.indent-0) .content {
      grid-column: 1;
      grid-row: 1;
      margin-inline-start: 10px;
    }

    :host(.indent-2) {
      grid-template-columns: minmax(42px, auto) minmax(42px, auto) 1fr minmax(42px, auto) minmax(42px, auto);
    }

    :host(.indent-2) .content {
      grid-column: 3;
      grid-row: 1;
      margin-inline-start: 10px;
    }

    :host(.indent-2) .expand-collapse-glyph-container {
      grid-column: 5;
      grid-row: 1;
    }

    :host(.indent-2) .start {
      grid-column: 2;
    }

    :host(.indent-2) .end {
      grid-column: 4;
    }

    :host(:${Vh}) {
      border: calc(${Ro} * 1px) solid ${Br};
      box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
    }

    :host(:hover) {
      background: ${Tr};
    }

    :host([aria-checked='true']),
    :host(:active),
    :host(.expanded) {
      background: ${Dr};
      color: ${Wr};
    }

    :host([disabled]) {
      cursor: ${pp};
      opacity: ${To};
    }

    :host([disabled]:hover) .start,
    :host([disabled]:hover) .end,
    :host([disabled]:hover)::slotted(svg) {
      fill: currentcolor;
    }

    .content {
      grid-column-start: 2;
      justify-self: start;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .start,
    .end {
      display: flex;
      justify-content: center;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
      display: flex;
    }

    :host(:hover) .start,
    :host(:hover) .end,
    :host(:hover)::slotted(svg),
    :host(:active) .start,
    :host(:active) .end,
    :host(:active)::slotted(svg) {
      fill: ${Wr};
    }

    :host(.indent-1[aria-haspopup='menu']),
    :host(.indent-1[role='menuitemcheckbox']),
    :host(.indent-1[role='menuitemradio']) {
      display: grid;
      grid-template-columns: minmax(42px, auto) auto 1fr minmax(42px, auto) minmax(42px, auto);
      align-items: center;
      min-height: 32px;
    }

    :host(.indent-2:not([aria-haspopup='menu'])) .end {
      grid-column: 5;
    }

    :host .input-container,
    :host .expand-collapse-glyph-container {
      display: none;
    }

    :host([aria-haspopup='menu']) .expand-collapse-glyph-container,
    :host([role='menuitemcheckbox']) .input-container,
    :host([role='menuitemradio']) .input-container {
      display: grid;
      margin-inline-end: 10px;
    }

    :host([aria-haspopup='menu']) .content,
    :host([role='menuitemcheckbox']) .content,
    :host([role='menuitemradio']) .content {
      grid-column-start: 3;
    }

    :host([aria-haspopup='menu']) .end,
    :host([role='menuitemcheckbox']) .end,
    :host([role='menuitemradio']) .end {
      grid-column-start: 4;
    }

    :host .expand-collapse,
    :host .checkbox,
    :host .radio {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 20px;
      height: 20px;
      box-sizing: border-box;
      outline: none;
      margin-inline-start: 10px;
    }

    :host .checkbox {
      border-radius: calc(${Po} * 1px);
    }

    :host .radio {
      border-radius: 999px;
    }

    :host .checkbox-indicator,
    :host .radio-indicator,
    ::slotted([slot='checkbox-indicator']),
    ::slotted([slot='radio-indicator']) {
      display: none;
    }

    ::slotted([slot='end']:not(svg)) {
      margin-inline-end: 10px;
      color: ${zr};
    }

    :host([aria-checked='true']) .checkbox-indicator,
    :host([aria-checked='true']) ::slotted([slot='checkbox-indicator']) {
      width: 100%;
      height: 100%;
      display: block;
      fill: ${Wr};
      pointer-events: none;
    }

    :host([aria-checked='true']) .radio-indicator {
      display: block;
      pointer-events: none;
    }

    :host([aria-checked='true']) ::slotted([slot='radio-indicator']) {
      display: block;
      pointer-events: none;
    }
  `.withBehaviors(eh(Td`
        :host {
          forced-color-adjust: none;
          border-color: transparent;
          color: ${oh.ButtonText};
          fill: ${oh.ButtonText};
        }
        :host(:hover) {
          background: ${oh.Highlight};
          color: ${oh.HighlightText};
        }
        :host(:hover) .start,
        :host(:hover) .end,
        :host(:hover)::slotted(svg),
        :host(:active) .start,
        :host(:active) .end,
        :host(:active)::slotted(svg) {
          fill: ${oh.HighlightText};
        }

        :host(.expanded) {
          background: ${oh.Highlight};
          border-color: ${oh.Highlight};
          color: ${oh.HighlightText};
        }

        :host(:${Vh}) {
          background: ${oh.Highlight};
          border-color: ${oh.ButtonText};
          box-shadow: 0 0 0 calc(${Ro} * 1px) inset ${oh.HighlightText};
          color: ${oh.HighlightText};
          fill: currentcolor;
        }

        :host([disabled]),
        :host([disabled]:hover),
        :host([disabled]:hover) .start,
        :host([disabled]:hover) .end,
        :host([disabled]:hover)::slotted(svg) {
          background: ${oh.Canvas};
          color: ${oh.GrayText};
          fill: currentcolor;
          opacity: 1;
        }

        :host .expanded-toggle,
        :host .checkbox,
        :host .radio {
          border-color: ${oh.ButtonText};
          background: ${oh.HighlightText};
        }

        :host([checked='true']) .checkbox,
        :host([checked='true']) .radio {
          background: ${oh.HighlightText};
          border-color: ${oh.HighlightText};
        }

        :host(:hover) .expanded-toggle,
            :host(:hover) .checkbox,
            :host(:hover) .radio,
            :host(:${Vh}) .expanded-toggle,
            :host(:${Vh}) .checkbox,
            :host(:${Vh}) .radio,
            :host([checked="true"]:hover) .checkbox,
            :host([checked="true"]:hover) .radio,
            :host([checked="true"]:${Vh}) .checkbox,
            :host([checked="true"]:${Vh}) .radio {
          border-color: ${oh.HighlightText};
        }

        :host([aria-checked='true']) {
          background: ${oh.Highlight};
          color: ${oh.HighlightText};
        }

        :host([aria-checked='true']) .checkbox-indicator,
        :host([aria-checked='true']) ::slotted([slot='checkbox-indicator']),
        :host([aria-checked='true']) ::slotted([slot='radio-indicator']) {
          fill: ${oh.Highlight};
        }

        :host([aria-checked='true']) .radio-indicator {
          background: ${oh.Highlight};
        }
      `)),checkboxIndicator:'\n    <svg\n        aria-hidden="true"\n        part="checkbox-indicator"\n        class="checkbox-indicator"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n        />\n    </svg>\n  ',expandCollapseGlyph:'\n    <svg\n        viewBox="0 0 16 16"\n        xmlns="http://www.w3.org/2000/svg"\n        class="expand-collapse-glyph"\n        part="expand-collapse-glyph"\n    >\n        <path\n            d="M5.00001 12.3263C5.00124 12.5147 5.05566 12.699 5.15699 12.8578C5.25831 13.0167 5.40243 13.1437 5.57273 13.2242C5.74304 13.3047 5.9326 13.3354 6.11959 13.3128C6.30659 13.2902 6.4834 13.2152 6.62967 13.0965L10.8988 8.83532C11.0739 8.69473 11.2153 8.51658 11.3124 8.31402C11.4096 8.11146 11.46 7.88966 11.46 7.66499C11.46 7.44033 11.4096 7.21853 11.3124 7.01597C11.2153 6.81341 11.0739 6.63526 10.8988 6.49467L6.62967 2.22347C6.48274 2.10422 6.30501 2.02912 6.11712 2.00691C5.92923 1.9847 5.73889 2.01628 5.56823 2.09799C5.39757 2.17969 5.25358 2.30817 5.153 2.46849C5.05241 2.62882 4.99936 2.8144 5.00001 3.00369V12.3263Z"\n        />\n    </svg>\n  ',radioIndicator:'\n    <svg\n      aria-hidden="true"\n      part="radio-indicator"\n      class="radio-indicator"\n      viewBox="0 0 20 20"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <path\n          fill-rule="evenodd"\n          clip-rule="evenodd"\n          d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n      />\n    </svg>\n  '});class Lp extends hd{}Cn([Fn({mode:"boolean"})],Lp.prototype,"disabled",void 0);const _p=Lp.compose({baseName:"tab",template:(t,e)=>Qd`
    <template slot="tab" role="tab" aria-disabled="${t=>t.disabled}">
        <slot></slot>
    </template>
`,styles:(t,e)=>Td`
      ${ih("inline-flex")} :host {
        box-sizing: border-box;
        font-family: ${No};
        font-size: ${Lo};
        font-weight: 400;
        line-height: ${_o};
        height: calc(${Gh} * 1px);
        padding: 0 calc((6 + (${wo} * 2 * ${Io})) * 1px);
        color: ${Wr};
        border-radius: calc(${Po} * 1px);
        border: calc(${Ro} * 1px) solid transparent;
        align-items: center;
        justify-content: center;
        grid-row: 1;
        cursor: pointer;
      }

      :host([aria-selected='true']) {
        z-index: 2;
      }

      :host(:hover),
      :host(:active) {
        color: ${Wr};
      }

      :host(:${Vh}) {
        outline: none;
        border: calc(${Ro} * 1px) solid ${Br};
        box-shadow: 0 0 0 calc((${Mo} - ${Ro}) * 1px) ${Br};
      }

      :host(:focus) {
        outline: none;
      }

      :host(.vertical) {
        justify-content: end;
        grid-column: 2;
      }

      :host(.vertical[aria-selected='true']) {
        z-index: 2;
      }

      :host(.vertical:hover),
      :host(.vertical:active) {
        color: ${Wr};
      }

      :host(.vertical:hover[aria-selected='true']) {
      }
    `.withBehaviors(eh(Td`
          :host {
            forced-color-adjust: none;
            border-color: transparent;
            color: ${oh.ButtonText};
            fill: currentcolor;
          }
          :host(:hover),
          :host(.vertical:hover),
          :host([aria-selected='true']:hover) {
            background: ${oh.Highlight};
            color: ${oh.HighlightText};
            fill: currentcolor;
          }
          :host([aria-selected='true']) {
            background: ${oh.HighlightText};
            color: ${oh.Highlight};
            fill: currentcolor;
          }
          :host(:${Vh}) {
            border-color: ${oh.ButtonText};
            box-shadow: none;
          }
        `))});const Fp=class extends hd{}.compose({baseName:"tab-panel",template:(t,e)=>Qd`
    <template slot="tabpanel" role="tabpanel">
        <slot></slot>
    </template>
`,styles:(t,e)=>Td`
  ${ih("block")} :host {
    box-sizing: border-box;
    font-family: ${No};
    font-size: ${Fo};
    font-weight: 400;
    line-height: ${Ho};
    padding: 0 calc((6 + (${wo} * 2 * ${Io})) * 1px);
  }
`}),Hp="horizontal";class Bp extends hd{constructor(){super(...arguments),this.orientation=Hp,this.activeindicator=!0,this.showActiveIndicator=!0,this.prevActiveTabIndex=0,this.activeTabIndex=0,this.ticking=!1,this.change=()=>{this.$emit("change",this.activetab)},this.isDisabledElement=t=>"true"===t.getAttribute("aria-disabled"),this.isFocusableElement=t=>!this.isDisabledElement(t),this.setTabs=()=>{const t="gridColumn",e="gridRow",n=this.isHorizontal()?t:e;this.activeTabIndex=this.getActiveIndex(),this.showActiveIndicator=!1,this.tabs.forEach(((t,e)=>{if("tab"===t.slot){const n=this.activeTabIndex===e&&this.isFocusableElement(t);this.activeindicator&&this.isFocusableElement(t)&&(this.showActiveIndicator=!0);const i=this.tabIds[e],o=this.tabpanelIds[e];t.setAttribute("id",i),t.setAttribute("aria-selected",n?"true":"false"),t.setAttribute("aria-controls",o),t.addEventListener("click",this.handleTabClick),t.addEventListener("keydown",this.handleTabKeyDown),t.setAttribute("tabindex",n?"0":"-1"),n&&(this.activetab=t)}t.style.gridColumn="",t.style.gridRow="",t.style[n]=`${e+1}`,this.isHorizontal()?t.classList.remove("vertical"):t.classList.add("vertical")}))},this.setTabPanels=()=>{this.tabpanels.forEach(((t,e)=>{const n=this.tabIds[e],i=this.tabpanelIds[e];t.setAttribute("id",i),t.setAttribute("aria-labelledby",n),this.activeTabIndex!==e?t.setAttribute("hidden",""):t.removeAttribute("hidden")}))},this.handleTabClick=t=>{const e=t.currentTarget;1===e.nodeType&&this.isFocusableElement(e)&&(this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=this.tabs.indexOf(e),this.setComponent())},this.handleTabKeyDown=t=>{if(this.isHorizontal())switch(t.key){case ph:t.preventDefault(),this.adjustBackward(t);break;case fh:t.preventDefault(),this.adjustForward(t)}else switch(t.key){case gh:t.preventDefault(),this.adjustBackward(t);break;case hh:t.preventDefault(),this.adjustForward(t)}switch(t.key){case yh:t.preventDefault(),this.adjust(-this.activeTabIndex);break;case Ch:t.preventDefault(),this.adjust(this.tabs.length-this.activeTabIndex-1)}},this.adjustForward=t=>{const e=this.tabs;let n=0;for(n=this.activetab?e.indexOf(this.activetab)+1:1,n===e.length&&(n=0);n<e.length&&e.length>1;){if(this.isFocusableElement(e[n])){this.moveToTabByIndex(e,n);break}if(this.activetab&&n===e.indexOf(this.activetab))break;n+1>=e.length?n=0:n+=1}},this.adjustBackward=t=>{const e=this.tabs;let n=0;for(n=this.activetab?e.indexOf(this.activetab)-1:0,n=n<0?e.length-1:n;n>=0&&e.length>1;){if(this.isFocusableElement(e[n])){this.moveToTabByIndex(e,n);break}n-1<0?n=e.length-1:n-=1}},this.moveToTabByIndex=(t,e)=>{const n=t[e];this.activetab=n,this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=e,n.focus(),this.setComponent()}}orientationChanged(){this.$fastController.isConnected&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}activeidChanged(t,e){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.prevActiveTabIndex=this.tabs.findIndex((e=>e.id===t)),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabsChanged(){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabpanelsChanged(){this.$fastController.isConnected&&this.tabpanels.length<=this.tabs.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}getActiveIndex(){return void 0!==this.activeid?-1===this.tabIds.indexOf(this.activeid)?0:this.tabIds.indexOf(this.activeid):0}getTabIds(){return this.tabs.map((t=>{var e;return null!==(e=t.getAttribute("id"))&&void 0!==e?e:`tab-${be()}`}))}getTabPanelIds(){return this.tabpanels.map((t=>{var e;return null!==(e=t.getAttribute("id"))&&void 0!==e?e:`panel-${be()}`}))}setComponent(){this.activeTabIndex!==this.prevActiveTabIndex&&(this.activeid=this.tabIds[this.activeTabIndex],this.focusTab(),this.change())}isHorizontal(){return this.orientation===Hp}handleActiveIndicatorPosition(){this.showActiveIndicator&&this.activeindicator&&this.activeTabIndex!==this.prevActiveTabIndex&&(this.ticking?this.ticking=!1:(this.ticking=!0,this.animateActiveIndicator()))}animateActiveIndicator(){this.ticking=!0;const t=this.isHorizontal()?"gridColumn":"gridRow",e=this.isHorizontal()?"translateX":"translateY",n=this.isHorizontal()?"offsetLeft":"offsetTop",i=this.activeIndicatorRef[n];this.activeIndicatorRef.style[t]=`${this.activeTabIndex+1}`;const o=this.activeIndicatorRef[n];this.activeIndicatorRef.style[t]=`${this.prevActiveTabIndex+1}`;const a=o-i;this.activeIndicatorRef.style.transform=`${e}(${a}px)`,this.activeIndicatorRef.classList.add("activeIndicatorTransition"),this.activeIndicatorRef.addEventListener("transitionend",(()=>{this.ticking=!1,this.activeIndicatorRef.style[t]=`${this.activeTabIndex+1}`,this.activeIndicatorRef.style.transform=`${e}(0px)`,this.activeIndicatorRef.classList.remove("activeIndicatorTransition")}))}adjust(t){this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=xh(0,this.tabs.length-1,this.activeTabIndex+t),this.setComponent()}focusTab(){this.tabs[this.activeTabIndex].focus()}connectedCallback(){super.connectedCallback(),this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.activeTabIndex=this.getActiveIndex()}}Cn([Fn],Bp.prototype,"orientation",void 0),Cn([Fn],Bp.prototype,"activeid",void 0),Cn([An],Bp.prototype,"tabs",void 0),Cn([An],Bp.prototype,"tabpanels",void 0),Cn([Fn({mode:"boolean"})],Bp.prototype,"activeindicator",void 0),Cn([An],Bp.prototype,"activeIndicatorRef",void 0),Cn([An],Bp.prototype,"showActiveIndicator",void 0),wh(Bp,Dh);const Up=Bp.compose({baseName:"tabs",template:(t,e)=>Qd`
    <template class="${t=>t.orientation}">
        ${Ih(0,e)}
        <div class="tablist" part="tablist" role="tablist">
            <slot class="tab" name="tab" part="tab" ${Fh("tabs")}></slot>

            ${Pp((t=>t.showActiveIndicator),Qd`
                    <div
                        ${Th("activeIndicatorRef")}
                        class="activeIndicator"
                        part="activeIndicator"
                    ></div>
                `)}
        </div>
        ${kh(0,e)}
        <div class="tabpanel">
            <slot name="tabpanel" part="tabpanel" ${Fh("tabpanels")}></slot>
        </div>
    </template>
`,styles:(t,e)=>Td`
      ${ih("grid")} :host {
        box-sizing: border-box;
        font-family: ${No};
        font-size: ${Lo};
        line-height: ${_o};
        color: ${Wr};
        grid-template-columns: auto 1fr auto;
        grid-template-rows: auto 1fr;
      }

      .tablist {
        display: grid;
        grid-template-rows: auto auto;
        grid-template-columns: auto;
        position: relative;
        width: max-content;
        align-self: end;
      }

      .start,
      .end {
        align-self: center;
      }

      .activeIndicator {
        grid-row: 2;
        grid-column: 1;
        width: 20px;
        height: 3px;
        border-radius: calc(${Po} * 1px);
        justify-self: center;
        background: ${Za};
      }

      .activeIndicatorTransition {
        transition: transform 0.2s ease-in-out;
      }

      .tabpanel {
        grid-row: 2;
        grid-column-start: 1;
        grid-column-end: 4;
        position: relative;
      }

      :host(.vertical) {
        grid-template-rows: auto 1fr auto;
        grid-template-columns: auto 1fr;
      }

      :host(.vertical) .tablist {
        grid-row-start: 2;
        grid-row-end: 2;
        display: grid;
        grid-template-rows: auto;
        grid-template-columns: auto 1fr;
        position: relative;
        width: max-content;
        justify-self: end;
        width: 100%;
      }

      :host(.vertical) .tabpanel {
        grid-column: 2;
        grid-row-start: 1;
        grid-row-end: 4;
      }

      :host(.vertical) .end {
        grid-row: 3;
      }

      :host(.vertical) .activeIndicator {
        grid-column: 1;
        grid-row: 1;
        width: 3px;
        height: 20px;
        border-radius: calc(${Po} * 1px);
        align-self: center;
        background: ${Za};
      }

      :host(.vertical) .activeIndicatorTransition {
        transition: transform 0.2s linear;
      }
    `.withBehaviors(eh(Td`
          .activeIndicator,
          :host(.vertical) .activeIndicator {
            forced-color-adjust: none;
            background: ${oh.Highlight};
          }
        `))});class Vp extends hd{}class Gp extends(lp(Vp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Wp extends Gp{constructor(){super(),this.initialValue="on",this.keypressHandler=t=>{switch(t.key){case mh:case bh:this.checked=!this.checked}},this.clickHandler=t=>{this.disabled||this.readOnly||(this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly),this.readOnly?this.classList.add("readonly"):this.classList.remove("readonly")}checkedChanged(t,e){super.checkedChanged(t,e),this.checked?this.classList.add("checked"):this.classList.remove("checked")}}Cn([Fn({attribute:"readonly",mode:"boolean"})],Wp.prototype,"readOnly",void 0),Cn([An],Wp.prototype,"defaultSlottedNodes",void 0);class $p{constructor(t,e){this.cache=new WeakMap,this.ltr=t,this.rtl=e}bind(t){this.attach(t)}unbind(t){const e=this.cache.get(t);e&&Ao.unsubscribe(e)}attach(t){const e=this.cache.get(t)||new zp(this.ltr,this.rtl,t),n=Ao.getValueFor(t);Ao.subscribe(e),e.attach(n),this.cache.set(t,e)}}class zp{constructor(t,e,n){this.ltr=t,this.rtl=e,this.source=n,this.attached=null}handleChange({target:t,token:e}){this.attach(e.getValueFor(t))}attach(t){this.attached!==this[t]&&(null!==this.attached&&this.source.$fastController.removeStyles(this.attached),this.attached=this[t],null!==this.attached&&this.source.$fastController.addStyles(this.attached))}}const Kp=Wp.compose({baseName:"switch",template:(t,e)=>Qd`
    <template
        role="switch"
        aria-checked="${t=>t.checked}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        tabindex="${t=>t.disabled?null:0}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        class="${t=>t.checked?"checked":""}"
    >
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fh("defaultSlottedNodes")}></slot>
        </label>
        <div part="switch" class="switch">
            <slot name="switch">${e.switch||""}</slot>
        </div>
        <span class="status-message" part="status-message">
            <span class="checked-message" part="checked-message">
                <slot name="checked-message"></slot>
            </span>
            <span class="unchecked-message" part="unchecked-message">
                <slot name="unchecked-message"></slot>
            </span>
        </span>
    </template>
`,styles:(t,e)=>Td`
    :host([hidden]) {
      display: none;
    }

    ${ih("inline-flex")} :host {
      align-items: center;
      outline: none;
      font-family: ${No};
      margin: calc(${wo} * 1px) 0;
      ${""} user-select: none;
    }

    :host(.disabled) {
      opacity: ${To};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .switch,
    :host(.disabled) .switch {
      cursor: ${pp};
    }

    .switch {
      position: relative;
      outline: none;
      box-sizing: border-box;
      width: calc(((${Gh} / 2) + ${wo}) * 2px);
      height: calc(((${Gh} / 2) + ${wo}) * 1px);
      background: ${vr};
      border-radius: calc(${Gh} * 1px);
      border: calc(${Ro} * 1px) solid ${Lr};
    }

    :host(:enabled) .switch:hover {
      background: ${yr};
      border-color: ${_r};
      cursor: pointer;
    }

    :host(:enabled) .switch:active {
      background: ${Cr};
      border-color: ${Fr};
    }

    :host(:${Vh}) .switch {
      box-shadow: 0 0 0 2px ${Ya}, 0 0 0 4px ${Br};
      border-color: ${Br};
    }

    .checked-indicator {
      position: absolute;
      height: calc((${Gh} - (${wo} * 5.5)) * 1px);
      width: calc((${Gh} - (${wo} * 5.5)) * 1px);
      top: calc(${wo} * 1px);
      background: ${Wr};
      border-radius: 50%;
      transition: all 0.2s ease-in-out;
    }

    .status-message {
      color: ${Wr};
      cursor: pointer;
      font-size: ${Lo};
      line-height: ${_o};
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      color: ${Wr};
      font-size: ${Lo};
      line-height: ${_o};
      margin-inline-end: calc(${wo} * 2px + 2px);
      cursor: pointer;
    }

    ::slotted(*) {
      ${""} margin-inline-start: calc(${wo} * 2px + 2px);
    }

    :host([aria-checked='true']) .checked-indicator {
      background: ${nr};
    }

    :host([aria-checked='true']) .switch {
      background: ${Za};
    }

    :host([aria-checked='true']:enabled) .switch:hover {
      background: ${Xa};
    }

    :host([aria-checked='true']:enabled) .switch:hover .checked-indicator {
      background: ${ir};
    }

    :host([aria-checked='true']:enabled) .switch:active {
      background: ${Ja};
    }

    :host([aria-checked='true']:enabled) .switch:active .checked-indicator {
      background: ${or};
    }

    :host([aria-checked="true"]:${Vh}:enabled) .switch {
      box-shadow: 0 0 0 2px ${Ya}, 0 0 0 4px ${Br};
      border-color: transparent;
    }

    .unchecked-message {
      display: block;
    }

    .checked-message {
      display: none;
    }

    :host([aria-checked='true']) .unchecked-message {
      display: none;
    }

    :host([aria-checked='true']) .checked-message {
      display: block;
    }
  `.withBehaviors(new $p(Td`
        .checked-indicator {
          left: calc(${wo} * 1px);
        }

        :host([aria-checked='true']) .checked-indicator {
          left: calc((((${Gh} / 2) + ${wo}) + ${wo}) * 1px);
        }
      `,Td`
        .checked-indicator {
          right: calc(${wo} * 1px);
        }

        :host([aria-checked='true']) .checked-indicator {
          right: calc((((${Gh} / 2) + ${wo}) + ${wo}) * 1px);
        }
      `),eh(Td`
        .checked-indicator,
        :host(:enabled) .switch:active .checked-indicator {
          forced-color-adjust: none;
          background: ${oh.FieldText};
        }
        .switch {
          forced-color-adjust: none;
          background: ${oh.Field};
          border-color: ${oh.FieldText};
        }
        :host(:enabled) .switch:hover {
          background: ${oh.HighlightText};
          border-color: ${oh.Highlight};
        }
        :host(.checked) .switch {
          background: ${oh.Highlight};
          border-color: ${oh.Highlight};
        }
        :host(.checked:enabled) .switch:hover,
        :host(:enabled) .switch:active {
          background: ${oh.HighlightText};
          border-color: ${oh.Highlight};
        }
        :host(.checked) .checked-indicator {
          background: ${oh.HighlightText};
        }
        :host(.checked:enabled) .switch:hover .checked-indicator {
          background: ${oh.Highlight};
        }
        :host(:${Vh}) .switch {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.checked:${Vh}:enabled) .switch {
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .checked-indicator {
          background: ${oh.GrayText};
        }
        :host(.disabled) .switch {
          background: ${oh.Field};
          border-color: ${oh.GrayText};
        }
        .status-message,
        .label {
          color: ${oh.FieldText};
        }
      `)),switch:'\n    <span class="checked-indicator" part="checked-indicator"></span>\n  '});class Yp extends hd{}class jp extends(sp(Yp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}const qp="text";class Zp extends jp{constructor(){super(...arguments),this.type=qp}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly,this.validate())}autofocusChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.autofocus=this.autofocus,this.validate())}placeholderChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.placeholder=this.placeholder)}typeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type,this.validate())}listChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.setAttribute("list",this.list),this.validate())}maxlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.maxLength=this.maxlength,this.validate())}minlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.minLength=this.minlength,this.validate())}patternChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.pattern=this.pattern,this.validate())}sizeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.size=this.size)}spellcheckChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.spellcheck=this.spellcheck)}connectedCallback(){super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.validate(),this.autofocus&&un.queueUpdate((()=>{this.focus()}))}select(){this.control.select(),this.$emit("select")}handleTextInput(){this.value=this.control.value}handleChange(){this.$emit("change")}}Cn([Fn({attribute:"readonly",mode:"boolean"})],Zp.prototype,"readOnly",void 0),Cn([Fn({mode:"boolean"})],Zp.prototype,"autofocus",void 0),Cn([Fn],Zp.prototype,"placeholder",void 0),Cn([Fn],Zp.prototype,"type",void 0),Cn([Fn],Zp.prototype,"list",void 0),Cn([Fn({converter:Ln})],Zp.prototype,"maxlength",void 0),Cn([Fn({converter:Ln})],Zp.prototype,"minlength",void 0),Cn([Fn],Zp.prototype,"pattern",void 0),Cn([Fn({converter:Ln})],Zp.prototype,"size",void 0),Cn([Fn({mode:"boolean"})],Zp.prototype,"spellcheck",void 0),Cn([An],Zp.prototype,"defaultSlottedNodes",void 0);class Xp{}function Jp(t,e,n){return t.nodeType!==Node.TEXT_NODE||"string"==typeof t.nodeValue&&!!t.nodeValue.trim().length}wh(Xp,$h),wh(Zp,Dh,Xp);const Qp=(t,e)=>Td`
    :host([appearance='filled']) .root {
      background: ${pr};
      border-color: transparent;
    }

    :host([appearance='filled']:hover:not(.disabled)) .root {
      background: ${fr};
      border-color: transparent;
    }

    :host([appearance='filled']:focus-within:not(.disabled)) .root {
      border-color: transparent;
      box-shadow: none;
    }
    ${Td`
  :host([appearance='filled']:not(.disabled):active)::after,
  :host([appearance='filled']:not(.disabled):focus-within:not(:active))::after {
    content: '';
    position: absolute;
    bottom: 0;
    border-bottom: calc(${Mo} * 1px) solid ${Za};
    border-bottom-left-radius: calc(${Po} * 1px);
    border-bottom-right-radius: calc(${Po} * 1px);
    z-index: 2;
    transition: all 300ms cubic-bezier(0.1, 0.9, 0.2, 1);
  }

  :host([appearance='filled']:not(.disabled):active)::after {
    left: 50%;
    width: 40%;
    transform: translateX(-50%);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  :host([appearance='filled']:not(.disabled):focus-within:not(:active))::after {
    left: 0;
    width: 100%;
  }
`}
  `.withBehaviors(eh(Td`
        :host([appearance='filled']) .root {
          background: ${oh.Field};
          border-color: ${oh.FieldText};
        }
        :host([appearance='filled']:hover:not([disabled])) .root,
        :host([appearance='filled']:focus-within:not([disabled])) .root {
          background: ${oh.Field};
          border-color: ${oh.FieldText};
        }
        :host([appearance='filled']:active:not([disabled])) .root {
          background: ${oh.Field};
          border-color: ${oh.FieldText};
        }
        :host([appearance='filled']:not([disabled]):active)::after,
        :host([appearance='filled']:not([disabled]):focus-within:not(:active))::after {
          border-bottom-color: ${oh.Highlight};
        }
        :host([appearance='filled'][disabled]) .root {
          border-color: ${oh.GrayText};
          background: ${oh.Field};
        }
      `));class tf extends Zp{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="outline")}}Ed([Fn],tf.prototype,"appearance",void 0);const ef=tf.compose({baseName:"text-field",baseClass:Zp,template:(t,e)=>Qd`
    <template
        class="
            ${t=>t.readOnly?"readonly":""}
        "
    >
        <label
            part="label"
            for="control"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot
                ${Fh({property:"defaultSlottedNodes",filter:Jp})}
            ></slot>
        </label>
        <div class="root" part="root">
            ${Ih(0,e)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${t=>t.handleTextInput()}"
                @change="${t=>t.handleChange()}"
                ?autofocus="${t=>t.autofocus}"
                ?disabled="${t=>t.disabled}"
                list="${t=>t.list}"
                maxlength="${t=>t.maxlength}"
                minlength="${t=>t.minlength}"
                pattern="${t=>t.pattern}"
                placeholder="${t=>t.placeholder}"
                ?readonly="${t=>t.readOnly}"
                ?required="${t=>t.required}"
                size="${t=>t.size}"
                ?spellcheck="${t=>t.spellcheck}"
                :value="${t=>t.value}"
                type="${t=>t.type}"
                aria-atomic="${t=>t.ariaAtomic}"
                aria-busy="${t=>t.ariaBusy}"
                aria-controls="${t=>t.ariaControls}"
                aria-current="${t=>t.ariaCurrent}"
                aria-describedby="${t=>t.ariaDescribedby}"
                aria-details="${t=>t.ariaDetails}"
                aria-disabled="${t=>t.ariaDisabled}"
                aria-errormessage="${t=>t.ariaErrormessage}"
                aria-flowto="${t=>t.ariaFlowto}"
                aria-haspopup="${t=>t.ariaHaspopup}"
                aria-hidden="${t=>t.ariaHidden}"
                aria-invalid="${t=>t.ariaInvalid}"
                aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
                aria-label="${t=>t.ariaLabel}"
                aria-labelledby="${t=>t.ariaLabelledby}"
                aria-live="${t=>t.ariaLive}"
                aria-owns="${t=>t.ariaOwns}"
                aria-relevant="${t=>t.ariaRelevant}"
                aria-roledescription="${t=>t.ariaRoledescription}"
                ${Th("control")}
            />
            ${kh(0,e)}
        </div>
    </template>
`,styles:(t,e)=>Td`
    ${ih("inline-block")} :host {
      font-family: ${No};
      outline: none;
      user-select: none;
      position: relative;
    }

    .root {
      box-sizing: border-box;
      position: relative;
      display: flex;
      flex-direction: row;
      color: ${Wr};
      background: ${vr};
      border-radius: calc(${Po} * 1px);
      border: calc(${Ro} * 1px) solid ${wr};
      height: calc(${Gh} * 1px);
    }

    .control {
      -webkit-appearance: none;
      background: transparent;
      border: 0;
      height: calc(100% - 4px);
      width: 100%;
      margin-top: auto;
      margin-bottom: auto;
      border: none;
      padding: 0 calc(${wo} * 2px + 1px);
      color: ${Wr};
      font-family: inherit;
      font-size: ${Lo};
      line-height: ${_o};
    }

    .control:hover,
    .control:${Vh},
    .control:disabled,
    .control:active {
      outline: none;
    }

    .label {
      display: block;
      color: ${Wr};
      cursor: pointer;
      font-size: ${Lo};
      line-height: ${_o};
      margin-bottom: 4px;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .start,
    .end {
      display: flex;
      margin: auto;
      fill: currentcolor;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
    }

    .start {
      margin-inline-start: 11px;
    }

    .end {
      margin-inline-end: 11px;
    }

    :host(:hover:not(.disabled)) .root {
      background: ${yr};
      border-color: ${Pr};
    }

    :host(:focus-within:not(.disabled)) .root {
      border-color: ${Br};
      box-shadow: 0 0 0 1px ${Br} inset;
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${pp};
    }

    :host(.disabled) {
      opacity: ${To};
    }
  `.withBehaviors(tp("filled",Qp()),eh(Td`
        .root {
          forced-color-adjust: none;
          background: ${oh.Field};
          border-color: ${oh.FieldText};
        }
        :host(:hover:not(.disabled)) .root {
          background: ${oh.Field};
          border-color: ${oh.Highlight};
        }
        .start,
        .end {
          fill: ${oh.ButtonText};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .root {
          border-color: ${oh.GrayText};
          background: ${oh.Field};
        }
        :host(:focus-within:enabled) .root {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 1px ${oh.Highlight} inset;
        }
        .control {
          color: ${oh.ButtonText};
        }
        ::placeholder,
        ::-webkit-input-placeholder {
          color: ${oh.FieldText};
        }
        :host(.disabled) ::placeholder,
        :host(.disabled) ::-webkit-input-placeholder,
        :host([disabled]) .label {
          color: ${oh.GrayText};
        }
      `)),shadowOptions:{delegatesFocus:!0}});class nf extends hd{}class of extends(lp(nf)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class af extends of{constructor(){super(),this.initialValue="on",this.indeterminate=!1,this.keypressHandler=t=>{if(t.key===bh)this.checked=!this.checked},this.clickHandler=t=>{this.disabled||this.readOnly||(this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}}Cn([Fn({attribute:"readonly",mode:"boolean"})],af.prototype,"readOnly",void 0),Cn([An],af.prototype,"defaultSlottedNodes",void 0),Cn([An],af.prototype,"indeterminate",void 0);const rf=af.compose({baseName:"checkbox",template:(t,e)=>Qd`
    <template
        role="checkbox"
        aria-checked="${t=>t.checked}"
        aria-required="${t=>t.required}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        tabindex="${t=>t.disabled?null:0}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        class="${t=>t.readOnly?"readonly":""} ${t=>t.checked?"checked":""} ${t=>t.indeterminate?"indeterminate":""}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${e.checkedIndicator||""}
            </slot>
            <slot name="indeterminate-indicator">
                ${e.indeterminateIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fh("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(t,e)=>Td`
    ${ih("inline-flex")} :host {
      align-items: center;
      outline: none;
      margin: calc(${wo} * 1px) 0;
      ${""} user-select: none;
    }

    .control {
      position: relative;
      width: calc((${Gh} / 2 + ${wo}) * 1px);
      height: calc((${Gh} / 2 + ${wo}) * 1px);
      box-sizing: border-box;
      border-radius: calc(${Po} * 1px);
      border: calc(${Ro} * 1px) solid ${Lr};
      background: ${vr};
      outline: none;
      cursor: pointer;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      font-family: ${No};
      color: ${Wr};
      ${""} padding-inline-start: calc(${wo} * 2px + 2px);
      margin-inline-end: calc(${wo} * 2px + 2px);
      cursor: pointer;
      font-size: ${Lo};
      line-height: ${_o};
    }

    .checked-indicator {
      width: 100%;
      height: 100%;
      display: block;
      fill: ${Wr};
      opacity: 0;
      pointer-events: none;
    }

    .indeterminate-indicator {
      border-radius: calc((${Po} / 2) * 1px);
      background: ${Wr};
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      height: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
    }

    :host(:enabled) .control:hover {
      background: ${yr};
      border-color: ${_r};
    }

    :host(:enabled) .control:active {
      background: ${Cr};
      border-color: ${Fr};
    }

    :host(:${Vh}) .control {
      box-shadow: 0 0 0 2px ${Ya}, 0 0 0 4px ${Br};
      border-color: ${Br};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${pp};
    }

    :host(.checked:not(.indeterminate)) .checked-indicator,
    :host(.indeterminate) .indeterminate-indicator {
      opacity: 1;
    }

    :host(.disabled) {
      opacity: ${To};
    }
  `.withBehaviors(eh(Td`
        .control {
          forced-color-adjust: none;
          border-color: ${oh.FieldText};
          background: ${oh.Field};
        }
        :host(:enabled) .control:hover,
        .control:active {
          border-color: ${oh.Highlight};
          background: ${oh.Field};
        }
        .checked-indicator {
          fill: ${oh.FieldText};
        }
        .indeterminate-indicator {
          background: ${oh.FieldText};
        }
        :host(:${Vh}) .control {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.checked:${Vh}:enabled) .control {
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.checked) .control {
          background: ${oh.Highlight};
          border-color: ${oh.Highlight};
        }
        :host(.checked) .control:hover,
        .control:active {
          background: ${oh.HighlightText};
        }
        :host(.checked) .checked-indicator {
          fill: ${oh.HighlightText};
        }
        :host(.checked) .control:hover .checked-indicator {
          fill: ${oh.Highlight};
        }
        :host(.checked) .indeterminate-indicator {
          background: ${oh.HighlightText};
        }
        :host(.checked) .control:hover .indeterminate-indicator {
          background: ${oh.Highlight};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .control {
          forced-color-adjust: none;
          border-color: ${oh.GrayText};
          background: ${oh.Field};
        }
        :host(.disabled) .indeterminate-indicator,
        :host(.checked.disabled) .control:hover .indeterminate-indicator {
          forced-color-adjust: none;
          background: ${oh.GrayText};
        }
        :host(.disabled) .checked-indicator,
        :host(.checked.disabled) .control:hover .checked-indicator {
          forced-color-adjust: none;
          fill: ${oh.GrayText};
        }
      `)),checkedIndicator:'\n    <svg\n        aria-hidden="true"\n        part="checked-indicator"\n        class="checked-indicator"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n        />\n    </svg>\n  ',indeterminateIndicator:'\n    <div part="indeterminate-indicator" class="indeterminate-indicator"></div>\n  '});function sf(t){return Bh(t)&&("option"===t.getAttribute("role")||t instanceof HTMLOptionElement)}class lf extends hd{constructor(t,e,n,i){super(),this.defaultSelected=!1,this.dirtySelected=!1,this.selected=this.defaultSelected,this.dirtyValue=!1,t&&(this.textContent=t),e&&(this.initialValue=e),n&&(this.defaultSelected=n),i&&(this.selected=i),this.proxy=new Option(`${this.textContent}`,this.initialValue,this.defaultSelected,this.selected),this.proxy.disabled=this.disabled}checkedChanged(t,e){this.ariaChecked="boolean"!=typeof e?null:e?"true":"false"}contentChanged(t,e){this.proxy instanceof HTMLOptionElement&&(this.proxy.textContent=this.textContent),this.$emit("contentchange",null,{bubbles:!0})}defaultSelectedChanged(){this.dirtySelected||(this.selected=this.defaultSelected,this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.defaultSelected))}disabledChanged(t,e){this.ariaDisabled=this.disabled?"true":"false",this.proxy instanceof HTMLOptionElement&&(this.proxy.disabled=this.disabled)}selectedAttributeChanged(){this.defaultSelected=this.selectedAttribute,this.proxy instanceof HTMLOptionElement&&(this.proxy.defaultSelected=this.defaultSelected)}selectedChanged(){this.ariaSelected=this.selected?"true":"false",this.dirtySelected||(this.dirtySelected=!0),this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.selected)}initialValueChanged(t,e){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}get label(){var t;return null!==(t=this.value)&&void 0!==t?t:this.text}get text(){var t,e;return null!==(e=null===(t=this.textContent)||void 0===t?void 0:t.replace(/\s+/g," ").trim())&&void 0!==e?e:""}set value(t){const e=`${null!=t?t:""}`;this._value=e,this.dirtyValue=!0,this.proxy instanceof HTMLOptionElement&&(this.proxy.value=e),En.notify(this,"value")}get value(){var t;return En.track(this,"value"),null!==(t=this._value)&&void 0!==t?t:this.text}get form(){return this.proxy?this.proxy.form:null}}Cn([An],lf.prototype,"checked",void 0),Cn([An],lf.prototype,"content",void 0),Cn([An],lf.prototype,"defaultSelected",void 0),Cn([Fn({mode:"boolean"})],lf.prototype,"disabled",void 0),Cn([Fn({attribute:"selected",mode:"boolean"})],lf.prototype,"selectedAttribute",void 0),Cn([An],lf.prototype,"selected",void 0),Cn([Fn({attribute:"value",mode:"fromView"})],lf.prototype,"initialValue",void 0);class cf{}Cn([An],cf.prototype,"ariaChecked",void 0),Cn([An],cf.prototype,"ariaPosInSet",void 0),Cn([An],cf.prototype,"ariaSelected",void 0),Cn([An],cf.prototype,"ariaSetSize",void 0),wh(cf,$h),wh(lf,Dh,cf);class uf extends hd{constructor(){super(...arguments),this._options=[],this.selectedIndex=-1,this.selectedOptions=[],this.shouldSkipFocus=!1,this.typeaheadBuffer="",this.typeaheadExpired=!0,this.typeaheadTimeout=-1}get firstSelectedOption(){var t;return null!==(t=this.selectedOptions[0])&&void 0!==t?t:null}get hasSelectableOptions(){return this.options.length>0&&!this.options.every((t=>t.disabled))}get length(){var t,e;return null!==(e=null===(t=this.options)||void 0===t?void 0:t.length)&&void 0!==e?e:0}get options(){return En.track(this,"options"),this._options}set options(t){this._options=t,En.notify(this,"options")}get typeAheadExpired(){return this.typeaheadExpired}set typeAheadExpired(t){this.typeaheadExpired=t}clickHandler(t){const e=t.target.closest("option,[role=option]");if(e&&!e.disabled)return this.selectedIndex=this.options.indexOf(e),!0}focusAndScrollOptionIntoView(t=this.firstSelectedOption){this.contains(document.activeElement)&&null!==t&&(t.focus(),requestAnimationFrame((()=>{t.scrollIntoView({block:"nearest"})})))}focusinHandler(t){this.shouldSkipFocus||t.target!==t.currentTarget||(this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}getTypeaheadMatches(){const t=this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),e=new RegExp(`^${t}`,"gi");return this.options.filter((t=>t.text.trim().match(e)))}getSelectableIndex(t=this.selectedIndex,e){const n=t>e?-1:t<e?1:0,i=t+n;let o=null;switch(n){case-1:o=this.options.reduceRight(((t,e,n)=>!t&&!e.disabled&&n<i?e:t),o);break;case 1:o=this.options.reduce(((t,e,n)=>!t&&!e.disabled&&n>i?e:t),o)}return this.options.indexOf(o)}handleChange(t,e){if("selected"===e)uf.slottedOptionFilter(t)&&(this.selectedIndex=this.options.indexOf(t)),this.setSelectedOptions()}handleTypeAhead(t){this.typeaheadTimeout&&window.clearTimeout(this.typeaheadTimeout),this.typeaheadTimeout=window.setTimeout((()=>this.typeaheadExpired=!0),uf.TYPE_AHEAD_TIMEOUT_MS),t.length>1||(this.typeaheadBuffer=`${this.typeaheadExpired?"":this.typeaheadBuffer}${t}`)}keydownHandler(t){if(this.disabled)return!0;this.shouldSkipFocus=!1;const e=t.key;switch(e){case yh:t.shiftKey||(t.preventDefault(),this.selectFirstOption());break;case hh:t.shiftKey||(t.preventDefault(),this.selectNextOption());break;case gh:t.shiftKey||(t.preventDefault(),this.selectPreviousOption());break;case Ch:t.preventDefault(),this.selectLastOption();break;case"Tab":return this.focusAndScrollOptionIntoView(),!0;case mh:case vh:return!0;case bh:if(this.typeaheadExpired)return!0;default:return 1===e.length&&this.handleTypeAhead(`${e}`),!0}}mousedownHandler(t){return this.shouldSkipFocus=!this.contains(document.activeElement),!0}multipleChanged(t,e){this.ariaMultiSelectable=e?"true":null}selectedIndexChanged(t,e){var n;if(this.hasSelectableOptions){if((null===(n=this.options[this.selectedIndex])||void 0===n?void 0:n.disabled)&&"number"==typeof t){const n=this.getSelectableIndex(t,e),i=n>-1?n:t;return this.selectedIndex=i,void(e===i&&this.selectedIndexChanged(e,i))}this.setSelectedOptions()}else this.selectedIndex=-1}selectedOptionsChanged(t,e){var n;const i=e.filter(uf.slottedOptionFilter);null===(n=this.options)||void 0===n||n.forEach((t=>{const e=En.getNotifier(t);e.unsubscribe(this,"selected"),t.selected=i.includes(t),e.subscribe(this,"selected")}))}selectFirstOption(){var t,e;this.disabled||(this.selectedIndex=null!==(e=null===(t=this.options)||void 0===t?void 0:t.findIndex((t=>!t.disabled)))&&void 0!==e?e:-1)}selectLastOption(){this.disabled||(this.selectedIndex=function(t,e){let n=t.length;for(;n--;)if(e(t[n],n,t))return n;return-1}(this.options,(t=>!t.disabled)))}selectNextOption(){!this.disabled&&this.selectedIndex<this.options.length-1&&(this.selectedIndex+=1)}selectPreviousOption(){!this.disabled&&this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1)}setDefaultSelectedOption(){var t,e;this.selectedIndex=null!==(e=null===(t=this.options)||void 0===t?void 0:t.findIndex((t=>t.defaultSelected)))&&void 0!==e?e:-1}setSelectedOptions(){var t,e,n;(null===(t=this.options)||void 0===t?void 0:t.length)&&(this.selectedOptions=[this.options[this.selectedIndex]],this.ariaActiveDescendant=null!==(n=null===(e=this.firstSelectedOption)||void 0===e?void 0:e.id)&&void 0!==n?n:"",this.focusAndScrollOptionIntoView())}slottedOptionsChanged(t,e){this.options=e.reduce(((t,e)=>(sf(e)&&t.push(e),t)),[]);const n=`${this.options.length}`;this.options.forEach(((t,e)=>{t.id||(t.id=be("option-")),t.ariaPosInSet=`${e+1}`,t.ariaSetSize=n})),this.$fastController.isConnected&&(this.setSelectedOptions(),this.setDefaultSelectedOption())}typeaheadBufferChanged(t,e){if(this.$fastController.isConnected){const t=this.getTypeaheadMatches();if(t.length){const e=this.options.indexOf(t[0]);e>-1&&(this.selectedIndex=e)}this.typeaheadExpired=!1}}}uf.slottedOptionFilter=t=>sf(t)&&!t.hidden,uf.TYPE_AHEAD_TIMEOUT_MS=1e3,Cn([Fn({mode:"boolean"})],uf.prototype,"disabled",void 0),Cn([An],uf.prototype,"selectedIndex",void 0),Cn([An],uf.prototype,"selectedOptions",void 0),Cn([An],uf.prototype,"slottedOptions",void 0),Cn([An],uf.prototype,"typeaheadBuffer",void 0);class df{}Cn([An],df.prototype,"ariaActiveDescendant",void 0),Cn([An],df.prototype,"ariaDisabled",void 0),Cn([An],df.prototype,"ariaExpanded",void 0),Cn([An],df.prototype,"ariaMultiSelectable",void 0),wh(df,$h),wh(uf,df);class hf extends uf{constructor(){super(...arguments),this.activeIndex=-1,this.rangeStartIndex=-1}get activeOption(){return this.options[this.activeIndex]}get checkedOptions(){var t;return null===(t=this.options)||void 0===t?void 0:t.filter((t=>t.checked))}get firstSelectedOptionIndex(){return this.options.indexOf(this.firstSelectedOption)}activeIndexChanged(t,e){var n,i;this.ariaActiveDescendant=null!==(i=null===(n=this.options[e])||void 0===n?void 0:n.id)&&void 0!==i?i:"",this.focusAndScrollOptionIntoView()}checkActiveIndex(){if(!this.multiple)return;const t=this.activeOption;t&&(t.checked=!0)}checkFirstOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex+1),this.options.forEach(((t,e)=>{t.checked=Eh(e,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex=0,this.checkActiveIndex()}checkLastOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((t,e)=>{t.checked=Eh(e,this.rangeStartIndex,this.options.length)}))):this.uncheckAllOptions(),this.activeIndex=this.options.length-1,this.checkActiveIndex()}connectedCallback(){super.connectedCallback(),this.addEventListener("focusout",this.focusoutHandler)}disconnectedCallback(){this.removeEventListener("focusout",this.focusoutHandler),super.disconnectedCallback()}checkNextOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((t,e)=>{t.checked=Eh(e,this.rangeStartIndex,this.activeIndex+1)}))):this.uncheckAllOptions(),this.activeIndex+=this.activeIndex<this.options.length-1?1:0,this.checkActiveIndex()}checkPreviousOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),1===this.checkedOptions.length&&(this.rangeStartIndex+=1),this.options.forEach(((t,e)=>{t.checked=Eh(e,this.activeIndex,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex-=this.activeIndex>0?1:0,this.checkActiveIndex()}clickHandler(t){var e;if(!this.multiple)return super.clickHandler(t);const n=null===(e=t.target)||void 0===e?void 0:e.closest("[role=option]");return n&&!n.disabled?(this.uncheckAllOptions(),this.activeIndex=this.options.indexOf(n),this.checkActiveIndex(),this.toggleSelectedForAllCheckedOptions(),!0):void 0}focusAndScrollOptionIntoView(){super.focusAndScrollOptionIntoView(this.activeOption)}focusinHandler(t){if(!this.multiple)return super.focusinHandler(t);this.shouldSkipFocus||t.target!==t.currentTarget||(this.uncheckAllOptions(),-1===this.activeIndex&&(this.activeIndex=-1!==this.firstSelectedOptionIndex?this.firstSelectedOptionIndex:0),this.checkActiveIndex(),this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}focusoutHandler(t){this.multiple&&this.uncheckAllOptions()}keydownHandler(t){if(!this.multiple)return super.keydownHandler(t);if(this.disabled)return!0;const{key:e,shiftKey:n}=t;switch(this.shouldSkipFocus=!1,e){case yh:return void this.checkFirstOption(n);case hh:return void this.checkNextOption(n);case gh:return void this.checkPreviousOption(n);case Ch:return void this.checkLastOption(n);case"Tab":return this.focusAndScrollOptionIntoView(),!0;case vh:return this.uncheckAllOptions(),this.checkActiveIndex(),!0;case bh:if(t.preventDefault(),this.typeAheadExpired)return void this.toggleSelectedForAllCheckedOptions();default:return 1===e.length&&this.handleTypeAhead(`${e}`),!0}}mousedownHandler(t){if(t.offsetX>=0&&t.offsetX<=this.scrollWidth)return super.mousedownHandler(t)}multipleChanged(t,e){var n;this.ariaMultiSelectable=e?"true":null,null===(n=this.options)||void 0===n||n.forEach((t=>{t.checked=!e&&void 0})),this.setSelectedOptions()}setSelectedOptions(){this.multiple?this.$fastController.isConnected&&this.options&&(this.selectedOptions=this.options.filter((t=>t.selected)),this.focusAndScrollOptionIntoView()):super.setSelectedOptions()}sizeChanged(t,e){var n;const i=Math.max(0,parseInt(null!==(n=null==e?void 0:e.toFixed())&&void 0!==n?n:"",10));i!==e&&un.queueUpdate((()=>{this.size=i}))}toggleSelectedForAllCheckedOptions(){const t=this.checkedOptions.filter((t=>!t.disabled)),e=!t.every((t=>t.selected));t.forEach((t=>t.selected=e)),this.selectedIndex=this.options.indexOf(t[t.length-1]),this.setSelectedOptions()}typeaheadBufferChanged(t,e){if(this.multiple){if(this.$fastController.isConnected){const t=this.getTypeaheadMatches(),e=this.options.indexOf(t[0]);e>-1&&(this.activeIndex=e,this.uncheckAllOptions(),this.checkActiveIndex()),this.typeAheadExpired=!1}}else super.typeaheadBufferChanged(t,e)}uncheckAllOptions(t=!1){this.options.forEach((t=>t.checked=!this.multiple&&void 0)),t||(this.rangeStartIndex=-1)}}Cn([An],hf.prototype,"activeIndex",void 0),Cn([Fn({mode:"boolean"})],hf.prototype,"multiple",void 0),Cn([Fn({converter:Ln})],hf.prototype,"size",void 0);const pf=uf.compose({baseName:"listbox",template:(t,e)=>Qd`
    <template
        aria-activedescendant="${t=>t.ariaActiveDescendant}"
        aria-multiselectable="${t=>t.ariaMultiSelectable}"
        class="listbox"
        role="listbox"
        tabindex="${t=>t.disabled?null:"0"}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        @focusin="${(t,e)=>t.focusinHandler(e.event)}"
        @keydown="${(t,e)=>t.keydownHandler(e.event)}"
        @mousedown="${(t,e)=>t.mousedownHandler(e.event)}"
    >
        <slot
            ${Fh({filter:hf.slottedOptionFilter,flatten:!0,property:"slottedOptions"})}
        ></slot>
    </template>
`,styles:(t,e)=>Td`
    ${ih("inline-flex")} :host {
      background: ${Va};
      border: calc(${Ro} * 1px) solid ${wr};
      border-radius: calc(${Po} * 1px);
      box-sizing: border-box;
      flex-direction: column;
      padding: calc(${wo} * 1px) 0;
    }

    :host(:focus-within:not([disabled])) {
      border-color: ${Br};
      box-shadow: 0 0 0 1px ${Br} inset;
    }
  `.withBehaviors(eh(Td`
        :host(:${Vh}) ::slotted([aria-selected="true"][role="option"]) {
          background: ${oh.Highlight};
          border-color: ${oh.ButtonText};
          box-shadow: 0 0 0 calc(${Mo} * 1px) inset ${oh.HighlightText};
          color: ${oh.HighlightText};
          fill: currentcolor;
        }

        :host(:${Vh}) ::slotted([aria-selected="true"][role="option"]) {
          background: ${oh.Highlight};
          border-color: ${oh.ButtonText};
          box-shadow: 0 0 0 calc(${Mo} * 1px) inset ${oh.HighlightText};
          color: ${oh.HighlightText};
          fill: currentcolor;
        }

        ::slotted([role='option']:not([aria-selected='true']):not([disabled]):hover) {
          forced-color-adjust: none;
          color: ${oh.ButtonText};
          background: ${oh.ButtonFace};
          border-color: ${oh.Highlight};
          box-shadow: none;
        }
      `))}),ff=lf.compose({baseName:"option",template:(t,e)=>Qd`
    <template
        aria-checked="${t=>t.ariaChecked}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-posinset="${t=>t.ariaPosInSet}"
        aria-selected="${t=>t.ariaSelected}"
        aria-setsize="${t=>t.ariaSetSize}"
        class="${t=>[t.checked&&"checked",t.selected&&"selected",t.disabled&&"disabled"].filter(Boolean).join(" ")}"
        role="option"
    >
        ${Ih(0,e)}
        <span class="content" part="content">
            <slot ${Fh("content")}></slot>
        </span>
        ${kh(0,e)}
    </template>
`,styles:(t,e)=>Td`
    ${ih("inline-flex")} :host {
      font-family: ${No};
      border-radius: calc(${Po} * 1px);
      border: calc(${Mo} * 1px) solid transparent;
      box-sizing: border-box;
      color: ${Wr};
      cursor: pointer;
      fill: currentcolor;
      font-size: ${Lo};
      height: calc(${Gh} * 1px);
      line-height: ${_o};
      margin: 0 calc(${wo} * 1px);
      outline: none;
      overflow: hidden;
      align-items: center;
      padding: 0 calc(${wo} * 2.25px);
      user-select: none;
      white-space: nowrap;
    }

    :host(:${Vh}) {
      box-shadow: 0 0 0 calc(${Mo} * 1px) inset ${Vr};
      border-color: ${Br};
      background: ${Qa};
      color: ${ar};
    }

    :host([aria-selected='true']) {
      background: ${Za};
      color: ${nr};
    }

    :host(:hover) {
      background: ${Xa};
      color: ${ir};
    }

    :host(:active) {
      background: ${Ja};
      color: ${or};
    }

    :host(:not([aria-selected='true']):hover) {
      background: ${fr};
      color: ${Wr};
    }

    :host(:not([aria-selected='true']):active) {
      background: ${gr};
      color: ${Wr};
    }

    :host([disabled]) {
      cursor: ${pp};
      opacity: ${To};
    }

    :host([disabled]:hover) {
      background-color: inherit;
    }

    .content {
      grid-column-start: 2;
      justify-self: start;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .start,
    .end,
    ::slotted(svg) {
      display: flex;
    }

    ::slotted(svg) {
      ${""}
      height: calc(${wo} * 4px);
      width: calc(${wo} * 4px);
    }

    ::slotted([slot='end']) {
      margin-inline-start: 1ch;
    }

    ::slotted([slot='start']) {
      margin-inline-end: 1ch;
    }
  `.withBehaviors(eh(Td`
        :host {
          border-color: transparent;
          color: ${oh.ButtonText};
          forced-color-adjust: none;
        }

        :host(:not([aria-selected='true']):hover),
        :host([aria-selected='true']) {
          background: ${oh.Highlight};
          color: ${oh.HighlightText};
        }

        :host([disabled]),
        :host([disabled]:not([aria-selected='true']):hover) {
          background: ${oh.Canvas};
          color: ${oh.GrayText};
          fill: currentcolor;
          opacity: 1;
        }
      `))});class gf extends hd{}class mf extends(lp(gf)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class vf extends mf{constructor(){super(),this.initialValue="on",this.keypressHandler=t=>{if(t.key!==bh)return!0;this.checked||this.readOnly||(this.checked=!0)},this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){var t;this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=null!==(t=this.defaultChecked)&&void 0!==t&&t,this.dirtyChecked=!1))}connectedCallback(){var t,e;super.connectedCallback(),this.validate(),"radiogroup"!==(null===(t=this.parentElement)||void 0===t?void 0:t.getAttribute("role"))&&null===this.getAttribute("tabindex")&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=null!==(e=this.defaultChecked)&&void 0!==e&&e,this.dirtyChecked=!1))}isInsideRadioGroup(){return null!==this.closest("[role=radiogroup]")}clickHandler(t){this.disabled||this.readOnly||this.checked||(this.checked=!0)}}Cn([Fn({attribute:"readonly",mode:"boolean"})],vf.prototype,"readOnly",void 0),Cn([An],vf.prototype,"name",void 0),Cn([An],vf.prototype,"defaultSlottedNodes",void 0);const yf=vf.compose({baseName:"radio",template:(t,e)=>Qd`
    <template
        role="radio"
        class="${t=>t.checked?"checked":""} ${t=>t.readOnly?"readonly":""}"
        aria-checked="${t=>t.checked}"
        aria-required="${t=>t.required}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${e.checkedIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fh("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(t,e)=>Td`
    ${ih("inline-flex")} :host {
      --input-size: calc((${Gh} / 2) + ${wo});
      align-items: center;
      outline: none;
      margin: calc(${wo} * 1px) 0;
      ${""} user-select: none;
      position: relative;
      flex-direction: row;
      transition: all 0.2s ease-in-out;
    }

    .control {
      position: relative;
      width: calc(var(--input-size) * 1px);
      height: calc(var(--input-size) * 1px);
      box-sizing: border-box;
      border-radius: 50%;
      border: calc(${Ro} * 1px) solid ${Lr};
      background: ${vr};
      outline: none;
      cursor: pointer;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      font-family: ${No};
      color: ${Wr};
      ${""} padding-inline-start: calc(${wo} * 2px + 2px);
      margin-inline-end: calc(${wo} * 2px + 2px);
      cursor: pointer;
      font-size: ${Lo};
      line-height: ${_o};
    }

    .control,
    .checked-indicator {
      flex-shrink: 0;
    }

    .checked-indicator {
      position: absolute;
      top: 5px;
      left: 5px;
      right: 5px;
      bottom: 5px;
      border-radius: 50%;
      display: inline-block;
      background: ${Wr};
      fill: ${Wr};
      opacity: 0;
      pointer-events: none;
    }

    :host(:enabled) .control:hover {
      background: ${yr};
      border-color: ${_r};
    }

    :host(:enabled) .control:active {
      background: ${Cr};
      border-color: ${Fr};
    }

    :host(:${Vh}) .control {
      box-shadow: 0 0 0 2px ${Ya}, 0 0 0 4px ${Br};
      border-color: ${Br};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${pp};
    }

    :host(.checked) .checked-indicator {
      opacity: 1;
    }

    :host(.disabled) {
      opacity: ${To};
    }
  `.withBehaviors(eh(Td`
        .control {
          forced-color-adjust: none;
          border-color: ${oh.FieldText};
          background: ${oh.Field};
        }
        :host(:enabled) .control:hover,
        .control:active {
          border-color: ${oh.Highlight};
          background: ${oh.Field};
        }
        :host(:${Vh}) .control {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.checked:${Vh}:enabled) .control {
          border-color: ${oh.Highlight};
          box-shadow: 0 0 0 2px ${oh.Field}, 0 0 0 4px ${oh.FieldText};
        }
        :host(.checked:enabled) .control:hover,
        .control:active {
          border-color: ${oh.Highlight};
          background: ${oh.Highlight};
        }
        :host(.checked) .checked-indicator {
          background: ${oh.Highlight};
          fill: ${oh.Highlight};
        }
        :host(.checked) .control:hover .checked-indicator {
          background: ${oh.HighlightText};
          fill: ${oh.HighlightText};
        }
        :host(.disabled) {
          forced-color-adjust: none;
          opacity: 1;
        }
        :host(.disabled) .label {
          color: ${oh.GrayText};
        }
        :host(.disabled) .control,
        :host(.checked.disabled) .control:hover,
        .control:active {
          background: ${oh.Field};
          border-color: ${oh.GrayText};
        }
        :host(.disabled) .checked-indicator,
        :host(.checked.disabled) .control:hover .checked-indicator {
          fill: ${oh.GrayText};
          background: ${oh.GrayText};
        }
      `)),checkedIndicator:'\n    <div part="checked-indicator" class="checked-indicator"></div>\n  '}),Cf="horizontal";class bf extends hd{constructor(){super(...arguments),this.orientation=Cf,this.radioChangeHandler=t=>{const e=t.target;e.checked&&(this.slottedRadioButtons.forEach((t=>{t!==e&&(t.checked=!1,this.isInsideFoundationToolbar||t.setAttribute("tabindex","-1"))})),this.selectedRadio=e,this.value=e.value,e.setAttribute("tabindex","0"),this.focusedRadio=e),t.stopPropagation()},this.moveToRadioByIndex=(t,e)=>{const n=t[e];this.isInsideToolbar||(n.setAttribute("tabindex","0"),n.readOnly?this.slottedRadioButtons.forEach((t=>{t!==n&&t.setAttribute("tabindex","-1")})):(n.checked=!0,this.selectedRadio=n)),this.focusedRadio=n,n.focus()},this.moveRightOffGroup=()=>{var t;null===(t=this.nextElementSibling)||void 0===t||t.focus()},this.moveLeftOffGroup=()=>{var t;null===(t=this.previousElementSibling)||void 0===t||t.focus()},this.focusOutHandler=t=>{const e=this.slottedRadioButtons,n=t.target,i=null!==n?e.indexOf(n):0,o=this.focusedRadio?e.indexOf(this.focusedRadio):-1;return(0===o&&i===o||o===e.length-1&&o===i)&&(this.selectedRadio?(this.focusedRadio=this.selectedRadio,this.isInsideFoundationToolbar||(this.selectedRadio.setAttribute("tabindex","0"),e.forEach((t=>{t!==this.selectedRadio&&t.setAttribute("tabindex","-1")})))):(this.focusedRadio=e[0],this.focusedRadio.setAttribute("tabindex","0"),e.forEach((t=>{t!==this.focusedRadio&&t.setAttribute("tabindex","-1")})))),!0},this.clickHandler=t=>{const e=t.target;if(e){const t=this.slottedRadioButtons;e.checked||0===t.indexOf(e)?(e.setAttribute("tabindex","0"),this.selectedRadio=e):(e.setAttribute("tabindex","-1"),this.selectedRadio=null),this.focusedRadio=e}t.preventDefault()},this.shouldMoveOffGroupToTheRight=(t,e,n)=>t===e.length&&this.isInsideToolbar&&n===fh,this.shouldMoveOffGroupToTheLeft=(t,e)=>(this.focusedRadio?t.indexOf(this.focusedRadio)-1:0)<0&&this.isInsideToolbar&&e===ph,this.checkFocusedRadio=()=>{null===this.focusedRadio||this.focusedRadio.readOnly||this.focusedRadio.checked||(this.focusedRadio.checked=!0,this.focusedRadio.setAttribute("tabindex","0"),this.focusedRadio.focus(),this.selectedRadio=this.focusedRadio)},this.moveRight=t=>{const e=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?e.indexOf(this.focusedRadio)+1:1,this.shouldMoveOffGroupToTheRight(n,e,t.key))this.moveRightOffGroup();else for(n===e.length&&(n=0);n<e.length&&e.length>1;){if(!e[n].disabled){this.moveToRadioByIndex(e,n);break}if(this.focusedRadio&&n===e.indexOf(this.focusedRadio))break;if(n+1>=e.length){if(this.isInsideToolbar)break;n=0}else n+=1}},this.moveLeft=t=>{const e=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?e.indexOf(this.focusedRadio)-1:0,n=n<0?e.length-1:n,this.shouldMoveOffGroupToTheLeft(e,t.key))this.moveLeftOffGroup();else for(;n>=0&&e.length>1;){if(!e[n].disabled){this.moveToRadioByIndex(e,n);break}if(this.focusedRadio&&n===e.indexOf(this.focusedRadio))break;n-1<0?n=e.length-1:n-=1}},this.keydownHandler=t=>{const e=t.key;if(e in Sh&&this.isInsideFoundationToolbar)return!0;switch(e){case mh:this.checkFocusedRadio();break;case fh:case hh:this.direction===hi.ltr?this.moveRight(t):this.moveLeft(t);break;case ph:case gh:this.direction===hi.ltr?this.moveLeft(t):this.moveRight(t);break;default:return!0}}}readOnlyChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{this.readOnly?t.readOnly=!0:t.readOnly=!1}))}disabledChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{this.disabled?t.disabled=!0:t.disabled=!1}))}nameChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{t.setAttribute("name",this.name)}))}valueChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{t.getAttribute("value")===this.value&&(t.checked=!0,this.selectedRadio=t)})),this.$emit("change")}slottedRadioButtonsChanged(t,e){this.slottedRadioButtons&&this.slottedRadioButtons.length>0&&this.setupRadioButtons()}get parentToolbar(){return this.closest('[role="toolbar"]')}get isInsideToolbar(){var t;return null!==(t=this.parentToolbar)&&void 0!==t&&t}get isInsideFoundationToolbar(){var t;return!!(null===(t=this.parentToolbar)||void 0===t?void 0:t.$fastController)}connectedCallback(){super.connectedCallback(),this.direction=Dp(this),this.setupRadioButtons()}disconnectedCallback(){this.slottedRadioButtons.forEach((t=>{t.removeEventListener("change",this.radioChangeHandler)}))}setupRadioButtons(){const t=this.slottedRadioButtons.filter((t=>t.hasAttribute("checked"))),e=t?t.length:0;if(e>1){t[e-1].checked=!0}let n=!1;if(this.slottedRadioButtons.forEach((t=>{void 0!==this.name&&t.setAttribute("name",this.name),this.disabled&&(t.disabled=!0),this.readOnly&&(t.readOnly=!0),this.value&&this.value===t.value?(this.selectedRadio=t,this.focusedRadio=t,t.checked=!0,t.setAttribute("tabindex","0"),n=!0):(this.isInsideFoundationToolbar||t.setAttribute("tabindex","-1"),t.checked=!1),t.addEventListener("change",this.radioChangeHandler)})),void 0===this.value&&this.slottedRadioButtons.length>0){const t=this.slottedRadioButtons.filter((t=>t.hasAttribute("checked"))),e=null!==t?t.length:0;if(e>0&&!n){const n=t[e-1];n.checked=!0,this.focusedRadio=n,n.setAttribute("tabindex","0")}else this.slottedRadioButtons[0].setAttribute("tabindex","0"),this.focusedRadio=this.slottedRadioButtons[0]}}}Cn([Fn({attribute:"readonly",mode:"boolean"})],bf.prototype,"readOnly",void 0),Cn([Fn({attribute:"disabled",mode:"boolean"})],bf.prototype,"disabled",void 0),Cn([Fn],bf.prototype,"name",void 0),Cn([Fn],bf.prototype,"value",void 0),Cn([Fn],bf.prototype,"orientation",void 0),Cn([An],bf.prototype,"childItems",void 0),Cn([An],bf.prototype,"slottedRadioButtons",void 0);const Sf=bf.compose({baseName:"radio-group",template:(t,e)=>Qd`
    <template
        role="radiogroup"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        @keydown="${(t,e)=>t.keydownHandler(e.event)}"
        @focusout="${(t,e)=>t.focusOutHandler(e.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${t=>t.orientation===Cf?"horizontal":"vertical"}"
            part="positioning-region"
        >
            <slot
                ${Fh({property:"slottedRadioButtons",filter:Nh("[role=radio]")})}
            ></slot>
        </div>
    </template>
`,styles:(t,e)=>Td`
  ${ih("flex")} :host {
    align-items: flex-start;
    margin: calc(${wo} * 1px) 0;
    flex-direction: column;
  }

  .positioning-region {
    display: flex;
    flex-wrap: wrap;
  }

  :host([orientation='vertical']) .positioning-region {
    flex-direction: column;
  }

  :host([orientation='horizontal']) .positioning-region {
    flex-direction: row;
  }
`});class xf extends hd{constructor(){super(...arguments),this.percentComplete=0}valueChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}minChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}maxChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}connectedCallback(){super.connectedCallback(),this.updatePercentComplete()}updatePercentComplete(){const t="number"==typeof this.min?this.min:0,e="number"==typeof this.max?this.max:100,n="number"==typeof this.value?this.value:0,i=e-t;this.percentComplete=0===i?0:Math.fround((n-t)/i*100)}}Cn([Fn({converter:Ln})],xf.prototype,"value",void 0),Cn([Fn({converter:Ln})],xf.prototype,"min",void 0),Cn([Fn({converter:Ln})],xf.prototype,"max",void 0),Cn([Fn({mode:"boolean"})],xf.prototype,"paused",void 0),Cn([An],xf.prototype,"percentComplete",void 0);class Ef extends xf{}const Af=Ef.compose({baseName:"progress",template:(t,e)=>Qd`
    <template
        role="progressbar"
        aria-valuenow="${t=>t.value}"
        aria-valuemin="${t=>t.min}"
        aria-valuemax="${t=>t.max}"
        class="${t=>t.paused?"paused":""}"
    >
        ${Pp((t=>"number"==typeof t.value),Qd`
                <div class="progress" part="progress" slot="determinate">
                    <div
                        class="determinate"
                        part="determinate"
                        style="width: ${t=>t.percentComplete}%"
                    ></div>
                </div>
            `)}
        ${Pp((t=>"number"!=typeof t.value),Qd`
                <div class="progress" part="progress" slot="indeterminate">
                    <slot class="indeterminate" name="indeterminate">
                        ${e.indeterminateIndicator1||""}
                        ${e.indeterminateIndicator2||""}
                    </slot>
                </div>
            `)}
    </template>
`,styles:(t,e)=>Td`
    ${ih("flex")} :host {
      align-items: center;
      outline: none;
      height: calc(${wo} * 1px);
      margin: calc(${wo} * 1px) 0;
    }

    .progress {
      background-color: ${pr};
      border-radius: calc(${wo} * 1px);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      position: relative;
    }

    .determinate {
      background-color: ${Za};
      border-radius: calc(${wo} * 1px);
      height: 100%;
      transition: all 0.2s ease-in-out;
      display: flex;
    }

    .indeterminate {
      height: 100%;
      border-radius: calc(${wo} * 1px);
      display: flex;
      width: 100%;
      position: relative;
      overflow: hidden;
    }

    .indeterminate-indicator-1 {
      position: absolute;
      opacity: 0;
      height: 100%;
      background-color: ${Za};
      border-radius: calc(${wo} * 1px);
      animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
      width: 40%;
      animation: indeterminate-1 2s infinite;
    }

    .indeterminate-indicator-2 {
      position: absolute;
      opacity: 0;
      height: 100%;
      background-color: ${Za};
      border-radius: calc(${wo} * 1px);
      animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
      width: 60%;
      animation: indeterminate-2 2s infinite;
    }

    :host(.paused) .indeterminate-indicator-1,
    :host(.paused) .indeterminate-indicator-2 {
      animation-play-state: paused;
      background-color: ${pr};
    }

    :host(.paused) .determinate {
      background-color: ${zr};
    }

    @keyframes indeterminate-1 {
      0% {
        opacity: 1;
        transform: translateX(-100%);
      }
      70% {
        opacity: 1;
        transform: translateX(300%);
      }
      70.01% {
        opacity: 0;
      }
      100% {
        opacity: 0;
        transform: translateX(300%);
      }
    }

    @keyframes indeterminate-2 {
      0% {
        opacity: 0;
        transform: translateX(-150%);
      }
      29.99% {
        opacity: 0;
      }
      30% {
        opacity: 1;
        transform: translateX(-150%);
      }
      100% {
        transform: translateX(166.66%);
        opacity: 1;
      }
    }
  `.withBehaviors(eh(Td`
        .indeterminate-indicator-1,
        .indeterminate-indicator-2,
        .determinate {
          forced-color-adjust: none;
          background-color: ${oh.FieldText};
        }
        .progress {
          background-color: ${oh.Field};
          border: calc(${Ro} * 1px) solid ${oh.FieldText};
        }
        :host(.paused) .indeterminate-indicator-1,
        .indeterminate-indicator-2 {
          background-color: ${oh.Field};
        }
        :host(.paused) .determinate {
          background-color: ${oh.GrayText};
        }
      `)),indeterminateIndicator1:'\n    <span class="indeterminate-indicator-1" part="indeterminate-indicator-1"></span>\n  ',indeterminateIndicator2:'\n    <span class="indeterminate-indicator-1" part="indeterminate-indicator-1"></span>\n  '});const Tf=class extends xf{}.compose({baseName:"progress-ring",template:(t,e)=>Qd`
    <template
        role="progressbar"
        aria-valuenow="${t=>t.value}"
        aria-valuemin="${t=>t.min}"
        aria-valuemax="${t=>t.max}"
        class="${t=>t.paused?"paused":""}"
    >
        ${Pp((t=>"number"==typeof t.value),Qd`
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${t=>44*t.percentComplete/100}px ${44}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `)}
        ${Pp((t=>"number"!=typeof t.value),Qd`
                <slot name="indeterminate" slot="indeterminate">
                    ${e.indeterminateIndicator||""}
                </slot>
            `)}
    </template>
`,styles:(t,e)=>Td`
      ${ih("flex")} :host {
        align-items: center;
        outline: none;
        height: calc(${Gh} * 1px);
        width: calc(${Gh} * 1px);
        margin: calc(${Gh} * 1px) 0;
      }

      .progress {
        height: 100%;
        width: 100%;
      }

      .background {
        stroke: ${pr};
        fill: none;
        stroke-width: 2px;
      }

      .determinate {
        stroke: ${Za};
        fill: none;
        stroke-width: 2px;
        stroke-linecap: round;
        transform-origin: 50% 50%;
        transform: rotate(-90deg);
        transition: all 0.2s ease-in-out;
      }

      .indeterminate-indicator-1 {
        stroke: ${Za};
        fill: none;
        stroke-width: 2px;
        stroke-linecap: round;
        transform-origin: 50% 50%;
        transform: rotate(-90deg);
        transition: all 0.2s ease-in-out;
        animation: spin-infinite 2s linear infinite;
      }

      :host(.paused) .indeterminate-indicator-1 {
        animation-play-state: paused;
        stroke: ${pr};
      }

      :host(.paused) .determinate {
        stroke: ${zr};
      }

      @keyframes spin-infinite {
        0% {
          stroke-dasharray: 0.01px 43.97px;
          transform: rotate(0deg);
        }
        50% {
          stroke-dasharray: 21.99px 21.99px;
          transform: rotate(450deg);
        }
        100% {
          stroke-dasharray: 0.01px 43.97px;
          transform: rotate(1080deg);
        }
      }
    `.withBehaviors(eh(Td`
          .indeterminate-indicator-1,
          .determinate {
            stroke: ${oh.FieldText};
          }
          .background {
            stroke: ${oh.Field};
          }
          :host(.paused) .indeterminate-indicator-1 {
            stroke: ${oh.Field};
          }
          :host(.paused) .determinate {
            stroke: ${oh.GrayText};
          }
        `)),indeterminateIndicator:'\n    <svg class="progress" part="progress" viewBox="0 0 16 16">\n        <circle\n            class="background"\n            part="background"\n            cx="8px"\n            cy="8px"\n            r="7px"\n        ></circle>\n        <circle\n            class="indeterminate-indicator-1"\n            part="indeterminate-indicator-1"\n            cx="8px"\n            cy="8px"\n            r="7px"\n        ></circle>\n    </svg>\n  '}),Df="separator";class kf extends hd{constructor(){super(...arguments),this.role=Df,this.orientation=Cf}}Cn([Fn],kf.prototype,"role",void 0),Cn([Fn],kf.prototype,"orientation",void 0);const If=kf.compose({baseName:"divider",template:(t,e)=>Qd`
    <template role="${t=>t.role}" aria-orientation="${t=>t.orientation}"></template>
`,styles:(t,e)=>Td`
    ${ih("block")} :host {
      box-sizing: content-box;
      height: 0;
      margin: calc(${wo} * 1px) 0;
      border: none;
      border-top: calc(${Ro} * 1px) solid ${Mr};
    }
  `}),wf=Mp.compose({baseName:"anchored-region",template:(t,e)=>Qd`
    <template class="${t=>t.initialLayoutComplete?"loaded":""}">
        ${Pp((t=>t.initialLayoutComplete),Qd`
                <slot></slot>
            `)}
    </template>
`,styles:(t,e)=>Td`
  :host {
    contain: layout;
    display: block;
  }
`}),Pf="top",Of="right",Rf="bottom",Mf="left",Nf="start",Lf="end",_f="top-left",Ff="top-right",Hf="bottom-left",Bf="bottom-right",Uf="top-start",Vf="top-end",Gf="bottom-start",Wf="bottom-end";class $f extends hd{constructor(){super(...arguments),this.anchor="",this.delay=300,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.horizontalInset="false",this.verticalInset="false",this.horizontalScaling="content",this.verticalScaling="content",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition=void 0,this.tooltipVisible=!1,this.currentDirection=hi.ltr,this.showDelayTimer=null,this.hideDelayTimer=null,this.isAnchorHoveredFocused=!1,this.isRegionHovered=!1,this.handlePositionChange=t=>{this.classList.toggle("top","start"===this.region.verticalPosition),this.classList.toggle("bottom","end"===this.region.verticalPosition),this.classList.toggle("inset-top","insetStart"===this.region.verticalPosition),this.classList.toggle("inset-bottom","insetEnd"===this.region.verticalPosition),this.classList.toggle("center-vertical","center"===this.region.verticalPosition),this.classList.toggle("left","start"===this.region.horizontalPosition),this.classList.toggle("right","end"===this.region.horizontalPosition),this.classList.toggle("inset-left","insetStart"===this.region.horizontalPosition),this.classList.toggle("inset-right","insetEnd"===this.region.horizontalPosition),this.classList.toggle("center-horizontal","center"===this.region.horizontalPosition)},this.handleRegionMouseOver=t=>{this.isRegionHovered=!0},this.handleRegionMouseOut=t=>{this.isRegionHovered=!1,this.startHideDelayTimer()},this.handleAnchorMouseOver=t=>{this.tooltipVisible?this.isAnchorHoveredFocused=!0:this.startShowDelayTimer()},this.handleAnchorMouseOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.handleAnchorFocusIn=t=>{this.startShowDelayTimer()},this.handleAnchorFocusOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.startHideDelayTimer=()=>{this.clearHideDelayTimer(),this.tooltipVisible&&(this.hideDelayTimer=window.setTimeout((()=>{this.updateTooltipVisibility()}),60))},this.clearHideDelayTimer=()=>{null!==this.hideDelayTimer&&(clearTimeout(this.hideDelayTimer),this.hideDelayTimer=null)},this.startShowDelayTimer=()=>{this.isAnchorHoveredFocused||(this.delay>1?null===this.showDelayTimer&&(this.showDelayTimer=window.setTimeout((()=>{this.startHover()}),this.delay)):this.startHover())},this.startHover=()=>{this.isAnchorHoveredFocused=!0,this.updateTooltipVisibility()},this.clearShowDelayTimer=()=>{null!==this.showDelayTimer&&(clearTimeout(this.showDelayTimer),this.showDelayTimer=null)},this.getAnchor=()=>{const t=this.getRootNode();return t instanceof ShadowRoot?t.getElementById(this.anchor):document.getElementById(this.anchor)},this.handleDocumentKeydown=t=>{if(!t.defaultPrevented&&this.tooltipVisible&&t.key===vh)this.isAnchorHoveredFocused=!1,this.updateTooltipVisibility(),this.$emit("dismiss")},this.updateTooltipVisibility=()=>{if(!1===this.visible)this.hideTooltip();else{if(!0===this.visible)return void this.showTooltip();if(this.isAnchorHoveredFocused||this.isRegionHovered)return void this.showTooltip();this.hideTooltip()}},this.showTooltip=()=>{this.tooltipVisible||(this.currentDirection=Dp(this),this.tooltipVisible=!0,document.addEventListener("keydown",this.handleDocumentKeydown),un.queueUpdate(this.setRegionProps))},this.hideTooltip=()=>{this.tooltipVisible&&(this.clearHideDelayTimer(),null!==this.region&&void 0!==this.region&&(this.region.removeEventListener("positionchange",this.handlePositionChange),this.region.viewportElement=null,this.region.anchorElement=null,this.region.removeEventListener("mouseover",this.handleRegionMouseOver),this.region.removeEventListener("mouseout",this.handleRegionMouseOut)),document.removeEventListener("keydown",this.handleDocumentKeydown),this.tooltipVisible=!1)},this.setRegionProps=()=>{this.tooltipVisible&&(this.region.viewportElement=this.viewportElement,this.region.anchorElement=this.anchorElement,this.region.addEventListener("positionchange",this.handlePositionChange),this.region.addEventListener("mouseover",this.handleRegionMouseOver,{passive:!0}),this.region.addEventListener("mouseout",this.handleRegionMouseOut,{passive:!0}))}}visibleChanged(){this.$fastController.isConnected&&(this.updateTooltipVisibility(),this.updateLayout())}anchorChanged(){this.$fastController.isConnected&&(this.anchorElement=this.getAnchor())}positionChanged(){this.$fastController.isConnected&&this.updateLayout()}anchorElementChanged(t){if(this.$fastController.isConnected){if(null!=t&&(t.removeEventListener("mouseover",this.handleAnchorMouseOver),t.removeEventListener("mouseout",this.handleAnchorMouseOut),t.removeEventListener("focusin",this.handleAnchorFocusIn),t.removeEventListener("focusout",this.handleAnchorFocusOut)),null!==this.anchorElement&&void 0!==this.anchorElement){this.anchorElement.addEventListener("mouseover",this.handleAnchorMouseOver,{passive:!0}),this.anchorElement.addEventListener("mouseout",this.handleAnchorMouseOut,{passive:!0}),this.anchorElement.addEventListener("focusin",this.handleAnchorFocusIn,{passive:!0}),this.anchorElement.addEventListener("focusout",this.handleAnchorFocusOut,{passive:!0});const t=this.anchorElement.id;null!==this.anchorElement.parentElement&&this.anchorElement.parentElement.querySelectorAll(":hover").forEach((e=>{e.id===t&&this.startShowDelayTimer()}))}null!==this.region&&void 0!==this.region&&this.tooltipVisible&&(this.region.anchorElement=this.anchorElement),this.updateLayout()}}viewportElementChanged(){null!==this.region&&void 0!==this.region&&(this.region.viewportElement=this.viewportElement),this.updateLayout()}connectedCallback(){super.connectedCallback(),this.anchorElement=this.getAnchor(),this.updateTooltipVisibility()}disconnectedCallback(){this.hideTooltip(),this.clearShowDelayTimer(),this.clearHideDelayTimer(),super.disconnectedCallback()}updateLayout(){switch(this.verticalPositioningMode="locktodefault",this.horizontalPositioningMode="locktodefault",this.position){case Pf:case Rf:this.verticalDefaultPosition=this.position,this.horizontalDefaultPosition="center";break;case Of:case Mf:case Nf:case Lf:this.verticalDefaultPosition="center",this.horizontalDefaultPosition=this.position;break;case _f:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="left";break;case Ff:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="right";break;case Hf:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="left";break;case Bf:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="right";break;case Uf:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="start";break;case Vf:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="end";break;case Gf:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="start";break;case Wf:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="end";break;default:this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition="center"}}}Cn([Fn({mode:"boolean"})],$f.prototype,"visible",void 0),Cn([Fn],$f.prototype,"anchor",void 0),Cn([Fn],$f.prototype,"delay",void 0),Cn([Fn],$f.prototype,"position",void 0),Cn([Fn({attribute:"auto-update-mode"})],$f.prototype,"autoUpdateMode",void 0),Cn([Fn({attribute:"horizontal-viewport-lock"})],$f.prototype,"horizontalViewportLock",void 0),Cn([Fn({attribute:"vertical-viewport-lock"})],$f.prototype,"verticalViewportLock",void 0),Cn([An],$f.prototype,"anchorElement",void 0),Cn([An],$f.prototype,"viewportElement",void 0),Cn([An],$f.prototype,"verticalPositioningMode",void 0),Cn([An],$f.prototype,"horizontalPositioningMode",void 0),Cn([An],$f.prototype,"horizontalInset",void 0),Cn([An],$f.prototype,"verticalInset",void 0),Cn([An],$f.prototype,"horizontalScaling",void 0),Cn([An],$f.prototype,"verticalScaling",void 0),Cn([An],$f.prototype,"verticalDefaultPosition",void 0),Cn([An],$f.prototype,"horizontalDefaultPosition",void 0),Cn([An],$f.prototype,"tooltipVisible",void 0),Cn([An],$f.prototype,"currentDirection",void 0);const zf=class extends $f{connectedCallback(){super.connectedCallback();const t=br.getValueFor(this),e=Ya.getValueFor(this.parentElement);Ya.setValueFor(this,(n=>t.evaluate(n,e).rest))}}.compose({baseName:"tooltip",baseClass:$f,template:(t,e)=>Qd`
        ${Pp((t=>t.tooltipVisible),Qd`
            <${t.tagFor(Mp)}
                fixed-placement="true"
                auto-update-mode="${t=>t.autoUpdateMode}"
                vertical-positioning-mode="${t=>t.verticalPositioningMode}"
                vertical-default-position="${t=>t.verticalDefaultPosition}"
                vertical-inset="${t=>t.verticalInset}"
                vertical-scaling="${t=>t.verticalScaling}"
                horizontal-positioning-mode="${t=>t.horizontalPositioningMode}"
                horizontal-default-position="${t=>t.horizontalDefaultPosition}"
                horizontal-scaling="${t=>t.horizontalScaling}"
                horizontal-inset="${t=>t.horizontalInset}"
                vertical-viewport-lock="${t=>t.horizontalViewportLock}"
                horizontal-viewport-lock="${t=>t.verticalViewportLock}"
                dir="${t=>t.currentDirection}"
                ${Th("region")}
            >
                <div class="tooltip" part="tooltip" role="tooltip">
                    <slot></slot>
                </div>
            </${t.tagFor(Mp)}>
        `)}
    `,styles:(t,e)=>Td`
    :host {
      --elevation: 11;
      position: relative;
      contain: layout;
      overflow: visible;
      height: 0;
      width: 0;
      z-index: 10000;
    }

    .tooltip {
      box-sizing: border-box;
      border-radius: calc(${Po} * 1px);
      border: calc(${Ro} * 1px) solid transparent;
      background: ${Ya};
      color: ${Wr};
      padding: 4px 12px;
      height: fit-content;
      width: fit-content;
      font-family: ${No};
      font-size: ${Lo};
      line-height: ${_o};
      white-space: nowrap;
      ${vp}
    }

    fluent-anchored-region {
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: visible;
      flex-direction: row;
    }

    fluent-anchored-region.right,
    fluent-anchored-region.left {
      flex-direction: column;
    }

    fluent-anchored-region.top .tooltip::after,
    fluent-anchored-region.bottom .tooltip::after,
    fluent-anchored-region.left .tooltip::after,
    fluent-anchored-region.right .tooltip::after {
      content: '';
      width: 12px;
      height: 12px;
      background: ${Ya};
      border-radius: calc(${Po} * 1px);
      position: absolute;
    }

    fluent-anchored-region.top .tooltip::after {
      transform: rotate(45deg) translateX(-50%);
      bottom: 4px;
      left: 50%;
    }

    fluent-anchored-region.top .tooltip {
      margin-bottom: 12px;
    }

    fluent-anchored-region.bottom .tooltip::after {
      transform: rotate(45deg) translateX(-50%);
      top: 12px;
      left: 50%;
    }

    fluent-anchored-region.bottom .tooltip {
      margin-top: 12px;
    }

    fluent-anchored-region.left .tooltip::after {
      transform: rotate(45deg) translateY(-50%);
      top: 50%;
      right: 12px;
    }

    fluent-anchored-region.left .tooltip {
      margin-right: 12px;
    }

    fluent-anchored-region.right .tooltip::after {
      transform: rotate(45deg) translateY(-50%);
      top: 50%;
      left: 4px;
    }

    fluent-anchored-region.right .tooltip {
      margin-left: 12px;
    }
  `.withBehaviors(eh(Td`
        :host([disabled]) {
          opacity: 1;
        }
        fluent-anchored-region.top .tooltip::after,
        fluent-anchored-region.bottom .tooltip::after,
        fluent-anchored-region.left .tooltip::after,
        fluent-anchored-region.right .tooltip::after {
          content: '';
          width: unset;
          height: unset;
        }
      `))});function Kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Yf,jf,qf,Zf=function(t){u(n,t);var e=Kf(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n,[{key:"handleImageContentChange",value:function(){this.imageContainer.classList.toggle("image",this.image.assignedNodes().length>0)}}]),n}(hd),Xf=Zf.compose({baseName:"attribution",styles:function(t,e){return Td(Yf||(Yf=j(["\n        "," :host {\n            box-sizing: border-box;\n            font-family: ",";\n            font-size: ",";\n            font-weight: 400;\n            line-height: ",";\n            align-items: center;\n            color: ",";\n            min-height: 16px;\n        }\n\n        .content {\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n        }\n\n        .image {\n            display: flex;\n            margin-inline-end: calc("," * 2px);\n        }\n    "])),ih("inline-flex"),No,Fo,Ho,zr,wo).withBehaviors(eh(Td(jf||(jf=j(["\n                :host,\n                .content {\n                    color: ",";\n                    fill: currentcolor;\n                }\n            "])),oh.CanvasText)))},template:function(t,e){return Qd(qf||(qf=j(['\n    <span part="image" ','>\n        <slot\n            name="image"\n            ',"\n            @slotchange=",'\n        ></slot>\n    </span>\n    <span part="content" class="content">\n        <slot></slot>\n    </span>\n'])),Th("imageContainer"),Th("image"),(function(t){return t.handleImageContentChange()}))}});function Jf(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function Qf(){return Qf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=Jf(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Qf.apply(this,arguments)}function tg(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r}function eg(t,e,n,i){return new(n||(n=Promise))((function(o,a){function r(t){try{l(i.next(t))}catch(t){a(t)}}function s(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(r,s)}l((i=i.apply(t,e||[])).next())}))}Object.create;Object.create;var ng="object"==typeof global&&global&&global.Object===Object&&global,ig="object"==typeof self&&self&&self.Object===Object&&self,og=ng||ig||Function("return this")(),ag=og.Symbol;var rg=function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o},sg=Array.isArray,lg=Object.prototype,cg=lg.hasOwnProperty,ug=lg.toString,dg=ag?ag.toStringTag:void 0;var hg=function(t){var e=cg.call(t,dg),n=t[dg];try{t[dg]=void 0;var i=!0}catch(t){}var o=ug.call(t);return i&&(e?t[dg]=n:delete t[dg]),o},pg=Object.prototype.toString;var fg=function(t){return pg.call(t)},gg=ag?ag.toStringTag:void 0;var mg=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":gg&&gg in Object(t)?hg(t):fg(t)};var vg=function(t){return null!=t&&"object"==typeof t};var yg=function(t){return"symbol"==typeof t||vg(t)&&"[object Symbol]"==mg(t)},Cg=ag?ag.prototype:void 0,bg=Cg?Cg.toString:void 0;var Sg=function t(e){if("string"==typeof e)return e;if(sg(e))return rg(e,t)+"";if(yg(e))return bg?bg.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var xg=function(t){return null==t?"":Sg(t)},Eg=0;var Ag=function(t){var e=++Eg;return xg(t)+e};function Tg(t,e){return e&&e.some((function(e){return e.slot===t}))}function Dg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var kg,Ig,wg,Pg,Og=function(t){u(n,t);var e=Dg(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).contentId=Ag("contentId"),t.footerContentId=Ag("footerContentId"),t}return r(n,[{key:"gradientColorEndChanged",value:function(){this.generateGradientVariables()}},{key:"noFooterChanged",value:function(){this.noFooter=!this.hasFooter()}},{key:"dataChanged",value:function(){this.noFooter=!this.hasFooter()}},{key:"generateGradientVariables",value:function(){var t,e,n;if(this.hasColorGradient())null===(t=this.style)||void 0===t||t.setProperty("--gradient-color-end",this.gradientColorEnd);else{if(!this.cardFillColor)return null;var i=eo(this.cardFillColor),o=i.r,a=i.g,r=i.b,s=new bi(o,a,r,Tg("image",this.childElements)?.7:.5).toStringWebRGBA();null===(e=this.style)||void 0===e||e.setProperty("--gradient-color-end",this.cardFillColor),null===(n=this.style)||void 0===n||n.setProperty("--gradient-color-mid",s)}}},{key:"hasFooter",value:function(){return!this.hasAttribute("no-footer")&&(Tg("footer-end",this.childElements)||Tg("footer-start",this.childElements)||!!this.footerContent)}},{key:"hasColorGradient",value:function(){return!(!this.gradientColorEnd||!this.cardFillColor)}},{key:"connectedCallback",value:function(){Qf(p(n.prototype),"connectedCallback",this).call(this),this.size||(this.size="_1x_1y"),"_1x_1y"===this.size&&this.imageLayout&&(this.imageLayout="full"),this.hasColorGradient()?this.setAttribute("has-color-gradient",""):this.removeAttribute("has-color-gradient"),this.generateGradientVariables()}}]),n}(Cp);tg([Fn],Og.prototype,"target",void 0),tg([Fn({attribute:"gradient-color-end"})],Og.prototype,"gradientColorEnd",void 0),tg([Fn],Og.prototype,"size",void 0),tg([Fn({attribute:"image-layout"})],Og.prototype,"imageLayout",void 0),tg([Fn({attribute:"label"})],Og.prototype,"label",void 0),tg([Fn({attribute:"describedby"})],Og.prototype,"describedby",void 0),tg([Fn({attribute:"labelledby"})],Og.prototype,"labelledby",void 0),tg([Fn({attribute:"no-footer",mode:"boolean"})],Og.prototype,"noFooter",void 0),tg([Fn],Og.prototype,"heading",void 0),tg([Fn],Og.prototype,"footerContent",void 0),tg([Fn],Og.prototype,"link",void 0),tg([An],Og.prototype,"childElements",void 0),tg([An],Og.prototype,"footerStartNodes",void 0),tg([An],Og.prototype,"footerEndNodes",void 0);var Rg,Mg,Ng,Lg,_g=Td(kg||(kg=j(['\n    :host([image-layout="half"]) .image-container {\n        left: 174px;\n    }\n']))),Fg=Td(Ig||(Ig=j(['\n    :host([image-layout="half"]) .image-container {\n        right: 174px;\n    }\n'])));class Hg extends Lh{constructor(t,e){super(t,e),this.observer=null,e.childList=!0}observe(){null===this.observer&&(this.observer=new MutationObserver(this.handleEvent.bind(this))),this.observer.observe(this.target,this.options)}disconnect(){this.observer.disconnect()}getNodes(){return"subtree"in this.options?Array.from(this.target.querySelectorAll(this.options.selector)):Array.from(this.target.childNodes)}}function Bg(t){return"string"==typeof t&&(t={property:t}),new wd("fast-children",Hg,t)}var Ug=Og.compose({baseName:"dash-base-card",styles:function(t,e){return Td(wg||(wg=j(["\n    ","\n    ",":host {\n        position: relative;\n        box-sizing: border-box;\n        font-family: ",";\n        font-size: ",";\n        line-height: ",';\n        display: grid;\n        grid-template-rows: auto 1fr auto;\n        padding: var(--card-padding, 12px 0);\n        outline: none;\n    }\n\n    :host([size="_1x_1y"]) {\n        --card-height: 162px;\n        --card-width: 162px;\n    }\n\n    :host([size="_2x_1y"]) {\n        --card-height: 162px;\n        --card-width: 336px;\n    }\n\n    :host([size="_2x_2y"]) {\n        --card-height: 336px;\n        --card-width: 336px;\n    }\n\n    :host([size="_2x_3y"]) {\n        --card-height: 510px;\n        --card-width: 336px;\n    }\n\n    .image-container {\n        position: absolute;\n        z-index: -1;\n        height: 100%;\n    }\n\n    .heading {\n        max-height: 18px;\n        align-items: center;\n        justify-content: space-between;\n        display: flex;\n        outline: none;\n        cursor: pointer;\n        text-decoration: none;\n        letter-spacing: 0.7px;\n        color: ',";\n        padding: var(--heading-padding, 0 12px);\n    }\n\n    .heading-title-container {\n        display: flex;\n        align-items: center;\n    }\n\n    .heading-link,\n    .heading-link:hover,\n    .heading-link:active,\n    .heading-link:visited {\n        color: ",";\n        text-decoration: none;\n        height: ",";\n        -webkit-line-clamp: 1;\n    }\n\n    .heading-link:",' {\n        text-decoration: underline;\n        outline: none;\n    }\n\n    .heading-link::after {\n        position: absolute;\n        content: "";\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n    }\n\n    ::slotted([slot="heading-icon"]) {\n        margin-inline-end: 5px;\n    }\n\n    .more-actions-container {\n        justify-self: end;\n        opacity: 0;\n        z-index: 1;\n        transition: opacity 0.1s linear;\n    }\n\n    :host(:focus-within) .more-actions-container,\n    :host(:hover) .more-actions-container {\n        opacity: 1;\n    }\n\n    .content {\n        overflow: hidden;\n        color: ',';\n    }\n\n    :host([image-layout="full"]) .image-container {\n        width: 100%;\n    }\n\n    :host([image-layout="half"]) .image-container {\n        max-width: 100%;\n        top: 0;\n    }\n\n    :host([image-layout="contain"]) .image-container {\n        max-width: 100%;\n        top: 26px;\n        right: 0;\n    }\n\n    :host([has-color-gradient]) .gradient {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: linear-gradient(\n            180deg,\n            transparent 0%,\n            var(--gradient-color-end) 100%\n        );\n        z-index: -1;\n    }\n\n    :host([image-layout="full"]) .gradient {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: -1;\n        background: linear-gradient(\n            270deg,\n            transparent 0%,\n            var(--gradient-color-mid) 40%,\n            var(--gradient-color-end) 100%\n        );\n    }\n\n    .footer {\n        display: flex;\n        align-content: center;\n        font-size: ',";\n        line-height: ",";\n        padding: var(--footer-padding, 0 12px);\n        color: ",';\n    }\n\n    :host([image-layout="full"]) .footer {\n        color: ',';\n    }\n\n    :host([no-footer]) .footer {\n        display: none;\n    }\n\n    ::slotted([slot="more-actions"]) {\n        min-width: 24px;\n        width: 24px;\n        height: 24px;\n        --control-corner-radius: 16;\n    }\n\n    ::slotted([slot="image"]) {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n        transition: all 0.1s linear;\n        opacity: 1;\n    }\n\n    :host(:not([image-layout="half"]):hover) ::slotted([slot="image"]),\n    :host(:not([image-layout="half"]):focus-within) ::slotted([slot="image"]) {\n        opacity: 0.5;\n    }\n\n    ::slotted([slot="footer-end"]) {\n        margin-inline-start: auto;\n    }\n'])),Sp(t,e),ih("grid"),No,Fo,Ho,Wr,zr,Ho,Vh,Wr,Fo,Ho,zr,Wr).withBehaviors(new $p(_g,Fg),eh(Td(Pg||(Pg=j(["\n                :host([has-color-gradient]) .gradient {\n                    background: none;\n                }\n\n                a[href],\n                .heading,\n                .content,\n                .footer {\n                    forced-color-adjust: auto;\n                    color: ",";\n                }\n            "])),oh.LinkText)))},template:function(t,e){return Qd(Rg||(Rg=j(["\n    <template\n        ",'\n        ?no-footer="','"\n    >\n    ','\n        <div id="','" class="content" part="content">\n            <slot></slot>\n        </div>\n        ','\n        <div class="gradient" part="gradient"></div>\n        <div class="footer" part="footer">\n            <slot name="footer-start" ',"></slot>\n            ",'\n            <slot name="footer-end" ',"></slot>\n        </div>\n    </template>\n"])),Bg({property:"childElements",filter:Nh()}),(function(t){return t.noFooter}),Pp((function(t){return t.heading}),Qd(Mg||(Mg=j(['\n        <span class="heading" part="heading">\n            <div class="heading-title-container" part="heading-title-container">\n                <slot name="heading-icon"></slot>\n                <a\n                    class="heading-link"\n                    part="heading-link"\n                    aria-label="','"\n                    aria-labelledby="','"\n                    aria-describedby="'," "," ",'"\n                    href="','"\n                    target=','\n                    tabindex="1"\n                >\n                    ','\n                </a>\n            </div>\n            <div class="more-actions-container" part="more-actions-container">\n                <slot name="more-actions"></slot>\n            </div>\n        </span>\n        '])),(function(t){return t.label}),(function(t){return t.labelledby}),(function(t){var e;return null!==(e=t.describedby)&&void 0!==e?e:""}),(function(t){return t.contentId}),(function(t){return t.footerContentId}),(function(t){return t.link}),(function(t){return t.target}),(function(t){return t.heading}))),(function(t){return t.contentId}),Pp((function(t){return Tg("image",t.childElements)}),Qd(Ng||(Ng=j(['\n                <div class="image-container" part="image-container">\n                    <slot name="image"></slot>\n                </div>\n            '])))),Fh("footerStartNodes"),Pp((function(t){return t.footerContent}),Qd(Lg||(Lg=j(['\n                    <span\n                        id="','"\n                        class="footer-content"\n                        part="footer-content"\n                        aria-label="','"\n                    >\n                        ',"\n                    </span>\n                "])),(function(t){return t.footerContentId}),(function(t){return t.footerContent}),(function(t){return t.footerContent}))),Fh("footerEndNodes"))}});function Vg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Gg,Wg=function(t){u(n,t);var e=Vg(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n,[{key:"handleFooterContentChange",value:function(){this.footerContainer.classList.toggle("footer",this.footer.assignedNodes().length>0)}},{key:"handleActionsContentChange",value:function(){this.actionsContainer.classList.toggle("actions",this.actions.assignedNodes().length>0)}},{key:"handleHeaderIconContentChange",value:function(){this.headerIconContainer.classList.toggle("header-icon",this.headerIcon.assignedNodes().length>0)}},{key:"handleStartContentChange",value:function(){this.startContentContainer.classList.toggle("start-content",this.startContent.assignedNodes().length>0)}}]),n}(hd);tg([Fn({attribute:"fixed-title",mode:"fromView"})],Wg.prototype,"fixedTitle",void 0),tg([Fn({mode:"fromView"})],Wg.prototype,"title",void 0),tg([Fn({attribute:"sub-title",mode:"fromView"})],Wg.prototype,"subTitle",void 0),tg([An],Wg.prototype,"footerSlottedNodes",void 0),tg([An],Wg.prototype,"actionsSlottedNodes",void 0),tg([An],Wg.prototype,"startContentSlottedNodes",void 0);var $g,zg,Kg,Yg=Wg.compose({baseName:"edge-shopping",styles:function(t,e){return Td(Gg||(Gg=j(["\n        "," :host {\n            --side-padding: 12px;\n            flex-direction: column;\n            height: 100%;\n            font-size: ",";\n            line-height: ",";\n        }\n\n        .content {\n            overflow: hidden;\n            overflow-y: auto;\n        }\n\n        .header-fixed {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            height: 40px;\n        }\n\n        .header-title-wrapper {\n            display: flex;\n            align-items: center;\n            margin-inline-start: 8px;\n        }\n\n        .header-icon {\n            display: flex;\n            margin-inline-start: 4px;\n        }\n\n        .header-fixed-title {\n            display: inline-block;\n            font-weight: 600;\n            margin-inline-start: 8px;\n            margin-top: 9px;\n            margin-bottom: 11px;\n            font-size: ",";\n            line-height: ",";\n        }\n\n        .header-actions {\n            margin: 4px;\n        }\n\n        .illustration-container {\n            display: flex;\n            justify-content: center;\n        }\n\n        .header {\n            text-align: center;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .header-title,\n        .header-sub-title {\n            display: inline;\n        }\n\n        .header-title {\n            margin: 16px 16px 8px;\n            font-size: ",";\n            line-height: ",";\n        }\n\n        .header-sub-title {\n            margin: 0 32px 8px 32px;\n            font-weight: 600;\n            font-size: ",";\n            line-height: ",";\n        }\n\n        .sections {\n            padding: 0 var(--side-padding);\n        }\n\n        .footer,\n        .actions {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .footer {\n            padding: 10px 12px;\n            border-top: calc("," * 1px) solid ",';\n        }\n\n        ::slotted([slot="feedback"]) {\n            display: flex;\n            align-items: center;\n            padding: 10px 12px;\n            border-top: calc('," * 1px) solid ",";\n        }\n\n        .actions {\n            display: flex;\n            flex-direction: column;\n            width: calc(100% - 24px);\n            padding: 10px 12px 13px;\n            border-bottom: calc("," * 1px) solid ",";\n        }\n\n        .footer__hidden,\n        .actions__hidden {\n            display: none;\n        }\n\n        .start-content {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 10px 12px;\n        }\n\n        .start-content__hidden {\n            display: none;\n        }\n    "])),ih("flex"),Lo,_o,Lo,_o,Go,$o,Lo,_o,Ro,Mr,Ro,Mr,Ro,Mr)},template:function(t,e){return Qd($g||($g=j(['\n    <template>\n        <header class="header-fixed" part="header-fixed">\n            <div class="header-title-wrapper">\n                <span part="header-icon" aria-hidden="true" ','>\n                    <slot\n                        name="header-icon"\n                        ',"\n                        @slotchange=",'\n                    ></slot>\n                </span>\n                <h1 class="header-fixed-title" part="header-fixed-title">\n                    ','\n                </h1>\n            </div>\n            <div class="header-actions" part="header-actions">\n                <slot name="header-actions"></slot>\n            </div>\n        </header>\n        <div class="content" part="content">\n            <div\n                class="','"\n                part="start-content"\n                ','\n            >\n                <slot\n                    name="start-content"\n                    ',"\n                    ",'\n                    @slotchange="','"\n                ></slot>\n            </div>\n            <div class="header" part="header">\n                <slot name="header-content">\n                    ',"\n                    ",'\n                </slot>\n                <div\n                    class="','"\n                    part="actions"\n                    ','\n                >\n                    <slot\n                        name="actions"\n                        ',"\n                        ",'\n                        @slotchange="','"\n                    ></slot>\n                </div>\n            </div>\n            <div class="sections" part="sections">\n                <slot></slot>\n            </div>\n            <footer\n                class="','"\n                part="footer"\n                ','\n            >\n                <slot\n                    name="footer"\n                    ',"\n                    ",'\n                    @slotchange="','"\n                ></slot>\n            </footer>\n            <slot name="feedback"></slot>\n        </div>\n    </template>\n'])),Th("headerIconContainer"),Th("headerIcon"),(function(t){return t.handleHeaderIconContentChange()}),(function(t){return t.fixedTitle}),(function(t){return t.startContentSlottedNodes&&t.startContentSlottedNodes.length?"start-content":"start-content__hidden"}),Th("startContentContainer"),Th("startContent"),Fh("startContentSlottedNodes"),(function(t){return t.handleStartContentChange()}),Pp((function(t){return t.title}),Qd(zg||(zg=j(['\n                            <h2 class="header-title" part="header-title">\n                                ',"\n                            </h2>\n                        "])),(function(t){return t.title}))),Pp((function(t){return t.subTitle}),Qd(Kg||(Kg=j(['\n                            <p class="header-sub-title" part="header-sub-title">\n                                ',"\n                            </p>\n                        "])),(function(t){return t.subTitle}))),(function(t){return t.actionsSlottedNodes&&t.actionsSlottedNodes.length?"actions":"actions__hidden"}),Th("actionsContainer"),Th("actions"),Fh("actionsSlottedNodes"),(function(t){return t.handleActionsContentChange()}),(function(t){return t.footerSlottedNodes&&t.footerSlottedNodes.length?"footer":"footer__hidden"}),Th("footerContainer"),Th("footer"),Fh("footerSlottedNodes"),(function(t){return t.handleFooterContentChange()}))}});function jg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var qg,Zg,Xg=function(t){u(n,t);var e=jg(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).accordion=!1,t.hideTitle=!1,t.isPane=!1,t.isBlock=!1,t.hasPadding=!1,t.titleLevel=3,t}return r(n,[{key:"connectedCallback",value:function(){Qf(p(n.prototype),"connectedCallback",this).call(this),null!==this.expanded&&void 0!==this.expanded||(this.expanded=!0)}}]),n}(hd);tg([Fn({mode:"boolean"})],Xg.prototype,"accordion",void 0),tg([Fn({mode:"boolean"})],Xg.prototype,"expanded",void 0),tg([Fn({mode:"boolean"})],Xg.prototype,"hideTitle",void 0),tg([Fn({mode:"boolean"})],Xg.prototype,"isPane",void 0),tg([Fn({mode:"boolean"})],Xg.prototype,"isBlock",void 0),tg([Fn({mode:"boolean"})],Xg.prototype,"hasPadding",void 0),tg([Fn],Xg.prototype,"title",void 0),tg([Fn({attribute:"title-level",converter:Ln,mode:"fromView"})],Xg.prototype,"titleLevel",void 0),tg([An],Xg.prototype,"childElements",void 0);var Jg,Qg,tm,em,nm,im,om,am,rm,sm,lm=Xg.compose({baseName:"edge-shopping-section",styles:function(t,e){return Td(qg||(qg=j(["\n        :host {\n            overflow: hidden;\n        }\n        fluent-accordion {\n            border: none;\n            margin-bottom: 10px;\n        }\n\n        fluent-accordion-item {\n            border: none;\n        }\n        fluent-accordion-item::part(heading),\n        .heading {\n            margin-bottom: 6px;\n            font-size: ",";\n            padding-left: 12px;\n            padding-right: 10px;\n        }\n\n        .heading {\n            margin-inline-start: 5px;\n            display: inline-block;\n            line-height: ",";\n            margin-bottom: 6px;\n        }\n        fluent-accordion-item::part(region) {\n            padding: 0;\n            flex-direction: column;\n        }\n        .action {\n            color: ",";\n            font-size: ",";\n            min-height: 38px;\n            height: auto;\n            display: flex;\n            margin-inline-start: 16px;\n            align-items: center;\n        }\n    "])),Fo,Go,Za,Fo).withBehaviors(eh(Td(Zg||(Zg=j(["\n                fluent-accordion-item {\n                    color: ",";\n                }\n            "])),oh.ButtonText)))},template:function(t,e){return Qd(Jg||(Jg=j(["\n    <template ",">\n        ","\n        ","\n    </template>\n"])),Bg({property:"childElements",filter:Nh()}),Pp((function(t){return t.accordion}),Qd(Qg||(Qg=j(['\n                <fluent-accordion part="control">\n                    ',"\n                    ","\n                    ","\n                    ",'\n                    <fluent-accordion-item\n                        part="item"\n                        class="item"\n                        expanded="','"\n                        heading-level="','"\n                    >\n                        <svg\n                            class="icon"\n                            part="expanded-icon"\n                            slot="expanded-icon"\n                            width="12"\n                            height="12"\n                            viewBox="0 0 12 12"\n                            xmlns="http://www.w3.org/2000/svg"\n                        >\n                            <path\n                                fill="currentcolor"\n                                d="M11.4551 8.98242L6 3.5332L0.544922 8.98242L0.0175781 8.45508L6 2.4668L11.9824 8.45508L11.4551 8.98242Z"\n                            />\n                        </svg>\n                        <svg\n                            class="icon"\n                            part="collapsed-icon"\n                            slot="collapsed-icon"\n                            width="12"\n                            height="12"\n                            viewBox="0 0 12 12"\n                            fill="none"\n                            xmlns="http://www.w3.org/2000/svg"\n                        >\n                            <path\n                                fill="currentcolor"\n                                d="M11.3613 2.73633L11.8887 3.26367L6 9.15234L0.111328 3.26367L0.638672 2.73633L6 8.09766L11.3613 2.73633Z"\n                                fill="black"\n                            />\n                        </svg>\n\n                        <span part="title" slot="heading">',"</span>\n                        <slot></slot>\n                        ","\n                    </fluent-accordion-item>\n                </fluent-accordion>\n            "])),Pp((function(t){return t.hideTitle}),Qd(tm||(tm=j(["<style>\n                         fluent-accordion-item::part(heading) {\n                            display: none!important;\n                        }\n                        </style>"])))),Pp((function(t){return t.isPane}),Qd(em||(em=j(["<style>\n                        fluent-accordion-item::part(button) {\n                            padding: 20px 0 6px 10px;\n                            padding-left: 10px!important;\n                            height: 100%;\n                        }\n                        fluent-accordion-item::part(expanded-icon), fluent-accordion-item::part(collapsed-icon)  {\n                            stroke: currentColor;\n                            stroke-width: 0.6;\n                        }\n                        .regionBlock::part(region) {\n                            background-color: green;\n                        }\n                        fluent-accordion-item::part(button) {\n                            padding-left: 20px;\n                        }\n                        fluent-accordion-item::part(icon) {\n                            padding-right: 20px;\n                            padding-top: 10px;\n                        }\n                        </style>"])))),Pp((function(t){return t.isBlock}),Qd(nm||(nm=j(["<style>\n                        fluent-accordion-item::part(region) {\n                            margin: 0 20px 20px 20px;\n                            background-color: var(--fill-color);\n                            box-sizing: border-box;\n                            border-radius: 8px;\n                        }\n                        fluent-accordion-item::part(action) {\n                            margin-inline-start: 0px;\n                            height: auto;\n                        }\n                        @media (prefers-color-scheme: dark) {\n                            fluent-accordion-item::part(region) {\n                                background-color: #424242;\n                                border: 1px solid rgba(255, 255, 255, 0.08);\n                            }\n                        }\n                        </style>"])))),Pp((function(t){return t.hasPadding}),Qd(im||(im=j(["<style>\n                            fluent-accordion-item::part(region) {\n                                padding: 10px!important;\n                            }\n                        </style>"])))),(function(t){return t.expanded?"true":"false"}),(function(t){return t.titleLevel}),(function(t){return t.title}),Pp((function(t){return Tg("action",t.childElements)}),Qd(om||(om=j(['\n                                <div class="action" part="action">\n                                    <slot name="action"></slot>\n                                </div>\n                            '])))))),Pp((function(t){return!t.accordion}),Qd(am||(am=j(['\n                <div class="control" part="control">\n                ',"\n                <slot></slot>\n                ","\n                </div>\n            "])),Pp((function(t){return!t.hideTitle}),Qd(rm||(rm=j(['<span\n                    class="heading"\n                    part="title"\n                    slot="heading"\n                    role="heading"\n                    aria-level="','"\n                    >',"</span>"])),(function(t){return t.titleLevel}),(function(t){return t.title}))),Pp((function(t){return Tg("action",t.childElements)}),Qd(sm||(sm=j(['\n                        <div class="action" part="action">\n                            <slot name="action"></slot>\n                        </div>\n                    '])))))))}});function cm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var um,dm=function(t){u(n,t);var e=cm(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).infiniteProductFeedsData=[],t.prefetchedBuffer=[],t.prefetchBufferSize=5,t.paginationThreshold=2e3,t.intersectionObserverCallback=function(e){!e||e.length<1||e.find((function(t){return t.isIntersecting}))&&t.paginate()},t}return r(n,[{key:"connectedCallback",value:function(){Qf(p(n.prototype),"connectedCallback",this).call(this),this.intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback,{}),this.intersectionObserver.observe(this.feedBottom)}},{key:"disconnectedCallback",value:function(){Qf(p(n.prototype),"disconnectedCallback",this).call(this),this.intersectionObserver.disconnect()}},{key:"initializeBuffer",value:function(t){this.getNextFeed=t,this.prefetchedBuffer=[];for(var e=0;e<this.prefetchBufferSize;e++)this.prefetchedBuffer.push(this.getNextFeed())}},{key:"paginate",value:function(){var t;return eg(this,void 0,void 0,o().mark((function e(){var n,i,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.prefetchedBuffer.length>0&&this.getNextFeed)){e.next=10;break}return e.next=3,this.prefetchedBuffer.shift();case 3:if(void 0!==(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:(null===(t=n.shoppingEntities)||void 0===t?void 0:t.length)>0&&this.infiniteProductFeedsData.push(n),i=this.getNextFeed(),this.prefetchedBuffer.push(i),requestAnimationFrame((function(){a.feedBottom.getBoundingClientRect().top<a.paginationThreshold&&a.paginate()}));case 10:case"end":return e.stop()}}),e,this)})))}}]),n}(hd);tg([An],dm.prototype,"infiniteProductFeedsData",void 0),tg([An],dm.prototype,"navigateToRetailer",void 0),tg([An],dm.prototype,"logShowMoreButtonClicked",void 0);var hm=Td(um||(um=j(["\n.section-separator {\n    width: 376px\n    position: absolute;\n    border: 1px solid #F1F1F1;\n    margin-bottom: 0px;\n    margin-top: 0px;\n    border-bottom: unset;\n    left: 0px;\n    right: 0px;\n    opacity: var(--section-separator-opacity, 1);\n}\n\n@media (prefers-color-scheme: dark) {\n    .section-separator {\n        opacity: var(--section-separator-opacity, 0.08);\n    }\n}\n\n.feed-bottom {\n    height: 1000px;\n    width: 100%;\n    position: absolute;\n    left: 0px;\n    right: 0px;\n    bottom: 0px;\n    visibility: hidden;\n}\n"])));function pm(t,e,n){return{index:t,removed:e,addedCount:n}}function fm(t,e,n,i,o,a){let r=0,s=0;const l=Math.min(n-e,a-o);if(0===e&&0===o&&(r=function(t,e,n){for(let i=0;i<n;++i)if(t[i]!==e[i])return i;return n}(t,i,l)),n===t.length&&a===i.length&&(s=function(t,e,n){let i=t.length,o=e.length,a=0;for(;a<n&&t[--i]===e[--o];)a++;return a}(t,i,l-r)),o+=r,a-=s,(n-=s)-(e+=r)==0&&a-o==0)return nn;if(e===n){const t=pm(e,[],0);for(;o<a;)t.removed.push(i[o++]);return[t]}if(o===a)return[pm(e,[],n-e)];const c=function(t){let e=t.length-1,n=t[0].length-1,i=t[e][n];const o=[];for(;e>0||n>0;){if(0===e){o.push(2),n--;continue}if(0===n){o.push(3),e--;continue}const a=t[e-1][n-1],r=t[e-1][n],s=t[e][n-1];let l;l=r<s?r<a?r:a:s<a?s:a,l===a?(a===i?o.push(0):(o.push(1),i=a),e--,n--):l===r?(o.push(3),e--,i=r):(o.push(2),n--,i=s)}return o.reverse(),o}(function(t,e,n,i,o,a){const r=a-o+1,s=n-e+1,l=new Array(r);let c,u;for(let t=0;t<r;++t)l[t]=new Array(s),l[t][0]=t;for(let t=0;t<s;++t)l[0][t]=t;for(let n=1;n<r;++n)for(let a=1;a<s;++a)t[e+a-1]===i[o+n-1]?l[n][a]=l[n-1][a-1]:(c=l[n-1][a]+1,u=l[n][a-1]+1,l[n][a]=c<u?c:u);return l}(t,e,n,i,o,a)),u=[];let d,h=e,p=o;for(let t=0;t<c.length;++t)switch(c[t]){case 0:void 0!==d&&(u.push(d),d=void 0),h++,p++;break;case 1:void 0===d&&(d=pm(h,[],0)),d.addedCount++,h++,d.removed.push(i[p]),p++;break;case 2:void 0===d&&(d=pm(h,[],0)),d.addedCount++,h++;break;case 3:void 0===d&&(d=pm(h,[],0)),d.removed.push(i[p]),p++}return void 0!==d&&u.push(d),u}const gm=Array.prototype.push;function mm(t,e,n,i){const o=pm(e,n,i);let a=!1,r=0;for(let e=0;e<t.length;e++){const n=t[e];if(n.index+=r,a)continue;const i=(s=o.index,l=o.index+o.removed.length,c=n.index,u=n.index+n.addedCount,l<c||u<s?-1:l===c||u===s?0:s<c?l<u?l-c:u-c:u<l?u-s:l-s);if(i>=0){t.splice(e,1),e--,r-=n.addedCount-n.removed.length,o.addedCount+=n.addedCount-i;const s=o.removed.length+n.removed.length-i;if(o.addedCount||s){let t=n.removed;if(o.index<n.index){const e=o.removed.slice(0,n.index-o.index);gm.apply(e,t),t=e}if(o.index+o.removed.length>n.index+n.addedCount){const e=o.removed.slice(n.index+n.addedCount-o.index);gm.apply(t,e)}o.removed=t,n.index<o.index&&(o.index=n.index)}else a=!0}else if(o.index<n.index){a=!0,t.splice(e,0,o),e++;const i=o.addedCount-o.removed.length;n.index+=i,r+=i}}var s,l,c,u;a||t.push(o)}function vm(t,e){let n=[];const i=function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];mm(e,i.index,i.removed,i.addedCount)}return e}(e);for(let e=0,o=i.length;e<o;++e){const o=i[e];1!==o.addedCount||1!==o.removed.length?n=n.concat(fm(t,o.index,o.index+o.addedCount,o.removed,0,o.removed.length)):o.removed[0]!==t[o.index]&&n.push(o)}return n}let ym=!1;function Cm(t,e){let n=t.index;const i=e.length;return n>i?n=i-t.addedCount:n<0&&(n=i+t.removed.length+n-t.addedCount),n<0&&(n=0),t.index=n,t}class bm extends Sn{constructor(t){super(t),this.oldCollection=void 0,this.splices=void 0,this.needsQueue=!0,this.call=this.flush,Reflect.defineProperty(t,"$fastController",{value:this,enumerable:!1})}subscribe(t){this.flush(),super.subscribe(t)}addSplice(t){void 0===this.splices?this.splices=[t]:this.splices.push(t),this.needsQueue&&(this.needsQueue=!1,un.queueUpdate(this))}reset(t){this.oldCollection=t,this.needsQueue&&(this.needsQueue=!1,un.queueUpdate(this))}flush(){const t=this.splices,e=this.oldCollection;if(void 0===t&&void 0===e)return;this.needsQueue=!0,this.splices=void 0,this.oldCollection=void 0;const n=void 0===e?vm(this.source,t):fm(this.source,0,this.source.length,e,0,e.length);this.notify(n)}}const Sm=Object.freeze({positioning:!1,recycle:!0});function xm(t,e,n,i){t.bind(e[n],i)}function Em(t,e,n,i){const o=Object.create(i);o.index=n,o.length=e.length,t.bind(e[n],o)}class Am{constructor(t,e,n,i,o,a){this.location=t,this.itemsBinding=e,this.templateBinding=i,this.options=a,this.source=null,this.views=[],this.items=null,this.itemsObserver=null,this.originalContext=void 0,this.childContext=void 0,this.bindView=xm,this.itemsBindingObserver=En.binding(e,this,n),this.templateBindingObserver=En.binding(i,this,o),a.positioning&&(this.bindView=Em)}bind(t,e){this.source=t,this.originalContext=e,this.childContext=Object.create(e),this.childContext.parent=t,this.childContext.parentContext=this.originalContext,this.items=this.itemsBindingObserver.observe(t,this.originalContext),this.template=this.templateBindingObserver.observe(t,this.originalContext),this.observeItems(!0),this.refreshAllViews()}unbind(){this.source=null,this.items=null,null!==this.itemsObserver&&this.itemsObserver.unsubscribe(this),this.unbindAllViews(),this.itemsBindingObserver.disconnect(),this.templateBindingObserver.disconnect()}handleChange(t,e){t===this.itemsBinding?(this.items=this.itemsBindingObserver.observe(this.source,this.originalContext),this.observeItems(),this.refreshAllViews()):t===this.templateBinding?(this.template=this.templateBindingObserver.observe(this.source,this.originalContext),this.refreshAllViews(!0)):this.updateViews(e)}observeItems(t=!1){if(!this.items)return void(this.items=nn);const e=this.itemsObserver,n=this.itemsObserver=En.getNotifier(this.items),i=e!==n;i&&null!==e&&e.unsubscribe(this),(i||t)&&n.subscribe(this)}updateViews(t){const e=this.childContext,n=this.views,i=[],o=this.bindView;let a=0;for(let e=0,o=t.length;e<o;++e){const o=t[e],r=o.removed;i.push(...n.splice(o.index+a,r.length)),a-=o.addedCount}const r=this.items,s=this.template;for(let a=0,l=t.length;a<l;++a){const l=t[a];let c=l.index;const u=c+l.addedCount;for(;c<u;++c){const t=n[c],a=t?t.firstChild:this.location,l=this.options.recycle&&i.length>0?i.shift():s.create();n.splice(c,0,l),o(l,r,c,e),l.insertBefore(a)}}for(let t=0,e=i.length;t<e;++t)i[t].dispose();if(this.options.positioning)for(let t=0,e=n.length;t<e;++t){const i=n[t].context;i.length=e,i.index=t}}refreshAllViews(t=!1){const e=this.items,n=this.childContext,i=this.template,o=this.location,a=this.bindView;let r=e.length,s=this.views,l=s.length;if((0===r||t)&&(Zd.disposeContiguousBatch(s),l=0),0===l){this.views=s=new Array(r);for(let t=0;t<r;++t){const r=i.create();a(r,e,t,n),s[t]=r,r.insertBefore(o)}}else{let t=0;for(;t<r;++t)if(t<l){a(s[t],e,t,n)}else{const r=i.create();a(r,e,t,n),s.push(r),r.insertBefore(o)}const c=s.splice(t,l-t);for(t=0,r=c.length;t<r;++t)c[t].dispose()}}unbindAllViews(){const t=this.views;for(let e=0,n=t.length;e<n;++e)t[e].unbind()}}class Tm extends kd{constructor(t,e,n){super(),this.itemsBinding=t,this.templateBinding=e,this.options=n,this.createPlaceholder=un.createBlockPlaceholder,function(){if(ym)return;ym=!0,En.setArrayObserverFactory((t=>new bm(t)));const t=Array.prototype;if(t.$fastPatch)return;Reflect.defineProperty(t,"$fastPatch",{value:1,enumerable:!1});const e=t.pop,n=t.push,i=t.reverse,o=t.shift,a=t.sort,r=t.splice,s=t.unshift;t.pop=function(){const t=this.length>0,n=e.apply(this,arguments),i=this.$fastController;return void 0!==i&&t&&i.addSplice(pm(this.length,[n],0)),n},t.push=function(){const t=n.apply(this,arguments),e=this.$fastController;return void 0!==e&&e.addSplice(Cm(pm(this.length-arguments.length,[],arguments.length),this)),t},t.reverse=function(){let t;const e=this.$fastController;void 0!==e&&(e.flush(),t=this.slice());const n=i.apply(this,arguments);return void 0!==e&&e.reset(t),n},t.shift=function(){const t=this.length>0,e=o.apply(this,arguments),n=this.$fastController;return void 0!==n&&t&&n.addSplice(pm(0,[e],0)),e},t.sort=function(){let t;const e=this.$fastController;void 0!==e&&(e.flush(),t=this.slice());const n=a.apply(this,arguments);return void 0!==e&&e.reset(t),n},t.splice=function(){const t=r.apply(this,arguments),e=this.$fastController;return void 0!==e&&e.addSplice(Cm(pm(+arguments[0],t,arguments.length>2?arguments.length-2:0),this)),t},t.unshift=function(){const t=s.apply(this,arguments),e=this.$fastController;return void 0!==e&&e.addSplice(Cm(pm(0,[],arguments.length),this)),t}}(),this.isItemsBindingVolatile=En.isVolatileBinding(t),this.isTemplateBindingVolatile=En.isVolatileBinding(e)}createBehavior(t){return new Am(t,this.itemsBinding,this.isItemsBindingVolatile,this.templateBinding,this.isTemplateBindingVolatile,this.options)}}function Dm(t,e,n=Sm){return new Tm(t,"function"==typeof e?e:()=>e,n)}var km,Im,wm,Pm=dm.compose({baseName:"infinite-product-feeds",shadowOptions:{delegatesFocus:!0},styles:hm,template:function(t,e){return Qd(km||(km=j(['\n    <template>\n        <div class="infinite-product-feeds-container">\n            ','\n            <div class="feed-bottom" ',"></div>\n        </div>\n    </template>\n"])),Pp((function(t){var e;return(null===(e=t.infiniteProductFeedsData)||void 0===e?void 0:e.length)>0}),Qd(Im||(Im=j(['\n                <div class="infinite-product-feeds">\n                    ',"\n                </div>"])),Dm((function(t){return t.infiniteProductFeedsData}),Qd(wm||(wm=j(['\n                        <msft-product-feed\n                            class="product-feed"\n                            title="','"\n                            :shoppingEntities="','"\n                            :navigateToRetailer="','"\n                            :logShowMoreButtonClicked="','">\n                        </msft-product-feed>\n                        <hr class="section-separator" aria-hidden="true">\n                    '])),(function(t){return t.title}),(function(t){return t.shoppingEntities}),(function(t,e){return e.parent.navigateToRetailer}),(function(t,e){return e.parent.logShowMoreButtonClicked}))))),Th("feedBottom"))}});function Om(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rm(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Rm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Mm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Nm,Lm=function(t){u(n,t);var e=Mm(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).messageVisible=!1,t.setItems=function(){var e,n=Om(t.slottedFeedbackItems);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.addEventListener("selected-change",t.handleItemSelected),i.addEventListener("menu-changed",t.handleMenuChanged)}}catch(t){n.e(t)}finally{n.f()}t.currentSelected=t.slottedFeedbackItems[0]},t.resetItems=function(){t.messageVisible=!1;var e,n=Om(t.slottedFeedbackItems);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.removeEventListener("selected-change",t.handleItemSelected),i.removeEventListener("menu-changed",t.handleMenuChanged)}}catch(t){n.e(t)}finally{n.f()}},t.handleItemSelected=function(e){var n=e.target;n!==t.currentSelected&&(t.currentSelected.selected=!1,t.currentSelected.menuVisible=!1,t.messageVisible=!1),t.handleSelected(n)},t.handleMenuChanged=function(e){var n=e.target;t.hideMessage(n)},t}return r(n,[{key:"messageVisibleChanged",value:function(){this.$emit("message-visibility")}},{key:"slottedFeedbackItemsChanged",value:function(){this.$fastController.isConnected&&this.setItems()}},{key:"disconnectedCallback",value:function(){Qf(p(n.prototype),"disconnectedCallback",this).call(this),this.menuTimer&&clearTimeout(this.menuTimer),this.resetItems()}},{key:"handleMenuTimer",value:function(t){this.menuTimer&&(t.toggleMenu(!1),this.messageVisible=!1,clearTimeout(this.menuTimer))}},{key:"handleSelected",value:function(t){this.currentSelected=t,t.selected=!t.selected,t.selected?t.toggleMenu(!0):(t.toggleMenu(!1),this.menuTimer&&(this.messageVisible=!1,clearTimeout(this.menuTimer))),this.hideMessage(t)}},{key:"hideMessage",value:function(t){var e=this;this.calloutDuration&&t.menuVisible&&t.showMessage&&(this.messageVisible=!0,this.menuTimer=setTimeout((function(){e.handleMenuTimer(t)}),this.calloutDuration))}}]),n}(hd);function _m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}tg([Fn({attribute:"callout-duration"})],Lm.prototype,"calloutDuration",void 0),tg([An],Lm.prototype,"messageVisible",void 0),tg([An],Lm.prototype,"slottedFeedbackItems",void 0),function(t){t.top="top",t.bottom="bottom"}(Nm||(Nm={}));var Fm,Hm=function(t){u(n,t);var e=_m(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).selected=!1,t.flyoutVerticalPosition=Nm.bottom,t.menuVisible=!1,t.slottedMenu=[],t.showMessage=!1,t.handleClick=function(e){t.handleSelected(e)},t.handleMenuKeydown=function(e){if(27===e.keyCode)t.toggleMenu(!1),document.activeElement!==l(t)&&t.anchorElement.focus()},t.toggleMenu=function(e){t.menuVisible=e,t.showMessage=null===t.querySelector('[role="menu"]'),t.$emit("menu-toggled"),un.queueUpdate(t.setRegionProps)},t.menuItemChange=function(){t.showMessage=!0,t.$emit("menu-changed"),document.activeElement!==l(t)&&t.anchorElement&&t.anchorElement.focus()},t.setRegionProps=function(){t.menuVisible&&t.regionElement&&(t.regionElement.anchorElement=t.anchorElement)},t}return r(n,[{key:"handleFocusOut",value:function(t){return this.parentElement instanceof Lm&&!this.showMessage&&this.slottedMenu[0]&&(this.slottedMenu[0].contains(t.relatedTarget)||this.toggleMenu(!1)),!1}},{key:"handleRegionLoaded",value:function(t){var e=this;un.queueUpdate((function(){if(e.menuVisible&&e.slottedMenu.length>0&&e.slottedMenu[0]instanceof Ip){var t=e.slottedMenu[0];un.queueUpdate((function(){return t.focus()}))}}))}},{key:"connectedCallback",value:function(){var t=this;Qf(p(n.prototype),"connectedCallback",this).call(this),un.queueUpdate(this.setRegionProps),un.queueUpdate((function(){t.showMessage=null===t.querySelector('[role="menu"]')}))}},{key:"disconnectedCallback",value:function(){var t=this;Qf(p(n.prototype),"disconnectedCallback",this).call(this);var e=this.slottedMenu[0];e&&(e.childNodes.forEach((function(e){e.addEventListener("change",t.menuItemChange)})),e.removeEventListener("keydown",this.handleMenuKeydown))}},{key:"handleSelected",value:function(t){this.$emit("selected-change",t)}}]),n}(hd);tg([Fn({mode:"boolean"})],Hm.prototype,"selected",void 0),tg([Fn({attribute:"flyout-vertical-position",mode:"fromView"})],Hm.prototype,"flyoutVerticalPosition",void 0),tg([Fn({attribute:"aria-label",mode:"fromView"})],Hm.prototype,"ariaLabel",void 0),tg([An],Hm.prototype,"menuVisible",void 0),tg([An],Hm.prototype,"slottedMenu",void 0),tg([An],Hm.prototype,"showMessage",void 0);var Bm,Um,Vm,Gm,Wm,$m,zm=Lm.compose({baseName:"micro-feedback",styles:function(t,e){return Td(Wm||(Wm=j(["\n        "," :host {\n            grid-auto-flow: column;\n            grid-column-gap: 4px;\n        }\n    "])),ih("inline-grid"))},template:function(t,e){return Qd($m||($m=j(["\n        <slot\n            ","\n        ></slot>\n    "])),Fh({filter:Nh(),property:"slottedFeedbackItems"}))}}),Km=Hm.compose({baseName:"micro-feedback-item",styles:function(t,e){return Td(Fm||(Fm=j(["\n        "," :host {\n        }\n\n        fluent-anchored-region {\n            z-index: 1;\n        }\n\n        fluent-button::part(content) {\n            display: flex;\n        }\n\n        .hidden {\n            display: none;\n        }\n\n        .visible {\n            display: flex;\n        }\n    "])),ih("grid"))},template:function(t,e){return Qd(Bm||(Bm=j(['\n        <template\n            @focusout="','"\n        >\n            <',"\n                ",'\n                appearance="stealth"\n                class="button"\n                part="button"\n                aria-label="','"\n                aria-pressed="','"\n                @click="','"\n            >\n                <span name="unselected-glyph" class="unselected-glyph ','">\n                    <slot name="unselected-glyph">','</slot>\n                </span>\n                <span name="selected-glyph" class="selected-glyph ','">\n                    <slot name="selected-glyph">',"</slot>\n                </span>\n                <slot></slot>\n            </",">\n            ","\n        </template>\n    "])),(function(t,e){return t.handleFocusOut(e.event)}),t.tagFor(dp),Th("anchorElement"),(function(t){return t.ariaLabel}),(function(t){return t.selected}),(function(t,e){return t.handleClick(e.event)}),(function(t){return t.selected?"hidden":"visible"}),e.unselectedGlyph||"",(function(t){return t.selected?"visible":"hidden"}),e.selectedGlyph||"",t.tagFor(dp),Pp((function(t){return t.menuVisible}),Qd(Um||(Um=j(["\n                <","\n                    ",'\n                    class="flyout"\n                    part="flyout"\n                    vertical-positioning-mode="locktodefault"\n                    vertical-default-position="','"\n                    vertical-scaling="content"\n                    horizontal-positioning-mode="locktodefault"\n                    horizontal-scaling="content"\n                    horizontal-inset="true"\n                    auto-update-mode="auto"\n                    @loaded="','"\n                >\n                    ',"\n                    ","\n                </",">"])),t.tagFor(Mp),Th("regionElement"),(function(t){return t.flyoutVerticalPosition}),(function(t,e){return t.handleRegionLoaded(e.event)}),Pp((function(t){return!t.showMessage}),Qd(Vm||(Vm=j(['<slot\n                            name="menu"\n                            ',"\n                        ></slot>"])),Fh({filter:Nh('[role="menu"]'),property:"slottedMenu"}))),Pp((function(t){return t.showMessage}),Qd(Gm||(Gm=j(['<slot name="feedback-message"></slot>'])))),t.tagFor(Mp))))}});function Ym(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var jm,qm,Zm=function(t){u(n,t);var e=Ym(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n)}(hd);tg([Fn],Zm.prototype,"currentPrice",void 0),tg([Fn],Zm.prototype,"oldPrice",void 0),tg([Fn],Zm.prototype,"title",void 0),tg([Fn],Zm.prototype,"savings",void 0),tg([Fn],Zm.prototype,"retailer",void 0),tg([Fn],Zm.prototype,"isAd",void 0),tg([Fn],Zm.prototype,"hasArrow",void 0),tg([Fn],Zm.prototype,"hasGraph",void 0);var Xm,Jm,Qm,tv,ev,nv=Td(jm||(jm=j(["\n    :host {\n        --content-max-lines: 2;\n        outline: none;\n        font-family: ",";\n        font-size: ",";\n        font-weight: 600;\n        line-height: ",";\n        min-width: calc("," * 1px);\n        border-radius: calc("," * 1px);\n        box-sizing: border-box;\n        color: ",';\n        fill: currentcolor;\n        cursor: pointer;\n        height: auto;\n        position: relative;\n        width: 100%;\n        box-sizing: border-box;\n        align-items: center;\n        text-align: left;\n        margin-bottom: 12px;\n    }\n    .control {\n        display: flex!important;\n        flex-direction: row;\n        justify-content: space-between;\n    }\n    .headerMargin {\n        width: calc(100% - 40px)!important;\n        margin: auto;\n    }\n    .phTextArrow {\n        display: flex;\n        flex-direction: row;\n        margin-top: 4px;\n        margin-bottom: 2px;\n    }\n    ::slotted([slot="arrow"]) {\n        margin-left: 8px;\n        margin-top: 20px;\n    }\n    .divAttribution {\n        display: grid;\n        grid-template-columns: auto minmax(0px, 1fr);\n    }\n    .txtRetailer {\n        margin-left: 3px;\n        vertical-align: top;\n    }\n    .divAttrWrapper {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n    }\n    .divTextContent {\n        display: flex;\n        flex-direction: column;\n        row-gap: 4px;\n    }\n    .txtHeader {\n        font-size: 16px;\n        line-height: 22px;\n        font-weight: 600;\n        margin: 0px;\n    }\n    .txtSavings {\n        font-weight: 600;\n        line-height: 40px;\n        color: var(--text-price-savings-color);\n    }\n    .txtCurrentPrice {\n        font-size: 14px;\n        font-weight: 600;\n        line-height: 20px;\n        color: var(--text-price-savings-color);\n    }\n    .txtOlPrice {\n        font-size: 14px;\n        font-weight: 600;\n        line-height: 20px;\n        color: var(--neutral-foreground-hint);\n    }\n    .divPriceWrapper {\n        display: flex;\n        flex-direction: row;\n        column-gap: 8px;\n    }\n'])),No,Fo,Ho,Gh,Oo,Wr).withBehaviors(eh(Td(qm||(qm=j(["\n        :host {\n            forced-color-adjust: auto;\n        }\n    "]))))),iv=Zm.compose({baseName:"notification-header",shadowOptions:{delegatesFocus:!0},styles:nv,template:function(t,e){return Qd(Xm||(Xm=j(['\n    <template>\n        <div class="divHeaderWrapper control headerMargin" style="border-bottom: ',";\n        padding-bottom: ",';"\n        part="control">\n            <div class="divTextContent" part="divTextContent" >\n                <h2 class="txtHeader" title="','">\n                    ','<br>\n                    <div class="phTextArrow">\n                        <span class="txtSavings"  style="font-size: ',' ">',"</span>\n                        ","\n                    </div>\n                </h2>\n                ","\n                ",'\n            </div>\n            <slot name="image"></slot>\n        </div>\n    </template>\n'])),(function(t){return t.hasGraph?"1px solid #F1F1F1":"none"}),(function(t){return t.hasGraph?"12px":"0px"}),(function(t){return t.title+" "+t.savings}),(function(t){return t.title}),(function(t){return t.hasArrow?"40px":"32px"}),(function(t){return t.savings}),Pp((function(t){return t.hasArrow}),Qd(Jm||(Jm=j([' <slot name="arrow"></slot>'])))),Pp((function(t){return t.currentPrice&&t.oldPrice}),Qd(Qm||(Qm=j(['<div class="divPriceWrapper">\n                        <span class="txtCurrentPrice" title="','">','</span>\n                        <s class="txtOlPrice" title="','">',"</s>\n                    </div>"])),(function(t){return t.currentPrice}),(function(t){return t.currentPrice}),(function(t){return t.oldPrice}),(function(t){return t.oldPrice}))),Pp((function(t){return t.retailer}),Qd(tv||(tv=j(['<div class="divAttrWrapper">\n                    <msft-attribution class="divAttribution" part="divAttribution">\n                        <slot name="icon"></slot>\n                        <span class="txtRetailer" title="','">',"</span>\n                    </msft-attribution>\n                    ","\n                    </div>"])),(function(t){return t.retailer}),(function(t){return t.retailer}),Pp((function(t){return t.isAd}),Qd(ev||(ev=j(['<slot name="adslug"></slot>'])))))))}});function ov(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var av,rv,sv,lv,cv=function(t){u(n,t);var e=ov(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).otherImagesMaxAllowed=4,t}return r(n,[{key:"dataChanged",value:function(){var t;this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0}},{key:"otherImagesChanged",value:function(){var t,e=this;this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0,this.otherImages&&this.otherImages.length>4&&(this.otherImages.forEach((function(t,n){var i;n>e.otherImagesMaxAllowed-1&&(null===(i=t.style)||void 0===i||i.setProperty("display","none"))})),this.additionalImagesCount=this.otherImages.length-this.otherImagesMaxAllowed)}},{key:"hasOtherItemsTitle",value:function(){return!!this.otherItemsTitle}},{key:"connectedCallback",value:function(){var t;Qf(p(n.prototype),"connectedCallback",this).call(this),this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0}}]),n}(Og);tg([An],cv.prototype,"hasOtherItems",void 0),tg([An],cv.prototype,"otherImages",void 0),tg([An],cv.prototype,"additionalImagesCount",void 0),tg([Fn],cv.prototype,"mainTitle",void 0),tg([Fn],cv.prototype,"progressPercentage",void 0),tg([Fn],cv.prototype,"otherItemsTitle",void 0),tg([Fn],cv.prototype,"subTitle",void 0);var uv,dv,hv,pv,fv,gv,mv,vv,yv=function(t,e){return function(n){return Qd(uv||(uv=j(["\n    <slot name=",">\n        <span class="," part=",">\n            ","\n        </span>\n    </slot>\n"])),t,t,t,(function(t){return t[e]}))}},Cv=cv.compose({baseName:"package-tracker-card",template:function(t,e){return Qd(dv||(dv=j(["\n    <","\n        image-layout=","\n        card-fill-color=","\n        gradient-color-end=","\n        target=",'\n        label="','"\n        labelledby="','"\n        describedby="','"\n        class="base-card"\n        part="base-card"\n        ?no-footer=',"\n        :heading=","\n        :link=","\n        :footerContent=","\n        ",'\n    >\n        <slot name="heading-icon" slot="heading-icon"></slot>\n        <slot name="more-actions" slot="more-actions"></slot>\n        <div class="content-container" part="content-container" ','>\n            <div class="main-container" part="main-container">\n                <slot\n                    name="main-image"\n                    ','\n                ></slot>\n                <div class="main-content" part="main-content">\n                    ','\n                    <slot name="progress-bar">\n                        <',' class="progress-bar" part="progress-bar" min="0" max="100" value="','" aria-hidden="true">\n                        </',">\n                    </slot>\n                    ","\n                    </slot>\n                </div>\n            </div>\n            ",'\n            <div\n                class="other-items-container ','"\n                part="other-items-container"\n            >\n                    ','\n                <div\n                    class="other-items-image-container ','"\n                    part="other-items-image-container"\n                >\n                    <slot name="other-image"\n                    ',"\n                    ></slot>\n                    ","\n                </div>\n            </div>\n        </div>\n    </",">\n"])),t.tagFor(Og),(function(t){return t.imageLayout}),(function(t){return t.cardFillColor}),(function(t){return t.gradientColorEnd}),(function(t){return t.target}),(function(t){return t.label}),(function(t){return t.labelledby}),(function(t){return t.describedby}),(function(t){return!t.hasFooter()}),(function(t){return t.heading}),(function(t){return t.link}),(function(t){return t.footerContent}),Th("baseCard"),Th("contentContainer"),Th("mainImage"),yv("main-title","mainTitle"),t.tagFor(Ef),(function(t){return t.progressPercentage}),t.tagFor(Ef),Pp((function(t){return t.subTitle}),Qd(hv||(hv=j(["\n                            ","\n                        "])),yv("sub-title","subTitle"))),Pp((function(t){return t.hasOtherItems}),Qd(pv||(pv=j(['\n                    <slot name="divider">\n                        <',' class="divider" part="divider" aria-hidden="true">\n                        </',">\n                    </slot>\n            "])),t.tagFor(kf),t.tagFor(kf))),(function(t){return t.hasOtherItems?"":"other-items-container__hidden"}),Pp((function(t){return t.otherItemsTitle}),Qd(fv||(fv=j(["\n                            ","\n                        "])),yv("other-items-title","otherItemsTitle"))),(function(t){return t.otherItemsTitle?"":"other-items-image-container__no-other-items"}),Fh("otherImages"),Pp((function(t){return t.additionalImagesCount}),Qd(gv||(gv=j(['\n                            <span\n                                class="additional-images-counter"\n                                part="additional-images-counter"\n                            >\n                                +',"\n                            </span>\n                        "])),(function(t){return t.additionalImagesCount}))),t.tagFor(Og))},styles:function(t,e){return Td(av||(av=j(["\n        "," :host {\n            --default-gutter: 12;\n            --card-width-number: 100%;\n            border-radius: calc("," * 1px);\n            display: flex;\n            justify-content: flex-start;\n            width: 100%;\n        }\n        .base-card {\n            --card-width: 100%;\n            height: auto;\n            position: relative;\n        }\n\n        ::part(heading) {\n            max-height: 24px;\n            margin-bottom: 8px;\n            color: ",';\n            z-index: 1;\n        }\n\n        ::part(content) {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: flex-start;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        ::part(heading-link) {\n            font-weight: 600;\n        }\n\n        .content-container {\n            display: flex;\n            flex-direction: column;\n            box-sizing: border-box;\n            background: transparent;\n            outline: none;\n            text-decoration: none;\n            color: inherit;\n            border-radius: inherit;\n            border: 1px solid rgba(0, 0, 0, 0.08);\n            padding: 12px;\n        }\n\n        .main-container {\n            display: flex;\n            box-sizing: border-box;\n        }\n\n        .main-content {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            align-items: flex-start;\n            justify-content: center;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        ::slotted([slot="main-image"]) {\n            margin-inline-end: calc(var(--default-gutter) * 1px);\n            align-self: center;\n            justify-self: center;\n            --elevation: 4;\n            ',";\n            border-radius: 4px;\n            box-shadow: unset;\n        }\n\n        .main-title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            max-width: 100%;\n            margin-bottom: 3px;\n            font-size: ",";\n            line-height: ",";\n            font-weight: 600;\n        }\n\n        .sub-title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            max-width: 100%;\n            color: ",";\n            max-height: calc(var(--sub-title-max-lines, 2) * ",");\n            line-height: ",";\n            -webkit-line-clamp: var(--sub-title-max-lines, 2);\n        }\n\n        .divider {\n            margin: 0;\n            margin-top: calc(var(--default-gutter) * 1px);\n            border-top: calc("," * 1px * 2) solid ",";\n            transform: scale(\n                100%,\n                1\n            );\n        }\n\n        .other-items-container {\n            display: flex;\n            flex-direction: column;\n            box-sizing: border-box;\n            text-overflow: ellipsis;\n            margin-top: calc(var(--default-gutter) * 1px);\n            margin-bottom: 4px;\n        }\n\n        .other-items-container__hidden {\n            display: none;\n        }\n\n        .other-items-image-container {\n            position: relative;\n            display: flex;\n            grid-gap: 16px;\n            margin-top: 8px;\n        }\n\n        .other-items-image-container__no-other-items {\n            margin-top: 4px;\n        }\n\n        .other-items-title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            max-width: 100%;\n            color: ",";\n            height: calc(var(--other-title-max-lines, 1) * ",");\n            font-size: ",";\n            line-height: ",";\n            -webkit-line-clamp: var(--other-title-max-lines, 1);\n        }\n\n        .additional-images-counter {\n            position: absolute;\n            top: 50%;\n            right: calc(66px / 2);\n            transform: translate(+50%, -50%);\n            height: 32px;\n            width: 32px;\n            border-radius: 16px;\n            background-color: ",';\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        ::slotted([slot="other-image"]) {\n            height: 66px;\n            width: 66px;\n            align-self: center;\n            justify-self: center;\n            --elevation: 4;\n            ',";\n            border-radius: calc("," * 2px);\n        }\n\n        .progress-bar {\n            width: calc(100% - 11px);\n            height: 3px;\n        }\n\n        .progress-bar::part(determinate) {\n            background: var(--progress-determinate-background, ",");\n        }\n    "])),ih("inline-flex"),Oo,zr,vp,Lo,_o,zr,Ho,Ho,Ro,Mr,Wr,_o,Lo,_o,xr,vp,Oo,cr).withBehaviors(eh(Td(rv||(rv=j(["\n                .main-title,\n                .sub-title,\n                .other-items-title {\n                    color: ","!important;\n                }\n\n                .progress-bar::part(determinate) {\n                    background: ",";\n                }\n            "])),oh.LinkText,oh.FieldText)))}});cv.compose({baseName:"package-tracker-card-link-only",template:function(t,e){return Qd(mv||(mv=j(["\n    <template\n        card-fill-color=",'\n    >\n        <div class="main-container" part="main-container">\n            <slot\n                name="main-image"\n                ','\n            ></slot>\n            <div class="main-content" part="main-content">\n            <slot name="main-title">\n        <a\n            href="','"\n            class="main-title"\n            part="main-title"\n        >\n            ','\n        </a>\n    </slot>\n                <slot name="progress-bar">\n                    <',' class="progress-bar" part="progress-bar" min="0" max="100" value="','" aria-hidden="true">\n                    </',">\n                </slot>\n                ","\n                </slot>\n            </div>\n        </div>\n    </template>\n"])),(function(t){return t.cardFillColor}),Th("mainImage"),(function(t){return t.link}),(function(t){return t.mainTitle}),t.tagFor(Ef),(function(t){return t.progressPercentage}),t.tagFor(Ef),Pp((function(t){return t.subTitle}),Qd(vv||(vv=j(["\n                        ","\n                    "])),yv("sub-title","subTitle"))))},styles:function(t,e){return Td(sv||(sv=j(["\n        ","\n        "," :host {\n            --default-gutter: 12;\n            --card-width-number: 100%;\n            border-radius: calc(",' * 1px);\n            padding: 16px 0 12px;\n            --card-width: 100%;\n            height: auto;\n            position: relative;\n        }\n\n        .main-container {\n            display: flex;\n            box-sizing: border-box;\n            padding: 0 calc(var(--default-gutter) * 1px);\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        .main-content {\n            display: flex;\n            flex-direction: column;\n            align-items: flex-start;\n            justify-content: center;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        ::slotted([slot="main-image"]) {\n            margin-inline-end: calc(var(--default-gutter) * 1px);\n            align-self: center;\n            justify-self: center;\n            --elevation: 4;\n            ',";\n            border-radius: 4px;\n            box-shadow: unset;\n        }\n\n        .main-title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            max-width: 100%;\n            margin-bottom: 3px;\n            font-size: ",";\n            line-height: ",";\n            font-weight: 600;\n        }\n\n        .main-title:"," {\n            text-decoration: underline;\n            outline: none;\n        }\n\n        .main-title,\n        .main-title:hover,\n        .main-title:active,\n        .main-title:visited {\n            color: ",';\n            text-decoration: none;\n            -webkit-line-clamp: 1;\n        }\n\n        .main-title::after {\n            position: absolute;\n            content: "";\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n        }\n\n        .sub-title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            max-width: 100%;\n            color: ',";\n            max-height: calc(var(--sub-title-max-lines, 2) * ",");\n            font-size: ",";\n            line-height: ",";\n            -webkit-line-clamp: var(--sub-title-max-lines, 2);\n        }\n\n\n        .progress-bar {\n            width: 100%;\n            height: 3px;\n            margin-bottom: 10px;\n        }\n\n        .progress-bar::part(determinate) {\n            background: var(--progress-determinate-background, ",");\n        }\n    "])),Sp(t,e),ih("inline-flex"),Oo,vp,Lo,_o,Vh,Wr,zr,Ho,Fo,Ho,cr).withBehaviors(eh(Td(lv||(lv=j(["\n                .main-title,\n                .sub-title {\n                    color: ","!important;\n                }\n\n                .progress-bar::part(determinate) {\n                    background: ",";\n                }\n            "])),oh.LinkText,oh.FieldText)))}});function bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Sv,xv,Ev=function(t){u(n,t);var e=bv(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).isFirst=!1,t.isPane=!1,t.isVideoCard=!1,t.hasAnnotation=!1,t}return r(n)}(zh);tg([Fn],Ev.prototype,"price",void 0),tg([Fn],Ev.prototype,"savings",void 0),tg([Fn],Ev.prototype,"lowest",void 0),tg([Fn],Ev.prototype,"retailer",void 0),tg([Fn],Ev.prototype,"description",void 0),tg([Fn],Ev.prototype,"isAd",void 0),tg([Fn],Ev.prototype,"isProductHistoryPane",void 0),tg([An],Ev.prototype,"isFirst",void 0),tg([An],Ev.prototype,"isPane",void 0),tg([An],Ev.prototype,"isVideoCard",void 0),tg([An],Ev.prototype,"hasAnnotation",void 0);var Av,Tv,Dv,kv,Iv,wv,Pv,Ov,Rv,Mv=Td(Sv||(Sv=j(["\n    "," :host {\n        --content-max-lines: 2;\n        outline: none;\n        font-family: ",";\n        font-size: ",";\n        font-weight: 600;\n        line-height: ",";\n        min-width: calc("," * 1px);\n        border-radius: calc("," * 1px);\n        box-sizing: border-box;\n        color: ",";\n        fill: currentcolor;\n        cursor: pointer;\n        height: 100px;\n        position: relative;\n    }\n    :host {\n        display: block;\n        box-sizing: border-box;\n    }\n    :host(:hover) {\n        background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n    }\n    .control:"," {\n        box-shadow: 0 0 0 calc("," * 1px) ",";\n    }\n    .aProductCardWrapper {\n        display: grid;\n        grid-template-columns: 66px 1fr auto;\n        height: 100px;\n        width: 100%;\n        align-items: center;\n        gap: 15px;\n        padding: 12px 16px;\n        box-sizing: border-box;\n        text-decoration: none;\n        background: transparent;\n        outline: none;\n        border: none;\n        color: inherit;\n        fill: inherit;\n        border-radius: 0px;\n        border-top: var(--product-wrapper-border, 1px solid rgb(236, 236, 236));\n        position: relative;\n    }\n    .isFirst {\n        border-top: none!important;\n    }\n    .divPriceInfo {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        row-gap: 5px;\n    }\n    .divLowestPrice {\n        width: auto;\n        height: 22px;\n        background-color: #DE3700;\n        border-radius: 4px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding-left: 8px;\n        padding-right: 8px;\n        letter-spacing: 0.02em;\n    }\n    .txtPrice {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 20px;\n        line-height: 24px;\n        text-align: right;\n        color: var(--text-price-color, rgba(0, 0, 0, 0.83));\n        font-weight: 400;\n    }\n    .txtDescription {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n    }\n    .txtSavings {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 11px;\n        line-height: 16px;\n        text-align: right;\n        color: var(--text-savings-color, #DE3700);\n        font-weight: 400;\n    }\n    .txtLowest {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 11px;\n        line-height: 16px;\n        color: #FFFFFF;\n        text-align: center;\n        font-weight: 700;\n    }\n    .txtRetailer {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 12px;\n        line-height: 16px;\n        text-align: left;\n        align-self: center;\n        font-weight: normal;\n        color: var(--text-retailer-color, rgba(0, 0, 0, 0.83));\n    }\n    .divTopAnnotation {\n        display: grid;\n        grid-template-columns: auto 1fr;\n        align-items: center;\n    }\n    .divAttribution {\n        display: grid;\n        grid-template-columns: auto minmax(0px, 1fr);\n    }\n    .divTextContent {\n        display: flex;\n        flex-direction: column;\n        row-gap: 6px;\n        padding: 5px;\n        min-width: 0;\n    }\n    ::slotted([slot=\"previous-price\"]) {\n        text-align: end;\n    }\n    ::slotted([slot=\"deleteEntry\"]) {\n        position: absolute;\n        right: 0px;\n        top: 0px;\n        z-index: 10;\n    }\n    ::slotted([slot=\"image\"]) {\n        max-width: 66px;\n        max-height: 66px;\n    }\n    @media (prefers-color-scheme: dark) {\n        .txtRetailer {\n            color: var(--text-retailer-color, #FFFFFF);\n        }\n        .txtPrice {\n            color: var(--text-price-color, #FFFFFF);\n        }\n        .txtSavings {\n            color: var(--text-savings-color, #FFB833);\n        }\n        .aProductCardWrapper {\n            border-top: var(--product-wrapper-border, 1px solid rgb(236, 236, 236, 0.08));\n        }\n    }\n"])),ih("grid"),No,Fo,Ho,Gh,Oo,Wr,Vh,Mo,Br).withBehaviors(eh(Td(xv||(xv=j(["\n        :host {\n            forced-color-adjust: auto;\n        }\n\n        :host .control:hover,\n        :host .control:"," {\n            forced-color-adjust: none;\n            box-shadow: inset 0 0 0 calc(("," * 1px)) ",";\n        }\n\n        :host([href]),\n        :host([href]) .control {\n            color: ",";\n            border-color: ",";\n        }\n\n        :host([href]) .control:hover,\n        :host([href]) .control:"," {\n            forced-color-adjust: none;\n            box-shadow: inset 0 0 0 calc(("," * 1px)) ",';\n        }\n        ::slotted([slot="image"]),\n        ::slotted([slot="start"]),\n        ::slotted([slot="end"]) {\n            color: ',";\n            fill: currentcolor;\n        }\n    "])),Vh,Ro,oh.ButtonText,oh.LinkText,oh.LinkText,Vh,Ro,oh.LinkText,oh.ButtonText))),Nv=Ev.compose({baseName:"product-card",shadowOptions:{delegatesFocus:!0},styles:Mv,template:function(t,e){return Qd(Av||(Av=j(['\n    <template>\n        <a\n        class="aProductCardWrapper control ','"\n        part="control"\n        ','\n        download="','"\n        href="#"\n        hreflang="','"\n        ping="','"\n        referrerpolicy="','"\n        rel="','"\n        target="','"\n        type="','"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="','"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','">\n            ',"\n            ","\n            ","\n            ",'\n            <slot name="deleteEntry" class="btnDelete"></slot>\n            <slot name="image"></slot>\n            <div class="divTextContent" part="divTextContent">\n                ','\n                <div class="divTopAnnotation">\n                    <msft-attribution class="divAttribution" part="divAttribution">\n                        <slot name="icon"></slot>\n                        <span class="txtRetailer" title="','">',"</span>\n                    </msft-attribution>\n                    ",'\n                </div>\n                <slot name="end">\n            </div>\n            <div class="divPriceInfo" part="divPriceInfo">\n                ','\n                <span class="txtPrice" part="txtPrice">',"</span>\n                ",'\n                <slot name="previous-price"></slot>\n            </div>\n        </a>\n    </template>\n'])),(function(t){return t.isFirst?"isFirst":""}),Th("control"),(function(t){return t.download}),(function(t){return t.hreflang}),(function(t){return t.ping}),(function(t){return t.referrerpolicy}),(function(t){return t.rel}),(function(t){return t.target}),(function(t){return t.type}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.ariaExpanded}),(function(t){return t.ariaFlowto}),(function(t){return t.ariaHaspopup}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLabelledby}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),Pp((function(t){return t.isVideoCard}),Qd(Tv||(Tv=j(["\n                <style>\n                 .aProductCardWrapper {\n                    height: 85px!important;\n                 }\n                </style>\n            "])))),Pp((function(t){return t.hasAnnotation}),Qd(Dv||(Dv=j(["\n                <style>\n                .aProductCardWrapper {\n                    height: 115px!important;\n                }\n                </style>\n            "])))),Pp((function(t){return t.isProductHistoryPane}),Qd(kv||(kv=j(["\n                <style>\n                .aProductCardWrapper {\n                    border-top: unset!important;\n                }\n                msft-attribution::part(content) {\n                    display: flex;\n                }\n                </style>\n            "])))),Pp((function(t){return t.isPane}),Qd(Iv||(Iv=j(["\n                <style>\n                .aProductCardWrapper {\n                    padding: 12px 2px!important;\n                }\n                </style>\n            "])))),Pp((function(t){return t.description}),Qd(wv||(wv=j(['<span class="txtDescription" title="','">',"</span>"])),(function(t){return t.description}),(function(t){return t.description}))),(function(t){return t.retailer}),(function(t){return t.retailer}),Pp((function(t){return t.isAd}),Qd(Pv||(Pv=j(['<slot name="adslug"></slot>'])))),Pp((function(t){return t.lowest}),Qd(Ov||(Ov=j(['\n                        <div class="divLowestPrice" part="divLowestPrice">\n                            <span class="txtLowest" part="txtLowest">',"</span>\n                        </div>\n                        "])),(function(t){return t.lowest}))),(function(t){return t.price}),Pp((function(t){return t.savings}),Qd(Rv||(Rv=j(['\n                <span class="txtSavings" part="txtSavings">\n                    ',"</span>"])),(function(t){return t.savings}))))}});function Lv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var _v,Fv=function(t){u(n,t);var e=Lv(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).shoppingEntities=[],t.displayedShoppingEntities=[],t.showMoreButtonVisible=!1,t.isPolePosition=!1,t}return r(n,[{key:"shoppingEntitiesChanged",value:function(t,e){if((null==e?void 0:e.length)>0){var n=Math.min(6,e.length);this.displayedShoppingEntities=e.slice(0,n),this.displayedShoppingEntities.length<e.length&&!this.showMoreButtonVisible&&(this.showMoreButtonVisible=!0)}}},{key:"handleCardClick",value:function(t,e){return e.preventDefault(),e.stopPropagation(),this.navigateToRetailer(t),!1}},{key:"handleShowMoreClick",value:function(){var t,e;if((null===(t=this.shoppingEntities)||void 0===t?void 0:t.length)>0&&(null===(e=this.displayedShoppingEntities)||void 0===e?void 0:e.length)>0&&this.displayedShoppingEntities.length<this.shoppingEntities.length){var n,i=Math.min(this.displayedShoppingEntities.length+6,this.shoppingEntities.length);i===this.shoppingEntities.length&&(this.showMoreButtonVisible=!1),(n=this.displayedShoppingEntities).push.apply(n,yn(this.shoppingEntities.slice(this.displayedShoppingEntities.length,i))),this.logShowMoreButtonClicked()}}}]),n}(hd);tg([An],Fv.prototype,"shoppingEntities",void 0),tg([An],Fv.prototype,"displayedShoppingEntities",void 0),tg([An],Fv.prototype,"showMoreButtonVisible",void 0),tg([An],Fv.prototype,"navigateToRetailer",void 0),tg([An],Fv.prototype,"logShowMoreButtonClicked",void 0),tg([Fn],Fv.prototype,"title",void 0),tg([Fn],Fv.prototype,"isPolePosition",void 0);var Hv,Bv,Uv,Vv,Gv,Wv,$v,zv,Kv,Yv,jv=Td(_v||(_v=j(["\n.product-card {\n    padding: 12px;\n    position: relative;\n    content-visibility: visible;\n    border-radius: 8px;\n    box-shadow: none;\n}\n\n.product-card:hover {\n    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.12);\n    border-radius: 8px;\n}\n\n.product-feed-container {\n    margin: 0 20px 0px;\n    padding-top: 20px;\n}\n\n.product-feed-heading {\n    font-weight: 600;\n    font-size: 18px;\n    line-height: 24px;\n    margin-bottom: 12px;\n}\n\n.products {\n    display: grid;\n    grid-template-columns: calc(50% - 8px) calc(50% - 8px);\n    gap: 16px;\n}\n\n.product-card:nth-child(3n+0) {\n    grid-column: span 2;\n}\n\n.product-card:nth-child(3n+0) .card-inner {\n    display: flex;\n    gap: 28px;\n    align-items: center;\n}\n\n.product-image {\n    width: 100%;\n}\n\n.product-card:nth-child(3n+0) .product-image {\n    width: 128.5px;\n}\n\n.product-info {\n    margin-top: 8px;\n}\n\n.product-card:nth-child(3n+0) .product-info {\n    margin-top: 0;\n}\n\n.title {\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    white-space: normal;\n    overflow: hidden;\n    height: 16px;\n    font-size: ",";\n    line-height: ",";\n    text-decoration: none;\n    color: ",";\n    word-break: break-all;\n}\n\n.title:active {\n    color: ",';\n}\n\n.title::after {\n    position: absolute;\n    content: "";\n    z-index: 3;\n    inset: 0px;\n}\n\n.product-card:nth-child(3n+0) .title {\n    -webkit-line-clamp: 2;\n    height: auto;\n    word-break: break-word;\n}\n\n.seller {\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    white-space: normal;\n    overflow: hidden;\n    height: 16px;\n    word-break: break-all;\n    color: ',";\n    font-size: ",";\n    line-height: ",";\n}\n\n.price {\n    display: flex;\n    gap: 6px;\n    align-items: flex-end;\n}\n\n.current-price {\n    font-weight: 600;\n    display: flex;\n    align-items: flex-start;\n}\n\n.current-price.sale {\n    color: #DE3700;\n}\n\n.current-price-hundredth {\n    padding-top: 1px;\n    padding-left: 1px;\n    font-size: ",";\n    line-height: ",";\n}\n\n@media\n(-webkit-min-device-pixel-ratio: 1.5),\n(min-resolution: 144dpi){\n    .current-price-hundredth {\n        padding-top: 2px;\n    }\n}\n\n.previous-price {\n    padding-bottom: 2px;\n    text-decoration-line: line-through;\n    font-size: ",";\n    line-height: ",";\n}\n\n.show-more-container {\n    display: flex;\n    justify-content: center;\n    margin-top: 12px;\n    margin-bottom: 24px;\n}\n.no-margin {\n    margin-bottom: 12px!important;\n}\n.show-more-button {\n    border-radius: 8px;\n    padding: 2px 0;\n    width: 100%;\n}\n\n.show-more-button-inner {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.show-more-button-inner path {\n    fill: ",";\n}\n\n.decoration {\n    padding: 2px 5px;\n    position: absolute;\n    top: 14px;\n    left: 14px;\n    background: rgba(0, 0, 0, 0.7);\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    color: #FFF;\n}\n\n.decoration-text {\n    font-size: ",";\n    line-height: ",";\n}\n\n.decoration svg {\n    display: inline-block;\n    padding-top: 1px;\n    height: 12px;\n    width: 12px;\n}\n\n.show-more-button:hover {\n    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.12);\n}\n\n@media (prefers-color-scheme: light) {\n    .show-more-button {\n        background: var(--show-more-btn-bg-color, #FFFFFF);\n    }\n}\n"])),Fo,Ho,Wr,Wr,zr,Fo,Ho,Bo,Uo,Bo,Uo,Wr,Fo,Ho),qv=Qd(Hv||(Hv=j(['\n<svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5.99984 4.94948L1.60844 0.558118C1.36437 0.314042 0.968636 0.314042 0.724561 0.558118C0.480485 0.802193 0.480485 1.19793 0.724561 1.442L0.724561 1.442L5.55791 6.27531C5.802 6.5194 6.19768 6.5194 6.44176 6.27531L11.2751 1.442C11.5192 1.19793 11.5192 0.802192 11.2751 0.558116C11.031 0.314043 10.6353 0.314043 10.3913 0.558116L5.99984 4.94948Z" fill="#202124" stroke="#202124" stroke-width="0.25"/>\n</svg>\n']))),Zv=Qd(Bv||(Bv=j(['\n<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path fill="#FFFFFF" d="M8.08674 2.19636L2.19583 8.08727C1.94493 8.33818 1.94493 8.75273 2.19583 9.01455L6.99583 13.8145C7.24674 14.0655 7.66129 14.0655 7.92311 13.8145L13.814 7.92364C13.934 7.79273 13.9995 7.62909 13.9995 7.45455V2.65455C13.9995 2.29455 13.7049 2 13.3449 2H8.54493C8.37038 2 8.20674 2.06545 8.08674 2.19636ZM12.2431 5.32727C12.1777 5.46909 12.0904 5.6 11.9813 5.70909C11.8722 5.81818 11.7522 5.90545 11.5995 5.96C11.4467 6.01455 11.3049 6.05818 11.1413 6.05818C10.9777 6.05818 10.814 6.02545 10.6722 5.96C10.5304 5.90545 10.3995 5.81818 10.2904 5.70909C10.1813 5.6 10.094 5.46909 10.0395 5.32727C9.97402 5.18545 9.94129 5.03273 9.94129 4.85818C9.94129 4.68364 9.97402 4.53091 10.0395 4.38909C10.094 4.25818 10.1813 4.12727 10.2904 4.02909C10.3995 3.92 10.5304 3.83273 10.6722 3.76727C10.814 3.70182 10.9667 3.66909 11.1413 3.66909C11.3158 3.66909 11.4686 3.70182 11.6104 3.76727C11.7522 3.83273 11.8831 3.92 11.9813 4.02909C12.0904 4.13818 12.1777 4.25818 12.2431 4.4C12.3086 4.54182 12.3413 4.69455 12.3413 4.86909C12.3413 5.04364 12.2977 5.18545 12.2431 5.32727Z"></path>\n</svg>\n']))),Xv=Qd(Uv||(Uv=j(['\n<div class="decoration">\n    ','\n    <div class="decoration-text">\n        ',"\n    </div>\n</div>\n"])),Zv,(function(t){return t.dealPercentageLocalized})),Jv=Fv.compose({baseName:"product-feed",shadowOptions:{delegatesFocus:!0},styles:jv,template:function(t,e){return Qd(Vv||(Vv=j(["\n    <template>\n    ","\n    </template>\n"])),Pp((function(t){var e;return(null===(e=t.displayedShoppingEntities)||void 0===e?void 0:e.length)>0}),Qd(Gv||(Gv=j(['\n        <div class="product-feed-container">\n            ','\n                <div class="products">\n                    ',"\n                </div>\n            ","\n        </div>\n    "])),Pp((function(t){return t.title}),Qd(Wv||(Wv=j(['<div class="product-feed-heading">',"</div>"])),(function(t){return t.title}))),Dm((function(t){return t.displayedShoppingEntities}),Qd($v||($v=j(['\n                        <fluent-card class="product-card">\n                            <div class="card-inner">\n                                ','\n                                <img class="product-image" src="','&w=144&h=144"/>\n                                <div class="product-info">\n                                    <div class="price">\n                                        <div class="current-price','">\n                                            <div class="current-price-currency">\n                                                ','\n                                            </div>\n                                            <div class="current-price-int">\n                                                ','\n                                            </div>\n                                            <div class="current-price-hundredth">\n                                                ',"\n                                            </div>\n                                        </div>\n                                        ",'\n                                    </div>\n                                    <a\n                                        class="title"\n                                        target="_blank"\n                                        @click=','\n                                        href="','"\n                                        title="','">\n                                        ','\n                                    </a>\n                                    <div class="seller">',"</div>\n                                </div>\n                            </div>\n                        </fluent-card>\n                    "])),Pp((function(t){return t.dealPercentage}),Xv),(function(t){return t.imageInfo.sourceImageUrl}),(function(t){return t.priceInfo.originalPrice?" sale":""}),(function(t){return t.priceInfo.priceCurrencySymbol}),(function(t){return t.priceInfo.priceIntText}),(function(t){return t.priceInfo.priceHundredthText}),Pp((function(t){return t.priceInfo.originalPrice}),Qd(zv||(zv=j(['\n                                            <div class="previous-price">\n                                                ',"\n                                            </div>\n                                        "])),(function(t){return t.priceInfo.originalPrice}))),(function(t,e){return e.parent.handleCardClick(t.destination,e.event)}),(function(t){return t.destination}),(function(t){return t.title}),(function(t){return t.title}),(function(t){return t.seller}))),Pp((function(t){return t.showMoreButtonVisible}),Qd(Kv||(Kv=j(['\n                <div class="show-more-container ','">\n                    <fluent-button class="show-more-button" @click="','">\n                        <div class="show-more-button-inner">\n                            <div>Show More</div>\n                            <div class="show-more-button-arrow">',"</div>\n                        </div>\n                    </fluent-button>\n                </div>\n            "])),(function(t){return t.isPolePosition?"no-margin":""}),(function(t){return t.handleShowMoreClick()}),qv)))))}});function Qv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}!function(t){t.grid="grid",t.carousel="carousel"}(Yv||(Yv={}));var ty=function(t){u(n,t);var e=Qv(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).noHoverGradient=!1,t}return r(n,[{key:"handleImageContentChange",value:function(){this.control.classList.toggle("has-image",this.image.assignedNodes().length>0)}}]),n}(ep);tg([Fn],ty.prototype,"layout",void 0),tg([Fn({attribute:"no-hover-gradient",mode:"boolean"})],ty.prototype,"noHoverGradient",void 0);var ey=di.create;function ny(t,e,n){n*=1;var i=io(t)||new bi(1,0,1,1),o=io(e.toColorString())||new bi(1,0,1,1),a=o.r*(1-n)+i.r*n,r=o.g*(1-n)+i.g*n,s=o.b*(1-n)+i.b*n;return so.create(a,r,s)}function iy(t,e,n){var i=ny("#FFF",e,t);return ny(n,i,t)}var oy,ay,ry,sy=ey({name:"accent-fill-muted-recipe",cssCustomPropertyName:null}).withDefault({evaluate:function(t,e){return function(t,e,n,i,o,a,r,s,l,c){e.closestIndexOf(n),Math.max(s,l,c);var u=t.source.toColorString(),d=11+1*o,h=11+1*a,p=11+1*r;return{rest:iy((11+1*i)/100,n,u),hover:iy(d/100,n,u),active:iy(h/100,n,u),focus:iy(p/100,n,u)}}(Ha.getValueFor(t),Fa.getValueFor(t),e||Ya.getValueFor(t),0,9,-2,0,la.getValueFor(t),ca.getValueFor(t),ua.getValueFor(t))}}),ly=ey("accent-fill-muted-rest").withDefault((function(t){return sy.getValueFor(t).evaluate(t).rest})),cy=(ey("accent-fill-muted-hover").withDefault((function(t){return sy.getValueFor(t).evaluate(t).hover})),ey("accent-fill-muted-active").withDefault((function(t){return sy.getValueFor(t).evaluate(t).active})),ey("accent-fill-muted-focus").withDefault((function(t){return sy.getValueFor(t).evaluate(t).focus})),ty.compose({baseName:"shopping-cashback-card",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Td(oy||(oy=j(["\n        "," :host {\n            outline: none;\n            font-family: ",";\n            font-size: ",";\n            font-weight: 400;\n            line-height: ",";\n            min-width: calc("," * 1px);\n            border-radius: calc(("," * 1px) * 2);\n            box-sizing: border-box;\n            color: ",";\n            cursor: pointer;\n            background: ",";\n        }\n\n        .control {\n            display: grid;\n            grid-template-rows: 42px minmax(16px, 1fr);\n            grid-gap: 6px;\n            justify-content: center;\n            align-items: center;\n            box-sizing: border-box;\n            border: calc("," * 1px) solid ",";\n            border-radius: inherit;\n            padding: 8px 23px 24px;\n            width: 100%;\n            outline: none;\n            text-decoration: none;\n            color: inherit;\n            cursor: inherit;\n            font-family: inherit;\n            overflow: hidden;\n        }\n\n        .control:"," {\n            box-shadow: 0 0 0 calc("," * 1px) ",";\n        }\n\n        .control:active {\n            background-color: ",';\n        }\n\n        .control:hover {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n        }\n\n        :host([no-hover-gradient]) .control {\n            background: transparent;\n        }\n\n        .control:not(.has-image) {\n            display: flex;\n            min-height: 97px;\n            padding: 18px 23px;\n\n        }\n\n        :host([layout="carousel"]) .control {\n            grid-template-rows: 56px 50px;\n            padding: 0 12px 12px;\n        }\n\n        .content {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: space-between;\n            max-height: 50px;\n        }\n\n        .action-container {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin-top: 12px;\n            width: 102px;\n            height: 26px;\n            overflow: hidden;\n            background: ',";\n            border: 1px solid transparent;\n            border-radius: calc("," * 1px);\n            color: ",';\n        }\n\n        .action-message {\n            font-weight: 600;\n        }\n\n        ::slotted(*) {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            min-height: 16px;\n            text-align: center;\n        }\n\n        ::slotted([slot="image"]) {\n            align-self: center;\n            justify-self: center;\n            max-width: 100%;\n            max-height: 100%;\n        }\n    '])),ih("block"),No,Bo,Uo,Gh,Oo,Wr,Ya,Ro,Mr,Vh,Mo,Br,gr,ly,Po,cr).withBehaviors(eh(Td(ay||(ay=j(["\n            :host {\n                forced-color-adjust: auto;\n            }\n\n            :host .control:hover,\n            :host .control:"," {\n                forced-color-adjust: none;\n                box-shadow: inset 0 0 0 calc(("," * 1px)) ",";\n            }\n\n            :host([href]),\n            :host([href]) .control {\n                color: ",";\n                border-color: ",";\n            }\n\n            :host([href]) .control:hover,\n            :host([href]) .control:"," {\n                forced-color-adjust: none;\n                box-shadow: inset 0 0 0 calc(("," * 1px)) ",';\n            }\n\n            ::slotted([slot="image"]),\n            ::slotted([slot="start"]),\n            ::slotted([slot="end"]) {\n                color: ',";\n                fill: currentcolor;\n            }\n        "])),Vh,Ro,oh.ButtonText,oh.LinkText,oh.LinkText,Vh,Ro,oh.LinkText,oh.ButtonText)))},template:function(t,e){return Qd(ry||(ry=j(['\n    <a\n        class="control"\n        part="control"\n        ','\n        download="','"\n        href="','"\n        hreflang="','"\n        ping="','"\n        referrerpolicy="','"\n        rel="','"\n        target="','"\n        type="','"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="','"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','"\n    >\n        <slot\n            name="image"\n            ','\n            @slotchange="','"\n        ></slot>\n        <div class="content" part="content">\n            <slot> </slot>\n        </div>\n    </a>\n'])),Th("control"),(function(t){return t.download}),(function(t){return t.href}),(function(t){return t.hreflang}),(function(t){return t.ping}),(function(t){return t.referrerpolicy}),(function(t){return t.rel}),(function(t){return t.target}),(function(t){return t.type}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.ariaExpanded}),(function(t){return t.ariaFlowto}),(function(t){return t.ariaHaspopup}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLabelledby}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),Th("image"),(function(t){return t.handleImageContentChange()}))}}));function uy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var dy,hy,py,fy=function(t){u(n,t);var e=uy(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).subTitleId=Ag("subTitleId"),t.descriptionId=Ag("descriptionId"),t.cashbackNonstackableMessageId=Ag("cashbackMessageId"),t.successRateId=Ag("successRateId"),t.isSelected=!1,t.isHover=!1,t.handleSelected=function(e){t.isSelected&&t.controlCopy.addEventListener("transitionend",t.handleTransitionEnd)},t.handleTransitionEnd=function(e){t.isSelected=!1,t.controlCopy.removeEventListener("transitionend",t.handleTransitionEnd)},t.onKeyPressHandler=function(e){switch(e.keyCode){case dh:case 13:e.preventDefault(),t.onSelectedHandler()}},t.onSelectedHandler=function(){document.activeElement!==l(t)&&t.focus(),t.isSelected=!0,t.$emit("selected")},t}return r(n,[{key:"connectedCallback",value:function(){Qf(p(n.prototype),"connectedCallback",this).call(this),this.addEventListener("selected",this.handleSelected)}},{key:"disconnectedCallback",value:function(){Qf(p(n.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("selected",this.handleSelected)}},{key:"onClickHandler",value:function(){this.onSelectedHandler()}},{key:"onHoverHandler",value:function(){this.isHover=!0}},{key:"onHoverEndHandler",value:function(){this.isHover=!1}},{key:"onBlurHandler",value:function(){this.isSelected=!1,this.isHover=!1,this.controlCopy.removeEventListener("transitionend",this.handleTransitionEnd)}}]),n}(hd);tg([Fn],fy.prototype,"name",void 0),tg([Fn({attribute:"sub-title"})],fy.prototype,"subTitle",void 0),tg([Fn],fy.prototype,"description",void 0),tg([Fn({attribute:"indicator-message"})],fy.prototype,"indicatorMessage",void 0),tg([Fn({attribute:"selected-indicator-message"})],fy.prototype,"selectedIndicatorMessage",void 0),tg([Fn({attribute:"cashback-nonstackable-message"})],fy.prototype,"cashbackNonstackableMessage",void 0),tg([Fn],fy.prototype,"regularColors",void 0),tg([Fn],fy.prototype,"hasIcon",void 0),tg([Fn({attribute:"label"})],fy.prototype,"label",void 0),tg([Fn({attribute:"success-rate"})],fy.prototype,"successRate",void 0),tg([Fn({attribute:"isYoutuber"})],fy.prototype,"isYoutuber",void 0),tg([An],fy.prototype,"isSelected",void 0),tg([An],fy.prototype,"isHover",void 0),tg([An],fy.prototype,"childElements",void 0);var gy,my,vy,yy,Cy,by,Sy,xy,Ey='<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n<path d="M42 12.5C42 8.91014 39.0898 6 35.5 6H12.5C8.91014 6 6 8.91014 6 12.5V21.5144C6.89262 20.7772 7.90354 20.178 9 19.7499V12.5C9 10.567 10.567 9 12.5 9H35.5C37.433 9 39 10.567 39 12.5V35.5C39 35.9176 38.9268 36.318 38.7928 36.6894L27.1484 25.2862L26.8916 25.0532C25.6182 23.9832 23.8928 23.7296 22.4052 24.2922C22.9232 25.144 23.3288 26.0718 23.6014 27.055C24.0996 26.9182 24.6546 27.043 25.0494 27.4296L36.661 38.8028C36.2978 38.9306 35.907 39 35.5 39H25.9496L26.9748 40.0252C27.5308 40.581 27.8606 41.2774 27.9642 42H35.5C39.0898 42 42 39.0898 42 35.5V12.5Z"/><path d="M35.0084 17.5042C35.0084 15.0166 32.9918 13 30.5042 13C28.0166 13 26 15.0166 26 17.5042C26 19.9918 28.0166 22.0084 30.5042 22.0084C32.9918 22.0084 35.0084 19.9918 35.0084 17.5042ZM29 17.5042C29 16.6735 29.6734 16 30.5042 16C31.335 16 32.0084 16.6735 32.0084 17.5042C32.0084 18.335 31.335 19.0085 30.5042 19.0085C29.6734 19.0085 29 18.335 29 17.5042Z"/><path d="M19.9 35.7788C21.2108 34.2152 22 32.1998 22 30C22 25.0294 17.9706 21 13 21C8.02944 21 4 25.0294 4 30C4 34.9706 8.02944 39 13 39C14.6849 39 16.2616 38.537 17.61 37.7312L23.4394 43.5606C24.0252 44.1464 24.9748 44.1464 25.5606 43.5606C26.1464 42.9748 26.1464 42.0252 25.5606 41.4394L19.9 35.7788ZM13 36C9.6863 36 7 33.3138 7 30C7 26.6862 9.6863 24 13 24C16.3137 24 19 26.6862 19 30C19 33.3138 16.3137 36 13 36Z"/></svg>',Ay=fy.compose({baseName:"shopping-coupon-new",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Td(dy||(dy=j(["\n    "," :host {\n        position: relative;\n        box-sizing: border-box;\n        border: none;\n        border-radius: 8px;\n        font-family: ",";\n        font-size: ",";\n        line-height: ",";\n        color: ",";\n        outline: none;\n    }\n\n    .control {\n        position: relative;\n        font-family: ",";\n        background: linear-gradient(44.89deg,\n            var(--coupon-control-bg-start, #EDFBFF) 0%,\n            var(--coupon-control-bg-end, #FFFFFF) 82.76%);\n        border: 1px dashed var(--coupon-control-border, #C9E1E7);\n        box-sizing: border-box;\n        border-radius: 8px;\n        display: flex;\n        flex-direction: column;\n        padding: 8px 0;\n        width: 100%;\n        height: 92px;\n        cursor: pointer;\n        outline: none;\n    }\n\n    .controlSuccessHover {\n        background: linear-gradient(224.24deg,\n            var(--coupon-success-hover-bg-start, #FFF1F7) 0%,\n            var(--coupon-success-hover-bg-mid, #FFFEF0) 33.85%,\n            var(--coupon-success-hover-bg-end, #FFFFFF) 81.25%)!important;\n    }\n    .controlSuccess {\n        border: 1px dashed var(--coupon-success-bg, #F5D6D8);\n        background: linear-gradient(44.89deg,\n            var(--coupon-success-bg-start, #FFEEF5) 0%,\n            var(--coupon-success-bg-mid, #FFFBF0) 37.1%,\n            var(--coupon-success-bg-end, #FFFFFF) 89.03%);\n    }\n    .controlHover {\n        background: linear-gradient(44.89deg,\n            var(--coupon-control-hover-bg-start, #FFFFFF) 26.25%,\n            var(--coupon-control-hover-bg-end, #EDFBFF) 109.58%);\n    }\n    .control:"," {\n        border-color: ",";\n        box-shadow: 0 0 0 calc("," * 1px) ",";\n    }\n\n    .content {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n    }\n\n    .start-content {\n        display: grid;\n        grid-template-columns: 1fr auto;\n        margin-bottom: 8px;\n        min-height: 16px;\n    }\n\n    .end-content {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        height: 100%;\n    }\n\n    .title {\n        font-size: 12px;\n        line-height: ",";\n        overflow: hidden;\n        overflow-wrap: break-word;\n        display: -webkit-box;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        margin: 0 8px;\n        grid-column: 1/2;\n        text-align: start;\n        font-weight: 700;\n        color: var(--coupon-selected-color, #207A90);\n    }\n    .titleHover {\n        color: var(--coupon-title-hover-color, #666666);\n    }\n    .titleSuccess {\n        color: var(--coupon-success-color, #DE3700);\n    }\n    .sub-title {\n        font-size: ",";\n        line-height: ",";\n        margin-top: 6px;\n        color: ",";\n        text-align: start;\n        margin-inline-start: 8px;\n    }\n\n    .description {\n        font-size: ",";\n        font-weight: 400;\n        line-height: ",";\n        color: ",";\n        text-align: start;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        overflow-wrap: break-word;\n        margin: 0 8px;\n    }\n\n    .success-rate {\n        font-size: ",";\n        line-height: ",";\n        display: flex;\n        justify-content: center;\n        margin-inline-end: 6px;\n        width: auto;\n        background: linear-gradient(93.45deg,\n            var(--coupon-success-rate-bg-start, #E4008A) -4.64%,\n            var(--coupon-success-rate-bg-mid, #FF4B14) 83.31%,\n            var(--coupon-success-rate-bg-end, #FF8D24) 106.45%);\n        grid-column: 3/4;\n        height: 16px;\n        padding: 0 6px;\n        border-radius: 4px;\n    }\n    .txtSuccessRate {\n        font-family: ",";\n        color: #FFFFFF;\n        font-weight: 500;\n        font-size: 10px;\n        line-height: 16px;\n    }\n\n    .corner-icon {\n        display: flex;\n        justify-content: center;\n        margin-inline-end: 6px;\n        width: auto;\n        height: 13.5px;\n        padding: 0 6px;\n    }\n\n    .copiedIndicator {\n        opacity: 0;\n        position: absolute;\n        pointer-events: none;\n    }\n\n    .nonStackableMessage {\n        display: inline;\n        color: var(--coupon-non-stackable-msg-color, #666666);\n        font-weight: normal;\n    }\n    .cashback-nonstackable-message {\n        font-size: ",";\n        line-height: ",";\n        color: ",";\n    }\n    .check-icon {\n        display: flex;\n        fill: #8BB73A;\n    }\n    .warning-icon {\n        height: 12px;\n    }\n    .warning-icon svg {\n        fill: #BE5A00;\n        transform: translate(-3px, 1px);\n    }\n    .selected-success {\n        color: var(--coupon-success-color, #DE3700);\n    }\n    .selected-success svg {\n        fill: var(--coupon-success-color, #DE3700);\n    }\n    .selected {\n        color: var(--coupon-selected-color, #207A90);\n    }\n    .selected svg {\n        fill: var(--coupon-selected-color, #207A90);\n    }\n"])),ih("flex"),No,Lo,_o,Wr,No,Vh,Br,Mo,Br,Uo,Bo,Uo,zr,Fo,Ho,Wr,Bo,Uo,No,Fo,Ho,zr).withBehaviors(eh(Td(hy||(hy=j(["\n            .title-container {\n                background: ",";\n                border-color: ",";\n            }\n            .control,\n            .controlSuccess,\n            .sub-title,\n            .description,\n            .controlSuccess:hover\n            .control:hover .title-container {\n                color: ",";\n                border-color: ",";\n            }\n            .title,\n            .selected-success,\n            .selected {\n                color: ",";\n            }\n            .selected-success svg {\n                fill: ",";\n            }\n            .selected svg {\n                fill: ",";\n            }\n            .controlSuccess:hover,\n            .controlSuccess:",",\n            .control:hover,\n            .control:"," {\n                forced-color-adjust: none;\n                background: ","!important;\n                color: ",";\n                box-shadow: 0 0 0 calc(("," - ",") * 1px)\n                    ",";\n            }\n            .success-rate {\n                background: ",";\n            }\n\n            .cashback-nonstackable-message {\n                color: ",";\n            }\n\n            .warning-icon,\n            .copy-icon {\n                fill: ",";\n            }\n        "])),oh.ButtonFace,oh.ButtonText,oh.ButtonText,oh.ButtonText,oh.Highlight,oh.Highlight,oh.Highlight,Vh,Vh,oh.ButtonFace,oh.ButtonText,Mo,Ro,oh.Highlight,oh.ButtonFace,oh.HighlightText,oh.HighlightText)),nh(Td(py||(py=j(["\n                .warning-icon svg {\n                    fill: var(--coupon-success-color, #FFB833);\n                }\n                .selected-success {\n                    color: var(--coupon-success-color, #FFB833);\n                }\n                .selected-success svg {\n                    fill: var(--coupon-success-color, #FFB833);\n                }\n                .selected {\n                    color: var(--coupon-selected-color, #41CFF2);\n                }\n                .selected svg {\n                    fill: var(--coupon-selected-color, #41CFF2);\n                }\n                .control {\n                    background: linear-gradient(44.89deg,\n                        var(--coupon-control-bg-start, rgba(0, 198, 255, 0.08)) 0%,\n                        var(--coupon-control-bg-end, rgba(255, 255, 255, 0)) 82.76%);\n                    border: 1px dashed var(--coupon-control-border, rgba(201, 225, 231, 0.3));\n                }\n                .controlHover {\n                    background: linear-gradient(44.89deg,\n                        var(--coupon-control-bg-end, rgba(255, 255, 255, 0)) 26.25%,\n                        var(--coupon-control-bg-start, rgba(0, 198, 255, 0.08)) 109.58%) !important;\n                    color: red;\n                }\n                .controlSuccess {\n                    background: linear-gradient(44.89deg,\n                        var(--coupon-success-bg-start, rgba(255, 0, 107, 0.08)) 0%,\n                        var(--coupon-success-bg-mid, rgba(255, 184, 0, 0.08)) 38.24%,\n                        var(--coupon-success-bg-end, rgba(255, 255, 255, 0)) 86.18%);\n                    border: 1px dashed var(--coupon-success-border, rgba(245, 214, 216, 0.3));\n                }\n                .controlSuccessHover {\n                    background: linear-gradient(224.24deg,\n                        var(--coupon-success-hover-bg-start, rgba(255, 0, 107, 0.08)) 0%,\n                        var(--coupon-success-hover-bg-mid, rgba(255, 230, 0, 0.08)) 33.85%,\n                        var(--coupon-success-hover-bg-end, rgba(255, 255, 255, 0)) 81.25%) !important;\n                }\n                .nonStackableMessage {\n                    color: var(--coupon-non-stackable-msg-color, #FFFFFF);\n                }\n                .success-rate {\n                    background: linear-gradient(\n                        93.45deg,\n                        var(--coupon-success-rate-bg-start, #C11371) -4.64%,\n                        var(--coupon-success-rate-bg-mid, #E74818) 88.52%,\n                        var(--coupon-success-rate-bg-end, #F78216) 106.45%);\n                }\n                .title {\n                    color: var(--coupon-selected-color, #41CFF2);\n                }\n                .titleHover {\n                    color: var(--coupon-title-hover-color, #C4C4C4);\n                }\n                .titleSuccess {\n                    color: var(--coupon-success-color, #FFB833);\n                }\n            "])))))},template:function(t,e){return Qd(gy||(gy=j(["\n    <template ",'>\n        <button\n            class= "','"\n            part="control"\n            aria-label="','"\n            aria-describedby="'," "," "," "," ",'"\n            @click="','"\n            @keypress="','"\n            @blur="','"\n            @mouseover="','"\n            @mouseout="','"\n            @focus="','"\n            role="','"\n        >\n            <div class="content">\n                <div class="start-content" part="start-content">\n                    <span class="','" part="title" ',">\n                        ","\n                    </span>\n                    ",'\n                    <div class="corner-icon" part="corner-icon">\n                        <slot name="icon"></slot>\n                    </div>\n                </div>\n                <div class="end-content" part="end-content">\n                    <span\n                        id="','"\n                        class="description"\n                        part="description"\n                    >\n                        ','\n                    </span>\n                    <span id="','" class="sub-title" part="sub-title">\n                        ',"\n                    </span>\n                </div>\n            </div>\n            ","\n        </button>\n        ","\n    </template>\n"])),Bg({property:"childElements",filter:Nh()}),(function(t){return t.successRate&&!t.regularColors?t.isHover?"control controlSuccess controlSuccessHover":"control controlSuccess":t.isHover?"control controlHover":"control"}),(function(t){return t.label}),(function(t){return t.name}),(function(t){return t.subTitleId}),(function(t){return t.descriptionId}),(function(t){return t.cashbackNonstackableMessageId}),(function(t){return t.successRateId}),(function(t){return t.onClickHandler()}),(function(t,e){return t.onKeyPressHandler(e.event)}),(function(t){return t.onBlurHandler()}),(function(t,e){return t.onHoverHandler()}),(function(t){return t.onHoverEndHandler()}),(function(t){return t.onHoverHandler()}),(function(t){return t.indicatorMessage?"button":"link"}),(function(t){return t.isHover?"title titleHover":t.successRate&&!t.regularColors?"title titleSuccess":"title"}),Th("controlCopy"),(function(t){return t.isSelected&&t.selectedIndicatorMessage?Qd(my||(my=j(['<span class="','">'," ","</span>"])),t.successRate&&!t.regularColors?"selected-success":"selected",t.selectedIndicatorMessage,'<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n                         <path d="M7.85355 0.146447C8.04882 0.341709 8.04882 0.658291 7.85355 0.853553L3.35355 5.35355C3.15829 5.54882 2.84171 5.54882 2.64645 5.35355L0.646447 3.35355C0.451184 3.15829 0.451184 2.84171 0.646447 2.64645C0.841709 2.45118 1.15829 2.45118 1.35355 2.64645L3 4.29289L7.14645 0.146447C7.34171 -0.0488155 7.65829 -0.0488155 7.85355 0.146447Z"/>\n                         </svg>'):t.isHover&&t.indicatorMessage?t.indicatorMessage:t.name}),Pp((function(t){return t.successRate&&!t.hasIcon}),Qd(vy||(vy=j(['\n                            <div class="success-rate" part="success-rate">\n                                <span class="txtSuccessRate" part="txtSuccessRate" id="','">',"</span>\n                            </div>"])),(function(t){return t.successRateId}),(function(t){return t.successRate}))),(function(t){return t.descriptionId}),(function(t){return t.cashbackNonstackableMessage&&(t.isSelected||t.isHover)?Qd(yy||(yy=j(['\n                                <div class="nonStackableMessage">\n                                    <span aria-hidden="true" class="warning-icon">\n                                        ',"\n                                    </span>\n                                 ","\n                                </div>"])),'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">\n                                    <path d="M4.2829 2.9799C4.13361 1.93492 4.94447 1 6.00005 1C7.05564 1 7.86649 1.93492 7.71721 2.9799L7.14147 7.01005C7.06033 7.57808 6.57385 8 6.00005 8C5.42626 8 4.93978 7.57808 4.85863 7.01005L4.2829 2.9799ZM7 10C7 10.5523 6.55228 11 6 11C5.44772 11 5 10.5523 5 10C5 9.44771 5.44772 9 6 9C6.55228 9 7 9.44771 7 10Z"/>\n                                    </svg>',t.cashbackNonstackableMessage):Qd(Cy||(Cy=j(["",""])),t.description)}),(function(t){return t.subTitleId}),Pp((function(t){return!(t.cashbackNonstackableMessage&&(t.isSelected||t.isHover))}),Qd(by||(by=j(["",""])),(function(t){return t.subTitle}))),Pp((function(t){return t.isYoutuber}),Qd(Sy||(Sy=j(['<slot name="youtuber-info"></slot>'])))),Pp((function(t){return t.isSelected&&t.selectedIndicatorMessage}),Qd(xy||(xy=j(['<span aria-live="assertive" aria-relevant="all" aria-atomic="true" class="copiedIndicator">\n            ',"\n            </span>"])),(function(t){return t.selectedIndicatorMessage}))))}});function Ty(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Dy,ky,Iy,wy,Py=function(t){u(n,t);var e=Ty(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).deselectable=!0,t.isSelected=!1,t.nameId=Ag("nameId"),t.descriptionId=Ag("descriptionId"),t.onSelectedHandler=function(){document.activeElement!==l(t)&&t.focus(),t.deselectable||t.isSelected||(t.isSelected=!0,t.$emit("selected-changed")),t.deselectable&&(t.isSelected=!t.isSelected,t.$emit("selected-changed"))},t}return r(n,[{key:"handleImageContentChange",value:function(){this.control.classList.toggle("has-image",this.image.assignedNodes().length>0)}},{key:"onClickHandler",value:function(){this.onSelectedHandler()}}]),n}(zh);tg([Fn],Py.prototype,"name",void 0),tg([Fn({attribute:"description"})],Py.prototype,"description",void 0),tg([Fn({attribute:"selected-aria-label"})],Py.prototype,"selectedAriaLabel",void 0),tg([Fn({attribute:"unselected-aria-label"})],Py.prototype,"unselectedAriaLabel",void 0),tg([Fn({mode:"boolean"})],Py.prototype,"deselectable",void 0),tg([An],Py.prototype,"isSelected",void 0);var Oy,Ry,My=Td(Dy||(Dy=j(["\n    .indicator {\n        right: calc("," * 2px);\n    }\n"])),wo),Ny=Td(ky||(ky=j(["\n    .indicator {\n        left: calc("," * 2px);\n    }\n"])),wo),Ly=Py.compose({baseName:"shopping-coupon-printable",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Td(Iy||(Iy=j(["\n    "," :host {\n        box-sizing: border-box;\n        border-radius: calc("," * 1px);\n        font-family: ",";\n        font-size: ",";\n        line-height: ",";\n        color: ",";\n        outline: none;\n    }\n\n    :host(:active) {\n        background-color: ",";\n    }\n\n    .control {\n        position: relative;\n        color: ",";\n        font-family: ",";\n        background: transparent;\n        box-sizing: border-box;\n        border: calc("," * 1px) solid ",";\n        border-radius: inherit;\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: stretch;\n        padding: 0 0 8px;\n        width: 100%;\n        min-height: 68px;\n        cursor: pointer;\n        outline: none;\n        text-decoration: none;\n        overflow: hidden;\n    }\n\n    .control:"," {\n        border-color: ",";\n        box-shadow: 0 0 0 calc(("," - ",") * 1px) ",";\n    }\n\n    .image-container {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 138px;\n        overflow: hidden;\n    }\n\n    .image-container svg {\n        fill: ",';\n    }\n\n    ::slotted([slot="image"]){\n        width: 100%;\n        object-fit:none;\n    }\n\n    .content {\n        display: flex;\n        flex-direction: column;\n        padding: 0 12px;\n        overflow: hidden;\n    }\n\n    .name {\n        font-size: ',";\n        line-height: ",";\n        margin-top: 8px;\n        font-weight: 600;\n        display: -webkit-box;\n        overflow: hidden;\n        overflow-wrap: break-word;\n        text-align: start;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n    }\n    .name-container {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-end;\n    }\n\n    .description {\n        margin-top: 4px;\n        color: ",";\n        overflow: hidden;\n        overflow-wrap: break-word;\n        font-size: ",";\n        line-height: ",";\n        text-align: start;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n    }\n\n    .indicator {\n        display: inline-flex;\n        position: absolute;\n        top: calc("," *2px);\n        align-items: center;\n        justify-content: center;\n        font-size: ",";\n        line-height: ",";\n        border-radius: 2px;\n        pointer-events: none;\n        border-radius: calc("," * 1px);\n        background-color: ",";\n    }\n\n    .checkbox {\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin: 0;\n        border: calc("," * 1px) solid ",";\n        border-radius: inherit;\n        background: ",";\n        outline: none;\n        cursor: pointer;\n        width: 26px;\n        height: 26px;\n    }\n\n    .indicator.selected .checkbox {\n        background: var(--checkbox-selected-background, linear-gradient(92.91deg, #15835B 31.47%, #3E8624 99.7%));\n        border: none;\n    }\n\n    .checkbox svg {\n        height: 14px;\n        width: 14px;\n        fill: ",";\n        display: block;\n        pointer-events: none;\n    }\n\n    .indicator-message {\n        display: -webkit-box;\n        overflow: hidden;\n        overflow-wrap: break-word;\n        text-align: start;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n    }\n\n    .indicator-message-selected, .selected-icon-container {\n        display: flex;\n        justify-content: center;\n        align-content: center;\n    }\n"])),ih("flex"),Oo,No,Fo,Ho,Wr,gr,Wr,No,Ro,Mr,Vh,Br,Mo,Ro,Br,pr,Vo,Go,zr,Fo,Ho,wo,Fo,$o,Po,Za,Ro,Lr,vr,Ar).withBehaviors(new $p(My,Ny),eh(Td(wy||(wy=j(["\n            .control,\n            .name,\n            .description,\n            .control:hover {\n                color: ",";\n                border-color: ","\n            }\n\n            .control:hover,\n            .control:"," {\n                forced-color-adjust: none;\n                background: ",";\n                color: ",";\n                border-color: ",";\n                box-shadow: 0 0 0 2px ",", 0 0 0 4px ",";\n            }\n\n            .indicator.selected .checkbox {\n                forced-color-adjust: none;\n                background: ",";\n                border-color: ",";\n                color: ",";\n            }\n\n            .checkbox svg {\n                fill: ",";\n            }\n        "])),oh.ButtonText,oh.ButtonText,Vh,oh.ButtonFace,oh.ButtonText,oh.Highlight,oh.Field,oh.FieldText,oh.Highlight,oh.Highlight,oh.HighlightText,oh.HighlightText)))},template:function(t,e){return Qd(Oy||(Oy=j(['\n    <button\n        class="control"\n        part="control"\n        ','\n        aria-live="polite"\n        aria-label="','"\n        aria-describedby="'," ",'"\n        @click="','"\n    >\n        <div class="image-container" part="image-container">\n            <slot\n                name="image"\n                ','\n                @slotchange="','"\n            >\n                ','\n            </slot>\n        </div>\n        <div class="content" part="content">\n            <span id="','" class="name" part="name">',' </span>\n            <span id="','" class="description" part="description"\n                >','\n            </span>\n        </div>\n        <div\n            class="','"\n            part="indicator"\n        >\n            <span class="checkbox">\n                ',"\n            </span>\n        </div>\n    </button>\n"])),Th("control"),(function(t){return t.isSelected?t.selectedAriaLabel:t.unselectedAriaLabel}),(function(t){return t.nameId}),(function(t){return t.descriptionId}),(function(t){return t.onClickHandler()}),Th("image"),(function(t){return t.handleImageContentChange()}),Ey,(function(t){return t.nameId}),(function(t){return t.name}),(function(t){return t.descriptionId}),(function(t){return t.description}),(function(t){return t.isSelected?"indicator selected":"indicator"}),Pp((function(t){return t.isSelected}),Qd(Ry||(Ry=j(['<span aria-hidden="true">\n                        <svg\n                            viewBox="0 0 16 16"\n                            xmlns="http://www.w3.org/2000/svg"\n                            part="checkbox-svg"\n                        >\n                            <path\n                                d="M13.86 3.66a.5.5 0 01-.02.7l-7.93 7.48a.6.6 0 01-.84-.02L2.4 9.1a.5.5 0 01.72-.7l2.4 2.44 7.65-7.2a.5.5 0 01.7.02z"\n                            />\n                        </svg>\n                    </span>'])))))}});function _y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Fy,Hy,By=function(t){u(n,t);var e=_y(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n)}(ep);tg([Fn({attribute:"current-price"})],By.prototype,"currentPrice",void 0),tg([Fn({attribute:"previous-price"})],By.prototype,"previousPrice",void 0),tg([Fn({attribute:"badge"})],By.prototype,"badge",void 0),tg([Fn({attribute:"product-title"})],By.prototype,"productTitle",void 0);var Uy,Vy,Gy,Wy,$y=By.compose({baseName:"shopping-recommendation",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Td(Fy||(Fy=j(["\n    "," :host {\n        border: calc("," * 1px) solid transparent;\n        border-radius: calc("," * 1px);\n        box-sizing: border-box;\n        color: ",";\n        cursor: pointer;\n        fill: currentcolor;\n        font-family: ",";\n        font-size: ",";\n        line-height: ",";\n        outline: none;\n        position: relative;\n    }\n\n    .control {\n        align-items: center;\n        border: none;\n        border-radius: inherit;\n        box-sizing: border-box;\n        color: inherit;\n        cursor: inherit;\n        --elevation: 4;\n        ",";\n        fill: inherit;\n        font-family: inherit;\n        height: fit-content;\n        justify-content: center;\n        outline: none;\n        text-decoration: none;\n        width: 100%;\n    }\n\n    .control:hover {\n        border-radius: calc("," * 1px);\n        --elevation: 8;\n        ",";\n    }\n\n    .control:"," {\n        box-shadow: 0 0 0 calc("," * 1px) ",';\n    }\n\n    .content-container {\n        align-items: flex-start;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .image-container {\n        display: flex;\n        justify-content: flex-start;\n        position: relative;\n        width: 100%;\n    }\n\n    .image {\n        align-items: center;\n        display: flex;\n        height: 154px;\n        justify-content: center;\n        width: 100%;\n    }\n\n    .image svg {\n        fill: #BCBCBC;\n    }\n\n    ::slotted([slot="image"]) {\n        max-height: 154px;\n    }\n\n    .badge {\n        background-color: ',";\n        border-top-right-radius: calc("," * 1px);\n        bottom: 0px;\n        box-sizing: border-box;\n        color: ",";\n        font-size: ",";\n        height: 22px;\n        line-height: ",";\n        overflow: hidden;\n        padding: 3px 6px;\n        position: absolute;\n        max-width: calc(100% - 12px);\n        display: -webkit-box;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n    }\n\n    .price-container {\n        box-sizing: border-box;\n        padding: 0 12px;\n        margin-bottom: 8px;\n        overflow: hidden;\n        width: 100%;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 3;\n    }\n\n    .current-price {\n        display: inline-block;\n        font-size: ",";\n        font-weight: 700;\n        line-height: ",";\n        width: max-content;\n    }\n\n    .previous-price {\n        color: ",";\n        display: inline-block;\n        font-size: ",";\n        line-height: ",";\n        text-decoration: line-through;\n        width: max-content;\n    }\n\n    .product-title {\n        color: ",";\n        font-size: ",";\n        line-height: ",";\n        overflow: hidden;\n    }\n"])),ih("flex"),Ro,Oo,Wr,No,Fo,Ho,vp,Oo,vp,Vh,Mo,Br,Za,Po,nr,Fo,Ho,Vo,Go,zr,Fo,Ho,zr,Fo,Ho).withBehaviors(eh(Td(Hy||(Hy=j(["\n       :host,\n       .previous-price,\n       .product-title {\n            forced-color-adjust: auto;\n            color: ",";\n        }\n\n        :host .control:hover,\n        :host([href]) .control:hover,\n        :host([href]) .control:"," {\n            forced-color-adjust: none;\n            box-shadow: inset 0 0 0 calc(("," * 1px)) ",";\n        }\n\n        .badge {\n            forced-color-adjust: none;\n            color: ",";\n            background: ",";\n            box-shadow: 0 0 0 calc(("," * 1px)) ",";\n        }\n\n        .image svg {\n            fill: ",";\n        }\n    "])),oh.LinkText,Vh,Mo,oh.LinkText,oh.ButtonText,oh.ButtonFace,Ro,oh.ButtonText,oh.ButtonText)))},template:function(t,e){return Qd(Uy||(Uy=j(['\n    <a\n        class="control"\n        part="control"\n        ','\n        download="','"\n        href="','"\n        hreflang="','"\n        ping="','"\n        referrerpolicy="','"\n        rel="','"\n        target="','"\n        type="','"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="','"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','"\n    >\n        <div class="content-container">\n            <div class="image-container" part="image-container">\n                ','\n                <div class="image" part="image">\n                    <slot name="image"> ',' </slot>\n                </div>\n            </div>\n            <div class="price-container" part="price-container">\n                <div class="prices" part="prices">\n                    ',"\n                    ",'\n                </div>\n                <span class="product-title" part="product-title">\n                    <slot></slot>\n                </span>\n            </div>\n        </div>\n    </a>\n'])),Th("control"),(function(t){return t.download}),(function(t){return t.href}),(function(t){return t.hreflang}),(function(t){return t.ping}),(function(t){return t.referrerpolicy}),(function(t){return t.rel}),(function(t){return t.target}),(function(t){return t.type}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.ariaExpanded}),(function(t){return t.ariaFlowto}),(function(t){return t.ariaHaspopup}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLabelledby}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),Pp((function(t){return t.badge}),Qd(Vy||(Vy=j(['\n                        <div class="badge" part="badge" title="','">\n                            ',"\n                        </div>\n                    "])),(function(t){return t.badge}),(function(t){return t.badge}))),Ey,Pp((function(t){return t.currentPrice}),Qd(Gy||(Gy=j(['<div\n                            class="current-price"\n                            part="current-price"\n                        >\n                            ',"\n                        </div>"])),(function(t){return t.currentPrice}))),Pp((function(t){return t.previousPrice}),Qd(Wy||(Wy=j(['<div\n                                class="previous-price"\n                                part="previous-price"\n                            >\n                                ',"\n                            </div>\n                            <br />"])),(function(t){return t.previousPrice}))))}});function zy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Ky=function(t){u(n,t);var e=zy(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).hasShippingCost=!1,t.itemTitleId=Ag("itemTitleId"),t.deliveryLabelId=Ag("deliveryLabelId"),t.deliveryInfoId=Ag("deliveryInfoId"),t.shipperLabelId=Ag("shipperLabelId"),t.ratingLabelId=Ag("ratingLabelId"),t.ratingId=Ag("ratingId"),t.shipperLinkId=Ag("shipperLinkId"),t.onKeyPressHandler=function(e){if(e.keyCode===dh)e.preventDefault(),t.onClickHandler()},t.linkKeyPressHandler=function(e){if(e.keyCode===dh)e.preventDefault(),t.linkClickHandler()},t}return r(n,[{key:"onClickHandler",value:function(){this.$emit("add-to-cart")}},{key:"linkClickHandler",value:function(){this.$emit("link-invoked")}}]),n}(hd);tg([Fn({attribute:"item-title"})],Ky.prototype,"itemTitle",void 0),tg([Fn({attribute:"item-price"})],Ky.prototype,"itemPrice",void 0),tg([Fn({attribute:"delivery-label"})],Ky.prototype,"deliveryLabel",void 0),tg([Fn({attribute:"delivery-info"})],Ky.prototype,"deliveryInfo",void 0),tg([Fn({attribute:"shipper-label"})],Ky.prototype,"shipperLabel",void 0),tg([Fn({attribute:"shipper-name"})],Ky.prototype,"shipperName",void 0),tg([Fn({attribute:"rating-label"})],Ky.prototype,"ratingLabel",void 0),tg([Fn({attribute:"rating"})],Ky.prototype,"rating",void 0),tg([Fn({attribute:"shipper-url"})],Ky.prototype,"shipperUrl",void 0),tg([Fn({attribute:"has-shipping-cost",mode:"boolean"})],Ky.prototype,"hasShippingCost",void 0),tg([Fn({attribute:"action-button-text"})],Ky.prototype,"actionButtonText",void 0),tg([Fn({attribute:"action-button-aria-label"})],Ky.prototype,"actionButtonAriaLabel",void 0);var Yy=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var jy,qy=function(t){if(!Yy(t))return!1;var e=mg(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Zy=og["__core-js_shared__"],Xy=(jy=/[^.]+$/.exec(Zy&&Zy.keys&&Zy.keys.IE_PROTO||""))?"Symbol(src)_1."+jy:"";var Jy=function(t){return!!Xy&&Xy in t},Qy=Function.prototype.toString;var tC=function(t){if(null!=t){try{return Qy.call(t)}catch(t){}try{return t+""}catch(t){}}return""},eC=/^\[object .+?Constructor\]$/,nC=Function.prototype,iC=Object.prototype,oC=nC.toString,aC=iC.hasOwnProperty,rC=RegExp("^"+oC.call(aC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var sC=function(t){return!(!Yy(t)||Jy(t))&&(qy(t)?rC:eC).test(tC(t))};var lC=function(t,e){return null==t?void 0:t[e]};var cC=function(t,e){var n=lC(t,e);return sC(n)?n:void 0},uC=cC(Object,"create");var dC=function(){this.__data__=uC?uC(null):{},this.size=0};var hC=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},pC=Object.prototype.hasOwnProperty;var fC=function(t){var e=this.__data__;if(uC){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return pC.call(e,t)?e[t]:void 0},gC=Object.prototype.hasOwnProperty;var mC=function(t){var e=this.__data__;return uC?void 0!==e[t]:gC.call(e,t)};var vC=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=uC&&void 0===e?"__lodash_hash_undefined__":e,this};function yC(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}yC.prototype.clear=dC,yC.prototype.delete=hC,yC.prototype.get=fC,yC.prototype.has=mC,yC.prototype.set=vC;var CC=yC;var bC=function(){this.__data__=[],this.size=0};var SC=function(t,e){return t===e||t!=t&&e!=e};var xC=function(t,e){for(var n=t.length;n--;)if(SC(t[n][0],e))return n;return-1},EC=Array.prototype.splice;var AC=function(t){var e=this.__data__,n=xC(e,t);return!(n<0)&&(n==e.length-1?e.pop():EC.call(e,n,1),--this.size,!0)};var TC=function(t){var e=this.__data__,n=xC(e,t);return n<0?void 0:e[n][1]};var DC=function(t){return xC(this.__data__,t)>-1};var kC=function(t,e){var n=this.__data__,i=xC(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function IC(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}IC.prototype.clear=bC,IC.prototype.delete=AC,IC.prototype.get=TC,IC.prototype.has=DC,IC.prototype.set=kC;var wC=IC,PC=cC(og,"Map");var OC=function(){this.size=0,this.__data__={hash:new CC,map:new(PC||wC),string:new CC}};var RC=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var MC=function(t,e){var n=t.__data__;return RC(e)?n["string"==typeof e?"string":"hash"]:n.map};var NC=function(t){var e=MC(this,t).delete(t);return this.size-=e?1:0,e};var LC=function(t){return MC(this,t).get(t)};var _C=function(t){return MC(this,t).has(t)};var FC=function(t,e){var n=MC(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function HC(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}HC.prototype.clear=OC,HC.prototype.delete=NC,HC.prototype.get=LC,HC.prototype.has=_C,HC.prototype.set=FC;var BC=HC;function UC(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var r=t.apply(this,i);return n.cache=a.set(o,r)||a,r};return n.cache=new(UC.Cache||BC),n}UC.Cache=BC;var VC=UC((function(t){var e=eo(t);if(null!==e)return e;if(null!==(e=no(t)))return e;throw new Error("".concat(t,' cannot be converted to a ColorRGBA64. Color strings must be one of the following formats: "#RGB", "#RRGGBB", or "rgb(r, g, b)"'))}));var GC,WC,$C,zC,KC,YC,jC,qC=function(){function t(e,n){s(this,t),this.cache=new WeakMap,this.light=e,this.dark=n}return r(t,[{key:"bind",value:function(t){this.attach(t)}},{key:"unbind",value:function(t){var e=this.cache.get(t);e&&Ya.unsubscribe(e)}},{key:"attach",value:function(t){var e=this.cache.get(t)||new ZC(this.light,this.dark,t),n=Ya.getValueFor(t);Ya.subscribe(e,t),e.attach(n),this.cache.set(t,e)}}]),t}(),ZC=function(){function t(e,n,i){s(this,t),this.light=e,this.dark=n,this.source=i,this.attached=null}return r(t,[{key:"handleChange",value:function(t){var e=t.target,n=t.token;this.attach(n.getValueFor(e))}},{key:"attach",value:function(t){var e=function(t){return ki(VC(t))}(t.toColorString())<=So.DarkMode?"dark":"light";this.attached!==this[e]&&(null!==this.attached&&this.source.$fastController.removeStyles(this.attached),this.attached=this[e],null!==this.attached&&this.source.$fastController.addStyles(this.attached))}}]),t}(),XC=Td(GC||(GC=j(["\n    .delivery-label.has-shipping-cost {\n        color: var(--shipping-cost-color);\n    }\n"]))),JC=Td(WC||(WC=j(["\n    .delivery-label.has-shipping-cost {\n        color: var(--shipping-cost-color-dark-mode);\n    }\n"]))),QC=Td($C||($C=j(["\n    :host {\n        --content-max-lines: 2;\n        --shipping-cost-color: #9d6600;\n        --shipping-cost-color-dark-mode: #bc9751;\n        outline: none;\n        font-family: ",";\n        font-size: ",";\n        font-weight: 500;\n        line-height: ",";\n        min-width: calc("," * 1px);\n        border-radius: calc("," * 1px);\n        box-sizing: border-box;\n        color: ",";\n        fill: currentcolor;\n        min-height: 78px;\n        display: block;\n    }\n\n    .control {\n        display: grid;\n        grid-template-columns: 1fr 90px;\n        grid-column-gap: 8px;\n        box-sizing: border-box;\n        background: transparent;\n        justify-content: center;\n        align-items: flex-start;\n        padding: 10px 16px 10px;\n        outline: none;\n        text-decoration: none;\n        border: calc("," * 1px) solid transparent;\n        color: inherit;\n        border-radius: inherit;\n        fill: inherit;\n        cursor: inherit;\n        font-family: inherit;\n        width: 100%;\n        height: 100%;\n        --elevation: 4;\n        min-height: 78px;\n        ",";\n    }\n\n    .price-container {\n        grid-column: 2;\n        grid-row: 1;\n        display: flex;\n        flex-direction: column;\n        justify-self: end;\n        align-items: flex-end;\n        justify-content: center;\n        font-size: ",";\n        text-overflow: ellipsis;\n        height: 100%;\n        overflow: hidden;\n        min-height: ",";\n        max-width: 90px;\n        min-height: 12px;\n    }\n    .action-button {\n        height: 24px;\n        margin: 0 1px;\n    }\n\n    .action-button::part(control) {\n        max-height: 24px;\n        padding: 0 8px;\n        font-size: 12px;\n    }\n\n    .action-button,\n    .action-button::part(control) {\n        color: #008076;\n        max-width: 90px;\n        background: padding-box linear-gradient(var(--fill-color), var(--fill-color)), border-box linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n    }\n\n    .shipper-link::part(control) {\n        text-decoration: none;\n        border-bottom: none;\n        margin: calc("," * 1px);\n    }\n\n    .action-button::part(content) {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .shipper-link::part(control):focus {\n        border: calc("," * 1px) solid ",";\n        margin: 0;\n    }\n\n    .item-title {\n        margin-bottom: 5px;\n    }\n\n    .delivery-label,\n    .shipper-label,\n    .rating-label {\n        color: ",";\n    }\n\n    .shipper-link {\n        font-weight: 400;\n    }\n\n    .content {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        justify-content: space-between;\n        font-weight: 400;\n        text-align: left;\n    }\n\n    .item-price {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-inline-end: 4px;\n        font-weight: 400;\n        line-height: normal;\n        margin-block-end: 7px;\n    }\n\n    @media (max-width: 655px) {\n        :host {\n            max-width: 602px;\n        }\n    }\n    @media (prefers-color-scheme: dark) {\n        .action-button,\n        .action-button::part(control) {\n            color: #09E6C3;\n        }\n    }\n"])),No,Fo,Ho,Gh,Oo,Wr,Ro,vp,Vo,Go,Ro,Ro,Br,zr).withBehaviors(new qC(XC,JC)),tb=Qd(zC||(zC=j(['\n    <fluent-button\n        appearance="neutral"\n        class="action-button"\n        aria-label="','"\n        aria-describedby="'," "," "," "," "," "," ",'"\n        @click="','"\n        @keyup="','"\n    >\n        ',"\n    </fluent-button>\n"])),(function(t){return t.actionButtonAriaLabel}),(function(t){return t.itemTitleId}),(function(t){return t.deliveryLabelId}),(function(t){return t.deliveryInfoId}),(function(t){return t.shipperLabelId}),(function(t){return t.shipperLinkId}),(function(t){return t.ratingLabelId}),(function(t){return t.ratingId}),(function(t){return t.onClickHandler()}),(function(t,e){return t.onKeyPressHandler(e.event)}),(function(t){return t.actionButtonText})),eb=Ky.compose({baseName:"shopping-similar-seller",shadowOptions:{delegatesFocus:!0},styles:QC,template:function(t,e){return Qd(KC||(KC=j(['\n    <div class="control" part="control">\n        <div class="price-container" part="price-container">\n            <span class="item-price" part="item-price">',"</span>\n            ",'\n        </div>\n        <div class="content" part="content">\n            <div class="item-title" id="','">\n                ','\n            </div>\n            <div>\n                <div>\n                    <span\n                        id="','"\n                        class="delivery-label ','"\n                        part="delivery-label"\n                        >','</span\n                    >\n                    <span\n                        id="','"\n                        class="delivery-info"\n                        part="delivery-info"\n                        >','</span\n                    >\n                </div>\n                <div>\n                    <span\n                        class="shipper-label"\n                        part="shipper-label"\n                        id="','"\n                        >','</span\n                    >\n                    <fluent-anchor\n                        id="','"\n                        appearance="hypertext"\n                        class="shipper-link"\n                        part="shipper-link"\n                        href="','"\n                        @click="','"\n                        @keyup="','"\n                        >',"</fluent-anchor\n                    >\n                </div>\n                ","\n            </div>\n        </div>\n    </div>\n"])),(function(t){return t.itemPrice}),Pp((function(t){return t.actionButtonText}),Qd(YC||(YC=j(["",""])),tb)),(function(t){return t.itemTitleId}),(function(t){return t.itemTitle}),(function(t){return t.deliveryLabelId}),(function(t){return t.hasShippingCost?"has-shipping-cost":""}),(function(t){return t.deliveryLabel}),(function(t){return t.deliveryInfoId}),(function(t){return t.deliveryInfo}),(function(t){return t.shipperLabelId}),(function(t){return t.shipperLabel}),(function(t){return t.shipperLinkId}),(function(t){return t.shipperUrl}),(function(t){return t.linkClickHandler()}),(function(t,e){return t.linkKeyPressHandler(e.event)}),(function(t){return t.shipperName}),Pp((function(t){return t.rating}),Qd(jC||(jC=j(['\n                        <div>\n                            <span\n                                class="rating-label"\n                                part="rating-label"\n                                id="','"\n                                >','</span\n                            >\n                            <span id="','" class="rating" part="rating"\n                                >',"</span\n                            >\n                        </div>\n                    "])),(function(t){return t.ratingLabelId}),(function(t){return t.ratingLabel}),(function(t){return t.ratingId}),(function(t){return t.rating}))))}});function nb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var ib,ob=function(t){u(n,t);var e=nb(n);function n(){var t;return s(this,n),(t=e.apply(this,arguments)).isVisible=!1,t.isFocused=!1,t.hasLink=!1,t.onKeyDownHandlerLink=function(e){var n;switch(e.keyCode){case dh:case 13:e.preventDefault(),t.linkHandler();break;case 9:case 27:e.preventDefault(),t.isVisible=!1;var i=null===(n=t.shadowRoot)||void 0===n?void 0:n.querySelector(".control");i&&i.focus()}},t}return r(n,[{key:"onHoverHandler",value:function(){this.isVisible=!0,this.$emit("hover")}},{key:"onHoverEndHandler",value:function(t){this.isVisible=null!=t&&t}},{key:"onFocusHandler",value:function(){this.isFocused=!0}},{key:"onBlurHandler",value:function(){this.isFocused=!1}},{key:"onKeypressHandler",value:function(t){var e;switch(t.keyCode){case 27:this.isVisible&&(t.preventDefault(),this.isVisible=!1);break;case 13:if(this.isFocused){t.preventDefault(),this.isVisible=!0;var n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".link");n&&this.linkText&&n.focus()}}}},{key:"onClickHandlerLink",value:function(){this.linkHandler()}},{key:"generateTooltipOffsets",value:function(){var t,e=null!==(t=this.caratSide)&&void 0!==t?t:al.Top;e!==al.Bottom&&e!==al.Top||!this.caratLeftOffset?e!==al.Left&&e!==al.Right||!this.caratTopOffset||this.style.setProperty("--carat-top-offset",this.caratTopOffset):this.style.setProperty("--carat-left-offset",this.caratLeftOffset)}},{key:"connectedCallback",value:function(){var t=this;Qf(p(n.prototype),"connectedCallback",this).call(this),(this.caratTopOffset||this.caratLeftOffset)&&this.generateTooltipOffsets(),this.width?this.style.setProperty("--tooltip-width",this.width):this.style.setProperty("--tooltip-width","300px"),this.addEventListener("hover",(function(){t.generateTooltipOffsets(),t.style.setProperty("--tooltip-width",t.width)})),this.addEventListener("keydown",(function(e){t.onKeypressHandler(e)}))}}]),n}(zh);tg([Fn],ob.prototype,"header",void 0),tg([Fn],ob.prototype,"content",void 0),tg([Fn],ob.prototype,"linkText",void 0),tg([Fn],ob.prototype,"linkHandler",void 0),tg([Fn],ob.prototype,"caratSide",void 0),tg([Fn],ob.prototype,"width",void 0),tg([Fn],ob.prototype,"fontSize",void 0),tg([Fn],ob.prototype,"caratLeftOffset",void 0),tg([Fn],ob.prototype,"caratTopOffset",void 0),tg([An],ob.prototype,"isVisible",void 0),tg([An],ob.prototype,"isFocused",void 0),tg([An],ob.prototype,"hasLink",void 0);var ab,rb,sb,lb,cb,ub=ob.compose({baseName:"shopping-tooltip",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Td(ib||(ib=j(["\n    .title {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-weight: 600;\n        font-size: 14px;\n        line-height: 20px;\n        margin: 0px;\n        margin-bottom: 10px;\n        color: var(--neutral-foreground-rest);\n    }\n    .content {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        line-height: 16px;\n        margin: 0px;\n        font-weight: 400;\n        color: var(--neutral-foreground-rest);\n    }\n    .link {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 12px;\n        font-weight: 600;\n        line-height: 16px;\n        color: rgba(0, 0, 0, 0.5);\n        text-decoration: none;\n    }\n    .tooltip {\n        position: absolute;\n        background: var(--tooltip-background-color, #FFFFFF);\n        text-align: left;\n        box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        border-radius: 4px;\n        padding: 12px;\n        padding-bottom: 10px;\n        z-index: 900;\n        cursor: default;\n        width: var(--tooltip-width);\n        box-sizing: border-box;\n    }\n    .tooltip.top {\n        margin-top: 22px;\n        margin-left: calc(var(--carat-left-offset, calc(var(--tooltip-width) / 2)) * -1 - 4px);\n    }\n    .tooltip.bottom {\n        margin-bottom: 22px;\n        margin-left: calc(var(--carat-left-offset, calc(var(--tooltip-width) / 2)) * -1 - 4px);\n    }\n    .tooltip.right {\n        margin-right: 18px;\n        margin-top: calc(var(--carat-top-offset, 5px) * -1);\n    }\n    .tooltip.left {\n        margin-left: 18px;\n        margin-top: calc(var(--carat-top-offset, 5px) * -1);\n    }\n    .top .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-left: 10px solid transparent;\n        border-right: 10px solid transparent;\n        border-bottom: 6px solid var(--tooltip-background-color, #FFFFFF);\n        position: absolute;\n        top: -5px;\n        left: var(--carat-left-offset, calc(var(--tooltip-width) / 2));\n    }\n    .bottom .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-left: 10px solid transparent;\n        border-right: 10px solid transparent;\n        border-top: 6px solid var(--tooltip-background-color, #FFFFFF);\n        position: absolute;\n        bottom: -5px;\n        left: var(--carat-left-offset, calc(var(--tooltip-width) / 2));\n    }\n    .right .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-top: 10px solid transparent;\n        border-bottom: 10px solid transparent;\n        border-left: 6px solid var(--tooltip-background-color, #FFFFFF);\n        position: absolute;\n        top: var(--carat-top-offset);\n        right: -5px;\n    }\n    .left .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-top: 10px solid transparent;\n        border-bottom: 10px solid transparent;\n        border-right: 6px solid var(--tooltip-background-color, #FFFFFF);\n        position: absolute;\n        top: var(--carat-top-offset);\n        left: -5px;\n    }\n    .icon:focus {\n        outline: none;\n        box-shadow: 0px 0px 0px 2px #898989;\n        border-radius: 4px;\n    }\n    .link:focus {\n        outline: none;\n        box-shadow: 0px 0px 0px 2px #898989;\n        border-radius: 4px;\n    }\n    @media (prefers-color-scheme: dark) {\n        .tooltip {\n            background: var(--tooltip-background-color, #3b3b3b);\n        }\n        .top .carat {\n            border-bottom: 6px solid var(--tooltip-background-color, #3b3b3b);\n        }\n        .bottom .carat {\n            border-top: 6px solid var(--tooltip-background-color, #3b3b3b);\n        }\n        .right .carat {\n            border-left: 6px solid var(--tooltip-background-color, #3b3b3b);\n        }\n        .left .carat {\n            border-right: 6px solid var(--tooltip-background-color, #3b3b3b);\n        }\n        .link {\n            color: rgba(255, 255, 255, 0.7);\n        }\n        .icon:focus {\n            outline: none;\n            box-shadow: 0px 0px 0px 2px #898989;\n            border-radius: 4px;\n        }\n    }\n    @media (-ms-high-contrast: active) {\n        .content {\n            color: windowText;\n        }\n        .tooltip {\n            border: 0.5px solid windowText;\n        }\n    }"])))},template:function(t,e){return Qd(ab||(ab=j(['\n    <template>\n        <a\n        class="icon control"\n        part="control"\n        ','\n        href="#"\n        role="button"\n        style="\n            display:flex;\n            flex-direction:',";\n            align-items:",";\n            justify-content:",';\n            position: relative;"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="hover-anchor"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','"\n        @blur="','"\n        @mouseenter="','"\n        @mouseleave="','"\n        @focus="','"">\n            <slot name="hover-anchor" id="hover-anchor" class="hover-anchor"></slot>\n            <div\n            class=',"\n            role=",'\n            style="display:',"; padding: ",';"\n            aria-hidden="','"\n            aria-labelledby="title content">\n                <div class="carat"></div>\n                ',"\n                ","\n                ","\n            </div>\n        </a>\n    </template>\n"])),Th("control"),(function(t){return t.caratSide===al.Right||t.caratSide===al.Left?"column":"row"}),(function(t){return t.caratSide===al.Right?"flex-end":"flex-start"}),(function(t){return t.caratSide===al.Bottom?"flex-end":"flex-start"}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.isVisible}),(function(t){return t.ariaFlowto}),(function(t){return t.linkText&&t.linkHandler}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),(function(t){return t.onBlurHandler()}),(function(t){return t.onHoverHandler()}),(function(t){return t.onHoverEndHandler()}),(function(t){return t.onFocusHandler()}),(function(t){return t.caratSide===al.Right?"tooltip right":t.caratSide===al.Left?"tooltip left":t.caratSide===al.Bottom?"tooltip bottom":"tooltip top"}),(function(t){return t.linkText?"dialog":"tooltip"}),(function(t){return t.isVisible?"block":"none"}),(function(t){return t.fontSize?"6px":"12px"}),(function(t){return!t.isVisible}),Pp((function(t){return t.header}),Qd(rb||(rb=j(['\n                        <p id="title" class="title">\n                            ',"\n                        </p>"])),(function(t){return t.header}))),Pp((function(t){return t.content}),Qd(sb||(sb=j(['\n                        <p id="content" class="content" style="margin-bottom: ',"; font-size: ",'">\n                            ',"\n                        </p>"])),(function(t){return t.linkHandler&&t.linkText?"4px":"0px"}),(function(t){var e;return null!==(e=t.fontSize)&&void 0!==e?e:"12px;"}),(function(t){return t.content}))),Pp((function(t){return t.linkText&&t.linkHandler}),Qd(lb||(lb=j(['\n                    <a class="link" href="#" tabindex="0" @click="','" @keydown="','">\n                        ',"\n                    </a>"])),(function(t){return t.onClickHandlerLink()}),(function(t,e){return t.onKeyDownHandlerLink(e.event)}),(function(t){return t.linkText}))))}}),db=function(){function t(){s(this,t)}return r(t,[{key:"initializeComponents",value:function(){var t;bd.getOrCreate(t).withPrefix("fluent").register(ch(),Hh(),Wh(),np(),gp(),bp(),wp(),Np(),_p(),Fp(),Up(),Kp(),ef(),rf(),pf(),ff(),yf(),Sf(),Af(),Tf(),If(),wf(),zf()),bd.getOrCreate().withPrefix("msft").register(Yg(),lm(),Xf(),$y(),Ay(),Pm(),Nv(),Jv(),Ug(),Cv(),cy(),Ly(),zm(),Km(),ub(),eb(),iv())}}]),t}();!function(t){t.HubPageDataLoaded="HubPageDataLoaded"}(cb||(cb={}));var hb=function(){function t(){s(this,t)}var n,i,a;return r(t,null,[{key:"startFetchingShoppingFeedModulesData",value:(a=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.shoppingFeedModulesNeedHydration&&e.experimentData.isExperimentActive(Be.startShoppingHomeModules)&&e.common.muid)){t.next=6;break}return this.shoppingFeedModulesNeedHydration=!1,t.next=4,this.fetchFrom1S(this.buildHubPageUrl(e));case 4:n=t.sent,document.dispatchEvent(new CustomEvent(cb.HubPageDataLoaded,{detail:n}));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"fetchTrendingCategoryOffers",value:(i=e(o().mark((function t(e,n){var i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchFrom1S(this.buildTrendingOffersOfCategoryUrl(e.id,n));case 2:if(!((null==(a=t.sent)||null===(i=a.shoppingEntities)||void 0===i?void 0:i.length)>0)){t.next=7;break}return t.abrupt("return",{shoppingEntities:a.shoppingEntities,title:e.title});case 7:return t.abrupt("return",{shoppingEntities:[],title:""});case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"fetchFrom1S",value:(n=e(o().mark((function t(e){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return i=t.sent,t.next=5,i.json();case 5:if(a=t.sent,null===(n=a[0])||void 0===n||!n.data){t.next=10;break}return t.abrupt("return",JSON.parse(a[0].data));case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"buildHubPageUrl",value:function(t){var e=this.getCommonParams(t);return e.set("$select","PersonalizedZI.Microservice.HubPageWorkflowV2"),e.set("$top","24"),e.set("$filter","TrendingOffers||||".concat(this.uuidv4(),"~").concat(this.OneServiceDownstreamRequestTimeout)),"".concat(this.BaseUrl).concat(e.toString())}},{key:"buildTrendingOffersOfCategoryUrl",value:function(t,e){var n=this.getCommonParams(e);return n.set("$select","PersonalizedZI.Microservice.ZIWorkflowWrapper"),n.set("$top","24"),n.set("$filter","TrendingOffersOfCategory|".concat(t,"|||").concat(this.uuidv4(),"~").concat(this.OneServiceDownstreamRequestTimeout)),"".concat(this.BaseUrl).concat(n.toString())}},{key:"getCommonParams",value:function(t){var e=new URLSearchParams;return e.set("fdhead","prg-sh-xap-egspmrct"),e.set("ocid","edgesidepane-startshop-feeds"),e.set("timeOut","10000"),e.set("caller","api"),e.set("user","m-".concat(t.common.muid)),e.set("market",t.common.market||"en-us"),e.set("activityid",this.uuidv4()),e}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}]),t}();f(hb,"shoppingFeedModulesNeedHydration",!1),f(hb,"BaseUrl","https://assets.msn.com/service/news/feed/segments/shopping?apikey=xQDoKYnulweTMuWeKlSeDKcvt4qLSTAMQ53qodgVNO&"),f(hb,"OneServiceDownstreamRequestTimeout",7500);var pb=function(){function t(){s(this,t)}return r(t,null,[{key:"getModuleOrCreate",value:function(t,e,n,i){if(this.cache.has(t))return this.cache.get(t);var o=new e(n,i);return this.cache.set(t,o),hb.shoppingFeedModulesNeedHydration=!0,o}},{key:"getFeedModuleOrCreate",value:function(t,e,n,i){return this.cache.has(t)||(hb.shoppingFeedModulesNeedHydration=!0),this.getModuleOrCreate(t,e,n,i)}}]),t}();f(pb,"cache",new Map);var fb=function(){function t(e,n,i,o,a,r){s(this,t),f(this,"logModule",void 0),f(this,"pageHandlerModule",void 0),f(this,"strings",void 0),f(this,"currentTheme",void 0),f(this,"currentDirection",void 0),f(this,"commonAssets",void 0),this.logModule=e,this.pageHandlerModule=n,this.strings=i,this.currentTheme=o,this.currentDirection=a,this.commonAssets=r}return r(t,[{key:"renderErrorUI",value:function(t){var e=document.querySelector("#divContentWrapper");if(e){var n=document.createElement("msft-edge-shopping");this.addCommonStyles(n,this.currentTheme);var i=this.createElement("DIV",{id:"emptyCouponDiv",style:"display: flex; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 12px;"}),o=this.createElement("DIV",{style:"margin: 20px;"});o.innerHTML=this.commonAssets.getErrorImage(),o.setAttribute("aria-hidden","true");var a=this.createElement("P",{style:"font-weight: 600; margin-top: 5px; color: #666666;"});a.className=yt.EmptyCoupon,a.textContent=this.strings.commonErrorTitle;var r=this.createElement("P",{style:"margin-top: 5px; color: #666666;"});r.className=yt.Small,r.textContent=this.strings.commonErrorSubTitle,i.appendChild(o),i.appendChild(a),i.appendChild(r),i.slot="header-content",n.appendChild(i),n.fixedTitle="Shopping in Microsoft Edge";try{this.addHeaderIcon(n),this.createCloseButton(!1,n)}catch(t){}var s=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"User saw error page - ".concat(t),s),e.appendChild(n),un.queueUpdate((function(){parent.postMessage({height:e.offsetHeight,type:"resize_iframe",width:e.offsetWidth},"edge://shopping")}))}}},{key:"createElement",value:function(t,e,n){var i=document.createElement(t);if(e)for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);return n&&(i.innerText=n),i}},{key:"createCloseButton",value:function(t,e){var n,i=document.createElement("fluent-button");i.slot="header-actions",null!==(n=this.strings)&&void 0!==n&&n.commonClose?i.ariaLabel=this.strings.commonClose:i.ariaLabel="close",i.id=Yt.CLOSE;var o=this.createElement("DIV");o.setAttribute("aria-hidden","true"),o.innerHTML=this.commonAssets.getCloseButton(),i.appearance="stealth",i.appendChild(o);var a=this.pageHandlerModule,r=this.logModule;i.addEventListener("click",(function(){if(t){if(t){var e=new Yr(E.NotificationDismiss);a.RecordAsUserAction(is.DISMISSED),r.LogInfoEvent(S.ButtonClick,"Notification Dismissed",e)}}else{var n=new Yr(E.FlyoutDismiss);a.RecordAsUserAction(is.DISMISSED),r.LogInfoEvent(S.ButtonClick,"Flyout Dismissed",n)}a.DismissPopup()})),e.appendChild(i)}},{key:"addHeaderIcon",value:function(t){var e=document.createElement("DIV");e.innerHTML=this.commonAssets.getHeaderIcon(),e.slot="header-icon",t.appendChild(e)}},{key:"addCommonStyles",value:function(t,e){if(t){var n,i=document.querySelector("fluent-design-system-provider");if(i)this.currentTheme===xt.Dark?i.setAttribute("background-color","#4a4a4a"):i.setAttribute("background-color","#FFFFFF"),this.currentDirection===At.RTL?i.style.direction="rtl":i.style.direction="ltr",null!==(n=this.strings)&&void 0!==n&&n.commonFixedTitle?i.setAttribute("aria-label",this.strings.commonFixedTitle):i.setAttribute("aria-label","Shopping in Microsoft Edge");var o=this.commonAssets.getStyles(),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(e===xt.Dark||a)&&(o+=this.commonAssets.getDarkModeStyles()),this.applyStyles(t,o)}}},{key:"applyStyles",value:function(t,e){var n=this.createElement("STYLE");n.textContent=e,n.type="text/css",n.rel="stylesheet",t.appendChild(n)}}]),t}(),gb=fb,mb=r((function t(){s(this,t)}));f(mb,"markers",{column:0,finishedCreatingModules:!1,finishedSettingHeader:!1,initializeFlyout:!1,initializeWithData:!1,initializedLogData:!1,lastModuleFinished:"",lastModuleStarted:"",line:0,logFinished:!1,logStarted:!1,modulesRendered:!1,popupOrigination:void 0,settingRegularFlyout:!1,src:"",startedCreatingModules:!1,startedSettingHeader:!1,triggeredSupportedExperiments:!1});var vb,yb,Cb,bb,Sb,xb,Eb,Ab,Tb,Db,kb=mb;!function(t){t.ICNotification="icnotification"}(vb||(vb={})),function(t){t.B_Portrait1CTA="B_Portrait1CTA",t.A_Landscape1CTA="A_Landscape1CTA",t.CONTROL="control",t.C_Portrait2CTA="C_Portrait2CTA",t.D_Portrait2CTACurrentPrice="D_Portrait2CTACurrentPrice",t.E_Landscape1CTANoTitle="E_Landscape1CTANoTitle",t.F_Landscape2CTANoTitle="F_Landscape2CTANoTitle",t.G_Landscape1CTANoImage="G_Landscape1CTANoImage",t.H_Landscape2CTANoImage="H_Landscape2CTANoImage"}(yb||(yb={})),function(t){t.SmallerFootprintBasic="smallerfootprintbasic",t.NoCouponSection="nocouponsection"}(Cb||(Cb={})),function(t){t.AS_ReRankDA="AS_ReRankDA",t.AS_FeatureOpt="AS_FeatureOpt",t.AS_DailyCache="AS_DailyCache"}(bb||(bb={})),function(t){t.BiggerText="BiggerText",t.DropPercentage="DropPercentage"}(Sb||(Sb={})),function(t){t.CampaignOnePointFive="OnePointFive",t.CampaignFive="Five"}(xb||(xb={})),function(t){t.NoDismiss="NoDismiss"}(Eb||(Eb={})),function(t){t.ColoredHeaderExp1="ColoredHeaderExp1",t.ColoredHeaderExp2="ColoredHeaderExp2",t.ColoredHeaderExp3="ColoredHeaderExp3",t.ColoredHeaderExp4="ColoredHeaderExp4"}(Ab||(Ab={})),function(t){t.Trivia_NoIcon="NoIcon"}(Tb||(Tb={})),function(t){t.Rewards_50="Rewards50",t.Rewards_100="Rewards100",t.Rewards_200="Rewards200",t.Rewards_0="Rewards0"}(Db||(Db={}));var Ib=function(){function t(e,n,i,o,a){s(this,t),f(this,"flyoutData",void 0),f(this,"stateManagement",void 0),f(this,"utilities",void 0),f(this,"pageHandlerModule",void 0),f(this,"commonAssets",void 0),f(this,"logModule",void 0),this.flyoutData=e,this.utilities=n,this.pageHandlerModule=i,this.logModule=o,this.stateManagement=a,this.commonAssets=n.commonAssets}var n;return r(t,[{key:"createFlyoutButtons",value:(n=e(o().mark((function t(e,n,i){var a,r,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.flyoutData.dataStoreModule.CashBackData,i&&(n&&!this.isDisableOptOutMenuActive()&&(this.stateManagement.getState(pn.modulesRendered)&&this.createContextMenu(e,null!==(r=null==a?void 0:a.canRenderCashback)&&void 0!==r&&r,this.stateManagement.getState(pn.topModuleName),i),this.stateManagement.addEventListener(hn.ModulesRendered,(function(){var t;s.createContextMenu(e,null!==(t=null==a?void 0:a.canRenderCashback)&&void 0!==t&&t,s.stateManagement.getState(pn.topModuleName),i)}))),this.createCloseButton(e)),un.queueUpdate((function(){s.addListenerMenuItemKeyboardClick(e)}));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return n.apply(this,arguments)})},{key:"addAutoShowItem",value:function(t,e,n){var i=this,o=null,a=document.createElement("DIV"),r=this.isAutoOpenEnabledForFeature(e);if(r&&this.flyoutData.common.openedWith===Tt.Auto){o=document.createElement("fluent-menu-item"),n||(a.innerHTML=this.commonAssets.getDisableAutoOpen(),a.setAttribute("aria-hidden","true")),o.id="Enabled",o.className+="defaultFontFamily",this.utilities.closeFooterOverlay(t,o);var s=this.flyoutData.strings.commonCMAutoShowDisable,l=this.utilities.getFriendlyFeatureName(e);if(""!==l)s=this.utilities.replaceValueInKey("commonCMAutoShowDisableFeature",this.flyoutData.strings.commonCMAutoShowDisableFeature,l);else{var c=new _(A.ContextMenuInfo);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Friendly name missing for "+e,c)}o.textContent=s,o.title=s}else if(!r){o=document.createElement("fluent-menu-item"),a.innerHTML=this.commonAssets.getEnableAutoOpen(),a.setAttribute("aria-hidden","true"),o.id="Disabled",o.className+="defaultFontFamily";var u=this.flyoutData.strings.commonCMAutoShowEnable,d=this.utilities.getFriendlyFeatureName(e);if(""!==d)u=this.utilities.replaceValueInKey("commonCMAutoShowEnableFeature",this.flyoutData.strings.commonCMAutoShowEnableFeature,d);else{var h=new _(A.ContextMenuInfo);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Friendly name missing for "+e,h)}o.textContent=u,o.title=u}if(o){a.slot="start",o.appendChild(a);var p=this.pageHandlerModule,f=this.logModule;o.addEventListener("change",(function(t){if(o&&"Enabled"===o.id){o.textContent=i.flyoutData.strings.commonCMAutoShowEnable,o.title=i.flyoutData.strings.commonCMAutoShowEnable,o.id="Disabled";var n=document.createElement("DIV");n.slot="start",n.innerHTML=i.commonAssets.getEnableAutoOpen(),n.setAttribute("aria-hidden","true"),o.appendChild(n);var a=new Yr(E.AutoShowTurnedOff);p.RecordAsUserAction(is.TURN_OFF_AUTO_SHOW);var r="Auto Show turned off";e&&(r="Auto Show turned off for "+e),f.LogInfoEvent(S.ButtonClick,r,a,dn.CouponImpressionId),e&&e===Fe.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION?p.AllowServerDrivenNotifications(!1):p.AllowAutoShow(!1,e)}else if(o){o.textContent=i.flyoutData.strings.commonCMAutoShowDisable,o.title=i.flyoutData.strings.commonCMAutoShowDisable,o.id="Enabled";var s=document.createElement("DIV");s.slot="start",s.innerHTML=i.commonAssets.getDisableAutoOpen(),s.setAttribute("aria-hidden","true"),o.appendChild(s);var l=new Yr(E.AutoShowTurnedOn);p.RecordAsUserAction(is.TURN_ON_AUTO_SHOW);var c="Auto Show turned on";e&&(c="Auto Show turned on for "+e),f.LogInfoEvent(S.ButtonClick,c,l,dn.CouponImpressionId),e&&e===Fe.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION?p.AllowServerDrivenNotifications(!0):p.AllowAutoShow(!0,e)}t.stopPropagation()})),o.addEventListener("click",(function(t){t.stopPropagation()})),n&&o.addEventListener("click",(function(){i.pageHandlerModule.DismissPopup()})),this.flyoutData.experimentData.isExperimentActive(Be.doNotShowExperiment)||t.appendChild(o)}}},{key:"addListenerMenuItemKeyboardClick",value:function(t){var e=this,n=t.querySelectorAll("fluent-menu-item"),i=t.querySelector("#".concat(Yt.MENUCONTENT)),o=t.querySelector("#".concat(Yt.MENU));n&&n.length>0&&i&&o&&n.forEach((function(t){t.addEventListener("keydown",(function(t){e.handlerMenuItemKeyboardClick(t,i,o)}))}))}},{key:"handlerMenuItemKeyboardClick",value:function(t,e,n){"Enter"!==t.key&&"Space"!==t.key||(e.className="hide",n.setAttribute("aria-expanded","undefined"),n.focus())}},{key:"createCloseButton",value:function(t){var n,i=this,a=t.querySelector("#".concat(Yt.CLOSE));if(a)n=a;else{var r;(n=document.createElement("fluent-button")).slot="header-actions",null!==(r=this.flyoutData.strings)&&void 0!==r&&r.commonClose?n.ariaLabel=this.flyoutData.strings.commonClose:n.ariaLabel="close",n.id=Yt.CLOSE,n.title=this.flyoutData.strings.commonClose;var s=this.utilities.createElement("DIV");if(s.setAttribute("aria-hidden","true"),s.innerHTML=this.commonAssets.getCloseButton(),this.flyoutData.common.isPane){var l=s.querySelector("svg");l&&(l.style.width="20px",l.style.height="20px")}n.appearance="stealth",n.appendChild(s),t.appendChild(n)}var c=this.pageHandlerModule,u=this.logModule;n.addEventListener("click",e(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.flyoutData.common.openedWith!==Tt.Auto?(e=new Yr(E.FlyoutDismiss),c.RecordAsUserAction(is.DISMISSED),u.LogInfoEvent(S.ButtonClick,"Flyout Dismissed",e)):(n=new Yr(E.NotificationDismiss),c.RecordAsUserAction(is.DISMISSED),u.LogInfoEvent(S.ButtonClick,"Notification Dismissed",n)),i.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_COUPONS_CHECKOUT||i.flyoutData.common.openedWith!==Tt.Auto){t.next=7;break}return t.next=4,i.utilities.addNegativeEngagement(i.flyoutData.common.popupOrigination,2);case 4:if(!i.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=7;break}return t.next=7,i.utilities.userEngagementUtilities.addEngagement(ll.NEGATIVE,i.flyoutData.common.popupOrigination,i.stateManagement.getState(pn.topModuleName),qs.dismissWeight,E.FlyoutDismiss);case 7:c.DismissPopup();case 8:case"end":return t.stop()}}),t)}))))}},{key:"createContextMenu",value:function(t,e,n,i){var o,a,r=t.querySelector("#".concat(Yt.MENU)),s=t.querySelector("#".concat(Yt.MENUCONTENT));if(r)o=r,s&&s.remove(),a=this.createContextMenuDiv(n,e,o,t);else{(o=document.createElement("fluent-button")).slot="header-actions",o.id=Yt.MENU,o.ariaHaspopup="menu",o.ariaControls=Yt.MENUCONTENT,o.ariaLabel=this.flyoutData.strings.commonMoreOptionsLabel,o.title=this.flyoutData.strings.commonAltSettings;var l=this.utilities.createElement("DIV");l.setAttribute("aria-hidden","true"),l.innerHTML=this.commonAssets.getMenuIcon(),o.appearance="stealth",o.appendChild(l),a=this.createContextMenuDiv(n,e,o,t)}this.utilities.manageMenuEvents(a,o,this.stateManagement),this.handleClickOutsideMenu(i,a,o)}},{key:"createContextMenuDiv",value:function(t,e,n,i){var o=document.createElement("fluent-menu");o.id=Yt.MENUCONTENT,o.setAttribute("aria-labelledby",Yt.MENU);var a=this.flyoutData.experimentData;if(this.pageHandlerModule.TriggerExperiment(Be.footerInAA),!this.utilities.showNewFooter()||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SERVER_DRIVEN_ALL_PAGES||this.flyoutData.common.openedWith!==Tt.Auto){var r,s,l,c,u,d,h,p;if(this.pageHandlerModule.TriggerExperiment(Be.autoShowControlForFeature),a.isExperimentActive(Be.autoShowControlForFeature)){var f=t,g=this.getPopupOrigination(f);if(g)this.addAutoShowItem(o,g);else if(this.flyoutData.common.openedWith===Tt.Auto){var m=new _(A.ContextMenuInfo);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Popup origination not valid for "+f,m)}}else this.addAutoShowItem(o);void 0!==this.flyoutData.common.isOrganicFlowEnabled&&e&&this.addRebatesFlow(o,this.flyoutData.common.isOrganicFlowEnabled),void 0!==this.flyoutData.common.isShoppingPersonalizationEnabled&&this.flyoutData.experimentData.isExperimentActive(Be.priceDropNotification)&&this.addReminderFlow(o,this.flyoutData.common.isShoppingPersonalizationEnabled);var v=null!==(r=null===(s=this.flyoutData)||void 0===s||null===(l=s.dataStoreModule)||void 0===l||null===(c=l.OrderTrackingData)||void 0===c?void 0:c.shouldShowPackageTrackingNotification)&&void 0!==r&&r,y=null!==(u=null===(d=this.flyoutData)||void 0===d||null===(h=d.dataStoreModule)||void 0===h||null===(p=h.OrderTrackingData)||void 0===p?void 0:p.packageTrackingUserConsented)&&void 0!==u&&u;v&&y&&this.addPackageTrackingFlow(o);var C=document.createElement("fluent-menu-item"),b=document.createElement("DIV");b.innerHTML=this.commonAssets.getSettingsIcon(),b.slot="start",b.setAttribute("aria-hidden","true"),C.title=this.flyoutData.strings.commonCMManage,C.textContent=this.flyoutData.strings.commonCMManage,C.className+="defaultFontFamily",C.appendChild(b);var x=this.pageHandlerModule,T=this.logModule;C.addEventListener("change",(function(){x.RecordAsUserAction(is.MANAGE);var t=new Yr(E.FlyoutManage);T.LogInfoEvent(S.ButtonClick,"Flyout Menu Manage",t),x.NavigateToEdgeUrl("edge://settings/privacy#Shopping",cl.NEW_FOREGROUND_TAB)})),o.appendChild(C)}var D,k=new CustomEvent(hn.CreateFeedbackModule,{detail:{callback:function(t){t&&t.element&&(t.element.style.background="var(--neutral-layer-floating)",t.element.setAttribute("role","menuitem"),o.appendChild(t.element))},wrapperHeight:0}});return this.stateManagement.dispatchEvent(k),D=this.flyoutData.common.currentDirection===At.RTL?"35px":"50px",o.setAttribute("style","position: absolute; top: 40px; left: "+D+"; z-index: 10000; right: 10px; outline: none; padding: 0px!important;"),o.tabIndex=-1,o.className="hide",i.appendChild(o),un.queueUpdate((function(){o.setAttribute("slot","start-content")})),i.prepend(n),o}},{key:"handleClickOutsideMenu",value:function(t,e,n){t.addEventListener("click",(function(t){var i,o;null!==(i=t.target)&&void 0!==i&&null!==(o=i.nodeName)&&void 0!==o&&o.includes("FEEDBACK")||("hide"!==e.className?(e.className="hide",n.setAttribute("aria-expanded","undefined")):n.setAttribute("aria-expanded","true"))}))}},{key:"getPopupOrigination",value:function(t){if(void 0!==this.flyoutData.common.popupOrigination&&this.flyoutData.common.openedWith===Tt.Auto)return Object.values(this.pageHandlerModule.PopupOrigination).includes(this.flyoutData.common.popupOrigination)?this.flyoutData.common.popupOrigination:null;switch(t){case Rt.CASHBACK:var e,n=this.flyoutData.dataStoreModule.CashBackData;return null!=n&&n.isPersonalizedCashback?null!==(e=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isConfirmationPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION:this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PERSONALIZED_CASHBACK:null!=n&&n.isConfirmationPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_CONFIRMATION:null!=n&&n.isTurnedOff?null:this.flyoutData.common.isCheckoutPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_CHECKOUT:null!=n&&n.isCashBackActivated?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES:this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_ORGANIC_NEW;case Rt.COUPON:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_COUPONS_CHECKOUT;case Rt.PRICECOMPARISON:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_LOWER_PRICE_FOUND;case Rt.PRICEHISTORY:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PRICE_HISTORY;case Rt.COUPONCLIPPING:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_COUPONS_CLIPPING;case Rt.SIMILARSELLERS:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_OTHER_SELLERS;case Rt.CHECKOUTAUTOFILL:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_EXPRESS_CHECKOUT;case Rt.GROCERY_CASHBACK:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK;case Rt.AUTOSMARKETPLACE:case Rt.AUTOSPRICEINSIGHT:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_LOWER_PRICE_FOUND}return null}},{key:"getFeatureFromPopupOrigination",value:function(t){var e=this.pageHandlerModule.PopupOrigination,n=this.pageHandlerModule.AutoShowFeature;switch(t){case e.AUTO_SHOW_COUPONS_CHECKOUT:return n.COUPONS_CHECKOUT;case e.AUTO_SHOW_LOWER_PRICE_FOUND:return n.PRICE_COMPARE;case e.AUTO_SHOW_REBATES:return n.REBATES_BING;case e.AUTO_SHOW_REBATES_CONFIRMATION:return n.REBATES_CONFIRMATION;case e.AUTO_SHOW_REBATES_ORGANIC:return n.REBATES_ORGANIC;case e.AUTO_SHOW_PRICE_HISTORY:return n.PRICE_HISTORY;case e.AUTO_SHOW_REBATES_ORGANIC_NEW:return n.REBATES_ORGANIC;case e.AUTO_SHOW_REBATES_CHECKOUT:return n.REBATES_CHECKOUT;case e.AUTO_SHOW_PERSONALIZED_CASHBACK:return n.PERSONALIZED_CASHBACK;case e.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION:return n.PERSONALIZED_CASHBACK_CONFIRMATION;case e.AUTO_SHOW_EXPRESS_CHECKOUT:return n.EXPRESS_CHECKOUT;case e.AUTO_SHOW_SERVER_DRIVEN_REWARDS:return n.REWARDS;case e.AUTO_SHOW_COUPONS_CLIPPING:return n.COUPONS_CLIPPING;case e.AUTO_SHOW_OTHER_SELLERS:return n.OTHER_SELLER;case e.AUTO_SHOW_ATTAINABLE_COUPONS:return n.ATTAINABLE_COUPONS;case e.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK:return n.GROCERY_CASHBACK}return null}},{key:"addReminderFlow",value:function(t,e){var n=this;if(""!==this.flyoutData.strings.reminderDisabled&&""!==this.flyoutData.strings.reminderEnabled){var i=this.flyoutData.strings.reminderEnabled,o=this.flyoutData.strings.reminderDisabled,a=document.createElement("fluent-menu-item"),r=document.createElement("DIV");e?(r.innerHTML=this.commonAssets.getDisableAutoOpen(),r.setAttribute("aria-hidden","true"),a.id="Enabled",a.className+="defaultFontFamily",a.textContent=o,a.title=o):(r.innerHTML=this.commonAssets.getEnableAutoOpen(),r.setAttribute("aria-hidden","true"),a.id="Disabled",a.className+="defaultFontFamily",a.textContent=i,a.title=i),r.slot="start",a.appendChild(r);var s=this.pageHandlerModule,l=this.logModule;a.addEventListener("change",(function(t){if("Enabled"===a.id){a.textContent=i,a.title=i,a.id="Disabled";var e=document.createElement("DIV");e.slot="start",e.innerHTML=n.commonAssets.getEnableAutoOpen(),e.setAttribute("aria-hidden","true"),a.appendChild(e);var r=new Yr(E.OrganicFlowTurnedOff);l.LogInfoEvent(S.ButtonClick,"Organic flow turned off",r),s.SetIsPersonalizedShoppingEnabled(!1),s.RecordAsUserAction(is.PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS),s.AllowServerDrivenNotifications(!1)}else{a.textContent=o,a.title=o,a.id="Enabled";var c=document.createElement("DIV");c.slot="start",c.innerHTML=n.commonAssets.getDisableAutoOpen(),c.setAttribute("aria-hidden","true"),a.appendChild(c);var u=new Yr(E.OrganicFlowTurnedOn);l.LogInfoEvent(S.ButtonClick,"Organic flow turned on",u),s.SetIsPersonalizedShoppingEnabled(!0),s.AllowServerDrivenNotifications(!0)}t.stopPropagation()})),a.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(a)}}},{key:"isAutoOpenEnabledForFeature",value:function(t){if(this.flyoutData.experimentData.isExperimentActive(Be.autoShowControlForFeature)&&t){var e=this.getFeatureFromPopupOrigination(t);if(void 0!==this.flyoutData.common.autoshowFeaturePref&&e)return(this.flyoutData.common.autoshowFeaturePref&e)!==e}return this.flyoutData.common.autoShowAllowed}},{key:"addRebatesFlow",value:function(t,e){var n=this;if(""!==this.flyoutData.strings.cbFindAutomatically&&""!==this.flyoutData.strings.cbDontFindAutomatically){var i=this.flyoutData.strings.cbFindAutomatically,o=this.flyoutData.strings.cbDontFindAutomatically,a=document.createElement("fluent-menu-item"),r=document.createElement("DIV");e?(r.innerHTML=this.commonAssets.getDisableAutoOpen(),r.setAttribute("aria-hidden","true"),a.id="Enabled",a.className+="defaultFontFamily",a.textContent=o,a.title=o):(r.innerHTML=this.commonAssets.getEnableAutoOpen(),r.setAttribute("aria-hidden","true"),a.id="Disabled",a.className+="defaultFontFamily",a.textContent=i,a.title=i),r.slot="start",a.appendChild(r);var s=this.pageHandlerModule,l=this.logModule;a.addEventListener("change",(function(t){if("Enabled"===a.id){a.textContent=i,a.title=i,a.id="Disabled";var e=document.createElement("DIV");e.slot="start",e.innerHTML=n.commonAssets.getEnableAutoOpen(),e.setAttribute("aria-hidden","true"),a.appendChild(e);var r=new Yr(E.OrganicFlowTurnedOff);l.LogInfoEvent(S.ButtonClick,"Organic flow turned off",r),s.SetAllowOrganicRebates(!1)}else{a.textContent=o,a.title=o,a.id="Enabled";var c=document.createElement("DIV");c.slot="start",c.innerHTML=n.commonAssets.getDisableAutoOpen(),c.setAttribute("aria-hidden","true"),a.appendChild(c);var u=new Yr(E.OrganicFlowTurnedOn);l.LogInfoEvent(S.ButtonClick,"Organic flow turned on",u),s.SetAllowOrganicRebates(!0)}t.stopPropagation()})),a.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(a)}}},{key:"addPackageTrackingFlow",value:function(t){var e,n,i,o,a=this,r=null===(e=this.flyoutData)||void 0===e||null===(n=e.strings)||void 0===n?void 0:n.disablePackageTrackingFromMenuText,s=null===(i=this.flyoutData)||void 0===i||null===(o=i.strings)||void 0===o?void 0:o.enablePackageTrackingFromMenuText;if(!Se(r)&&!Se(s)){var l=document.createElement("fluent-menu-item");l.className+="defaultFontFamily",l.textContent=r,l.title=r,l.id="Disabled";var c=document.createElement("DIV");c.innerHTML=this.commonAssets.getDisableAutoOpen(),c.setAttribute("aria-hidden","true"),c.slot="start",l.appendChild(c),l.addEventListener("change",(function(){if("Enabled"===l.id){a.pageHandlerModule.SetPackageTrackingUserConsent(!0),a.pageHandlerModule.RecordAsUserAction(is.PACKAGE_TRACKING_OPT_IN);var t=new Yr(E.PackageTrackingOptIn);a.logModule.LogInfoEvent(S.ButtonClick,"User enabled package tracking from menu",t),l.id="Disabled",l.textContent=r,l.title=r;var e=document.createElement("DIV");e.slot="start",e.innerHTML=a.commonAssets.getDisableAutoOpen(),e.setAttribute("aria-hidden","true"),l.appendChild(e)}else{a.pageHandlerModule.SetPackageTrackingUserConsent(!1),a.pageHandlerModule.RecordAsUserAction(is.PACKAGE_TRACKING_OPT_OUT);var n=new Yr(E.PackageTrackingOptOut);a.logModule.LogInfoEvent(S.ButtonClick,"User disabled package tracking from menu",n),l.id="Enabled",l.textContent=s,l.title=s;var i=document.createElement("DIV");i.slot="start",i.innerHTML=a.commonAssets.getEnableAutoOpen(),i.setAttribute("aria-hidden","true"),l.appendChild(i)}})),l.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(l)}}},{key:"isDisableOptOutMenuActive",value:function(){var t,e;if("amazon.com"===(null===(t=this.flyoutData)||void 0===t||null===(e=t.common)||void 0===e?void 0:e.domain)){this.pageHandlerModule.TriggerExperiment(Be.showAmazonOtherSellers);var n=this.flyoutData.experimentData.isExperimentActive(Be.showAmazonOtherSellers),i=this.flyoutData.experimentData.isVariantActive(Be.showAmazonOtherSellers,bb.AS_FeatureOpt);return n&&i}return!1}}]),t}(),wb=Ib;function Pb(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ob(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ob(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Ob(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Rb=function(){function t(e,n,i,o,a,r,l){var c=this;s(this,t),f(this,"availableModules",void 0),f(this,"stateManagement",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),f(this,"flyoutData",void 0),f(this,"utilities",void 0),f(this,"viewModulesutilities",void 0),f(this,"commonAssets",void 0),f(this,"viewModules",void 0),f(this,"bannerModule",void 0),f(this,"notificationModules",void 0),f(this,"bingShoppingCampaignGuid",void 0),f(this,"ExclusiveModule",new Set([Rt.CHECKOUTAUTOFILL])),f(this,"modulesGroups",new Set([new Set([Rt.VIRTUAL_CARD,Rt.FEEDBACK])])),f(this,"currentModulesGroup",new Set([])),f(this,"couponImpressionIdModules",new Set([Rt.COUPON,Rt.CASHBACK,Rt.CHECKOUTAUTOFILL,Rt.COUPONCLIPPING,Rt.DEALS,Rt.EMPTYCOUPON,Rt.REWARD])),f(this,"isExclusiveModule",(function(t,e){return e.has(t)})),f(this,"isInCurrentModuleGroup",(function(t){return!(c.currentModulesGroup.size>0)||c.currentModulesGroup.has(t)})),f(this,"updateModuleGroup",(function(t){if(!(c.currentModulesGroup.size>0)){var e,n=Pb(c.modulesGroups);try{for(n.s();!(e=n.n()).done;){var i,o,a=e.value;(null==a||null===(i=a.values())||void 0===i||null===(o=i.next())||void 0===o?void 0:o.value)===t&&(c.currentModulesGroup=a)}}catch(t){n.e(t)}finally{n.f()}}})),this.stateManagement=e,this.stateManagement.addEventListener(hn.CreateModules,(function(t){t&&t.detail&&t.detail.flyoutWrapper&&c.createModules(t.detail.flyoutWrapper)})),this.utilities=i,this.pageHandlerModule=i.pageHandlerModule,this.logModule=i.logModule,this.flyoutData=n,this.viewModulesutilities=i.viewModulesUtilities,this.viewModules=a,this.bannerModule=l,this.notificationModules=r,this.commonAssets=o,this.stateManagement.addEventListener(hn.pdpEligibility,(function(t){t&&t.detail&&void 0!==t.detail.pdpElegibility&&Ye("isPDP",t.detail.pdpElegibility)}))}var n,i;return r(t,[{key:"createModules",value:(i=e(o().mark((function t(e){var n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.delegateYield(o().mark((function t(){var i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null!==(i=null===(a=n.flyoutData.dataStoreModule.CouponData)||void 0===a?void 0:a.isCheckoutPageWithAutoApply)&&void 0!==i&&i,s=[],c=!1,n.pageHandlerModule.TriggerExperiment(Be.newStandardStyle),!(n.notificationModules&&n.notificationModules.length>0&&n.flyoutData.common.openedWith===Tt.Auto)){t.next=25;break}h=Pb(n.notificationModules),t.prev=6,f=o().mark((function t(){var e,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.value,t.prev=1,u=performance.now(),kb.markers.lastModuleStarted=e.GetNotificationName(),t.next=6,e.ShouldRenderNotification();case 6:if(!t.sent){t.next=15;break}return t.next=9,e.RenderNotification(n.flyoutData.common.shopping);case 9:return i=t.sent,c=!0,kb.markers.lastModuleFinished=e.GetNotificationName(),un.queueUpdate((function(){try{i?(l=i,n.flyoutData.common.shopping.appendChild(i.element),e.PostProcessingNotification(i.name,i.element)):e.PostProcessingNotification(e.GetNotificationName(),n.flyoutData.common.shopping),d=performance.now(),n.logViewModulePerf(e.GetNotificationName(),d-u)}catch(i){var t=new _(A.OnErrorInvoked);n.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(e.GetNotificationName()," ").concat(Il.getErrorString(i)),t,n.GetImpressionType(e.GetNotificationName()))}})),n.viewModulesutilities.recordContentViewed(e.GetNotificationName(),n.stateManagement.getState(pn.isAutoApplyVisible),dn.EdgeImpressionId,!0,!0),t.abrupt("return","break");case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),a=new _(A.OnErrorInvoked),n.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Module Notification Exception: ".concat(e.GetNotificationName()," ").concat(Il.getErrorString(t.t0)),a);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})),h.s();case 9:if((p=h.n()).done){t.next=16;break}return t.delegateYield(f(),"t0",11);case 11:if("break"!==t.t0){t.next=14;break}return t.abrupt("break",16);case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(6),h.e(t.t1);case 21:return t.prev=21,h.f(),t.finish(21);case 24:new wb(n.flyoutData,n.viewModulesutilities,n.pageHandlerModule,n.logModule,n.stateManagement).createFlyoutButtons(n.flyoutData.common.shopping,!0,e);case 25:if(c||n.flyoutData.common.openedWith!==Tt.Auto||(g=new _(A.NotificationModuleRequired,void 0,void 0,void 0),n.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(n.flyoutData.common.popupOrigination),g)),c){t.next=32;break}return t.next=29,n.GetRenderedModules();case 29:if((s=t.sent)&&s.length>0&&(n.stateManagement.setState(pn.topModuleName,s[0].name),n.stateManagement.setState(pn.topModulePriority,s[0].priority)),n.flyoutData.common.shouldShowBanner)try{if(n.bannerModule)try{n.bannerModule.renderBanner()}catch(t){m=new _(A.OnErrorInvoked),n.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Banner Exception: ".concat(Il.getErrorString(t)),m)}}catch(t){v=new _(A.OnErrorInvoked),n.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Module Exception: Banner ".concat(Il.getErrorString(t)),v)}else n.renderModules(s,r,e);case 32:n.flyoutData.common.shouldShowBanner&&n.bannerModule||!(s.length>0||c)||(n.appendContentToFlyout(e),un.queueUpdate((function(){n.viewModulesutilities.handleFlyoutFocus(s,l,n.flyoutData.common.shopping,!1);var t=!1;window.addEventListener("message",(function(e){var i;"setFocus"!==(null==e||null===(i=e.data)||void 0===i?void 0:i.type)||t||(t=!0,n.viewModulesutilities.handleFlyoutFocus(s,l,n.flyoutData.common.shopping,!0))}))})),y=new CustomEvent(hn.ModulesRendered,{detail:{modules:s}}),n.stateManagement.dispatchEvent(y),n.stateManagement.setState(pn.modulesRendered,!0),n.flyoutData.common.channel===Pt.STABLE&&n.flyoutData.common.shopping.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1}))),n.flyoutData.common.fullFlyoutFromNotification&&(C=n.flyoutData.common.shopping.querySelector("#"+vb.ICNotification))&&C.remove();case 34:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))(),"t0",2);case 2:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"appendContentToFlyout",value:function(t){try{t&&this.flyoutData.common.shopping&&t.appendChild(this.flyoutData.common.shopping)}catch(t){var e=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error appending content to flyout ".concat(t),e)}}},{key:"GetRenderedModules",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,x,E,T,D,k,I,w,P,O,R,M,N,L,F,H,B,U,V,G,W,$,z,K,Y,j,q,Z,X,J,Q;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g=[],m=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.isCheckoutPageWithAutoApply,v=null!==(n=null===(i=this.flyoutData.dataStoreModule.CashBackData)||void 0===i?void 0:i.isCashBackActivated)&&void 0!==n?n:null,this.stateManagement.setState(pn.renderedViewModuleCount,0),y=new Map,C=Pb(this.viewModules),t.prev=6,C.s();case 8:if((b=C.n()).done){t.next=42;break}if(x=b.value,t.prev=10,E=void 0,T=void 0,kb.markers.lastModuleStarted=x.GetModuleName(),E=performance.now(),t.t0=x,!t.t0){t.next=20;break}return t.next=19,x.ShouldRenderModule();case 19:t.t0=t.sent;case 20:if(!t.t0){t.next=34;break}return t.next=23,x.renderModule();case 23:if(D=t.sent,T=performance.now(),!D||!this.isInCurrentModuleGroup(D.name)){t.next=34;break}if(this.logViewModulePerf(D.name,T-E),g.push(D),this.stateManagement.setState(pn.renderedViewModuleCount,g.length),y.set(D.name,g.length-1),kb.markers.lastModuleFinished=x.GetModuleName(),this.updateModuleGroup(D.name),!this.isExclusiveModule(D.name,this.ExclusiveModule)){t.next=34;break}return t.abrupt("break",42);case 34:t.next=40;break;case 36:t.prev=36,t.t1=t.catch(10),k=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Module Exception: ".concat(x.GetModuleName()," ").concat(Il.getErrorString(t.t1)),k,this.GetImpressionType(x.GetModuleName()));case 40:t.next=8;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t.catch(6),C.e(t.t2);case 47:return t.prev=47,C.f(),t.finish(47);case 50:I=null===(a=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===a?void 0:a.shouldBeInPolePosition,w=y.get(Rt.COUPONCLIPPING),P=y.get(Rt.COUPON),O=y.get(Rt.EMPTYCOUPON),R=y.get(Rt.PRICEHISTORY),M=y.get(Rt.PRICECOMPARISON),N=y.get(Rt.CASHBACK),L=y.get(Rt.REWARD),F=y.get(Rt.SIMILARSELLERS),H=y.get(Rt.AUTOSMARKETPLACE),B=y.get(Rt.AUTOSPRICEINSIGHT),U=y.get(Rt.GROCERY_CASHBACK),V=y.get(Rt.GROCERY_CASHBACK_ACTIVATED),G=y.get(Rt.ORDERSTATUSTRACKING),W=y.get(Rt.PRODUCTHISTORY),$=this.flyoutData.dataLoader.GetLoadTimeDataValue("url",void 0);try{this.bingShoppingCampaignGuid=new URL($).searchParams.get("bing_shopping_campaign_guid")||""}catch(t){}return z=y.get(Rt.EXCLUSIVECOUPONS),K=y.get(Rt.SUSTAINABILITY),Y=void 0!==L&&g[L].moduleInterface.isRewardsAdded(),this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK&&void 0!==U?g[U].priority=0:this.bingShoppingCampaignGuid===Ot.PRICEHISTORY&&void 0!==R&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_BING_CAMPAIGN&&void 0===w&&void 0===F?g[R].priority=0:this.bingShoppingCampaignGuid===Ot.PRICECOMPARISON&&void 0!==M&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_BING_CAMPAIGN&&void 0===w&&void 0===F&&(null===(r=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===r||null===(s=r.segment)||void 0===s?void 0:s.toLowerCase())!==Gt.AUTOS?g[M].priority=0:void 0===L||void 0===N||v||Y?void 0!==w?(g[w].priority=0,void 0!==P&&(g[P].priority=wt.MAX),void 0!==O&&(g[O].priority=wt.MAX)):this.stateManagement.getState(pn.icPdpAvailable)&&void 0!==U?g[U].priority=0:this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_OTHER_SELLERS&&void 0!==F?g[F].priority=0:void 0!==z?g[z].priority=0:void 0===R||m||I||g[R].priority===wt.MAX?void 0!==P&&m?g[P].priority=0:(m||void 0===N||this.flyoutData.common.seeInfoFromPCNotification||!(this.flyoutData.common.openedWith===Tt.Auto||(null===(l=this.flyoutData.dataStoreModule.CashBackData)||void 0===l?void 0:l.activateRebatesStatus)===Nt.PENDING_SWITCH_TO_MSA_PROFILE||null!==(c=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==c&&c.isSignInSupportedDomainCashBack||null===(u=this.flyoutData.dataStoreModule.CashBackData)||void 0===u)&&u.isCashBackActivated)&&(!this.viewModulesutilities.isPinterest()||void 0===N||null!==(d=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==d&&d.isCashBackActivated)?void 0===M||m||this.flyoutData.dataStoreModule.PriceHistoryData&&!I||g[M].priority===wt.MAX?void 0!==B?((null===(j=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===j||null===(q=j.segment)||void 0===q?void 0:q.toLowerCase())===Gt.AUTOS&&null!==(Z=this.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==Z&&Z.autosPriceInsight&&(g[B].priority=0),J=!1,(Q=null===(X=this.flyoutData.dataStoreModule.ApiData)||void 0===X?void 0:X.retailerData)&&Q.allCheckoutPages.forEach((function(t){t.autosDataSelector&&(J=!0)})),J&&(g[B].priority=0)):void 0!==H&&(null===(h=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===h||null===(p=h.segment)||void 0===p?void 0:p.toLowerCase())===Gt.AUTOS?g[H].priority=0:!this.flyoutData.common.isPane||void 0===N||null!==(f=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==f&&f.isCashBackActivated||(g[N].priority=0):g[M].priority=0:g[N].priority=0:g[R].priority=0:(g[L].priority=0,g[N].priority=.5),this.flyoutData.common.isPane&&void 0!==G?g[G].priority=0:this.flyoutData.common.isPane&&void 0!==W&&(g[W].priority=0),void 0!==K&&(g[K].priority=wt.MAX),this.stateManagement.getState(pn.nonICPDP)&&!this.stateManagement.getState(pn.ICRelatedOffersExist)&&(void 0!==V&&(g[V].priority=wt.RATINGSANDREVIEWS+.2),void 0!==U&&(g[U].priority=wt.RATINGSANDREVIEWS+.1)),g.sort((function(t,e){return t.priority-e.priority})),this.flyoutData.experimentData.isVariantActive(Be.coloredHeader,Ab.ColoredHeaderExp1)?this.viewModulesutilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp1()):this.flyoutData.experimentData.isVariantActive(Be.coloredHeader,Ab.ColoredHeaderExp2)?this.viewModulesutilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp2()):this.flyoutData.experimentData.isVariantActive(Be.coloredHeader,Ab.ColoredHeaderExp3)?this.viewModulesutilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp3()):this.flyoutData.experimentData.isVariantActive(Be.coloredHeader,Ab.ColoredHeaderExp4)&&this.viewModulesutilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp4()),t.abrupt("return",g);case 77:case"end":return t.stop()}}),t,this,[[6,44,47,50],[10,36]])}))),function(){return n.apply(this,arguments)})},{key:"logViewModulePerf",value:function(t,e){try{var n=t;this.flyoutData.common.isPane&&(n+=" pane");var i=new _(A.PerfViewModule,void 0,void 0,this.flyoutData.common.domain,n);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(e),i)}catch(t){var o=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"error logging module perf time ".concat(t),o)}}},{key:"setSectionExpandedState",value:function(t,e,n,i,o,a){var r,s,l=this.flyoutData.dataStoreModule.CashBackData,c=null!==(r=null==l?void 0:l.isCashBackActivated)&&void 0!==r?r:null;0===t?e.element.expanded=!0:e.name!==Rt.PRICECOMPARISON||!this.flyoutData.common.foundLowerPrice&&this.flyoutData.common.bannerContext!==Ht.VIEWALLPC||n||i===Ot.PRICEHISTORY?e.name===Rt.PRICEHISTORY&&this.flyoutData.common.bannerContext===Ht.VIEWPRICEHISTORY&&i!==Ot.PRICECOMPARISON||1===t&&e.name===Rt.CASHBACK&&o[0].name===Rt.REWARD&&!1===c?e.element.expanded=!0:e.element.expanded=!1:e.element.expanded=!0,e.element.expanded&&!(t>0)||a&&this.isExclusiveModule(e.name,a)&&"none"!==(null===(s=e.element)||void 0===s?void 0:s.style.display)||this.viewModulesutilities.hideModule(t,e)||this.viewModulesutilities.addSectionSeparator(this.flyoutData.common.shopping)}},{key:"getModuleByName",value:function(t){if(this.viewModules&&this.viewModules.length>0){var e,n=Pb(this.viewModules);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.GetModuleName()===t)return i}}catch(t){n.e(t)}finally{n.f()}}return null}},{key:"GetImpressionType",value:function(t){return this.couponImpressionIdModules.has(t)?dn.CouponImpressionId:dn.EdgeImpressionId}},{key:"setTitle",value:function(t){if(t){if(t.name===Rt.EMPTYCOUPON)return;try{var e=this.flyoutData.common.shopping.querySelectorAll('[slot="header-content"]');(!e||e&&0===e.length)&&t.moduleInterface.populateMainHeader()}catch(e){var n=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Populate Header Exception: ".concat(t.name," ").concat(Il.getErrorString(e)),n,this.GetImpressionType(t.name))}}}}]),t}(),Mb=Rb;function Nb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Lb=function(t){u(a,t);var n,i=Nb(a);function a(){return s(this,a),i.apply(this,arguments)}return r(a,[{key:"renderModules",value:(n=e(o().mark((function t(e,n,i){var a,r,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.length>0){for(a=function(t){var o=e[t];if(o&&o.element){s.setSectionExpandedState(t,o,n,s.bingShoppingCampaignGuid,e,s.ExclusiveModule),s.viewModulesutilities.hideModule(t,o)||s.flyoutData.common.shopping.appendChild(o.element),s.viewModulesutilities.styleModules(o,t,i);try{o.moduleInterface.PostProcessing(o.name,t,o.element),un.queueUpdate((function(){s.viewModulesutilities.sendCTRLog(o,t,s.stateManagement.getState(pn.isAutoApplyVisible),s.stateManagement.getState(pn.topModuleName),s.GetImpressionType(o.name))}))}catch(t){var a=new _(A.OnErrorInvoked);s.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(o.name," ").concat(Il.getErrorString(t)),a,s.GetImpressionType(o.name))}}},r=0;r<e.length;r++)a(r);this.flyoutData.experimentData.isPCBannerUXExperimentActive()||this.utilities.viewModulesUtilities.isStoryBookSection(i)||this.setTitle(e[0]),this.flyoutData.common.currentDevice!==St.Desktop&&null===this.flyoutData.dataLoader.mobileData.channel||new wb(this.flyoutData,this.viewModulesutilities,this.pageHandlerModule,this.logModule,this.stateManagement).createFlyoutButtons(this.flyoutData.common.shopping,this.flyoutData.common.currentDevice===St.Desktop&&!this.flyoutData.experimentData.isPCBannerUXExperimentActive(),i)}else new gb(this.logModule,this.pageHandlerModule,this.flyoutData.strings,this.flyoutData.common.currentTheme,this.flyoutData.common.currentDirection,this.commonAssets).renderErrorUI("no view module to render");case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return n.apply(this,arguments)})}]),a}(Mb),_b=Lb,Fb=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        ::part(header) {\n            margin-bottom: 0px;\n        }\n        .headerContentWrapper {\n            display: flex;\n            text-align: center;\n            flex-direction: column;\n            align-items: center;\n        }\n        .headerTitle {\n            font-weight: 600;\n            align-items: center;\n            font-size: 24px;\n            line-height: 32px;\n            margin: 0px;\n        }\n        .vehicleAccidentRecords {\n            display: flex;\n            align-items: center;\n            margin-top: 8px;\n        }\n        .vehicleAccidentRecordsText {\n            margin-left: 8px;\n            margin-right: 8px;\n        }\n        .imageWrapper {\n            width: 114px;\n            height: 76px;\n            overflow: hidden;\n            margin-right: 12px;\n            border-radius: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .productImage {\n            width: 100%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .productImage:hover {\n            width: 125%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .btnSeeMore {\n            font-size: 14px;\n            border-radius: 4px;\n            color: rgba(26,26,26,1);\n            background-color: #FFFFFF;\n            margin: 6px 16px;\n            height: 36px;\n            width: -webkit-fill-available;\n            border: 1px solid rgba(214, 214, 214, 1);\n        }\n        .autoScenarioLink {\n            display: flex;\n            height: 100px;\n            width: 100%;\n            align-items: center;\n            padding: 12px 16px 10px 16px;\n            box-sizing: border-box;\n            background: transparent;\n            border-top: 1px solid rgb(236, 236, 236);\n            position: relative;\n            cursor: pointer;\n            color: #1A1A1A;\n        }\n        .autoScenarioLink:focus-visible {\n            box-shadow: 0 0 0 calc(var(--focus-stroke-width) * 1px) var(--focus-stroke-outer);\n            outline: 1px solid var(--focus-stroke-outer);\n        }\n        .autoScenarioLink:hover {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n        }\n        .infoWrapper {\n            font-size: 12px;\n            line-height: 16px;\n            margin-right: 12px;\n            width: 120px;\n        }\n        .vehicleTitle {\n            font-weight: 600;\n            -webkit-line-clamp: 2;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            margin-bottom: 6px;\n        }\n        .vehicleMileage {\n            display: flex;\n            margin-bottom: 4px;\n        }\n        .vehicleMileageText {\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n        }\n        .vehicleMileageIcon {\n            width: 14px;\n            margin-right: 4px;\n        }\n        .vehicleLocation {\n            display: flex;\n            color: #717171;\n        }\n        .vehicleLocationText {\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n        }\n        .priceWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            height: 100%;\n            align-items: flex-end;\n            width: 76px;\n        }\n        .price {\n            display: flex;\n            font-weight: 600;\n        }\n        .vehiclePriceSign {\n            font-size: 10px;\n            line-height: 22px;\n        }\n        .vehiclePriceNumber {\n            font-size: 16px;\n            line-height: 22px;\n        }\n        .badgeRating {\n            font-size: 12px;\n            font-weight: 600;\n            line-height: 16px;\n            color: rgba(0, 138, 33, 1);\n        }\n        @media (forced-colors: active) {\n            .autoScenarioLink {\n                color: ".concat(oh.LinkText," !important;\n            }\n            .vehicleLocation {\n                color: ").concat(oh.LinkText," !important;\n            }\n        }\n        ")}},{key:"getDarkModeStyles",value:function(){return"\n        .autoScenarioLink {\n            border-top: 1px solid #999999;\n            border-bottom: 1px solid #999999;\n            color: #FFFFFF;\n        }\n        .autoScenarioLink:focus-visible {\n            box-shadow: 0 0 0 calc(var(--focus-stroke-width) * 1px) ".concat(oh.ButtonText,";\n            outline: 1px solid ").concat(oh.ButtonText,";\n        }\n        .vehicleLocation {\n            color: #FFFFFF;\n        }\n        ")}},{key:"getNotificationStyles",value:function(){return"\n        @keyframes zoom {\n            0% { width: 100%; }\n            25% { width: 125%; }\n            75% { width: 125%; }\n            100% { width: 100%; }\n        }\n        .upperContent {\n            display: grid;\n            grid-template-columns: 55% auto;\n            text-align: start;\n            padding-bottom: 10px;\n            border-bottom: 1px solid rgba(241, 241, 241, 1);\n            cursor: pointer;\n            color: #1A1A1A;\n        }\n        .upperContent:focus-visible {\n            box-shadow: 0 0 0 calc(var(--focus-stroke-width) * 1px) var(--focus-stroke-outer);\n            outline: 1px solid var(--focus-stroke-outer);\n        }\n        .title {\n            font-size: 16px;\n            font-weight: 600;\n            line-height: 22px;\n            margin-bottom: 6px;\n        }\n        .vehicleTitle {\n            font-size: 12px;\n            line-height: 16px;\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            text-align: start;\n        }\n        .vehicleMileage {\n            font-size: 12px;\n            line-height: 22px;\n            display: flex;\n            align-items: center;\n            margin-left: 7px;\n        }\n        .vehicleLocation {\n            color: rgba(113, 113, 113, 1);\n            display: flex;\n            align-items: center;\n        }\n        .vehicleLocationIcon {\n            display: flex;\n            height: 10px;\n            margin-right: 5px;\n            justify-content: center;\n        }\n        .vehicleLocationText {\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n        }\n        .vehiclePrice {\n            display: flex;\n        }\n        .vehiclePriceIcon {\n            font-size: 10px;\n            font-weight: 600;\n            line-height: 22px;\n        }\n        .vehiclePriceNumber {\n            font-size: 16px;\n            font-weight: 600;\n            line-height: 22px;\n        }\n        .imageWrapper {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 108px;\n            height: 80px;\n            overflow: hidden;\n            border-radius: 8px;\n        }\n        .notifProductImage {\n            width: 100%;\n            object-fit: cover;\n            transition: width 0.5s;\n            animation-name: zoom;\n            animation-duration: 3s;\n            animation-delay: 0.5s;\n        }\n        .notifProductImage:hover {\n            width: 125%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .btnActions {\n            width: calc(100% - 32px);\n            margin-top: 12px;\n            justify-content: center;\n        }\n        .badgeRating {\n            font-size: 12px;\n            font-weight: 600;\n            line-height: 16px;\n            color: rgba(0, 138, 33, 1);\n        }\n        .pmWrapper {\n            display: flex;\n            align-items: center;\n            margin-top: 4px;\n        }\n        .alWrapper {\n            display: flex;\n            align-items: center;\n            margin-top: 8px;\n            line-height: 16px;\n            font-size: 12px;\n        }\n        @media (forced-colors: active) {\n            .upperContent {\n                color: ".concat(oh.LinkText,";\n            }\n            .upperContent:focus-visible {\n                box-shadow: 0 0 0 calc(var(--focus-stroke-width) * 1px) ").concat(oh.ButtonText,";\n                outline: 1px solid ").concat(oh.ButtonText,";\n            }\n        }\n        ")}},{key:"getNotificationDarkModeStyles",value:function(){return"\n        .upperContent {\n            color: #FFFFFF;\n        }\n        .vehicleTitle {\n            color: #FFFFFF;\n        }\n        .vehicleLocation {\n            color: #FFFFFF;\n        }\n        "}}]),t}(),Hb=r((function t(){s(this,t),f(this,"element",void 0),f(this,"priority",void 0),f(this,"name",void 0),f(this,"moduleInterface",void 0),f(this,"paneTab",void 0),f(this,"moduleLayout",void 0)})),Bb=function(){function t(){s(this,t),f(this,"assets",void 0)}return r(t,[{key:"PostProcessing",value:function(t,e,n){}},{key:"CalculateRanking",value:function(){return Ct.Unknown}},{key:"ShowAlways",value:function(){return!1}},{key:"GetAssets",value:function(){return this.assets}},{key:"CreateModule",value:function(t,e,n,i,o){var a=new Hb;return a.element=t,a.priority=e,a.name=n,a.moduleInterface=this,a.paneTab=i,a.moduleLayout=o,a}}]),t}();function Ub(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Vb=function(t){u(a,t);var n,i=Ub(a);function a(t,e,n){var o;return s(this,a),f(l(o=i.call(this)),"assets",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"stateManagement",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"visibilityRequest",[]),f(l(o),"sectionId","priceComparisonSection"),f(l(o),"loadingUXId","divPCLoadingStateContainer"),o.logModule=n.logModule,o.pageHandlerModule=n.pageHandlerModule,o.stateManagement=t,o.flyoutData=e,o.utilities=n.viewModulesUtilities,o.assets=new Fb,o}return r(a,[{key:"GetModuleName",value:function(){return Rt.AUTOSMARKETPLACE}},{key:"ShouldRenderModule",value:function(){var t,e,n=this,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=(null==i||null===(t=i.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS,a=null!==(e=i&&i.CompetingPrices&&i.CompetingPrices.length>0&&this.hasValidOffer(i.CompetingPrices))&&void 0!==e&&e;return o&&a?(this.stateManagement.addEventListener(hn.pcCreateHeader,this.populateMainHeader.bind(this)),this.stateManagement.addEventListener(hn.PDPUpdate,(function(t){var e,i,o=new CustomEvent(hn.PDPRemoved,{detail:{moduleName:n.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.comparableOffers&&t.detail.data.comparableOffers.length>0&&t.detail.data.price&&(null===(e=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===e||!e.CompetingPrices)){var a=t.detail.data;a?n.updateModule(a,t.detail.wrapper):n.stateManagement.dispatchEvent(o)}else null!==(i=n.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==i&&i.CompetingPrices||n.stateManagement.dispatchEvent(o)})),Promise.resolve(!0)):Promise.resolve(!1)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData;if(t&&t.CompetingPrices.length>0){var e,n=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));n?e=n:((e=document.createElement("msft-edge-shopping-section")).id=this.sectionId,e.accordion=!0,e.expanded=!1,e.title=this.flyoutData.strings.autosMarketplaceSectionTitle),this.populatePriceList(e,!1,!1),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),this.renderSeeMoreLink(e,t.CompetingPrices[0].marketHint);var i=this.CreateModule(e,wt.AUTOSMARKETPLACE,Rt.AUTOSMARKETPLACE,_t.CONTEXTUAL,Ft.BLOCK),o=new _(A.AutosMarketplaceRenderViewModule);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Marketplace - recommended cars to user",o),Promise.resolve(i)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e=this.flyoutData.common.shopping,n=this.flyoutData.dataStoreModule.PriceComparisonData,i=null==n?void 0:n.CompetingPrices,o=this.utilities.createElement("DIV",{className:"headerContentWrapper"});o.slot="header-content";var a=this.utilities.createElement("H2",{className:"headerTitle"});if(i&&i.length>1?a.textContent=this.flyoutData.strings.autosMarketplaceSimilarCarsFound:a.textContent=this.flyoutData.strings.autosMarketplaceSimilarCarFound,o.appendChild(a),i&&i.length>0&&(null===(t=i[0].marketHint)||void 0===t?void 0:t.toLowerCase())===Wt.US){var r=!0;if(i.forEach((function(t){t.listingAccidentText&&Object.values(Kt).includes(t.listingAccidentText.toLowerCase())||(r=!1)})),r){var s=this.utilities.createElement("DIV",{className:"vehicleAccidentRecords"}),l=this.utilities.createElement("IMG");l.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleNoAccident.svg";var c=this.utilities.createElement("DIV",{className:"vehicleAccidentRecordsText"});c.textContent=this.flyoutData.strings.autosMarketplaceNoAccident,s.appendChild(l),s.appendChild(c),o.appendChild(s)}}e.appendChild(o)}},{key:"navigateToRetailer",value:function(t,e,n){var i=new Yr(E.NavigatedToAutosMarketplaceRecommendation,t.Url);this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RETAILER);var o=e?"Navigate to Autos Marketplace recommendation from listing notification":"Navigate to Autos Marketplace recommendation from listing module";this.logModule.LogInfoEvent(S.ButtonClick,o,i),this.flyoutData.dataLoader.IsServerData()||this.flyoutData.common.currentDevice===St.Mobile?this.pageHandlerModule.NavigateToRetailerSite(t.Url):""!==t.PriceId?this.pageHandlerModule.NavigateToRetailerSite(t.PriceId,n):this.pageHandlerModule.NavigateToRetailerSite(t.ImpressionToken,n)}},{key:"populatePriceList",value:function(t,e,n){var i,o=this.flyoutData.dataStoreModule.PriceComparisonData,a=null==o?void 0:o.CompetingPrices;if(a){a.length>0&&(i=a.length),i>bt.AUTOSMARKETPLACE&&(i=bt.AUTOSMARKETPLACE);for(var r=0;r<i;r++)this.createNewTile(t,a[r])}}},{key:"sendAutosMarketplaceDwellTimeTelemery",value:function(t,e,n){var i=Date.now()-t,o=new _(e);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(n," - ").concat(i," ms"),o),i>=1e3&&rl&&this.pageHandlerModule.RecordAsUserEngagement(rl.VIEW_AUTOS_MARKETPLACE)}},{key:"updateModule",value:(n=e(o().mark((function t(e,n){var i,a,r,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceComparisonData=new Mc(e.comparableOffers,e.price,e.extracted_entity,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination),!(i=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=11;break}return i.remove(),t.next=7,this.renderModule();case 7:(a=t.sent)&&(this.populateMainHeader(),un.queueUpdate((function(){s.utilities.styleModules(a,0,n)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,a)),t.next=15;break;case 11:return t.next=13,this.renderModule();case 13:(r=t.sent)&&r.element&&(this.stateManagement.getState(pn.modulesRendered)?this.appendUpdateElement(r):this.stateManagement.addEventListener(hn.ModulesRendered,(function(){s.appendUpdateElement(r)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,r));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])}))),function(t,e){return n.apply(this,arguments)})},{key:"appendUpdateElement",value:function(t){var e=this;this.utilities.appendNewModuleToFlyout(t),(this.flyoutData.common.isPane||this.flyoutData.dataStoreModule.PriceComparisonData&&-1!==this.flyoutData.dataStoreModule.PriceComparisonData.lowestPrice)&&(t.element.expanded=!0),un.queueUpdate((function(){e.utilities.sendCTRLog(t,t.priority,e.stateManagement.getState(pn.isAutoApplyVisible),e.stateManagement.getState(pn.topModuleName),dn.EdgeImpressionId);var n=new CustomEvent(hn.ModulesRendered);e.stateManagement.dispatchEvent(n)}))}},{key:"manageLinkEvents",value:function(t,e){var n=this,i=0,o=0,a=!0;t.addEventListener("mouseenter",(function(){s()})),t.addEventListener("mouseleave",(function(){l()})),t.addEventListener("focus",(function(){s()})),t.addEventListener("blur",(function(){l()}));var r=this.logModule,s=function(){if(Date.now()-o>200){a=!0,i=Date.now();var t=new _(A.AutosMarketplaceListingHovered);r.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Marketplace - listing hovered",t)}},l=function(){o=Date.now(),setTimeout((function(){if(a){a=!1,n.sendAutosMarketplaceDwellTimeTelemery(i,A.AutosMarketDwellTimeHover,"Autos Marketplace - hover time over listing");var t=new _(A.AutosMarketDwellTimeHover);r.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Marketplace - listing exited hover",t)}}),200)};t.addEventListener("click",(function(){n.navigateToRetailer(e,!1)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToRetailer(e,!1)})),t.addEventListener("keydown",(function(t){t&&"Enter"===t.key&&n.navigateToRetailer(e,!1)}))}},{key:"createNewTile",value:function(t,e){var n;if(e){var i=e.ProductImageOriginalUrl.replace("edge://image?",""),o=this.utilities.createElement("A");o.className="autoScenarioLink";var a=this.utilities.createElement("DIV",{className:"imageWrapper"}),r=this.utilities.createElement("IMG",{className:"productImage"});r.src=i+"&w=150",r.onerror=function(){this.src=i},r.setAttribute("aria-hidden","true"),a.appendChild(r);var s=this.utilities.createElement("DIV",{className:"infoWrapper"}),l=this.utilities.createElement("DIV",{className:"vehicleTitle"});l.textContent=e.Description;var c=this.utilities.createElement("DIV",{className:"vehicleMileage"}),u=this.utilities.createElement("IMG",{className:"vehicleMileageIcon"});this.flyoutData.common.currentTheme===xt.Dark?u.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleMileageDark.svg":u.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleMileage.svg",u.setAttribute("aria-hidden","true");var d=this.utilities.createElement("DIV",{className:"vehicleMileageText"});d.textContent=this.utilities.formatPrice(e.mileageValue)+" "+e.mileageUnit,c.appendChild(u),c.appendChild(d),c.setAttribute("aria-label","Mileage: "+d.textContent);var h=this.utilities.createElement("DIV",{className:"vehicleLocation"}),p=this.utilities.createElement("DIV",{className:"vehicleLocationText"});null!==(n=e.listingTypes)&&void 0!==n&&n.includes($t.ONLINEONLY)?p.textContent=this.flyoutData.strings.autosMarketplaceOnlineDealer:(p.textContent=e.SellerName+"  ".concat(e.geoDistance," ").concat(e.mileageUnit),h.setAttribute("aria-label",p.textContent+" from your location")),h.appendChild(p),s.appendChild(l),s.appendChild(c),s.appendChild(h);var f=this.utilities.createElement("DIV",{className:"priceWrapper"}),g=this.utilities.createElement("DIV",{className:"badgeRating"});"GreatDeal"===e.dealRating&&(g.textContent=this.flyoutData.strings.autosMarketplaceGreatDeal);var m=this.utilities.createElement("DIV",{className:"price"}),v=this.utilities.createElement("DIV",{className:"vehiclePriceSign"}),y=this.utilities.createElement("DIV",{className:"vehiclePriceNumber"});v.textContent=e.CurrencySymbol,y.textContent=this.utilities.formatPrice(e.IntendedPrice),m.appendChild(v),m.appendChild(y),this.flyoutData.common.currentTheme===xt.Dark&&(l.style.color="#FFFFFF",c.style.color="#FFFFFF",h.style.color="#FFFFFF",m.style.color="#FFFFFF"),f.appendChild(g),f.appendChild(m),o.appendChild(a),o.appendChild(s),o.appendChild(f),o.tabIndex=0,this.manageLinkEvents(o,e),t.appendChild(o)}}},{key:"renderSeeMoreLink",value:function(t,e){var n=this,i=this.utilities.createElement("fluent-button",{className:"btnSeeMore"});i.textContent=this.flyoutData.strings.autosMarketplaceSeeAll;var o=this.flyoutData.common.currentDevice;i.addEventListener("click",(function(){var t;n.pageHandlerModule.RecordAsUserAction(is.AUTOS_SEE_MORE_CLICKED);var i=new Yr(E.NavigatedToAutosMarketplace);n.logModule.LogInfoEvent(S.ButtonClick,"Navigate to Autos Marketplace from listing module",i);var a=(null===(t=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===t?void 0:t.entityName)||"";o===St.Desktop&&n.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/".concat(e,"/autos/marketplace/search?q=").concat(a,"&form=MARFL2"),cl.NEW_FOREGROUND_TAB)})),t.appendChild(i)}},{key:"hasValidOffer",value:function(t){var e=!1;return t.forEach((function(t){t.valideOffer&&(e=!0)})),e}}]),a}(Bb),Gb=Vb;function Wb(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return $b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $b(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function $b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function zb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Kb=function(t){u(n,t);var e=zb(n);function n(t,i,o){var a;return s(this,n),(a=e.call(this,t,i,o)).flyoutData=i,a.utilities=o.viewModulesUtilities,a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a.assets=new Fb,a}return r(n,[{key:"PostProcessingNotification",value:function(t,e){var n=this,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=this.getCompetingVehicle(i);if(o&&i){var a=this.utilities.createElement("DIV",{className:"btnActions"});a.id="divNotificationActions",a.slot="actions";var r=this.utilities.createPrimaryButton();r.style.height="32px",r.textContent=this.flyoutData.strings.autosMarketplaceSeeMoreButton;var s=this.flyoutData.common.currentDevice;r.addEventListener("click",(function(){var t;n.pageHandlerModule.RecordAsUserAction(is.AUTOS_SEE_MORE_CLICKED);var e=new Yr(E.NavigatedToAutosMarketplace);n.logModule.LogInfoEvent(S.ButtonClick,"Navigate to Autos Marketplace from listing notification",e);var i=(null===(t=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===t?void 0:t.entityName)||"";s===St.Desktop&&n.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/".concat(o.marketHint,"/autos/marketplace/search?q=").concat(i,"&form=MARFL2"),cl.NEW_FOREGROUND_TAB)})),a.appendChild(r),this.flyoutData.common.shopping.appendChild(a)}}},{key:"RenderNotification",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=this.getCompetingVehicle(t);if(e&&t){var n,i,o;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getNotificationStyles(),void 0,this.assets.getNotificationDarkModeStyles()),this.flyoutData.common.shopping.classList.add("noSections");var a=this.utilities.createElement("DIV");a.classList.add("headerMargin");var r=this.utilities.createElement("A",{className:"upperContent"}),s=this.utilities.createElement("DIV",{style:"margin-right: 10px;"}),l=this.utilities.createElement("DIV",{className:"title"});t&&e.IntendedPrice<t.Price?l.textContent=this.flyoutData.strings.autosMarketplaceNotifivationLowPriceHeader:l.textContent=this.flyoutData.strings.autosMarketplaceNotificationHeader;var c=this.utilities.createElement("DIV",{className:"badgeRating"});"GreatDeal"===e.dealRating&&(c.textContent=this.flyoutData.strings.autosMarketplaceGreatDeal);var u=this.utilities.createElement("DIV",{className:"vehiclePrice"}),d=this.utilities.createElement("DIV",{className:"vehiclePriceIcon"});d.textContent=e.CurrencySymbol;var h=this.utilities.createElement("DIV",{className:"vehiclePriceNumber"});h.textContent=this.utilities.formatPrice(e.IntendedPrice),u.appendChild(d),u.appendChild(h);var p=this.utilities.createElement("DIV",{className:"vehicleMileage"}),f=this.utilities.createElement("DIV");f.textContent=this.utilities.formatPrice(e.mileageValue)+" "+e.mileageUnit,p.appendChild(f);var g=this.utilities.createElement("DIV",{className:"pmWrapper"});g.appendChild(u),g.appendChild(p),s.appendChild(l),s.appendChild(c),s.appendChild(g);var m=this.utilities.createElement("DIV",{className:"imageWrapper"}),v=this.utilities.createElement("IMG",{className:"notifProductImage"}),y=e.ProductImageOriginalUrl.replace("edge://image?","");v.src=y+"&w=175",v.onerror=function(){v.src=y},v.setAttribute("aria-hidden","true"),m.appendChild(v),r.appendChild(s),r.appendChild(m),r.tabIndex=0,this.manageListingEvents(r,e),a.appendChild(r);var C=this.utilities.createElement("DIV",{style:"padding-top: 8px;"}),b=this.utilities.createElement("DIV",{className:"vehicleTitle"});b.textContent=e.Description;var x=this.utilities.createElement("DIV",{className:"vehicleLocation"}),E=this.utilities.createElement("IMG",{className:"vehicleLocationIcon"});E.setAttribute("aria-hidden","true"),null!==(n=e.listingTypes)&&void 0!==n&&n.includes($t.ONLINEONLY)||(this.flyoutData.common.currentTheme===xt.Dark?E.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleLocationNotifDark.svg":E.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleLocationNotif.svg");var T=this.utilities.createElement("DIV",{className:"vehicleLocationText"});null!==(i=e.listingTypes)&&void 0!==i&&i.includes($t.ONLINEONLY)?T.textContent=this.flyoutData.strings.autosMarketplaceOnlineDealer:(T.textContent="".concat(e.geoDistance," ").concat(e.mileageUnit),T.setAttribute("aria-label",T.textContent+" from your location")),x.appendChild(E),x.appendChild(T);var D=this.utilities.createElement("DIV",{className:"alWrapper"});if((null===(o=e.marketHint)||void 0===o?void 0:o.toLowerCase())===Wt.US&&e.listingAccidentText&&Object.values(Kt).includes(e.listingAccidentText.toLowerCase())){var k=this.utilities.createElement("DIV",{style:"display: flex; align-items: center;"}),I=this.utilities.createElement("IMG");I.setAttribute("aria-hidden","true"),I.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleNoAccident.svg";var w=this.utilities.createElement("DIV",{style:"margin-left: 8px; margin-right: 8px;"});w.textContent=this.flyoutData.strings.autosMarketplaceNotificationNoAccident,k.appendChild(I),k.appendChild(w),D.appendChild(k)}D.appendChild(x),C.appendChild(b),C.appendChild(D),a.appendChild(C),a.slot="header-content";var P=this.utilities.createNotificationModule(a,this.GetNotificationName(),this),O=new _(A.AutosPriceInsightRenderNotification);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight Notification",O),Promise.resolve(P)}return Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData,n=this.getCompetingVehicle(e);return e&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_LOWER_PRICE_FOUND&&(null==e||null===(t=e.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS&&n&&(null==e?void 0:e.autosNotificationScenario)===zt.LISTING&&this.flyoutData.common.openedWith===Tt.Auto&&!this.flyoutData.common.seeInfoFromPCNotification?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.AUTOSMARKETPLACE}},{key:"manageListingEvents",value:function(t,e){var n=this,i=0,o=0,a=!0;t.addEventListener("mouseenter",(function(){s()})),t.addEventListener("mouseleave",(function(){l()})),t.addEventListener("focus",(function(){s()})),t.addEventListener("blur",(function(){l()}));var r=this.logModule,s=function(){if(Date.now()-o>200){a=!0,i=Date.now();var t=new _(A.AutosMarketplaceListingHovered);r.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Marketplace Notification - listing hovered",t)}},l=function(){o=Date.now(),setTimeout((function(){if(a){a=!1,n.sendAutosMarketplaceDwellTimeTelemery(i,A.AutosMarketDwellTimeHover,"Autos Marketplace Notification - hover time over listing");var t=new _(A.AutosMarketDwellTimeHover);r.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Marketplace Notification - listing exited hover",t)}}),200)};t.addEventListener("click",(function(){n.navigateToRetailer(e,!0)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToRetailer(e,!0)})),t.addEventListener("keydown",(function(t){t&&"Enter"===t.key&&n.navigateToRetailer(e,!0)}))}},{key:"getCompetingVehicle",value:function(t){if(!t||!t.CompetingPrices)return null;var e,n=Wb(t.CompetingPrices);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.ShouldOnTop)return i}}catch(t){n.e(t)}finally{n.f()}return null}}]),n}(Gb);function Yb(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jb(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qb(t){let e,n,i;function o(t,i,o=0,a=t.length){if(o<a){if(0!==e(i,i))return a;do{const e=o+a>>>1;n(t[e],i)<0?o=e+1:a=e}while(o<a)}return o}return 2!==t.length?(e=Yb,n=(e,n)=>Yb(t(e),n),i=(e,n)=>t(e)-n):(e=t===Yb||t===jb?t:Zb,n=t,i=t),{left:o,center:function(t,e,n=0,a=t.length){const r=o(t,e,n,a-1);return r>n&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,i,o=0,a=t.length){if(o<a){if(0!==e(i,i))return a;do{const e=o+a>>>1;n(t[e],i)<=0?o=e+1:a=e}while(o<a)}return o}}}function Zb(){return 0}function Xb(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function Jb(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function Qb(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var i=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(o);++i<o;)a[i]=t+i*n;return a}function tS(){}function eS(t){return null==t?tS:function(){return this.querySelector(t)}}function nS(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function iS(){return[]}function oS(t){return null==t?iS:function(){return this.querySelectorAll(t)}}function aS(t){return function(){return this.matches(t)}}function rS(t){return function(e){return e.matches(t)}}var sS=Array.prototype.find;function lS(){return this.firstElementChild}var cS=Array.prototype.filter;function uS(){return Array.from(this.children)}function dS(t){return new Array(t.length)}function hS(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function pS(t){return function(){return t}}function fS(t,e,n,i,o,a){for(var r,s=0,l=e.length,c=a.length;s<c;++s)(r=e[s])?(r.__data__=a[s],i[s]=r):n[s]=new hS(t,a[s]);for(;s<l;++s)(r=e[s])&&(o[s]=r)}function gS(t,e,n,i,o,a,r){var s,l,c,u=new Map,d=e.length,h=a.length,p=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(p[s]=c=r.call(l,l.__data__,s,e)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<h;++s)c=r.call(t,a[s],s,a)+"",(l=u.get(c))?(i[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new hS(t,a[s]);for(s=0;s<d;++s)(l=e[s])&&u.get(p[s])===l&&(o[s]=l)}function mS(t){return t.__data__}function vS(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function yS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}hS.prototype={constructor:hS,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var CS="http://www.w3.org/1999/xhtml",bS={svg:"http://www.w3.org/2000/svg",xhtml:CS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function SS(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),bS.hasOwnProperty(e)?{space:bS[e],local:t}:t}function xS(t){return function(){this.removeAttribute(t)}}function ES(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AS(t,e){return function(){this.setAttribute(t,e)}}function TS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function DS(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function kS(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function IS(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wS(t){return function(){this.style.removeProperty(t)}}function PS(t,e,n){return function(){this.style.setProperty(t,e,n)}}function OS(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function RS(t,e){return t.style.getPropertyValue(e)||IS(t).getComputedStyle(t,null).getPropertyValue(e)}function MS(t){return function(){delete this[t]}}function NS(t,e){return function(){this[t]=e}}function LS(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function _S(t){return t.trim().split(/^|\s+/)}function FS(t){return t.classList||new HS(t)}function HS(t){this._node=t,this._names=_S(t.getAttribute("class")||"")}function BS(t,e){for(var n=FS(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function US(t,e){for(var n=FS(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function VS(t){return function(){BS(this,t)}}function GS(t){return function(){US(this,t)}}function WS(t,e){return function(){(e.apply(this,arguments)?BS:US)(this,t)}}function $S(){this.textContent=""}function zS(t){return function(){this.textContent=t}}function KS(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function YS(){this.innerHTML=""}function jS(t){return function(){this.innerHTML=t}}function qS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ZS(){this.nextSibling&&this.parentNode.appendChild(this)}function XS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function JS(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===CS&&e.documentElement.namespaceURI===CS?e.createElement(t):e.createElementNS(n,t)}}function QS(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tx(t){var e=SS(t);return(e.local?QS:JS)(e)}function ex(){return null}function nx(){var t=this.parentNode;t&&t.removeChild(this)}function ix(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ox(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ax(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function rx(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function sx(t,e,n){return function(){var i,o=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var r=0,s=o.length;r<s;++r)if((i=o[r]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=e);this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},o?o.push(i):this.__on=[i]}}function lx(t,e,n){var i=IS(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function cx(t,e){return function(){return lx(this,t,e)}}function ux(t,e){return function(){return lx(this,t,e.apply(this,arguments))}}HS.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var dx=[null];function hx(t,e){this._groups=t,this._parents=e}function px(){return new hx([[document.documentElement]],dx)}hx.prototype=px.prototype={constructor:hx,select:function(t){"function"!=typeof t&&(t=eS(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var a,r,s=e[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(r=t.call(a,a.__data__,u,s))&&("__data__"in a&&(r.__data__=a.__data__),c[u]=r);return new hx(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return nS(t.apply(this,arguments))}}(t):oS(t);for(var e=this._groups,n=e.length,i=[],o=[],a=0;a<n;++a)for(var r,s=e[a],l=s.length,c=0;c<l;++c)(r=s[c])&&(i.push(t.call(r,r.__data__,c,s)),o.push(r));return new hx(i,o)},selectChild:function(t){return this.select(null==t?lS:function(t){return function(){return sS.call(this.children,t)}}("function"==typeof t?t:rS(t)))},selectChildren:function(t){return this.selectAll(null==t?uS:function(t){return function(){return cS.call(this.children,t)}}("function"==typeof t?t:rS(t)))},filter:function(t){"function"!=typeof t&&(t=aS(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var a,r=e[o],s=r.length,l=i[o]=[],c=0;c<s;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&l.push(a);return new hx(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,mS);var n=e?gS:fS,i=this._parents,o=this._groups;"function"!=typeof t&&(t=pS(t));for(var a=o.length,r=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=i[c],d=o[c],h=d.length,p=vS(t.call(u,u&&u.__data__,c,i)),f=p.length,g=s[c]=new Array(f),m=r[c]=new Array(f),v=l[c]=new Array(h);n(u,d,g,m,v,p,e);for(var y,C,b=0,S=0;b<f;++b)if(y=g[b]){for(b>=S&&(S=b+1);!(C=m[S])&&++S<f;);y._next=C||null}}return(r=new hx(r,i))._enter=s,r._exit=l,r},enter:function(){return new hx(this._enter||this._groups.map(dS),this._parents)},exit:function(){return new hx(this._exit||this._groups.map(dS),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?a.remove():n(a),i&&o?i.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,a=i.length,r=Math.min(o,a),s=new Array(o),l=0;l<r;++l)for(var c,u=n[l],d=i[l],h=u.length,p=s[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<o;++l)s[l]=n[l];return new hx(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],a=o.length-1,r=o[a];--a>=0;)(i=o[a])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=yS);for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a){for(var r,s=n[a],l=s.length,c=o[a]=new Array(l),u=0;u<l;++u)(r=s[u])&&(c[u]=r);c.sort(e)}return new hx(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,a=i.length;o<a;++o){var r=i[o];if(r)return r}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,a=e[n],r=0,s=a.length;r<s;++r)(o=a[r])&&t.call(o,o.__data__,r,a);return this},attr:function(t,e){var n=SS(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?ES:xS:"function"==typeof e?n.local?kS:DS:n.local?TS:AS)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?wS:"function"==typeof e?OS:PS)(t,e,null==n?"":n)):RS(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?MS:"function"==typeof e?LS:NS)(t,e)):this.node()[t]},classed:function(t,e){var n=_S(t+"");if(arguments.length<2){for(var i=FS(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?WS:e?VS:GS)(n,e))},text:function(t){return arguments.length?this.each(null==t?$S:("function"==typeof t?KS:zS)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?YS:("function"==typeof t?qS:jS)(t)):this.node().innerHTML},raise:function(){return this.each(ZS)},lower:function(){return this.each(XS)},append:function(t){var e="function"==typeof t?t:tx(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:tx(t),i=null==e?ex:"function"==typeof e?e:eS(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(nx)},clone:function(t){return this.select(t?ox:ix)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,o,a=ax(t+""),r=a.length;if(!(arguments.length<2)){for(s=e?sx:rx,i=0;i<r;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<r;++i)if((o=a[i]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ux:cx)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,o=t[e],a=0,r=o.length;a<r;++a)(i=o[a])&&(yield i)}};var fx=px,gx={value:()=>{}};function mx(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new vx(i)}function vx(t){this._=t}function yx(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Cx(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function bx(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=gx,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}vx.prototype=mx.prototype={constructor:vx,on:function(t,e){var n,i=this._,o=yx(t+"",i),a=-1,r=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<r;)if(n=(t=o[a]).type)i[n]=bx(i[n],t.name,e);else if(null==e)for(n in i)i[n]=bx(i[n],t.name,null);return this}for(;++a<r;)if((n=(t=o[a]).type)&&(n=Cx(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vx(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,a=i.length;o<a;++o)i[o].value.apply(e,n)}};var Sx,xx,Ex=mx,Ax=0,Tx=0,Dx=0,kx=0,Ix=0,wx=0,Px="object"==typeof performance&&performance.now?performance:Date,Ox="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rx(){return Ix||(Ox(Mx),Ix=Px.now()+wx)}function Mx(){Ix=0}function Nx(){this._call=this._time=this._next=null}function Lx(t,e,n){var i=new Nx;return i.restart(t,e,n),i}function _x(){Ix=(kx=Px.now())+wx,Ax=Tx=0;try{!function(){Rx(),++Ax;for(var t,e=Sx;e;)(t=Ix-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ax}()}finally{Ax=0,function(){var t,e,n=Sx,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Sx=e);xx=t,Hx(i)}(),Ix=0}}function Fx(){var t=Px.now(),e=t-kx;e>1e3&&(wx-=e,kx=t)}function Hx(t){Ax||(Tx&&(Tx=clearTimeout(Tx)),t-Ix>24?(t<1/0&&(Tx=setTimeout(_x,t-Px.now()-wx)),Dx&&(Dx=clearInterval(Dx))):(Dx||(kx=Px.now(),Dx=setInterval(Fx,1e3)),Ax=1,Ox(_x)))}function Bx(t,e,n){var i=new Nx;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}Nx.prototype=Lx.prototype={constructor:Nx,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Rx():+n)+(null==e?0:+e),this._next||xx===this||(xx?xx._next=this:Sx=this,xx=this),this._call=t,this._time=n,Hx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hx())}};var Ux=Ex("start","end","cancel","interrupt"),Vx=[];function Gx(t,e,n,i,o,a){var r=t.__transition;if(r){if(n in r)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function a(t){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}function r(a){var c,u,d,h;if(1!==n.state)return l();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return Bx(r);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[c])}if(Bx((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function s(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,r=i.length;++a<r;)i[a].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=Lx(a,0,n.time)}(t,n,{name:e,index:i,group:o,on:Ux,tween:Vx,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Wx(t,e){var n=zx(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function $x(t,e){var n=zx(t,e);if(n.state>3)throw new Error("too late; already running");return n}function zx(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Yx,jx=180/Math.PI,qx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zx(t,e,n,i,o,a){var r,s,l;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,r=-r),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*jx,skewX:Math.atan(l)*jx,scaleX:r,scaleY:s}}function Xx(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}return function(a,r){var s=[],l=[];return a=t(a),r=t(r),function(t,i,o,a,r,s){if(t!==o||i!==a){var l=r.push("translate(",null,e,null,n);s.push({i:l-4,x:Kx(t,o)},{i:l-2,x:Kx(i,a)})}else(o||a)&&r.push("translate("+o+e+a+n)}(a.translateX,a.translateY,r.translateX,r.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Kx(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}(a.rotate,r.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Kx(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}(a.skewX,r.skewX,s,l),function(t,e,n,i,a,r){if(t!==n||e!==i){var s=a.push(o(a)+"scale(",null,",",null,")");r.push({i:s-4,x:Kx(t,n)},{i:s-2,x:Kx(e,i)})}else 1===n&&1===i||a.push(o(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,r.scaleX,r.scaleY,s,l),a=r=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Jx=Xx((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qx:Zx(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Qx=Xx((function(t){return null==t?qx:(Yx||(Yx=document.createElementNS("http://www.w3.org/2000/svg","g")),Yx.setAttribute("transform",t),(t=Yx.transform.baseVal.consolidate())?Zx((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):qx)}),", ",")",")");function tE(t,e){var n,i;return function(){var o=$x(this,t),a=o.tween;if(a!==n)for(var r=0,s=(i=n=a).length;r<s;++r)if(i[r].name===e){(i=i.slice()).splice(r,1);break}o.tween=i}}function eE(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var a=$x(this,t),r=a.tween;if(r!==i){o=(i=r).slice();for(var s={name:e,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===e){o[l]=s;break}l===c&&o.push(s)}a.tween=o}}function nE(t,e,n){var i=t._id;return t.each((function(){var t=$x(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return zx(t,i).value[e]}}function iE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oE(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function aE(){}var rE=.7,sE=1/rE,lE="\\s*([+-]?\\d+)\\s*",cE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dE=/^#([0-9a-f]{3,8})$/,hE=new RegExp(`^rgb\\(${lE},${lE},${lE}\\)$`),pE=new RegExp(`^rgb\\(${uE},${uE},${uE}\\)$`),fE=new RegExp(`^rgba\\(${lE},${lE},${lE},${cE}\\)$`),gE=new RegExp(`^rgba\\(${uE},${uE},${uE},${cE}\\)$`),mE=new RegExp(`^hsl\\(${cE},${uE},${uE}\\)$`),vE=new RegExp(`^hsla\\(${cE},${uE},${uE},${cE}\\)$`),yE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function CE(){return this.rgb().formatHex()}function bE(){return this.rgb().formatRgb()}function SE(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dE.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?xE(e):3===n?new DE(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?EE(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?EE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=hE.exec(t))?new DE(e[1],e[2],e[3],1):(e=pE.exec(t))?new DE(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=fE.exec(t))?EE(e[1],e[2],e[3],e[4]):(e=gE.exec(t))?EE(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mE.exec(t))?RE(e[1],e[2]/100,e[3]/100,1):(e=vE.exec(t))?RE(e[1],e[2]/100,e[3]/100,e[4]):yE.hasOwnProperty(t)?xE(yE[t]):"transparent"===t?new DE(NaN,NaN,NaN,0):null}function xE(t){return new DE(t>>16&255,t>>8&255,255&t,1)}function EE(t,e,n,i){return i<=0&&(t=e=n=NaN),new DE(t,e,n,i)}function AE(t){return t instanceof aE||(t=SE(t)),t?new DE((t=t.rgb()).r,t.g,t.b,t.opacity):new DE}function TE(t,e,n,i){return 1===arguments.length?AE(t):new DE(t,e,n,null==i?1:i)}function DE(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function kE(){return`#${OE(this.r)}${OE(this.g)}${OE(this.b)}`}function IE(){const t=wE(this.opacity);return`${1===t?"rgb(":"rgba("}${PE(this.r)}, ${PE(this.g)}, ${PE(this.b)}${1===t?")":`, ${t})`}`}function wE(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function PE(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function OE(t){return((t=PE(t))<16?"0":"")+t.toString(16)}function RE(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new NE(t,e,n,i)}function ME(t){if(t instanceof NE)return new NE(t.h,t.s,t.l,t.opacity);if(t instanceof aE||(t=SE(t)),!t)return new NE;if(t instanceof NE)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),r=NaN,s=a-o,l=(a+o)/2;return s?(r=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+o:2-a-o,r*=60):s=l>0&&l<1?0:r,new NE(r,s,l,t.opacity)}function NE(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function LE(t){return(t=(t||0)%360)<0?t+360:t}function _E(t){return Math.max(0,Math.min(1,t||0))}function FE(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function HE(t,e,n,i,o){var a=t*t,r=a*t;return((1-3*t+3*a-r)*e+(4-6*a+3*r)*n+(1+3*t+3*a-3*r)*i+r*o)/6}iE(aE,SE,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:CE,formatHex:CE,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ME(this).formatHsl()},formatRgb:bE,toString:bE}),iE(DE,TE,oE(aE,{brighter(t){return t=null==t?sE:Math.pow(sE,t),new DE(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?rE:Math.pow(rE,t),new DE(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new DE(PE(this.r),PE(this.g),PE(this.b),wE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kE,formatHex:kE,formatHex8:function(){return`#${OE(this.r)}${OE(this.g)}${OE(this.b)}${OE(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:IE,toString:IE})),iE(NE,(function(t,e,n,i){return 1===arguments.length?ME(t):new NE(t,e,n,null==i?1:i)}),oE(aE,{brighter(t){return t=null==t?sE:Math.pow(sE,t),new NE(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?rE:Math.pow(rE,t),new NE(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new DE(FE(t>=240?t-240:t+120,o,i),FE(t,o,i),FE(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new NE(LE(this.h),_E(this.s),_E(this.l),wE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wE(this.opacity);return`${1===t?"hsl(":"hsla("}${LE(this.h)}, ${100*_E(this.s)}%, ${100*_E(this.l)}%${1===t?")":`, ${t})`}`}}));var BE=t=>()=>t;function UE(t,e){return function(n){return t+n*e}}function VE(t){return 1==(t=+t)?GE:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):BE(isNaN(e)?n:e)}}function GE(t,e){var n=e-t;return n?UE(t,n):BE(isNaN(t)?e:t)}var WE=function t(e){var n=VE(e);function i(t,e){var i=n((t=TE(t)).r,(e=TE(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),r=GE(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=a(e),t.opacity=r(e),t+""}}return i.gamma=t,i}(1);function $E(t){return function(e){var n,i,o=e.length,a=new Array(o),r=new Array(o),s=new Array(o);for(n=0;n<o;++n)i=TE(e[n]),a[n]=i.r||0,r[n]=i.g||0,s[n]=i.b||0;return a=t(a),r=t(r),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=r(t),i.b=s(t),i+""}}}$E((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],a=t[i+1],r=i>0?t[i-1]:2*o-a,s=i<e-1?t[i+2]:2*a-o;return HE((n-i/e)*e,r,o,a,s)}})),$E((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],a=t[i%e],r=t[(i+1)%e],s=t[(i+2)%e];return HE((n-i/e)*e,o,a,r,s)}}));var zE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KE=new RegExp(zE.source,"g");function YE(t,e){var n,i,o,a=zE.lastIndex=KE.lastIndex=0,r=-1,s=[],l=[];for(t+="",e+="";(n=zE.exec(t))&&(i=KE.exec(e));)(o=i.index)>a&&(o=e.slice(a,o),s[r]?s[r]+=o:s[++r]=o),(n=n[0])===(i=i[0])?s[r]?s[r]+=i:s[++r]=i:(s[++r]=null,l.push({i:r,x:Kx(n,i)})),a=KE.lastIndex;return a<e.length&&(o=e.slice(a),s[r]?s[r]+=o:s[++r]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function jE(t,e){var n;return("number"==typeof e?Kx:e instanceof SE?WE:(n=SE(e))?(e=n,WE):YE)(t,e)}function qE(t){return function(){this.removeAttribute(t)}}function ZE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function XE(t,e,n){var i,o,a=n+"";return function(){var r=this.getAttribute(t);return r===a?null:r===i?o:o=e(i=r,n)}}function JE(t,e,n){var i,o,a=n+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===a?null:r===i?o:o=e(i=r,n)}}function QE(t,e,n){var i,o,a;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttribute(t))===(s=l+"")?null:r===i&&s===o?a:(o=s,a=e(i=r,l));this.removeAttribute(t)}}function tA(t,e,n){var i,o,a;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:r===i&&s===o?a:(o=s,a=e(i=r,l));this.removeAttributeNS(t.space,t.local)}}function eA(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function nA(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function iA(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&nA(t,o)),n}return o._value=e,o}function oA(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&eA(t,o)),n}return o._value=e,o}function aA(t,e){return function(){Wx(this,t).delay=+e.apply(this,arguments)}}function rA(t,e){return e=+e,function(){Wx(this,t).delay=e}}function sA(t,e){return function(){$x(this,t).duration=+e.apply(this,arguments)}}function lA(t,e){return e=+e,function(){$x(this,t).duration=e}}function cA(t,e){if("function"!=typeof e)throw new Error;return function(){$x(this,t).ease=e}}function uA(t,e,n){var i,o,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Wx:$x;return function(){var r=a(this,t),s=r.on;s!==i&&(o=(i=s).copy()).on(e,n),r.on=o}}var dA=fx.prototype.constructor;function hA(t){return function(){this.style.removeProperty(t)}}function pA(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function fA(t,e,n){var i,o;function a(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&pA(t,a,n)),i}return a._value=e,a}function gA(t){return function(e){this.textContent=t.call(this,e)}}function mA(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&gA(i)),e}return i._value=t,i}var vA=0;function yA(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function CA(){return++vA}var bA=fx.prototype;yA.prototype=function(t){return fx().transition(t)}.prototype={constructor:yA,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=eS(t));for(var i=this._groups,o=i.length,a=new Array(o),r=0;r<o;++r)for(var s,l,c=i[r],u=c.length,d=a[r]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=t.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,Gx(d[h],e,n,h,d,zx(s,n)));return new yA(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=oS(t));for(var i=this._groups,o=i.length,a=[],r=[],s=0;s<o;++s)for(var l,c=i[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=t.call(l,l.__data__,d,c),f=zx(l,n),g=0,m=p.length;g<m;++g)(h=p[g])&&Gx(h,e,n,g,p,f);a.push(p),r.push(l)}return new yA(a,r,e,n)},selectChild:bA.selectChild,selectChildren:bA.selectChildren,filter:function(t){"function"!=typeof t&&(t=aS(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var a,r=e[o],s=r.length,l=i[o]=[],c=0;c<s;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&l.push(a);return new yA(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,a=Math.min(i,o),r=new Array(i),s=0;s<a;++s)for(var l,c=e[s],u=n[s],d=c.length,h=r[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<i;++s)r[s]=e[s];return new yA(r,this._parents,this._name,this._id)},selection:function(){return new dA(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=CA(),i=this._groups,o=i.length,a=0;a<o;++a)for(var r,s=i[a],l=s.length,c=0;c<l;++c)if(r=s[c]){var u=zx(r,e);Gx(r,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yA(i,this._parents,t,n)},call:bA.call,nodes:bA.nodes,node:bA.node,size:bA.size,empty:bA.empty,each:bA.each,on:function(t,e){var n=this._id;return arguments.length<2?zx(this.node(),n).on.on(t):this.each(uA(n,t,e))},attr:function(t,e){var n=SS(t),i="transform"===n?Qx:jE;return this.attrTween(t,"function"==typeof e?(n.local?tA:QE)(n,i,nE(this,"attr."+t,e)):null==e?(n.local?ZE:qE)(n):(n.local?JE:XE)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=SS(t);return this.tween(n,(i.local?iA:oA)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Jx:jE;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var a=RS(this,t),r=(this.style.removeProperty(t),RS(this,t));return a===r?null:a===n&&r===i?o:o=e(n=a,i=r)}}(t,i)).on("end.style."+t,hA(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,a;return function(){var r=RS(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=RS(this,t)),r===l?null:r===i&&l===o?a:(o=l,a=e(i=r,s))}}(t,i,nE(this,"style."+t,e))).each(function(t,e){var n,i,o,a,r="style."+e,s="end."+r;return function(){var l=$x(this,t),c=l.on,u=null==l.value[r]?a||(a=hA(e)):void 0;c===n&&o===u||(i=(n=c).copy()).on(s,o=u),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,a=n+"";return function(){var r=RS(this,t);return r===a?null:r===i?o:o=e(i=r,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,fA(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nE(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,mA(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=zx(this.node(),n).tween,a=0,r=o.length;a<r;++a)if((i=o[a]).name===t)return i.value;return null}return this.each((null==e?tE:eE)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?aA:rA)(e,t)):zx(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?sA:lA)(e,t)):zx(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(cA(e,t)):zx(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;$x(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,o=n.size();return new Promise((function(a,r){var s={value:r},l={value:function(){0==--o&&a()}};n.each((function(){var n=$x(this,i),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===o&&a()}))},[Symbol.iterator]:bA[Symbol.iterator]};var SA={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function xA(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}fx.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,o,a=t.__transition,r=!0;if(a){for(o in e=null==e?null:e+"",a)(n=a[o]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[o]):r=!1;r&&delete t.__transition}}(this,t)}))},fx.prototype.transition=function(t){var e,n;t instanceof yA?(e=t._id,t=t._name):(e=CA(),(n=SA).time=Rx(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var r,s=i[a],l=s.length,c=0;c<l;++c)(r=s[c])&&Gx(r,t,e,c,s,n||xA(r,e));return new yA(i,this._parents,t,e)};const{abs:EA,max:AA,min:TA}=Math;function DA(t){return[+t[0],+t[1]]}function kA(t){return[DA(t[0]),DA(t[1])]}["w","e"].map(IA),["n","s"].map(IA),["n","w","e","s","nw","ne","sw","se"].map(IA);function IA(t){return{type:t}}function wA(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}class PA extends Map{constructor(t,e=NA){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(OA(this,t))}has(t){return super.has(OA(this,t))}set(t,e){return super.set(RA(this,t),e)}delete(t){return super.delete(MA(this,t))}}Set;function OA({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function RA({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function MA({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function NA(t){return null!==t&&"object"==typeof t?t.valueOf():t}const LA=Symbol("implicit");function _A(){var t=new PA,e=[],n=[],i=LA;function o(o){let a=t.get(o);if(void 0===a){if(i!==LA)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return o.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new PA;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return o},o.range=function(t){return arguments.length?(n=Array.from(t),o):n.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return _A(e,n).unknown(i)},wA.apply(o,arguments),o}function FA(){var t,e,n=_A().unknown(void 0),i=n.domain,o=n.range,a=0,r=1,s=!1,l=0,c=0,u=.5;function d(){var n=i().length,d=r<a,h=d?r:a,p=d?a:r;t=(p-h)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),h+=(p-h-t*(n-l))*u,e=t*(1-l),s&&(h=Math.round(h),e=Math.round(e));var f=Qb(n).map((function(e){return h+t*e}));return o(d?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),d()):i()},n.range=function(t){return arguments.length?([a,r]=t,a=+a,r=+r,d()):[a,r]},n.rangeRound=function(t){return[a,r]=t,a=+a,r=+r,s=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,d()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),d()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),d()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,d()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),d()):u},n.copy=function(){return FA(i(),[a,r]).round(s).paddingInner(l).paddingOuter(c).align(u)},wA.apply(d(),arguments)}var HA=Math.sqrt(50),BA=Math.sqrt(10),UA=Math.sqrt(2);function VA(t,e,n){var i=(e-t)/Math.max(0,n),o=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,o);return o>=0?(a>=HA?10:a>=BA?5:a>=UA?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=HA?10:a>=BA?5:a>=UA?2:1)}function GA(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/o;return a>=HA?o*=10:a>=BA?o*=5:a>=UA&&(o*=2),e<t?-o:o}const WA=qb(Yb),$A=WA.right;WA.left,qb((function(t){return null===t?NaN:+t})).center;var zA=$A;function KA(t,e){var n,i=e?e.length:0,o=t?Math.min(i,t.length):0,a=new Array(o),r=new Array(i);for(n=0;n<o;++n)a[n]=ZA(t[n],e[n]);for(;n<i;++n)r[n]=e[n];return function(t){for(n=0;n<o;++n)r[n]=a[n](t);return r}}function YA(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function jA(t,e){var n,i={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=ZA(t[n],e[n]):o[n]=e[n];return function(t){for(n in i)o[n]=i[n](t);return o}}function qA(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,o=e.slice();return function(a){for(n=0;n<i;++n)o[n]=t[n]*(1-a)+e[n]*a;return o}}function ZA(t,e){var n,i,o=typeof e;return null==e||"boolean"===o?BE(e):("number"===o?Kx:"string"===o?(n=SE(e))?(e=n,WE):YE:e instanceof SE?WE:e instanceof Date?YA:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?KA:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?jA:Kx:qA))(t,e)}function XA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function JA(t){return+t}var QA=[0,1];function tT(t){return t}function eT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function nT(t,e,n){var i=t[0],o=t[1],a=e[0],r=e[1];return o<i?(i=eT(o,i),a=n(r,a)):(i=eT(i,o),a=n(a,r)),function(t){return a(i(t))}}function iT(t,e,n){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),r=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<i;)o[r]=eT(t[r],t[r+1]),a[r]=n(e[r],e[r+1]);return function(e){var n=zA(t,e,1,i)-1;return a[n](o[n](e))}}function oT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aT(){var t,e,n,i,o,a,r=QA,s=QA,l=ZA,c=tT;function u(){var t,e,n,l=Math.min(r.length,s.length);return c!==tT&&(t=r[0],e=r[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),i=l>2?iT:nT,o=a=null,d}function d(e){return null==e||isNaN(e=+e)?n:(o||(o=i(r.map(t),s,l)))(t(c(e)))}return d.invert=function(n){return c(e((a||(a=i(s,r.map(t),Kx)))(n)))},d.domain=function(t){return arguments.length?(r=Array.from(t,JA),u()):r.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),l=XA,u()},d.clamp=function(t){return arguments.length?(c=!!t||tT,u()):c!==tT},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,i){return t=n,e=i,u()}}function rT(){return aT()(tT,tT)}var sT,lT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cT(t){if(!(e=lT.exec(t)))throw new Error("invalid format: "+t);var e;return new uT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function uT(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function dT(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function hT(t){return(t=dT(Math.abs(t)))?t[1]:NaN}function pT(t,e){var n=dT(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}cT.prototype=uT.prototype,uT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var fT={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pT(100*t,e),r:pT,s:function(t,e){var n=dT(t,e);if(!n)return t+"";var i=n[0],o=n[1],a=o-(sT=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,r=i.length;return a===r?i:a>r?i+new Array(a-r+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+dT(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gT(t){return t}var mT,vT,yT,CT=Array.prototype.map,bT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ST(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?gT:(e=CT.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var o=t.length,a=[],r=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(t.substring(o-=s,o+s)),!((l+=s+1)>i));)s=e[r=(r+1)%e.length];return a.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?gT:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(CT.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=cT(t)).fill,n=t.align,d=t.sign,h=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):fT[y]||(void 0===m&&(m=12),v=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var C="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?a:/[%p]/.test(y)?l:"",S=fT[y],x=/[defgprs%]/.test(y);function E(t){var o,a,l,h=C,E=b;if("c"===y)E=S(t)+E,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:S(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,i=1,o=-1;i<n;++i)switch(t[i]){case".":o=e=i;break;case"0":0===o&&(o=i),e=i;break;default:if(!+t[i])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==d&&(A=!1),h=(A?"("===d?d:c:"-"===d||"("===d?"":d)+h,E=("s"===y?bT[8+sT/3]:"")+E+(A&&"("===d?")":""),x)for(o=-1,a=t.length;++o<a;)if(48>(l=t.charCodeAt(o))||l>57){E=(46===l?r+t.slice(o+1):t.slice(o))+E,t=t.slice(0,o);break}}g&&!p&&(t=i(t,1/0));var T=h.length+t.length+E.length,D=T<f?new Array(f-T+1).join(e):"";switch(g&&p&&(t=i(D+t,D.length?f-E.length:1/0),D=""),n){case"<":t=h+t+E+D;break;case"=":t=h+D+t+E;break;case"^":t=D.slice(0,T=D.length>>1)+h+t+E+D.slice(T);break;default:t=D+h+t+E}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return t+""},E}return{format:d,formatPrefix:function(t,e){var n=d(((t=cT(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(hT(e)/3))),o=Math.pow(10,-i),a=bT[8+i/3];return function(t){return n(o*t)+a}}}}function xT(t,e,n,i){var o,a=GA(t,e,n);switch((i=cT(null==i?",f":i)).type){case"s":var r=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hT(e)/3)))-hT(Math.abs(t)))}(a,r))||(i.precision=o),yT(i,r);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hT(e)-hT(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=function(t){return Math.max(0,-hT(Math.abs(t)))}(a))||(i.precision=o-2*("%"===i.type))}return vT(i)}function ET(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,o,a,r,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(r=VA(t,e,n))||!isFinite(r))return[];if(r>0){let n=Math.round(t/r),i=Math.round(e/r);for(n*r<t&&++n,i*r>e&&--i,a=new Array(o=i-n+1);++s<o;)a[s]=(n+s)*r}else{r=-r;let n=Math.round(t*r),i=Math.round(e*r);for(n/r<t&&++n,i/r>e&&--i,a=new Array(o=i-n+1);++s<o;)a[s]=(n+s)/r}return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return xT(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,o,a=e(),r=0,s=a.length-1,l=a[r],c=a[s],u=10;for(c<l&&(o=l,l=c,c=o,o=r,r=s,s=o);u-- >0;){if((o=VA(l,c,n))===i)return a[r]=l,a[s]=c,e(a);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}i=o}return t},t}function AT(){var t=rT();return t.copy=function(){return oT(t,AT())},wA.apply(t,arguments),ET(t)}mT=ST({thousands:",",grouping:[3],currency:["$",""]}),vT=mT.format,yT=mT.formatPrefix;const TT=1e3,DT=6e4,kT=36e5,IT=864e5,wT=6048e5,PT=2592e6,OT=31536e6;var RT=new Date,MT=new Date;function NT(t,e,n,i){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,i,a){var r,s=[];if(n=o.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(r=new Date(+n)),e(n,a),t(n)}while(r<n&&n<i);return s},o.filter=function(n){return NT((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,i){return RT.setTime(+e),MT.setTime(+i),t(RT),t(MT),Math.floor(n(RT,MT))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(i?function(e){return i(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var LT=NT((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));LT.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?NT((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):LT:null};var _T=LT,FT=(LT.range,NT((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*TT)}),(function(t,e){return(e-t)/TT}),(function(t){return t.getUTCSeconds()}))),HT=FT,BT=(FT.range,NT((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*TT)}),(function(t,e){t.setTime(+t+e*DT)}),(function(t,e){return(e-t)/DT}),(function(t){return t.getMinutes()}))),UT=BT,VT=(BT.range,NT((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*TT-t.getMinutes()*DT)}),(function(t,e){t.setTime(+t+e*kT)}),(function(t,e){return(e-t)/kT}),(function(t){return t.getHours()}))),GT=VT,WT=(VT.range,NT((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*DT)/IT),(t=>t.getDate()-1))),$T=WT;WT.range;function zT(t){return NT((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*DT)/wT}))}var KT=zT(0),YT=zT(1),jT=zT(2),qT=zT(3),ZT=zT(4),XT=zT(5),JT=zT(6),QT=(KT.range,YT.range,jT.range,qT.range,ZT.range,XT.range,JT.range,NT((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),tD=QT,eD=(QT.range,NT((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));eD.every=function(t){return isFinite(t=Math.floor(t))&&t>0?NT((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var nD=eD,iD=(eD.range,NT((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*DT)}),(function(t,e){return(e-t)/DT}),(function(t){return t.getUTCMinutes()}))),oD=iD,aD=(iD.range,NT((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*kT)}),(function(t,e){return(e-t)/kT}),(function(t){return t.getUTCHours()}))),rD=aD,sD=(aD.range,NT((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/IT}),(function(t){return t.getUTCDate()-1}))),lD=sD;sD.range;function cD(t){return NT((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/wT}))}var uD=cD(0),dD=cD(1),hD=cD(2),pD=cD(3),fD=cD(4),gD=cD(5),mD=cD(6),vD=(uD.range,dD.range,hD.range,pD.range,fD.range,gD.range,mD.range,NT((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),yD=vD,CD=(vD.range,NT((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));CD.every=function(t){return isFinite(t=Math.floor(t))&&t>0?NT((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var bD=CD;CD.range;function SD(t,e,n,i,o,a){const r=[[HT,1,TT],[HT,5,5e3],[HT,15,15e3],[HT,30,3e4],[a,1,DT],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,kT],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,IT],[i,2,1728e5],[n,1,wT],[e,1,PT],[e,3,7776e6],[t,1,OT]];function s(e,n,i){const o=Math.abs(n-e)/i,a=qb((([,,t])=>t)).right(r,o);if(a===r.length)return t.every(GA(e/OT,n/OT,i));if(0===a)return _T.every(Math.max(GA(e,n,i),1));const[s,l]=r[o/r[a-1][2]<r[a][2]/o?a-1:a];return s.every(l)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const o=n&&"function"==typeof n.range?n:s(t,e,n),a=o?o.range(t,+e+1):[];return i?a.reverse():a},s]}const[xD,ED]=SD(bD,yD,uD,lD,rD,oD),[AD,TD]=SD(nD,tD,KT,$T,GT,UT);function DD(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kD(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ID(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var wD,PD,OD={"-":"",_:" ",0:"0"},RD=/^\s*\d+/,MD=/^%/,ND=/[\\^$*+?|[\]().{}]/g;function LD(t,e,n){var i=t<0?"-":"",o=(i?-t:t)+"",a=o.length;return i+(a<n?new Array(n-a+1).join(e)+o:o)}function _D(t){return t.replace(ND,"\\$&")}function FD(t){return new RegExp("^(?:"+t.map(_D).join("|")+")","i")}function HD(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function BD(t,e,n){var i=RD.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function UD(t,e,n){var i=RD.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function VD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function GD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function WD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function $D(t,e,n){var i=RD.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function zD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function KD(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function YD(t,e,n){var i=RD.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function jD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function qD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ZD(t,e,n){var i=RD.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function XD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function JD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function QD(t,e,n){var i=RD.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function tk(t,e,n){var i=RD.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ek(t,e,n){var i=RD.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function nk(t,e,n){var i=MD.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ik(t,e,n){var i=RD.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ok(t,e,n){var i=RD.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function ak(t,e){return LD(t.getDate(),e,2)}function rk(t,e){return LD(t.getHours(),e,2)}function sk(t,e){return LD(t.getHours()%12||12,e,2)}function lk(t,e){return LD(1+$T.count(nD(t),t),e,3)}function ck(t,e){return LD(t.getMilliseconds(),e,3)}function uk(t,e){return ck(t,e)+"000"}function dk(t,e){return LD(t.getMonth()+1,e,2)}function hk(t,e){return LD(t.getMinutes(),e,2)}function pk(t,e){return LD(t.getSeconds(),e,2)}function fk(t){var e=t.getDay();return 0===e?7:e}function gk(t,e){return LD(KT.count(nD(t)-1,t),e,2)}function mk(t){var e=t.getDay();return e>=4||0===e?ZT(t):ZT.ceil(t)}function vk(t,e){return t=mk(t),LD(ZT.count(nD(t),t)+(4===nD(t).getDay()),e,2)}function yk(t){return t.getDay()}function Ck(t,e){return LD(YT.count(nD(t)-1,t),e,2)}function bk(t,e){return LD(t.getFullYear()%100,e,2)}function Sk(t,e){return LD((t=mk(t)).getFullYear()%100,e,2)}function xk(t,e){return LD(t.getFullYear()%1e4,e,4)}function Ek(t,e){var n=t.getDay();return LD((t=n>=4||0===n?ZT(t):ZT.ceil(t)).getFullYear()%1e4,e,4)}function Ak(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+LD(e/60|0,"0",2)+LD(e%60,"0",2)}function Tk(t,e){return LD(t.getUTCDate(),e,2)}function Dk(t,e){return LD(t.getUTCHours(),e,2)}function kk(t,e){return LD(t.getUTCHours()%12||12,e,2)}function Ik(t,e){return LD(1+lD.count(bD(t),t),e,3)}function wk(t,e){return LD(t.getUTCMilliseconds(),e,3)}function Pk(t,e){return wk(t,e)+"000"}function Ok(t,e){return LD(t.getUTCMonth()+1,e,2)}function Rk(t,e){return LD(t.getUTCMinutes(),e,2)}function Mk(t,e){return LD(t.getUTCSeconds(),e,2)}function Nk(t){var e=t.getUTCDay();return 0===e?7:e}function Lk(t,e){return LD(uD.count(bD(t)-1,t),e,2)}function _k(t){var e=t.getUTCDay();return e>=4||0===e?fD(t):fD.ceil(t)}function Fk(t,e){return t=_k(t),LD(fD.count(bD(t),t)+(4===bD(t).getUTCDay()),e,2)}function Hk(t){return t.getUTCDay()}function Bk(t,e){return LD(dD.count(bD(t)-1,t),e,2)}function Uk(t,e){return LD(t.getUTCFullYear()%100,e,2)}function Vk(t,e){return LD((t=_k(t)).getUTCFullYear()%100,e,2)}function Gk(t,e){return LD(t.getUTCFullYear()%1e4,e,4)}function Wk(t,e){var n=t.getUTCDay();return LD((t=n>=4||0===n?fD(t):fD.ceil(t)).getUTCFullYear()%1e4,e,4)}function $k(){return"+0000"}function zk(){return"%"}function Kk(t){return+t}function Yk(t){return Math.floor(+t/1e3)}function jk(t){return new Date(t)}function qk(t){return t instanceof Date?+t:+new Date(+t)}function Zk(t,e,n,i,o,a,r,s,l,c){var u=rT(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),C=c("%B"),b=c("%Y");function S(t){return(l(t)<t?p:s(t)<t?f:r(t)<t?g:a(t)<t?m:i(t)<t?o(t)<t?v:y:n(t)<t?C:b)(t)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?h(Array.from(t,qk)):h().map(jk)},u.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?S:c(e)},u.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(function(t,e){var n,i=0,o=(t=t.slice()).length-1,a=t[i],r=t[o];return r<a&&(n=i,i=o,o=n,n=a,a=r,r=n),t[i]=e.floor(a),t[o]=e.ceil(r),t}(n,t)):u},u.copy=function(){return oT(u,Zk(t,e,n,i,o,a,r,s,l,c))},u}function Xk(t){return"string"==typeof t?new hx([[document.querySelector(t)]],[document.documentElement]):new hx([[t]],dx)}!function(t){wD=function(t){var e=t.dateTime,n=t.date,i=t.time,o=t.periods,a=t.days,r=t.shortDays,s=t.months,l=t.shortMonths,c=FD(o),u=HD(o),d=FD(a),h=HD(a),p=FD(r),f=HD(r),g=FD(s),m=HD(s),v=FD(l),y=HD(l),C={a:function(t){return r[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ak,e:ak,f:uk,g:Sk,G:Ek,H:rk,I:sk,j:lk,L:ck,m:dk,M:hk,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Kk,s:Yk,S:pk,u:fk,U:gk,V:vk,w:yk,W:Ck,x:null,X:null,y:bk,Y:xk,Z:Ak,"%":zk},b={a:function(t){return r[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Tk,e:Tk,f:Pk,g:Vk,G:Wk,H:Dk,I:kk,j:Ik,L:wk,m:Ok,M:Rk,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Kk,s:Yk,S:Mk,u:Nk,U:Lk,V:Fk,w:Hk,W:Bk,x:null,X:null,y:Uk,Y:Gk,Z:$k,"%":zk},S={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=h.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return A(t,e,n,i)},d:qD,e:qD,f:ek,g:zD,G:$D,H:XD,I:XD,j:ZD,L:tk,m:jD,M:JD,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:YD,Q:ik,s:ok,S:QD,u:UD,U:VD,V:GD,w:BD,W:WD,x:function(t,e,i){return A(t,n,e,i)},X:function(t,e,n){return A(t,i,e,n)},y:zD,Y:$D,Z:KD,"%":nk};function x(t,e){return function(n){var i,o,a,r=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(r.push(t.slice(l,s)),null!=(o=OD[i=t.charAt(++s)])?i=t.charAt(++s):o="e"===i?" ":"0",(a=e[i])&&(i=a(n,o)),r.push(i),l=s+1);return r.push(t.slice(l,s)),r.join("")}}function E(t,e){return function(n){var i,o,a=ID(1900,void 0,1);if(A(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(o=(i=kD(ID(a.y,0,1))).getUTCDay(),i=o>4||0===o?dD.ceil(i):dD(i),i=lD.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(o=(i=DD(ID(a.y,0,1))).getDay(),i=o>4||0===o?YT.ceil(i):YT(i),i=$T.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?kD(ID(a.y,0,1)).getUTCDay():DD(ID(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,kD(a)):DD(a)}}function A(t,e,n,i){for(var o,a,r=0,s=e.length,l=n.length;r<s;){if(i>=l)return-1;if(37===(o=e.charCodeAt(r++))){if(o=e.charAt(r++),!(a=S[o in OD?e.charAt(r++):o])||(i=a(t,n,i))<0)return-1}else if(o!=n.charCodeAt(i++))return-1}return i}return C.x=x(n,C),C.X=x(i,C),C.c=x(e,C),b.x=x(n,b),b.X=x(i,b),b.c=x(e,b),{format:function(t){var e=x(t+="",C);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t+="",!0);return e.toString=function(){return t},e}}}(t),PD=wD.format,wD.parse,wD.utcFormat,wD.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const Jk=Math.PI,Qk=2*Jk,tI=1e-6,eI=Qk-tI;function nI(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function iI(){return new nI}nI.prototype=iI.prototype={constructor:nI,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+a)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var a=this._x1,r=this._y1,s=n-t,l=i-e,c=a-t,u=r-e,d=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>tI)if(Math.abs(u*s-l*c)>tI&&o){var h=n-a,p=i-r,f=s*s+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(d),y=o*Math.tan((Jk-Math.acos((f+d-g)/(2*m*v)))/2),C=y/v,b=y/m;Math.abs(C-1)>tI&&(this._+="L"+(t+C*c)+","+(e+C*u)),this._+="A"+o+","+o+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,o,a){t=+t,e=+e,a=!!a;var r=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+r,c=e+s,u=1^a,d=a?i-o:o-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>tI||Math.abs(this._y1-c)>tI)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%Qk+Qk),d>eI?this._+="A"+n+","+n+",0,1,"+u+","+(t-r)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>tI&&(this._+="A"+n+","+n+",0,"+ +(d>=Jk)+","+u+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var oI=iI;Array.prototype.slice;function aI(t){return function(){return t}}function rI(t){this._context=t}function sI(t){return new rI(t)}function lI(t){return t[0]}function cI(t){return t[1]}function uI(t,e){var n=aI(!0),i=null,o=sI,a=null;function r(r){var s,l,c,u=(r=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(r)).length,d=!1;for(null==i&&(a=o(c=oI())),s=0;s<=u;++s)!(s<u&&n(l=r[s],s,r))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(l,s,r),+e(l,s,r));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?lI:aI(t),e="function"==typeof e?e:void 0===e?cI:aI(e),r.x=function(e){return arguments.length?(t="function"==typeof e?e:aI(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:aI(+t),r):e},r.defined=function(t){return arguments.length?(n="function"==typeof t?t:aI(!!t),r):n},r.curve=function(t){return arguments.length?(o=t,null!=i&&(a=o(i)),r):o},r.context=function(t){return arguments.length?(null==t?i=a=null:a=o(i=t),r):i},r}function dI(t){return t<0?-1:1}function hI(t,e,n){var i=t._x1-t._x0,o=e-t._x1,a=(t._y1-t._y0)/(i||o<0&&-0),r=(n-t._y1)/(o||i<0&&-0),s=(a*o+r*i)/(i+o);return(dI(a)+dI(r))*Math.min(Math.abs(a),Math.abs(r),.5*Math.abs(s))||0}function pI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fI(t,e,n){var i=t._x0,o=t._y0,a=t._x1,r=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,o+s*e,a-s,r-s*n,a,r)}function gI(t){this._context=t}function mI(t){this._context=new vI(t)}function vI(t){this._context=t}function yI(t){return new gI(t)}function CI(t,e,n){this.k=t,this.x=e,this.y=n}rI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},gI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fI(this,this._t0,pI(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fI(this,pI(this,n=hI(this,t,e)),n);break;default:fI(this,this._t0,n=hI(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(mI.prototype=Object.create(gI.prototype)).point=function(t,e){gI.prototype.point.call(this,e,t)},vI.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,a){this._context.bezierCurveTo(e,t,i,n,a,o)}},CI.prototype={constructor:CI,scale:function(t){return 1===t?this:new CI(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new CI(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new CI(1,0,0);CI.prototype;var bI=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        .headerTitle {\n            font-weight: 600;\n            align-items: center;\n            font-size: 20px;\n            line-height: 24px;\n            margin: 0px;\n        }\n        .priceDeltaContainer {\n            width: 65%;\n            margin: 0px auto 12px;\n            display: grid;\n            border: 1px solid rgb(240, 240, 240);\n            box-shadow: rgb(1 19 63 / 2%) 0px 0px 8px;\n            border-radius: 6px;\n            padding: 12px 6px;\n            grid-template-columns: 10% 40% 50%;\n        }\n        .priceDeltaText {\n            font-size: 14px;\n            line-height: 28px;\n            grid-columns: 2 / 2;\n        }\n        .priceDeltaStatement {\n            font-size: 12px;\n            font-weight: 400;\n            line-height: 14px;\n            text-align: start;\n            grid-columns: 3 / 3;\n        }\n        .priceInfoText {\n            fill: #000000;\n        }\n        .priceInsightBar:focus {\n            outline: #000000 auto 5px;\n        }\n        .priceRangeText {\n            fill: #1A1A1A;\n        }\n        .btnSeeMore {\n            font-size: 14px;\n            border-radius: 4px;\n            color: rgba(26,26,26,1);\n            background-color: #FFFFFF;\n            margin: 6px 16px;\n            height: 36px;\n            width: -webkit-fill-available;\n            border: 1px solid rgba(214, 214, 214, 1);\n        }\n        @media (forced-colors: active) {\n            .priceInsightBar {\n                fill: ".concat(oh.CanvasText," !important;\n            }\n            .priceRangeText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n            .priceInfoText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n            .priceRangeText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n        }\n        ")}},{key:"getDarkModeStyles",value:function(){return"\n        .priceInfoText {\n            fill: #FFFFFF;\n        }\n        .priceRangeText {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getNotificationStyles",value:function(){return"\n        .title {\n            font-size: 16px;\n            font-weight: 600;\n            line-height: 22px;\n            margin-bottom: 12px;\n            text-align: center;\n        }\n        .priceDeltaContainer {\n            width: 85%;\n            margin: 0px auto 12px;\n            display: grid;\n            border: 1px solid rgb(240, 240, 240);\n            box-shadow: rgb(1 19 63 / 2%) 0px 0px 8px;\n            border-radius: 6px;\n            padding: 6px 3px;\n            grid-template-columns: 10% 40% 50%;\n        }\n        .priceDeltaText {\n            font-size: 14px;\n            line-height: 28px;\n            grid-columns: 2 / 2;\n        }\n        .priceDeltaStatement {\n            font-size: 12px;\n            font-weight: 400;\n            line-height: 14px;\n            text-align: start;\n            grid-columns: 3 / 3;\n        }\n        .priceInfoText {\n            fill: #000000;\n        }\n        .priceInsightBar:focus {\n            outline: #000000 auto 5px;\n        }\n        .priceRangeText {\n            fill: #1A1A1A;\n        }\n        .btnActions {\n            width: calc(100% - 22px);\n            margin-top: 6px;\n            justify-content: center;\n        }\n        @media (forced-colors: active) {\n            .priceInsightBar {\n                fill: ".concat(oh.CanvasText," !important;\n            }\n            .priceRangeText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n            .priceInfoText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n            .priceRangeText {\n                fill: ").concat(oh.CanvasText," !important;\n            }\n        }\n        ")}},{key:"getNotificationDarkModeStyles",value:function(){return"\n        .priceInfoText {\n            fill: #FFFFFF;\n        }\n        .priceRangeText {\n            fill: #FFFFFF;\n        }\n        "}}]),t}();function SI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var xI=function(t){u(n,t);var e=SI(n);function n(t,i,o){var a;return s(this,n),f(l(a=e.call(this)),"assets",void 0),f(l(a),"oemPriceInsightData",void 0),f(l(a),"logModule",void 0),f(l(a),"pageHandlerModule",void 0),f(l(a),"stateManagement",void 0),f(l(a),"flyoutData",void 0),f(l(a),"utilities",void 0),f(l(a),"visibilityRequest",[]),f(l(a),"sectionId","priceComparisonSection"),a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a.flyoutData=i,a.utilities=o.viewModulesUtilities,a.assets=new bI,a}return r(n,[{key:"GetModuleName",value:function(){return Rt.AUTOSPRICEINSIGHT}},{key:"ShouldRenderModule",value:function(){var t,e,n,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=(null==i||null===(t=i.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS,a=null!==(e=i&&i.CompetingPrices&&i.CompetingPrices.length>0)&&void 0!==e&&e;if(o&&a)return this.stateManagement.addEventListener(hn.pcCreateHeader,this.populateMainHeader.bind(this)),Promise.resolve(!0);var r=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n?void 0:n.retailerData,s=this.getAutosDataSelector(r);if(s){var l;try{l=JSON.parse(s).priceInsights}catch(t){var c=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error in parsing Autos OEM Price Insight data: ".concat(t.message),c)}if(l)return this.oemPriceInsightData=new Ic(l),Promise.resolve(!0)}return Promise.resolve(!1)}},{key:"renderModule",value:function(){var t,e=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));e?t=e:((t=document.createElement("msft-edge-shopping-section")).id=this.sectionId,t.accordion=!0,t.expanded=!1,t.title="Market Price Insight");var n=!1,i=this.flyoutData.dataStoreModule.PriceComparisonData;if(i&&i.autosPriceInsight?(this.populatePriceInsight(t),n=!0):this.oemPriceInsightData&&(this.populateOemPriceInsight(t),n=!0),!n)return Promise.resolve(null);this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());var o=this.CreateModule(t,wt.AUTOSPRICEINSIGHT,Rt.AUTOSPRICEINSIGHT,_t.CONTEXTUAL,Ft.LIST),a=new _(A.AutosPriceInsightRenderViewModule);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight",a),Promise.resolve(o)}},{key:"populateMainHeader",value:function(){var t,e,n,i=this.flyoutData.dataStoreModule.PriceComparisonData;null!=i&&i.autosPriceInsight?n=null==i?void 0:i.autosPriceInsight:this.oemPriceInsightData&&(n=this.oemPriceInsightData);var o=this.flyoutData.common.shopping,a=this.utilities.createElement("DIV",{className:"headerContentWrapper"});a.slot="header-content";var r,s,l=this.utilities.createElement("H2",{className:"headerTitle"}),c="similar listings";null!==(t=n)&&void 0!==t&&t.make&&null!==(e=n)&&void 0!==e&&e.model&&(c=this.formatMakeModel(null===(r=n)||void 0===r?void 0:r.make)+" "+this.formatMakeModel(null===(s=n)||void 0===s?void 0:s.model));l.textContent=this.flyoutData.strings.autosPriceInsightSectionTitle+c,a.appendChild(l),o.appendChild(a)}},{key:"sendAutosPriceInsightDwellTimeTelemery",value:function(t,e,n){var i=Date.now()-t,o=new _(e);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(n," - ").concat(i," ms"),o),i>=1e3&&rl&&this.pageHandlerModule.RecordAsUserEngagement(rl.VIEW_AUTOS_PRICE_INSIGHT)}},{key:"getAutosDataSelector",value:function(t){if(!t)return null;var e=this.flyoutData.common.lastCommittedURL,n=null;return t.allCheckoutPages.forEach((function(t){-1!==e.indexOf(t.checkoutPageUrl)&&(n=t.autosDataSelector)})),n}},{key:"formatMakeModel",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},{key:"populatePriceInsight",value:function(t){var e=this.flyoutData.dataStoreModule.PriceComparisonData,n=null==e?void 0:e.autosPriceInsight;if(e&&null!=n&&n.validData){var i,o=this.utilities.createElement("DIV",{className:"priceDeltaContainer"}),a=e.Price-n.avgPrice,r=this.utilities.createElement("IMG",{style:"display: flex; place-self: center; grid-column: 1 / 1;"});r.setAttribute("aria-hidden","true"),r.src=a<0?this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":a>0?this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg";var s=this.utilities.createElement("DIV",{className:"priceDeltaText"});s.textContent="$".concat(this.utilities.formatPrice(Math.abs(a)));var l=this.utilities.createElement("DIV",{className:"priceDeltaStatement"});l.textContent=a<0?this.flyoutData.strings.autosPriceInsightBelowAverage+" ".concat(n.currency).concat(this.utilities.formatPrice(n.avgPrice)):this.flyoutData.strings.autosPriceInsightAboveAverage+" ".concat(n.currency).concat(this.utilities.formatPrice(n.avgPrice)),o.append(r),o.append(s),o.append(l),o.setAttribute("aria-label",s.textContent+" "+l.textContent);var c=this.drawGraph(e.autosPriceInsight);if(t.appendChild(o),t.appendChild(c),n.make&&n.model){var u=this.formatMakeModel(n.make)+" "+this.formatMakeModel(n.model);t.title=this.flyoutData.strings.autosPriceInsightSectionTitle+u}var d=(null===(i=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===i?void 0:i.entityName)||"";this.renderSeeMoreLink(t,e.CompetingPrices[0].marketHint||"en-us",d)}}},{key:"populateOemPriceInsight",value:function(t){var e=this.drawGraph(this.oemPriceInsightData);if(t.appendChild(e),this.oemPriceInsightData.make&&this.oemPriceInsightData.model){var n=this.formatMakeModel(this.oemPriceInsightData.make)+" "+this.formatMakeModel(this.oemPriceInsightData.model);t.title=this.flyoutData.strings.autosPriceInsightSectionTitle+n}var i=this.oemPriceInsightData.make+" "+this.oemPriceInsightData.model;this.renderSeeMoreLink(t,"en-us",i)}},{key:"drawGraph",value:function(t){var e=this,n=t,i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(!n)return i;var o=300,a=100,r=0,s=Xk(i).attr("role","grid").attr("width",o).attr("height",170).style("margin-left","25px").on("mouseenter",(function(){return r=Date.now()})).on("mouseleave",(function(t){e.sendAutosPriceInsightDwellTimeTelemery(r,A.AutosPriceInsightDwellTimeHover,"Autos Price Insight - hover time over graph");var n=new _(A.AutosPriceInsightHovered);e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight hovered",n)})),l=n.aggregatedNumVehInBucket,c=FA().domain(Qb(l.length)).rangeRound([0,o]).paddingInner(.18),u=AT().domain([0,Xb(l)]).range([0,a]);s.append("g").attr("role","row").attr("width","100%").attr("height","100%").selectAll("rect").data(l).enter().append("rect").attr("x",(function(t,e){return c(e)})).attr("y",(function(t){return 140-u(t)})).attr("width",c.bandwidth()).attr("height",(function(t){return u(t)})).attr("rx","3px").attr("ry","3px").style("cursor","pointer");var d=s.append("defs").append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient");d.append("stop").attr("class","stop-left").attr("offset","0%").attr("stop-color","rgba(39, 172, 34, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-mid").attr("offset","51.02%").attr("stop-color","rgba(242, 200, 17, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-right").attr("offset","89.75%").attr("stop-color","rgba(232, 58, 58, 0.71)").attr("stop-opacity",1);var h=s.append("g").attr("class","priceInfoText").style("opacity",0).style("transition-duration","0.4s").style("transition-property","opacity").style("fill",this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#1A1A1A"),p=h.append("text").attr("x",150).attr("y",10).style("text-anchor","middle").style("font-weight",600),f=h.append("text").attr("x",150).attr("y",30).style("text-anchor","middle"),g=function(t){var i=n.aggregatedNumVehInBucket.indexOf(t);h.style("opacity",1);var o=(n.maxPrice-n.minPrice)/7,a=e.utilities.formatPrice(n.minPrice+i*o),r=e.utilities.formatPrice(n.minPrice+(i+1)*o);p.text("".concat(n.currency).concat(a," - ").concat(n.currency).concat(r));var s=0;n.aggregatedNumVehInBucket.forEach((function(t){return s+=t}));var l=0!==s?(n.aggregatedNumVehInBucket[i]/s*100).toFixed():"0";f.text("".concat(l)+e.flyoutData.strings.autosPriceInsightPriceRangeText)},m=function(){h.style("opacity",0),p.text(""),f.text("")};return s.selectAll("rect").attr("class","priceInsightBar").attr("fill","url(#linear-gradient)").attr("role","gridcell").attr("aria-label",(function(t,e){return i=t,o=e,a=(n.maxPrice-n.minPrice)/7,r=Math.round(n.minPrice+o*a),s=Math.round(n.minPrice+(o+1)*a),"".concat(i," listings within price range:")+" from $".concat(r.toString()," to $").concat(s.toString());var i,o,a,r,s})).on("focusin",(function(t,e){return g(e)})).on("focusout",(function(){return m()})).on("mouseover",(function(t,e){return g(e)})).on("mouseout",(function(){return m()})),s.append("text").attr("class","priceRangeText").attr("x",0).attr("y",160).attr("aria-label","minimum price: $".concat(this.utilities.formatPrice(n.minPrice))).style("text-anchor","start").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.minPrice))),s.append("text").attr("class","priceRangeText").attr("x",150).attr("y",160).attr("aria-label","average price: $".concat(this.utilities.formatPrice(n.avgPrice))).style("text-anchor","middle").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.avgPrice)," avg.")),s.append("text").attr("class","priceRangeText").attr("x",o).attr("y",160).attr("aria-label","maximum price: $".concat(this.utilities.formatPrice(n.maxPrice))).style("text-anchor","end").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.maxPrice))),i}},{key:"renderSeeMoreLink",value:function(t,e,n){var i=this,o=this.utilities.createElement("fluent-button",{className:"btnSeeMore"});o.textContent=this.flyoutData.strings.autosMarketplaceSeeAll;var a=this.flyoutData.common.currentDevice;o.addEventListener("click",(function(){i.pageHandlerModule.RecordAsUserAction(is.AUTOS_SEE_MORE_CLICKED);var t=new Yr(E.NavigatedToAutosMarketplace);i.logModule.LogInfoEvent(S.ButtonClick,"Navigation to Autos Marketplace",t),a===St.Desktop&&i.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/".concat(e,"/autos/marketplace/search?q=").concat(n,"&form=MARFL2"),cl.NEW_FOREGROUND_TAB)})),t.appendChild(o)}}]),n}(Bb),EI=xI;function AI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return TI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TI(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function TI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function DI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var kI=function(t){u(n,t);var e=DI(n);function n(t,i,o){var a;return s(this,n),(a=e.call(this,t,i,o)).flyoutData=i,a.utilities=o.viewModulesUtilities,a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a.assets=new bI,a}return r(n,[{key:"PostProcessingNotification",value:function(t,e){var n=this,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=this.getCompetingVehicle(i);if(o&&i){var a=this.utilities.createElement("DIV",{className:"btnActions"});a.id="divNotificationActions",a.slot="actions";var r=this.utilities.createPrimaryButton();r.style.width="calc(100% - 16px)",r.style.height="32px",r.textContent=this.flyoutData.strings.autosMarketplaceSeeMoreButton;var s=this.flyoutData.common.currentDevice;r.addEventListener("click",(function(){var t;n.pageHandlerModule.RecordAsUserAction(is.AUTOS_SEE_MORE_CLICKED);var e=new Yr(E.NavigatedToAutosMarketplace);n.logModule.LogInfoEvent(S.ButtonClick,"Navigate to Autos Marketplace from price insight notification",e);var i=(null===(t=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===t?void 0:t.entityName)||"";s===St.Desktop&&n.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/".concat(o.marketHint,"/autos/marketplace/search?q=").concat(i,"&form=MARFL2"),cl.NEW_FOREGROUND_TAB)})),a.appendChild(r),this.flyoutData.common.shopping.appendChild(a)}else if(this.oemPriceInsightData){var l=this.utilities.createElement("DIV",{className:"btnActions"});l.id="divNotificationActions",l.slot="actions";var c=this.utilities.createPrimaryButton();c.style.width="calc(100% - 16px)",c.style.height="32px",c.textContent=this.flyoutData.strings.autosOemPriceInsightSeeMoreButton;var u=this.flyoutData.common.currentDevice;c.addEventListener("click",(function(){var t=new Yr(E.NavigatedToAutosMarketplace);n.logModule.LogInfoEvent(S.ButtonClick,"Navigation to Autos Marketplace",t);var e=n.oemPriceInsightData.make+" "+n.oemPriceInsightData.model;u===St.Desktop&&n.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/en-us/autos/marketplace/search?q=".concat(e,"&form=MARFL3"),cl.NEW_FOREGROUND_TAB)})),l.appendChild(c),this.flyoutData.common.shopping.appendChild(l)}}},{key:"RenderNotification",value:function(){this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getNotificationStyles(),void 0,this.assets.getNotificationDarkModeStyles());var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=null==t?void 0:t.autosPriceInsight;if(t&&null!=e&&e.validData){this.flyoutData.common.shopping.classList.add("noSections");var n=this.utilities.createElement("DIV");n.classList.add("headerMargin");var i=this.utilities.createElement("H2");i.classList.add("title");var o="similar listings";e.make&&e.model&&(o=this.formatMakeModel(null==e?void 0:e.make)+" "+this.formatMakeModel(null==e?void 0:e.model)),i.textContent=this.flyoutData.strings.autosPriceInsightSectionTitle+o;var a=this.utilities.createElement("DIV");a.classList.add("priceDeltaContainer");var r=t.Price-e.avgPrice,s=this.utilities.createElement("IMG",{style:"display: flex; place-self: center; grid-column: 1 / 1;"});s.setAttribute("aria-hidden","true"),s.src=r<0?this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":r>0?this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg";var l=this.utilities.createElement("DIV",{className:"priceDeltaText"});l.textContent="$".concat(this.utilities.formatPrice(Math.abs(r)));var c=this.utilities.createElement("DIV",{className:"priceDeltaStatement"});c.textContent=r<0?this.flyoutData.strings.autosPriceInsightBelowAverage+" ".concat(e.currency).concat(this.utilities.formatPrice(e.avgPrice)):this.flyoutData.strings.autosPriceInsightAboveAverage+" ".concat(e.currency).concat(this.utilities.formatPrice(e.avgPrice)),a.append(s),a.append(l),a.append(c),a.setAttribute("aria-label",l.textContent+" "+c.textContent);var u=this.drawNotificationGraph(e);n.append(i),n.append(a),n.append(u),n.slot="header-content";var d=this.utilities.createNotificationModule(n,this.GetNotificationName(),this),h=new _(A.AutosPriceInsightRenderNotification);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight Notification",h),Promise.resolve(d)}if(this.oemPriceInsightData){this.flyoutData.common.shopping.classList.add("noSections");var p=this.utilities.createElement("DIV");p.classList.add("headerMargin");var f=this.utilities.createElement("DIV");f.classList.add("title");var g="similar listings";this.oemPriceInsightData.make&&this.oemPriceInsightData.model&&(g=this.formatMakeModel(this.oemPriceInsightData.make)+" "+this.formatMakeModel(this.oemPriceInsightData.model)),f.textContent=this.flyoutData.strings.autosPriceInsightSectionTitle+g;var m=this.drawNotificationGraph(this.oemPriceInsightData);p.append(f),p.append(m),p.slot="header-content";var v=this.utilities.createNotificationModule(p,this.GetNotificationName(),this),y=new _(A.AutosPriceInsightRenderNotification);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight Notification",y),Promise.resolve(v)}return Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e,n,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=!(null==i||null===(t=i.autosPriceInsight)||void 0===t||!t.validData);if(i&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_LOWER_PRICE_FOUND&&(null==i||null===(e=i.segment)||void 0===e?void 0:e.toLowerCase())===Gt.AUTOS&&o&&(null==i?void 0:i.autosNotificationScenario)===zt.PRICEINSIGHT&&this.flyoutData.common.openedWith===Tt.Auto&&!this.flyoutData.common.seeInfoFromPCNotification)return Promise.resolve(!0);var a=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n?void 0:n.retailerData,r=this.getAutosDataSelector(a);if(r){var s;try{s=JSON.parse(r).priceInsights}catch(t){var l=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error in parsing Autos OEM Price Insight data: ".concat(t.message),l)}if(s)return this.oemPriceInsightData=new Ic(s),Promise.resolve(!0)}return Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.AUTOSMARKETPLACE}},{key:"getCompetingVehicle",value:function(t){if(!t||!t.CompetingPrices)return null;var e,n=AI(t.CompetingPrices);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.ShouldOnTop)return i}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"drawNotificationGraph",value:function(t){var e=this,n=t,i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(!n)return i;var o=245,a=45,r=0,s=Xk(i).attr("role","grid").attr("width",o).attr("height",105).on("mouseenter",(function(){return r=Date.now()})).on("mouseleave",(function(t){e.sendAutosPriceInsightDwellTimeTelemery(r,A.AutosPriceInsightDwellTimeHover,"Autos Price Insight Notification - hover time over graph");var n=new _(A.AutosPriceInsightHovered);e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Autos Price Insight notification hovered",n)})),l=n.aggregatedNumVehInBucket,c=FA().domain(Qb(l.length)).rangeRound([0,o]).paddingInner(.18),u=AT().domain([0,Xb(l)]).range([0,a]);s.append("g").attr("role","row").attr("width","100%").attr("height","100%").selectAll("rect").data(l).enter().append("rect").attr("x",(function(t,e){return c(e)})).attr("y",(function(t){return 85-u(t)})).attr("width",c.bandwidth()).attr("height",(function(t){return u(t)})).attr("rx","3px").attr("ry","3px").style("cursor","pointer");var d=s.append("defs").append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient");d.append("stop").attr("class","stop-left").attr("offset","0%").attr("stop-color","rgba(39, 172, 34, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-mid").attr("offset","51.02%").attr("stop-color","rgba(242, 200, 17, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-right").attr("offset","89.75%").attr("stop-color","rgba(232, 58, 58, 0.71)").attr("stop-opacity",1);var h=s.append("g").attr("class","priceInfoText").style("opacity",0).style("transition-duration","0.4s").style("transition-property","opacity").style("font-size","12px"),p=h.append("text").attr("x",122.5).attr("y",10).style("text-anchor","middle").style("font-weight",600),f=h.append("text").attr("x",122.5).attr("y",25).style("text-anchor","middle"),g=function(t){var i=n.aggregatedNumVehInBucket.indexOf(t);h.style("opacity",1);var o=(n.maxPrice-n.minPrice)/7,a=e.utilities.formatPrice(n.minPrice+i*o),r=e.utilities.formatPrice(n.minPrice+(i+1)*o);p.text("".concat(n.currency).concat(a," - ").concat(n.currency).concat(r));var s=0;n.aggregatedNumVehInBucket.forEach((function(t){return s+=t}));var l=0!==s?(n.aggregatedNumVehInBucket[i]/s*100).toFixed():"0";f.text("".concat(l)+e.flyoutData.strings.autosPriceInsightPriceRangeText)},m=function(){h.style("opacity",0),p.text(""),f.text("")};return s.selectAll("rect").attr("class","priceInsightBar").attr("fill","url(#linear-gradient)").attr("role","gridcell").attr("aria-label",(function(t,e){return i=t,o=e,a=(n.maxPrice-n.minPrice)/7,r=Math.round(n.minPrice+o*a),s=Math.round(n.minPrice+(o+1)*a),"".concat(i," listings within price range:")+" from $".concat(r.toString()," to $").concat(s.toString());var i,o,a,r,s})).on("focusin",(function(t,e){return g(e)})).on("focusout",(function(){return m()})).on("mouseover",(function(t,e){return g(e)})).on("mouseout",(function(){return m()})),s.append("text").attr("class","priceRangeText").attr("x",0).attr("y",100).attr("aria-label","minimum price: $".concat(this.utilities.formatPrice(n.minPrice))).style("text-anchor","start").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.minPrice))),s.append("text").attr("class","priceRangeText").attr("x",122.5).attr("y",100).attr("aria-label","average price: $".concat(this.utilities.formatPrice(n.avgPrice))).style("text-anchor","middle").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.avgPrice)," avg.")),s.append("text").attr("class","priceRangeText").attr("x",o).attr("y",100).attr("aria-label","maximum price: $".concat(this.utilities.formatPrice(n.maxPrice))).style("text-anchor","end").style("font-size","12px").style("line-height","16px").text("".concat(n.currency).concat(this.utilities.formatPrice(n.maxPrice))),i}}]),n}(EI),II=kI;function wI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var PI=function(t){u(n,t);var e=wI(n);function n(t,i,o,a,r){var c;return s(this,n),f(l(c=e.call(this)),"CashbackCategory",void 0),f(l(c),"CashbackCommissionType",void 0),f(l(c),"CashbackCommissionValue",void 0),f(l(c),"Domain",void 0),f(l(c),"AffiliateNetworkName",void 0),c.CashbackCategory=null!=t?t:"",c.CashbackCommissionType=null!=i?i:"",c.CashbackCommissionValue=null!=o?o:"",c.Domain=null!=a?a:"",c.AffiliateNetworkName=null!=r?r:"",c}return r(n)}(g);function OI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var RI,MI,NI,LI,_I,FI,HI,BI,UI=function(t){u(n,t);var e=OI(n);function n(t,i,o,a){var r;return s(this,n),f(l(r=e.call(this)),"Points",void 0),f(l(r),"MaxPointsLimitPerDomainPerDay",void 0),f(l(r),"Domain",void 0),f(l(r),"TotalMaxPointsLimitPerDay",void 0),r.Points=t,r.MaxPointsLimitPerDomainPerDay=i,r.Domain=o,r.TotalMaxPointsLimitPerDay=a,r}return r(n)}(g),VI=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #divErrorCashbackActivation {\n            display: grid;\n            margin-bottom: 5px;\n            grid-template-columns: auto auto;\n            grid-gap: 10px;\n            justify-content: center;\n            width: 100%;\n        }\n        #divCashBackPopup {\n            display: flex;\n            flex-direction: row;\n            text-align: center;\n            justify-content: center;\n        }\n        #pCashBackDescription {\n            display: inline;\n            text-align: start;\n            margin-top: 0px;\n        }\n        h1 {\n            display: -webkit-box;\n            overflow-wrap: anywhere;\n            overflow: hidden;\n            -webkit-box-orient: vertical;\n            text-align: start;\n            margin-top: 0px;\n        }\n        #divPreviousCashBack {\n            display: grid;\n            grid-template-columns: 110px 1fr 80px;\n            column-gap: 8px;\n            box-sizing: border-box;\n            justify-content: center;\n            padding: 5px 0px;\n            padding-inline: 9px 5px;\n        }\n        #btnPreviousCashBack {\n            min-height: 64px;\n            height: auto;\n            padding: 0px;\n            margin-bottom: 10px;\n            background: transparent;\n            cursor: pointer;\n            border: 1px solid rgba(0, 0, 0, 0.09);\n            border-radius: 4px;\n        }\n        #btnPreviousCashBack:focus {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #ffffff inset;\n        }\n        .activated {\n            border-color: transparent;\n            background: rgba(0, 0, 0, 0.07);\n        }\n        .activated:hover {\n            outline: 2px solid transparent;\n            background-color: ButtonFace;\n            color: ButtonText;\n            border-color: ButtonText;\n        }\n        .activated:focus {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #ffffff inset;\n        }\n        .divNotificationContent {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 2;\n            margin-left: 27px;\n            margin-right: 27px;\n            justify-content: center;\n        }\n        .pcbtooltip {\n            display: none;\n        }\n        #btnGotIt {\n            border: 1.5px solid;\n            border-radius: 8px;\n            border-color: #04AA6D;\n            padding: 14px 28px;\n            font-weight: 600;\n            cursor: pointer;\n            width: 100%;\n            height: 48px;\n          }\n        #productTitle:hover > .pcbtooltip {\n            display: block;\n            position: absolute;\n            top: 10px;\n            right: 26px;\n            font-size: 10px;\n            background: #FFFFFF;\n            line-height: 12px;\n            width: 137px;\n            text-align: center;\n            color: rgba(0, 0, 0, 0.6);\n            box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.2), 0px 6.4px 14.4px rgba(0, 0, 0, 0.13), 0px 0px 5.6px rgba(0, 0, 0, 0.11);\n            border-radius: 4px;\n            padding: 5px;\n        }\n        #divCashBackContent {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 2;\n            margin: 0px;\n            justify-content: center;\n            align-items: center;\n        }\n        .spanCommisionValue {\n            display: flex;\n            height: 30px;\n            line-height: 28px;\n            font-size: 24px;\n            background: #0078D4;\n            color: #fff;\n            font-weight: 600;\n            float: left;\n        }\n        .divCommissionValue {\n            display: inline-block;\n            margin: 0px;\n            vertical-align: middle;\n        }\n        .h2RebatesTitle {\n            display: inline-block;\n            margin: 0px;\n            font-weight: 500;\n            font-size: 24px;\n            line-height: 36px;\n            vertical-align: middle;\n            text-align: center;\n        }\n        .gradient {\n            color: transparent;\n            background:linear-gradient(92.78deg, #00D4A1 -58.01%, #0048D4 44.73%, #6A00D4 141.23%);\n            -webkit-background-clip: text\n        }\n        @media (forced-colors: active) {\n            .activated {\n                background-color: Highlight;\n                forced-color-adjust: none;\n                color: highlightText;\n            }\n            .activated: focus {\n                box-shadow: 0 0 0 2px HighlightText inset;\n                border-color: buttonText;\n            }\n            .imgCBTag {\n                display: none;\n            }\n        }\n        #txtPersonalizedProduct {\n            text-align: center;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        .fixedColorAnchor:hover::part(content)::before {\n            background: #FFFFFF;\n        }\n        .fixedColorAnchor {\n            color: #FFFFFF;\n        }\n        .btnTooltip svg path {\n            fill: buttonText;\n        }\n    "}},{key:"getDarkModeStyles",value:function(){return"\n        .activated {\n            background: rgba(255, 255, 255, 0.09);\n            color: #FFFFFF;\n        }\n        #btnPreviousCashBack {\n            border: 1px solid #FFFFFF;\n        }\n        "}},{key:"getSmallTagLeft",value:function(){return mt.getTrustedHTML(RI||(RI=j(['<svg xmlns="http://www.w3.org/2000/svg" width="5" height="24" viewBox="0 0 5 24" fill="none">\n        <path d="M0 5C0 2.23858 2.23858 0 5 0V0V24V24C2.23858 24 0 21.7614 0 19V5Z" fill="#036AC4"/>\n        </svg>'])))}},{key:"getSmallTagRight",value:function(){return mt.getTrustedHTML(MI||(MI=j(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 12 24" fill="none">\n        <path d="M4.49923 22.2009C3.54926 23.3409 2.14202 24 0.658125 24H0V0H0.658125C2.14202 0 3.54926 0.659115 4.49923 1.79908L10.3326 8.79908C11.8778 10.6533 11.8778 13.3467 10.3326 15.2009L4.49923 22.2009Z" fill="#036AC4"/>\n        </svg>'])))}},{key:"getTagLeft",value:function(){return mt.getTrustedHTML(NI||(NI=j(['<svg xmlns="http://www.w3.org/2000/svg" width="7" height="30" viewBox="0 0 7 30" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.0003 0H3.5C1.567 0 0 1.567 0 3.5V26.5C0 28.433 1.567 30 3.5 30H7.0003V0Z" fill="#0078D4"/>'])))}},{key:"getTagRight",value:function(){return mt.getTrustedHTML(LI||(LI=j(['<svg xmlns="http://www.w3.org/2000/svg" width="15" height="30" viewBox="0 0 15 30" fill="none"><path fill-rule="evenodd" clip-rule:"evenodd" d="M0,30h0.6c1,0,1.9-0.4,2.5-1.1L14,17.4c1.3-1.4,1.3-3.5,0-4.8L3.1,1.1C2.5,0.4,1.5,0,0.6,0H0V30z" fill="#0078D4"/>'])))}},{key:"getPersonalizedTagLeft",value:function(){return mt.getTrustedHTML(_I||(_I=j(['<svg width="8" height="24" viewBox="0 0 8 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 4C0 1.79086 1.79086 0 4 0H8V24H4C1.79086 24 0 22.2091 0 20V4Z" fill="#0078D4"/></svg>'])))}},{key:"getPersonalizedTagRight",value:function(){return mt.getTrustedHTML(FI||(FI=j(['<svg width="13" height="24" viewBox="0 0 13 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H0.0206958C1.03545 0 2.01228 0.385677 2.75332 1.07891L10.9799 8.77477C12.6313 10.3196 12.6748 12.9252 11.0757 14.5243L2.73137 22.8686C2.00697 23.593 1.02446 24 0 24V24V0Z" fill="#0078D4"/></svg>'])))}},{key:"getErrorIcon",value:function(){return mt.getTrustedHTML(HI||(HI=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM8 10.5C8.41421 10.5 8.75 10.8358 8.75 11.25C8.75 11.6642 8.41421 12 8 12C7.58579 12 7.25 11.6642 7.25 11.25C7.25 10.8358 7.58579 10.5 8 10.5ZM8 4C8.24546 4 8.44961 4.17688 8.49194 4.41012L8.5 4.5V9C8.5 9.27614 8.27614 9.5 8 9.5C7.75454 9.5 7.55039 9.32312 7.50806 9.08988L7.5 9V4.5C7.5 4.22386 7.72386 4 8 4Z" fill="#CC0000"/></svg>'])))}},{key:"getConfirmationInfoIcon",value:function(){return mt.getTrustedHTML(BI||(BI=j(['<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path opacity="0.4" d="M5.4 6.6C5.4 6.26863 5.66863 6 6 6C6.33137 6 6.6 6.26863 6.6 6.6V8.4C6.6 8.73137 6.33137 9 6 9C5.66863 9 5.4 8.73137 5.4 8.4V6.6ZM6 3.3C5.50294 3.3 5.1 3.70294 5.1 4.2C5.1 4.69706 5.50294 5.1 6 5.1C6.49706 5.1 6.9 4.69706 6.9 4.2C6.9 3.70294 6.49706 3.3 6 3.3ZM0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6ZM6 1.2C3.34903 1.2 1.2 3.34903 1.2 6C1.2 8.65097 3.34903 10.8 6 10.8C8.65097 10.8 10.8 8.65097 10.8 6C10.8 3.34903 8.65097 1.2 6 1.2Z" fill="black" fill-opacity="0.83"/>\n        </svg>'])))}}]),t}();function GI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var WI=function(t){u(y,t);var n,i,a,c,d,h,p,g,m,v=GI(y);function y(t,e,n,i){var o;return s(this,y),f(l(o=v.call(this)),"assets",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"stateManagement",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"currencySymbol","$"),f(l(o),"commonAssets",void 0),f(l(o),"stylesAdded",!1),f(l(o),"estimatedCashbackData",void 0),o.logModule=n.logModule,o.pageHandlerModule=n.pageHandlerModule,o.stateManagement=t,o.flyoutData=e,o.utilities=n.viewModulesUtilities,o.assets=new VI,o.commonAssets=i,o.setInitialStatesAndListeners(),o}return r(y,[{key:"setInitialStatesAndListeners",value:function(){var t=this;this.stateManagement.addEventListener(hn.CreateCommissionArrow,(function(e){e.detail&&e.detail.callback&&(t.stylesAdded||t.utilities.applyStyles(t.flyoutData.common.shopping,t.assets.getStyles(),void 0,t.assets.getDarkModeStyles()),t.createCommissionArrow(!1,e.detail.callback))})),this.stateManagement.addEventListener(hn.StyleProcessingState,(function(e){e.detail&&e.detail.target&&t.styleProcessingState(e.detail.target)})),this.stateManagement.addEventListener(hn.onRebatesTelemetryFail,(function(e){if(e.detail&&e.detail.status){var n=new _(A.ErrorCashBackActivation);t.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Cashback activation error - ".concat(e.detail.status),n)}})),this.stateManagement.addEventListener(hn.onRebatesTelemetrySuccess,(function(){var e=new _(A.CashBackActivated);t.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Cashback activated",e)})),this.stateManagement.addEventListener(hn.rebatesSignInPendingSuccess,(function(){t.updateFlyoutSuccessStatus()})),this.stateManagement.addEventListener(hn.rebatesSignInFail,(function(){t.updateFlyoutFailStatus()})),this.stateManagement.addEventListener(hn.CreateCBLearnMore,(function(e){e.detail&&e.detail.callback&&(t.stylesAdded||t.utilities.applyStyles(t.flyoutData.common.shopping,t.assets.getStyles(),void 0,t.assets.getDarkModeStyles()),t.createSeeOffersButton(e.detail.callback))}))}},{key:"GetModuleName",value:function(){return Rt.CASHBACK}},{key:"CalculateRanking",value:function(){var t=this.flyoutData.dataStoreModule.CashBackData;return t?t.isCashBackActivated?Ct.InformRetailer:Ct.SaveMoneyRetailer:Ct.Unknown}},{key:"ShouldRenderModule",value:(m=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=this.flyoutData.dataStoreModule.CashBackData)&&this.pageHandlerModule.TriggerExperiment(Be.signinRebates),!Hl.isCashbackEstimateEnabled(this.flyoutData)){t.next=14;break}return t.next=5,this.pageHandlerModule.GetStorageValue("EstimatedCashback:CartData");case 5:return u=t.sent,t.next=8,Hl.getEstimatedCashbackData(u,this.pageHandlerModule,this.flyoutData.common.domain);case 8:if(this.estimatedCashbackData=t.sent,this.estimatedCashbackData){t.next=14;break}return t.next=12,this.pageHandlerModule.GetStorageValue("EstimatedCashback:Data");case 12:d=t.sent;try{this.estimatedCashbackData=JSON.parse(null===(h=JSON.parse(null==d||null===(p=d.value)||void 0===p?void 0:p.stringValue))||void 0===h?void 0:h.value)}catch(t){}case 14:return!(f=null!==(e=null==c?void 0:c.canRenderCashback)&&void 0!==e&&e)&&null!=c&&null!==(n=c.highestCashBackCategory)&&void 0!==n&&n.commissionValue&&(y=new _(A.CashBackWillNotRender),this.logModule.LogInfoEvent(S.EdgeFlyoutStatusDiagnostic," isRebatesUser: "+(null!==(g=null==c||null===(m=c.userRebatesResponse)||void 0===m?void 0:m.isRebatesUser)&&void 0!==g&&g)+" isRebatesSupportedDomain: "+(null!==(v=null==c?void 0:c.IsRebatesSupportedDomain)&&void 0!==v&&v),y)),C=null!==(i=(null===(a=this.flyoutData.dataStoreModule.CouponData)||void 0===a?void 0:a.isCheckoutPageWithAutoApply)&&!(null!==(r=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==r&&r.isCashBackActivated)&&!(null!==(s=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==s&&null!==(l=s.userRebatesResponse)&&void 0!==l&&l.latestCashbackApproved))&&void 0!==i&&i,b=f&&!C,f&&(this.stylesAdded=!0,this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles())),t.abrupt("return",Promise.resolve(b));case 20:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"populateActiveCashbackList",value:(g=e(o().mark((function t(e,n,i,a){var r,s,l,c,u,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}r=0,a.length>0&&(r=a.length),s=0,n&&(l=bt.PREVIOUS_CASHBACK-1,(c=null==e?void 0:e.querySelectorAll("#productRow"+l))&&c.length>0&&(c[0].style.borderBottom="1px solid rgba(0, 0, 0, 0.04)")),n?s=bt.PREVIOUS_CASHBACK:r>bt.PREVIOUS_CASHBACK&&(r=bt.PREVIOUS_CASHBACK),u=s;case 7:if(!(u<r)){t.next=18;break}if(null==(d=a[u])||!d.scope||""===d.scope){t.next=15;break}return t.next=12,this.createPersonalizedCashbackRow(d,u);case 12:h=t.sent,u===r-1&&(h.style.borderBottom=""),e.appendChild(h);case 15:u++,t.next=7;break;case 18:case 21:return t.abrupt("return",Promise.resolve());case 22:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return g.apply(this,arguments)})},{key:"logUserEngagement",value:function(){this.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK);var t=new Yr(E.ActivateCashBack);this.logModule.LogInfoEvent(S.ButtonClick,"Cashback Got it button click",t,dn.CouponImpressionId)}},{key:"canLogUserInteraction",value:(p=e(o().mark((function t(){var e,n,i,a,r,s,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=6;break}i={value:{stringValue:e.UserImpression}},n=i,t.next=9;break;case 6:return t.next=8,this.pageHandlerModule.GetStorageValue("UserImpression");case 8:n=t.sent;case 9:return a=!0,n&&""!==n&&(s=n.value)&&(r=null!==(l=s.stringValue)&&void 0!==l?l:null,c=parseInt(r,10),r&&""!==r&&Date.now()-new Date(c).getTime()<864e5&&(a=!1)),t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"renderModule",value:(h=e(o().mark((function t(){var n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,x,T,D,k,I,w,P,O,R,M,N,L,F,H,B,U,V,G,W,$,z,K,Y,j,q,Z,X,J,Q,tt,et,nt,it,ot,at,rt,st,lt,ct,ut,dt,ht,pt,ft,gt,mt,vt=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stylesAdded||this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),!(n=this.flyoutData.dataStoreModule.CashBackData)){t.next=160;break}if((c=document.createElement("msft-edge-shopping-section")).id="cashBackSection",c.style.width="100%",c.accordion=!0,c.expanded=!1,u=this.utilities.createElement("DIV",{id:"divCashBackPopup"}),this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)||(u.style.padding="0px 16px",this.utilities.shouldRenderSmallNotification()&&(u.style.padding="0px 20px")),this.flyoutData.common.isPane&&(u.style.padding="20px 10px"),d=this.retrieveCashBackAmount(n.personalizedCashback),h=null!==(i="storewide"===(null===(a=n.highestCashBackCategory)||void 0===a||null===(r=a.category)||void 0===r?void 0:r.toLowerCase())||"storewide"===(null===(s=n.personalizedCashback)||void 0===s||null===(l=s.scope)||void 0===l?void 0:l.toLowerCase()))&&void 0!==i&&i,""===d){t.next=160;break}if((C=this.utilities.createElement("DIV",{className:"txtMedium"})).id="divCashBackContent",!n.isPersonalizedCashback){t.next=131;break}if(D=this.flyoutData,!((null===(b=n.adsCashback)||void 0===b?void 0:b.length)>0&&"LdClickData"===(null===(x=n.adsCashback[0])||void 0===x?void 0:x.scope)||"LdClickDataStorewide"===(null===(T=n.adsCashback[0])||void 0===T?void 0:T.scope))){t.next=25;break}null!=(I=this.createFallbackPcbHeader(n.adsCashback[0],null==n||null===(k=n.userRebatesResponse)||void 0===k?void 0:k.isRebatesUser))&&((w=I.querySelector("span"))&&(w.style.whiteSpace="normal",w.style.fontWeight="450"),C.appendChild(I)),t.next=129;break;case 25:if(!this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)||this.flyoutData.common.openedWith!==Tt.Auto){t.next=118;break}P=n.adsCashback[0],(O=this.utilities.createElement("DIV")).style.width="254px",(R=this.utilities.createElement("DIV")).style.display="grid",R.style.gridTemplateColumns="50% 50%",R.style.height="100px",(M=this.utilities.createElement("DIV")).style.display="flex",M.style.flexDirection="column",M.style.alignItems="flex-start",(N=this.utilities.createElement("DIV")).style.fontSize="14px",N.style.lineHeight="20px",N.style.fontWeight="600",N.textContent=this.flyoutData.strings.cashback,M.appendChild(N),(L=this.utilities.createElement("DIV")).style.fontSize="32px",L.style.lineHeight="40px",L.style.fontWeight="600",L.style.color="rgba(0, 138, 33, 1)",L.textContent=this.retrieveCashBackAmount(P),M.appendChild(L),(F=this.utilities.createElement("DIV")).style.display="flex",F.style.flexDirection="row",F.style.justifyContent="center",F.style.alignItems="center",F.style.padding="0px 6px 1px",F.style.gap="6px",F.style.width="55px",F.style.background="linear-gradient(78.64deg, #0060EF 3.39%, #52B9E5 134.67%)",F.style.borderRadius="3px",F.style.marginTop="9px",(H=this.utilities.createElement("DIV")).style.lineHeight="16px",H.style.fontSize="10px",H.style.fontWeight="700",H.style.display="flex",H.style.alignItems="center",H.style.letterSpacing="-0.01em",H.style.color="#FFFFFF",H.style.textShadow="0px 0px 1px rgba(0, 0, 0, 0.17)",H.textContent=this.flyoutData.strings.forYou,F.appendChild(H),M.appendChild(F),R.appendChild(M),(B=this.utilities.createElement("DIV")).style.display="flex",B.style.flexDirection="column",B.style.alignItems="flex-end",B.appendChild(this.createProductImage(P)),R.appendChild(B),(U=this.utilities.createElement("DIV")).style.width="100%",U.style.height="1px",U.style.background="#EBEBEB",U.style.flex="none",U.style.order="2",U.style.flexGrow="0",U.style.zIndex="2",O.appendChild(R),O.appendChild(U),(V=this.utilities.createElement("DIV")).style.display="grid",V.style.gridTemplateColumns="50% 50%",V.style.fontWeight="400",V.style.fontSize="14px",V.style.lineHeight="20px",V.style.marginTop="10px",(G=this.utilities.createElement("DIV")).style.textAlign="left",(W=this.utilities.createElement("SPAN")).style.color="rgba(196, 43, 28, 1)",W.textContent=this.getTimeDifference(Date.now(),1e3*P.expireTimeEpoch),this.utilities.populateSingleChildHtml(G,this.flyoutData.strings.cbExpiryDateTime,W),V.appendChild(G),($=this.utilities.createElement("DIV")).style.display="flex",$.style.flexDirection="column",$.style.alignItems="flex-end",n.adsCashback.length-1>0&&($.textContent=this.utilities.replaceValueInKey("previousOffers",this.flyoutData.strings.previousOffers,(n.adsCashback.length-1).toString())),V.appendChild($),O.appendChild(V),C.appendChild(O),document.querySelector("#divContentWrapper").style.width="280px",z=new CustomEvent(hn.ModulesRendered),this.stateManagement.dispatchEvent(z),t.next=129;break;case 118:for(K=function(t){var e=bt.PREVIOUS_CASHBACK;return t&&D.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},Y=[],j=0;j<(null===(q=n.adsCashback)||void 0===q?void 0:q.length);j++)null==(J=n.adsCashback[j])||!J.scope||""===J.scope||0!==j&&"storewide"!==(null==J||null===(Z=J.scope)||void 0===Z?void 0:Z.toLowerCase())&&(null==J?void 0:J.scope)===(null===(X=n.adsCashback[j-1])||void 0===X?void 0:X.scope)||Y.push(J);return C.style.alignItems="normal",Q=this.utilities.createElement("DIV"),t.next=125,this.populateActiveCashbackList(Q,!1,!1,Y);case 125:this.utilities.createCommonListStructure(Q,"",Y,this.GetModuleName(),K,this.populateActiveCashbackList.bind(this)),C.appendChild(Q),(tt=C.querySelector(".btnSeeMore"))&&tt.addEventListener("click",(function(){vt.pageHandlerModule.RecordAsUserAction(is.PERSONALIZED_CASHBACK_SEEMORE)}));case 129:et=new _(A.PersonalizedCashbackList),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Personalized cashback rendered",et);case 131:if((nt=(null===(p=this.flyoutData.dataStoreModule.CouponData)||void 0===p?void 0:p.isCheckoutPageWithAutoApply)&&!(null!==(f=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==f&&f.isCashBackActivated)&&!(this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_ORGANIC))||n.isPersonalizedCashback||(it=this.createCashBackTitle(n.isCashBackActivated,h,n),C.appendChild(it)),Hl.isCashbackEstimateActive(this.flyoutData,this.estimatedCashbackData,this.pageHandlerModule)&&((ot=this.utilities.createElement("DIV",{style:"font-style: normal;font-weight: 600;font-size: 32px;line-height: 32px;color: #008A21;"})).textContent=this.estimatedCashbackData.currency+this.estimatedCashbackData.cashbackValue,C.appendChild(ot)),at=this.stateManagement.getState(pn.isAutoApplyVisible),n.isSignInSupportedDomainCashBack&&at&&((rt=this.utilities.createPrimaryButton()).id="rebatesButton",this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_ORGANIC&&(rt.style.width="336px"),this.renderCurrentButtonState(rt),this.pageHandlerModule.TriggerExperiment(Be.rewardFlyout),rt.addEventListener("click",function(){var t=e(o().mark((function t(e){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n||!n.isSignInSupportedDomainCashBack){t.next=9;break}return i=new Yr(E.ActivateCashBack),vt.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK),vt.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK_NEW),vt.logModule.LogInfoEvent(S.ButtonClick,"Sign in started",i,dn.CouponImpressionId),t.next=7,vt.pageHandlerModule.ActivateRebates(!0);case 7:t.next=13;break;case 9:return t.next=11,vt.handleActivateCashbackClick(rt,e,"Cash back activation started");case 11:t.sent?vt.styleActivatedState(rt):vt.styleDefaultState(rt,vt.flyoutData.strings.cbActivateButtonRefresh);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C.appendChild(rt)),nt||(st=this.createSeeOffersButton()),this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC?st&&(this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC?C.appendChild(st):((ct=this.utilities.createElement("DIV")).style.display="flex",ct.id="cbButtonSection",ct.style.flexDirection="column",ct.style.marginTop="10px",ct.style.marginBottom="2px",C.appendChild(ct))):((lt=this.utilities.createElement("DIV")).style.display="flex",lt.id="cbButtonSection",lt.style.flexDirection="column",C.appendChild(lt)),n.isSignInSupportedDomainCashBack&&(ut=this.createPrivacyMessage())&&C.appendChild(ut),u.appendChild(C),c.appendChild(u),dt=this.CreateModule(c,wt.CASHBACK,Rt.CASHBACK,_t.CONTEXTUAL,Ft.BLOCK),this.shouldRenderPreviousCashback()&&(n.userRebatesResponse&&n.userRebatesResponse.isRebatesUser&&dt&&n.userRebatesResponse.latestCashbackApproved&&this.renderPreviousCashBackModule(dt.element,n),u.style.marginBottom="10px",nt&&this.flyoutData.common.isPane&&(u.style.display="none")),n&&n.highestCashBackCategory?(ht=n.highestCashBackCategory.category,pt=n.highestCashBackCategory.commissionType,ft=n.highestCashBackCategory.commissionValue):n&&n.personalizedCashback&&(ht=n.personalizedCashback.scope,pt=n.personalizedCashback.commissionType,ft=n.personalizedCashback.commissionValue),gt=new PI(ht,pt,ft,this.flyoutData.common.domain,n.affiliateNetwork),this.logModule.LogInfoEvent(S.CashbackInfo,"User saw cashback info: userRebatesResponse?: ".concat(!!n.userRebatesResponse," isRebatesUser: ").concat(null!==(g=null===(m=n.userRebatesResponse)||void 0===m?void 0:m.isRebatesUser)&&void 0!==g&&g," isRebatesSupportedDomain: ").concat(null!==(v=n.IsRebatesSupportedDomain)&&void 0!==v&&v),gt,dn.CouponImpressionId),this.logModule.LogInfoEvent(S.CashbackInfo,"User saw cashback info part2: merchantFullName: ".concat(n.merchantFullName," isSignInSupportedDomain: ").concat(null!==(y=n.isSignInSupportedDomain)&&void 0!==y&&y),gt,dn.CouponImpressionId),this.stateManagement.addEventListener(hn.onCashbackActivationError,(function(t){vt.renderErrorState(t.detail.cashbackButton,t.detail.slot)})),this.stateManagement.addEventListener(hn.onCashBackActivated,(function(){if(!0===c.accordion){var t,e=null===(t=c.shadowRoot)||void 0===t?void 0:t.querySelector("span[part=title]");if(e){var n=vt.flyoutData.strings.cbRebatesOn,i=vt.utilities.createElement("B");i.textContent=n;var o=vt.flyoutData.strings.cbCashBackOnOff;vt.utilities.populateSingleChildHtml(e,o,i)}}})),this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES){t.next=159;break}return t.next=152,this.canLogUserInteraction();case 152:if(!t.sent){t.next=159;break}return this.logUserEngagement(),(mt=new ds).stringValue=Date.now().toString(),t.next=159,this.pageHandlerModule.SetStorageValue("UserImpression",mt);case 159:return t.abrupt("return",Promise.resolve(dt));case 160:return t.abrupt("return",Promise.resolve(null));case 161:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"shouldRenderPreviousCashback",value:function(){var t=this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_ORGANIC||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES;return!(t=t||this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)&&this.flyoutData.common.openedWith===Tt.Auto)}},{key:"createPersonalizedCashbackRow",value:(d=e(o().mark((function t(n,i){var a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T,D,k,I,w,P,O,R=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(l=this.utilities.createElement("A",{id:"productRow"+i})).style.textDecoration="none",l.style.borderBottom="1px solid rgba(0, 0, 0, 0.04)",l.target="_blank",l.href="#",n.productUrl&&""!==n.productUrl?l.addEventListener("click",function(){var t=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),R.pageHandlerModule.RecordAsUserAction(is.CLICK_PCB_CROSS_SESSION),R.pageHandlerModule.NavigateToUrl(n.productUrl+"&fromAdsFlyout=1");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):l.style.pointerEvents="none",(c=this.utilities.createElement("DIV")).style.display="flex",c.style.columnGap="16px",c.style.fontWeight="bold",c.style.marginTop="16px",c.style.marginLeft="10px",0!==i&&"storewide"===(null===(a=n.scope)||void 0===a?void 0:a.toLowerCase())&&(c.style.borderTop="1px solid rgba(0, 0, 0, 0.06)",c.style.marginTop="10px",c.style.paddingTop="6px"),this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                margin-top: 0px;\n                mragin-left: 0px;\n            }"),"Storewide"!==(null==n?void 0:n.scope)&&(u=this.utilities.createElement("IMG",{id:"productImage"}),n.imageUrl&&""!==n.imageUrl?(u.src=n.imageUrl,n.imageUrl.indexOf("bing.com")>0?u.src=n.imageUrl:u.src="https://www.bing.com"+n.imageUrl):(u.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.common.domain,".png"),c.style.marginBottom="10px",u.style.borderRadius="8px"),u.setAttribute("aria-label",n.scope),u.style.height="100%",u.style.width="100%",u.style.objectFit="contain",(d=this.utilities.createElement("A")).target="_blank",d.style.width="100px",d.style.height="100px",d.style.zIndex="0",d.style.marginBottom="16px",(h=this.utilities.createElement("DIV")).style.width="100px",h.style.height="100px",h.style.background="rgba(32,33,36,0.039)",h.style.borderRadius="8px",(p=this.utilities.createElement("DIV")).style.width="100px",p.style.height="100px",p.style.zIndex="-1",p.style.position="relative",p.appendChild(u),h.appendChild(p),d.appendChild(h),c.appendChild(d)),(f=this.utilities.createElement("DIV",{id:"productTitleCol"})).style.display="flex",f.style.flexDirection="column",f.style.alignItems="start",f.style.rowGap="7.5px",n.imageUrl&&""!==n.imageUrl?((m=this.utilities.createElement("DIV",{id:"favIconRow"})).style.display="flex",m.style.columnGap="5px",v=this.utilities.createElement("DIV",{id:"productTitle"}),y=this.utilities.createElement("SPAN"),(null===(g=n.scope)||void 0===g?void 0:g.length)>50?y.textContent=n.scope.substring(0,50)+"...":y.textContent=n.scope,y.style.position="relative",y.style.top="-5px",v.appendChild(y),v.className="txtSmall pcbicon",v.style.fontSize="12px",v.style.fontWeight="normal",v.style.textAlign="left",m.appendChild(v),f.appendChild(m)):f.style.justifyContent="center",C=null!==(r="storewide"===(null==n||null===(s=n.scope)||void 0===s?void 0:s.toLowerCase()))&&void 0!==r&&r,b=this.utilities.createElement("DIV",{id:"cashbackStr"}),0!==i?b.textContent=C?this.utilities.replaceValueInKey("cbCommissionStr",this.flyoutData.strings.pcbCommissionStoreWide,this.retrieveCashBackAmount(n),"".concat(this.currencySymbol).concat(n.minPurchaseValue)):this.utilities.replaceValueInKey("cbCommissionStr",this.flyoutData.strings.cbCommissionStr,this.retrieveCashBackAmount(n)):(S=C?this.createPersonalizedCashbackTitle(null===(x=this.flyoutData.dataStoreModule)||void 0===x||null===(E=x.CashBackData)||void 0===E||null===(A=E.userRebatesResponse)||void 0===A?void 0:A.isRebatesUser,C,this.retrieveCashBackAmount(n),n.minPurchaseValue):this.createPersonalizedCashbackTitle(null===(T=this.flyoutData.dataStoreModule)||void 0===T||null===(D=T.CashBackData)||void 0===D||null===(k=D.userRebatesResponse)||void 0===k?void 0:k.isRebatesUser,C,this.retrieveCashBackAmount(n)),b.textContent=S.textContent,"walmart.com"===this.flyoutData.common.domain&&(I=this.utilities.createElement("DIV"),(w=this.utilities.createElement("SPAN")).textContent=this.flyoutData.strings.walmartMessage,w.style.fontWeight="400",w.style.color="rgba(0, 0, 0, 0.55)",I.appendChild(w),b.appendChild(I))),b.style.fontSize="12px",b.style.lineHeight="20px",b.style.textAlign="left",b.style.color="#000000",f.appendChild(b),(P=this.utilities.createElement("DIV",{id:"dateTime"})).style.background="linear-gradient(90deg, rgba(255, 236, 210, 0.3) 0%, rgba(251, 225, 217, 0.3) 100%), #F5F5F5",P.style.borderRadius="4px",P.style.width="106px",P.style.height="20px",P.style.display="flex",P.style.alignItems="center",P.style.justifyContent="center",(O=this.utilities.createElement("DIV")).style.fontSize="12px",O.style.lineHeight="14px",O.style.fontFamily="Segoe UI",O.style.color="rgba(201, 69, 69, 1)",O.textContent=this.utilities.replaceValueInKey("cbExpiryDateTime",this.flyoutData.strings.cbExpiryDateTime,this.getTimeDifference(Date.now(),1e3*n.expireTimeEpoch)),P.appendChild(O),f.appendChild(P),c.appendChild(f),l.appendChild(c),t.abrupt("return",l);case 48:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"createFallbackPcbHeader",value:function(t,e){var n=this.utilities.createElement("DIV");return"LdClickData"===(null==t?void 0:t.scope)?n.textContent=this.getPersonalizedCashbackHeaderText(e,!1,this.retrieveCashBackAmount(t)):"LdClickDataStorewide"===(null==t?void 0:t.scope)&&this.getPersonalizedCashbackHeaderText(e,!0,this.retrieveCashBackAmount(t),t.minPurchaseValue),n}},{key:"getTimeDifference",value:function(t,e){var n=e-t,i=6e4,o=36e5,a=n/o;a|=0;var r=(n%=o)/i;return n%=i,r|=0,this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)&&this.flyoutData.common.openedWith===Tt.Auto?a+":"+r:a+"h "+r+"m"}},{key:"getStorageData",value:(c=e(o().mark((function t(e){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetStorageValue("CashbackProductUrl:"+e);case 2:if(!(n=t.sent)){t.next=7;break}if(null==(i=n)||!i.value){t.next=7;break}return t.abrupt("return",i.value.stringValue);case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"setStorageData",value:function(t,e){var n=new ds;n.stringValue=e,this.pageHandlerModule.SetStorageValue("CashbackProductUrl:"+t,n)}},{key:"populateMainHeader",value:function(){var t=this;if(this.flyoutData.common.shopping){var e,n=new CustomEvent(hn.CreateTrivia,{detail:{parent:this.flyoutData.common.shopping}});this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PERSONALIZED_CASHBACK||this.flyoutData.common.isPane||this.stateManagement.dispatchEvent(n);var i=this.flyoutData.common.shopping.querySelector("#cashBackSection");i&&(this.flyoutData.common.isPane||(i.style.marginTop="10px"),i.slot="header-content");var o=this.flyoutData.dataStoreModule.CashBackData;if(o&&(o.isCashBackActivated||o.isPersonalizedCashback&&(!this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)||this.flyoutData.common.openedWith!==Tt.Auto)&&null!=o&&null!==(e=o.userRebatesResponse)&&void 0!==e&&e.isRebatesUser)&&this.flyoutData.common.openedWith===Tt.Auto){var a=this.utilities.createElement("button");a.id="btnGotIt",a.style.marginTop="4px",a.setAttribute("role","presentation"),a.slot="actions",a.style.background=this.flyoutData.common.currentTheme===xt.Dark?"#3b3b3b":"#FFFFFF",a.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#02d9c8":"#008076";var r=this.utilities.createElement("DIV");r.setAttribute("role","presentation"),r.appendChild(a),a.textContent=this.flyoutData.strings.commonGotIt,i.appendChild(r),a.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK);var e=new Yr(E.ActivateCashBack);t.logModule.LogInfoEvent(S.ButtonClick,"Cashback Got it button click",e,dn.CouponImpressionId),t.pageHandlerModule.DismissPopup()}))}}}},{key:"PostProcessing",value:function(t,e,n){var i,o,a,r;0!==e&&this.SetSectionTitle(n);var s=this.flyoutData.dataStoreModule.CashBackData,l=this.stateManagement.getState(pn.isAutoApplyVisible),c=null!==(i=s&&!s.isCashBackActivated&&!l&&(!s.isPersonalizedCashback||!(null!=s&&null!==(o=s.userRebatesResponse)&&void 0!==o&&o.isRebatesUser)))&&void 0!==i&&i,u=null!==(a=null==s?void 0:s.shouldRenderCashBackNotification)&&void 0!==a&&a,d=new _(A.ActivateCashBackButton);if(this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Cash back button will be rendered: "+(c||u)+" cashBackData?: "+(!!s||"undefined")+" cash back activated: "+(null!==(r=null==s?void 0:s.isCashBackActivated)&&void 0!==r&&r)+" cashBackModule?: true is at checkout and merge buttons is on: "+l,d),c&&this.createActivateButton(e,n),(null==s?void 0:s.canRenderCashback)&&this.HidePreviousCashbackFromShopping(),this.flyoutData.common.openedWith===Tt.Auto&&(this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_ORGANIC)){var h=this.flyoutData.common.shopping.querySelector("#seeOffersAutoShow");h&&un.queueUpdate((function(){var t,e;null===(t=h.shadowRoot)||void 0===t||null===(e=t.querySelector(".content"))||void 0===e||e.setAttribute("style","\n                        font-weight: 400;\n                    ")}))}}},{key:"renderPreviousCashBackModule",value:function(t,e){var n=this;if(t){var i=this.utilities.createElement("DIV",{id:"previousCashBackSection",style:"margin-top: 0px;"});if(i&&e.userRebatesResponse.latestOrderDate&&e.userRebatesResponse.latestCashbackApproved&&e.userRebatesResponse.latestOrderMerchantName){i.style.display="flex",i.style.flexDirection="column",this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC&&(i.style.marginLeft="16px",i.style.marginRight="16px");var o,a,r=this.utilities.createElement("BUTTON",{id:"btnPreviousCashBack"});if(r.style.border="none",this.flyoutData.common.currentTheme===xt.Light?(r.style.background="linear-gradient(90deg, rgba(221, 235, 255, 0.6) 0%, rgba(233, 251, 255, 0.6) 30.73%, rgba(255, 249, 217, 0.6) 100%)",r.style.border="1px solid rgba(0, 0, 0, 0.03)"):(r.style.background="linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%)",r.style.border="1px solid rgba(255, 255, 255, 0.03)"),r.style.borderRadius="8px",r.style.boxSizing="border-box",r.style.padding="5px",o=this.utilities.createElement("DIV",{style:"grid-template-columns: 50% 50%;",id:"divPreviousCashBack"}),(a=this.utilities.createElement("DIV")).style.display="flex",a.style.rowGap="2px",a.style.flexDirection="column",a.style.justifyContent="flex-start",a.style.textAlign="left",o&&a){var s,l;if((l=this.utilities.createElement("P",{className:"txtSmall",style:"text-align: start; overflow-wrap: break-word;"},e.userRebatesResponse.latestOrderMerchantName)).style.fontWeight="500",l.style.fontSize="12px",null!==(s=e.userRebatesResponse)&&void 0!==s&&s.latestOrderDate){var c=e.userRebatesResponse.latestOrderDate.split(" ");if(c&&c.length>0){var u=new Date(c[0]);u&&null!==u.getMonth()&&u.getDate()&&u.getFullYear()&&(l.textContent=this.utilities.replaceValueInKey("retailerName",this.flyoutData.strings.cbPreviousCashbackDomain,"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u.getMonth()],", ").concat(u.getDate()," ").concat(u.getFullYear()),"".concat(e.userRebatesResponse.latestOrderMerchantName)))}}if(a.appendChild(l),this.addPreviousTransactionsLink(a),o.appendChild(a),e.userRebatesResponse.latestCashbackApproved){var d,h=this.utilities.createElement("DIV");h.style.display="flex",h.style.flexDirection="column",h.style.rowGap="18px",h.style.textAlign="right",h.style.alignItems="flex-end",(d=this.utilities.createElement("P",{className:"txtMedium"},"$".concat(e.userRebatesResponse.latestCashbackApproved.toFixed(2)))).style.fontSize="20px",d.style.lineHeight="28px",d&&h.appendChild(d);var p=this.utilities.createElement("P",{className:"txtSmall"});p.style.fontSize="12px",this.flyoutData.common.currentTheme===xt.Light?p.style.color="rgba(0, 0, 0, 0.55)":p.style.color="#C4C4C4";var f="0.0";e.userRebatesResponse.lifetimeBalance&&(f=e.userRebatesResponse.lifetimeBalance.toFixed(2)),p.textContent=this.utilities.replaceValueInKey("lifetimeEarned",this.flyoutData.strings.cbLifetimeEarned,"$".concat(f)),h.appendChild(p),o.appendChild(h)}r&&(r.appendChild(o),r.addEventListener("click",(function(){var t=new Yr(E.PreviousCashBack);n.pageHandlerModule.RecordAsUserAction(is.REBATES_HISTORY),n.logModule.LogInfoEvent(S.ButtonClick,"User navigated to previous cash back",t,dn.CouponImpressionId),n.pageHandlerModule.NavigateToRebatesPayouts(cl.NEW_FOREGROUND_TAB)}))),r&&i.appendChild(r)}t.appendChild(i)}}}},{key:"renderErrorState",value:function(t,e){if(!this.flyoutData.common.shopping.querySelector("#divErrorCashbackActivation")){var n,i=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row;"});i.id="divErrorCashbackActivation";var o=this.utilities.createElement("DIV",{style:"align-self: center;"});o.innerHTML=this.assets.getErrorIcon(),o.setAttribute("aria-label","hidden");var a=this.utilities.createElement("P");a.className="txtMedium",a.textContent=this.flyoutData.strings.cbErrorMessage,a.setAttribute("role","alert"),null!==(n=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==n&&n.shouldRenderCashBackNotification&&(a.style.fontSize="12px"),i.appendChild(o),i.appendChild(a),"actions"===e?(i.slot="header-content",this.flyoutData.common.shopping.prepend(i)):t&&t.parentElement&&t.parentElement.prepend(i)}}},{key:"createActivateButton",value:function(t,n){var i=this;if(this.flyoutData.common.shopping&&n){var a=this.stateManagement.getState(pn.isAutoApplyVisible);a&&(n.expanded=!1);var r=this.flyoutData.dataStoreModule.CashBackData;if(r){var s=this.utilities.createPrimaryButton();if(this.flyoutData.common.isPane||this.flyoutData.common.openedWith===Tt.Auto||s.classList.add("headerMargin"),null!=r&&r.isSignInSupportedDomainCashBack&&(s.id="rebatesButton"),this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)&&this.flyoutData.common.openedWith===Tt.Auto&&(s.style.width="95%"),this.renderCurrentButtonState(s),null!=r&&r.isSignInSupportedDomainCashBack){var l=new _(A.CashBackSignInButtonShown);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,s.textContent+"sign in button shown at cash back section, auto apply visible: "+a,l,dn.CouponImpressionId)}this.pageHandlerModule.TriggerExperiment(Be.rewardFlyout),s.addEventListener("click",function(){var t=e(o().mark((function t(e){var a,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.utilities.disableFooterButtons(),"#remindLaterFooter",(l=null===(a=i.flyoutData.common.shopping)||void 0===a?void 0:a.querySelector("#remindLaterFooter"))&&(l.style.display="none"),null==r||!r.isSignInSupportedDomainCashBack){t.next=13;break}return c=new Yr(E.ActivateCashBack),i.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK),i.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK_NEW),i.logModule.LogInfoEvent(S.ButtonClick,"Sign in started",c,dn.CouponImpressionId),t.next=11,i.pageHandlerModule.ActivateRebates(!0);case 11:t.next=17;break;case 13:return t.next=15,i.handleActivateCashbackClick(s,e,"Cash back activation started");case 15:t.sent?(i.styleActivatedState(s),i.flyoutData.common.openedWith!==Tt.Auto||i.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES&&i.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC||(null==(u=null==n?void 0:n.querySelectorAll("#remindLater"))?void 0:u.length)>0&&(u[0].style.display="none")):i.styleDefaultState(s,i.flyoutData.strings.cbActivateButtonRefresh);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var c=this.stateManagement.getState(pn.topModuleName);if(0===t||c!==Rt.COUPON){var u;u=this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC||this.flyoutData.common.openedWith!==Tt.Auto?n.querySelectorAll(".aOfferDetails"):n.querySelectorAll("#cbButtonSection");var d=n.querySelector("#divCashBackContent");d&&u&&u.length>0&&(s.style.marginTop="10px",u.forEach((function(t){d.insertBefore(s,t);var e=new _(A.CashBackButtonShown);i.logModule.LogInfoEvent(S.EdgeFlyoutStatus,s.textContent+" button shown at cash back section, priority="+c+" auto apply visible: "+a,e,dn.CouponImpressionId)})))}else{var h=this.utilities.createElement("DIV",{style:"width: 100%; display: flex; flex-direction:column; align-items: center; justify-content: center;"});h.slot="actions",h.appendChild(s);var p=this.createSeeOffersButton();if(p&&h.appendChild(p),null!=r&&r.isSignInSupportedDomainCashBack){var f=this.createPrivacyMessage();h.appendChild(f),un.queueUpdate((function(){var t=document.getElementById("divCashBackContent"),e=t.querySelector("#divPrivacyMessage");t.removeChild(e)}))}this.flyoutData.common.shopping.prepend(h);var g=new _(A.CashBackButtonShown);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,s.textContent+" button shown at actions slot, priority="+c+" auto apply visible: "+a,g,dn.CouponImpressionId);var m=new _(A.ModuleViewed),v="".concat(ss.REBATES_ACTIVATE_CASHBACK);v+=" merged with coupons",this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,v,m),this.flyoutData.common.shopping.prepend(h)}var y=this.flyoutData.common;if(this.isFailedState()||y.popupOrigination===Fe.AUTO_SHOW_REBATES_ACTIVATION_FAILED){var C,b,x=new CustomEvent(hn.onCashbackActivationError,{detail:{cashbackButton:s,slot:null===(C=s.parentElement)||void 0===C?void 0:C.slot}});this.stateManagement.dispatchEvent(x);var T=new _(A.ErrorCashBackActivation);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Cashback activation error -\n                    ".concat(null===(b=this.flyoutData.dataStoreModule.CashBackData)||void 0===b?void 0:b.activateRebatesStatus),T)}}}}},{key:"updateFlyoutSuccessStatus",value:(a=e(o().mark((function t(){var e,n,i,a,r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=document.getElementById("rebatesButton"),this.flyoutData.common.isCheckoutPage&&this.styleProcessingState(a),null==a||a.setAttribute("aria-live","off"),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0),r=new CustomEvent(hn.onCashBackActivated),s=new CustomEvent(hn.onCashBackActivatedForRewards),this.stateManagement.dispatchEvent(r),this.stateManagement.dispatchEvent(s),this.flyoutData.experimentData.isVariantActive(Be.rewardFlyout,Db.Rewards_0)&&!0===(null===(e=this.flyoutData)||void 0===e||null===(n=e.dataStoreModule)||void 0===n||null===(i=n.RewardData)||void 0===i?void 0:i.IsControlUser)&&(l=new UI(0,0,this.flyoutData.common.domain,0),this.logModule.LogInfoEvent(S.RewardsActivity,"rewards points info for control flight",l,dn.CouponImpressionId)),this.styleActivatedState(a);case 10:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"updateFlyoutFailStatus",value:(i=e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.getElementById("rebatesButton"),i=new CustomEvent(hn.onCashbackActivationError,{detail:{cashbackButton:n,slot:null===(e=n.parentElement)||void 0===e?void 0:e.slot}}),this.stateManagement.dispatchEvent(i),this.styleDefaultState(n,this.flyoutData.strings.cbBingActivateButton);case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createPrivacyMessage",value:function(){var t=this,e=this.utilities.createElement("SPAN");e.id="divPrivacyMessage",e.className="txtSmall",e.style.fontSize="10px",e.style.lineHeight="14px",e.style.marginTop="12px",this.utilities.shouldRenderSmallNotification()&&(e.style.marginBottom="5px",e.style.textAlign="left");var n=this.utilities.createElement("fluent-anchor");n.appearance="lightweight",n.style.fontWeight="600",n.href="#",n.style.fontSize="10px",n.style.lineHeight="14px",n.style.position="relative",n.style.height="14px",n.style.verticalAlign="bottom",n.textContent=this.flyoutData.strings.commonMicrosoftRewards,n.style.alignSelf="center",n.addEventListener("click",(function(){var e;null!==(e=t.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isPersonalizedCashback?t.pageHandlerModule.NavigateToBingReates():t.pageHandlerModule.NavigateToLearnMore(cl.NEW_FOREGROUND_TAB)})),this.utilities.replaceElementInKey(e,this.flyoutData.strings.cbPrivacyMessage,n);var i=this.utilities.createElement("fluent-anchor");return i.appearance="lightweight",i.style.fontWeight="600",i.href="#",i.style.fontSize="10px",i.style.lineHeight="14px",i.style.height="14px",i.style.position="relative",i.style.marginLeft="3px",i.style.verticalAlign="bottom",i.textContent=this.flyoutData.strings.cbPrivacyMessageTerm,i.style.alignSelf="center",i.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()})),e.appendChild(i),e}},{key:"retrieveCashBackAmount",value:function(t){var e,n,i,o="",a=this.flyoutData.dataStoreModule.CashBackData;return a&&null!==(e=a.highestCashBackCategory)&&void 0!==e&&e.commissionType?(n=a.highestCashBackCategory.commissionType,i=a.highestCashBackCategory.commissionValue):t&&null!=t&&t.commissionType&&(n=t.commissionType,i=t.commissionValue),"%"===n?o="".concat(i).concat("%"):"flat"===n&&(o=this.flyoutData.experimentData.isExperimentActive(Be.pcbrefresh)&&this.flyoutData.common.openedWith===Tt.Auto?"".concat(this.currencySymbol).concat(parseFloat(i).toFixed(2)):"".concat(this.currencySymbol).concat(i)),o}},{key:"styleProcessingState",value:function(t){var e=this.utilities.createElement("fluent-progress-ring");e.style.width="17px",e.style.height="17px",e.style.margin="0px",e.slot="start",e.setAttribute("aria-hidden","true"),t&&(t.textContent=this.flyoutData.strings.cbProcessing,t.style.backgroundColor="#0656F8",t.style.color="#FFFFFF",t.setAttribute("aria-live","assertive"),t.appendChild(e))}},{key:"createCommissionArrow",value:function(t,e){var n,i,o,a=this.utilities.createElement("DIV");a.className="imgCBTag",null!==(n=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==n&&n.isPersonalizedCashback?(a.innerHTML=this.assets.getPersonalizedTagLeft(),a.style.height="24px"):this.utilities.shouldRenderSmallNotification()?a.innerHTML=this.assets.getSmallTagLeft():a.innerHTML=this.assets.getTagLeft(),a.setAttribute("aria-hidden","true"),a.style.float="left";var r=this.utilities.createElement("DIV");r.className="imgCBTag",null!==(i=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==i&&i.isPersonalizedCashback?(r.innerHTML=this.assets.getPersonalizedTagRight(),r.style.height="24px"):this.utilities.shouldRenderSmallNotification()?r.innerHTML=this.assets.getSmallTagRight():r.innerHTML=this.assets.getTagRight(),r.setAttribute("aria-hidden","true"),r.style.float="left";var s=this.utilities.createElement("SPAN");s.textContent=this.retrieveCashBackAmount(),s.className="spanCommisionValue",null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isPersonalizedCashback&&(s.style.display="inline-flex",s.style.alignItems="center",s.style.lineHeight="18px",s.style.fontSize="18px",s.style.height="24px");var l=this.utilities.createElement("DIV");if(l.className="divCommissionValue",t&&a&&r&&l&&a.children.length>0&&r.children.length>0){var c=a.children[0];c&&(c.setAttribute("width","7"),c.setAttribute("height","20"),c.setAttribute("viewBox","(0 0 7 20)"));var u=r.children[0];u&&(u.setAttribute("width","10"),u.setAttribute("height","20")),s.style.height="20px",s.style.lineHeight="20px",s.style.fontSize="16px",l.style.marginBottom="4px"}return l.appendChild(a),l.appendChild(s),l.appendChild(r),e&&e(l),l}},{key:"handleActivateCashbackClick",value:(n=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.className+=" activated",e.style.fontWeight="500",e.textContent=this.flyoutData.strings.cbActivatedButton,a=new Yr(E.ActivateCashBack),this.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK),this.logModule.LogInfoEvent(S.ButtonClick,i,a,dn.CouponImpressionId),e.disabled=!0,r=!1,!this.flyoutData.common.isCheckoutPage){t.next=16;break}return this.styleProcessingState(e),t.next=12,this.pageHandlerModule.ActivateRebates(!0);case 12:s=t.sent,r=s.activated,t.next=18;break;case 16:this.pageHandlerModule.ActivateRebates(!1),r=!0;case 18:return r?(null==e||e.setAttribute("aria-live","off"),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0),l=new CustomEvent(hn.onCashBackActivated),c=new CustomEvent(hn.onCashBackActivatedForRewards),this.stateManagement.dispatchEvent(l),this.stateManagement.dispatchEvent(c)):(d=new CustomEvent(hn.onCashbackActivationError,{detail:{cashbackButton:e,slot:null===(u=e.parentElement)||void 0===u?void 0:u.slot}}),this.stateManagement.dispatchEvent(d)),0===n.screenX&&0===n.screenY&&r?(h=document.querySelector("#".concat(Yt.CLOSE)))&&h.focus():e&&e.focus(),this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_CHECKOUT&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC_NEW||(p=this.pageHandlerModule,setTimeout((function(){p.DismissPopup()}),4500)),t.abrupt("return",r);case 22:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return n.apply(this,arguments)})},{key:"styleActivatedState",value:function(t){var e=this.flyoutData.common.shopping.querySelector("#divErrorCashbackActivation");if(e&&e.remove(),t){var n=t.querySelector("fluent-progress-ring");n&&n.remove();var i=this.utilities.createElement("DIV");i.innerHTML=this.commonAssets.getGreenCheck(),i.slot="start",i.setAttribute("aria-hidden","true"),t.disabled=!0,t.textContent=this.flyoutData.strings.cbActivatedButton,t.appendChild(i),t.style.background="transparent",t.style.boxSizing="border-box",t.style.borderRadius="4px",t.style.opacity="1",this.flyoutData.common.currentTheme===xt.Dark?(t.style.color="#FFFFFF",t.style.borderColor="#FFFFFF"):t.style.color="#000000"}}},{key:"styleDefaultState",value:function(t,e){t.disabled=!1,t.appearance="accent",t.textContent=e,null==t||t.setAttribute("aria-live","assertive")}},{key:"createSeeOffersButton",value:function(t){var e,n,i,o,a=this;if(null!==(e=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isPersonalizedCashback&&null!==(n=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==n&&null!==(i=n.userRebatesResponse)&&void 0!==i&&i.isRebatesUser)return null;var r=this.utilities.createElement("fluent-anchor");return r.className+="action aOfferDetails",r.appearance="lightweight",r.style.fontSize="600",r.href="#",r.style.fontSize="12px",r.style.lineHeight="16px",r.style.marginTop="10px",null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isPersonalizedCashback?r.textContent=this.flyoutData.strings.commonLearnMore:r.textContent=this.flyoutData.strings.cbLearnMore,r.style.alignSelf="center",r.addEventListener("click",(function(){var t,e,n=new Yr(E.RebatesLearnMore);(a.pageHandlerModule.RecordAsUserAction(is.REBATES_LEARN_MORE),a.logModule.LogInfoEvent(S.ButtonClick,"User navigated to rebates learn more",n,dn.CouponImpressionId),null!==(t=a.flyoutData.dataStoreModule.CashBackData)&&void 0!==t&&t.isPersonalizedCashback)?a.pageHandlerModule.NavigateToBingReates():a.pageHandlerModule.NavigateToLearnMore(cl.NEW_FOREGROUND_TAB,null===(e=a.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.merchantName)})),t&&t(r),r}},{key:"isFailedState",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.CashBackData)||void 0===t?void 0:t.activateRebatesStatus;return void 0!==e&&Object.keys(Nt).some((function(t){if(Nt[t]===e)return!!t.toString().includes("FAILED")})),!1}},{key:"renderCurrentButtonState",value:function(t){var e=this.flyoutData.dataStoreModule.CashBackData,n=this.flyoutData.common,i=this.flyoutData.experimentData,o=n.popupOrigination===Fe.AUTO_SHOW_REBATES_SWITCHED_TO_MSA&&i.isExperimentActive(Be.signinRebates),a=(null==e?void 0:e.activateRebatesStatus)===Nt.PENDING_ACTIVATION_IN_PROFILE,r=this.flyoutData.strings.cbActivateButtonRefresh;if(e&&e.isSignInSupportedDomainCashBack&&e.activateRebatesStatus!==Nt.PENDING_SIGN_INTO_PROFILE&&(r=this.flyoutData.strings.cbBingActivateButton),e&&e.isCashBackActivated||o||a){this.styleDefaultState(t,r),this.styleActivatedState(t),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0);var s=new CustomEvent(hn.onCashBackActivated);this.stateManagement.dispatchEvent(s)}else this.styleDefaultState(t,r)}},{key:"createProductImage",value:function(t){var e=this.utilities.createElement("A");e.target="_blank",e.style.width="88px",e.style.height="88px",e.style.zIndex="0",e.style.marginBottom="16px";var n=this.utilities.createElement("IMG",{id:"productImage"});t.imageUrl&&""!==t.imageUrl?n.src="https://www.bing.com"+t.imageUrl:n.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(t.domain,".png"),n.setAttribute("aria-label",t.scope),n.style.height="100%",n.style.width="100%",n.style.objectFit="contain";var i=this.utilities.createElement("DIV");i.style.width="88px",i.style.height="88px",i.style.background="rgba(32,33,36,0.039)",i.style.borderRadius="8px";var o=this.utilities.createElement("DIV");return o.style.width="88px",o.style.height="88px",o.style.position="relative",o.appendChild(n),i.appendChild(o),e.appendChild(i),e}},{key:"createPersonalizedCashbackTitle",value:function(t,e,n,i){var o,a,r=this,s=this.utilities.createElement("DIV",{style:"align-items: center; width: calc(100% - 20px);"});s.style.textAlign="initial",s.className="divCashBackTitle",null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&null!==(a=o.personalizedCashback)&&void 0!==a&&a.imageUrl||(s.style.marginBottom="0px");var l=this.utilities.createElement("H2");l.className="h2RebatesTitle",l.style.marginBottom="12px",this.flyoutData.common.isPane&&(l.style.fontSize="21px");var c=this.getPersonalizedCashbackHeaderText(t,e,n,i);return l.textContent=c,s.appendChild(l),this.stateManagement.addEventListener(hn.onCashBackActivated,(function(){l.textContent=r.getPersonalizedCashbackHeaderText(!0,e,n,i)})),s}},{key:"getPersonalizedCashbackHeaderText",value:function(t,e,n,i){var o,a,r,s;e?o=t?this.utilities.replaceValueInKey("rebatesStorewidePercentageEarn",this.flyoutData.strings.pcbMainTitleOnStoreWide,n,"".concat(this.currencySymbol).concat(i)):this.utilities.replaceValueInKey("rebatesStorewidePercentageEarn",this.flyoutData.strings.pcbMainTitleOffStoreWide,n,"".concat(this.currencySymbol).concat(i)):null!==(a=this.flyoutData.dataStoreModule)&&void 0!==a&&null!==(r=a.CashBackData)&&void 0!==r&&null!==(s=r.userRebatesResponse)&&void 0!==s&&s.isRebatesUser?(o=this.flyoutData.strings.cbPersonalized,o=this.utilities.replaceValueInKey("cbPersonalized",o,n)):(o=this.flyoutData.strings.pcbMainTitleOff,o=this.utilities.replaceValueInKey("pcbMainTitleOff",o,n));return o}},{key:"createCashBackTitle",value:function(t,e,n){var i,o,a,r,s=this;if(a=(this.flyoutData.common.popupOrigination,Fe.AUTO_SHOW_REBATES_ORGANIC,this.utilities.createElement("DIV",{style:"align-items: center; width: calc(100% - 20px);"})),this.utilities.shouldRenderSmallNotification()&&(a.style.width="100%"),this.pageHandlerModule.TriggerExperiment(Be.merchantNameFlyout),this.flyoutData.experimentData.isExperimentActive(Be.merchantNameFlyout)){var l,c;r=this.utilities.createElement("DIV",{style:"display: inline-flex; align-content: center;"});var u=null!==(l=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==l&&l.merchantFullName?null===(c=this.flyoutData.dataStoreModule.CashBackData)||void 0===c?void 0:c.merchantFullName:this.flyoutData.common.domain;u=this.utilities.replaceValueInKey("gcbOnMerchantName",this.flyoutData.strings.gcbOnMerchantName,u);var d=this.utilities.createElement("P",{style:"flex-direction: row; position: relative;margin-top: 0px; margin-bottom: 0px"},u),h=this.utilities.createElement("DIV",{style:"display:flex; column-gap:5px; position: relative; top: 4px; right: -3px;"}),p=this.utilities.createElement("IMG",{style:"max-height:16px; max-width:16px; font-weight:600"});this.utilities.addFavIconSrc(p,h,this.flyoutData.common.domain),u&&(r.appendChild(d),r.appendChild(h))}a.className="divCashBackTitle";var f=this.utilities.createElement("H2");f.className="h2RebatesTitle",this.flyoutData.common.isPane&&(f.style.fontSize="21px");var g=this.createCommissionArrow(!1);if(this.createCashBackHeaderText(f,e,t,g),a.appendChild(f),this.flyoutData.experimentData.isExperimentActive(Be.merchantNameFlyout)&&a.appendChild(r),t&&this.utilities.shouldRenderSmallNotification()&&null!==(i=n.userRebatesResponse)&&void 0!==i&&i.latestCashbackApproved&&null!==(o=n.userRebatesResponse)&&void 0!==o&&o.latestOrderMerchantName){var m,v,y=document.createElement("P");y.className="txtSmall",y.style.fontWeight="400",y.style.marginTop="5px",y.style.marginBottom="5px",y.style.marginLeft="27px",y.style.marginRight="27px",y.style.fontSize="12px",(m=this.utilities.createElement("SPAN")).textContent="$".concat(this.utilities.formatPrice(n.userRebatesResponse.latestCashbackApproved)),m.style.color="var(--text-price-savings-color)",(v=this.utilities.createElement("SPAN")).textContent=n.userRebatesResponse.latestOrderMerchantName,this.utilities.populateMultipleChildrenHTML(y,this.flyoutData.strings.cbSubtitle,m,v),a.appendChild(y)}return this.stateManagement.addEventListener(hn.onCashBackActivated,(function(){s.createCashBackHeaderText(f,e,!0,g)})),a}},{key:"createCashBackHeaderText",value:function(t,e,n,i){var o,a=this.flyoutData.strings.cbMainTitleOff;a=Hl.isCashbackEstimateActive(this.flyoutData,this.estimatedCashbackData,this.pageHandlerModule)?this.flyoutData.strings.cbMainTitleOffWithCashbackEstimate:this.flyoutData.strings.cbMainTitleOff;var r=!1;null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isSignInSupportedDomainCashBack?n?(a=this.flyoutData.strings.cbTitleSignInOn,r=!0):a=Hl.isCashbackEstimateActive(this.flyoutData,this.estimatedCashbackData,this.pageHandlerModule)?this.flyoutData.strings.cbMainTitleOffWithCashbackEstimate:this.flyoutData.strings.cbMainTitleOff:n?(a=e?this.flyoutData.strings.cbMainTitleOnStoreWide:this.flyoutData.strings.cbMainTitleOn,this.utilities.shouldRenderSmallNotification()||(t.style.marginLeft="10px",t.style.marginRight="10px")):a=(this.flyoutData.common.popupOrigination,Fe.AUTO_SHOW_REBATES_ORGANIC,Hl.isCashbackEstimateActive(this.flyoutData,this.estimatedCashbackData,this.pageHandlerModule)?this.flyoutData.strings.cbMainTitleOffWithCashbackEstimate:this.flyoutData.strings.cbMainTitleOff),this.PopulateCreateCashBackHeaderHtml(t,a,i,r)}},{key:"PopulateCreateCashBackHeaderHtml",value:function(t,e,n,i){var o=this,a=e.split("<br>");if(a&&a.length>1){this.utilities.populateSingleChildHtml(t,a[0],n,this.estimatedCashbackData);var r=this.utilities.createElement("BR");t.appendChild(r);var s=this.utilities.createElement("P",{style:"display: inline;"});s.id="txtPersonalizedProduct",s.classList.add("txtMedium"),s.textContent=a[1],t.appendChild(s)}else this.utilities.populateSingleChildHtml(t,e,n,this.estimatedCashbackData),this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_ORGANIC_NEW&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES_CHECKOUT&&this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_REBATES||(t.style.fontSize="21px",t.style.lineHeight="32px",t.style.fontWeight="600",this.utilities.shouldRenderSmallNotification()&&(t.style.fontSize="20px",t.style.lineHeight="28px"));if(!i){var l,c=t.lastChild,u=this.utilities.createElement("SPAN",{style:"white-space: nowrap;"});c&&u.appendChild(c);var d=this.utilities.createElement("div",{style:"display: flex;"});d.slot="hover-anchor",d.setAttribute("aria-labelledby","cbTooltip"),d.className="btnTooltip";var h=this.utilities.createElement("msft-shopping-tooltip",{style:"display: inline-block; vertical-align: top; align-self: center; white-space: initial; margin-top: 2px;"});h.id="cbTooltip",null!==(l=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==l&&l.isPersonalizedCashback||(d.innerHTML=this.commonAssets.getInfoIcon()),h.content=this.flyoutData.strings.cbLearnMore+". "+this.flyoutData.strings.cbToolTips,h.addEventListener("click",(function(){var t,e,n=new Yr(E.RebatesLearnMore);(o.pageHandlerModule.RecordAsUserAction(is.REBATES_LEARN_MORE),o.logModule.LogInfoEvent(S.ButtonClick,"User navigated to rebates learn more",n,dn.CouponImpressionId),null!==(t=o.flyoutData.dataStoreModule.CashBackData)&&void 0!==t&&t.isPersonalizedCashback)?o.pageHandlerModule.NavigateToBingReates():o.pageHandlerModule.NavigateToLearnMore(cl.NEW_FOREGROUND_TAB,null===(e=o.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.merchantName)})),h.addEventListener("hover",(function(){var t=new Yr(E.RebatesLearnMore);o.pageHandlerModule.RecordAsUserAction(is.REBATES_LEARN_MORE),o.logModule.LogInfoEvent(S.ButtonClick,"Hovered over Tool Tip",t),o.utilities.setupTooltip(h)}));var p="",f="";h.header&&(p=h.header),h.content&&(f=h.content),(p||f)&&(h.setAttribute("name","".concat(p," ").concat(f)),h.setAttribute("aria-label","".concat(p," ").concat(f))),h.append(d),u.appendChild(h),t.appendChild(u)}}},{key:"addPreviousTransactionsLink",value:function(t){var e=this,n=document.createElement("fluent-anchor");n.slot="action",n.href="#",n.className+="action",n.appearance="lightweight",n.style.fontWeight="600",n.style.alignSelf="start",n.textContent=this.flyoutData.strings.cbPreviousTransactions,n.style.fontSize="12px",n.style.lineHeight="16px",n.style.placeSelf="start",n.addEventListener("click",(function(){var t=new Yr(E.RebatesAccount);e.pageHandlerModule.RecordAsUserAction(is.REBATES_ACCOUNT),e.logModule.LogInfoEvent(S.ButtonClick,"User navigated to rebates account",t,dn.CouponImpressionId),e.pageHandlerModule.NavigateToRebatesAccount(cl.NEW_FOREGROUND_TAB)})),t.appendChild(n),t.addEventListener("click",(function e(){if(t){var n=t.shadowRoot;if(n){var o=n.querySelector("fluent-accordion-item");if(o&&!o.classList.contains("expanded")){var a=new Yr(E.ExpandedPreviousCashBack);i.LogInfoEvent(S.ButtonClick,"Previous cash back section was expanded",a,dn.CouponImpressionId),t&&t.removeEventListener("click",e)}}}}));var i=this.logModule}},{key:"HidePreviousCashbackFromShopping",value:function(){this.stateManagement.getState(pn.topModuleName)===Rt.CASHBACK&&un.queueUpdate((function(){var t=document.querySelector("#previousCashBackSection");if(t){var e=t.shadowRoot;if(e){var n=e.querySelector("fluent-accordion");n&&(n.style.marginBottom="0px")}}}))}},{key:"SetSectionTitle",value:function(t){var e=this,n=this.flyoutData.dataStoreModule.CashBackData;n&&un.queueUpdate((function(){var i,o,a=null===(i=t.shadowRoot)||void 0===i?void 0:i.querySelector("span[part=title]"),r=n.isCashBackActivated;if(a)if(r||n.isPersonalizedCashback&&null!==(o=n.userRebatesResponse)&&void 0!==o&&o.isRebatesUser){var s=e.flyoutData.strings.cbRebatesOn,l=e.utilities.createElement("B");l.textContent=s;var c=e.flyoutData.strings.cbCashBackOnOff;e.utilities.populateSingleChildHtml(a,c,l)}else{var u=e.flyoutData.strings.cbRebatesOff,d=e.utilities.createElement("B");d.textContent=u;var h=e.flyoutData.strings.cbCashBackOnOff;e.utilities.populateSingleChildHtml(a,h,d)}}))}}]),y}(Bb),$I=WI;function zI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return KI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KI(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function KI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function YI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var jI=function(t){u(c,t);var n,i,a,l=YI(c);function c(t,e,n,i){return s(this,c),l.call(this,t,e,n,i)}return r(c,[{key:"GetNotificationName",value:function(){var t=this.flyoutData.dataStoreModule.CashBackData;return null!=t&&t.isTurnedOff?Mt.CASHBACKTURNEDOFF:null!=t&&t.isConfirmationPage?Mt.CASHBACKCONFIRMATION:Mt.CASHBACK}},{key:"RenderNotification",value:(a=e(o().mark((function t(){var e,n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataStoreModule.CashBackData)||!e.shouldRenderCashBackNotification){t.next=18;break}if(null==e||!e.isTurnedOff){t.next=7;break}return n=this.renderTurnedOffCashBackModule(),t.abrupt("return",Promise.resolve(n));case 7:if(null==e||!e.isConfirmationPage){t.next=12;break}return i=this.renderConfirmationCashBackModule(),t.abrupt("return",Promise.resolve(i));case 12:return t.next=14,this.renderModuleInNotification();case 14:if(!(a=t.sent)||!a.element){t.next=18;break}return r=this.utilities.createNotificationModule(a.element,Mt.CASHBACK,this),t.abrupt("return",Promise.resolve(r));case 18:return t.abrupt("return",Promise.resolve(null));case 19:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t,e,n,i=this.flyoutData.dataStoreModule.CashBackData,o=!1;this.stateManagement.getState(pn.canRenderAutoApply)||(o=this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES);var a=!1,r=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t||null===(e=t.retailerData)||void 0===e?void 0:e.orderConfirmationPageUrl;if(r&&null!=i&&i.isPersonalizedCashback){var s=new RegExp(r,"i");a=i.isPersonalizedCashback&&s.test(this.flyoutData.common.lastCommittedURL)}return Promise.resolve(null!==(n=i&&i.shouldRenderCashBackNotification&&this.flyoutData.common.isRebatesEnabled&&this.flyoutData.common.openedWith===Tt.Auto&&(this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_CONFIRMATION||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_DEACTIVATED||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_ORGANIC||o||a))&&void 0!==n&&n)}},{key:"PostProcessingNotification",value:function(t,n){var i=this,a=this.flyoutData.dataStoreModule.CashBackData;if(null!=a&&a.isTurnedOff){var r=this.utilities.createPrimaryButton();r.classList.add("headerMargin"),r.slot="actions",this.styleDefaultState(r,this.flyoutData.strings.cbEnableRebatesButton),r.addEventListener("click",function(){var t=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.handleActivateCashbackClick(r,e,"Cash back activated from turned off notification");case 2:t.sent?i.styleActivatedState(r):i.styleDefaultState(r,i.flyoutData.strings.cbActivateButtonRefresh);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.flyoutData.common.shopping.appendChild(r)}else{if(null!=a&&a.isConfirmationPage)return;this.PostProcessing(Rt.CASHBACK,0,n)}}},{key:"renderModuleInNotification",value:(i=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderModule();case 2:if(!(e=t.sent)||!e.element){t.next=11;break}return e.element.style.marginTop="0px",e.element.slot="header-content",e.element.accordion=!1,e.element.hideTitle=!0,this.flyoutData.common.shopping.classList.add("noSections"),this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                margin-top: 0px;\n                margin-bottom: 0px;\n                }"),t.abrupt("return",e);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"renderConfirmationCashBackModule",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(e=this.utilities.createElement("DIV",{id:"divCashBackPopup"})).slot="header-content",(n=this.utilities.createElement("DIV",{className:"txtMedium"})).className="divNotificationContent",null!=(i=this.flyoutData.dataStoreModule.CashBackData)&&i.isPersonalizedCashback?((a=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500;"})).style.lineHeight="28px",r=this.utilities.createElement("span"),(s=this.utilities.createElement("fluent-anchor")).addEventListener("click",(function(){f.pageHandlerModule.NavigateToBingReates()})),s.href="#",s.textContent=this.flyoutData.strings.pcbBingRebates,s.setAttribute("appearance","hypertext"),s.style.lineHeight="28px",s.className="txtMedium",r.textContent=this.getMaxCashbackValue(i.adsCashback),this.flyoutData.experimentData.isExperimentActive(Be.instantcb)?(a.style.fontSize="17px",s.textContent=this.flyoutData.strings.instantcbBingRebates,this.utilities.populateMultipleChildrenHTML(a,this.flyoutData.strings.instantcb,r),l=this.utilities.createElement("DIV"),this.utilities.populateSingleChildHtml(l,this.flyoutData.strings.instantcbSecond,s),a.appendChild(l)):(s.style.fontSize="18px",a.style.fontSize="20px",this.utilities.populateMultipleChildrenHTML(a,this.flyoutData.strings.pcbConfirmationTitle,r,s))):a=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},this.flyoutData.strings.cbConfirmationTitle),null!=i&&i.isPersonalizedCashback?(u=this.utilities.createElement("DIV",{style:"position: relative;\n            display: inherit"}),(d=this.utilities.createElement("DIV")).className="infoicon",d.innerHTML=this.assets.getConfirmationInfoIcon(),d.setAttribute("aria-label","hidden"),u.appendChild(d),(c=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px;"},this.flyoutData.strings.pcbConfirmationMessage)).style.color="rgba(0, 0, 0, 0.55)",u.appendChild(c)):c=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px;"},this.flyoutData.strings.cbConfirmationMessage),h=this.createSeeOffersButton(),n.appendChild(a),null!=i&&i.isPersonalizedCashback?n.appendChild(u):n.appendChild(c),h&&n.appendChild(h),e.appendChild(n),p=new _(A.RebatesConfirmationNotification),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User saw confirmation notification",p,dn.CouponImpressionId),t.abrupt("return",this.utilities.createNotificationModule(e,Mt.CASHBACKCONFIRMATION,this));case 16:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getMaxCashbackValue",value:function(t){var e,n="1",i=zI(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.commissionValue>n&&(n=o.commissionValue)}}catch(t){i.e(t)}finally{i.f()}return"".concat(this.currencySymbol).concat(n)}},{key:"renderTurnedOffCashBackModule",value:function(){this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var t=this.utilities.createElement("DIV",{id:"divCashBackPopup"});t.slot="header-content";var e=this.utilities.createElement("DIV");e.className="txtMedium divNotificationContent";var n=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},this.flyoutData.strings.cbTurnedOffTitle),i=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px; margin-bottom: 16px;"},this.flyoutData.strings.cbTurnedOffMessage);e.appendChild(n),e.appendChild(i),t.appendChild(e);var o=new _(A.RebatesTurnedOffNotification);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User saw rebates turned off notification",o,dn.CouponImpressionId),this.utilities.createNotificationModule(t,Mt.CASHBACK,this)}}]),c}($I),qI=jI,ZI=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        .divSuccessRate {\n            display: flex;\n            flex-direction: row;\n            border-radius: 0px 3px;\n        }\n        .txtSuccessRate {\n            color: #107C10;\n        }\n        #divCouponWrapper {\n            display: grid;\n            grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n            grid-gap: 12px;\n            margin-bottom: 10px;\n            margin-left: 16px;\n            margin-right: 16px;\n            margin-top: 0px;\n        }\n        @media (forced-colors: active) {\n            .divSuccessRateIcon svg path:first-child {\n                fill: highlight;\n            }\n            .divSuccessRateIcon svg path:last-child {\n                fill: highlighttext;\n            }\n        }"}},{key:"getDarkModeStyles",value:function(){return"\n        .txtSuccessRate {\n            color: #62C90C;\n        }\n        .divSuccessRateIcon svg path:first-child {\n            fill: #62C90C;\n        }\n        "}}]),t}(),XI=r((function t(e,n,i){s(this,t),f(this,"ShowNumCouponsInHeader",!1),f(this,"ShowCouponHeader",!0),f(this,"SetExpandableTitleAsViewCoupons",!1),f(this,"SetExpandableTitleAsNumCoupons",!1),f(this,"UseAlternativeCouponApplyButtonText",!1),n.isExperimentActive(Be.couponsUX)&&null!=i&&i.isCheckoutPageWithAutoApply&&(e.TriggerExperiment(Be.couponsUX),n.isVariantActive(Be.couponsUX,Cb.SmallerFootprintBasic)?(this.ShowNumCouponsInHeader=!0,this.SetExpandableTitleAsViewCoupons=!0,this.UseAlternativeCouponApplyButtonText=!0):n.isVariantActive(Be.couponsUX,Cb.NoCouponSection)&&(this.ShowCouponHeader=!1,this.SetExpandableTitleAsNumCoupons=!0))})),JI=XI,QI=function(){function t(e,n){s(this,t),f(this,"flyoutData",void 0),f(this,"utilities",void 0),this.flyoutData=e,this.utilities=n}return r(t,[{key:"createCouponHeader",value:function(t,e,n,i){var o=this.utilities.createElement("DIV",{style:"width: 100%; display: flex; flex-direction: row; justify-content: flex-start; column-gap: 16px; text-align: left; font-weight: 500; overflow: hidden; height: 67px;"});o.slot="header-content",this.createRetailerIcon(o,e);var a=this.utilities.createElement("SPAN");a.textContent=t||e,a.className="txtLarge txtGradient",a.style.display="inline-block",a.style.minHeight="35px";var r=this.utilities.createElement("H2");if(r.className="txtLarge",r.style.fontWeight="500",1===n)this.utilities.populateSingleChildHtml(r,this.flyoutData.strings.ptCouponsTitleSingular,a);else{var s=this.utilities.replaceValueInKey("ptCouponsTitle",this.flyoutData.strings.ptCouponsTitle,n.toString());this.utilities.populateSingleChildHtml(r,s,a)}o.appendChild(r),i.appendChild(o)}},{key:"createRetailerIcon",value:function(t,e){var n=this.utilities.createElement("DIV");n.setAttribute("role","image");var i=this.utilities.replaceValueInKey("commonAriaLogo",this.flyoutData.strings.commonAriaLogo,e);n.setAttribute("aria-label",i),n.id="divProfileImgWrapper",n.style.position="relative",n.style.display="flex",n.style.justifyContent="center";var o=this.utilities.createElement("IMG",{style:"width: 50px; height: 50px; place-self: center;\n                    border-radius: 8px; position: relative;\n                    margin-bottom: 8px;"});o.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(e,".png"),o.setAttribute("aria-hidden","true");var a=this.utilities.createElement("IMG");a.setAttribute("aria-hidden","true"),a.src=this.flyoutData.common.resourcesEndpoint+"pinterest/icon.png",a.style.position="absolute",a.style.top="46px",a.style.zIndex="2",o.addEventListener("error",(function(){t.style.gridTemplateColumns="auto",t.style.textAlign="center",t.style.justifyContent="center",t.style.height="auto",o.remove(),a.remove()})),n.appendChild(o),n.appendChild(a),t.appendChild(n)}}]),t}(),tw=1e3,ew=function(){function t(){s(this,t)}var n,i,a;return r(t,null,[{key:"calculateTotalSavings",value:(a=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=0,this.resetSavedTransactionsInEdgeLocalStore(e,n,i),t.next=4,this.getListOfTransactions(V.AutoApplyTransactionsKey,n);case 4:return c=t.sent,t.next=7,this.getListOfTransactions(V.CouponClippingTransactionsKey,n);case 7:return u=t.sent,t.next=10,this.getListOfTransactions(V.CashbackTransactionsKey,n);case 10:return d=t.sent,l+=null!==(a=i.TotalAutoApplySavingsAmount)&&void 0!==a?a:0,l+=null!==(r=i.TotalCouponClippingSavingsAmount)&&void 0!==r?r:0,l+=null!==(s=i.TotalCashbackSavingsAmount)&&void 0!==s?s:0,l+=this.getTotalSavingsFromListOfTransactions(c,new Date(i.LastUpdatedAutoApplySavingsTimestamp)),l+=this.getTotalSavingsFromListOfTransactions(u,new Date(i.LastUpdatedCouponClippingSavingsTimestamp)),l+=this.getTotalSavingsFromListOfTransactions(d,new Date(i.LastUpdatedCashbackSavingsTimestamp)),t.abrupt("return",l);case 18:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)})},{key:"getTotalSavingsFromListOfTransactions",value:function(t,e){var n=0;try{t.forEach((function(t){var i=null==t?void 0:t.EventInfoTime;if(!Se(i)&&!(new Date(i)<e)){var o=null==t?void 0:t.Discount,a=null==t?void 0:t.CashbackSavings;Se(o)||isNaN(o)?Se(a)||isNaN(a)||(n+=Number(a)):n+=Number(o)}}))}catch(t){}return n}},{key:"resetSavedTransactionsInEdgeLocalStore",value:(i=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p,f,g;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getListOfTransactions(V.AutoApplyTransactionsKey,n);case 2:return a=t.sent,t.next=5,this.getListOfTransactions(V.CouponClippingTransactionsKey,n);case 5:return r=t.sent,t.next=8,this.getListOfTransactions(V.CashbackTransactionsKey,n);case 8:s=t.sent,l=!(null!=a&&a.length||null!=r&&r.length||null!=s&&s.length),c=(null==a?void 0:a.length)>tw||(null==r?void 0:r.length)>tw||(null==s?void 0:s.length)>tw,u=this.getOldestTimestampFromListOfTransactions(a),d=this.getOldestTimestampFromListOfTransactions(r),h=this.getOldestTimestampFromListOfTransactions(s),p=null==u&&null==d&&null==h,(f=new Date).setDate(f.getDate()-60),g=null!=u&&f>u||null!=d&&f>d||null!=h&&f>h,(l||c||p||g)&&this.setSavingsFoundDataInEdgeLocalStore(n,i);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"getOldestTimestampFromListOfTransactions",value:function(t){try{var e,n=null==t||null===(e=t[0])||void 0===e?void 0:e.EventInfoTime;if(!n)return null;var i=new Date(n);return t.forEach((function(t){var e=new Date(null==t?void 0:t.EventInfoTime);e<i&&(i=e)})),i}catch(t){return null}}},{key:"getListOfTransactions",value:(n=e(o().mark((function t(e,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.GetStorageValue(e).then((function(t){var e,n;return JSON.parse(null!==(e=null==t||null===(n=t.value)||void 0===n?void 0:n.stringValue)&&void 0!==e?e:"[]")})).catch((function(t){return[]})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})},{key:"setSavingsFoundDataInEdgeLocalStore",value:function(t,e){this.setSavingsFoundStringStorageValue(t,V.AutoApplyTransactionsKey,JSON.stringify(e.ListOfAutoApplyTransactions)),this.setSavingsFoundStringStorageValue(t,V.CouponClippingTransactionsKey,JSON.stringify(e.ListOfCouponClippingTransactions)),this.setSavingsFoundStringStorageValue(t,V.CashbackTransactionsKey,JSON.stringify(e.ListOfCashbackTransactions))}},{key:"setSavingsFoundStringStorageValue",value:function(t,e,n){var i=new ds;i.stringValue=n,t.SetStorageValue(e,i)}}]),t}(),nw=ew;function iw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var ow=function(t){u(I,t);var n,i,a,c,d,h,p,g,m,v,y,C,b,x,D,k=iw(I);function I(t,e,n,i){var o,a;if(s(this,I),f(l(a=k.call(this)),"assets",void 0),f(l(a),"pageHandlerModule",void 0),f(l(a),"logModule",void 0),f(l(a),"cartValue",void 0),f(l(a),"flyoutData",void 0),f(l(a),"utilities",void 0),f(l(a),"acUtilities",void 0),f(l(a),"stateManagement",void 0),f(l(a),"commonAssets",void 0),f(l(a),"couponsUXConfig",void 0),f(l(a),"isPaneOnlyModule",!1),f(l(a),"estimatedCashbackData",void 0),f(l(a),"instantSavings",void 0),a.logModule=n.logModule,a.pageHandlerModule=n.pageHandlerModule,a.stateManagement=t,a.flyoutData=e,a.stateManagement.setState(pn.isAutoApplyVisible,a.isAutoApplyVisible()),a.utilities=n.viewModulesUtilities,a.acUtilities=new gs(n,e,n.pageHandlerModule,n.logModule),a.commonAssets=i,a.assets=new ZI,a.couponsUXConfig=new JI(a.pageHandlerModule,a.flyoutData.experimentData,a.flyoutData.dataStoreModule.CouponData),a.stateManagement.addEventListener(hn.CreateAutoApplyButton,a.createAutoApplyButton.bind(l(a))),a.stateManagement.addEventListener(hn.CreateCouponHeader,a.populateMainHeader.bind(l(a))),a.stateManagement.addEventListener(hn.CreateTrivia,(function(t){!a.isCreateTriviaRendered()&&t&&t.detail&&t.detail.parent&&a.CreateTrivia(t.detail.parent),a.updateCreateTriviaRenderedState()})),a.cartValue=-1,a.stateManagement.setState(pn.canRenderAutoApply,a.canRenderAutoApplyButton()),a.flyoutData.common.isCheckoutPage&&a.flyoutData.common.pageStatus.AutoApplyStatus&&a.flyoutData.experimentData.isExperimentActive(Be.instantSavingsNotification)&&null!==(o=a.flyoutData.dataStoreModule.ApiData)&&void 0!==o&&o.retailerData.couponsFilteringEnabled){var r,c=null===(r=a.flyoutData.dataStoreModule.CouponData)||void 0===r?void 0:r.Coupons.filter((function(t){return t.discountPercent&&t.successRate&&!t.isLowSuccessRateCoupon}));c&&(c.sort((function(t,e){return e.successRate-t.successRate})),c[0]&&(a.instantSavings="up to ".concat(c[0].discountPercent,"% off")))}return a}return r(I,[{key:"GetModuleName",value:function(){return Rt.COUPON}},{key:"CalculateRanking",value:function(){return this.flyoutData.common.isCheckoutPage?Ct.SaveMoneyPage:Ct.InformRetailer}},{key:"ShouldRenderModule",value:function(){var t,e,n,i=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==i||null===(t=i.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS&&(null==i?void 0:i.CompetingPrices)&&(null==i?void 0:i.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);var o=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n?void 0:n.retailerData,a=null==o?void 0:o.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL),r=!1;null!=a&&a.clippingSelectors&&(r=!0);var s=!1===r||0===this.stateManagement.getState(pn.renderedViewModuleCount)||!0===this.flyoutData.common.isPane;return Promise.resolve(s)}},{key:"renderModule",value:(D=e(o().mark((function t(){var n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.flyoutData.dataStoreModule.CouponData,a=null===(n=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===n?void 0:n.exclusiveCouponsForDomain,!(i&&i.Coupons&&i.Coupons.length>0)){t.next=25;break}return t.next=5,this.acUtilities.setupAttainableCoupons();case 5:if((r=document.createElement("msft-edge-shopping-section")).id="couponSection",this.utilities.applyStyles(r,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),!this.shouldHideCoupons()){t.next=12;break}r.style.display="none",t.next=14;break;case 12:return t.next=14,this.populateCouponList(r,!1,!1,this.flyoutData.common.bannerContext);case 14:return s=this.couponsUXConfig.SetExpandableTitleAsNumCoupons?1===i.Coupons.length?this.flyoutData.strings.couponExpandableTitleWithNumSingular:this.utilities.replaceValueInKey("couponExpandableTitleWithNum",this.flyoutData.strings.couponExpandableTitleWithNum,i.Coupons.length.toString()):this.couponsUXConfig.SetExpandableTitleAsViewCoupons?this.flyoutData.strings.couponExpandableTitleViewCoupons:1===i.Coupons.length?this.flyoutData.strings.couponSectionTitle:this.flyoutData.common.isPane?this.flyoutData.strings.couponSectionPanePluralTitle:this.utilities.replaceValueInKey("couponSectionPluralTitle",this.flyoutData.strings.couponSectionPluralTitle,i.Coupons.length.toString()),this.stateManagement.addEventListener(hn.ModulesRendered,function(){var t=e(o().mark((function t(e){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.detail)||void 0===n||!n.modules||!l.common.isPane){t.next=10;break}if(i=e.detail.modules,1!==(a=i.filter((function(t){return t.paneTab===_t.CONTEXTUAL}))).length||a[0].name!==Rt.COUPON){t.next=9;break}return b.isPaneOnlyModule=!0,t.next=7,b.populateCouponList(r,!1,!1,"");case 7:t.next=10;break;case 9:b.isPaneOnlyModule=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l=this.flyoutData,c=function(t){var e=bt.COUPON;return b.isPaneOnlyModule&&(e=bt.COUPONPANE),t&&l.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},u=this.acUtilities.filterAttainableCouponList(),this.utilities.createCommonListStructure(r,s,u,this.GetModuleName(),c,this.populateCouponList.bind(this)),this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===Tt.Auto?(d=new _(A.AutoTrigger),void 0!==this.flyoutData.common.popupOrigination&&(d.Metadata=JSON.stringify({popupOriginaionEnum:this.flyoutData.common.popupOrigination})),this.LogInfoEvent(S.EdgeFlyoutStatus,"Coupons available - auto trigger",d)):(h=new _(A.UserTrigger),this.LogInfoEvent(S.EdgeFlyoutStatus,"Coupons available - manual trigger",h)),p=this.CreateModule(r,wt.COUPON,Rt.COUPON,_t.CONTEXTUAL,Ft.SQUARES),t.abrupt("return",Promise.resolve(p));case 25:if(a&&a.length>0||this.utilities.hasSocialSelectors()){t.next=46;break}return(f=document.createElement("msft-edge-shopping-section")).id="emptyCouponSection",f.accordion=!0,f.title=this.flyoutData.strings.couponEmptyCouponTitle,g=this.utilities.createElement("DIV",{id:"emptyCouponDiv",style:"display: flex; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 12px;"}),(m=this.utilities.createElement("DIV",{style:"margin: 20px;"})).innerHTML=this.commonAssets.getErrorImage(),m.setAttribute("aria-hidden","true"),(v=this.utilities.createElement("P",{style:"font-weight: 600; margin-top: 5px; color: #666666;"})).className=yt.EmptyCoupon,v.textContent=this.flyoutData.strings.couponEmptyCouponTitle,(y=this.utilities.createElement("P",{style:"margin-top: 5px;  color: #666666;"})).className=yt.Small,y.textContent=this.flyoutData.strings.couponEmptyCouponSubTitle,g.appendChild(m),g.appendChild(v),g.appendChild(y),f.appendChild(g),C=this.CreateModule(f,wt.EMPTYCOUPON,Rt.EMPTYCOUPON,_t.CONTEXTUAL,Ft.BLOCK),t.abrupt("return",Promise.resolve(C));case 46:return t.abrupt("return",Promise.resolve(null));case 47:case"end":return t.stop()}}),t,this)}))),function(){return D.apply(this,arguments)})},{key:"populateMainHeader",value:(x=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,D,k,I,w,P,O,R,M,N,L,_,F,H,B,U,V,G,W,$,K,Y,j;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=this.flyoutData.common.shopping,f=this.flyoutData.dataStoreModule.CashBackData,g=this.flyoutData.dataStoreModule.CouponData,m=null!==(e=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.isCheckoutPageWithAutoApply)&&void 0!==e&&e,v=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.BgaaResultState,y=null!==(a=null===(r=this.flyoutData.dataStoreModule.CouponData)||void 0===r?void 0:r.BgaaSavings)&&void 0!==a?a:"",this.renderHeader(this.flyoutData.common.shopping),this.flyoutData.common.isCheckoutPageUsingUrlMatch&&null!==(s=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==s&&s.isCashbackEstimationSupportedForDomain&&this.pageHandlerModule.TriggerExperiment(Be.cashbackEstimate),!Hl.isCashbackEstimateEnabled(this.flyoutData)){t.next=20;break}return t.next=11,this.pageHandlerModule.GetStorageValue("EstimatedCashback:CartData");case 11:return C=t.sent,t.next=14,Hl.getEstimatedCashbackData(C,this.pageHandlerModule,this.flyoutData.common.domain);case 14:if(this.estimatedCashbackData=t.sent,this.estimatedCashbackData){t.next=20;break}return t.next=18,this.pageHandlerModule.GetStorageValue("EstimatedCashback:Data");case 18:b=t.sent;try{this.estimatedCashbackData=JSON.parse(null===(S=JSON.parse(null==b||null===(x=b.value)||void 0===x?void 0:x.stringValue))||void 0===S?void 0:S.value)}catch(t){}case 20:if(!this.utilities.isPinterest()||null===(l=this.flyoutData.dataStoreModule.CouponData)||void 0===l||!l.DomainName){t.next=24;break}new QI(this.flyoutData,this.utilities).createCouponHeader(null===(E=this.flyoutData.dataStoreModule.CouponData)||void 0===E?void 0:E.FriendlyDomainName,this.flyoutData.dataStoreModule.CouponData.DomainName,this.flyoutData.dataStoreModule.CouponData.Coupons.length,p),t.next=36;break;case 24:if(!(null!==(c=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==c&&c.canRenderCashback&&f&&!f.isCashBackActivated&&g&&g.Coupons)||null!==(u=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==u&&u.isPersonalizedCashback||null!==(d=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==d&&d.isSignInSupportedDomainCashBack){t.next=35;break}return t.next=27,this.createMergedTitle();case 27:(A=t.sent)&&(A.style.textAlign="center",A.slot="header-content"),(D=this.createCBSeeMore())&&(D.slot="header-content"),p.appendChild(A),D&&p.appendChild(D),t.next=36;break;case 35:this.couponsUXConfig.ShowCouponHeader&&((k=this.utilities.createElement("H2")).className="txtLarge",k.style.textAlign="center",k.style.fontWeight="500",I=this.acUtilities.hasOnlyAttainableCoupons(),w=this.acUtilities.isCouponAttained(),P=I&&this.acUtilities.lastAttainableCoupon,v===T.Negative?k.textContent=this.flyoutData.strings.bgaaFailedTitle:this.couponsUXConfig.ShowNumCouponsInHeader&&g&&g.Coupons&&!I?(O=g.Coupons.length,R=void 0!==O?O.toString():"",O&&O>1?(M=this.utilities.replaceValueInKey("couponTitleWithNum",this.flyoutData.strings.couponTitleWithNum,R),k.textContent=M):k.textContent=this.flyoutData.strings.couponTitleWithNumSingular):k.textContent=P?w?this.flyoutData.strings.attCouponHeaderUnlocked:this.flyoutData.strings.attCouponHeaderLocked:this.flyoutData.strings.couponTitle,k.style.display="flex",k.style.flexDirection="row",k.style.alignItems="center",P&&!w&&((N=this.utilities.createElement("IMG")).src=this.flyoutData.common.resourcesEndpoint+"common/Lock.png",N.setAttribute("aria-hidden","true"),N.style.width="36px",N.style.height="36px",N.style.marginLeft="4px",k.appendChild(N)),k.style.marginBottom="12px",k.slot="header-content",p.appendChild(k),v===T.Positive||v===T.Negative?(_=this.utilities.createElement("H2"),F=this.utilities.createElement("H2"),H=this.utilities.createElement("H2"),B=this.utilities.createElement("H2"),v===T.Positive?(L=z.PositiveResultShown,this.flyoutData.dataStoreModule.CouponData&&(this.flyoutData.dataStoreModule.CouponData.BgaaViewedContent=L.toString()),this.createBgaaTitleStyle(_,"txtMedium","center","300",this.flyoutData.strings.bgaaSuccessLeftTitle),this.createBgaaTitleStyle(F,"txtLarge","center","500","$"+y),this.createBgaaTitleStyle(H,"txtMedium","center","300",this.flyoutData.strings.bgaaSuccessRightTitle),this.createBgaaTitleStyle(B,"txtLarge","center","500",this.flyoutData.strings.bgaaSuccessRightText)):(L=z.NegativeResultShown,this.flyoutData.dataStoreModule.CouponData&&(this.flyoutData.dataStoreModule.CouponData.BgaaViewedContent=L.toString()),U=g&&g.Coupons&&g.Coupons.length>0?1===g.Coupons.length?this.flyoutData.strings.couponSectionTitle:this.utilities.replaceValueInKey("couponSectionPluralTitle",this.flyoutData.strings.couponSectionPluralTitle,g.Coupons.length.toString()):this.flyoutData.strings.bgaaFailedLeftTitle,this.createBgaaTitleStyle(_,"txtMedium","center","300",U),this.createBgaaTitleStyle(F,"txtMedium","center","500",this.flyoutData.strings.bgaaFailedLeftText),this.flyoutData.common.currentTheme===xt.Light?F.style.color="#228B22":F.style.color="#FFFFFF",this.createBgaaTitleStyle(H,"txtMedium","center","300",this.flyoutData.strings.bgaaFailedRightTitle),this.createBgaaTitleStyle(B,"txtMedium","center","500",this.flyoutData.strings.bgaaFailedRightText)),this.pageHandlerModule.SendBackgroundAAMetrics(L),V=this.createBgaaContainer(_,F),G=this.createBgaaContainer(H,B),(W=this.utilities.createElement("DIV")).style.height="auto",W.style.width="1px",W.style.border="1px solid #00FFFF",($=this.utilities.createElement("DIV")).style.top="4px",$.style.width="100%",$.style.display="flex",$.style.justifyContent="space-between",$.appendChild(V),$.appendChild(W),$.appendChild(G),$.slot="header-content",p.appendChild($)):this.instantSavings&&(k.textContent=this.flyoutData.strings.couponTitleInstantSavings,(K=this.utilities.createElement("DIV")).textContent=this.instantSavings,K.slot="header-content",K.className="txtLarge txtInstantSavings",K.style.textAlign="center",K.style.fontWeight="600",K.style.marginBottom="12px",p.appendChild(K)));case 36:Y=null!==(h=null==g?void 0:g.IsAutoApplyAvailable)&&void 0!==h&&h,this.flyoutData.common.openedWith===Tt.Banner&&Y&&!m&&((j=this.utilities.createElement("P")).className="txtSmall",j.textContent=this.flyoutData.strings.bannerSubTitleFlyout,j.slot="header-content",j.style.marginTop="10px",this.flyoutData.common.currentTheme===xt.Light?j.style.color="#666666":j.style.color="#FFFFFF",this.flyoutData.common.shopping.appendChild(j));case 38:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"PostProcessing",value:function(t,e,n){if(t===Rt.EMPTYCOUPON){var i=n.shadowRoot;if(i){var o=i.querySelector("fluent-accordion-item"),a=this.stateManagement.getState(pn.topModulePriority)!==wt.MAX;this.HandleEmptyModule(o,n,a)}this.DismissIfECInvalidFlyout()}else this.canRenderAutoApplyButton()?(this.createAutoApplyButton(),this.DismissIfECInvalidAfterAAFlyout()):0===e&&this.DismissIfECInvalidFlyout()}},{key:"populateCouponList",value:(b=e(o().mark((function t(e,n,i,a){var r,s,l,c,u,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=this.acUtilities.filterAttainableCouponList())){t.next=20;break}if(s.length>0&&(r=s.length),l=0,!n){t.next=14;break}if(c=new Yr(E.SeeMoreCoupons),this.pageHandlerModule.RecordAsUserAction(is.VIEW_MORE_COUPONS),this.LogInfoEvent(S.ButtonClick,"",c),l=this.isPaneOnlyModule?bt.COUPONPANE:bt.COUPON,!this.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=12;break}return t.next=12,this.utilities.userEngagementUtilities.addEngagement(ll.POSITIVE,this.flyoutData.common.popupOrigination,Rt.COUPON.toString(),qs.seeMoreCouponsWeight);case 12:t.next=15;break;case 14:this.isPaneOnlyModule&&r>bt.COUPONPANE&&"viewAll"!==a?r=bt.COUPONPANE:r>bt.COUPON&&"viewAll"!==a&&(r=bt.COUPON);case 15:if(u=null,(n||this.flyoutData.common.isPane)&&(u=e.querySelector("#divCouponWrapper"))?!n&&this.isPaneOnlyModule&&(u.remove(),(u=this.utilities.createElement("DIV")).id="divCouponWrapper"):(u=this.utilities.createElement("DIV")).id="divCouponWrapper",u){for(d=l;d<r;d++)this.createNewCouponTile(u,s[d],a,l,n,i,d),n||e.appendChild(u);this.flyoutData.common.isPane&&(u.style.marginLeft="20px",u.style.marginRight="20px")}h=this.flyoutData,this.stateManagement.addEventListener(hn.onCashBackActivated,(function(){var t=h.common.shopping.querySelectorAll("msft-shopping-coupon-new");t&&t.length>0&&t.forEach((function(t){t.className.includes("isStackable")||(t.cashbackNonstackableMessage=h.strings.cbNonStackableCoupon)}))}));case 20:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return b.apply(this,arguments)})},{key:"createAutoApplyButton",value:(C=e(o().mark((function t(){var n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.flyoutData.common.shopping.querySelector("#divAutoApplyActions"),this.flyoutData.common.shopping&&!n&&(r=this.flyoutData.dataStoreModule.CashBackData,s=null===(i=this.flyoutData.dataStoreModule.CashBackData)||void 0===i?void 0:i.canRenderCashback,l=null==r?void 0:r.isCashBackActivated,c=null===(a=this.flyoutData.dataStoreModule.CouponData)||void 0===a?void 0:a.BgaaResultState,(u=this.utilities.createElement("DIV")).id="divAutoApplyActions",u.style.width="100%",u.slot="actions",u.style.display="flex",u.style.justifyContent="center",u.style.alignItems="center",u.style.flexDirection="column",d=this.utilities.createPrimaryButton(),h=!1,p=!1,!s||l||null!=r&&r.isSignInSupportedDomainCashBack?(h=c===T.Positive,p=h||c===T.Negative,c===T.Negative?d.textContent=this.flyoutData.strings.couponAutoApplyButtonRetry:d.textContent=this.instantSavings?this.flyoutData.strings.couponAutoApplyButtonInstantSavings:this.couponsUXConfig.UseAlternativeCouponApplyButtonText?this.flyoutData.strings.couponAutoApplyButtonAlt:this.flyoutData.strings.couponAutoApplyButton,u.appendChild(d),u.classList.add("headerMargin")):(this.flyoutData.common.isPane||u.classList.add("headerMargin"),d.textContent=this.utilities.shouldRenderSmallNotification()?this.flyoutData.strings.mergedNewAutoApplyButton:this.flyoutData.strings.mergedAutoApplyButton,u.appendChild(d),f=new _(A.CashBackButtonShown),this.LogInfoEvent(S.EdgeFlyoutStatus,d.textContent+" button shown at actions slot  auto apply visible: true",f),this.utilities.shouldRenderSmallNotification()?u.style.marginTop="12px":((g=this.utilities.createElement("fluent-button")).setAttribute("appearance","lightweight"),g.textContent=this.flyoutData.strings.couponAutoApplyWithoutCB,g.addEventListener("click",e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Yr(E.AutoApply),b.pageHandlerModule.RecordAsUserAction(is.TRY_ALL_COUPONS),b.LogInfoEvent(S.ButtonClick,"",e),t.next=5,b.utilities.pauseAutoOpenForPopupOrigination(Fe.AUTO_SHOW_COUPONS_CHECKOUT);case 5:if(!b.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=8;break}return t.next=8,b.utilities.userEngagementUtilities.addEngagement(ll.POSITIVE,b.flyoutData.common.popupOrigination,Rt.COUPON.toString(),qs.autoApplyWeight);case 8:b.pageHandlerModule.ApplyAllCoupons(h);case 9:case"end":return t.stop()}}),t)})))),u.appendChild(g)),this.pageHandlerModule.RecordAsContentViewed(ss.REBATES_ACTIVATE_CASHBACK),m=new _(A.ModuleViewed),v="".concat(ss.REBATES_ACTIVATE_CASHBACK),v+=" merged with coupons at checkout",this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,v,m)),y=this.flyoutData.common.currentDevice,d.addEventListener("click",e(o().mark((function t(){var e,n,i,a,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y!==St.Desktop){t.next=15;break}if(e=E.AutoApply,p&&(e=h?E.BackgroundAutoApplyPositive:E.BackgroundAutoApplyNegative),n=new Yr(e),b.LogInfoEvent(S.ButtonClick,"",n),l||!s||null!=r&&r.isSignInSupportedDomainCashBack){t.next=15;break}return i=new Yr(E.ActivateCashBack),b.LogInfoEvent(S.ButtonClick,"Cash back activated",i),d.disabled=!0,a=new CustomEvent(hn.StyleProcessingState,{detail:{target:d}}),b.stateManagement.dispatchEvent(a),t.next=13,b.pageHandlerModule.ActivateRebates(!0);case 13:t.sent.activated&&(c=new CustomEvent(hn.onCashBackActivatedForRewards),b.stateManagement.dispatchEvent(c));case 15:return l||!s||null!=r&&r.isSignInSupportedDomainCashBack?p&&(u=h?z.PositiveResultClicked:z.NegativeResultClicked,b.pageHandlerModule.SendBackgroundAAMetrics(u)):b.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CASHBACK),b.pageHandlerModule.RecordAsUserAction(is.TRY_ALL_COUPONS),t.next=19,b.utilities.pauseAutoOpenForPopupOrigination(Fe.AUTO_SHOW_COUPONS_CHECKOUT);case 19:if(b.pageHandlerModule.ApplyAllCoupons(h),!b.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=23;break}return t.next=23,b.utilities.userEngagementUtilities.addEngagement(ll.POSITIVE,b.flyoutData.common.popupOrigination,Rt.COUPON.toString(),qs.autoApplyWeight);case 23:case"end":return t.stop()}}),t)})))),this.flyoutData.common.shouldShowCookieConsent&&(C=this.utilities.createCookieConsent())&&u.appendChild(C),this.flyoutData.common.shopping.prepend(u));case 2:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"isCreateTriviaRendered",value:function(){return!0===this.stateManagement.getState(pn.isCreateTriviaRendered)}},{key:"updateCreateTriviaRenderedState",value:function(){this.stateManagement.setState(pn.isCreateTriviaRendered,!0)}},{key:"renderHeader",value:(y=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.acUtilities.shouldCreateBanner();case 2:if(!t.sent){t.next=7;break}return t.next=5,this.acUtilities.createBanner(e);case 5:t.next=8;break;case 7:this.CreateTrivia(e);case 8:this.canRenderAutoApplyButton()&&this.CreateExpectationHeader(e);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"CreateExpectationHeader",value:(v=e(o().mark((function t(e){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getCouponRates(),(i=this.getExpectation(n))!==$.Medium&&i!==$.None){t.next=4;break}return t.abrupt("return");case 4:a=this.createHeaderDiv(),this.createAndAppendCouponExpectation(a,i),e.prepend(a);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"getCouponRates",value:function(){var t=this.acUtilities.filterAttainableCouponList();return t&&t.length>0?t.filter((function(t){return void 0!==t.successRate})).map((function(t){return t.successRate})):[]}},{key:"CreateTrivia",value:(m=e(o().mark((function t(e){var n,i,a,r,s,l,c,u,d,h,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Trivia,r=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.SavingsFound,!a&&!r){t.next=25;break}if(s=this.createTriviaDiv(),l=this.createTriviaTitle(),!a){t.next=13;break}c=this.createSavingsSpan(),u=this.utilities.replaceValueInKey("triviaTitleNew",this.flyoutData.strings.triviaTitleNew,a.SellerName),c.textContent="".concat(Dt.currency).concat(Number(a.AverageSavings).toFixed(2)),c.textContent=Dl.replaceStringsPlaceholders(c.textContent),this.utilities.populateSingleChildHtml(l,u,c),t.next=23;break;case 13:if(!r){t.next=23;break}return t.next=16,nw.calculateTotalSavings(this.flyoutData,this.pageHandlerModule,r);case 16:if(!((p=t.sent)<=0)){t.next=19;break}return t.abrupt("return");case 19:return t.next=21,this.createSavingsFoundTrivia(p,l);case 21:f=new _(A.SavingsFoundShown,void 0,p,null===(d=this.flyoutData)||void 0===d||null===(h=d.common)||void 0===h?void 0:h.domain),this.LogInfoEvent(S.EdgeFlyoutStatus,"Savings Found Shown",f);case 23:s.appendChild(l),e.prepend(s);case 25:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"createHeaderDiv",value:function(){var t=this.utilities.createElement("DIV",{style:"width: 100%;\n                    display: flex;\n                    align-items: center;\n                    flex-direction: column"});return this.shouldHideCoupons()&&!this.utilities.showNewFooter()&&(t.style.marginBottom="10px"),t.style.marginTop="10px",t}},{key:"createAndAppendCouponExpectation",value:(g=e(o().mark((function t(e,n){var i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.getIconSrcForExpectation(n),a=this.getTooltipContentForExpectation(n),r=this.createHeaderRow(this.flyoutData.strings.couponExpectationHeader,n,i,a),e.append(r);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return g.apply(this,arguments)})},{key:"getExpectation",value:function(t){if(!t||0===t.length)return $.None;var e=Math.max.apply(null,t);return e>=75||e>=50?$.High:this.isHighTrafficDomain()?$.Low:$.None}},{key:"isHighTrafficDomain",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData;return!(!e||!e.isHighTrafficDomain)&&e.isHighTrafficDomain}},{key:"getIconSrcForExpectation",value:function(t){return this.flyoutData.common.resourcesEndpoint+"couponExpectation/"+t+".svg"}},{key:"getTooltipContentForExpectation",value:function(t){return t===$.High?this.flyoutData.strings.highCouponExpectationTooltip:t===$.Medium?this.flyoutData.strings.mediumCouponExpectationTooltip:t===$.Low?this.flyoutData.strings.lowCouponExpectationTooltip:""}},{key:"createHeaderRow",value:function(t,e,n,i){var o=this.createExpectationRow();return this.createAndAppendIcon(o,n),this.createAndAppendContent(o,t,e,i),o}},{key:"createAndAppendIcon",value:(p=e(o().mark((function t(e,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=this.createIcon(n)).style.marginRight="10px",i.style.width="22px",e.append(i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},{key:"createAndAppendContent",value:(h=e(o().mark((function t(e,n,i,a){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.utilities.createElement("DIV",{style:"display:flex;\n                    align-items: center;"}),this.createAndAppendNormalContent(r,n,!1),this.createAndAppendNormalContent(r,i,!0),this.createAndAppendTooltip(r,a),e.append(r);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return h.apply(this,arguments)})},{key:"createAndAppendNormalContent",value:(d=e(o().mark((function t(e,n,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=this.create16pxExpectationSpan(i)).textContent=n,a.style.marginRight=i?"7px":"5px",e.append(a);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return d.apply(this,arguments)})},{key:"createAndAppendTooltip",value:(c=e(o().mark((function t(e,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(i=this.setUpMoreInfoIcon(n),e.append(i));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"setUpMoreInfoIcon",value:function(t){var e=this.utilities.createElement("DIV",{style:"width: 5%;\n                display: flex;\n                justify-content:center;"}),n=this.createIcon(this.flyoutData.common.resourcesEndpoint+"priceHistory/infoIcon.svg");n.slot="hover-anchor",n.setAttribute("aria-label","Info Icon"),n.setAttribute("aria-hidden","false");var i=this.createTooltipElement(t);return this.configureTooltipEventListeners(i),this.configureTooltipCaratSizes(i,n),i.append(n),e.appendChild(i),e}},{key:"createTooltipElement",value:function(t){var e=this.utilities.createElement("msft-shopping-tooltip",{style:"align-self: center;\n                    margin: 0"});return e.width="200px",e.content=t,e.setAttribute("aria-label",t),e.className="btnTooltip",e}},{key:"configureTooltipEventListeners",value:function(t){var e=this,n=!0,i=Date.now();this.addTooltipEventListeners(t,(function(){if(n){i=Date.now();var t=new _(A.CouponExpectationTooltipOpen);e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Coupon expectation - tooltip opened",t),n=!1}}),(function(){if(!n){if(Date.now()-i>2e3){var o=new _(A.CouponExpectationTooltipRead);e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Coupon expectation - tooltip hovered >2s",o)}n=!0,t.className="btnTooltip"}}))}},{key:"addTooltipEventListeners",value:function(t,e,n){t.addEventListener("mouseenter",(function(){e()})),t.addEventListener("mouseleave",(function(){n()})),t.addEventListener("focus",(function(){e()})),t.addEventListener("blur",(function(){n()}))}},{key:"configureTooltipCaratSizes",value:function(t,e){var n=this;t.addEventListener("hover",(function(){n.utilities.setupTooltip(t)}))}},{key:"createIcon",value:function(t){var e=this.utilities.createElement("IMG");return e.src=t,e.setAttribute("aria-hidden","true"),e}},{key:"canRenderAutoApplyButton",value:function(){var t,e,n,i,o,a=this.stateManagement.getState(pn.isAutoApplyVisible),r=null===(t=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===t?void 0:t.shouldRenderCheckoutAutofill,s=this.acUtilities.hasOnlyAttainableCoupons(),l=null!==(e=null===(n=this.acUtilities.lastAttainableCoupon)||void 0===n?void 0:n.minimumPurchase)&&void 0!==e?e:null!==(i=null===(o=this.acUtilities.lastAttainableCoupon)||void 0===o?void 0:o.calculatedCutoffPrice)&&void 0!==i?i:0;return!!(a&&!r&&!s||s&&this.acUtilities.lastAttainableCoupon&&l&&this.cartValue&&l<this.cartValue)}},{key:"createBgaaTitleStyle",value:function(t,e,n,i,o){t.className=e,t.style.textAlign=n,t.style.fontWeight=i,t.textContent=o}},{key:"createBgaaContainer",value:function(t,e){var n=this.utilities.createElement("DIV");return n.style.width="100%",n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="space-between",n.appendChild(t),n.appendChild(e),n}},{key:"createSavingsFoundTrivia",value:(a=e(o().mark((function t(e,n){var i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.flyoutData.strings.savingsFoundTitle,a=this.createSavingsSpan(),r="".concat(Dt.currency).concat(e.toFixed(2)),a.textContent=Dl.replaceStringsPlaceholders(r),s=this.utilities.createElement("DIV",{className:"savingsFoundTextContainer"}),this.utilities.populateSingleChildHtml(s,i,a),n.style.flexDirection="column",n.appendChild(s);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"createTriviaTitle",value:function(){var t=this.utilities.createElement("H3");return t.className="triviaTitle",t.style.display="flex",t.style.columnGap="3px",t.style.fontSize="12px",t}},{key:"create16pxExpectationSpan",value:function(t){var e=this.createSavingsSpan();return e.style.fontSize="16px",t||(e.style.fontWeight="400",e.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#B0B0B0":"#6C6C6C"),e}},{key:"createSavingsSpan",value:function(){return this.utilities.createElement("SPAN",{style:"display: inline; vertical-align: middle; color: var(--neutral-foreground-rest); font-size: 12px; font-weight: bold;"})}},{key:"createTriviaDiv",value:function(){var t=this.createExpectationRow();return t.style.background=this.flyoutData.common.currentTheme===xt.Dark?"linear-gradient(90deg, rgba(238, 228, 0, 0.1) 0%, rgba(0, 224, 255, 0.1) 47.4%, rgba(158, 0, 255, 0.1) 100%)":"linear-gradient(90deg, #FFF9D9 0%, #E9FBFF 53.12%, #DDEBFF 100%)",t}},{key:"createExpectationRow",value:function(){var t=this.utilities.createElement("DIV");return t.slot="start-content",t.style.width="100%",t.style.minHeight="30px",t.style.justifyContent="center",t.style.alignItems="center",t.style.display="flex",this.flyoutData.common.isPane&&(t.style.marginBottom="12px"),t}},{key:"DismissIfECInvalidFlyout",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===t?void 0:t.shouldRenderCheckoutAutofill;this.flyoutData.experimentData.isExperimentActive(Be.expressCheckout)&&this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.pageStatus.ExpressCheckoutStatus&&!e&&this.DismissECInvalidFlyout()}},{key:"DismissIfECInvalidAfterAAFlyout",value:(i=e(o().mark((function t(){var e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.flyoutData.common.edgeDriverDataForFlyout&&this.flyoutData.common.edgeDriverDataForFlyout.is_auto_apply_completed&&this.flyoutData.common.edgeDriverDataForFlyout.express_checkout_status&&this.flyoutData.experimentData.isExperimentActive(Be.expressCheckout)&&this.pageHandlerModule.GetStorageValue("ECInvalidDismiss").then((function(t){var n;if("true"===(null==t||null===(n=t.value)||void 0===n?void 0:n.stringValue)){var i=new ds;i.stringValue="false",e.pageHandlerModule.SetStorageValue("ECInvalidDismiss",i),e.DismissECInvalidFlyout()}}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"DismissECInvalidFlyout",value:function(){var t=new _(A.CheckoutUserDataInvalid);this.LogInfoEvent(S.EdgeFlyoutStatus,"",t),this.pageHandlerModule.DismissPopup()}},{key:"createNewCouponTile",value:function(t,n,i,a,r,s,l){var c,u,d=this,h=document.createElement("msft-shopping-coupon-new");h.name=n.couponCode,h.subTitle=n.attribution,h.description=this.utilities.cleanInput(n.title),h.indicatorMessage=this.flyoutData.strings.couponCopyLabelRefresh.toUpperCase(),h.selectedIndicatorMessage=this.flyoutData.strings.couponCopied.toUpperCase(),h.setAttribute("title","".concat(n.couponCode," - ").concat(n.title)),n.successRate&&n.successRate>=60&&(h.successRate="".concat(n.successRate,"% SUCCESS")),this.acUtilities.addLockIcon(n,h),n.couponCode===i&&(h.style.boxSizing="border-box",h.style.boxShadow="0px 0px 4px 1px rgba(114, 155, 238, 0.4), 0px 0px 8px 2px rgba(114, 155, 238, 0.2)",h.style.borderRadius="4px");var p=null===(c=this.flyoutData.dataStoreModule.CashBackData)||void 0===c?void 0:c.canRenderCashback;h.label="".concat(this.flyoutData.strings.couponCopyLabel," ").concat(n.couponCode),!n.isStackable&&p&&null!==(u=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==u&&u.isCashBackActivated&&(h.cashbackNonstackableMessage=this.flyoutData.strings.cbNonStackableCoupon),n.isStackable&&(h.className+=" isStackable"),h.addEventListener("click",e(o().mark((function t(){var e,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new Yr(E.CouponCopied),i="Coupon copied",!n.isStackable&&p?(e=new Yr(E.CouponCopiedNonStackableWithCashBack),i="Coupon copied, nonStackable"):n.isStackable&&p&&(e=new Yr(E.CouponCopiedStackableWithCashBack),i="Coupon copied, stackable"),d.LogInfoEvent(S.ButtonClick,i,e),d.pageHandlerModule.RecordAsUserAction(is.COUPONS_COPIED),d.pageHandlerModule.CopyCoupon(h.name),!d.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=9;break}return t.next=9,d.utilities.userEngagementUtilities.addEngagement(ll.POSITIVE,d.flyoutData.common.popupOrigination,Rt.COUPON.toString(),qs.selectCouponWeight);case 9:case"end":return t.stop()}}),t)})))),t.appendChild(h);var f=this.flyoutData.common.currentDevice;l===a&&r&&s&&f===St.Desktop&&h&&h.focus()}},{key:"isAutoApplyVisible",value:function(){var t,e,n=this.flyoutData.dataStoreModule.CashBackData;return null!==(t=(null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.isCheckoutPageWithAutoApply)&&!(null!=n&&n.shouldRenderCashBackNotification))&&void 0!==t&&t}},{key:"createCBSeeMore",value:function(){var t,e=new CustomEvent(hn.CreateCBLearnMore,{detail:{callback:function(e){t=e}}});return this.stateManagement.dispatchEvent(e),t}},{key:"createMergedTitle",value:(n=e(o().mark((function t(){var e,n,i,a,r,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.utilities.createElement("DIV",{style:"margin-left: 15px; margin-right: 15px;"})).setAttribute("role","heading"),e.setAttribute("aria-level","2"),e.id="divMergedCashBackTitle",(n=this.utilities.createElement("H2")).className="h2RebatesTitle",this.flyoutData.common.isPane||(n.style.marginTop="12px"),i=this.flyoutData,a=this.utilities,r=new CustomEvent(hn.CreateCommissionArrow,{detail:{callback:function(t){if(t){var e,o,r=null===(e=i.dataStoreModule.CouponData)||void 0===e||null===(o=e.Coupons)||void 0===o?void 0:o.length,l=void 0!==r?r.toString():"";if(r&&r>1){var c=a.replaceValueInKey(s.estimatedCashbackData?"cbMergedTitleEstimate":"cbMergedTitle",s.estimatedCashbackData?s.flyoutData.strings.cbMergedTitleEstimate:s.flyoutData.strings.cbMergedTitle,l);s.estimatedCashbackData?a.populateSingleChildHtml(n,c,t,s.estimatedCashbackData):a.populateSingleChildHtml(n,c,t)}else a.populateSingleChildHtml(n,s.estimatedCashbackData?s.flyoutData.strings.cbMergedSingularTitleEstimate:s.flyoutData.strings.cbMergedSingularTitle,t,s.estimatedCashbackData)}}}}),this.stateManagement.dispatchEvent(r),e.appendChild(n),t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"HandleEmptyModule",value:function(t,e,n){var i=this,o=e.querySelector("#emptyCouponDiv");if(o)if(n)o.style.display="none",e.accordion=!1,un.queueUpdate((function(){var t=null==e?void 0:e.shadowRoot;if(t){var n=t.querySelector(".heading");if(n&&(n.style.marginTop="6px"),i.flyoutData.common.isPane){var o=t.querySelector(".control");o&&(o.style.height="56px",o.style.display="flex",o.style.alignItems="center")}}}));else if(t){e.accordion=!0,e.expanded=!0;var a=t.shadowRoot;if(a){var r=a.querySelector(".heading");r&&(r.style.display="none")}var s=new _(A.EmptyCoupons);this.LogInfoEvent(S.EdgeFlyoutStatus,"Empty coupons image was shown",s)}}},{key:"LogInfoEvent",value:function(t,e,n){this.logModule.LogInfoEvent(t,e,n,dn.CouponImpressionId)}},{key:"shouldHideCoupons",value:function(){var t;return null!==(t=this.flyoutData.common.openedWith===Tt.Auto&&(this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_COUPONS_CHECKOUT||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_CHECKOUT))&&void 0!==t&&t}}]),I}(Bb),aw=ow;function rw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var sw,lw=function(t){u(l,t);var n,i,a=rw(l);function l(){return s(this,l),a.apply(this,arguments)}return r(l,[{key:"RenderNotification",value:(i=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.populateMainHeader(),this.utilities.showNewFooter()&&this.flyoutData.common.shopping.classList.add("noSections"),t.abrupt("return",Promise.resolve(null));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:(n=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ShouldRenderModule();case 2:if(t.t1=t.sent,!t.t1){t.next=5;break}t.t1=this.flyoutData.common.openedWith===Tt.Auto;case 5:if(t.t0=t.t1,!t.t0){t.next=8;break}t.t0=this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_COUPONS_CHECKOUT||null!==(e=this.flyoutData.dataStoreModule.CouponData)&&void 0!==e&&e.isCheckoutPageWithAutoApply&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_REBATES_CHECKOUT;case 8:if(!t.t0){t.next=10;break}return t.abrupt("return",Promise.resolve(!0));case 10:return t.abrupt("return",Promise.resolve(!1));case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"GetNotificationName",value:function(){return Mt.COUPON}},{key:"PostProcessingNotification",value:function(t,e){this.PostProcessing(Rt.COUPON,0,e)}}]),l}(aw),cw=lw,uw=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #exclusiveCouponSection {\n            width: 100%;\n            text-align: left;\n        }\n        #divImgWrapper {\n            width: 48px;\n            height: 48px;\n            border-radius: 50%;\n            overflow: hidden;\n            z-index: 1;\n        }\n        #divProfileImgWrapper {\n            width: 58px;\n            height: 58px;\n            background-color: var(--fill-color);\n            border-radius: 50%;\n            place-self: center;\n        }\n        #divInfluencerInfo {\n            width: 100%;\n            display: grid;\n            grid-template-columns: 70px auto;\n            place-self: center;\n            align-items:center;\n            column-gap: 16px;\n            min-height: 70px;\n            box-sizing: border-box;\n            padding: 12px;\n            padding-bottom: 0px;\n            padding-top: 0px;\n            z-index: 5;\n        }\n        .divRetailerCoupon {\n            width: 100%;\n            display: grid;\n            grid-template-columns: 40% 60%;\n            place-self: center;\n            align-items:center;\n            margin-bottom: 5px;\n            background: linear-gradient(0deg, #FFFFFF, #FFFFFE);\n            border: 1px solid rgba(234, 230, 232, 0.5);\n            box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.04);\n            border-radius: 8px;\n            column-gap: 12px;\n            min-height: 105px;\n            box-sizing: border-box;\n            padding: 8px;\n        }\n        .divCouponCodeWrapper {\n            display: flex;\n            flex-direction: column;\n            place-self: center;\n            background: #F7F4F5;\n            border-radius: 8px;\n            width: 100%;\n            height: 100%;\n            justify-content: center;\n            align-items: center;\n            row-gap: 8px;\n        }\n        .divRetailerInfluencerWrapper {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            align-items: center;\n            column-gap: 8px;\n            padding: 5px;\n        }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        .divRetailerInfluencerWrapper .txtSmall {\n            opacity: 1!important;\n        }\n    "}},{key:"getHeaderStyles",value:function(){return"\n            ::part(header) {\n                margin: 0px!important;\n            }\n            ::part(sections) {\n                margin: 0px!important;\n            }"}},{key:"getCouponsStyles",value:function(){return".ytCouponElement {\n            display: flex;\n            flex-direction: column;\n            row-gap: 8px;\n            justify-content: center;\n            align-items: center;\n            width: 150px;\n            min-height: 74px;\n            background: linear-gradient(0deg, #FFFFFF, #FFFFFF);\n            border: 1px solid rgba(234, 230, 232, 0.5);\n            box-sizing: border-box;\n            box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.04);\n            border-radius: 8px;\n            cursor: pointer;\n        }\n        .divYTCouponWrapperTemplate {\n            display: grid;\n            grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n            grid-gap: 12px;\n            margin-bottom: 10px;\n            margin-left: 12px;\n            margin-right: 12px;\n        }"}},{key:"getStylesYoutuberTile",value:function(){return"\n        #exclusiveCouponSection msft-shopping-coupon-new::part(control) {\n            display: grid;\n            grid-template-columns: 40% 60%;\n        }"}},{key:"getYoutubeIcon",value:function(){return mt.getTrustedHTML(sw||(sw=j(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12" fill="none">\n        <path d="M15.6654 1.7491C15.4811 1.06026 14.9397 0.518933 14.2509 0.334541C13.0036 1.0014e-07 7.99997 0 7.99997 0C7.99997 0 2.99637 1.0014e-07 1.74909 0.334541C1.06026 0.518933 0.518933 1.06026 0.334541 1.7491C1.0014e-07 2.99637 0 5.60026 0 5.60026C0 5.60026 1.0014e-07 8.20416 0.334541 9.45145C0.518933 10.1403 1.06026 10.6816 1.74909 10.866C2.99637 11.2005 7.99997 11.2005 7.99997 11.2005C7.99997 11.2005 13.0036 11.2005 14.2509 10.866C14.9397 10.6816 15.4811 10.1403 15.6654 9.45145C16 8.20416 16 5.60026 16 5.60026C16 5.60026 15.9987 2.99637 15.6654 1.7491Z" fill="#FF0000"/>\n        <path d="M6.39844 7.99984L10.5552 5.60013L6.39844 3.20038V7.99984Z" fill="white"/>\n        </svg>'])))}}]),t}();function dw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var hw=function(t){u(h,t);var n,i,a,c,d=dw(h);function h(t,e,n){var i;return s(this,h),f(l(i=d.call(this)),"assets",void 0),f(l(i),"flyoutData",void 0),f(l(i),"utilities",void 0),f(l(i),"logModule",void 0),f(l(i),"stateManagement",void 0),f(l(i),"pageHandlerModule",void 0),i.stateManagement=t,i.flyoutData=e,i.utilities=n.viewModulesUtilities,i.assets=new uw,i.logModule=n.logModule,i.pageHandlerModule=n.pageHandlerModule,i}return r(h,[{key:"GetModuleName",value:function(){return Rt.EXCLUSIVECOUPONS}},{key:"ShouldRenderModule",value:function(){var t;return this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(this.flyoutData.experimentData.isExperimentActive(Be.youtubeCoupons)||this.flyoutData.experimentData.isExperimentActive(Be.youtubeCouponsAutoShow))&&this.flyoutData.dataLoader.IsServerData()&&(this.flyoutData.dataStoreModule.ExclusiveCouponsData.hasExclusiveCoupons||this.utilities.hasSocialSelectors()&&(null===(t=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===t?void 0:t.length)>0)?Promise.resolve(!0):Promise.resolve(!1)}},{key:"renderModule",value:(c=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===e?void 0:e.length)>0)){t.next=26;break}if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(n=document.createElement("msft-edge-shopping-section")).id="exclusiveCouponSection",!this.utilities.hasSocialSelectors()){t.next=20;break}return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getCouponsStyles()),t.next=8,this.getYoutubeCouponData();case 8:if(i=t.sent,(a=null==i?void 0:i.coupons)&&(r=function(t){var e=bt.COUPON;return t&&s.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},this.populateExclusiveCouponsListYoutube(n,!1,!1,a,"divYTCouponWrapper"),s=this.flyoutData,this.utilities.createCommonListStructure(n,this.flyoutData.strings.ytSectionTitleOnYoutube,a,this.GetModuleName(),r,this.populateExclusiveCouponsListYoutube.bind(this),"divYTCouponWrapper")),this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission&&(l=this.createSectionExclusive(i,n)),!a){t.next=16;break}return t.abrupt("return",Promise.resolve(this.CreateModule(n,wt.EXCLUSIVECOUPONS,Rt.EXCLUSIVECOUPONS,_t.CONTEXTUAL,Ft.SQUARES)));case 16:if(!l){t.next=18;break}return t.abrupt("return",Promise.resolve(this.CreateModule(l,wt.EXCLUSIVECOUPONS,Rt.EXCLUSIVECOUPONS,_t.CONTEXTUAL,Ft.SQUARES)));case 18:t.next=26;break;case 20:if(!this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission){t.next=26;break}return u=function(t){var e=bt.COUPON;return t&&d.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},this.populateExclusiveCouponsList(n,!1,!1),d=this.flyoutData,this.utilities.createCommonListStructure(n,this.flyoutData.strings.ytSectionTitleOnRetailer,null===(c=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===c?void 0:c.exclusiveCouponsForDomain,this.GetModuleName(),u,this.populateExclusiveCouponsList.bind(this),"divYTCouponWrapper"),t.abrupt("return",Promise.resolve(this.CreateModule(n,wt.EXCLUSIVECOUPONS,Rt.EXCLUSIVECOUPONS,_t.CONTEXTUAL,Ft.SQUARES)));case 26:return t.abrupt("return",Promise.resolve(null));case 27:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"populateMainHeader",value:function(){if(this.utilities.hasSocialSelectors())this.createYoutubeHeader(this.flyoutData.common.shopping);else{var t=new CustomEvent(hn.CreateCouponHeader);this.stateManagement.dispatchEvent(t)}}},{key:"PostProcessing",value:function(){var t;if(!this.utilities.hasSocialSelectors()&&this.flyoutData.common.isCheckoutPage&&0===(null===(t=this.flyoutData.dataStoreModule.CouponData)||void 0===t?void 0:t.Coupons.length)&&this.flyoutData.dataStoreModule.CouponData.IsAutoApplyAvailable){var e=new CustomEvent(hn.CreateAutoApplyButton);this.stateManagement.dispatchEvent(e)}var n=this.flyoutData.common.shopping.querySelector("#otherExclusiveCouponSection");n&&un.queueUpdate((function(){var t,e=null===(t=n.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var i,o,a=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector(".button");a&&(a.style.paddingLeft="12px");var r=null===(o=e.shadowRoot)||void 0===o?void 0:o.querySelector(".icon");r&&(r.style.paddingRight="12px")}})),this.createPermissionUX()}},{key:"createPermissionUX",value:function(){var t,n=this,i=this.flyoutData.common.shopping.querySelector("#divPermissionWrapper");if(null===(null===(t=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===t?void 0:t.permission)&&!i){var a=this.utilities.createElement("DIV");a.id="divPermissionWrapper",a.slot="actions";var r=this.utilities.createPrimaryButton();if(r.textContent=this.flyoutData.strings.ytSaveCouponsPermission,this.flyoutData.common.openedWith===Tt.Auto){var s=function t(){var e=new CustomEvent(hn.onNotificationClick);l.dispatchEvent(e);var n=new Yr(E.HomePageNotificationHover);c.LogInfoEvent(S.EdgeFlyoutStatus,"Youtube notification expanded",n,dn.CouponImpressionId),r.removeEventListener("mouseover",t),r.removeEventListener("focus",t)};r.addEventListener("mouseover",s),r.addEventListener("focus",s);var l=this.stateManagement,c=this.logModule}r.addEventListener("click",function(){var t=e(o().mark((function t(e){var i,r,s,l,c,u,d,h,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Hs).boolValue=!0,n.pageHandlerModule.SetStorageValue("CanSaveExclusiveCoupons",r),(s=new ds).stringValue=JSON.stringify(null===(i=n.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===i?void 0:i.youtubeCouponsData),n.pageHandlerModule.SetStorageValue("exclusiveCoupons",s),l=new Yr(E.SaveExclusiveCoupons),n.logModule.LogInfoEvent(S.ButtonClick,"Permission set to save exclusive coupons",l,dn.CouponImpressionId),n.flyoutData.dataStoreModule.ExclusiveCouponsData&&(n.flyoutData.dataStoreModule.ExclusiveCouponsData.permission=!0),a.remove(),c=n.flyoutData.common.shopping.querySelector("#ytMainTitle"),u=n.flyoutData.common.shopping.querySelector("#divInfluencerInfo"),t.next=14,n.getYoutubeCouponData();case 14:d=t.sent,c&&d&&u&&n.flyoutData.dataStoreModule.ExclusiveCouponsData&&(c.remove(),h=n.createMainTitle(d,n.flyoutData.dataStoreModule.ExclusiveCouponsData.permission),u.appendChild(h)),n.utilities.isKeyboardClick(e)&&(p=n.flyoutData.common.shopping.querySelectorAll("msft-shopping-coupon-new"))&&p.length>0&&p[0].focus(),f=new CustomEvent(hn.ModulesRendered),n.stateManagement.dispatchEvent(f);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var u=this.utilities.createElement("fluent-button");u.appearance="lightweight",u.textContent=this.flyoutData.strings.ytDontSaveCouponsPermission,this.flyoutData.common.currentTheme===xt.Dark?u.style.color="#FFFFFF":u.style.color="#717171",u.addEventListener("click",(function(){var t=new Hs;t.boolValue=!1,n.pageHandlerModule.SetStorageValue("CanSaveExclusiveCoupons",t);var e=new Yr(E.DontSaveExclusiveCoupons);n.logModule.LogInfoEvent(S.ButtonClick,"Permission set to never save exclusive coupons",e,dn.CouponImpressionId),n.pageHandlerModule.DismissPopup()})),a.appendChild(r),a.appendChild(u),this.flyoutData.common.shopping.appendChild(a)}}},{key:"populateExclusiveCouponsList",value:function(t,e,n){var i,o,a=null===(i=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===i?void 0:i.exclusiveCouponsForDomain;if(a){a.length>0&&(o=a.length);var r=0;if(e){var s=new Yr(E.SeeMoreExclusiveCoupons);this.pageHandlerModule.RecordAsUserAction(is.VIEW_MORE_COUPONS),this.logModule.LogInfoEvent(S.ButtonClick,"See more exclusive coupons on retailer",s,dn.CouponImpressionId),r=bt.COUPON}else o>bt.COUPON&&(o=bt.COUPON);var l=null;e?l=t.querySelector("#divExclusiveCouponWrapper"):(l=this.utilities.createElement("DIV",{style:"padding-left: 12px; padding-right: 12px; display: flex; flex-direction: column; row-gap: 12px; margin-top: 5px; margin-bottom: 5px;"})).id="divExclusiveCouponWrapper";for(var c=r;c<o;c++)a[c].coupons.length>0&&this.createInfluencerTile(l,a[c],r,e,n,c);l&&(e||t.appendChild(l))}}},{key:"populateExclusiveCouponsListYoutube",value:(a=e(o().mark((function t(e,n,i,a,r){var s,l,c,u,d,h,p=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){for(a.length>0&&(s=a.length),l=0,n?(c=new Yr(E.SeeMoreExclusiveCoupons),this.pageHandlerModule.RecordAsUserAction(is.VIEW_MORE_COUPONS),this.logModule.LogInfoEvent(S.ButtonClick,"See more exclusive coupons on youtube",c,dn.CouponImpressionId),l=bt.COUPON):s>bt.COUPON&&(s=bt.COUPON),u=null,n?u=e.querySelector("#".concat(r)):((u=this.utilities.createElement("DIV")).id=r,u.className="divYTCouponWrapperTemplate"),d=function(t){var e,o=p.createCouponElement(a[t]),r=p.utilities.replaceValueInKey("ytShopOn",p.flyoutData.strings.ytShopOn,p.utilities.CapitalizeWordsInString(a[t].retailerDomain));o.description=r,o.label="".concat(a[t].couponCode,", ").concat(r),null===(e=u)||void 0===e||e.appendChild(o);var s=a[t].retailerLink;o.addEventListener("click",(function(){var t=new Yr(E.YoutubeNavigateToAnohterRetailer);p.logModule.LogInfoEvent(S.ButtonClick,"Navigation to another retailer from youtube",t),p.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RETAILER),p.pageHandlerModule.NavigateToRetailerSite(s)}));var c=p.flyoutData.common.currentDevice;t===l&&n&&i&&c===St.Desktop&&o&&o.focus()},h=l;h<s;h++)d(h);u&&(n||e.appendChild(u))}case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i,o){return a.apply(this,arguments)})},{key:"createYoutubeHeader",value:(i=e(o().mark((function t(e){var n,i,a,r,s,l,c,u,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(n=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===n?void 0:n.length)>0)){t.next=6;break}return this.utilities.applyStyles(e,this.assets.getHeaderStyles()),t.next=4,this.getYoutubeCouponData();case 4:(i=t.sent)&&((r=this.utilities.createElement("DIV",{style:"display: flex; justify-content: center; overflow: hidden;"})).slot="header-content",r.id="divExclusiveCouponsNotification",(s=this.utilities.createElement("DIV")).id="divInfluencerInfo",l=this.createProfileImageWrapper(i),s.appendChild(l),c=this.createMainTitle(i,this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission),s.appendChild(c),r.appendChild(s),this.flyoutData.common.openedWith===Tt.Auto&&!0===(null===(a=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===a?void 0:a.permission)&&(u=function t(){var e=new CustomEvent(hn.onNotificationClick);d.dispatchEvent(e);var n=new Yr(E.HomePageNotificationHover);h.LogInfoEvent(S.EdgeFlyoutStatus,"Youtube notification expanded",n,dn.CouponImpressionId),r.removeEventListener("mouseover",t),r.removeEventListener("focus",t),r.removeAttribute("tabindex")},r.tabIndex=0,r.addEventListener("mouseover",u),r.addEventListener("focus",u),d=this.stateManagement,h=this.logModule),e.appendChild(r));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"createMainTitle",value:function(t,e){var n=this.utilities.createElement("H2");n.id="ytMainTitle",n.className="txtLarge",n.style.fontSize="18px",n.style.lineHeight="22px",n.style.textAlign="left",n.style.fontWeight="500";var i=t.coupons.length>1?this.utilities.replaceValueInKey("ytHeader",this.flyoutData.strings.ytHeader,t.coupons.length.toString()):this.flyoutData.strings.ytHeaderSingular;null===e&&(i=t.coupons.length>1?this.utilities.replaceValueInKey("ytHeaderPermission",this.flyoutData.strings.ytHeaderPermission,t.coupons.length.toString()):this.flyoutData.strings.ytHeaderPermissionSingular);var o=this.utilities.createElement("SPAN");return o.textContent=t.influencerName,o.className="txtGradient",o.style.fontWeight="600",this.utilities.populateSingleChildHtml(n,i,o),n.slot="header-content",n}},{key:"createSectionExclusive",value:function(t,e){var n,i=this,o=document.createElement("msft-edge-shopping-section");o.id="otherExclusiveCouponSection";var a=null===(n=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===n?void 0:n.youtubeCouponsData;if(a){for(var r=0;r<a.length;r++){var s=a[r];(!t||t&&s.channelId!==t.channelId&&s.influencerName!==t.influencerName)&&function(){var e=i.utilities.createElement("DIV");e.className="divRetailerInfluencerWrapper",e.style.paddingLeft="12px",e.style.paddingRight="12px";var n=i.createProfileImageWrapper(s);e.appendChild(n);var a=i.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; column-gap: 1px; text-align: left;"}),l=i.utilities.createElement("H3");l.textContent=s.influencerName,l.className="txtMedium",l.style.fontWeight="500",a.appendChild(l),e.appendChild(a),o.appendChild(e);var c=s.coupons;i.populateExclusiveCouponsListYoutube(o,!1,!1,c,"divYTCouponWrapper"+r);var u=i.flyoutData,d=i.flyoutData.strings.ytMoreCoupons;t||(d=i.flyoutData.strings.ytSectionTitleOnYoutube),i.utilities.createCommonListStructure(o,d,s.coupons,i.GetModuleName(),(function(t){var e=bt.COUPON;return t&&u.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),i.populateExclusiveCouponsListYoutube.bind(i),"divYTCouponWrapper"+r)}()}return o.hasChildNodes()&&e.appendChild(o),o}}},{key:"getYoutubeCouponData",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.utilities.hasSocialSelectors()){t.next=9;break}if(i=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n?void 0:n.retailerData,!(a=null==i?void 0:i.allCheckoutPages[0].socialSelectors)){t.next=9;break}return t.next=6,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(a.influencerInfoSelector);case 6:r=t.sent,s=JSON.parse(r.extractedValues),r.found&&s.offsetHeight>0&&s.offsetWidth>0&&(c=null===(l=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===l?void 0:l.youtubeCouponsData)&&(e=c.find((function(t){return r.innerText.includes(t.influencerName)})));case 9:return u=new CustomEvent(hn.ModulesRendered),this.stateManagement.dispatchEvent(u),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"createProfileImageWrapper",value:function(t){var e,n,i=this.utilities.createElement("DIV");i.setAttribute("role","image");var o=this.utilities.replaceValueInKey("ytPhotoLabel",this.flyoutData.strings.ytPhotoLabel,t.influencerName);i.setAttribute("aria-label",o),i.id="divProfileImgWrapper",i.style.position="relative",i.style.display="flex",i.style.justifyContent="center";var a=this.utilities.createElement("DIV");a.id="divImgWrapper",a.style.placeSelf="center";var r=this.utilities.createElement("IMG");r.setAttribute("aria-hidden","true");var s=null===(e=t.imgSrc)||void 0===e||null===(n=e.replace("s88","s48"))||void 0===n?void 0:n.replace("s176","s48");r.src=s,a.appendChild(r),i.appendChild(a);var l=this.utilities.createElement("DIV");return l.setAttribute("aria-hidden","true"),l.innerHTML=this.assets.getYoutubeIcon(),l.style.position="absolute",l.style.top="43px",l.style.zIndex="2",i.appendChild(l),i}},{key:"createInfluencerTile",value:function(t,e,n,i,o,a){var r=this;this.utilities.applyStyles(t,this.assets.getStylesYoutuberTile());var s=[];e.coupons.forEach((function(l){if(-1===s.indexOf(l.couponCode)){s.push(l.couponCode);var c=r.createCouponElement(l);c.isYoutuber=!0,c.indicatorMessage=r.flyoutData.strings.couponCopyLabelRefresh.toUpperCase(),c.selectedIndicatorMessage=r.flyoutData.strings.couponCopied.toUpperCase(),c.label="".concat(l.couponCode," ").concat(r.flyoutData.strings.couponCopyLabel.toUpperCase(),", ").concat(e.influencerName,", ").concat(e.followers);var u=r.utilities.createElement("DIV");u.className="divRetailerInfluencerWrapper",u.slot="youtuber-info";var d=r.createProfileImageWrapper(e);u.appendChild(d);var h=r.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; column-gap: 1px; text-align: left;"}),p=r.utilities.createElement("P");p.textContent=e.influencerName,p.className="txtMedium",p.style.fontWeight="500";var f=r.utilities.createElement("P");f.textContent=e.followers,f.className="txtSmall",f.style.opacity="0.6",h.appendChild(p),h.appendChild(f),u.appendChild(h),c.appendChild(u),t.appendChild(c);var g=r.flyoutData.common.currentDevice;a===n&&i&&o&&g===St.Desktop&&c&&c.focus(),c.addEventListener("click",(function(){if(g===St.Desktop){var t=new Yr(E.CouponCopied);r.logModule.LogInfoEvent(S.ButtonClick,"Exclusive Coupon copied",t,dn.CouponImpressionId)}r.pageHandlerModule.RecordAsUserAction(is.COUPONS_COPIED),r.pageHandlerModule.CopyCoupon(c.name)}))}}))}},{key:"createCouponElement",value:function(t){var e=document.createElement("msft-shopping-coupon-new");return e.name=t.couponCode.toUpperCase(),e.description=this.utilities.CapitalizeWordsInString(t.retailerDomain),e.setAttribute("title",t.couponCode),e.label="".concat(this.flyoutData.strings.couponCopyLabel," ").concat(t.couponCode),e}}]),h}(Bb),pw=hw;function fw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var gw,mw=function(t){u(a,t);var n,i=fw(a);function a(t,e,n){return s(this,a),i.call(this,t,e,n)}return r(a,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:(n=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(e,this.assets.getStyles()),this.utilities.applyStyles(e,this.assets.getHeaderStyles()),t.next=4,this.createYoutubeHeader(e);case 4:return this.createPermissionUX(),t.abrupt("return",Promise.resolve(null));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t,e,n=this.flyoutData.common.shopping.querySelector("#divExclusiveCouponsNotification"),i=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData,o=null==i?void 0:i.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL);return n?Promise.resolve(!1):null!=o&&o.socialSelectors&&this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===e?void 0:e.length)>0&&this.flyoutData.common.openedWith===Tt.Auto?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.EXCLUSIVECOUPONS}}]),a}(pw),vw=mw,yw=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"#giftCardDescp {\n            text-align: center;\n            font-weight: 500;\n            margin: 0 16px 12px 16px;\n        }\n        #divButtonWrapper {\n            margin: 10px;\n            margin-left: 16px;\n            margin-right: 16px;\n            text-align: center;\n            justify-content: center;\n        }\n        .joinButton {\n            min-width: 150px;\n            max-width: 100%;\n            height: 48px;\n        }\n        #successDivWrapper, #shoppingUpsell {\n            text-align: center;\n            margin: 12px;\n        }\n        .divDismiss {\n            text-align: center;\n        }\n        .divCookies {\n            text-align: center;\n            margin: 8px;\n        }\n        #btnMaybeLater {\n            min-width: 150px;\n            height: 48px;\n            margin-left: 5px;\n            vertical-align: bottom;\n        }\n        #btnMaybeLater::part(control) {\n            border-width: 2px;\n        }"}},{key:"getShoppingIcon",value:function(){return mt.getTrustedHTML(gw||(gw=j(['<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path xmlns="http://www.w3.org/2000/svg" d="M17.5719 5.02911C17.5703 3.93081 16.6833 3.0393 15.585 3.0321L10.6946 3.00004C10.1606 2.99654 9.64727 3.20681 9.26913 3.58399L2.58759 10.2485C1.80484 11.0293 1.80403 12.297 2.58579 13.0788L7.53418 18.0271C8.31523 18.8082 9.58156 18.8082 10.3626 18.0271L16.9934 11.3963C17.3692 11.0205 17.58 10.5106 17.5792 9.97917L17.5719 5.02911ZM13.5654 7.99594C13.0131 7.99594 12.5654 7.54822 12.5654 6.99594C12.5654 6.44366 13.0131 5.99594 13.5654 5.99594C14.1177 5.99594 14.5654 6.44366 14.5654 6.99594C14.5654 7.54822 14.1177 7.99594 13.5654 7.99594Z" fill="#0178D4"/></svg>'])))}}]),t}();function Cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var bw=function(t){u(a,t);var n,i=Cw(a);function a(t,e,n){var o;return s(this,a),f(l(o=i.call(this)),"assets",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"flyoutData",void 0),f(l(o),"interactionType",void 0),f(l(o),"timeVisited",void 0),f(l(o),"utilities",void 0),f(l(o),"commonAssets",void 0),f(l(o),"logModule",void 0),o.flyoutData=t,o.utilities=e.viewModulesUtilities,o.pageHandlerModule=e.pageHandlerModule,o.logModule=e.logModule,o.assets=new yw,o.commonAssets=n,o}return r(a,[{key:"GetModuleName",value:function(){return Rt.GIFT_CARD}},{key:"ShouldRenderModule",value:function(){if(this.pageHandlerModule.TriggerExperiment(Be.amazongiftCardExp),!this.flyoutData.experimentData.isExperimentActive(Be.amazongiftCardExp))return Promise.resolve(!1);this.initializeInteractionType();var t=this.isValidGiftCardScenario();return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping;if(t){var e=this.utilities.createElement("H2");e.className="txtLarge",e.style.textAlign="center",e.style.fontWeight="500";e.textContent="",e.slot="header-content",t.appendChild(e)}}},{key:"renderModule",value:function(){var t=this.createModule();return Promise.resolve(this.CreateModule(t,wt.GIFT_CARD,Rt.GIFT_CARD,_t.CONTEXTUAL,Ft.BLOCK))}},{key:"createModule",value:function(){var t=this,e=this.utilities.createElement("msft-edge-shopping-section"),n=this.utilities.createElement("DIV");n.id="divGiftCard",n.style.borderWidth="0px",n.style.marginTop="-35px";var i=this.utilities.createElement("IMG");i.style.width="100%",i.src=this.flyoutData.common.resourcesEndpoint+"amazonGiftCard.png",i.setAttribute("aria-hidden","true");var o=this.flyoutData.experimentData.isVariantActive(Be.amazongiftCardExp,xb.CampaignFive),a=this.utilities.createElement("DIV");a.id="giftCardDescp";var r=!0===o?this.flyoutData.strings.giftCardSubtitleFiveDollar:this.flyoutData.strings.giftCardSubtitle;a.textContent=r,a.setAttribute("aria-labelledby",r),a.setAttribute("role","heading"),a.setAttribute("aria-level","2"),n.appendChild(i),n.appendChild(a);-1===this.interactionType||2===this.interactionType||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_GIFT_CARD?this.creatButtons(n,o):n.appendChild(this.createSuccessDiv(this.flyoutData.strings.rewardOfferSuccess));var s=this.utilities.createElement("DIV",{className:"divCookies",style:"line-height: 16px; font-size: 12px;"}),l=this.utilities.createElement("P");l.style.display="inline",l.style.fontSize="12px";var c=document.createElement("fluent-anchor");c.id="privacyConsent",c.setAttribute("href","#"),c.style.fontSize="12px",c.textContent=this.flyoutData.strings.rewardsPrivacyText,c.setAttribute("appearance","hypertext"),c.style.display="inline",this.utilities.populateSingleChildHtml(l,this.flyoutData.strings.rewardGiftCardConsent,c),c.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()}));var u=document.createElement("fluent-anchor");u.id="termsConsent",u.setAttribute("href","#"),u.style.fontSize="12px",u.textContent=this.flyoutData.strings.rewardsTermsText,u.setAttribute("appearance","hypertext"),u.style.display="inline",u.addEventListener("click",(function(){t.pageHandlerModule.NavigateToTermsStatement()}));var d=this.utilities.createElement("P");d.style.display="inline",d.style.fontSize="12px",d.textContent=this.flyoutData.strings.rewardGiftConsentSubtext;var h=document.createElement("fluent-anchor");return h.id="rewardLearnMore",h.setAttribute("href","#"),h.style.fontSize="12px",h.textContent=this.flyoutData.strings.commonLearnMore,h.setAttribute("appearance","hypertext"),h.style.display="inline",h.addEventListener("click",(function(){t.pageHandlerModule.NavigateToRewardsInfo()})),l.appendChild(u),l.appendChild(d),l.appendChild(h),s.appendChild(l),n.appendChild(s),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),e.appendChild(n),e}},{key:"isValidGiftCardScenario",value:function(){var t,e,n,i="amazon.com"===this.flyoutData.common.domain,o=new URL(this.flyoutData.common.lastCommittedURL);if(!i||!("/"===(null==o?void 0:o.pathname)||null!=o&&null!==(t=o.pathname)&&void 0!==t&&t.includes("/gp/buy")))return!1;var a=null===(e=this.flyoutData.dataStoreModule)||void 0===e||null===(n=e.CouponData)||void 0===n?void 0:n.IsAmazonGiftCardEnabled,r=!0;return(-1!==this.interactionType||!0===a)&&(1===this.interactionType&&Date.now()-this.timeVisited>1296e6&&(r=!1),0===this.interactionType&&(r=!1),2===this.interactionType&&(Date.now()-this.timeVisited<2592e5?r=!1:(qe("giftCardData"),r=!0)),r)}},{key:"creatButtons",value:(n=e(o().mark((function t(e,n){var i,r,s,l,c=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=this.utilities.createElement("DIV")).id="divButtonWrapper",i.setAttribute("role","presentation"),(r=this.utilities.createPrimaryButton()).classList.add("joinButton"),r.disabled=!1,r.id="joinButton",r.setAttribute("aria-live","assertive"),r.setAttribute("role","presentation"),r.textContent=this.flyoutData.strings.joinNowButtonText,(s=this.utilities.createSecondaryButton()).id="btnMaybeLater",s.setAttribute("role","presentation"),s.slot="actions",s.textContent=this.flyoutData.strings.maybeLaterButtontext,r.id="laterButton",s.setAttribute("aria-live","assertive"),s.setAttribute("role","presentation"),r.addEventListener("click",(function(){!0===n?c.pageHandlerModule.NavigateToUrlBackground(a.joinUrlFive,a.rewardsJoinDestinationUrl,!1):c.pageHandlerModule.NavigateToUrlBackground(a.joinUrlOnePointFive,a.rewardsJoinDestinationUrl,!1);var t=new Yr(E.JoinNow);c.logModule.LogInfoEvent(S.ButtonClick,"Clicked on Join now rewards",t),c.pageHandlerModule.RecordAsUserAction(is.REWARD_JOIN_NOW),qe("giftCardData"),Ye("giftCardData","1&"+Date.now());var e=new ds;e.stringValue="1",c.pageHandlerModule.SetStorageValue("GiftCardData",e);var i=document.getElementById("divDismiss");null==i||i.remove();var o=document.getElementById("divButtonWrapper"),r=c.createSuccessDiv(c.flyoutData.strings.rewardJoinSuccess);o&&o.parentNode&&r&&o.parentNode.replaceChild(r,o)})),(l=document.createElement("fluent-anchor")).id="rewardLearnMore",l.setAttribute("href","#"),l.style.fontSize="12px",l.textContent=this.flyoutData.strings.commonLearnMore,l.setAttribute("appearance","hypertext"),l.style.display="inline",l.addEventListener("click",(function(){var t=new Yr(E.MaybeLater);c.logModule.LogInfoEvent(S.ButtonClick,"Clicked on maybe later rewards",t),qe("giftCardData"),c.pageHandlerModule.RecordAsUserAction(is.REWARD_JOIN_NOW),Ye("giftCardData","2&"+Date.now());var e=new ds;e.stringValue="2",c.pageHandlerModule.SetStorageValue("GiftCardData",e),c.pageHandlerModule.DismissPopup()})),i.append(r),i.append(l),e.append(i);case 30:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initializeInteractionType",value:function(){this.interactionType=-1;var t=ze("giftCardData");if(t){var e=null==t?void 0:t.split("&")[0];null===e||isNaN(parseInt(e,10))||(this.interactionType=parseInt(e,10));var n=null==t?void 0:t.split("&")[1];null===n||isNaN(parseInt(n,10))||(this.timeVisited=parseInt(n,10))}}},{key:"createSuccessDiv",value:function(t){var e=this,n=this.utilities.createElement("DIV");n.id="successDivWrapper";var i=this.utilities.createElement("DIV");i.innerHTML=this.commonAssets.getGreenCheck(),i.slot="start",i.style.display="inline",i.style.marginRight="5px",i.style.verticalAlign="middle",i.setAttribute("aria-hidden","true"),n.appendChild(i);var o=this.utilities.createElement("DIV");o.textContent=t,o.style.display="inline",o.style.fontSize="12px",o.style.fontWeight="500",n.appendChild(o);var a=document.createElement("fluent-anchor");a.id="rewardsLink",a.setAttribute("href","#"),a.style.fontSize="12px",a.textContent=this.flyoutData.strings.commonMicrosoftRewards,a.setAttribute("appearance","hypertext"),a.style.display="inline",n.appendChild(a),a.addEventListener("click",(function(){e.pageHandlerModule.RecordAsUserAction(is.REWARD_LINK_CLICK),e.pageHandlerModule.NavigateToRewardsInfo()}));var r=this.utilities.createElement("DIV");r.id="shoppingUpsell";var s=this.utilities.createElement("DIV");return s.innerHTML=this.assets.getShoppingIcon(),s.slot="start",s.setAttribute("aria-hidden","true"),s.style.display="inline",s.style.verticalAlign="middle",r.textContent=this.flyoutData.strings.rewardsjoinAckText,r.appendChild(s),r.style.fontSize="12px",this.utilities.populateSingleChildHtml(r,this.flyoutData.strings.rewardsjoinAckText,s),n.appendChild(r),n}}]),a}(Bb);f(bw,"joinUrlOnePointFive","https://rewards.microsoft.com/createuser?idType=LiveId&ACCEPTEDTOU=TRUE&form=MY020A&OCID=MY020A&PUBL=MSNIP&PROGRAMNAME=MULTIAZNGCACQ202101&CREA=MY020A"),f(bw,"joinUrlFive","https://rewards.microsoft.com/createuser?idType=LiveId&ACCEPTEDTOU=TRUE&form=MY0212&OCID=MY0212&PUBL=MSNIP&PROGRAMNAME=MULTIAZNGCACQ202202&CREA=MY0212"),f(bw,"rewardsJoinDestinationUrl","https://rewards.microsoft.com/welcometour");var Sw=bw;function xw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Ew=function(t){u(n,t);var e=xw(n);function n(t,i,o){return s(this,n),e.call(this,t,i,o)}return r(n,[{key:"PostProcessingNotification",value:function(t,e){this.PostProcessing(Rt.GIFT_CARD,0,e)}},{key:"GetNotificationName",value:function(){return Mt.GIFT_CARD}},{key:"ShouldRenderNotification",value:function(){this.pageHandlerModule.TriggerExperiment(Be.amazongiftCardExp);var t=this.flyoutData.experimentData.isExperimentActive(Be.amazongiftCardExp),e=this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_GIFT_CARD;return Promise.resolve(e&&t)}},{key:"RenderNotification",value:function(){var t=this.createModule();if(t){var e=this.utilities.createNotificationModule(t,this.GetNotificationName(),this);return Promise.resolve(e)}return Promise.resolve(null)}}]),n}(Sw),Aw=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        .categoryButton {\n            padding: 8px 11px;\n            margin-right: 7px;\n            border-radius: 20px;\n            text-align: center;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            max-width: 100px;\n            white-space: nowrap;\n            border: unset;\n            flex-grow: 1;\n            background-color: rgb(235, 235, 235);\n            color: rgb(26, 26, 26);\n            font-weight: 400;\n            font-size: 12px;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        .categoryButton.selected {\n            background-color: rgb(10, 134, 218);\n            color: rgb(255, 255, 255);\n            font-weight: 600;\n        }\n        .qcHeaderWrapper {\n            display: flex;\n            margin: 12px;\n            height: 25px;\n        }\n        .qcHeaderTitle {\n            margin: 0px;\n            font-weight: 600;\n            font-size: 14px;\n            line-height: 20px;\n            padding-right: 2px;\n            align-items: end;\n            display: flex;\n        }\n        .gcSectionWrapper {\n            margin: 0;\n            padding: 0 16px;\n        }\n        .groceryCashback {\n            padding: 10px 0;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n            column-gap: 8px;\n            text-decoration: none;\n            color: unset;\n        }\n        .groceryCashback:hover {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.02) -6.71%, rgba(0, 210, 255, 0.02) 93.88%);\n        }\n        .gcHR {\n            margin: 0;\n            border: 1px solid #F5F5F5;\n        }\n        .gcImageDiv {\n            height: 64px;\n            flex: 0 0 64px;\n            border-radius: 4px;\n            background-repeat: no-repeat;\n            background-size: contain;\n            background-position: center center\n        }\n        .gcImageLargeDiv {\n            height: 88px;\n            flex: 0 0 88px;\n            border-radius: 8px;\n            background-repeat: no-repeat;\n            background-size: contain;\n            background-position: center center;\n            margin-bottom: 12px;\n        }\n        .gcTextDiv {\n            display: flex;\n            flex-direction: column;\n            row-gap: 8px;\n            justify-content: center;\n        }\n        .gcTitle {\n            color: #1A1A1A;\n            font-size: 12px;\n            line-height: 16px;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 1;\n            overflow: hidden;\n            margin: 0px;\n        }\n        .gcButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 600;\n            height: 26px;\n            width: 70px;\n            border-color: transparent;\n            border-radius: 4px;\n            box-sizing: border-box;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        .gcButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='gcButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        .gcButtonColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            padding: 1px;\n            height: min-content;\n            width: min-content;\n            display: flex;\n        }\n        .gcButtonColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }\n        .gcCashbackDiv {\n            display: flex;\n            flex-direction: row;\n            margin-top: 4px;\n            margin-bottom: 4px;\n            column-gap: 4px;\n            width: 160px;\n        }\n        .gcCashback {\n            font-size: 20px;\n            line-height: 24px;\n            font-weight: 600;\n            margin: 0px;\n        }\n        .gcInfoIcon {\n            margin-top: 5px;\n        }\n        .gcTooltip:focus {\n            outline: none;\n        }\n\n        .gcActivatedDiv {\n            display: flex;\n            align-content: center;\n            column-gap: 4px;\n        }\n        .gcActivated {\n            margin: 0px;\n        }\n        #gcActivationNotif {\n            background: #FFF;\n            padding: 12px 20px;\n            margin-top: -20px;\n        }\n        .gcActivationNotifBody{\n            display: flex;\n            flex-direction: row;\n            justify-content: space-between;\n            width: 100%;\n            height: 100%;\n        }\n        .gcActivatedText {\n            font-weight: 600;\n            font-size: 20px;\n            line-height: 26px;\n        }\n        .gcActivationNotifSeparator {\n            height: 1px;\n            width: 100%;\n            background: #F1F1F1;\n        }\n        .gcActivationFooter {\n            font-weight: 400;\n            font-size: 12px;\n            line-height: 16px;\n            margin-top: 12px;\n            margin-bottom: 0px;\n        }\n        #groceryRebatesTitle {\n            font-family: 'Segoe UI Variable Static Text','Segoe UI';\n            font-size: 20px;\n            line-height: 24px;\n            font-weight: 800;\n            text-align: center;\n            margin: 0px;\n            width: calc(75%);\n        }\n        #groceryCashbackSection {\n            background: #FFFFFF;\n            text-align: left;\n        }\n        #groceryRebatesSubtitle {\n            font-family: 'Segoe UI';\n            font-size: 12px;\n            line-height: 16px;\n            text-align: center;\n            color: #333333;\n            margin: 0px;\n            width: calc(75%);\n        }"}},{key:"getDarkModeStyles",value:function(){return"\n        .gcTitle {\n            color: #FFFFFF96;\n        }\n        .gcButton {\n            background: #3b3b3b;\n            color: #02d9c8;\n        }\n        .gcHR {\n            border: solid 0.5px #656565;\n        }\n        #gcActivationNotif {\n            background: #464b4d;\n        }\n        #groceryRebatesSubtitle {\n            color: #dedede;\n        }\n        #groceryCashbackSection {\n            background: #3b3b3b;\n            text-align: left;\n        }\n        "}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsPrimaryButtonRefresh {\n            width: 236px;\n            background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n        }\n        .actionsPrimaryButtonRefresh:hover {\n            background: linear-gradient(90.05deg, #9E00FF 0.59%, #0048D4 67.54%, #00FFC2 104.11%);\n        }\n        "}}]),t}();function Tw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Dw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Dw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var kw=new Map;kw.set("dollargeneral.com","dollarGeneralLarge"),kw.set("foodlion.com","foodLionLarge"),kw.set("stopandshop.com","stopAndShopLarge"),kw.set("hannaford.com","hannafordLarge"),kw.set("giantfoodstores.com","giantFoodStoresLarge"),kw.set("wincofoods.com","wincoLarge"),kw.set("marketdistrict.com","marketDistrictLarge"),kw.set("martinsfoods.com","martinsLarge"),kw.set("gianteagle.com","giantEagleLarge");var Iw=function(){function t(e,n){s(this,t),f(this,"flyoutData",void 0),f(this,"utilities",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),this.flyoutData=e,this.utilities=n.viewModulesUtilities,this.pageHandlerModule=n.pageHandlerModule,this.logModule=n.logModule}var n;return r(t,[{key:"IsPDPURL",value:function(t){var e=t.pathname.match("/dp/([a-zA-Z0-9]+)($|/)|/gp/product/([a-zA-Z0-9]+)($|/)");return e&&e.length>3?{IsPDP:!0,ProductId:e[1]||e[3]}:{IsPDP:!1,ProductId:""}}},{key:"IsCashbackPDPURL",value:function(t){var e,n,i=null===(e=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===e||null===(n=e.Cashback)||void 0===n?void 0:n.ItemizedCashback;if(i){var o,a=Tw(i);try{for(a.s();!(o=a.n()).done;){var r=o.value,s=new URL(r.cashBackProducts[0].url).pathname.match("/dp/([a-zA-Z0-9]+)($|/)|/gp/product/([a-zA-Z0-9]+)($|/)");if(s&&s.length>3){var l=s[1]||s[3];if(-1!==t.pathname.indexOf(l))return!0}}}catch(t){a.e(t)}finally{a.f()}}return!1}},{key:"GetProductIdFromUrl",value:function(t){var e,n,i=null===(e=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===e||null===(n=e.Cashback)||void 0===n?void 0:n.ItemizedCashback;if(i){var o,a=Tw(i);try{for(a.s();!(o=a.n()).done;){var r=o.value,s=new URL(r.cashBackProducts[0].url).pathname.match("/dp/([a-zA-Z0-9]+)($|/)|/gp/product/([a-zA-Z0-9]+)($|/)");if(s&&s.length>3){var l=s[1]||s[3];if(-1!==t.pathname.indexOf(l))return l}}}catch(t){a.e(t)}finally{a.f()}}return""}},{key:"getCashbackString",value:function(t){if(t.includes(".")){var e=t.split("."),n=e&&e[1]&&1===e[1].length?e[1]+"0":e[1];return n?e[0]+"."+n:t}return t}},{key:"getGroceryLogo",value:function(t,e){var n;if(e===Rt.GROCERY_COUPON){var i=kw.get(t);n=i?"https://th.bing.com/th?id=OCG."+i+"&w=50&h=50":this.utilities.getFavIconSrc(t)}else n=this.flyoutData.common.resourcesEndpoint+"/retailerBranding/SquareIcons/"+t+".png";return n}},{key:"createGroceryHeader",value:function(t,e,n,i,o){var a,r=this,s=this.utilities.createElement("DIV");s.slot="header-content",s.id="groceryHeaderDiv",this.flyoutData.common.isPane&&(s.style.width="calc(100% - 40px)"),s.setAttribute("role","group"),s.setAttribute("aria-labelledby","groceryHeaderRetailer groceryHeaderText");var l=this.utilities.createElement("DIV");l.id="groceryHeaderTextWrapper";var c=null===(a=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===a?void 0:a.DomainName;if(c){var u=this.utilities.CapitalizeString(c),d=this.utilities.createElement("P");d.id="groceryHeaderRetailer",d.className="txtLarge",d.setAttribute("role","heading"),d.setAttribute("aria-level","2"),d.textContent=u,l.appendChild(d);var h=this.utilities.createElement("P");h.className="txtSmall",h.id="groceryHeaderText",h.setAttribute("role","heading"),h.setAttribute("aria-level","3"),h.textContent=this.flyoutData.strings.gcSectionTitle,l.appendChild(h);var p=this.utilities.createElement("IMG");p.src=this.getGroceryLogo(this.flyoutData.common.domain,t),p.id="groceryHeaderIcon",p.addEventListener("error",(function(){s.style.gridTemplateColumns="auto",p.setAttribute("aria-hidden","true")}));var f=document.createElement("button");f.id="groceryHeaderButton",f.setAttribute("role","presentation"),f.slot="header-actions",f.textContent="See all";var g=this.utilities.createElement("DIV");return g.id="divColorful",g.className="divSeeMore",g.setAttribute("role","presentation"),g.appendChild(f),f.addEventListener("click",(function(t){r.pageHandlerModule.RecordAsUserAction(e);var a=new Yr(n);r.logModule.LogInfoEvent(S.ButtonClick,i,a),r.pageHandlerModule.NavigateToCouponPage(o)})),s.appendChild(p),s.appendChild(l),s.appendChild(g),s}}},{key:"extractProductFromDescription",value:function(t){var e,n=t.replace(/[^A-z-'0-9\(\)\-. &,]/g,""),i=/(\([0-9]*\)| of) ([A-z-'0-9\- &]*)/.exec(n);if(i&&i[2]&&(e=i[2]),Se(e)){var o=/^(ONE |TWO |THREE |FOUR )([A-z-'0-9\- &]*)/.exec(n);o&&o[2]&&(e=o[2])}if(e){e=(e=e.replace(/( product | Product )/," Products ")).replace(/( any |[pP]ackage of |[pP]ackages of )/," ")}return this.utilities.CapitalizeWordsInString(e)}},{key:"getQuotientDate",value:function(t){var e=6e4*(new Date).getTimezoneOffset();return new Date(Date.now()-e).toISOString().slice(0,-1).split(".")[0]+this.getTimeZone()}},{key:"UpdateLastAutoShow",value:(n=e(o().mark((function t(){var e,n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK){t.next=8;break}return e="",t.next=4,this.pageHandlerModule.GetStorageValue(Qr.ICNotificationType);case 4:(n=t.sent)&&""!==n&&(i=n.value)&&(e=null!==(a=i.stringValue)&&void 0!==a?a:""),e===Es.Landing&&((r=new ds).stringValue=(new Date).toUTCString(),this.pageHandlerModule.SetStorageValue(Qr.ICLastAutoShowTime,r));case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getTimeZone",value:function(){var t=(new Date).getTimezoneOffset(),e=Math.abs(t);return(t<0?"+":"-")+("00"+Math.floor(e/60)).slice(-2)+":"+("00"+e%60).slice(-2)}}]),t}(),ww=Iw;function Pw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ow(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ow(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Ow(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Rw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Mw=function(t){u(v,t);var n,i,a,c,d,h,p,g,m=Rw(v);function v(t,e,n,i){var o;return s(this,v),f(l(o=m.call(this)),"utilities",void 0),f(l(o),"groceryUtilities",void 0),f(l(o),"assets",void 0),f(l(o),"commonAssets",void 0),f(l(o),"flyoutData",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"logModule",void 0),f(l(o),"stateManagement",void 0),f(l(o),"activatedNotifItemKey","activatedNotifItem"),f(l(o),"submitKey","activationSubmitted"),f(l(o),"categories",void 0),f(l(o),"filteredCashbackItems",void 0),f(l(o),"selectedCategoryId",void 0),f(l(o),"useCategoryFiltering",!1),f(l(o),"cashbackItems",void 0),f(l(o),"cashBackOffersType",void 0),f(l(o),"cashBackOffersTypeTitle",void 0),f(l(o),"pdpCashbackItem",void 0),f(l(o),"shouldRenderPdp",void 0),f(l(o),"isPdpActivated",void 0),f(l(o),"isActivatedHoverEventSent",void 0),o.flyoutData=t,o.utilities=e.viewModulesUtilities,o.groceryUtilities=new ww(t,e),o.pageHandlerModule=e.pageHandlerModule,o.logModule=e.logModule,o.assets=new Aw,o.commonAssets=n,o.stateManagement=i,o.useCategoryFiltering=o.flyoutData.experimentData.isExperimentActive(Be.categoriesFiltering),o}return r(v,[{key:"GetModuleName",value:function(){return Rt.GROCERY_CASHBACK}},{key:"ShouldRenderModule",value:(g=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.experimentData.isExperimentActive(Be.groceryCashback)&&this.flyoutData.common.isRebatesEnabled){t.next=3;break}return t.abrupt("return",Promise.resolve(!1));case 3:if(e=this.flyoutData.dataStoreModule.GroceryCouponData,n=null==e?void 0:e.Cashback,this.cashbackItems=[],this.categories=new Map,this.filteredCashbackItems=new Map,!n){t.next=34;break}if(s=new URL(this.flyoutData.common.lastCommittedURL),this.PopulatePDPInformation(s,n),!(l=this.utilities.GetStorageStringValue(Qr.ICCurrentPageInfo))){t.next=29;break}if(t.prev=13,(c=JSON.parse(l))&&c.currentUrl===this.flyoutData.common.lastCommittedURL&&("search"===c.type?((d=c.query)||this.flyoutData.common.lastCommittedURL&&(d=null!==(h=null==s||null===(p=s.searchParams)||void 0===p?void 0:p.get("k"))&&void 0!==h?h:""),this.cashBackOffersTypeTitle=d,u=this.GetOffersList(c.cashbackData)):"category"===c.type&&(this.useCategoryFiltering=!1,u=this.GetOffersList(c.cashbackData),c.categoryName&&(this.cashBackOffersTypeTitle=c.categoryName))),!(u&&u.length>0)){t.next=24;break}if(f=new Set,!((g=u.filter((function(t){return!(!(t.imageUrl&&t.cashBackProducts[0].title&&t.value&&t.id&&t.cashBackProducts[0].upc&&t.cashBackProducts[0].url)||n.ActivatedOfferIds.has(t.id)||n.SubmittedOfferIds.includes(t.id)||f.has(t.id)||(f.add(t.id),0))})))&&g.length>0)){t.next=24;break}return this.cashbackItems=g,this.cashBackOffersType="search",this.useCategoryFiltering=!1,t.abrupt("return",Promise.resolve(!0));case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(13);case 29:this.useCategoryFiltering&&this.shouldUseCategoryFilteringForDomain()?((b=null===(m=this.flyoutData)||void 0===m||null===(v=m.dataStoreModule)||void 0===v||null===(y=v.GroceryCouponData)||void 0===y||null===(C=y.Cashback)||void 0===C?void 0:C.Categories)&&b.size>0&&(this.categories=b),0===this.categories.size?this.useCategoryFiltering=!1:(S=this.getFilteredCategoriesFromStorage())&&(this.filteredCashbackItems=S)):this.useCategoryFiltering=!1,x=!1,null===(i=n.pdpCashBack)||void 0===i||null===(a=i.relatedOffers)||void 0===a||a.forEach((function(t){t.imageUrl&&t.cashBackProducts[0].title&&t.value&&t.id&&t.cashBackProducts[0].upc&&t.cashBackProducts[0].url&&!n.ActivatedOfferIds.has(t.id)&&!n.SubmittedOfferIds.includes(t.id)&&(x=!0,A.cashbackItems.push(t))})),x&&this.stateManagement.setState(pn.ICRelatedOffersExist,!0),null===(r=n.ItemizedCashback)||void 0===r||r.forEach((function(t){t.imageUrl&&t.cashBackProducts[0].title&&t.value&&t.id&&t.cashBackProducts[0].upc&&t.cashBackProducts[0].url&&!n.ActivatedOfferIds.has(t.id)&&!n.SubmittedOfferIds.includes(t.id)&&A.cashbackItems.push(t)}));case 34:return E=this.cashbackItems.length>0||this.shouldRenderPdp,t.abrupt("return",Promise.resolve(E));case 36:case"end":return t.stop()}}),t,this,[[13,26]])}))),function(){return g.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#groceryCashbackSection");t&&("search"===this.cashBackOffersType?this.cashBackOffersTypeTitle&&(t.title=this.utilities.replaceValueInKey("gcbSearchSectionTitle",this.flyoutData.strings.gcbSearchSectionTitle,this.cashBackOffersTypeTitle)):this.useCategoryFiltering&&t.classList.add("qcHeaderTitle"),t.slot="header-content")}},{key:"renderModule",value:(p=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),(a=this.utilities.createElement("msft-edge-shopping-section")).id="groceryCashbackSection",r=null===(e=this.flyoutData.dataStoreModule)||void 0===e||null===(n=e.GroceryCouponData)||void 0===n||null===(i=n.Cashback)||void 0===i?void 0:i.ItemizedCashback,Ye(this.submitKey,"false"),r&&(l=function(t){var e=bt.GROCERY_CASHBACK;return t&&c.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},c=this.flyoutData,this.shouldRenderPdp&&""!==(null===(s=this.pdpCashbackItem)||void 0===s?void 0:s.id)&&((u=a)&&(this.flyoutData.common.currentDevice===St.Desktop?u.accordion=!0:u.accordion=!1,u.title=this.flyoutData.strings.gcbPdpSectionTitle,u.expanded=!1),this.isPdpActivated?this.createItemCashbackActivated(a,this.pdpCashbackItem):this.createItemCashbackPdpModule(a)),!this.useCategoryFiltering&&this.cashbackItems&&this.cashbackItems.length>0&&(this.populateGroceryCashbackList(a,!1,!1),this.utilities.createCommonListStructure(a,this.flyoutData.strings.gcbSectionTitle,this.cashbackItems,this.GetModuleName(),l,this.populateGroceryCashbackList.bind(this)))),this.useCategoryFiltering&&(this.populateCategories(a),this.setFirstCategoryButtonAsSelected(a),this.createToggleSeeMoreBtn(a)),(d=new ds).stringValue=(new Date).toUTCString(),this.pageHandlerModule.SetStorageValue(Qr.ICLastAutoShowTime,d),this.stateManagement.setState(pn.ICOffersRendered,!0),t.abrupt("return",Promise.resolve(this.CreateModule(a,wt.GROCERY_CASHBACK,Rt.GROCERY_CASHBACK,_t.CONTEXTUAL,Ft.LIST)));case 12:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"PostProcessing",value:function(t,e,n){var i,o="position ".concat(e),a=new _(A.ItemizedCashback);a.Metadata=JSON.stringify({openedWith:this.flyoutData.common.openedWith,popupOrigination:this.flyoutData.common.popupOrigination,url:null!==(i=this.flyoutData.common.lastCommittedURL)&&void 0!==i?i:""}),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,o,a,dn.CouponImpressionId)}},{key:"shouldUseCategoryFilteringForDomain",value:function(){var t,e;return"amazon.com"===(null===(t=this.flyoutData)||void 0===t||null===(e=t.common)||void 0===e?void 0:e.domain)}},{key:"getNumberOfOffersInSelectedCategory",value:function(){var t,e=this.selectedCategoryId;return"0"===e?this.cashbackItems.length:(null===(t=this.filteredCashbackItems.get(e||this.selectedCategoryId))||void 0===t?void 0:t.length)||0}},{key:"setFirstCategoryButtonAsSelected",value:function(t){var e=t.querySelector(".categoryButton");e&&e.click()}},{key:"populateCategories",value:function(t){var e=this,n=yn(this.categories.keys()),i=this.utilities.createElement("DIV");i.className="gcCategoriesSectionWrapper",i.id="gcCategoriesSection",i.style.display="flex",i.style.marginLeft="16px",i.style.width="max-content",n.forEach((function(n){var o=e.categories.get(n)||"",a=e.createCategoryFilterButton(o,n,t);a&&i.appendChild(a)})),t.appendChild(i)}},{key:"populateGroceryCashbackList",value:function(t,e,n){if(this.cashbackItems){var i=0;this.cashbackItems.length>0&&(i=this.cashbackItems.length);var o=0;if(e){o=bt.GROCERY_CASHBACK,this.pageHandlerModule.RecordAsUserAction(is.CLICK_ITEMIZED_CASHBACK_SEE_ALL);var a=new Yr(E.SeeMoreItemizedCashback);this.logModule.LogInfoEvent(S.ButtonClick,"",a,dn.CouponImpressionId)}else i>bt.GROCERY_CASHBACK&&(i=bt.GROCERY_CASHBACK);var r=null;e?r=t.querySelector("#gcSection"):((r=this.utilities.createElement("DIV")).className="gcSectionWrapper",r.id="gcSection",this.flyoutData.common.isPane&&(r.style.padding="0px 20px"));for(var s=o;s<i;s++){var l=this.cashbackItems[s],c=this.createGroceryCashbackTile(l);if(r&&c){if(s===o&&e){var u=this.utilities.createElement("hr");u.className="gcHR",r.appendChild(u)}if(r.appendChild(c),s!==i-1){var d=this.utilities.createElement("hr");d.className="gcHR",r.appendChild(d)}s===o&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&c.focus(),e||t.appendChild(r)}}}}},{key:"populateFilteredGroceryCashbackList",value:(h=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOffersToShow();case 2:if(a=t.sent)for(r=0,a.length>0&&(r=a.length),s=0,n?(s=bt.GROCERY_CASHBACK,this.pageHandlerModule.RecordAsUserAction(is.CLICK_ITEMIZED_CASHBACK_SEE_ALL),l=new Yr(E.SeeMoreItemizedCashback),this.logModule.LogInfoEvent(S.ButtonClick,"",l,dn.CouponImpressionId)):r>bt.GROCERY_CASHBACK&&(r=bt.GROCERY_CASHBACK),c=e.querySelector("#gcSection"),n||(c&&c.remove(),(c=this.utilities.createElement("DIV")).className="gcSectionWrapper",c.id="gcSection",this.flyoutData.common.isPane&&(c.style.padding="0px 20px")),u=s;u<r;u++)d=a[u],h=this.createGroceryCashbackTile(d),c&&h&&(u===s&&n&&((p=this.utilities.createElement("hr")).className="gcHR",c.appendChild(p)),c.appendChild(h),u!==r-1&&((f=this.utilities.createElement("hr")).className="gcHR",c.appendChild(f)),u===s&&n&&i&&this.flyoutData.common.currentDevice===St.Desktop&&h.focus(),n||e.appendChild(c));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return h.apply(this,arguments)})},{key:"seeMoreClickHandlerWithToggle",value:function(t,e,n){var i=this,o=this.utilities.isKeyboardClick(t),a=n.textContent!==this.flyoutData.strings.sectionSeeMoreViewLess,r=this.getNumberOfOffersInSelectedCategory();un.queueUpdate((function(){i.populateFilteredGroceryCashbackList(e,a,o),n.textContent=a?i.flyoutData.strings.sectionSeeMoreViewLess:i.utilities.replaceValueInKey("sectionSeeMore",i.flyoutData.strings.sectionSeeMore,"".concat(r-bt.GROCERY_CASHBACK))}))}},{key:"createToggleSeeMoreBtn",value:function(t){var e=this;this.flyoutData.common.currentDevice===St.Desktop?t.accordion=!0:t.accordion=!1,t.title=this.flyoutData.strings.gcbSectionTitle,t.expanded=!1;var n=document.createElement("fluent-button");n.slot="action",n.className+="action btnSeeMore",n.id="seeMoreButton",n.appearance="lightweight",n.style.backgroundColor="transparent",n.style.padding="0px",this.flyoutData.common.currentTheme===xt.Dark?n.style.color="#FFFFFF":n.style.color=this.flyoutData.common.isPane?"#1A1A1A":"#666666",n.addEventListener("click",(function(i){e.seeMoreClickHandlerWithToggle(i,t,n)})),t.appendChild(n)}},{key:"getOffersToShow",value:(d=e(o().mark((function t(){var e,n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("0"!==(n=this.selectedCategoryId)){t.next=4;break}return t.abrupt("return",this.cashbackItems);case 4:if(!(i=null===(e=this.filteredCashbackItems)||void 0===e?void 0:e.get(n))){t.next=9;break}return t.abrupt("return",i);case 9:return t.next=11,this.getOffersForCategory(n,this.flyoutData.common.domain);case 11:return a=t.sent,this.filteredCashbackItems.set(n,a),this.updateFilteredCategoriesInStorage(),t.abrupt("return",a);case 15:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"updateFilteredCategoriesInStorage",value:function(){var t=Ke(Je.filteredOffersMapKey),e=JSON.stringify(Array.from(this.filteredCashbackItems.entries()));t[this.flyoutData.common.domain]?t[this.flyoutData.common.domain].data=e:t[this.flyoutData.common.domain]={data:e,timestamp:Math.round((new Date).getTime()/1e3)},Ye(Je.filteredOffersMapKey,JSON.stringify(t))}},{key:"getFilteredCategoriesFromStorage",value:function(){var t,e=Ke(Je.filteredOffersMapKey)[this.flyoutData.common.domain];if(null!=e&&e.timestamp){var n=Math.round((new Date).getTime()/1e3)-e.timestamp;return this.shouldInvlidateLocalData(3,n)?(t=Je.filteredOffersMapKey,void(Ze()&&window.localStorage.removeItem(t))):e.data?new Map(JSON.parse(e.data)):void 0}}},{key:"shouldInvlidateLocalData",value:function(t,e){return e>60*t*60}},{key:"PopulatePDPInformation",value:function(t,e){var n,i,o=this.flyoutData.common.domain,a=Je.GetActivatedCashbackItems(o);if(null!==(n=e.pdpCashBack)&&void 0!==n&&n.pdpOffer)return this.pdpCashbackItem=null===(i=e.pdpCashBack)||void 0===i?void 0:i.pdpOffer,this.shouldRenderPdp=!0,e.ActivatedOfferIds.has(this.pdpCashbackItem.id)&&(this.isPdpActivated=!0),this.stateManagement.setState(pn.icPdpAvailable,!0),!0;var r=!1,s=this.groceryUtilities.IsPDPURL(t);if(s.IsPDP){if(a.activatedItemsList){var l,c=Pw(a.activatedItems);try{for(c.s();!(l=c.n()).done;){var u=l.value,d=a.activatedItemsList[u];if(d.url){var h=new URL(d.url),p=this.groceryUtilities.IsPDPURL(h);if(p.IsPDP&&p.ProductId===s.ProductId){var f=new ic;f.cashBackProducts=[];var g=new tc;g.url=d.url,g.title=u,g.upc=d.upc,f.value=d.value,f.minQty=d.minQty,f.id=d.offerId,f.imageUrl=d.imageUrl,f.description=d.description,f.cashBackProducts.push(g),r=!0,this.pdpCashbackItem=f,this.shouldRenderPdp=!0,this.isPdpActivated=!0,this.stateManagement.setState(pn.icPdpAvailable,!0)}}}}catch(t){c.e(t)}finally{c.f()}}if(!r)this.groceryUtilities.IsCashbackPDPURL(t)?r=!0:this.stateManagement.setState(pn.nonICPDP,!0)}if(r){var m=s.ProductId;if(m){var v=e.ItemizedCashback.filter((function(t){return t.imageUrl&&t.cashBackProducts[0].title&&t.value&&t.id&&t.cashBackProducts[0].upc&&t.cashBackProducts[0].url&&-1!==t.cashBackProducts[0].url.indexOf(m)&&!e.ActivatedOfferIds.has(t.id)&&!e.SubmittedOfferIds.includes(t.id)}));v&&v.length>0&&(this.pdpCashbackItem=v[0],this.stateManagement.setState(pn.icPdpAvailable,!0),this.shouldRenderPdp=!0)}}return this.shouldRenderPdp}},{key:"GetOffersList",value:function(t){var e=[];if(t.offers&&t.offers.length>0){var n,i=Pw(t.offers);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.push(ic.Create(o))}}catch(t){i.e(t)}finally{i.f()}}return e}},{key:"createItemCashbackPdpModule",value:function(t){var e,n,i,o,a,r,s=this,l=this.utilities.createElement("div",{style:"position: relative;\n            width: 70%;\n            padding-left: 30px;\n            display: grid;\n            grid-template-columns: 90px auto;\n            grid-gap: 10px;\n            align-items: center;"});l.className="groceryCashbackPdp",l.id="gcPdpNotif",l.setAttribute("role","group");var c=this.utilities.createElement("DIV",{style:"margin-right: 12px;\n                margin: 0 0 0 0,\n                align-items: center;"});c.setAttribute("role","presentation");var u=document.createElement("IMG");u.src=null===(e=this.pdpCashbackItem)||void 0===e?void 0:e.imageUrl,u.width=88,u.height=88,this.utilities.shouldRenderSmallNotification()&&(c.style.marginTop="-10px",c.style.marginRight="0px",u.width=88,u.height=88),u.style.objectFit="contain",u.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),c.appendChild(u);var d=this.utilities.createElement("DIV",{className:"pdp_info",style:"margin: 0 0 0 0;"}),h=this.utilities.createElement("div",{style:"\n                display: flex;\n                flex-direction: row;\n                margin-top: 4px;\n                margin-bottom: 4px;\n                column-gap: 4px;\n                "});h.className="gcpdpHeaderDiv";var p=this.utilities.createElement("p",{style:"\n                    padding-left: 16px\n                    font-family: 'Segoe UI Variable Static Display';\n                    font-style: normal;\n                    font-weight: 600;\n                    font-size: 16px;\n                    margin: 0 0 0 0;\n                    height: 22px;\n                    width: 110px;\n                "});p.textContent=this.flyoutData.strings.gcbPdpHeaderText,p.setAttribute("aria-hidden","true");var f=this.utilities.createElement("div");f.style.width="10px",f.slot="hover-anchor",f.setAttribute("aria-label","Info icon"),f.innerHTML=this.commonAssets.getInfoIcon();var g=null===(n=this.pdpCashbackItem)||void 0===n?void 0:n.id,m=null===(i=this.pdpCashbackItem)||void 0===i?void 0:i.cashBackProducts[0].title,v=this.logModule,y=this.pageHandlerModule;var C=this.utilities.createElement("msft-shopping-tooltip");C.className="gcTooltip",C.width="225px",C.caratLeftOffset="145px",C.content=this.utilities.CapitalizeString(null===(o=this.pdpCashbackItem)||void 0===o?void 0:o.description.replace(/on (any )*/,"").trim()),C.linkText="Details",C.linkHandler=function(){var t=new Yr(E.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(g);v.LogInfoEvent(S.ButtonClick,"Navigated to disclaimer for ".concat(m),t),y.RecordAsUserAction(is.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),y.NavigateToUrl(e)},C.addEventListener("click",(function(t){t.stopPropagation()})),C.addEventListener("hover",(function(){var t=new Yr(E.GroceryItemTooltipViewed);s.pageHandlerModule.RecordAsUserAction(is.HOVER_INFO_ICON_ITEMIZED_CASHBACK),s.logModule.LogInfoEvent(S.ButtonClick,"Grocery item-level cashback tooltip viewed",t,dn.CouponImpressionId)})),C.append(f),h.append(p),h.append(C);var b=this.utilities.createElement("p");b.className="gcCashbackDesc",b.textContent="$"+(null===(a=this.pdpCashbackItem)||void 0===a?void 0:a.value),b.id="gcSubTitle",b.style.color="#008A21",b.style.fontWeight="600",b.style.fontSize="32px",b.style.margin="0 0 0 0",b.style.marginTop="10px",b.style.height="40px",b.style.width="100px",b.setAttribute("aria-hidden","true"),d.appendChild(h),d.appendChild(b);var x=this.utilities.createElement("div");x.className="gcButtonPdpActivate",x.style.margin="0 0 0 0",x.style.marginBottom="10px",x.setAttribute("role","presentation");var T=this.utilities.createPrimaryButton();if(T.textContent=this.flyoutData.strings.gcbPdpActivateButton,T.style.width="276px",T.addEventListener("click",(function(){var e,n;s.cashbackClickHandler(s.pdpCashbackItem,!0),s.createItemCashbackActivated(t,s.pdpCashbackItem);var i=null===(e=document)||void 0===e||null===(n=e.getElementById("gcActivationNotif"))||void 0===n?void 0:n.id;i&&s.pdpActionReplace(l.id,i),s.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ICPDPCashbackActivateClick),dn.CouponImpressionId)})),x.append(T),l.appendChild(c),l.appendChild(d),l.appendChild(x),l.setAttribute("aria-label",p.textContent),l.addEventListener("mouseover",(function(){var t=new _(A.ICPdpCashbackNotificationHover);s.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"GroceryPdpNotification",t,dn.CouponImpressionId)})),t.append(l),(null===(r=this.cashbackItems)||void 0===r?void 0:r.length)>0){var D=this.utilities.createElement("div");D.className="gcPdpExtend",D.style.margin="0 0 0 0";var k=this.utilities.createElement("hr");if(k.className="gcHR",D.appendChild(k),this.useCategoryFiltering)D.style.marginBottom="10px";else{var I=this.utilities.createElement("p",{style:"\n                      padding-left: 16px\n                      font-family: 'Segoe UI Variable Static Display';\n                      font-style: normal;\n                      font-weight: 400;\n                      font-size: 14px;\n                      height: 22px;\n                      width: 309px;\n                      padding-left: 10px;\n                  "});I.textContent="More offers",I.setAttribute("aria-hidden","true"),D.appendChild(I)}t.append(D)}}},{key:"createItemCashbackActivated",value:function(t,e){var n,i,o,a,r=this,s=this.utilities.createElement("div");s.id="gcActivationNotif",s.style.margin="5px",s.style.background="inherit",s.setAttribute("role","alert");var l=this.utilities.createElement("div");l.style.width="70%",l.className="gcActivationNotifBody";var c=this.utilities.createElement("div");c.className="gcTextDiv";var u=this.utilities.createElement("div");u.className="gcActivatedDiv";var d=this.utilities.createElement("div");d.innerHTML=this.commonAssets.getGreenCheckCircle(),d.style.marginTop="9px",d.setAttribute("role","presentation");var h=this.utilities.createElement("p");h.className="gcActivatedText",h.textContent=this.flyoutData.strings.gcbActivated,h.style.margin="4px",d.setAttribute("aria-hidden","true"),u.append(h),u.append(d);var p=this.utilities.createElement("p");p.className="gcCashback",p.style.fontSize="40px",p.style.fontWeight="600",p.style.color="#008A21",p.textContent="$".concat(this.groceryUtilities.getCashbackString(e.value)),p.setAttribute("aria-hidden","true");var f=this.utilities.createElement("div",{style:"\n            background-image: linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0)), url('".concat(e.imageUrl,"');\n        ")});f.className="gcImageLargeDiv",f.setAttribute("aria-hidden","true");var g=this.utilities.createElement("div",{style:"\n                display: flex;\n                flex-direction: row;\n                margin-top: 4px;\n                margin-bottom: 4px;\n                column-gap: 4px;\n                "});g.className="gcpdpActiveHeaderDiv";var m=this.utilities.createElement("div");m.style.width="10px",m.slot="hover-anchor",m.setAttribute("aria-label","Info icon"),m.innerHTML=this.commonAssets.getInfoIcon();var v=null===(n=this.pdpCashbackItem)||void 0===n?void 0:n.id,y=null===(i=this.pdpCashbackItem)||void 0===i?void 0:i.cashBackProducts[0].title,C=this.logModule,b=this.pageHandlerModule;var x=this.utilities.createElement("msft-shopping-tooltip");x.className="gcTooltip",x.width="225px",x.caratLeftOffset="145px",x.content=this.utilities.CapitalizeString(null===(o=this.pdpCashbackItem)||void 0===o?void 0:o.description.replace(/on (any )*/,"").trim()),x.linkText="Details",x.linkHandler=function(){var t=new Yr(E.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(v);C.LogInfoEvent(S.ButtonClick,"Navigated to disclaimer for ".concat(y),t),b.RecordAsUserAction(is.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),b.NavigateToUrl(e)},x.addEventListener("click",(function(t){t.stopPropagation()})),x.addEventListener("hover",(function(){var t=new Yr(E.GroceryItemTooltipViewed);r.pageHandlerModule.RecordAsUserAction(is.HOVER_INFO_ICON_ITEMIZED_CASHBACK),r.logModule.LogInfoEvent(S.ButtonClick,"Grocery item-level cashback tooltip viewed",t,dn.CouponImpressionId)})),x.append(m),g.append(p),g.append(x),c.append(g),c.append(u),l.append(f),l.append(c);var T=this.utilities.createElement("div"),D=this.utilities.createElement("p");if(D.className="gcActivationFooter",D.textContent=this.flyoutData.strings.gcbActivatedSubSectionTitle,D.setAttribute("aria-hidden","true"),T.append(D),s.append(l),s.append(T),s.setAttribute("aria-label",e.cashBackProducts[0].title+" activated"),s.addEventListener("mouseover",(function(){if(!r.isActivatedHoverEventSent){r.isActivatedHoverEventSent=!0;var t=new _(A.ICPDPActivatedHover);r.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",t,dn.CouponImpressionId)}})),t.prepend(s),(null===(a=this.cashbackItems)||void 0===a?void 0:a.length)>0){var k=this.utilities.createElement("div");k.className="gcPdpExtend",k.style.margin="0 0 0 0";var I=this.utilities.createElement("hr");if(I.className="gcHR",k.appendChild(I),this.useCategoryFiltering)k.style.marginBottom="10px";else{var w=this.utilities.createElement("p",{style:"\n                      padding-left: 16px\n                      font-family: 'Segoe UI Variable Static Display';\n                      font-style: normal;\n                      font-weight: 400;\n                      font-size: 14px;\n                      height: 22px;\n                      width: 309px;\n                      padding-left: 10px;\n                  "});w.textContent="More offers",w.setAttribute("aria-hidden","true"),k.appendChild(w)}t.append(k)}}},{key:"pdpActionReplace",value:function(t,e){var n=document.getElementById(t),i=document.getElementById(e);n&&(n.style.display="none"),i&&(i.style.display="block")}},{key:"createCategoryFilterButton",value:function(t,e,n){var i=this,o=this.utilities.createElement("button");return o.className="categoryButton",o.textContent=t,o.id="icc_"+e,o.addEventListener("click",(function(o){i.logModule.LogInfoEvent(S.EdgeFlyoutStatus,t,new _(A.CategoryFilterClick),dn.CouponImpressionId),i.categoryClickHandler(o,n,e)})),o}},{key:"showOrHideSeeMoreButton",value:function(t,e){var n=this.getActionElement(t);if(n)if(e<=bt.GROCERY_CASHBACK)n.style.display="none";else{n.style.display="inline-block";var i=t.querySelector("#seeMoreButton");i&&(i.textContent=this.utilities.replaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,"".concat(e-bt.GROCERY_CASHBACK)))}}},{key:"getActionElement",value:function(t){var e=t.shadowRoot;if(e){var n=e.querySelector(".action");if(n)return n}return null}},{key:"categoryClickHandler",value:function(t,e,n){var i=this,o=this.selectedCategoryId;if(void 0===o||o!==n){this.selectedCategoryId=n;var a=this.utilities.isKeyboardClick(t),r=t.target;un.queueUpdate((function(){i.unsetCurrentSelectedCategory(e),i.setNewSelectedCategory(r),i.populateFilteredGroceryCashbackList(e,!1,a).then((function(){i.showOrHideSeeMoreButton(e,i.getNumberOfOffersInSelectedCategory())}))}))}}},{key:"setNewSelectedCategory",value:function(t){t.classList.add("selected"),this.selectedCategoryId=t.id.substring(4)}},{key:"unsetCurrentSelectedCategory",value:function(t){var e=t.querySelector(".categoryButton.selected");e&&e.classList.remove("selected")}},{key:"createGroceryCashbackTile",value:function(t){var e=this,n=this.utilities.createElement("a");n.href="#",n.className="groceryCashback",n.setAttribute("role","group"),n.addEventListener("click",(function(){e.cashbackClickHandler(t,!1),e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackOfferClick),dn.CouponImpressionId)}));var i=this.utilities.createElement("div");i.className="gcImageDiv",i.style.backgroundImage="url('".concat(t.imageUrl,"')"),i.setAttribute("aria-hidden","true");var o=this.utilities.createElement("div",{style:"\n      display: flex;\n      flex-direction: column;\n      row-gap: 4px;\n      width: 160px;\n  "}),a=this.utilities.createElement("p");a.className="gcTitle",a.textContent=t.cashBackProducts[0].title;var r=this.utilities.createElement("div");r.className="gcCashbackDiv";var s=this.utilities.createElement("p");s.className="gcCashback";var l="".concat(Dt.currency).concat(this.groceryUtilities.getCashbackString(t.value));if(l===Dt.currency)return null;s.textContent=this.utilities.replaceValueInKey("gcbCashBack",this.flyoutData.strings.gcbCashBack,l),s.textContent=Dl.replaceStringsPlaceholders(s.textContent);var c=this.utilities.createElement("div");c.slot="hover-anchor",c.setAttribute("aria-label","Info icon"),c.innerHTML=this.commonAssets.getInfoIcon();var u=t.id,d=t.cashBackProducts[0].title,h=this.logModule,p=this.pageHandlerModule;var f=this.utilities.createElement("msft-shopping-tooltip");f.className="gcTooltip",f.width="225px",f.caratLeftOffset="145px",f.content=this.utilities.CapitalizeString(t.description.replace(/on (any )*/,"").trim()),f.linkText="Details",f.linkHandler=function(){var t=new Yr(E.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(u);h.LogInfoEvent(S.ButtonClick,"Navigated to disclaimer for ".concat(d),t),p.RecordAsUserAction(is.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),p.NavigateToUrl(e)},f.addEventListener("click",(function(t){t.stopPropagation()})),f.addEventListener("hover",(function(){var t=new Yr(E.GroceryItemTooltipViewed);e.pageHandlerModule.RecordAsUserAction(is.HOVER_INFO_ICON_ITEMIZED_CASHBACK),e.logModule.LogInfoEvent(S.ButtonClick,"Grocery item-level cashback tooltip viewed",t,dn.CouponImpressionId)})),f.append(c),r.append(s),r.append(f),r.addEventListener("mouseover",(function(){e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackHover),dn.CouponImpressionId)}));var g=this.utilities.createElement("div");g.className="gcButtonColorful",g.style.margin="5px",g.setAttribute("role","presentation");var m=this.utilities.createElement("fluent-button");return m.className="gcButton",m.style.width="70px",m.textContent=this.flyoutData.strings.gcbActivateButton,m.addEventListener("click",(function(n){n.stopPropagation(),e.cashbackClickHandler(t,!1),e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackActivateClick),dn.CouponImpressionId)})),m.setAttribute("aria-hidden","true"),g.append(m),o.append(a),o.append(r),n.setAttribute("aria-label",a.textContent+" "+s.textContent),n.append(i),n.append(o),n.append(g),n}},{key:"cashbackClickHandler",value:(c=e(o().mark((function t(e,n){var i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new Yr(E.GroceryItemShopAndActivate)).Metadata=JSON.stringify({OfferId:e.id}),this.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CLICK_ITEMIZED_CASHBACK),this.logModule.LogInfoEvent(S.ButtonClick,"",i,dn.CouponImpressionId),this.LogActivateData(e.id),this.addActivatedCashbackItem(e),n||(a=ds.CreateFromString(JSON.stringify(e)),this.pageHandlerModule.SetStorageValue(Qr.GroceryCashbackItem,a),r=Hs.CreateFromBool(!0),this.pageHandlerModule.SetStorageValue(Qr.ICActivatedPending,r)),t.next=9,le.Sleep(25);case 9:n||this.pageHandlerModule.NavigateToUrl(e.cashBackProducts[0].url);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"GetImpressionId",value:function(){var t,e;return null!==(t=this.flyoutData.dataStoreModule)&&void 0!==t&&t.ApiData?null===(e=this.flyoutData.dataStoreModule)||void 0===e?void 0:e.ApiData.impressionId:""}},{key:"LogActivateData",value:(a=e(o().mark((function t(e){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetAnid(!0);case 2:return n=t.sent,i={activateOffersBody:{offers:[e]},domainName:this.flyoutData.common.domain,impressionId:this.GetImpressionId()},a={body:JSON.stringify(i),headers:{"Content-Type":"application/json","x-edge-anid":n.anid},method:"POST"},t.next=9,fetch("https://www.bing.com/grocery/universal/api/v1/edge/activate",a);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getOffersForCategory",value:(i=e(o().mark((function t(e,n){var i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a={domainName:n,queries:[{category:e}]},r={body:JSON.stringify(a),headers:{"Content-Type":"application/json"},method:"POST"},t.next=13;break;case 8:s=t.sent,l=null==s?void 0:s.offers.map((function(t){return ic.CreateFromUAPI(t)})),i=l||[],t.next=18;break;case 13:return t.next=15,this.getOffersDataAsync("https://www.bing.com/grocery/universal/api/v1/edge/productoffers",r);case 15:c=t.sent,u=null==c?void 0:c.cashbackOffers.map((function(t){return ic.CreateFromGroceryApi(t)})),i=u||[];case 18:return t.abrupt("return",i);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"getOffersDataAsync",value:(n=e(o().mark((function t(e,n){var i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,n);case 3:if(!(i=t.sent).ok){t.next=10;break}return t.next=7,i.json();case 7:if(!(a=t.sent)){t.next=10;break}return t.abrupt("return",a);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),function(t,e){return n.apply(this,arguments)})},{key:"addActivatedCashbackItem",value:function(t){if(t){var e=this.flyoutData.common.domain,n=Ke(Je.activatedCashbackKey),i=t.cashBackProducts[0].title,o=t.cashBackProducts[0].upc,a=t.value,r=t.minQty,s=t.id,l=t.imageUrl,c=t.description,u=t.cashBackProducts[0].url;(!n[e]||n[e]&&!n[e].items)&&(n[e]={items:{},fullItems:{}}),n[e].items[i]={minQty:r,offerId:s,upc:o,value:a,imageUrl:l,url:u,description:c},n[e].impressionId=this.GetImpressionId(),n[e].fullItems[s]=t,Ye(Je.activatedCashbackKey,JSON.stringify(n));var d=new ds;d.stringValue=JSON.stringify(n),this.pageHandlerModule.SetStorageValue(Qr.GroceryCashbackActivated,d)}}}]),v}(Bb),Nw=Mw;function Lw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function _w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Fw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Hw=function(t){u(h,t);var n,i,a,c,d=Fw(h);function h(t,e,n,i){var o;return s(this,h),f(l(o=d.call(this,t,e,n,i)),"activatedItem",void 0),f(l(o),"storage",void 0),f(l(o),"shouldConfirmActivation",void 0),f(l(o),"shouldConfirmPurchase",void 0),f(l(o),"activatedItems",void 0),f(l(o),"activationTimestamp",void 0),f(l(o),"groceryOrder",void 0),f(l(o),"rebatesAmount",void 0),f(l(o),"isHoverEventSent",void 0),o.storage=o.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0),o.shouldConfirmActivation=!1,o.shouldConfirmPurchase=!1,o.activatedItems=[],o.activationTimestamp="",o.rebatesAmount=0,o}return r(h,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:(c=e(o().mark((function t(){var e,n,i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),!this.shouldConfirmPurchase){t.next=11;break}return this.shouldConfirmPurchase=!1,e=new _(A.ICConfirmationNotification),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"GroceryConfirmation",e,dn.CouponImpressionId),this.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_CLICK_ITEMIZED_CASHBACK),n=this.createCashbackRefundConfirmation(),i=this.utilities.createNotificationModule(n,this.GetNotificationName(),this),t.abrupt("return",Promise.resolve(i));case 11:if(!this.shouldConfirmActivation){t.next=18;break}return this.shouldConfirmActivation=!1,a=new _(A.ICActivatedNotification),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"GroceryActivation",a,dn.CouponImpressionId),r=this.createItemNotificationCashbackActivated(),s=this.utilities.createNotificationModule(r,this.GetNotificationName(),this),t.abrupt("return",Promise.resolve(s));case 18:return t.abrupt("return",Promise.resolve(null));case 19:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"ShouldRenderNotification",value:(a=e(o().mark((function t(){var e,n,i,a,r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.flyoutData.experimentData.isExperimentActive(Be.groceryCashback),t.t0=e,!t.t0){t.next=7;break}return t.next=6,this.ISGroceryCashbackNotification();case 6:t.t0=t.sent;case 7:if(!t.t0){t.next=18;break}if(this.storage&&(r=this.storage[Qr.GroceryCashbackItem]))try{this.activatedItem=JSON.parse(r)}catch(t){a=JSON.stringify(t)}return this.shouldConfirmActivation=!!this.activatedItem&&void 0!==(null===(n=this.activatedItem)||void 0===n?void 0:n.cashBackProducts[0].title)&&void 0!==(null===(i=this.activatedItem)||void 0===i?void 0:i.imageUrl),this.shouldConfirmPurchase=this.shouldRenderPurchaseConfirmation(),this.shouldConfirmPurchase&&this.sendActivationRequest(),s=this.shouldConfirmActivation||this.shouldConfirmPurchase,this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK||s||((l=new _(A.OnErrorInvoked)).Metadata=JSON.stringify({activatedItem:this.activatedItem,error:a}),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Grocery Notification Not shown",l,dn.CouponImpressionId)),t.abrupt("return",Promise.resolve(s));case 18:return t.abrupt("return",Promise.resolve(!1));case 19:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"GetNotificationName",value:function(){return Mt.GROCERY_CASHBACK_NOTIFICATION}},{key:"PurgeSubmittedData",value:function(t,e,n,i){if(t&&t[e]){if(t[e].items){var o,a=Lw(n);try{for(a.s();!(o=a.n()).done;){var r=o.value;delete t[e].items[r]}}catch(t){a.e(t)}finally{a.f()}}if(t[e].fullItems){var s,l=Lw(i);try{for(l.s();!(s=l.n()).done;){var c=s.value;delete t[e].fullItems[c]}}catch(t){l.e(t)}finally{l.f()}}}}},{key:"ISGroceryCashbackNotification",value:(i=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.flyoutData.common.openedWith===Tt.Auto&&(this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK||this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PACKAGE_TRACKING),t.abrupt("return",Promise.resolve(e));case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createItemNotificationCashbackActivated",value:function(){var t=this;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles(),vb.ICNotification);var e=this.utilities.createElement("div");e.id="gcActivationNotif",e.setAttribute("role","alert");var n=this.utilities.createElement("div");n.className="gcActivationNotifBody";var i=this.utilities.createElement("div");i.className="gcTextDiv";var o=this.utilities.createElement("div");o.className="gcActivatedDiv";var a=this.utilities.createElement("div");a.innerHTML=this.commonAssets.getGreenCheckCircle(),a.style.marginTop="9px",a.setAttribute("role","presentation");var r=this.utilities.createElement("p");r.className="gcActivatedText",r.textContent=this.flyoutData.strings.gcbActivated,r.style.margin="4px",a.setAttribute("aria-hidden","true"),o.append(r),o.append(a);var s=this.utilities.createElement("p");s.className="gcCashback",s.style.fontSize="40px",s.style.fontWeight="600",s.style.color="#008A21",s.textContent="$".concat(this.groceryUtilities.getCashbackString(this.activatedItem.value)),s.setAttribute("aria-hidden","true"),i.append(s),i.append(o);var l=this.utilities.createElement("div",{style:"\n            background-image: linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0)), url('".concat(this.activatedItem.imageUrl,"');\n        ")});l.className="gcImageLargeDiv",l.setAttribute("aria-hidden","true"),n.append(i),n.append(l);var c=this.utilities.createElement("div");c.className="gcActivationNotifSeparator";var u=this.utilities.createElement("div"),d=this.utilities.createElement("p");return d.className="gcActivationFooter",d.textContent=this.flyoutData.strings.gcbActivatedSubSectionTitle,d.setAttribute("aria-hidden","true"),u.append(d),e.append(n),e.append(c),e.append(u),e.setAttribute("aria-label",this.activatedItem.cashBackProducts[0].title+" activated"),e.addEventListener("mouseover",(function(){if(!t.isHoverEventSent){t.isHoverEventSent=!0;var e=new _(A.ICActivatedNotificationHover);t.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",e,dn.CouponImpressionId)}})),this.clearingActivationStorage(this.utilities),this.utilities.dismissNotificationTimeOut(5e3),e}},{key:"clearingActivationStorage",value:function(t){try{setTimeout((function(){t.setStorageString(Qr.GroceryCashbackItem,"")}),2e3)}catch(t){}}},{key:"createCashbackRefundConfirmation",value:function(){var t=this.utilities.createElement("div",{style:"\n            background: linear-gradient(180deg, rgba(16, 142, 220, 0.1) 0%, rgba(78, 136, 74, 0) 100%);\n            padding: 16px;\n            margin-top: -20px;\n            align-items: center;\n            display: flex;\n            flex-direction: column;\n            row-gap: 16px;\n        "});t.setAttribute("role","alert");var e=this.IsDarkMode(),n=this.utilities.createElement("img");n.src=e?this.flyoutData.common.resourcesEndpoint+"common/money_sparkles_dark.png":this.flyoutData.common.resourcesEndpoint+"common/money_sparkles.png",n.style.width="64px",n.setAttribute("aria-hidden","true");var i=this.utilities.createElement("span");i.id="groceryRebatesTitle",i.setAttribute("aria-hidden","true");var o=this.utilities.replaceValueInKey("gcbNotifTitle",this.flyoutData.strings.gcbNotifTitle,"".concat(Dt.currency).concat(this.rebatesAmount.toFixed(2))),a=this.utilities.createElement("span");a.textContent=this.flyoutData.strings.gcbNotifRebates,a.style.color="#0078d4",this.utilities.replaceElementInKey(i,o,a),o=Dl.replaceStringsPlaceholders(o);var r=this.utilities.createElement("p");return r.id="groceryRebatesSubtitle",r.textContent=this.flyoutData.strings.gcbNotifSubtitle,r.setAttribute("aria-hidden","true"),t.append(n),t.append(i),t.append(r),t.setAttribute("aria-label",i.textContent+" "+r.textContent),this.clearingPurchaseStorage(this.utilities),t}},{key:"IsDarkMode",value:function(){return!!(window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}},{key:"clearingPurchaseStorage",value:function(t){try{t.clearDomainMappedStringStorage(Qr.GroceryOrder,!0),t.setStorageBoolean(Qr.ICConfirmationPending,!1),Ye(this.submitKey,"false")}catch(t){}}},{key:"shouldRenderPurchaseConfirmation",value:function(){var t,e,n,i,o,a,r,s=this.flyoutData.common.domain,l=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData;if(!(null==l?void 0:l.IsConfirmationPage(null===(e=this.flyoutData.common)||void 0===e?void 0:e.lastCommittedURL)))return!1;var c=Ke(Je.activatedCashbackKey);try{var u,d,h=c?c[s]:{};this.activatedItems=h&&null!==(u=h.items)&&void 0!==u?u:{},this.activationTimestamp=h&&null!==(d=h.timestamp)&&void 0!==d?d:""}catch(t){return!1}var p=null!==(n=Object.keys(this.activatedItems))&&void 0!==n?n:[],f=null!==(i=null===(o=this.storage)||void 0===o?void 0:o.GroceryOrder)&&void 0!==i?i:"",g=f?JSON.parse(f):{},m=g?g[s]:{};if(this.groceryOrder=null!==(a=null==m?void 0:m.cartDataStorageInfo)&&void 0!==a?a:{},(null==p?void 0:p.length)>0&&null!==(r=this.groceryOrder)&&void 0!==r&&r.Products){var v,y=Lw(this.groceryOrder.Products);try{for(y.s();!(v=y.n()).done;){var C=v.value;if(p.includes(C.productTitle)){var b,S=this.activatedItems[C.productTitle],x=null!==(b=S.minQty)&&void 0!==b?b:1,E=C.productQuantity;-1===C.productQuantity&&(E=1),x<=E&&(this.rebatesAmount+=Number(S.value))}}}catch(t){y.e(t)}finally{y.f()}}var A=this.rebatesAmount>0;return A||this.shouldConfirmActivation||this.utilities.clearDomainMappedStringStorage(Qr.GroceryOrder),A}},{key:"sendActivationRequest",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("true"!==(r=ze(this.submitKey))&&"processing"!==r){t.next=3;break}return t.abrupt("return");case 3:return Ye(this.submitKey,"processing"),t.next=6,this.pageHandlerModule.GetAnid(!0);case 6:return s=t.sent,l=[],c=this.createCashbackAPIRequest(s.anid,l),u={body:JSON.stringify(c),headers:{"Content-Type":"application/json"},method:"POST"},t.next=15,fetch("https://www.bing.com/api/shopping/v1/savings/grocerycashback/activate",u);case 15:return d=t.sent,t.next=18,d.json();case 18:t.sent,Ye(this.submitKey,"true"),h=null!==(e=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n?void 0:n.impressionId)&&void 0!==e?e:"",p=null!==(i=null===(a=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===a?void 0:a.Cashback.SubmittedOfferIds)&&void 0!==i?i:[],f=this.flyoutData.common.domain,Je.SetSubmittedItemsCashbackItems(f,p,h),g=Ke(Je.activatedCashbackKey),this.PurgeSubmittedData(g,f,l,p),m=JSON.stringify(g),Ye(Je.activatedCashbackKey,m),this.pageHandlerModule.SetStorageValue(Qr.GroceryCashbackActivated,ds.CreateFromString(m));case 30:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"createCashbackAPIRequest",value:function(t,e){if(!this.groceryOrder||!this.activatedItems)return{};var n,i=Object.keys(this.activatedItems),o=[],a=[],r=Lw(this.groceryOrder.Products);try{for(r.s();!(n=r.n()).done;){var s,l=n.value,c=l.productTitle,u=i.includes(c)?this.activatedItems[c]:{offerId:"",upc:""},d=u.upc,h=u.offerId,p={count:l.productQuantity,offerId:h,price:l.productPrice,soldBy:l.productSeller,title:c,upc:d};if(!Se(d)&&!Se(h))o.push(p),a.push(p.offerId),null===(s=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===s||s.Cashback.SubmittedOfferIds.push(p.offerId),e.push(c)}}catch(t){r.e(t)}finally{r.f()}return{activateOffersBody:{activationDate:this.groceryUtilities.getQuotientDate(this.activationTimestamp),offers:a},anid:t,estimatedShippingDate:this.groceryOrder.ShipmentDate,estimatedTax:this.groceryOrder.CartEstimatedTax,grandTotal:this.groceryOrder.OrderTotal,items:o,placementDate:this.groceryUtilities.getQuotientDate(),totalBeforeTax:this.groceryOrder.CartPreTax}}}]),h}(Nw),Bw=Hw,Uw=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        html {\n            overflow: hidden;\n        }\n        #divContentWrapper {\n            width: auto;\n            height: auto;\n            display: inline-block;\n        }\n        body {\n            margin: 0px;\n        }\n        fluent-design-system-provider {\n            width: auto;\n            height: 36px;\n            margin: 0px;\n            display: flex;\n        }\n        .txtLarge {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 24px;\n            line-height: 28px;\n            margin: 0px;\n        }\n        .txtMedium {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 16px;\n            line-height: 20px;\n            margin: 0px;\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 16px;\n            margin: 0px;\n        }\n        ::part(header-fixed) {\n            display: none;\n        }\n        ::part(header) {\n            margin: 0px!important;\n        }\n        ::part(sections) {\n            margin-top: 0px!important;\n        }\n    }"}},{key:"getDarkModeStyles",value:function(){return"\n    .txtSmall {\n        color: #FFFFFF;\n    }\n    .txtMedium {\n        color: #FFFFFF;\n    }\n    .txtLarge {\n        color: #FFFFFF;\n    }\n        "}}]),t}(),Vw=function(){function t(e,n,i,o){s(this,t),f(this,"utilities",void 0),f(this,"commonAssets",void 0),f(this,"microAssets",void 0),f(this,"stateManagement",void 0),f(this,"pageHandlerModule",void 0),f(this,"logModule",void 0),f(this,"flyoutData",void 0),f(this,"microNotificationID","divMicroNotification"),this.utilities=i.viewModulesUtilities,this.stateManagement=e,this.microAssets=new Uw,this.commonAssets=o,this.pageHandlerModule=i.pageHandlerModule,this.logModule=i.logModule,this.flyoutData=n}return r(t,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:function(){var t=this,e=this.utilities.createElement("DIV");e.id=this.microNotificationID,this.utilities.applyStyles(e,this.microAssets.getStyles(),void 0,this.microAssets.getDarkModeStyles());var n=this.utilities.createElement("BUTTON",{style:"display: flex;\n        flex-direction: row; width: auto; background: transparent; cursor: pointer; border-width: 0px;"});n.setAttribute("describedBy","txtMicroNotificationTitle"),n.style.minHeight="36px";var i=this.addHeaderIcon();i.style.placeSelf="center",i.style.display="flex",i.style.alignItems="center",i.style.marginRight="8px",i.setAttribute("aria-hidden","true");var o=this.utilities.createElement("P");o.textContent=this.flyoutData.common.microNotificationTitle,o.id="txtMicroNotificationTitle",o.className="txtSmall",o.style.textAlign="left",o.style.width="auto",o.style.placeSelf="center",this.flyoutData.common.currentTheme===xt.Dark?o.style.color="#FFFFFF":o.style.color="#4179FC",o.style.fontWeight="500",o.style.whiteSpace="nowrap",n.appendChild(i),n.appendChild(o);var a=document.querySelector("html");a&&(a.style.overflow="hidden"),e.appendChild(n),n.addEventListener("click",(function(){un.queueUpdate((function(){t.pageHandlerModule.CancelAutoDismiss(),t.pageHandlerModule.RecordAsUserAction(is.OPEN_FLYOUT_MICRO_NOTIFICATION);var n=new Yr(E.MicroNotificationClick);t.logModule.LogInfoEvent(S.ButtonClick,"Micro notification was clicked",n,dn.CouponImpressionId),t.stateManagement.setState(pn.microNotificationClicked,!0),null==e||e.remove();var i=new CustomEvent(hn.onNotificationClick);t.stateManagement.dispatchEvent(i)}))}));var r=this.utilities.createNotificationModule(e,this.GetNotificationName(),this);return Promise.resolve(r)}},{key:"ShouldRenderNotification",value:function(){var t;if(!this.stateManagement.getState(pn.microNotificationClicked))return Promise.resolve(null!==(t=this.flyoutData.common.openedWith===Tt.Auto&&void 0!==this.flyoutData.common.microNotificationTitle&&this.flyoutData.experimentData.isExperimentActive(Be.microNotification)&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_NOTIFICATION)&&void 0!==t&&t);var e=this.flyoutData.common.shopping.querySelector("#".concat(this.microNotificationID));return e&&e.remove(),Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.MICRONOTIFICATION}},{key:"addHeaderIcon",value:function(){var t=document.createElement("DIV");return t.innerHTML=this.commonAssets.getHeaderIcon(),t}}]),t}(),Gw=Vw,Ww=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #txtPCProductTitle {\n            margin-top: 5px;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        #divDisclaimer {\n            display: flex;\n            flex-direction: row;\n            background-color: #F7F7F7;\n            height: 48px;\n            width: 100%;\n            margin-top: 3px;\n        }\n        .disclaimer {\n            display: flex;\n            flex-direction: row;\n        }\n        .disclaimerIcon {\n            margin: 11px 9px 11px 12px;\n        }\n        .disclaimerIconFlyout {\n            margin: 9px 9px 0 0;\n        }\n        .disclaimerTextFlyout {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 10px;\n            color: #7A7A7A;\n            line-height: 14px;\n            margin: 10px 2px 3px;\n            width: 272px;\n            text-align: left;\n        }\n        .disclaimerText {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 10px;\n            color: #7A7A7A;\n            line-height: 14px;\n            margin:10px 59px 10px 2px;\n            text-align: left;\n        }\n        #priceComparisonSection msft-product-card:hover {\n            background: inherit;\n        }"}}]),t}(),$w=function(){function t(e){s(this,t),f(this,"BannerExperimentActive",!1),this.BannerExperimentActive=e.isPCBannerUXExperimentActive()}return r(t,[{key:"UpdateTextOnLowestPriceTileBadge",value:function(){return this.BannerExperimentActive}}]),t}();function zw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Kw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Yw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var jw=function(t){u(a,t);var n,i=Yw(a);function a(t,e,n,o){var r;return s(this,a),f(l(r=i.call(this)),"assets",void 0),f(l(r),"logModule",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"stateManagement",void 0),f(l(r),"flyoutData",void 0),f(l(r),"utilities",void 0),f(l(r),"visibilityRequest",[]),f(l(r),"pcModuleUXConfig",void 0),f(l(r),"sectionId","priceComparisonSection"),f(l(r),"loadingUXId","divPCLoadingStateContainer"),f(l(r),"commonAssets",void 0),f(l(r),"firstCard",void 0),r.logModule=n.logModule,r.pageHandlerModule=n.pageHandlerModule,r.stateManagement=t,r.flyoutData=e,r.utilities=n.viewModulesUtilities,r.assets=new Ww,r.pcModuleUXConfig=new $w(r.flyoutData.experimentData),r.commonAssets=o,r}return r(a,[{key:"GetModuleName",value:function(){return Rt.PRICECOMPARISON}},{key:"CalculateRanking",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData;return null!=t&&t.shouldBeInPolePosition?Ct.SaveMoneyOtherSites:Ct.InformOtherSites}},{key:"ShouldRenderModule",value:function(){var t,e,n=this,i=this.flyoutData.dataStoreModule.PriceComparisonData,o=null!==(t=i&&i.CompetingPrices&&i.CompetingPrices.length>0)&&void 0!==t&&t;if((null==i||null===(e=i.segment)||void 0===e?void 0:e.toLowerCase())===Gt.AUTOS)return Promise.resolve(!1);var a=!1;try{a="3"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("bing_shopping_campaign_guid")}catch(t){}var r="false";this.flyoutData.common.isPane&&(r=ze("isPDP"));var s=(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_BING_CAMPAIGN&&a||"true"===r)&&!o;return this.stateManagement.addEventListener(hn.pcCreateHeader,this.populateMainHeader.bind(this)),this.stateManagement.addEventListener(hn.PDPUpdate,(function(t){var e,i,o,a,r=new CustomEvent(hn.PDPRemoved,{detail:{moduleName:n.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.comparableOffers&&t.detail.data.comparableOffers.value&&t.detail.data.comparableOffers.value.length>0&&t.detail.data.price&&(null===(e=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===e||!e.CompetingPrices||null!==(i=n.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==i&&i.CompetingPrices&&0===(null===(o=n.flyoutData.dataStoreModule.PriceComparisonData)||void 0===o?void 0:o.CompetingPrices.length))){var s=t.detail.data;s?n.updatePCModule(s,t.detail.wrapper):n.stateManagement.dispatchEvent(r)}else null!==(a=n.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==a&&a.CompetingPrices||n.stateManagement.dispatchEvent(r)})),s?Promise.resolve(s):Promise.resolve(o)}},{key:"renderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData;if(null==e||!e.CompetingPrices){var n=document.createElement("msft-edge-shopping-section");n.id=this.sectionId,n.title=this.flyoutData.strings.pcPriceSectionTitle,this.utilities.createPDPLoadingStateUX(n,this.loadingUXId,this.sectionId,this.stateManagement);var i=this.CreateModule(n,wt.MAX,Rt.PRICECOMPARISON,_t.CONTEXTUAL,Ft.BLOCK);return Promise.resolve(i)}if(0===(null==e||null===(t=e.CompetingPrices)||void 0===t?void 0:t.length))return Promise.resolve(null);if(e&&e.CompetingPrices.length>0){var o,a;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var r=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));r?a=r:(a=document.createElement("msft-edge-shopping-section")).id=this.sectionId,this.populatePriceList(a,!1,!1);var s=this.flyoutData.strings.pcPriceSectionTitle;this.utilities.createCommonListStructure(a,s,null===(o=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===o?void 0:o.CompetingPrices,this.GetModuleName(),(function(t){return bt.PRICECOMPARISON}),this.populatePriceList.bind(this));var l=this.CreateModule(a,wt.PRICECOMPARISON,Rt.PRICECOMPARISON,_t.CONTEXTUAL,Ft.BLOCK),c=e.lowestPrice,u=e.Price-c;if(c>0&&u>0){var d=new _(A.YouCanSave,e.CompetingPrices.length,parseFloat(u.toFixed(2)));this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price comparison - user can save money",d)}else{var h=new _(A.BestPrice,e.CompetingPrices.length);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price comparison - user has the best price",h)}return this.pcModuleUXConfig.BannerExperimentActive&&this.disableNotificationHeader(),Promise.resolve(l)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=this.flyoutData.common.shopping;if(t&&t.CompetingPrices&&t.CompetingPrices.length>0){var n,i=t.lowestPrice,o=t.Price-i,a="$";t.CompetingPrices[0].CurrencySymbol&&(a=t.CompetingPrices[0].CurrencySymbol);var r,s=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: 120px auto; column-gap: 12px;"}),l=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; margin-top: 10px; justify-content: center;"}),c=this.utilities.createElement("H2");if(c.className="txtLarge",c.style.fontWeight="500",i>0&&o>0&&this.isAboveThreshold(t.Price,i))if(l.style.marginTop="0px",s.style.gridTemplateColumns="120px auto",s.style.alignItems="center",s.style.columnGap="12px",c.style.fontSize="24px",c.style.fontWeight="600",o<=1)c.textContent=this.flyoutData.strings.pcSmallSavingsHeader;else{r=this.utilities.createElement("SPAN");var u=this.utilities.formatPrice(o);r.textContent=a+u,r.style.color="var(--text-price-savings-color)",o>=1e5?(r.style.fontSize="26px",r.style.lineHeight="36px"):(r.style.fontSize="44px",r.style.lineHeight="56px"),r.style.fontWeight="400",this.utilities.populateSingleChildHtml(c,this.flyoutData.strings.savingsHeader,r)}else{var d=this.utilities.createElement("SPAN",{style:"font-size: 24px; line-height: 28px; font-weight: 600; display: inline-block;"});d.style.color="var(--text-price-savings-color)",d.textContent=this.flyoutData.strings.pcBestPriceTitle.toLowerCase(),this.utilities.populateSingleChildHtml(c,this.flyoutData.strings.pcBestPriceRefreshHeader,d)}if(l.appendChild(c),t.currentImageUrl&&""!==t.currentImageUrl){var h=this.utilities.createElement("IMG");this.utilities.addImageSrc(h,this.flyoutData.common.urlPrefix+t.currentImageUrl);var p=this.utilities.createProductImage(120,120,h,t.currentProductTitle),f=!0;l.style.textAlign="left",h.addEventListener("error",(function(){f=!1,h.remove(),s.style.gridTemplateColumns="auto",l.style.textAlign="center",l.style.alignItems="center",c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",c.style.placeSelf="center"),r&&(r.style.fontSize="40px",r.style.lineHeight="47px")})),f?s.appendChild(p):(s.style.gridTemplateColumns="auto",l.style.textAlign="center",l.style.alignItems="center",c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",c.style.placeSelf="center"),r&&(r.style.fontSize="40px",r.style.lineHeight="47px"))}else s.style.gridTemplateColumns="auto",l.style.textAlign="center",l.style.alignItems="center",r&&c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",r.style.fontSize="40px",r.style.lineHeight="47px");if(t.currentProductTitle&&""!==t.currentProductTitle&&null!==(n=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==n&&n.canCreateInlineRating){var g,m=this.utilities.createElement("P");if(m.className="txtSmall",m.textContent=t.currentProductTitle,m.id="txtPCProductTitle",m.title=t.currentProductTitle,l.appendChild(m),null!==(g=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==g&&g.canCreateInlineRating){var v=new CustomEvent(hn.CreateInlineRating,{detail:{callback:function(t){t&&l&&(l.appendChild(t),l.style.marginTop="1px",m.style.marginTop="8px",t.style.marginTop="4px")},moduleName:Rt.PRICECOMPARISON}});this.stateManagement.dispatchEvent(v)}}s.appendChild(l);var y=e.querySelector("#".concat(this.sectionId));this.flyoutData.common.isPane&&y?(s.style.marginBottom="18px",y.prepend(s),y.slot="header-content",s.classList.add("headerMargin")):(s.slot="header-content",s.classList.add("headerMargin"),e.appendChild(s)),this.flyoutData.common.isPane||(s.style.marginTop="16px")}}},{key:"PostProcessing",value:function(t,e,n){var i=this;0===e?this.visibilityRequest.length>0&&this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest):(this.firstCard&&(this.firstCard.isFirst=!0),un.queueUpdate((function(){var t,e=null===(t=n.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e&&e.classList.contains("expanded"))i.visibilityRequest.length>0&&i.pageHandlerModule.SendBingVisibilityRequest(i.visibilityRequest);else if(e){n.addEventListener("click",(function t(){n&&(e&&(e.classList.contains("expanded")||o.SendBingVisibilityRequest(a)),n.removeEventListener("click",t))}));var o=i.pageHandlerModule,a=i.visibilityRequest;if(!i.flyoutData.common.isPane){var r,s=null===(r=e.shadowRoot)||void 0===r?void 0:r.querySelector(".region");s&&(s.style.marginBottom="0px")}}})))}},{key:"populatePriceList",value:function(t,e,n){var i,o=this.flyoutData.dataStoreModule.PriceComparisonData,a=null==o?void 0:o.CompetingPrices;if(a){a.length>0&&(i=a.length);var r=0;if(e){var s=new Yr(E.SeeMoreRetailers);this.pageHandlerModule.RecordAsUserAction(is.VIEW_MORE_RETAILERS),this.logModule.LogInfoEvent(S.ButtonClick,"",s),r=bt.PRICECOMPARISON}else i>bt.PRICECOMPARISON&&(i=bt.PRICECOMPARISON);for(var l=null==o?void 0:o.lowestPrice,c=this.stateManagement.getState(pn.pcLowestPriceImpression),u=r;u<i;u++)this.createNewPriceComparisonTile(t,a[u],l,r,e,n,u,null==o?void 0:o.Price,c);this.visibilityRequest.length>0&&e&&this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest)}}},{key:"navigateToRetailer",value:function(t,e){var n=new Yr(E.NavigatedToAnotherRetailer);this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RETAILER),this.logModule.LogInfoEvent(S.ButtonClick,"Navigation to another retailer from price comparison",n),this.flyoutData.dataLoader.IsServerData()||this.flyoutData.common.currentDevice===St.Mobile?this.pageHandlerModule.NavigateToRetailerSite(t.Url):""!==t.PriceId?this.pageHandlerModule.NavigateToRetailerSite(t.PriceId,e):this.pageHandlerModule.NavigateToRetailerSite(t.ImpressionToken,e)}},{key:"updatePCModule",value:(n=e(o().mark((function t(e,n){var i,a,r,s,l,c,u=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceComparisonData=new Mc(e.comparableOffers,e.price,e.extracted_entity,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination),!this.flyoutData.common.isPane||!this.flyoutData.dataStoreModule.PriceComparisonData.shouldBeInPolePosition){t.next=8;break}i=new CustomEvent(hn.ReRankFlyout),this.stateManagement.dispatchEvent(i),t.next=20;break;case 8:if(!(a=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=16;break}return t.next=12,this.renderModule();case 12:(r=t.sent)&&r.element?(a.remove(),this.flyoutData.common.isPane&&(r.element.expanded=!0),s=wt.PRICECOMPARISON,this.stateManagement.getState(pn.topModuleName)===Rt.PRICECOMPARISON&&(this.populateMainHeader(),s=0),un.queueUpdate((function(){u.utilities.styleModules(r,s,n)})),this.PostProcessing(r.name,s,r.element),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,r)):null===(l=a.parentElement)||void 0===l||l.remove(),t.next=20;break;case 16:return t.next=18,this.renderModule();case 18:(c=t.sent)&&c.element&&(this.PostProcessing(c.name,c.priority,c.element),this.stateManagement.getState(pn.modulesRendered)?this.appendPCUpdateElement(c):this.stateManagement.addEventListener(hn.ModulesRendered,(function(){u.appendPCUpdateElement(c)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,c));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0);case 25:case"end":return t.stop()}}),t,this,[[0,22]])}))),function(t,e){return n.apply(this,arguments)})},{key:"appendPCUpdateElement",value:function(t){var e=this;this.utilities.appendNewModuleToFlyout(t),(this.flyoutData.common.isPane||this.flyoutData.dataStoreModule.PriceComparisonData&&-1!==this.flyoutData.dataStoreModule.PriceComparisonData.lowestPrice&&this.flyoutData.common.openedWith!==Tt.Auto)&&(t.element.expanded=!0),un.queueUpdate((function(){e.utilities.sendCTRLog(t,t.priority,e.stateManagement.getState(pn.isAutoApplyVisible),e.stateManagement.getState(pn.topModuleName),dn.EdgeImpressionId);var n=new CustomEvent(hn.ModulesRendered);e.stateManagement.dispatchEvent(n)}))}},{key:"createNewPriceComparisonTile",value:function(t,e,n,i,o,a,r,s,l){var c=this.utilities.createElement("msft-product-card");0===r&&this.flyoutData.common.isPane&&(this.firstCard=c),this.flyoutData.common.isPane?c.isPane=!0:c.isPane=!1;var u=e.IntendedPrice;if(u){var d=this.utilities.formatPrice(u);c.price=e.CurrencySymbol+d}if(s&&u){var h=s-u;if(h&&h>0&&this.isAboveThreshold(s,u)){var p=this.utilities.formatPrice(h);c.savings=this.utilities.replaceValueInKey("pcVisitedBtn",this.flyoutData.strings.commonSave,"".concat(e.CurrencySymbol).concat(p))}u===n&&(c.lowest=this.flyoutData.strings.pcLowestUpdated.toUpperCase())}c.retailer=e.SellerName,this.createPCLinkImages(c,e,!1,l),this.managePCLinkEvents(c,e),t.appendChild(c),r===i&&o&&a&&this.flyoutData.common.currentDevice===St.Desktop&&c&&c.focus()}},{key:"isAboveThreshold",value:function(t,e){var n=t-e;return n>0&&n>=Math.ceil(.05*t)}},{key:"disableNotificationHeader",value:function(){var t=this;un.queueUpdate((function(){var e=t.flyoutData.common.shopping;if(e.shadowRoot){var n=e.shadowRoot.querySelector(".header");n&&(n.style.display="none")}}))}},{key:"managePCLinkEvents",value:function(t,e){var n=this;t.addEventListener("click",(function(){n.navigateToRetailer(e)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToRetailer(e)}))}},{key:"createPCLinkImages",value:function(t,e,n,i){var o=this,a=document.createElement("IMG");this.utilities.addFavIconSrc(a,t,e.Domain),a.style.width="20px",a.style.height="20px",a.style.marginRight="8px",a.style.maxWidth="unset",a.style.verticalAlign="text-bottom",a.style.minWidth="0px",a.style.marginRight="calc(var(--design-unit) * 2px)";var r=this.utilities.createElement("IMG");e.ProductImageOriginalUrl&&""!==e.ProductImageOriginalUrl?""===this.flyoutData.common.urlPrefix&&this.utilities.addImageSrc(r,e.ProductImageOriginalUrl.replace("edge://image?","")):e.ProductImageUrl&&""!==e.ProductImageUrl?this.utilities.addImageSrc(r,e.ProductImageUrl):this.utilities.addImageSrc(r,this.commonAssets.getDefaultProductImage());var s=this.utilities.createProductImage(64,64,r);if(s.slot="image",r.addEventListener("error",(function(){o.utilities.addImageSrc(r,o.commonAssets.getDefaultProductImage())})),t.appendChild(s),""!==e.ImpressionToken&&this.visibilityRequest&&!n&&i!==e.ImpressionToken&&this.visibilityRequest.push(e.ImpressionToken),e.BillingType===Et.Paid){t.isAd=!0;var l=this.utilities.createElement("IMG");this.utilities.addImageSrc(l,this.flyoutData.common.resourcesEndpoint+"priceComparison/adSlug.png"),l.slot="adslug",l.style.marginLeft="8px",l.setAttribute("aria-label","Ad"),t.appendChild(l)}this.addPCAnnotations(t,e.Extensions)}},{key:"addPCAnnotations",value:function(t,e){if(e&&e.length>0){var n,i,o=zw(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.ExtensionText===kt.Used||a.ExtensionText===kt.New||a.ExtensionText===kt.Refurbished){var r=this.utilities.createElement("msft-attribution");r.textContent=a.ExtensionText,r.slot="start",t.appendChild(r)}else n||(n=a)}}catch(t){o.e(t)}finally{o.f()}if(n&&n.ExtensionText){var s=this.utilities.createElement("msft-attribution");s.textContent=n.ExtensionText,this.flyoutData.common.currentTheme===xt.Dark&&(s.style.color="#FFFFFF");var l=this.utilities.createElement("IMG"),c=!1;n.ExtensionText.toLowerCase().includes(kt.Shipping)&&(this.utilities.addImageSrc(l,this.flyoutData.common.resourcesEndpoint+"priceComparison/shippingAnnotation.svg"),c=!0),c&&(l.slot="image",s.appendChild(l)),s.slot="end",t.appendChild(s)}}}}]),a}(Bb),qw=jw;function Zw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function Xw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Jw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var Qw=function(t){u(n,t);var e=Jw(n);function n(t,i,o,a){var r;return s(this,n),f(l(r=e.call(this,t,i,o,a)),"bestOffer",void 0),f(l(r),"formattedSavings",void 0),r.flyoutData=i,r.utilities=o.viewModulesUtilities,r.logModule=o.logModule,r.pageHandlerModule=o.pageHandlerModule,r.stateManagement=t,r.assets=new Ww,r}return r(n,[{key:"PostProcessingNotification",value:function(t,e){if(this.bestOffer){var n=this.createNotificationFooter(e,this.bestOffer,this.formattedSavings);this.flyoutData.common.shopping.appendChild(n)}}},{key:"RenderNotification",value:function(){this.flyoutData.common.shopping.classList.add("noSections");var t=this.flyoutData.dataStoreModule.PriceComparisonData;if(t&&t.Price&&t.CompetingPrices&&t.CompetingPrices.length>0){var e,n=t.lowestPrice,i=Zw(t.CompetingPrices);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(n===o.IntendedPrice){this.bestOffer=o;break}}}catch(t){i.e(t)}finally{i.f()}n=t.Price;var a,r=Zw(t.CompetingPrices);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.ShouldOnTop){var l=s.IntendedPrice;l&&l<n&&(n=l,this.bestOffer=s)}}}catch(t){r.e(t)}finally{r.f()}var c=n;if(this.bestOffer&&c){var u=t.Price-c;if(u>0){var d,h=this.utilities.createElement("DIV",{style:"width: 100%;"});if(this.utilities.shouldRenderSmallNotification()){(d=this.utilities.createElement("msft-notification-header")).title=this.flyoutData.strings.commonSaveSimple;var p="$";if(this.bestOffer.CurrencySymbol&&(p=this.bestOffer.CurrencySymbol),d.savings="".concat(p).concat(this.utilities.formatPrice(u)),this.bestOffer.SellerName){d.retailer=this.bestOffer.SellerName;var f=this.utilities.createElement("IMG");if(f.slot="icon",this.utilities.addFavIconSrc(f,d,this.bestOffer.Domain),this.bestOffer.BillingType===Et.Paid){d.isAd=!0;var g=this.utilities.createAdsSlug();g.slot="adslug",d.appendChild(g)}}var m=this.utilities.createElement("IMG"),v=this.utilities.createProductImage(88,88,m,this.bestOffer.Description);v.style.position="relative";var y=this.bestOffer.ProductImageUrl.replace("w=66&h=66","");""===this.flyoutData.common.urlPrefix&&(y=y.replace("edge://image?","")),m.src=y;var C=this.utilities.createElement("DIV",{style:"position: absolute;\n                                    bottom: 4px;\n                                    left: 4px;\n                                    display: flex;\n                                    justify-content: center;\n                                    align-items: center;\n                                    background: rgba(255, 255, 255, 0.8);\n                                    backdrop-filter: blur(10px);\n                                    border-radius: 4px;\n                                    padding: 4px;\n                                    color: #000000"}),b=this.utilities.createElement("SPAN");b.textContent="".concat(this.bestOffer.CurrencySymbol).concat(this.utilities.formatPrice(this.bestOffer.Price)),C.appendChild(b),v.appendChild(C),v.slot="image",d.appendChild(v)}else{d=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: calc(100% - 164px) 120px; column-gap: 8px; justify-content: center; align-items: center;"}),this.formattedSavings=this.utilities.formatPrice(u);var x,E=this.createNotificationTextContent(this.formattedSavings,this.bestOffer,c,t.Price),T=this.utilities.createElement("IMG");x=this.utilities.createProductImage(120,120,T,this.bestOffer.Description);var D=this.bestOffer.ProductImageUrl.replace("w=66&h=66","");""===this.flyoutData.common.urlPrefix&&(D=D.replace("edge://image?","")),T.src=D,d.appendChild(E),d.appendChild(x)}h.appendChild(d),h.slot="header-content",""!==this.bestOffer.ImpressionToken&&this.visibilityRequest&&(this.stateManagement.setState(pn.pcLowestPriceImpression,this.bestOffer.ImpressionToken),this.visibilityRequest.push(this.bestOffer.ImpressionToken),this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest));var k=this.utilities.createNotificationModule(h,this.GetNotificationName(),this),I=new _(A.YouCanSave,t.CompetingPrices.length,parseFloat(u.toFixed(2)));return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price comparison Notificatoin - user can save money",I),Promise.resolve(k)}}}return Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData;return(null==e||null===(t=e.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS?Promise.resolve(!1):e&&e.shoudlRenderPriceComparisonNotification&&!this.flyoutData.common.seeInfoFromPCNotification?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.PRICECOMPARISON}},{key:"createNotificationFooter",value:function(t,e,n){var i,o=this;i=this.utilities.createElement("DIV",{style:"width: calc(100% - 32px); display: grid; grid-template-columns: 60% auto; grid-gap: 10px;"}),this.utilities.shouldRenderSmallNotification()?(i.style.gridTemplateColumns="100%",i.style.marginTop="12px",i.style.width="calc(100% - 36px)"):i.style.marginTop="22px",i.id="divNotificationActions",i.slot="actions";var a=this.utilities.createPrimaryButton();a.style.width="100%",a.style.marginTop="0px",a.textContent=this.flyoutData.strings.pcNotificationVisitItem;var r=this.flyoutData.common.currentDevice;if(a.addEventListener("click",(function(){r===St.Desktop&&o.navigateToRetailer(e,cl.NEW_FOREGROUND_TAB)})),i.appendChild(a),!this.utilities.shouldRenderSmallNotification()){var s=this.utilities.createElement("fluent-anchor",{style:"\n                width: 100%;\n                overflow: hidden;\n                overflow-wrap: break-word;\n                display: -webkit-box;\n                -webkit-line-clamp: 1;\n                -webkit-box-orient: vertical;"});s.setAttribute("appearance","lightweight"),s.href="#",s.style.placeSelf="center",s.title=this.flyoutData.strings.pcNotificationSeeMoreInfo,s.textContent=this.flyoutData.strings.pcNotificationSeeMoreInfo,s.addEventListener("click",(function(){o.handleSeeMoreInfoNotificationClick(t)})),i.appendChild(s)}return i}},{key:"handleSeeMoreInfoNotificationClick",value:function(t){var e=this,n=!1;if(this.flyoutData.common.isPaneEnabled&&(n=this.pageHandlerModule.OpenPane()),!n){t.remove();var i=this.flyoutData.common.shopping.querySelector("#divNotificationActions");i&&i.remove();var o=this.flyoutData.common.shopping.querySelector("#divDisclaimer");o&&o.remove();var a=document.querySelectorAll("msft-edge-shopping");if(a&&a.length>0){var r,s=Zw(a);try{for(s.s();!(r=s.n()).done;){r.value.remove()}}catch(t){s.e(t)}finally{s.f()}}this.flyoutData.common.seeInfoFromPCNotification=!0,un.queueUpdate((function(){e.utilities.trapFlyoutFocusMac();var t=document.querySelector("#divContentWrapper"),n=new CustomEvent(hn.CreateModules,{detail:{flyoutWrapper:t}});e.stateManagement.dispatchEvent(n)}))}}},{key:"createNotificationTextContent",value:function(t,e,n,i){var o=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; grid-gap: 14px;"}),a=this.utilities.createElement("H2",{style:"text-align: left; font-weight: 600;"});a.style.fontSize="26px",a.style.lineHeight="36px";var r=this.utilities.createElement("SPAN",{style:"display: inline-block; font-weight: 600; font-size: 26px; line-height: 36px; color: var(--text-price-savings-color)"});this.utilities.shouldRenderSmallNotification()&&(r.style.fontSize="32px",r.style.lineHeight="40px"),r.textContent="".concat(e.CurrencySymbol).concat(t),this.utilities.replaceElementInKey(a,this.flyoutData.strings.pcNotificationTitleRefresh,r),a.className="txtLarge",o.appendChild(a);var s,l,c=this.utilities.createElement("P",{style:"text-align: left; overflow: hidden; overflow-wrap: break-word; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;"});if(c.className="txtMedium",c.textContent=e.Description,c.title=e.Description,o.appendChild(c),s=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column;"}),e.SellerName){var u;u=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: auto auto 1fr; align-items: center;"});var d=this.utilities.createElement("P",{style:"margin-left: 6px; display: -webkit-box;\n                        text-align: initial;\n                        -webkit-line-clamp: 1;\n                        -webkit-box-orient: vertical;\n                        overflow: hidden;"});d.textContent=e.SellerName,d.className="txtSmall",d.title=e.SellerName;var h=this.utilities.createElement("IMG");if(this.utilities.addFavIconSrc(h,u,e.Domain),u.appendChild(d),e.BillingType===Et.Paid){var p=this.utilities.createAdsSlug();u.appendChild(p)}s.appendChild(u)}l=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row;"});var f=this.utilities.createElement("P"),g=this.utilities.formatPrice(n);f.textContent="".concat(e.CurrencySymbol).concat(g),f.className="txtLarge",f.style.fontWeight="500",f.setAttribute("aria-label",this.utilities.replaceValueInKey("pcLowestPriceAria",this.flyoutData.strings.pcLowestPriceAria,"".concat(e.CurrencySymbol).concat(g),e.SellerName)),l.appendChild(f);var m=this.utilities.formatPrice(i),v=this.utilities.createElement("P",{style:"align-self: flex-end; margin-left: 9px;"});return v.className="txtMedium",v.textContent="".concat(e.CurrencySymbol).concat(m),v.setAttribute("aria-label",this.utilities.replaceValueInKey("pcCurrentPriceAria",this.flyoutData.strings.pcCurrentPriceAria,"".concat(e.CurrencySymbol).concat(m))),v.style.textDecoration="line-through",l.appendChild(v),s.appendChild(l),o.appendChild(s),o}}]),n}(qw),tP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"#divPriceHistory .x.axis line {\n            stroke: none;\n        }\n        #divPriceHistory .x.axis path {\n            stroke: #EDEBE9;\n        }\n        #divPriceHistory .x.axis text {\n            fill: #767676;\n            font-size: 13px;\n            font-weight: 700;\n            margin-top: 5px;\n        }\n        #divPriceHistory text.x.axis {\n            fill: #767676;\n            font-size: 13px;\n            font-weight: 700;\n            margin-top: 5px;\n        }\n        #divPriceHistory tspan.currPriceDrop {\n            font-size: 15px;\n            line-height: 20px;\n            fill: #22865E;\n            font-weight: 700;\n            letter-spacing: 0.02em;\n        }\n\n        #divPriceHistory tspan.textBig {\n            font-size: 24px !important;\n            line-height: 44px !important;\n            font-weight: 400 !important;\n        }\n        #divPriceHistory tspan.textWhite {\n            fill: #FFFFFF!important;\n        }\n        #divPriceHistory tspan.textBold {\n            font-weight: 500;\n            fill: #000000!important;\n        }\n        #divPriceHistory tspan.currPriceIncrease {\n            font-size: 15px;\n            line-height: 20px;\n            fill: #D54034;\n            font-weight: 700;\n            letter-spacing: 0.02em;\n        }\n        #divPriceHistory tspan.currFairPrice {\n            font-size: 15px;\n            line-height: 20px;\n            fill: #166FF5;\n            font-weight: 700;\n            letter-spacing: 0.02em;\n        }\n        #divPriceHistory tspan.price {\n            font-size: 1em;\n            line-height: 16px;\n            fill: #000000;\n            font-weight: 600;\n        }\n        #divPriceHistory tspan.label {\n            font-size: 1.1em;\n            line-height: 16px;\n            fill: #727575;\n            font-weight: 700;\n        }\n        #divPriceHistory tspan.desc {\n            font-size: 0.9em;\n            line-height: 16px;\n            font-weight: 400;\n            fill: #0000008D;\n        }\n        #divPriceHistory tspan.median {\n            fill: #727575;\n        }\n        #btnPHInfo {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .gotItBtn:focus-visible {\n            outline: 3px solid #878787;\n        }\n        .illustrationPercentageText {\n            background-clip: text;\n            -webkit-background-clip: text;\n        }\n        @media (forced-colors: active) {\n            #divPriceHistory .ph_head {\n                color: windowText;\n            }\n            #divPriceHistory tspan.currPriceDrop {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.currPriceIncrease {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.currFairPrice {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.price {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.label {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.desc {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.median {\n                fill: windowText;\n            }\n        }"}},{key:"getDarkModeStyles",value:function(){return"\n        #divPriceHistory tspan.currPriceDrop {\n            fill: #4BDBA2;\n        }\n        #divPriceHistory tspan.currPriceIncrease {\n            fill: #FFCBC7;\n        }\n        #divPriceHistory tspan.currFairPrice {\n            fill: #86E5F3;\n        }\n        #divPriceHistory tspan.price {\n            fill: #FFFFFF;\n        }\n        #divPriceHistory tspan.label {\n            fill: #FFFFFF;\n        }\n        #divPriceHistory tspan.desc {\n            fill: #FFFFFF;\n        }\n        #divPriceHistory tspan.median {\n            fill: #FFFFFF;\n        }\n        #divPriceHistory tspan.textBold {\n            fill: #FFFFFF!important;\n        }\n        .gotItBtn:focus-visible {\n            outline: 3px solid #FFFFFF;\n        }\n        "}},{key:"getPriceHistoryInlineRatingStyles",value:function(){return"\n            .ph_info > div { margin-bottom: 8px !important;}\n            .ph_info > div > div { margin-bottom: 0 !important; }\n            .ph_title {\n                font-size: 16px;\n                font-weight: 600;\n                line-height: normal;\n                margin-top: 4px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }"}}]),t}();function eP(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nP(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function nP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function iP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var oP="#008847",aP="#DF352C",rP="#166FF5",sP="#4BDBA2",lP="#FFA39C",cP="#34D3EB",uP=function(t){u(a,t);var n,i=iP(a);function a(t,e,n,o){var r;return s(this,a),f(l(r=i.call(this)),"assets",void 0),f(l(r),"stateManagement",void 0),f(l(r),"flyoutData",void 0),f(l(r),"refreshCount",0),f(l(r),"utilities",void 0),f(l(r),"logModule",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"todayString",void 0),f(l(r),"lowString",void 0),f(l(r),"highString",void 0),f(l(r),"wasPriceHistorySectionExpanded",void 0),f(l(r),"graphWidth",void 0),f(l(r),"maxRefresh",100),f(l(r),"sectionId","divPriceHistorySection"),f(l(r),"loadingUXId","divPHLoadingStateContainer"),f(l(r),"commonAssets",void 0),f(l(r),"priceHistoryTitle",void 0),r.logModule=n.logModule,r.stateManagement=t,r.pageHandlerModule=n.pageHandlerModule,r.flyoutData=e,r.todayString=r.flyoutData.strings.phToday,r.lowString=r.flyoutData.strings.phLow,r.highString=r.flyoutData.strings.phHigh,r.utilities=n.viewModulesUtilities,r.wasPriceHistorySectionExpanded=!1,r.assets=new tP,r.commonAssets=o,r}return r(a,[{key:"GetModuleName",value:function(){return Rt.PRICEHISTORY}},{key:"CalculateRanking",value:function(){var t=this.flyoutData.dataStoreModule.PriceHistoryData;if(t){var e=t.getPriceHistoryType();if(e===Xs.PRICEDROP)return Ct.SaveMoneyPage;if(e===Xs.FAIRPRICE)return Ct.InformPage;if(e===Xs.PRICEINCREASE)return Ct.InformPage}return Ct.Unknown}},{key:"ShouldRenderModule",value:function(){var t,e,n,i,o,a=this,r=this.flyoutData.dataStoreModule.PriceComparisonData,s=null!==(e=(null==r||null===(t=r.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS&&(null==r?void 0:r.CompetingPrices)&&(null==r?void 0:r.CompetingPrices.length)>0)&&void 0!==e&&e,l=this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PERSONALIZED_CASHBACK&&this.flyoutData.common.openedWith===Tt.Auto;if(s||l)return Promise.resolve(!1);var c=this.flyoutData.dataStoreModule.PriceHistoryData,u=null!==(n=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.isCheckoutPageWithAutoApply)&&void 0!==n&&n,d=null==c?void 0:c.DailyPrices,h=null!==(o=c&&d&&d.length>=2&&(!u||"amazon.com"===this.flyoutData.common.domain))&&void 0!==o&&o,p=!1;try{p="4"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("bing_shopping_campaign_guid")}catch(t){}var f="false";this.flyoutData.common.isPane&&(f=ze("isPDP"));var g=(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_BING_CAMPAIGN&&p||"true"===f)&&!h;return this.stateManagement.addEventListener(hn.ModulesRendered,this.updatePriceGraph.bind(this)),this.stateManagement.addEventListener(hn.onFlyoutResize,this.updatePriceGraph.bind(this)),this.stateManagement.addEventListener(hn.CreatePHHeader,(function(t){if(t&&t.detail&&t.detail.section&&c){var e=t.detail.section;c.ShowPriceHistoryInsight?a.renderPriceHistoryUXWithInsight(e,c):a.renderPriceHistoryUXWithoutInsight(e,c)}})),this.stateManagement.addEventListener(hn.PDPUpdate,(function(t){var e=new CustomEvent(hn.PDPRemoved,{detail:{moduleName:a.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.priceHistory&&t.detail.data.priceHistory.priceHistoryData&&(!a.flyoutData.dataStoreModule.PriceHistoryData||t.detail.data.priceHistory.triggerInsight===Js.ShowInsight)){var n=t.detail.data;n?(a.refreshCount=0,a.updatePHModule(n,t.detail.wrapper)):a.stateManagement.dispatchEvent(e)}else a.flyoutData.dataStoreModule.PriceHistoryData||a.stateManagement.dispatchEvent(e)})),g?Promise.resolve(g):Promise.resolve(h)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.PriceHistoryData;if(!t){var e=document.createElement("msft-edge-shopping-section");e.id=this.sectionId,e.title=this.flyoutData.strings.phSectionTitle,this.utilities.createPDPLoadingStateUX(e,this.loadingUXId,this.sectionId,this.stateManagement);var n=this.CreateModule(e,wt.MAX,Rt.PRICEHISTORY,_t.CONTEXTUAL,Ft.BLOCK);return Promise.resolve(n)}if(t.DailyPrices&&t.DailyPrices.length>=2){var i;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());var o=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));o&&o.remove(),(i=document.createElement("msft-edge-shopping-section")).id=this.sectionId,i.accordion=!0,i.expanded=!1,i.title=this.flyoutData.strings.phSectionTitle,this.populatePriceList(t,i);var a=this.pageHandlerModule,r=this.wasPriceHistorySectionExpanded;if(i.addEventListener("click",(function t(){if(r&&(a.RecordAsUserAction(is.HIDE_PRICE_HISTORY),i&&i.removeEventListener("click",t)),r=!0,i){var e=i.shadowRoot;if(e){var n=e.querySelector("fluent-accordion-item");n&&(n.classList.contains("expanded")||a.RecordAsUserAction(is.VIEW_PRICE_HISTORY))}}})),i.children&&i.children.length>0){var s=this.CreateModule(i,wt.PRICEHISTORY,Rt.PRICEHISTORY,_t.CONTEXTUAL,Ft.BLOCK);return Promise.resolve(s)}}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e=this,n=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));if(n&&(n.style.marginTop="0px",n.style.textAlign="start",n.style.marginLeft="auto",n.style.width="100%",n.slot="header-content",this.priceHistoryTitle&&(this.priceHistoryTitle.style.display="block"),null!==(t=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==t&&t.canCreateInlineRating)){var i=n.querySelector(".ph_info"),o=new CustomEvent(hn.CreateInlineRating,{detail:{callback:function(t){if(i&&t){var o;e.utilities.applyStyles(n,e.assets.getPriceHistoryInlineRatingStyles());var a=e.flyoutData.dataStoreModule.PriceHistoryData,r=i.querySelector(".ph_head"),s=i.querySelector(".ph_ill"),l=null==a||null===(o=a.ProductDetails)||void 0===o?void 0:o.title;if(r&&s&&l){r.remove();var c=e.utilities.createElement("div",{className:"ph_title"},l);s.insertAdjacentElement("afterend",t),s.insertAdjacentElement("afterend",c)}else i.appendChild(t)}},moduleName:Rt.PRICEHISTORY}});this.stateManagement.dispatchEvent(o)}}},{key:"PostProcessing",value:function(t,e,n){var i=0===e,o=this.flyoutData.dataStoreModule.PriceHistoryData,a=!1;try{a="4"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("auto_show_edge_shopping_flyout")}catch(t){var r=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Invalid lastCommittedURL",r)}if(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===Tt.Auto&&!a&&o&&o.TriggerPriceHistoryAlert&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PRICE_HISTORY)if(i){var s=new _(A.FlyoutAutoPriceHistoryTrigger);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",s)}else{var l=this.stateManagement.getState(pn.topModuleName),c=new _(A.ErrorWrongAutoTrigger);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price History - Wrong module in pole position ".concat(l),c)}}},{key:"getPriceDifference",value:function(t,e){var n,i=null===(n=this.getStrikeoutPricePoint(t,e))||void 0===n?void 0:n.minPrice,o=t.CurrentPrice;return i?Math.abs(o-i):void 0}},{key:"createPriceHistoryTypeIllustration",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.utilities.createElement("DIV",{className:"ph_ill",style:n?"":"margin: 10px 0;"}),o=this.utilities.createElement("IMG",{style:"display: flex; place-self: center;"});o.setAttribute("aria-hidden","true"),t===Xs.PRICEDROP?o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":t===Xs.PRICEINCREASE?o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg";var a=this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"rgba(0, 0, 0, 0.83)",r=this.utilities.createElement("span",{style:"\n                    font-size: 36px;\n                    color: transparent;\n                    line-height: 32px;\n                    font-weight: 400;\n                    display: flex;\n                    flex-direction: row;\n                    column-gap: 8px;\n                    background-image: ".concat(this.flyoutData.common.currentTheme===xt.Dark?"linear-gradient(267.26deg, #3C9CF4 18.23%, #5EC4FE 100%)":"linear-gradient(267.26deg, #166FF5 0%, #166FF5 100%)",";\n                    background-clip: text;\n                    -webkit-background-clip: text;\n                    ").concat("","\n                ")});r.className="illustrationPercentageText";var s=this.utilities.createElement("div",{style:"\n                    font-size: 20px;\n                    line-height: 34px;\n                    color: ".concat(a,";\n                    text-align: left;\n                ")});if(this.utilities.shouldRenderSmallNotification()&&(s.style.fontSize="12px",s.style.lineHeight="16px"),t===Xs.PRICEDROP||t===Xs.PRICEINCREASE)un.queueUpdate((function(){return e.addPricePercentage(t,r,s,i,o)}));else{i.style.fontSize="20px",i.style.lineHeight="34px",i.style.fontWeight="600",i.style.color=a,r.textContent=this.flyoutData.strings.phStableLabel,o.style.marginTop="5px";var l=this.utilities.createElement("DIV");l.appendChild(r),r.appendChild(o),this.utilities.replaceElementInKey(i,this.flyoutData.strings.phPriceStableRefresh,l)}return i}},{key:"renderPriceHistoryGraph",value:function(t){var e=this.utilities.createElement("DIV",{style:"display: none;"});e.id="priceDropNotifChart";var n=this.utilities.createElement("DIV",{style:"margin-top: 26px;"});n.id="divPriceHistory",this.utilities.shouldRenderSmallNotification()&&(n.style.marginTop="4px"),e.appendChild(n);var i=document.getElementById("priceDropNotifChart")?document.getElementById("priceDropNotifChart"):e;if(i&&(this.flyoutData.common.isPane||(i.style.paddingLeft="12px",i.style.paddingRight="12px"),i.style.display="block"),"zh-cn"===this.flyoutData.common.afdMarket){var o=t.querySelector("#divIntDisclaimer");o?t.insertBefore(e,o):t.appendChild(e)}else t.appendChild(e)}},{key:"updatePHModule",value:(n=e(o().mark((function t(e,n){var i,a,r,s,l,c,u=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceHistoryData=new dl(e.priceHistory,e.price,e.base64ProductImage,this.flyoutData.common.domain,this.flyoutData.experimentData),!(this.flyoutData.common.isPane&&this.flyoutData.dataStoreModule.PriceHistoryData.getPriceHistoryType()===Xs.PRICEDROP||this.flyoutData.dataStoreModule.PriceHistoryData.getPriceHistoryType()===Xs.PRICEINCREASE)){t.next=7;break}i=new CustomEvent(hn.ReRankFlyout,{detail:{moduleName:Rt.PRICEHISTORY}}),this.stateManagement.dispatchEvent(i),t.next=19;break;case 7:if(!(a=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=15;break}return t.next=11,this.renderModule();case 11:(r=t.sent)&&r.element?(a.remove(),this.flyoutData.common.isPane&&(r.element.expanded=!0),s=wt.PRICEHISTORY,this.stateManagement.getState(pn.topModuleName)===Rt.PRICEHISTORY&&(this.populateMainHeader(),s=0),un.queueUpdate((function(){u.utilities.styleModules(r,s,n)})),this.PostProcessing(r.name,s,r.element),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,r),this.refreshCount=0,this.updatePriceGraph()):null===(l=a.parentElement)||void 0===l||l.remove(),t.next=19;break;case 15:return t.next=17,this.renderModule();case 17:(c=t.sent)&&c.element&&(this.stateManagement.getState(pn.modulesRendered)?(this.appendPHUpdateElement(c),this.PostProcessing(c.name,c.priority,c.element)):this.stateManagement.addEventListener(hn.ModulesRendered,(function(){u.appendPHUpdateElement(c),u.PostProcessing(c.name,c.priority,c.element)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,c),this.refreshCount=0,this.updatePriceGraph());case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0);case 24:case"end":return t.stop()}}),t,this,[[0,21]])}))),function(t,e){return n.apply(this,arguments)})},{key:"appendPHUpdateElement",value:function(t){var e,n=this;this.utilities.appendNewModuleToFlyout(t);var i=null===(e=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===e?void 0:e.getPriceHistoryType();this.flyoutData.common.isPane?t.element.expanded=!0:i!==Xs.PRICEDROP&&i!==Xs.PRICEINCREASE||this.flyoutData.common.openedWith===Tt.Auto||(t.element.expanded=!0),un.queueUpdate((function(){n.utilities.sendCTRLog(t,t.priority,n.stateManagement.getState(pn.isAutoApplyVisible),n.stateManagement.getState(pn.topModuleName),dn.EdgeImpressionId),n.refreshCount=0;var e=new CustomEvent(hn.ModulesRendered);n.stateManagement.dispatchEvent(e)}))}},{key:"addPricePercentage",value:function(t,e,n,i,o){if(t===Xs.PRICEDROP){var a,r,s=null===(a=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===a?void 0:a.DailyPriceDropPercentage,l=!1;null!=s&&(r=this.utilities.toFixedSafe(Math.abs(s),0),l=!0),e.textContent=r+"% ",e.style.backgroundImage=this.flyoutData.common.currentTheme===xt.Dark?"linear-gradient(267.48deg, #43E498 31.68%, #32DDE8 97.64%)":"linear-gradient(267.48deg, #008847 31.68%, #02838B 97.64%)",n.textContent=this.flyoutData.strings.phPriceDrop.toLowerCase(),n.style.marginLeft="5px",l&&(e.appendChild(o),i.appendChild(e)),i.appendChild(n)}else if(t===Xs.PRICEINCREASE){var c,u,d=null===(c=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===c?void 0:c.DailyPriceDropPercentage,h=!1;null!=d&&(u=this.utilities.toFixedSafe(Math.abs(d),0),h=!0),e.textContent=u+"% ",e.style.backgroundImage=this.flyoutData.common.currentTheme===xt.Dark?"linear-gradient(267.48deg, #EE2757 -7.9%, #FF762B 97.64%)":"linear-gradient(267.48deg, #C7274D -7.9%, #D04A00 97.64%)",n.textContent=this.flyoutData.strings.phPriceIncrease.toLowerCase(),h&&(e.appendChild(o),i.appendChild(e)),i.appendChild(n)}}},{key:"getGraphAriaLabel",value:function(t,e,n,i){if(!i)return"";if(!t||n===Xs.FAIRPRICE)return this.utilities.replaceValueInKey("phGraphLabel",this.flyoutData.strings.phGraphLabel,"".concat(i).concat(e.minPrice));if(t&&i){var o="",a="";switch(n){case Xs.PRICEDROP:o=this.highString,a="decreased";break;case Xs.PRICEINCREASE:o=this.lowString,a="increased"}return"The ".concat(o," price was ").concat(i).concat(t.minPrice," on ").concat(PD("%B %d")(t.dtg),", and today it has ").concat(a," to ").concat(i).concat(e.minPrice)}return""}},{key:"drawPriceHistoryChart",value:function(t,e,n,i){var o=this,a=t.DailyPrices;if(a.length<2)return null;var r=this.isLastPriceDateToday(t),s=50,l=50,c=150,u=c;this.utilities.shouldRenderSmallNotification()&&(c=100,u=110);var d=function(){return wA.apply(Zk(AD,TD,nD,tD,KT,$T,GT,UT,HT,PD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().range([0,i]),h=AT().range([100,0]);d.domain(function(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}(a,(function(t){return t.dtg}))),h.domain([Jb(a,(function(t){return t.minPrice/1.2})),Xb(a,(function(t){return 1.2*t.minPrice}))]);var p=a[0],f=a[a.length-1],g=this.getCriticalPoints(a),m=g.length>0?this.getMinCriticalPoint(g,f):null,v=g.length>0?this.getMaxCriticalPoint(g,a[a.length-1],m&&m.minPrice?m.minPrice:Number.NEGATIVE_INFINITY,d):null,y=this.getLowPoint(p,f,m),C=this.getHighPoint(p,f,v),b=t.MedianPrice,S={x:f.dtg,y:f.minPrice,text:this.todayString},x=y?{text:this.lowString,x:y.dtg,y:y.minPrice}:null,E=C?{text:this.highString,x:C.dtg,y:C.minPrice}:null,T=[].concat(yn(x?[x]:[]),yn(E?[E]:[]),[S]),D=this.getStrikeoutPricePoint(t,e),k=this.getGraphAriaLabel(D,f,e,n),I=uI().x((function(t){return d(t.dtg)})).y((function(t){return h(t.minPrice)})).curve(yI),w=document.createElementNS("http://www.w3.org/2000/svg","svg"),P=0,O=l+15,R=Xk(w).attr("aria-label",k).attr("width",i).attr("height",u).attr("tabindex","0").attr("viewBox","0 0 ".concat(i+l+s," ").concat(c)).on("mouseenter",(function(){return P=Date.now()})).on("mouseleave",(function(t){o.sendPriceHistoryDwellTimeTelemery(P,A.PriceHistoryDwellTimeHover,"hover time over graph")})).append("g").attr("transform","translate(".concat(O,", ",10,")")),M=R.append("defs"),N=R.append("g").style("opacity",1).style("transition-duration","0.4s").style("transition-property","opacity");this.setUpMedianLine(b,N,d,h,i,n,E,x);var L=M.append("linearGradient").attr("x1","319.56").attr("y1","38.583").attr("x2","-4.00001").attr("y2","38.583").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient");L.append("stop").attr("stop-color",this.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#000000"),L.append("stop").attr("offset","0.979167").attr("stop-color",this.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#000000"),L.append("stop").attr("stop-color",this.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#000000"),M.append("linearGradient").attr("x1","1.67776e-07").attr("y1","22").attr("x2","112.278").attr("y2","-6.73097").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient-today-drop").append("stop").attr("offset","1").attr("stop-color","#810BE3"),R.append("path").data([a]).attr("d",I).style("fill","none").style("stroke","url(#linear-gradient)").style("stroke-width",2),N.append("line").attr("x1",d(S.x)).attr("y1",h(S.y)).attr("x2",d(S.x)).attr("y2",-25).style("stroke-width",1).style("stroke",(function(){if(r)switch(e){case Xs.PRICEDROP:return o.flyoutData.common.currentTheme===xt.Dark?sP:oP;case Xs.PRICEINCREASE:return o.flyoutData.common.currentTheme===xt.Dark?lP:aP;case Xs.FAIRPRICE:return o.flyoutData.common.currentTheme===xt.Dark?cP:rP}return o.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),x&&N.append("line").attr("x1",d(x.x)).attr("y1",h(x.y)).attr("x2",d(x.x)).attr("y2",c).style("stroke-width",1).style("stroke",(function(){return o.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),E&&N.append("line").attr("x1",d(E.x)).attr("y1",h(E.y)).attr("x2",d(E.x)).attr("y2",-25).style("stroke-width",1).style("stroke",(function(){return o.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),N.selectAll(".dot").data(T).enter().append("circle").style("fill","var(--fill-color)").attr("cx",(function(t){return d(t.x)})).attr("cy",(function(t){return h(t.y)})).attr("r",(function(t){return t.text===o.todayString?12:8})),N.selectAll(".dot").data(T).enter().append("circle").attr("tabindex","0").attr("aria-label",(function(t){return t.text===o.todayString&&f&&f.minPrice?o.utilities.replaceValueInKey("todayLabel",o.flyoutData.strings.phTodayPriceAriaLabel,f.minPrice.toString()):t.text===o.lowString&&y&&y.minPrice&&y.dtg?o.utilities.replaceValueInKey("lowLabel",o.flyoutData.strings.phLowPriceArialLabel,y.minPrice.toString(),y.dtg.toString()):t.text===o.highString&&C&&C.minPrice&&C.dtg?o.utilities.replaceValueInKey("highLabel",o.flyoutData.strings.phHighPriceAriaLabel,C.minPrice.toString(),C.dtg.toString()):""})).style("fill",(function(t){if(t.text!==o.todayString)return o.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#000000";switch(e){case Xs.PRICEDROP:return o.flyoutData.common.currentTheme===xt.Dark?sP:oP;case Xs.PRICEINCREASE:return o.flyoutData.common.currentTheme===xt.Dark?lP:aP;case Xs.FAIRPRICE:return o.flyoutData.common.currentTheme===xt.Dark?cP:rP}})).attr("cx",(function(t){return d(t.x)})).attr("cy",(function(t){return h(t.y)})).attr("r",(function(t){return t.text===o.todayString?8:4})),r&&N.selectAll(".node").data(T).enter().append("g").attr("transform",(function(t){return t.text===o.lowString?"translate(-10,-50)":"translate(-10,-25)"})).append("rect").attr("height",(function(t){return t.text===o.todayString?"30px":"0px"})).attr("width","0px").attr("fill",(function(t){if(t.text===o.todayString)switch(e){case Xs.PRICEDROP:return o.flyoutData.common.currentTheme===xt.Dark?"#008847":"#028948";case Xs.PRICEINCREASE:return o.flyoutData.common.currentTheme===xt.Dark?"#C7274D":"#C82B45";case Xs.FAIRPRICE:return o.flyoutData.common.currentTheme===xt.Dark?"#165AC2":"#166FF5"}})).attr("x",(function(t){return t.text,o.todayString,d(t.x)})).attr("y",-9).attr("id",(function(t){if(t.text===o.todayString)return"todayTextRect"})).attr("rx",4);var _=N.selectAll(".node").data(T).enter().append("g").attr("transform",(function(t){if(t.text===o.todayString&&r)return"translate(-25, -25)";var e=-10;return o.willCutOut(60,d(t.x))&&(e=60),o.utilities.shouldRenderSmallNotification()?"translate(".concat(e,",-25)"):t.text===o.lowString?"translate(".concat(e,",-50)"):"translate(".concat(e,",-25)")}));_.append("polygon").attr("points",(function(t){if(t.text===o.todayString&&r)switch(e){case Xs.PRICEDROP:return"183,4 188,10 193,4";case Xs.PRICEINCREASE:return"183,10 188,4 193,10";case Xs.FAIRPRICE:return"183,4 183,10 190,7"}})).attr("style","fill: white;stroke: white;stroke-width:1").attr("id",(function(t){if(t.text===o.todayString&&r)return"todayPriceTriangleIcon"}));var F=_.append("text").attr("text-anchor","end").attr("x",(function(t){return t.text,o.todayString,d(t.x)})).attr("y",(function(t){return t.text===o.lowString?c:0})).attr("id",(function(t){if(t.text===o.todayString)return"todayText"}));return F.append("tspan").text((function(t){return t.text===o.todayString&&r?"".concat(n).concat(o.utilities.toFixedSafe(Number(t.y),2)," ").concat(t.text.toUpperCase()):"".concat(n).concat(o.utilities.toFixedSafe(Number(t.y),2))})).attr("class",(function(t){if(t.text!==o.todayString||!r)return"price textBold";switch(e){case Xs.PRICEDROP:return"currPriceDrop textWhite";case Xs.PRICEINCREASE:return"currPriceIncrease textWhite";case Xs.FAIRPRICE:return"currFairPrice textWhite"}})).attr("dx",(function(){return"0.4em"})).attr("dy","0.8em"),this.utilities.shouldRenderSmallNotification()||F.append("tspan").text((function(t){return t.text===o.todayString?"":t.text.charAt(0).toUpperCase()+t.text.slice(1)})).attr("x",(function(t){return d(t.x)})).attr("dx","0.4em").attr("dy","1.1em").attr("class","desc"),F.append("tspan").text((function(t){return t.text===o.todayString&&r?"":PD("%b %d")(t.x)})).attr("x",(function(t){return d(t.x)})).attr("dx","0.4em").attr("dy","1.1em").attr("class","desc"),this.setUpInteractiveHover(a,O,w,R,i,c,d,h,n,N),w}},{key:"willCutOut",value:function(t,e){return t-e>40}},{key:"setUpMedianLine",value:function(t,e,n,i,o,a,r,s){var l,c=null!==(l=this.flyoutData.common.currentTheme===xt.Dark)&&void 0!==l&&l;t&&e.append("line").attr("x1",n(0)).attr("y1",i(t)).attr("x2",o+30).attr("y2",i(t)).style("stroke-width",1).style("stroke",c?"#FFFFFF":"#CCCCCC").style("stroke-dasharray","2, 7").style("fill","none").attr("pointer-events","none")}},{key:"setUpInteractiveHover",value:function(t,e,n,i,o,a,r,s,l,c){var u=this,d=i.append("g").style("opacity",0).style("transition-duration","0.4s").style("transition-property","opacity");d.selectAll(".dot").data(t).enter().append("circle").style("fill",this.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#767676").attr("cx",(function(t){return r(t.dtg)})).attr("cy",(function(t){return s(t.minPrice)})).attr("r",4);var h=d.append("g").attr("transform","translate(-10,-25)").append("text").attr("aria-hidden","true").attr("text-anchor","end").style("fill",this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#444444"),p=h.append("tspan").attr("class","price").attr("dx","0.4em").attr("dy","0.8em"),f=h.append("tspan").attr("class","desc").attr("dx","0.4em").attr("dy","1.1em"),g=d.append("line").attr("y1",-25).attr("y2",a).style("stroke-width",1).style("stroke",(function(){return u.flyoutData.common.currentTheme===xt.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),m=d.append("circle").attr("class","hover-price").style("fill",this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#363636").style("stroke",this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#363636").attr("r",4);i.append("rect").attr("width",o).attr("height",a).style("fill","none").style("pointer-events","all").on("mouseout",(function(){u.hideHoveredGroup(d,c)})).on("mousemove",(function(i){var o,a,v=n.createSVGPoint();v.x=i.clientX,v.y=i.clientY;var y=v.matrixTransform(n.getScreenCTM().inverse()).x-e,C=null===(o=p.node())||void 0===o||null===(a=o.getBoundingClientRect())||void 0===a?void 0:a.width,b=y;u.willCutOut(C,y)&&(b=y+C+20);var S=u.getClosestDataPointToTheHoverLine(t,r,y);null!==S?(u.showHoveredGroup(d,c),m.attr("transform","translate(".concat(r(S.dtg),", ").concat(s(S.minPrice),")")),p.attr("x",b),f.attr("x",b),h.attr("x",b).attr("y",0),p.text("".concat(l).concat(u.utilities.toFixedSafe(S.minPrice,2))),f.text("".concat(PD("%b %d")(S.dtg))),g.attr("x1",y).attr("x2",y)):u.hideHoveredGroup(d,c)}))}},{key:"getClosestDataPointToTheHoverLine",value:function(t,e,n){for(var i=e.invert(n),o=qb((function(t){return t.dtg})).left(t,i),a=[t[o-1],t[o]],r=Number.MAX_VALUE,s=null,l=0,c=a;l<c.length;l++){var u=c[l];if(void 0!==u){var d=e(u.dtg),h=Math.abs(d-n);r>h&&(r=h,s=u)}}return s}},{key:"sendPriceHistoryDwellTimeTelemery",value:function(t,e,n){var i=Date.now()-t,o=new _(e);if(this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price history - ".concat(n," - ").concat(i," ms"),o),i>=1e3)try{this.pageHandlerModule.RecordAsUserEngagement(rl.VIEW_PRICE_HISTORY)}catch(t){var a=new _(A.ErrorToRecordEngagement);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,t,a)}}},{key:"hideHoveredGroup",value:function(t,e){t.style("opacity",0),e.style("opacity",1)}},{key:"showHoveredGroup",value:function(t,e){t.style("opacity",1),e.style("opacity",0)}},{key:"GetHeaderContent",value:function(t,e){return e&&""!==e?e:t===Xs.PRICEDROP?this.flyoutData.strings.phTitlePriceDropped:t===Xs.PRICEINCREASE?this.flyoutData.strings.phTitlePriceIncrease:this.flyoutData.strings.phTitleStable}},{key:"isLastPriceDateToday",value:function(t){if(t.DailyPrices.length>0){var e=new Date,n=t.DailyPrices[t.DailyPrices.length-1].dtg;return 0===t.getDaysDifference(e,n)}return!1}},{key:"populatePriceList",value:function(t,e){var n=this;if(t.ShowPriceHistoryInsight?this.renderPriceHistoryUXWithInsight(e,t):this.renderPriceHistoryUXWithoutInsight(e,t),"zh-cn"===this.flyoutData.common.afdMarket){var i=this.utilities.createElement("DIV",{style:"margin: 16px; text-align: center;"});i.id="divIntDisclaimer";var o=this.utilities.createElement("SPAN");o.className="txtSmall",o.style.fontSize="12px",o.style.lineHeight="14px",o.style.color=this.flyoutData.common.currentTheme===xt.Light?"#717171":"#FFFFFF",o.style.opacity=this.flyoutData.common.currentTheme===xt.Light?"1.0":"0.83",o.textContent=this.flyoutData.strings.commonInternationalDisclaimer,i.appendChild(o),e.appendChild(i)}this.isPHNotification()||this.renderPriceHistoryGraph(e),this.utilities.shouldRenderSmallNotification()?this.renderPriceHistoryGraph(e):e.addEventListener("mouseover",(function(){n.renderPriceHistoryGraph(e)}))}},{key:"isPHNotification",value:function(){var t=this.flyoutData.common;return t.popupOrigination===Fe.AUTO_SHOW_PRICE_HISTORY&&t.openedWith===Tt.Auto}},{key:"getImageSrc",value:function(t){var e,n,i,o,a,r,s,l=null!==(e=null!==(n=null==t||null===(i=t.ProductDetails)||void 0===i?void 0:i.base64ProductImage)&&void 0!==n?n:null==t||null===(o=t.ProductDetails)||void 0===o?void 0:o.imageUrl)&&void 0!==e?e:null==t||null===(a=t.ProductDetails)||void 0===a?void 0:a.extractedImage;if(!l){var c=new _(A.PriceHistoryNoImage);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Price history - no image",c)}return null!=t&&null!==(r=t.ProductDetails)&&void 0!==r&&r.base64ProductImage?s="data:image/png;base64,".concat(l):(l.startsWith("http")||(l="https://"+l),s=l),s||(s=this.commonAssets.getDefaultProductImage()),s}},{key:"renderPriceHistoryUXWithInsight",value:function(t,e){var n,i,o=e.DailyPrices;if(0===o.length||!e||null==e||!e.ProductDetails)return null;var a=e.getPriceHistoryType();if(a===Xs.PRICEDROP){var r=new _(A.PriceHistoryPriceDrop);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",r)}else if(a===Xs.PRICEINCREASE){var s=new _(A.PriceHistoryPriceIncrease);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",s)}else{var l=new _(A.PriceHistoryPriceStable);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",l)}var c=(null==e||null===(n=e.ProductDetails)||void 0===n?void 0:n.currency)||"$",u="".concat(c).concat(this.utilities.toFixedSafe(o[o.length-1].minPrice,2)),d=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row; justify-content: flex-start; column-gap: 12px; border-bottom: 1px solid rgba(0, 0, 0, 0.03);"});this.flyoutData.common.isPane?(d.style.paddingLeft="6px",d.style.paddingRight="6px"):(d.style.paddingLeft="16px",d.style.paddingRight="16px",this.utilities.shouldRenderSmallNotification()||(d.style.paddingTop="12px"));var h,p=this.getImageSrc(e);if(p){var f=this.utilities.createElement("IMG");f.style.maxWidth="120px",f.style.height="auto",f.style.maxHeight="120px",this.utilities.addImageSrc(f,p),this.utilities.shouldRenderSmallNotification()?((h=this.utilities.createProductImage(70,70,f,null==e?void 0:e.ProductDetails.title)).style.marginBottom="6px",d.style.justifyContent="space-between",d.style.alignItems="center"):h=this.utilities.createProductImage(120,120,f,null==e?void 0:e.ProductDetails.title),h.style.marginBottom="16px"}var g=this.utilities.createElement("DIV",{className:"ph_info",style:"display: flex;\n                flex-direction: row;\n                justify-content: flex-start;\n                column-gap: 12px;\n                padding-top: 0px;\n                padding-right: 4px;\n                margin-left: 10px "});this.flyoutData.common.isPane&&(g.style.paddingTop="12px");var m=this.createPriceHistoryTypeIllustration(a),v=this.setUpMoreInfoButton(e,c,t.id);g.appendChild(m),this.utilities.shouldRenderSmallNotification()||g.appendChild(v);var y=this.utilities.createElement("DIV",{className:"ph_head"});y.textContent=this.GetHeaderContent(a),y.style.fontSize="14px",y.style.lineHeight="20px",y.style.fontWeight="500",y.style.overflow="hidden",y.style.textOverflow="ellipsis",y.style.display="-webkit-box",y.style.webkitLineClamp="2",y.style.marginBottom="10px",y.style.marginTop="10px",y.style.marginRight="5px";var C=this.utilities.createElement("DIV",{style:"\n                    display: flex;\n                    align-items: baseline;\n                "}),b=null===(i=this.getStrikeoutPricePoint(e,a))||void 0===i?void 0:i.minPrice;if(b){var x=this.utilities.createElement("S",{style:"\n                    margin-right: 5px;\n                    color: ".concat(this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#757575",";\n                    font-size: 14px;\n                ")},"".concat(c).concat(this.utilities.toFixedSafe(b,2))),E=this.utilities.createElement("SPAN",{style:"\n                    position: absolute;\n                    clip: rect(0 0 0 0);\n                "},this.flyoutData.strings.phOldPrice);x.appendChild(E),C.appendChild(x)}var T=this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#444444",D=this.utilities.createElement("DIV",{style:"color: ".concat(T,";\n                    font-size: 18px;\n                    line-height: 20px;\n                    font-weight: 600;\n                    margin-bottom: 6px;")},u),k=this.utilities.createElement("SPAN",{style:"\n                position: absolute;\n                clip: rect(0 0 0 0);\n            "},this.flyoutData.strings.phNewPrice);D.appendChild(k),C.appendChild(D),this.utilities.shouldRenderSmallNotification()?(d.appendChild(g),h&&d.appendChild(h)):(h&&d.appendChild(h),d.appendChild(g)),t.appendChild(d)}},{key:"renderPriceHistoryUXWithoutInsight",value:function(t,e){var n,i=null==e||null===(n=e.ProductDetails)||void 0===n?void 0:n.title,o=this.utilities.createElement("DIV",{style:"\n                width: 100%;\n                padding: 0 16px;\n                display: grid;\n                grid-template-columns: 120px auto;\n                column-gap: 12px;\n                align-items: center;\n                box-sizing: border-box;\n            "});this.flyoutData.common.isPane&&(o.style.padding="6px");var a=this.getImageSrc(e);if(a){var r=document.createElement("IMG");this.utilities.addImageSrc(r,a);var s=this.utilities.createProductImage(120,120,r,i);o.appendChild(s)}var l=this.utilities.createElement("DIV");if(this.priceHistoryTitle=this.utilities.createElement("DIV",{style:"\n                font-size: 20px;\n                line-height: 24px;\n                font-weight: 700;\n            "},this.flyoutData.strings.phSectionTitle),this.priceHistoryTitle.style.display="none",l.appendChild(this.priceHistoryTitle),i&&""!==i){var c=this.utilities.createElement("DIV",{style:"\n                    display: -webkit-box;\n                    font-size: 16px;\n                    line-height: 22px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    margin-top: 12px;\n                    -webkit-line-clamp: 2;\n                    -webkit-box-orient: vertical;\n                "},i);c.title=i,l.appendChild(c)}o.appendChild(l),t.appendChild(o)}},{key:"setUpMoreInfoButton",value:function(t,e,n){var i=this,o=this.utilities.createElement("DIV");o.style.position="relative";var a=this.utilities.createElement("IMG");a.src=this.flyoutData.common.resourcesEndpoint+"/priceHistory/infoIcon.svg",a.slot="hover-anchor",a.setAttribute("aria-labelledby","txtPHTooltip");var r=this.utilities.createElement("msft-shopping-tooltip");r.id="header-tooltip",r.style.alignSelf="center",this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PRICE_HISTORY&&(r.style.marginLeft="0px",r.style.marginTop="0px");var s=t.MedianPrice,l=s?"".concat(e).concat(this.utilities.toFixedSafe(s,2)):"";r.content=this.utilities.replaceValueInKey("phTooltipText",this.flyoutData.strings.phTooltipText,l),r.id="txtPHTooltip";var c=0,u=0,d=!0;r.addEventListener("mouseenter",(function(){f()})),r.addEventListener("mouseleave",(function(){g()})),r.addEventListener("focus",(function(){f()})),r.addEventListener("blur",(function(){g()}));var h=this.logModule,p=!0,f=function(){if(p){if(p=!1,!(Date.now()-u>200))return;d=!0,c=Date.now();var t=new _(A.PriceHistoryShowMoreInfoTooltip);h.LogInfoEvent(S.EdgeFlyoutStatus,"Price history - show more info tooltip",t)}},g=function(){u=Date.now(),p=!0,setTimeout((function(){if(d){d=!1,i.sendPriceHistoryDwellTimeTelemery(c,A.PriceHistoryDwellTimeHover,"hover time over info button");var t=new _(A.PriceHistoryHideMoreInfoTooltip);h.LogInfoEvent(S.EdgeFlyoutStatus,"Price history - hide more info tooltip",t)}}),200)};return r.addEventListener("hover",(function(){i.utilities.setupTooltip(r)})),r.append(a),o.appendChild(r),o}},{key:"getLowPoint",value:function(t,e,n){return!n&&t.minPrice>=e.minPrice||n&&n.dtg===e.dtg?null:n?t.minPrice!==e.minPrice&&t.minPrice<n.minPrice?t:n:t.minPrice<e.minPrice?t:null}},{key:"getHighPoint",value:function(t,e,n){return!n&&t.minPrice<=e.minPrice||n&&n.dtg===e.dtg?null:n?t.minPrice!==e.minPrice&&t.minPrice>n.minPrice?t:n:t.minPrice>e.minPrice?t:null}},{key:"getMinCriticalPoint",value:function(t,e){var n=t.reduce((function(t,e){return t.minPrice<e.minPrice?t:e}));return 1===t.length&&t[0].minPrice>e.minPrice?null:n}},{key:"getMaxCriticalPoint",value:function(t,e,n,i){var o,a=t.sort((function(t,e){return e.minPrice-t.minPrice})).filter((function(t){return t.minPrice>n})),r=this.utilities.toFixedSafe(e.minPrice,2).length;r=13*this.utilities.toFixedSafe(e.minPrice,2).length+13*this.flyoutData.strings.phToday.length+7;var s,l=eP(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(i(e.dtg)-i(c.dtg)>r){o=c;break}}}catch(t){l.e(t)}finally{l.f()}return o}},{key:"getCriticalPoints",value:function(t){if(t.length<3)return[];for(var e=[],n=t[1].minPrice-t[0].minPrice,i=2;i<t.length;i++){var o=t[i].minPrice,a=t[i-1].minPrice;((a-o)*n>0||a-o!=0&&0===n)&&e.push(t[i-1]),n=o-a}return e}},{key:"getStrikeoutPricePoint",value:function(t,e){var n=t.DailyPrices;if(n.length>1){if(e===Xs.PRICEDROP){var i,o=n[0].minPrice,a=n[0].dtg,r=eP(n);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.minPrice>o&&(o=s.minPrice,a=s.dtg)}}catch(t){r.e(t)}finally{r.f()}return{dtg:a,minPrice:o}}if(e===Xs.PRICEINCREASE){var l,c=n[0].minPrice,u=n[0].dtg,d=eP(n);try{for(d.s();!(l=d.n()).done;){var h=l.value;h.minPrice<c&&(c=h.minPrice,u=h.dtg)}}catch(t){d.e(t)}finally{d.f()}return{dtg:u,minPrice:c}}}}},{key:"reDrawGraph",value:function(t){var e=this.flyoutData.dataStoreModule.PriceHistoryData;if(e){var n,i=e.getPriceHistoryType(),o=(null==e||null===(n=e.ProductDetails)||void 0===n?void 0:n.currency)||"$",a=this.drawPriceHistoryChart(e,i,o,t),r=this.flyoutData.common.shopping.querySelector("#divPriceHistory");if(r){var s=r.querySelector("svg");s&&s.remove(),a&&(this.graphWidth=t,r.appendChild(a))}}}},{key:"updatePriceGraph",value:function(){if(this.refreshCount++,this.refreshCount<this.maxRefresh){var t,e,n=null===(t=this.flyoutData.common.shopping)||void 0===t?void 0:t.querySelector("#divPriceHistory"),i=null!==(e=null==n?void 0:n.offsetWidth)&&void 0!==e?e:0;if(0===i&&(i=319),n)(!n.querySelector("SVG")||n&&i>0&&i!==this.graphWidth)&&this.reDrawGraph(i);var o=document.getElementById("todayText"),a=document.getElementById("todayPriceTriangleIcon"),r=document.getElementById("todayTextRect"),s=null==r?void 0:r.getAttribute("width");if(o&&r&&a&&"0px"===s){var l,c,u=o.getBoundingClientRect().width+50+a.getBoundingClientRect().width;o.textContent&&o.textContent.length>0&&(u=10*o.textContent.length+20+10);var d=u;r.setAttribute("width",d+"px");var h=r.getAttribute("x"),p=0;h&&(p=parseInt(h,10)-d+4,r.setAttribute("x","".concat(p)));var f=p+30;switch(null===(l=this.flyoutData.dataStoreModule)||void 0===l||null===(c=l.PriceHistoryData)||void 0===c?void 0:c.getPriceHistoryType()){case Xs.PRICEDROP:a.setAttribute("points","".concat(f," 2, ").concat(f+6," 10, ").concat(f+12," 2"));break;case Xs.PRICEINCREASE:a.setAttribute("points","".concat(f," 10, ").concat(f+6," 2, ").concat(f+12," 10"));case Xs.FAIRPRICE:a.setAttribute("points","".concat(f," 0, ").concat(f," 12, ").concat(f+8," 6"))}}}}}]),a}(Bb),dP=uP;function hP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var pP=function(t){u(l,t);var n,i,a=hP(l);function l(t,e,n,i){return s(this,l),a.call(this,t,e,n,i)}return r(l,[{key:"PostProcessingNotification",value:function(t,e){this.PostProcessing(t,0,e)}},{key:"RenderNotification",value:(i=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.utilities.shouldRenderSmallNotification()||this.flyoutData.experimentData.isExperimentActive(Be.phExpandedGraph)){t.next=37;break}if(!(e=this.flyoutData.dataStoreModule.PriceHistoryData)||!e.ProductDetails){t.next=34;break}return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),n=e.ProductDetails,(i=this.utilities.createElement("msft-notification-header")).slot="header-content",a=n.currency||"$",r="".concat(a).concat(this.utilities.formatPrice(e.CurrentPrice)),s="".concat(a).concat(this.utilities.formatPrice(e.MedianPrice)),l="".concat(this.utilities.toFixedSafe(Math.abs(e.DailyPriceDropPercentage),0),"%"),i.title=this.flyoutData.strings.phPriceDropped,i.savings=l,i.oldPrice=s,i.currentPrice=r,i.hasArrow=!0,(c=this.utilities.createElement("IMG",{style:"display: flex; place-self: end; margin-bottom: 2px;"})).setAttribute("aria-hidden","true"),(u=e.getPriceHistoryType())===Xs.PRICEDROP?c.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":u===Xs.PRICEINCREASE?c.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":c.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg",d=this.utilities.createElement("IMG"),n.imageUrl&&""!==n.imageUrl&&(n.imageUrl.startsWith("http")||n.imageUrl.startsWith("data:image")||(n.imageUrl="https://"+n.imageUrl),d.src=n.imageUrl),h=this.utilities.createProductImage(88,88,d,n.title),c.slot="arrow",h.slot="image",i.appendChild(h),i.appendChild(c),(p=this.renderGraphButton(i,d)).style.placeSelf="center",p.slot="actions",this.flyoutData.common.shopping.appendChild(p),this.flyoutData.common.shopping.classList.add("noSections"),f=this.utilities.createNotificationModule(i,this.GetNotificationName(),this),t.abrupt("return",Promise.resolve(f));case 34:case 50:return t.abrupt("return",Promise.resolve(null));case 37:return t.next=39,this.renderModule();case 39:if(!(g=t.sent)||!g.element){t.next=50;break}return g.element.style.marginTop="0px",g.element.slot="header-content",g.element.title="",g.element.accordion=!1,g.element.style.width="100%",this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                    margin-top: 0px;\n                    margin-bottom: 0px;\n                    }\n                    ::part(sections) {\n                        margin-top: 0px;\n                    }"),this.flyoutData.experimentData.isExperimentActive(Be.phExpandedGraph)&&(m=function t(){try{if(g){y(g.element);var e=new _(A.PriceHistoryNotificationHover);v.LogInfoEvent(S.EdgeFlyoutStatus,"",e),g.element.removeEventListener("mouseover",t),g.element.removeEventListener("focus",t)}}catch(t){var n=new _(A.ErrorToRecordEngagement);v.LogErrorEvent(S.EdgeFlyoutStatus,t,n)}},g.element.setAttribute("tabIndex","0"),g.element.addEventListener("mouseover",m),g.element.addEventListener("focus",m),v=this.logModule,this.stateManagement.addEventListener(hn.FooterCreated,(function(){b.utilities.addChevronNotificationFooter(g.element,m.bind(b))})),y=this.renderPriceHistoryGraph.bind(this)),C=this.utilities.createNotificationModule(g.element,this.GetNotificationName(),this),t.abrupt("return",Promise.resolve(C));case 51:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:(n=e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ShouldRenderModule();case 2:return n=t.sent,(i=null!==(e=n&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_PRICE_HISTORY)&&void 0!==e&&e)&&this.pageHandlerModule.TriggerExperiment(Be.phExpandedGraph),t.abrupt("return",Promise.resolve(i));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"GetNotificationName",value:function(){return Mt.PRICEHISTORY}},{key:"renderGraphButton",value:function(t,e){var n,i=this;return(n=this.utilities.createPrimaryButton()).classList.add("headerMargin"),n.textContent=this.flyoutData.strings.phSee,n.addEventListener("click",(function(){t.currentPrice="",t.oldPrice="",t.hasGraph=!0,i.flyoutData.common.shopping.removeChild(n);var o=i.utilities.createElement("DIV");i.flyoutData.common.shopping.appendChild(o),i.renderPriceHistoryGraph(o);var a=e.parentElement;null!==a&&(a.style.maxHeight="72px",a.style.maxWidth="72px",e.style.maxWidth="72px",e.style.maxHeight="72px")})),n}}]),l}(dP),fP=pP,gP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            #recommendationsDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }\n            ::part(badge) {\n                background: linear-gradient(92.91deg, #15835B 31.47%, #499F2B 99.7%);\n                bottom: 127px;\n                left: 5px;\n                border-radius: 4px;\n            }\n            msft-shopping-recommendation {\n                background-color: var(--fill-color);\n                box-shadow: none;\n                border-radius: 8px;\n            }\n            msft-shopping-recommendation::part(control) {\n                box-shadow: none;\n            }\n            #recommendationsDiv msft-shopping-recommendation::part(price-container) {\n                padding: 0px;\n            }\n            msft-shopping-recommendation:hover {\n                box-shadow: rgb(0 0 0 / 12%) 0px 3px 6px;;\n            }\n            #divRecommendationWrapper {\n                display: grid;\n                grid-template-columns: Calc(50% - 8px) Calc(50% - 8px);\n                gap: 12px;\n                padding: 0 12px 0;\n            }\n            #seeAllBottom {\n                margin-left: calc(50% - 20px);\n                color: #0078D4;\n                font-size: 12px;\n                font-weight: 500;\n            }\n            @media (prefers-color-scheme: dark) {\n                #seeAllBottom {\n                    color: #6bbfff;\n                }\n            }"}}]),t}();function mP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var vP=function(t){u(n,t);var e=mP(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"logModule",void 0),f(l(o),"usingChinaAPI",void 0),o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.pageHandlerModule=i.pageHandlerModule,o.logModule=i.logModule,o.assets=new gP,o.usingChinaAPI=!1,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.RECOMMENDATIONS}},{key:"ShouldRenderModule",value:function(){var t=this.hasRecommendations();if(t){var e,n;this.pageHandlerModule.TriggerExperiment(Be.chinaTrendingDeals);var i=this.flyoutData.experimentData.isExperimentActive(Be.chinaTrendingDeals);this.usingChinaAPI=i&&["jd.com","cn.jd.com","global.jd.com","suning.com"].includes(null===(e=this.flyoutData)||void 0===e||null===(n=e.common)||void 0===n?void 0:n.domain)}return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t,e,n,i,o,a,r,s,l,c,u,d,h;if((h=this.flyoutData.common.isPane&&null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule)&&void 0!==e&&null!==(n=e.CouponData)&&void 0!==n&&n.Recommendations&&(null===(i=this.flyoutData)||void 0===i||null===(o=i.dataStoreModule)||void 0===o||null===(a=o.CouponData)||void 0===a?void 0:a.Recommendations.length)>0&&null!==(r=this.flyoutData)&&void 0!==r&&null!==(s=r.dataStoreModule)&&void 0!==s&&null!==(l=s.CouponData)&&void 0!==l&&null!==(c=l.Recommendations[0])&&void 0!==c&&c.isTrendingOffer?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping)&&this.flyoutData.dataStoreModule.CouponData&&(null===(u=this.flyoutData.dataStoreModule.CouponData)||void 0===u||null===(d=u.Recommendations)||void 0===d?void 0:d.length)>0){var p,f,g=this.utilities.createElement("H2");g.className="txtLarge",g.style.textAlign="center",g.style.fontWeight="500";var m=null!==(p=this.flyoutData.dataStoreModule.CouponData)&&void 0!==p&&p.FriendlyDomainName?this.utilities.replaceValueInKey("recommendationsFriendlyDomainTitle",this.flyoutData.strings.recommendationsFriendlyDomainTitle,null===(f=this.flyoutData.dataStoreModule.CouponData)||void 0===f?void 0:f.FriendlyDomainName):this.flyoutData.strings.recommendationsTitle;g.textContent=m,g.slot="header-content",h.appendChild(g)}}},{key:"renderModule",value:function(){var t,e,n,i,o,a,r,s,l,c,u,d;this.flyoutData.common.isPane&&null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule)&&void 0!==e&&null!==(n=e.CouponData)&&void 0!==n&&n.Recommendations&&(null===(i=this.flyoutData)||void 0===i||null===(o=i.dataStoreModule)||void 0===o||null===(a=o.CouponData)||void 0===a?void 0:a.Recommendations.length)>0&&null!==(r=this.flyoutData)&&void 0!==r&&null!==(s=r.dataStoreModule)&&void 0!==s&&null!==(l=s.CouponData)&&void 0!==l&&null!==(c=l.Recommendations[0])&&void 0!==c&&c.isTrendingOffer?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var h=this.utilities.createElement("msft-edge-shopping-section");if(h.id="recommendationsDiv",null===(u=this.flyoutData.dataStoreModule.CouponData)||void 0===u?void 0:u.Recommendations){var p,f,g,m=null!==(p=this.flyoutData.dataStoreModule.CouponData)&&void 0!==p&&p.FriendlyDomainName?this.utilities.replaceValueInKey("recommendationsFriendlyDomainTitle",this.flyoutData.strings.recommendationsFriendlyDomainTitle,null===(f=this.flyoutData.dataStoreModule.CouponData)||void 0===f?void 0:f.FriendlyDomainName):this.flyoutData.strings.recommendationsTitle;this.populateRecommendationsList(h,!1,!1);var v=this.flyoutData;this.utilities.createCommonListStructure(h,m,null===(g=this.flyoutData.dataStoreModule.CouponData)||void 0===g?void 0:g.Recommendations,this.GetModuleName(),(function(t){var e=bt.RECOMMENDATIONS;return t&&v.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populateRecommendationsList.bind(this))}return this.pageHandlerModule.TriggerExperiment(Be.isTrendingOffersEnabled),this.flyoutData.experimentData.isExperimentActive(Be.isTrendingOffersEnabled)&&null!==(d=this.flyoutData.dataStoreModule.CouponData)&&void 0!==d&&d.Recommendations&&this.flyoutData.dataStoreModule.CouponData.Recommendations.length>0&&this.flyoutData.dataStoreModule.CouponData.Recommendations[0].isTrendingOffer?Promise.resolve(this.CreateModule(h,wt.RECOMMENDATIONS,Rt.RECOMMENDATIONS,_t.HOME,Ft.SQUARES)):Promise.resolve(this.CreateModule(h,wt.RECOMMENDATIONS,Rt.RECOMMENDATIONS,_t.CONTEXTUAL,Ft.SQUARES))}},{key:"hasRecommendations",value:function(){var t,e=this.flyoutData.dataStoreModule.CouponData;return null!==(t=e&&e.Recommendations&&e.Recommendations.length>0)&&void 0!==t&&t}},{key:"populateRecommendationsList",value:function(t,e,n){var i,o=this,a=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.Recommendations;if(a){var r=0;a.length>0&&(r=a.length);var s=0;e?s=bt.RECOMMENDATIONS:r>bt.RECOMMENDATIONS&&(r=bt.RECOMMENDATIONS);var l=null;e?l=t.querySelector("#divRecommendationWrapper"):(l=this.utilities.createElement("DIV")).id="divRecommendationWrapper",this.flyoutData.common.isPane&&l&&(l.style.padding="0 20px 20px",l.style.gap="16px");for(var c=s;c<r;c++){var u=a[c],d=this.createRecommendationTile(u);l?(l.appendChild(d),e||t.appendChild(l)):t.appendChild(d),c===s&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d&&d.focus()}}if(e&&this.usingChinaAPI){var h=this.utilities.createElement("fluent-button");h.textContent="See all",h.id="seeAllBottom",h.appearance="lightweight",h.addEventListener("click",(function(){o.pageHandlerModule.RecordAsUserAction(is.SEE_ALL_TRENDING_DEALS);var t=new Yr(E.SeeAllTrendingDeals),e=o.flyoutData.common.domain.includes("jd.com")?"https://cn.jd.com/deals":"https://qiang.suning.com/pc/brandBenefits.html";o.logModule.LogInfoEvent(S.ButtonClick,"Clicked on see all trending deals",t),o.pageHandlerModule.NavigateToCouponPage(e)}));var p=t.children.length;t.insertBefore(h,t.children[p-1])}}},{key:"createRecommendationTile",value:function(t){var e,n=this.utilities.createElement("msft-shopping-recommendation",{style:"padding: 8px"});n.ariaRoledescription="button",n.textContent=t.title,n.setAttribute("current-price",null==t?void 0:t.newPrice),n.href="#",t.originalPrice&&t.originalPrice!==t.newPrice&&n.setAttribute("previous-price",null==t?void 0:t.originalPrice);var i="free shipping"===(null==t||null===(e=t.shippingText)||void 0===e?void 0:e.toLocaleLowerCase())?null==t?void 0:t.shippingText:"";if(""===i){var o,a,r=null!==(o=t.discountPercentage)&&void 0!==o?o:null!==(a=t.priceDropPercentage)&&void 0!==a?a:"";r=r.includes("%")?r:r+"%",t.discountPercentage?i=this.utilities.replaceValueInKey("recommendationsDiscountPercent",this.flyoutData.strings.recommendationsDiscountPercent,r):t.priceDropPercentage&&(i=this.utilities.replaceValueInKey("recommendationsPriceDrop",this.flyoutData.strings.recommendationsPriceDrop,r))}return""!==i&&n.setAttribute("badge",i),this.createImage(null==t?void 0:t.imageUrl,n),this.manageRecommendationsLinkEvents(n,null==t?void 0:t.id,null==t?void 0:t.offerUrl),n.setAttribute("title","".concat(t.title," ").concat(i)),n}},{key:"createImage",value:function(t,e){if(t){var n=this.utilities.createElement("IMG");n.src=this.usingChinaAPI?t:this.flyoutData.common.urlPrefix+"https://www.bing.com/"+t,n.slot="image",n.setAttribute("aria-hidden","true"),e.appendChild(n)}}},{key:"manageRecommendationsLinkEvents",value:function(t,e,n){var i=this;t.addEventListener("click",(function(){i.flyoutData.common.currentDevice===St.Desktop&&i.navigateToOffer(e,n,cl.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToOffer(e,n,cl.NEW_FOREGROUND_TAB)}))}},{key:"navigateToOffer",value:function(t,e,n){this.usingChinaAPI?this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_TRENDING_DEAL):this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RECOMMENDATION_OFFER);var i=new Yr(E.NavigateToRecommendedDeal);this.logModule.LogInfoEvent(S.ButtonClick,"Clicked on recommended offer",i),this.pageHandlerModule.NavigateToRecommendationWithDisposition(t,e,n)}}]),n}(Bb),yP=vP;function CP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var bP,SP,xP,EP,AP,TP=function(t){u(l,t);var n,i,a=CP(l);function l(t,e){return s(this,l),a.call(this,t,e)}return r(l,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:(i=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.flyoutData.common.isPane&&null!==(e=this.flyoutData)&&void 0!==e&&null!==(n=e.dataStoreModule)&&void 0!==n&&null!==(i=n.CouponData)&&void 0!==i&&i.Recommendations&&(null===(a=this.flyoutData)||void 0===a||null===(r=a.dataStoreModule)||void 0===r||null===(s=r.CouponData)||void 0===s?void 0:s.Recommendations.length)>0&&null!==(l=this.flyoutData)&&void 0!==l&&null!==(c=l.dataStoreModule)&&void 0!==c&&null!==(u=c.CouponData)&&void 0!==u&&null!==(d=u.Recommendations[0])&&void 0!==d&&d.isTrendingOffer?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),g=this.flyoutData.common.shopping,(m=this.utilities.createElement("H2")).id="recommendationsHeader",m.textContent=null!==(h=this.flyoutData.dataStoreModule.CouponData)&&void 0!==h&&h.FriendlyDomainName?this.utilities.replaceValueInKey("recommendationsFriendlyDomainTitle",this.flyoutData.strings.recommendationsFriendlyDomainTitle,null===(p=this.flyoutData.dataStoreModule.CouponData)||void 0===p?void 0:p.FriendlyDomainName):this.flyoutData.strings.recommendationsTitle,m.slot="header-content",m.className="txtLarge",m.style.textAlign="center",m.style.fontWeight="500",g.append(m),(v=this.utilities.createElement("div")).style.margin="20px",v.style.marginBottom="0px",v.id="recommendationsDiv",v.setAttribute("aria-labelledby","recommendationsHeader"),(null===(f=this.flyoutData.dataStoreModule.CouponData)||void 0===f?void 0:f.Recommendations)&&(S=function(t){var e=bt.RECOMMENDATIONS_NOTIF;return t&&E.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},x=null!==(y=this.flyoutData.dataStoreModule.CouponData)&&void 0!==y&&y.FriendlyDomainName?this.utilities.replaceValueInKey("recommendationsFriendlyDomainTitle",this.flyoutData.strings.recommendationsFriendlyDomainTitle,null===(C=this.flyoutData.dataStoreModule.CouponData)||void 0===C?void 0:C.FriendlyDomainName):this.flyoutData.strings.recommendationsTitle,this.populateRecommendationsNotifList(v,!1,!1),E=this.flyoutData,this.utilities.createCommonListStructure(v,x,null===(b=this.flyoutData.dataStoreModule.CouponData)||void 0===b?void 0:b.Recommendations,this.GetModuleName(),S,this.populateRecommendationsNotifList.bind(this)),v.expanded=!0),t.abrupt("return",Promise.resolve(this.utilities.createNotificationModule(v,this.GetNotificationName(),this)));case 18:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:(n=e(o().mark((function t(){var e,n,i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.hasRecommendations(),n=this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_RECOMMENDATIONS,i=!1,e&&n&&(this.pageHandlerModule.TriggerExperiment(Be.chinaTrendingDeals),this.usingChinaAPI=this.flyoutData.experimentData.isExperimentActive(Be.chinaTrendingDeals),s=["jd.com","suning.com"],i=this.usingChinaAPI&&s.includes(null===(a=this.flyoutData)||void 0===a||null===(r=a.common)||void 0===r?void 0:r.domain)),t.abrupt("return",Promise.resolve(e&&n&&i));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"GetNotificationName",value:function(){return Mt.RECOMMENDATION}},{key:"populateRecommendationsNotifList",value:function(t,e,n){var i,o=this,a=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.Recommendations;if(a){var r=0;a.length>0&&(r=a.length);var s=0;e?s=bt.RECOMMENDATIONS_NOTIF:r>bt.RECOMMENDATIONS_NOTIF&&(r=bt.RECOMMENDATIONS_NOTIF);var l=null;e?l=t.querySelector("#divRecommendationWrapper"):(l=this.utilities.createElement("DIV")).id="divRecommendationWrapper";for(var c=s;c<r;c++){var u=a[c],d=this.createRecommendationTile(u);l?(l.appendChild(d),e||t.appendChild(l)):t.appendChild(d),c===s&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d&&d.focus()}}if(e){var h=this.utilities.createElement("fluent-button");h.textContent="See all",h.id="seeAllBottom",h.appearance="lightweight",h.addEventListener("click",(function(){o.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RECOMMENDATION_OFFER);var t=new Yr(E.SeeAllTrendingDeals);o.logModule.LogInfoEvent(S.ButtonClick,"Clicked on see all trending deals",t),o.pageHandlerModule.NavigateToCouponPage("https://cn.jd.com/deals")}));var p=t.children.length;t.insertBefore(h,t.children[p-1])}}}]),l}(yP),DP=TP,kP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .divRewardWrapper {\n                width: 336px;\n                height: auto;\n                background: rgba(0, 120, 212, 0.05);\n                border: 1px solid rgba(250, 181, 39, 0.12);\n                box-sizing: border-box;\n                border-radius: 4px;\n            }\n            .divRewardsHeader {\n                display: grid;\n                grid-template-columns: auto auto;\n                margin: 12px;\n            }\n            .divRewardTitle {\n                width: 100%;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 16px;\n                font-weight: 600;\n                line-height: 22px;\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n                color: rgba(0, 0, 0, 0.83);\n            }\n            .divRewardPointSection {\n                width: auto;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 12px;\n                font-weight: 600;\n                line-height: 16px;\n                display: flex;\n                justify-content: flex-end;\n                align-items: center;\n                color: rgba(0, 0, 0, 0.83);\n            }\n            .divRewardPoint {\n                width: auto;\n                text-align: right;\n                margin-right: 5px;\n            }\n            .divRewardPointIcon {\n                width: 12px;\n                height: 12px;\n                float:right;\n                place-self: center;\n            }\n            .divRewardDetailsSection {\n                height: auto;\n                margin: 12px;\n                text-align: start;\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                color: #333333;\n            }\n            .divRewardAdditionalLink {\n                margin-top: 5px;\n                height: auto;\n                width: auto;\n                display: block;\n            }\n            .divRewardFailedSignIn {\n                width: 100%;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 16px;\n                line-height: 20px;\n                justify-content: center;\n                display: grid;\n                margin-bottom: 10px;\n                grid-template-columns: auto auto;\n            }\n            .divRewardErrorIcon {\n                place-self: center;\n                margin-right: 5px;\n            }\n            .divRewardIconSet {\n                display: grid;\n                grid-template-columns: auto auto auto;\n                width: 93%;\n                height: auto;\n                margin-left: 12px;\n                font-family: Segoe UI;\n                font-size: 14px;\n                font-weight: 600;\n                line-height: 25px;\n            }\n            .divIconSection {\n                display: grid;\n                grid-template-columns: auto auto;\n                width: auto;\n                height: auto;\n            }\n            .detailLink {\n                vertical-align: super;\n                height: auto;\n            }\n            .detailLink {\n                vertical-align: super;\n                height: auto;\n                font-weight: 500;\n            }\n            .tailString {\n                display: inline;\n            }\n            #rewardButtonLearnMore {\n                margin-bottom: 12px;\n                margin-left: 11px;\n                width: 93%;\n                height: 32px;\n            }\n            #accordionItem {\n                margin-top: 0px;\n                margin-bottom: 0px;\n            }\n            #titleRewardTwo {\n                font-size: 20px;\n                line-height: 28px;\n                margin-left: 12px;\n            }\n            #detailRewardTwo {\n                font-size: 14px;\n                line-height: 20px;\n            }\n            @media (forced-colors: active) {\n                .divRewardWrapper {\n                    background: ".concat(oh.Highlight,";\n                }\n                .divRewardTitle,\n                .divRewardPointSection {\n                    color: ").concat(oh.CanvasText,";\n                }\n                .cupIcon {\n                    fill: ").concat(oh.CanvasText,";\n                }\n            }")}},{key:"getDarkModeStyles",value:function(){return"\n            .divRewardDetailsSection {\n                color: #FFFFFF;\n            }\n            .divRewardWrapper {\n                background: linear-gradient(0deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08)), rgba(0, 120, 212, 0.1);\n            }\n            .divRewardTitle,\n            .divRewardPointSection {\n                color: #FFFFFF;\n            }\n            .cupIcon {\n                fill: #FFFFFF;\n            }\n            "}},{key:"getCupIcon",value:function(){return mt.getTrustedHTML(bP||(bP=j(['<svg class="cupIcon" width="12" height="12" viewBox="0 0 12 12" aria-hidden="true" fill="black" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1.5 0C0.671573 0 0 0.671573 0 1.5V2.69253C0 3.21234 0.26912 3.6951 0.711267 3.96843L4.57713 6.35823C3.63807 6.86508 3 7.85803 3 9C3 10.6569 4.34315 12 6 12C7.65685 12 9 10.6569 9 9C9 7.85803 8.36193 6.86508 7.42287 6.35823L11.2887 3.96843C11.7309 3.6951 12 3.21234 12 2.69253V1.5C12 0.671573 11.3284 0 10.5 0H1.5ZM4 4.82581V1H8V4.82581L6.26291 5.89965C6.10179 5.99925 5.89821 5.99925 5.73709 5.89965L4 4.82581ZM6 7C7.10457 7 8 7.89543 8 9C8 10.1046 7.10457 11 6 11C4.89543 11 4 10.1046 4 9C4 7.89543 4.89543 7 6 7Z" fill-opacity="0.83"/>\n        </svg>'])))}},{key:"getErrorCircleIcon",value:function(){return mt.getTrustedHTML(SP||(SP=j(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM8 10.5C8.41421 10.5 8.75 10.8358 8.75 11.25C8.75 11.6642 8.41421 12 8 12C7.58579 12 7.25 11.6642 7.25 11.25C7.25 10.8358 7.58579 10.5 8 10.5ZM8 4C8.24546 4 8.44961 4.17688 8.49194 4.41012L8.5 4.5V9C8.5 9.27614 8.27614 9.5 8 9.5C7.75454 9.5 7.55039 9.32312 7.50806 9.08988L7.5 9V4.5C7.5 4.22386 7.72386 4 8 4Z" fill="#C42B1C"/>\n        </svg>'])))}},{key:"getCouponIcon",value:function(){return mt.getTrustedHTML(xP||(xP=j(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#E0EFFA"/>\n        <path d="M16.6731 6.95142C16.0191 6.29744 14.9588 6.29744 14.3048 6.95142L6.95239 14.3038C6.29842 14.9578 6.29842 16.0181 6.95239 16.6721L7.82433 17.544C8.20443 17.9241 8.73798 17.8561 9.06037 17.6644C9.1988 17.5821 9.36033 17.5347 9.53463 17.5347C10.0484 17.5347 10.465 17.9513 10.465 18.465C10.465 18.6394 10.4176 18.8009 10.3353 18.9394C10.1436 19.2617 10.0756 19.7953 10.4557 20.1754L11.3277 21.0474C11.9817 21.7014 13.042 21.7014 13.696 21.0474L21.0483 13.695C21.7023 13.041 21.7023 11.9807 21.0483 11.3267L20.1764 10.4548C19.7963 10.0746 19.2626 10.1427 18.9402 10.3344C18.8018 10.4167 18.6402 10.4642 18.4659 10.4642C17.952 10.4642 17.5355 10.0476 17.5355 9.53383C17.5355 9.35949 17.5829 9.19793 17.6653 9.05947C17.857 8.73708 17.9251 8.20345 17.5449 7.82332L16.6731 6.95142Z" fill="#0078D4"/>\n        </svg>'])))}},{key:"getCashbackIcon",value:function(){return mt.getTrustedHTML(EP||(EP=j(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#E4EFE4"/>\n        <path d="M6.46191 10.1877C6.46191 9.32033 7.16506 8.61719 8.03243 8.61719H20.1478C21.0152 8.61719 21.7183 9.32033 21.7183 10.1877V17.8159C21.7183 18.6833 21.0152 19.3864 20.1478 19.3864H8.03243C7.16506 19.3864 6.46191 18.6833 6.46191 17.8159V10.1877ZM9.15422 9.73898V10.6364C9.15422 11.0081 8.85287 11.3095 8.48114 11.3095H7.58371V12.6556H8.48114C9.59633 12.6556 10.5004 11.7516 10.5004 10.6364V9.73898H9.15422ZM14.0901 16.2454C15.2053 16.2454 16.1093 15.3413 16.1093 14.2262C16.1093 13.111 15.2053 12.2069 14.0901 12.2069C12.9749 12.2069 12.0709 13.111 12.0709 14.2262C12.0709 15.3413 12.9749 16.2454 14.0901 16.2454ZM7.58371 16.6941H8.48114C8.85287 16.6941 9.15422 16.9955 9.15422 17.3672V18.2646H10.5004V17.3672C10.5004 16.252 9.59633 15.348 8.48114 15.348H7.58371V16.6941ZM19.026 17.3672C19.026 16.9955 19.3274 16.6941 19.6991 16.6941H20.5965V15.348H19.6991C18.5839 15.348 17.6799 16.252 17.6799 17.3672V18.2646H19.026V17.3672ZM19.026 10.6364V9.73898H17.6799V10.6364C17.6799 11.7516 18.5839 12.6556 19.6991 12.6556H20.5965V11.3095H19.6991C19.3274 11.3095 19.026 11.0081 19.026 10.6364Z" fill="#0F7B0F"/>\n        </svg>'])))}},{key:"getRewardIcon",value:function(){return mt.getTrustedHTML(AP||(AP=j(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#FFFBE9"/>\n        <path d="M9.15347 8.61719C8.26132 8.61719 7.53809 9.34042 7.53809 10.2326V11.5168C7.53809 12.0766 7.82791 12.5965 8.30407 12.8909L12.4673 15.4645C11.456 16.0104 10.7689 17.0797 10.7689 18.3095C10.7689 20.0938 12.2153 21.5403 13.9996 21.5403C15.7839 21.5403 17.2304 20.0938 17.2304 18.3095C17.2304 17.0797 16.5432 16.0104 15.5319 15.4645L19.6952 12.8909C20.1713 12.5965 20.4612 12.0766 20.4612 11.5168V10.2326C20.4612 9.34042 19.7379 8.61719 18.8458 8.61719H9.15347ZM11.8458 13.8142V9.69411H16.1535V13.8142L14.2828 14.9707C14.1092 15.0779 13.89 15.0779 13.7165 14.9707L11.8458 13.8142ZM13.9996 16.1556C15.1892 16.1556 16.1535 17.12 16.1535 18.3095C16.1535 19.499 15.1892 20.4633 13.9996 20.4633C12.8101 20.4633 11.8458 19.499 11.8458 18.3095C11.8458 17.12 12.8101 16.1556 13.9996 16.1556Z" fill="#D17D00"/>\n        </svg>'])))}}]),t}();function IP(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wP(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function wP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function PP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var OP=function(t){u(i,t);var n=PP(i);function i(t,e,o){var a;return s(this,i),f(l(a=n.call(this)),"assets",void 0),f(l(a),"pageHandlerModule",void 0),f(l(a),"flyoutData",void 0),f(l(a),"utilities",void 0),f(l(a),"stateManagement",void 0),f(l(a),"rewardApplied",void 0),f(l(a),"logModule",void 0),f(l(a),"pointsToAllocate",void 0),f(l(a),"maxSupportedDomains",void 0),f(l(a),"localStorageKeyRewardMap","rewardMap"),f(l(a),"localStorageKeyRewardPoints","rewardPoints"),f(l(a),"localStorageKeyDomainCount","domainCount"),a.pageHandlerModule=e.pageHandlerModule,a.flyoutData=t,a.utilities=e.viewModulesUtilities,a.assets=new kP,a.stateManagement=o,a.logModule=e.logModule,a.maxSupportedDomains=1,a}return r(i,[{key:"GetModuleName",value:function(){return Rt.REWARD}},{key:"setInitialStatesAndListeners",value:function(){var t=this;this.stateManagement.addEventListener(hn.onRewardsTelemetryFail,(function(e){if(e.detail&&e.detail.status){var n=new _(A.ErrorRewardSignIn);t.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Reward sign in error - ".concat(e.detail.status),n,dn.CouponImpressionId)}})),this.stateManagement.addEventListener(hn.onRewardsTelemetrySuccess,(function(){var e=new _(A.RewardSignInSuccess);t.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Reward sign in success",e,dn.CouponImpressionId)}))}},{key:"ShouldRenderModule",value:function(){var t,e,n,i=null!==(t=null===(e=this.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.canRenderCashback)&&void 0!==t&&t,o=this.flyoutData.dataStoreModule.RewardData;o&&(this.pageHandlerModule.TriggerExperiment(Be.rewardFlyout),this.pageHandlerModule.TriggerExperiment(Be.signinRewards),this.pageHandlerModule.TriggerExperiment(Be.rewardNotification));var a=this.flyoutData.experimentData.isExperimentActive(Be.rewardFlyout),r=this.flyoutData.experimentData.isExperimentActive(Be.signinRebates),s=this.flyoutData.experimentData.isExperimentActive(Be.signinRewards),l=this.flyoutData.dataStoreModule.CashBackData,c=a&&null!=o&&o.IsRewardsActive&&i&&(r&&s||l&&(null===(n=l.userRebatesResponse)||void 0===n?void 0:n.isRebatesUser)),u=this.isRewardsAdded();if(c&&!u){this.flyoutData.experimentData.isVariantActive(Be.rewardFlyout,Db.Rewards_100)?this.pointsToAllocate=100:this.flyoutData.experimentData.isVariantActive(Be.rewardFlyout,Db.Rewards_50)?this.pointsToAllocate=50:(this.flyoutData.experimentData.isVariantActive(Be.rewardFlyout,Db.Rewards_200),this.pointsToAllocate=200),this.setInitialStatesAndListeners();var d=new _(A.RewardWillBeRendered);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Rendered reward module in flyout",d,dn.CouponImpressionId)}return Promise.resolve(c&&!u)}},{key:"renderModule",value:function(){if(this.isRewardsAdded())return Promise.resolve(null);var t=this.flyoutData.dataStoreModule.RewardData;if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),t){var e=document.createElement("msft-edge-shopping-section");e.id="rewardSection",e.accordion=!0,e.title=this.flyoutData.strings.rewardRewards,e.setAttribute("aria-labelledby","divRewardTitleId");var n=this.renderFailedSignInSection(),i=this.renderWrapper(t);return!t.IsSignedInUser&&t.ActivateRewardsStatus&&this.isFailedSignInState(t.ActivateRewardsStatus)&&e.appendChild(n),e.appendChild(i),Promise.resolve(this.CreateModule(e,wt.REWARD,Rt.REWARD,_t.CONTEXTUAL,Ft.BLOCK))}return Promise.resolve(null)}},{key:"PostProcessing",value:function(t,e,n){var i,o,a,r=this;0===e&&un.queueUpdate((function(){var t=r.flyoutData.common.shopping.querySelector("#rewardSection");if(t&&t.shadowRoot){var e=t.shadowRoot.querySelector("fluent-accordion-item");e&&(e.style.marginTop="0px")}}));var s=this.flyoutData.dataStoreModule.CashBackData,l=this.flyoutData.dataStoreModule.CouponData;!(null!==(i=null===(o=this.flyoutData.dataStoreModule.CouponData)||void 0===o?void 0:o.isCheckoutPageWithAutoApply)&&void 0!==i&&i&&null!=s&&s.canRenderCashback&&s&&!s.isCashBackActivated&&l&&l.Coupons)||null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&a.isPersonalizedCashback||this.isRewardsAdded()||un.queueUpdate((function(){var t=r.flyoutData.common.shopping.querySelector("#rewardSection");t&&t.shadowRoot&&(t.title="",t.style.marginTop="0px",t.slot="header-content",t.expanded=!0,t.accordion=!1,t.style.marginTop="0px")}))}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shopping){var t=this.flyoutData.common.shopping.querySelector("#rewardSection");t&&(t.style.marginTop="0px",t.slot="header-content")}}},{key:"StringifyMap",value:function(){return JSON.stringify(Array.from(this.rewardApplied.entries()))}},{key:"isRewardsAdded",value:function(){try{var t=ze(this.localStorageKeyRewardMap),e=!1;if(t){var n,i=IP(new Map(JSON.parse(t)).entries());try{for(i.s();!(n=i.n()).done;){var o=Zs(n.value,2),a=o[0],r=o[1];if(a){var s=r;s&&(e=Date.now()-s<=6048e5)}}}catch(t){i.e(t)}finally{i.f()}}if(e)return!0}catch(t){var l=new _(A.ErrorRewardsAdded);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"isRewardsAdded Exception: ".concat(Il.getErrorString(t)),l)}return!1}},{key:"renderIconSetSection",value:function(){var t=this.utilities.createElement("DIV");t.className="divRewardIconSet";var e=this.renderIconSection(this.assets.getCouponIcon(),this.flyoutData.strings.rewardCoupons),n=this.renderIconSection(this.assets.getCashbackIcon(),this.flyoutData.strings.rewardCashback),i=this.renderIconSection(this.assets.getRewardIcon(),this.flyoutData.strings.rewardRewards);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}},{key:"renderIconSection",value:function(t,e){var n=this.utilities.createElement("DIV");n.className+=" divIconSection";var i=this.utilities.createElement("DIV");i.textContent=t;var o=this.utilities.createElement("DIV");return o.textContent=e,n.append(i),n.append(o),n}},{key:"renderWrapper",value:function(t){var e=this.utilities.createElement("div");e.className="divRewardWrapper";var n=this.utilities.createElement("div");n.className+=" divRewardsHeader";var i=this.renderTitle(t),o=this.renderPointSection(t);n.appendChild(i),n.appendChild(o);var a=this.renderDetails(t);return e.appendChild(n),e.appendChild(a),e}},{key:"renderFailedSignInSection",value:function(){var t=this.utilities.createElement("div");t.className="divRewardFailedSignIn";var e=this.utilities.createElement("div");e.className="divRewardErrorIcon",e.innerHTML=this.assets.getErrorCircleIcon();var n=this.utilities.createElement("div");return n.textContent=this.flyoutData.strings.rewardFailedSignin,t.append(e),t.append(n),t}},{key:"isFailedSignInState",value:function(t){return t===Lt.FAILED_SWITCH_TO_MSA_PROFILE||t===Lt.FAILED_SWITCH_TO_MSA_DECLINED||t===Lt.FAILED_SIGN_INTO_PROFILE}},{key:"renderTitle",value:function(t){var e=this.utilities.createElement("div");e.className="divRewardTitle",e.id="divRewardTitleId",e.setAttribute("aria-live","assertive");var n=this.getRewardPoints(t);if(this.isRewardsAdded()){var i=this.utilities.replaceValueInKey("rewardTitleRewardsAdded",this.flyoutData.strings.rewardTitleRewardsAdded,this.pointsToAllocate.toString());e.textContent=i}else t.IsTrialUser&&n>=5e3?e.textContent=this.flyoutData.strings.rewardTitleEarnedMaximum:e.textContent=this.flyoutData.strings.rewardTitleDefault;return e}},{key:"renderPointSection",value:function(t){var n=this,i=this.utilities.createElement("div");i.className="divRewardPointSection";var a=this.utilities.createElement("div");a.className="divRewardPointIcon",a.innerHTML=this.assets.getCupIcon();var r=this.utilities.createElement("div");r.className="divRewardPoint";var s=this.getRewardPoints(t);return r.setAttribute("aria-label",s.toString()+"Microsoft Rewards"),t.IsSignedInUser||t.IsAssociatedUser?r.textContent=s.toString():r.textContent=s>=5e3?this.flyoutData.strings.rewardPointMax:s.toString()+this.flyoutData.strings.rewardPerMaxPoint,this.stateManagement.addEventListener(hn.onCashBackActivatedForRewards,e(o().mark((function e(){var i,a,l,c,u,d,h,p,f,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.pageHandlerModule.RecordAsUserAction(is.ACTIVATE_REWARDS_NEW),i=new Yr(E.RewardsClick),n.logModule.LogInfoEvent(S.ButtonClick,"Clicked on Rewards",i),!(t.IsTrialUser&&s>=5e3||t.IsAssociatedUser)){e.next=7;break}return i=new Yr(E.ActivateCashbackToEarnRewardFail),t.IsTrialUser&&s>=5e3?n.logModule.LogInfoEvent(S.ButtonClick,"Trial user already earned maximum reward points (5000)",i,dn.CouponImpressionId):n.logModule.LogInfoEvent(S.ButtonClick,"Associated user attempted to earn rewards",i,dn.CouponImpressionId),e.abrupt("return");case 7:a=n.flyoutData.common.domain,l=ze(n.localStorageKeyRewardMap),c=ze(n.localStorageKeyDomainCount),u=0,null===(d=null==c?void 0:c.split("&")[0])||isNaN(parseInt(d,10))||(u=parseInt(d,10)),null===(h=null==c?void 0:c.split("&")[1])||isNaN(parseInt(h,10))||(p=parseInt(h,10),Date.now()-p>6048e5&&(u=0)),n.rewardApplied=l?new Map(JSON.parse(l)):new Map,f=n.rewardApplied.get(a),u<n.maxSupportedDomains?f?Date.now()-f>=6048e5?n.updatePoints(t,s,r,a,u+1):(i=new Yr(E.ActivateCashbackToEarnRewardFail),n.logModule.LogInfoEvent(S.ButtonClick,"User already earned rewards on "+a+" today",i,dn.CouponImpressionId)):(n.updatePoints(t,s,r,a,u+1),i=new Yr(E.ActivateCashbackToEarnReward),n.logModule.LogInfoEvent(S.ButtonClick,"User earned ".concat(n.pointsToAllocate," reward points on ")+a,i,dn.CouponImpressionId)):(i=new Yr(E.ActivateCashbackToEarnRewardFail),n.logModule.LogInfoEvent(S.ButtonClick,"User already earned rewards on 5 domains",i,dn.CouponImpressionId)),g=n.StringifyMap(),Ye(n.localStorageKeyRewardMap,g);case 20:case"end":return e.stop()}}),e)})))),i.append(r),i.append(a),i}},{key:"getRewardPoints",value:function(t){var e=ze(this.localStorageKeyRewardPoints);if(e){var n=e.split("&");if(n){var i=n[0],o=parseInt(n[1],10);if(Date.now()-o<36e5){if(null!==i&&!isNaN(parseInt(i,10)))return parseInt(i,10)}else qe(this.localStorageKeyRewardPoints)}}return t.Points?t.Points:0}},{key:"updatePoints",value:function(t,e,n,i,o){e+=this.pointsToAllocate;var a=document.querySelector("#divRewardTitleId"),r=this.utilities.replaceValueInKey("rewardTitleRewardsAdded",this.flyoutData.strings.rewardTitleRewardsAdded,this.pointsToAllocate.toString());a.textContent=r,a.setAttribute("aria-live","off"),document.querySelector("#divContentWrapper").style.background='url( "'.concat(this.flyoutData.common.resourcesEndpoint,'confetti.png") no-repeat'),document.querySelector("#divDetailFirstLine").style.display="none";var s=document.querySelector("#divDetailSecondLine");s.style.float="none",s.style.position="relative",s.style.bottom="2px",s.style.display="block";var l=document.querySelector(".divRewardAdditionalLink");if(l){var c=this.utilities.createElement("DIV");c.className="divRewardAdditionalLink",c.textContent=this.flyoutData.strings.rewardKeepExploringText,l.replaceWith(c)}if(Ye(this.localStorageKeyRewardPoints,e.toString()+"&"+Date.now()),1===o)Ye(this.localStorageKeyDomainCount,o.toString()+"&"+Date.now());else{var u,d=null===(u=ze(this.localStorageKeyDomainCount))||void 0===u?void 0:u.split("&")[1];Ye(this.localStorageKeyDomainCount,o.toString()+"&"+d)}t.IsTrialUser?n.textContent=e.toString()+this.flyoutData.strings.rewardPerMaxPoint:n.textContent=e.toString();var h=new UI(this.pointsToAllocate,this.pointsToAllocate,i,this.pointsToAllocate);this.logModule.LogInfoEvent(S.RewardsActivity,"rewards points info",h,dn.CouponImpressionId),this.rewardApplied.set(i,Date.now())}},{key:"renderDetails",value:function(t){var e=this.utilities.createElement("DIV");e.className="divRewardDetailsSection";var n=this.renderLinkForMoreDetails(),i=this.renderLinkToSignIn(),o=this.utilities.createElement("div",{style:"\n        display: inline-block;"}),a=this.utilities.createElement("div",{style:"\n        display: inline-block;"});if(o.id="divDetailFirstLine",a.id="divDetailSecondLine",t.IsSignedInUser)n.textContent=this.flyoutData.strings.rewardRedeem,a.append(n),this.renderRewardsBanner(a,o,n,e);else if(t.IsAssociatedUser)i.textContent=this.flyoutData.strings.rewardAssociateSignIn,a.append(i),this.renderRewardsBanner(a,o,n,e);else{if(i.textContent=this.flyoutData.strings.rewardSignIn,a.append(i),this.isRewardsAdded())a.style.display="block";else{o.textContent=this.flyoutData.strings.rewardDetailFirstLine;var r=this.utilities.createElement("span",{style:"\n        font-weight: 500;"});r.textContent=this.utilities.replaceValueInKey("rewardDetailFirstLineBold",this.flyoutData.strings.rewardDetailFirstLineBold,this.pointsToAllocate.toString()),o.appendChild(r),e.appendChild(o),a.style.float="right",a.style.position="relative",a.style.bottom="3px"}a.style.display="none",e.appendChild(a)}if(!t.IsAssociatedUser){var s=this.renderLinkToLeanMore();e.appendChild(s)}return e}},{key:"renderLinkToLeanMore",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className+=" divRewardAdditionalLink",e.appearance="lightweight",e.href="#",e.textContent=this.flyoutData.strings.commonLearnMore,e.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(is.REWARDS_REDEEM_CLICK),t.pageHandlerModule.NavigateToRewardsInfo();var e=new Yr(E.RewardAdditionalLink);t.logModule.LogInfoEvent(S.ButtonClick,"User navigated to explore additional rebates sites",e,dn.CouponImpressionId)})),e}},{key:"renderLinkToSignIn",value:function(){var t=this,n=this.utilities.createElement("fluent-anchor");return n.className+=" detailLink",n.appearance="lightweight",n.href="#",n.addEventListener("click",e(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.pageHandlerModule.ActivateRewards(!0),n=new Yr(E.RewardSignIn),t.logModule.LogInfoEvent(S.ButtonClick,"Rewards Sign In started",n,dn.CouponImpressionId);case 3:case"end":return e.stop()}}),e)})))),n}},{key:"renderLinkForMoreDetails",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className+=" detailLink",e.appearance="lightweight",e.href="#",e.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(is.REWARDS_REDEEM_CLICK),t.pageHandlerModule.NavigateToRedeemRewards();var e=new Yr(E.RewardRedeem);t.logModule.LogInfoEvent(S.ButtonClick,"User navigated to redeem rewards",e,dn.CouponImpressionId)})),e}},{key:"renderRewardsBanner",value:function(t,e,n,i){if(this.isRewardsAdded())t.style.display="block";else{e.textContent=this.flyoutData.strings.rewardDetailFirstLine;var o=this.utilities.createElement("span",{style:"\n    font-weight: 500; font-size: 18px;"}),a=this.utilities.replaceValueInKey("rewardDetailFirstLineBold",this.flyoutData.strings.rewardDetailFirstLineBold,this.pointsToAllocate.toString());o.textContent=a,e.appendChild(o),i.appendChild(e),t.style.float="right",t.style.position="relative",t.style.bottom="3px"}t.style.display="none",i.appendChild(t)}}]),i}(Bb),RP=OP;function MP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var NP=function(t){u(n,t);var e=MP(n);function n(t,i,o){return s(this,n),e.call(this,i,o,t)}return r(n,[{key:"PostProcessingNotification",value:function(t,e){this.PostProcessing(this.GetModuleName(),0,e)}},{key:"RenderNotification",value:function(){var t=this.utilities.createElement("div",{style:"width: 100%;"}),e=this.utilities.createElement("div");e.className="divRewardTitle",e.id="titleRewardTwo",e.textContent=this.flyoutData.strings.rewardTitleRewardTwo;var n=this.utilities.createElement("div");n.className="divRewardDetailsSection",n.id="detailRewardTwo",n.textContent=this.flyoutData.strings.rewardDetailTwo;var i=this.renderIconSetSection(),o=this.renderLearnMoreButton();t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o);var a=this.utilities.createNotificationModule(t,this.GetNotificationName(),this);this.disableNotificationHeader();var r=new _(A.RewardNotification);return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User saw reward notification",r,dn.CouponImpressionId),Promise.resolve(a)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.RewardData;return Promise.resolve(null!==(t=null==e?void 0:e.shouldRenderRewardNotification)&&void 0!==t&&t)}},{key:"GetNotificationName",value:function(){return Mt.REWARD}},{key:"disableNotificationHeader",value:function(){var t=this;un.queueUpdate((function(){var e=t.flyoutData.common.shopping;e.shadowRoot&&(e.shadowRoot.querySelector(".header").style.display="none")}))}},{key:"renderLearnMoreButton",value:function(){var t=this,e=this.utilities.createElement("fluent-button");return this.flyoutData.experimentData.isExperimentActive(Be.newStandardStyle)?this.utilities.shouldRenderSmallNotification()?e.classList.add(gt.PrimarySmallNotification):e.classList.add(gt.Primary):e.classList.add(gt.PrimaryColor),e.id="rewardButtonLearnMore",e.textContent=this.flyoutData.strings.commonLearnMore,e.appearance="accent",e.addEventListener("click",(function(){t.pageHandlerModule.NavigateToRewardsInfo();var e=new Yr(E.RewardInfo);t.logModule.LogInfoEvent(S.ButtonClick,"User navigated to learn more about rewards",e,dn.CouponImpressionId)})),e}}]),n}(RP),LP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            #shopRunnerContainer {\n                padding: 12px;\n                text-align: center;\n            }\n\n            #shopRunnerSubHeaderContainer {\n                margin-bottom: 10px;\n            }\n\n            .shopRunnerSubHeading {\n                display: inline-block;\n            }\n\n            #shopRunnerSubHeading1::after {\n                content: '';\n                display: inline-block;\n                margin-left: 5px;\n                margin-right: 5px;\n            }\n\n            #shopRunnerSubHeading2 {\n                color: #555555;\n                text-decoration: line-through;\n            }\n\n            #shopRunnerIconSectionContainer {\n                display: flex;\n                flex-direction: row;\n                justify-content: center;\n                margin-bottom: 10px;\n            }\n\n            .shopRunnerIconContainer {\n                width: 70px;\n            }\n\n            #shopRunnerPrivacyMessageContainer {\n                text-align: left;\n                margin-top: 10px;\n            }\n        "}},{key:"getConfirmationNotificationStyles",value:function(){return"\n            #shopRunnerPopupContentContainer {\n                display: flex;\n                align-items: center;\n                margin-bottom: 5px;\n            }\n\n            #shopRunnerPopupContentContainer img {\n                width: 150px;\n            }\n        "}}]),t}();function _P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var FP=function(t){u(n,t);var e=_P(n);function n(t,i,o,a){var r;return s(this,n),f(l(r=e.call(this)),"assets",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"flyoutData",void 0),f(l(r),"utilities",void 0),f(l(r),"stateManagement",void 0),f(l(r),"logModule",void 0),f(l(r),"commonAssets",void 0),r.pageHandlerModule=i.pageHandlerModule,r.flyoutData=t,r.utilities=i.viewModulesUtilities,r.assets=new LP,r.stateManagement=o,r.logModule=i.logModule,r.commonAssets=a,r}return r(n,[{key:"GetModuleName",value:function(){return Rt.SHOPRUNNER}},{key:"ShouldRenderModule",value:function(){return this.flyoutData.experimentData.isExperimentActive(Be.shopRunner)&&"true"===ze("isPDP")?Promise.resolve(!0):Promise.resolve(!1)}},{key:"renderModule",value:function(){this.flyoutData.common.isPane?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var t=this.utilities.createElement("msft-edge-shopping-section");t.id="shopRunnerSection",t.title=this.flyoutData.strings.shopRunnerFlyoutTitle,t.accordion=!0,t.expanded=!1;var e=this.getMainContainer();t.appendChild(e),t.addEventListener("click",(function e(){if(t){var o=t.shadowRoot;if(o){var a=o.querySelector("fluent-accordion-item");a&&(a.classList.contains("expanded")||n?i||(this.pageHandlerModule.RecordAsUserAction(is.SHOPRUNNER_FLYOUT_COLLAPSE_SECTION),i=!0):(this.pageHandlerModule.RecordAsUserAction(is.SHOPRUNNER_FLYOUT_EXPAND_SECTION),n=!0))}}n&&i&&t&&t.removeEventListener("click",e)}));var n=!1,i=!1;return Promise.resolve(this.CreateModule(t,wt.SHOPRUNNER,this.GetModuleName(),_t.HOME,Ft.BLOCK))}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#shopRunnerSection");t&&(t.style.marginTop="0px",t.style.textAlign="start",t.style.marginLeft="auto",t.style.width="100%",t.slot="header-content")}},{key:"getMainContainer",value:function(){var t=this.utilities.createElement("DIV",{id:"shopRunnerContainer"}),e=this.createContentHeader(),n=this.createIconSection(),i=this.createSignUpButton(),o=this.createPrivacyMessage();return t.append(e),t.append(n),t.append(i),t.append(o),t}},{key:"createContentHeader",value:function(){var t=this.utilities.createElement("DIV"),e=this.utilities.createElement("H2",{id:"shopRunnerFlyoutHeading"},this.flyoutData.strings.shopRunnerFlyoutHeading),n=this.utilities.createElement("DIV",{id:"shopRunnerSubHeaderContainer"}),i=this.utilities.createElement("DIV",{className:"shopRunnerSubHeading txtMedium",id:"shopRunnerSubHeading1"},this.flyoutData.strings.shopRunnerFlyoutSubHeading1),o=this.utilities.createElement("DIV",{className:"shopRunnerSubHeading txtMedium",id:"shopRunnerSubHeading2"},this.flyoutData.strings.shopRunnerFlyoutSubHeading2);return n.append(i),n.append(o),t.append(e),t.append(n),t}},{key:"createIconSection",value:function(){var t=this.utilities.createElement("DIV",{id:"shopRunnerIconSectionContainer"}),e=this.createIcon("shopRunner/Truck_Circle.png",this.flyoutData.strings.shopRunnerFlyoutTitle),n=this.createIcon("shopRunner/Box.png",this.flyoutData.strings.shopRunnerIconDescription1),i=this.createIcon("shopRunner/Stores.png",this.flyoutData.strings.shopRunnerIconDescription2);return t.append(e),t.append(n),t.append(i),t}},{key:"createIcon",value:function(t,e){var n=this.utilities.createElement("DIV",{className:"shopRunnerIconContainer"}),i=this.utilities.createElement("IMG");i.src=this.flyoutData.common.resourcesEndpoint+t;var o=this.utilities.createElement("DIV");return o.textContent=e,n.appendChild(i),n.appendChild(o),n}},{key:"createSignUpButton",value:function(){var t=this,e=this.utilities.createPrimaryButton();return e.id="shopRunnerSignUpButton",e.textContent=this.flyoutData.strings.shopRunnerSignUpButtonText,e.setAttribute("aria-live","assertive"),e.addEventListener("click",(function(){try{var e=new Yr(E.ShopRunnerSignUp),n=t.flyoutData.common.openedWith===Tt.Auto&&t.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SHOPRUNNER?"User clicked ShopRunner sign up from auto show notification":"User clicked ShopRunner sign up from flyout/pane";t.logModule.LogInfoEvent(S.ButtonClick,n,e),t.pageHandlerModule.RecordAsUserAction(is.SHOPRUNNER_SIGNUP_CLICK)}catch(e){var i=new _(A.OnErrorInvoked);t.logModule.LogErrorEvent(S.ButtonClick,"ShopRunner sign up error: ".concat(null==e?void 0:e.message),i)}finally{t.flyoutData.common.isPane||setTimeout((function(){t.pageHandlerModule.DismissPopup()}),4500)}})),e}},{key:"createPrivacyMessage",value:function(){var t=this,e=this.utilities.createElement("DIV",{id:"shopRunnerPrivacyMessageContainer"}),n=this.utilities.createElement("SPAN");n.className="txtSmall",n.style.fontSize="10px",n.style.lineHeight="14px",n.style.marginTop="10px";var i=this.utilities.createElement("fluent-anchor");return i.appearance="hypertext",i.href="#",i.style.fontSize="10px",i.style.lineHeight="14px",i.style.height="14px",i.style.position="relative",i.style.marginLeft="3px",i.style.verticalAlign="bottom",i.textContent=this.flyoutData.strings.commonMicrosoftPolicy,i.style.alignSelf="center",i.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()})),this.utilities.replaceElementInKey(n,this.flyoutData.strings.shopRunnerPrivacyMsg,i),e.appendChild(n),e}}]),n}(Bb);function HP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var BP,UP=function(t){u(a,t);var n,i=HP(a);function a(t,e,n,o){return s(this,a),i.call(this,t,e,n,o)}return r(a,[{key:"PostProcessingNotification",value:function(t,e){e.classList.add("headerMargin")}},{key:"GetNotificationName",value:function(){return Mt.SHOPRUNNER_SIGN_UP_NOTIFICATION}},{key:"ShouldRenderNotification",value:(n=e(o().mark((function t(){var n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.experimentData.isExperimentActive(Be.shopRunner)){t.next=2;break}return t.abrupt("return",Promise.resolve(!1));case 2:if(i=null===(n=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===n?void 0:n.PriceHistoryDebug){t.next=5;break}return t.abrupt("return",Promise.resolve(!1));case 5:if(!Se(i.nUrl)){t.next=7;break}return t.abrupt("return",Promise.resolve(!1));case 7:return a=this.getShopRunnerProxyEligibilityEndpointUrl(i),t.abrupt("return",fetch(a.toString()).then(function(){var t=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200===e.status){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",!0===(null==n?void 0:n.eligibility));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return!1})));case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"RenderNotification",value:function(){this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getConfirmationNotificationStyles());var t=this.utilities.createElement("DIV",{id:"shopRunnerPopup"}),e=this.createPopupContent(),n=this.createSeeMoreButton();t.appendChild(e),t.appendChild(n);var i=this.utilities.createNotificationModule(t,this.GetNotificationName(),this);return Promise.resolve(i)}},{key:"getShopRunnerProxyEligibilityEndpointUrl",value:function(t){for(var e=new URL("https://shoprunnerproxy.bing-shopping.microsoft-falcon.io/api/v1/producteligibility"),n={nUrl:t.nUrl},i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];e.searchParams.append(a,n[a])}return e}},{key:"createPopupContent",value:function(){var t=this.utilities.createElement("DIV",{id:"shopRunnerPopupContentContainer"}),e=this.utilities.createElement("H2",{className:"txtLarge"},this.flyoutData.strings.shopRunnerNotificationHeading),n=this.utilities.createElement("IMG");return n.src=this.flyoutData.common.resourcesEndpoint+"shopRunner/Free_Shipping.png",t.appendChild(e),t.appendChild(n),t}},{key:"createSeeMoreButton",value:function(){var t=this.utilities.createPrimaryButton();return t.textContent=this.flyoutData.strings.sectionSeeMoreOnly,t}}]),a}(FP),VP=UP,GP=function(){function t(){s(this,t)}var n;return r(t,null,[{key:"getOtherSellerConfirmationData",value:(n=e(o().mark((function t(e,n){var i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=new URL(n.common.lastCommittedURL),a="OtherSellersConfirmationData_"+i.pathname,!(r=n.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=9;break}l={value:{stringValue:r[a]}},s=l,t.next=12;break;case 9:return t.next=11,e.GetStorageValue(a);case 11:s=t.sent;case 12:if(!s){t.next=19;break}if(!(c=s)||!c.value){t.next=19;break}if(!(d=null===(u=ds.Create(s.value))||void 0===u?void 0:u.stringValue)){t.next=19;break}return e.SetStorageValue(a,new Bs),t.abrupt("return",Promise.resolve(JSON.parse(d)));case 19:t.next=25;break;case 21:return t.prev=21,t.t0=t.catch(0),t.abrupt("return",Promise.resolve(null));case 25:return t.abrupt("return",Promise.resolve(null));case 26:case"end":return t.stop()}}),t,null,[[0,21]])}))),function(t,e){return n.apply(this,arguments)})}]),t}(),WP=GP;!function(t){t[t.Clipping=0]="Clipping",t[t.OtherSellers=1]="OtherSellers",t[t.BackgroundAA=2]="BackgroundAA"}(BP||(BP={}));var $P=function(){function t(){s(this,t),f(this,"otherSellers",void 0),f(this,"productImage",void 0),f(this,"productPrice",void 0),f(this,"currency",void 0),f(this,"productUrl",void 0),f(this,"dataCreationTime",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.productImage=e.productImage,n.productPrice=e.productPrice,n.productUrl=e.productUrl,n.currency=e.currency,n.otherSellers=new Array,e.otherSellers.forEach((function(t){n.otherSellers.push(t)})),n}}]),t}(),zP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .divNotificationContent {\n                text-align: center;\n                overflow: hidden;\n                margin-top: -10px;\n            }\n            msft-shopping-similar-seller {\n                border-bottom: 1px solid rgba(0, 0, 0, 0.04);\n            }\n            msft-shopping-similar-seller:last-of-type {\n                border-bottom: none;\n            }\n            msft-shopping-similar-seller::part(control) {\n                box-shadow: none;\n            }\n            msft-shopping-similar-seller::part(item-price) {\n                font-size: 24px;\n            }\n        "}}]),t}(),KP=function(){function t(){s(this,t),f(this,"intValue",void 0)}return r(t,null,[{key:"Create",value:function(e){var n=new t;return n.intValue=e.intValue,n}}]),t}();function YP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var jP=function(t){u(m,t);var n,i,a,c,d,h,p,g=YP(m);function m(t,e,n){var i;return s(this,m),f(l(i=g.call(this)),"assets",void 0),f(l(i),"flyoutData",void 0),f(l(i),"utilities",void 0),f(l(i),"pageHandlerModule",void 0),f(l(i),"logModule",void 0),f(l(i),"commonAssets",void 0),f(l(i),"shouldRenderSimilarSellers",void 0),f(l(i),"otherSellersData",void 0),f(l(i),"similarSellersSection",void 0),i.flyoutData=t,i.utilities=e.viewModulesUtilities,i.pageHandlerModule=e.pageHandlerModule,i.logModule=e.logModule,i.assets=new zP,i.commonAssets=n,i.setShouldShowOtherSellersModule(),i}return r(m,[{key:"GetModuleName",value:function(){return Rt.SIMILARSELLERS}},{key:"CalculateRanking",value:function(){var t;return this.otherSellersData&&this.otherSellersData.otherSellers.length>0?Te.GetPriceStringAsNumber(this.otherSellersData.productPrice)-Te.GetPriceStringAsNumber(null===(t=this.otherSellersData.otherSellers[0])||void 0===t?void 0:t.price)>0?Ct.SaveMoneyPage:Ct.InformPage:Ct.Unknown}},{key:"setOtherSellersData",value:function(t){this.otherSellersData=t}},{key:"ShouldRenderModule",value:(p=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.shouldRenderSimilarSellers){t.next=2;break}return t.abrupt("return",this.shouldRenderSimilarSellers);case 2:return t.next=4,this.setShouldShowOtherSellersModule();case 4:return t.abrupt("return",!!this.shouldRenderSimilarSellers);case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t,e;if(!this.utilities.shouldRenderSmallNotification()){var n=this.flyoutData.common.shopping,i=this.flyoutData.common.domain.includes("amazon")?this.flyoutData.strings.similarSellerStringAmazon:this.flyoutData.strings.similarSellerString;if(n&&this.otherSellersData&&(null===(t=this.otherSellersData)||void 0===t||null===(e=t.otherSellers)||void 0===e?void 0:e.length)>0){var o=this.utilities.replaceValueInKey("similarSellerString",i,"$$"),a="",r=0;try{var s;r=this.calculateSavings(),a="".concat(null!==(s=this.otherSellersData.currency)&&void 0!==s?s:"$").concat(r.toFixed(2)),r>0&&(o=i.replace("$1",a))}catch(t){}if(""!==a&&r>0&&this.otherSellersData.productImage)this.CreateTitle(a,this.otherSellersData.productImage,n);else{var l=this.utilities.createElement("H2");l.innerText=o,l.className="txtLarge",l.style.textAlign="center",l.style.fontWeight="500";var c=o;l.textContent=c,l.slot="header-content",n.prepend(l)}this.similarSellersSection.slot="header-content"}}}},{key:"renderModule",value:(h=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.similarSellersSection=this.utilities.createElement("msft-edge-shopping-section"),this.similarSellersSection.id="similarSellerDiv",this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER){t.next=9;break}return t.next=7,this.renderSimilarSellerNotification();case 7:case 17:t.next=30;break;case 9:if(this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_OTHER_SELLERS||!this.utilities.shouldRenderSmallNotification()){t.next=19;break}if(!(this.otherSellersData&&(null===(e=this.otherSellersData.otherSellers)||void 0===e?void 0:e.length)>0)){t.next=17;break}return i=this.otherSellersData.otherSellers[0],t.next=14,this.renderSmallNotification(i,null===(n=this.otherSellersData)||void 0===n?void 0:n.productPrice,0);case 14:return a=t.sent,this.updateAutoShowCount(),t.abrupt("return",Promise.resolve(this.CreateModule(a,wt.SIMILARSELLERS,Rt.SIMILARSELLERS,_t.CONTEXTUAL,Ft.BLOCK)));case 19:if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),!(this.otherSellersData&&(null===(r=this.otherSellersData.otherSellers)||void 0===r?void 0:r.length)>0)){t.next=30;break}return s=function(t){var e=bt.SIMILARSELLERS;return t&&u.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},l=this.flyoutData.common.domain,c=l.includes("amazon")?this.flyoutData.strings.similarSellerStringCollapsedAmazon:this.flyoutData.strings.similarSellerStringCollapsed,this.populateOtherSellersList(this.similarSellersSection,!1,!1),u=this.flyoutData,this.utilities.createCommonListStructure(this.similarSellersSection,c,this.otherSellersData.otherSellers,this.GetModuleName(),s,this.populateOtherSellersList.bind(this)),this.updateAutoShowCount(),this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_OTHER_SELLERS&&this.flyoutData.common.shopping.classList.add("noSections"),t.abrupt("return",Promise.resolve(this.CreateModule(this.similarSellersSection,wt.SIMILARSELLERS,Rt.SIMILARSELLERS,_t.CONTEXTUAL,Ft.BLOCK)));case 30:t.next=36;break;case 32:return t.prev=32,t.t0=t.catch(0),t.abrupt("return",Promise.resolve(null));case 36:return t.abrupt("return",Promise.resolve(null));case 37:case"end":return t.stop()}}),t,this,[[0,32]])}))),function(){return h.apply(this,arguments)})},{key:"updateAutoShowCount",value:(d=e(o().mark((function t(){var e,n,i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_OTHER_SELLERS){t.next=14;break}return t.next=4,this.pageHandlerModule.GetStorageValue("OtherSellersAutoShowCount");case 4:e=t.sent,n=0,e&&""!==e&&(a=e.value,n=null!==(i=a.intValue)&&void 0!==i?i:0),n=n?n+1:1,(r=new KP).intValue=n,(s=new ds).stringValue=(new Date).toUTCString(),this.pageHandlerModule.SetStorageValue("OtherSellersAutoShowCount",r),this.pageHandlerModule.SetStorageValue("OtherSellersLastAutoShowTime",s);case 14:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"renderSimilarSellerNotification",value:(c=e(o().mark((function t(){var e,n,i,a,r,s,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.next=3,WP.getOtherSellerConfirmationData(this.pageHandlerModule,this.flyoutData);case 3:e=t.sent,(n=this.flyoutData.common.shopping)&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(i=this.utilities.createElement("DIV",{id:"productAddedPopup"})).slot="header-content",(a=this.utilities.createElement("DIV",{className:"txtMedium"})).className="divNotificationContent",r="",r=null!=e&&e.Success?this.utilities.replaceValueInKey("similarSellerNotificationTitle",this.flyoutData.strings.similarSellerNotificationTitle,"$"+e.Savings):this.flyoutData.strings.similarSellerNotificationError,s=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},r),a.appendChild(s),i.appendChild(a),n.appendChild(i),null!=e&&e.Success&&(l=this.createAddedToCartButton())&&n.appendChild(l),c=new _(A.AddedToCartNotification),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User saw other seller added to cart notification",c,dn.CouponImpressionId));case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"populateOtherSellersList",value:function(t,e,n){var i,o,a=null===(i=this.otherSellersData)||void 0===i?void 0:i.otherSellers,r=null===(o=this.otherSellersData)||void 0===o?void 0:o.productPrice;if(a){var s=0;a.length>0&&(s=a.length);var l=0;e?l=bt.SIMILARSELLERS:s>bt.SIMILARSELLERS&&(s=bt.SIMILARSELLERS);for(var c=l;c<s;c++){var u=a[c],d=this.createSellerTile(u,null!=r?r:"",u.index);t.appendChild(d),c===l&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d&&d.focus()}}}},{key:"createAddedToCartButton",value:function(){var t=this.utilities.createElement("fluent-button"),e=this.utilities.createElement("DIV");return e.innerHTML=this.commonAssets.getGreenCheck(),e.slot="start",e.setAttribute("aria-hidden","true"),t.disabled=!0,t.slot="actions",t.textContent=this.flyoutData.strings.similarSellerAddedToCartTitle,t.appendChild(e),t.style.backgroundColor="transparent",t.style.boxSizing="border-box",t.style.borderRadius="4px",t.style.opacity="1",t.style.border="1px solid rgba(0, 0, 0, 0.07)",t.style.maxWidth="218px",t.style.width="100%",t.style.marginTop="10px",this.flyoutData.common.currentTheme===xt.Dark?(t.style.color="#FFFFFF",t.style.borderColor="#FFFFFF"):t.style.color="#000000",t}},{key:"calculateSavings",value:function(){var t=0;if(this.otherSellersData&&this.otherSellersData.otherSellers&&this.otherSellersData.otherSellers.length>0){var e,n=Te.GetPriceStringAsNumber(this.otherSellersData.productPrice),i=null===(e=this.otherSellersData.otherSellers[0])||void 0===e?void 0:e.totalPrice;if(i)t=n-i;else{var o;t=n-Te.GetPriceStringAsNumber(null===(o=this.otherSellersData.otherSellers[0])||void 0===o?void 0:o.price);var a=this.otherSellersData.otherSellers[0].delivery.split(" ");if((null==a?void 0:a.length)>0&&a[0]){var r=parseFloat(a[0].replace("$",""));isNaN(r)||(t-=r)}}}return t}},{key:"renderSmallNotification",value:function(t,e,n){var i,o=this;this.flyoutData.common.shopping.classList.add("noSections");var a=this.utilities.createElement("DIV",{style:"display: flex;\n                flex-direction: column;\n                text-align: left;\n                width: 100%;"});a.slot="header-content";var r=this.utilities.createElement("msft-notification-header");r.title=this.flyoutData.strings.commonSaveSimple;var s,l=this.calculateSavings();l>0&&this.otherSellersData?r.savings="".concat(null!==(s=this.otherSellersData.currency)&&void 0!==s?s:"$").concat(this.utilities.formatPrice(l)):r.title=this.flyoutData.strings.similarSellerStringSubtitleAmazon;if(null!==(i=this.otherSellersData)&&void 0!==i&&i.productImage){var c=this.utilities.createElement("IMG");c.src=this.flyoutData.common.urlPrefix+this.otherSellersData.productImage;var u=this.utilities.createProductImage(60,60,c,t.heading);u.slot="image",r.appendChild(u)}var d=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column;\n                    font-size: 12px; line-height: 16px; font-weight: 400;\n                    margin-top: 8px;"});d.classList.add("headerMargin");var h=this.createSellerTile(t,e,n),p=this.utilities.createElement("SPAN"),f=this.utilities.createElement("fluent-anchor",{style:"\n                vertical-align: super;\n                display: inline-block;\n                margin-left: 3px;\n                line-height: 16px;\n                height: 16px;\n            "});f.textContent=h.shipperName,f.href="#",f.addEventListener("click",(function(){o.navigateToOtherSeller(t,h.shipperUrl,cl.NEW_FOREGROUND_TAB)})),f.appearance="lightweight",this.utilities.replaceElementInKey(p,this.flyoutData.strings.similarSellerShipFromString,f),d.appendChild(p);var g=this.utilities.createElement("DIV",{style:"display: inline;"}),m=this.utilities.createElement("SPAN");"."===h.deliveryInfo[h.deliveryInfo.length-1]&&(h.deliveryInfo=h.deliveryInfo.replace(".","")),m.textContent=h.deliveryLabel+h.deliveryInfo;var v=this.utilities.createElement("SPAN",{style:"vertical-align: super;\n                    margin-left: 4px;\n                    margin-right: 2px;"});v.textContent=".";var y=this.utilities.createElement("SPAN");y.textContent=h.itemTitle,g.appendChild(m),g.appendChild(v),g.appendChild(y),d.appendChild(g),a.appendChild(r);var C=this.utilities.createElement("HR",{style:"border: 1px solid #000000;\n            opacity: 0.04;\n            margin-bottom: 0px;\n            margin-top: 0px;\n            border-bottom: unset;\n            width: 100%;"});a.appendChild(C),a.appendChild(d);var b=this.utilities.createPrimaryButton();return b.slot="actions",b.textContent=this.utilities.replaceValueInKey("similarSellerNewAddToCartTitle",this.flyoutData.strings.similarSellerNewAddToCartTitle,t.price),b.style.marginTop="12px",b.classList.add("headerMargin"),b.addEventListener("click",(function(){o.addToCartHandler(t,e,n)})),this.flyoutData.common.shopping.appendChild(b),a}},{key:"setShouldShowOtherSellersModule",value:(a=e(o().mark((function t(){var e,n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.flyoutData.common.domain).includes("amazon")||"walmart.com"===n){t.next=5;break}return this.shouldRenderSimilarSellers=!1,t.abrupt("return");case 5:if(i=!1,n.includes("amazon")&&(i=!0),"walmart.com"===n&&(i=!0),i){t.next=11;break}return this.shouldRenderSimilarSellers=!1,t.abrupt("return");case 11:return t.next=13,this.getSimilarSellersData();case 13:return this.otherSellersData=t.sent,this.otherSellersData&&(this.flyoutData.dataStoreModule.SimilarSellerData=$P.Create(this.otherSellersData),(null===(a=this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers)||void 0===a?void 0:a.length)>3&&(r=this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers,this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers=r.slice(0,3))),this.otherSellersData&&(null===(e=this.otherSellersData.otherSellers)||void 0===e?void 0:e.length)>0&&(this.shouldRenderSimilarSellers=!0),t.abrupt("return");case 18:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getSimilarSellersData",value:(i=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=new URL(this.flyoutData.common.lastCommittedURL),!(n=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=8;break}a={value:{stringValue:n["OtherSellersData_"+e.pathname]}},i=a,t.next=11;break;case 8:return t.next=10,this.pageHandlerModule.GetStorageValue("OtherSellersData_"+e.pathname);case 10:i=t.sent;case 11:if(!i||""===i){t.next=23;break}if(!(r=i)){t.next=23;break}if(!((l=this.deserializeStorageData(null==r?void 0:r.value))&&(null===(s=l.otherSellers)||void 0===s?void 0:s.length)>0)){t.next=23;break}if(l.productUrl===e.pathname){t.next=18;break}return t.abrupt("return",Promise.resolve(null));case 18:if(c=Date.now(),!(void 0===l.dataCreationTime||c-l.dataCreationTime>18e5)){t.next=22;break}return t.abrupt("return",Promise.resolve(null));case 22:return t.abrupt("return",Promise.resolve(l));case 23:t.next=30;break;case 25:t.prev=25,t.t0=t.catch(0),u=new _(A.OtherSeller),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Failed to deserialize data",u,dn.CouponImpressionId);case 30:return t.abrupt("return",Promise.resolve(null));case 31:case"end":return t.stop()}}),t,this,[[0,25]])}))),function(){return i.apply(this,arguments)})},{key:"deserializeStorageData",value:function(t){var e,n=null===(e=ds.Create(t))||void 0===e?void 0:e.stringValue;if(n)return JSON.parse(n)}},{key:"createSellerTile",value:function(t,e,n){var i=this,o=this.utilities.createElement("msft-shopping-similar-seller");try{if(o.actionButtonText=this.flyoutData.strings.similarSellerAddToCartTitle,o.actionButtonAriaLabel=this.flyoutData.strings.similarSellerAddToCartAriaLable,o.onClickHandler=function(){i.addToCartHandler(t,e,n)},o.itemTitle=t.heading,o.itemTitleId=t.heading,o.itemPrice=t.price,t.delivery&&this.flyoutData.common.domain.includes("amazon")){var a=t.delivery.replace(/  |\r\n|\n|\r/gm," ").replace("Delivery","delivery").trim(),r="delivery";a.includes(":")&&(r+=":");var s=a.split(r),l="",c="";s.length>=2&&(l=s[0].trim()+" Delivery",c=s[1].trim()),c&&c.indexOf("Fastest")>=0&&(c=c.substring(0,c.indexOf("Fastest")).trim()),c&&c.indexOf("Order")>=0&&(c=c.substring(0,c.indexOf("Order")).trim()),c&&c.indexOf("Details")>=0&&(c=c.substring(0,c.indexOf("Details")).trim()),o.deliveryLabel=l+": ",o.deliveryLabelId=o.deliveryLabel,o.deliveryInfo=c,o.deliveryInfoId=c,l.includes(t.currency)&&(o.hasShippingCost=!0)}if(t.delivery&&"walmart.com"===this.flyoutData.common.domain){var u=t.delivery.split("+");u&&(o.deliveryInfo=u[0],o.deliveryInfo=o.deliveryInfo,u.length>1?(o.hasShippingCost=!0,o.deliveryLabel=u[1].trim()):o.deliveryLabel=this.flyoutData.strings.similarSellerFreeDelivery,o.deliveryLabel+=": ",o.deliveryLabelId=o.deliveryLabel,o.deliveryInfo=o.deliveryInfo)}o.shipperLabel="".concat(this.flyoutData.strings.similarSellerShipFromString," "),o.shipperLabelId="".concat(this.flyoutData.strings.similarSellerShipFromString," "),o.shipperName=m.CapitalizeText(t.soldBy.toString());var d=t.soldBy.split(" ");return(null==d?void 0:d.length)>=4&&(o.shipperName=d.slice(-2).join(" ")),o.shipperLinkId=o.shipperName,this.flyoutData.dataLoader.IsServerData()&&t.sellerUrl&&(o.shipperUrl=t.sellerUrl,o.shipperUrl.includes("https://www.")||(o.shipperUrl="https://www."+this.flyoutData.common.domain+"/"+t.sellerUrl),o.linkClickHandler=function(){i.navigateToOtherSeller(t,o.shipperUrl,cl.NEW_FOREGROUND_TAB)}),t.rating&&(o.ratingLabel="".concat(this.flyoutData.strings.similarSellerRatingLabel," "),o.ratingLabelId="".concat(this.flyoutData.strings.similarSellerRatingLabel," "),o.rating=t.rating.toString(),o.ratingId=o.rating),o}catch(t){}return new HTMLElement}},{key:"addToCartHandler",value:function(t,e,n){try{var i=new Bs;this.pageHandlerModule.SetStorageValue("OtherSellersAutoShowCount",i);var o=new Yr(E.AddToCart,void 0,JSON.stringify(t));this.pageHandlerModule.RecordAsUserAction(is.ADD_TO_CART_FROM_OTHER_SELLER),this.pageHandlerModule.AddItemFromOtherSeller(JSON.stringify({action:BP.OtherSellers,data:{OtherSeller:{Currency:t.currency,ItemIndex:n,ItemPrice:Te.GetPriceStringAsNumber(t.price),OriginalItemPrice:Te.GetPriceStringAsNumber(e)},SkipAutoApply:!0}})),this.logModule.LogInfoEvent(S.ButtonClick,"Added to the cart",o,dn.CouponImpressionId)}catch(t){}}},{key:"navigateToOtherSeller",value:function(t,e,n){var i=new Yr(E.NavigateToOtherSeller,void 0,JSON.stringify(t));this.pageHandlerModule.RecordAsUserAction(is.ADD_TO_CART_FROM_OTHER_SELLER),this.logModule.LogInfoEvent(S.ButtonClick,"Clicked on other seller link",i),this.pageHandlerModule.NavigateToOtherSellerWithDisposition(e,n)}},{key:"CreateTitle",value:(n=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.flyoutData.common.domain,r=a.includes("amazon")?this.flyoutData.strings.similarSellerStringSubtitleAmazon:this.flyoutData.strings.similarSellerStringSubtitle,(s=this.utilities.createElement("DIV",{style:"height: 100%; width:100%; display: grid; grid-template-columns: 124px auto; grid-gap: 20px;"})).setAttribute("aria-label",this.flyoutData.strings.commonYouCanSave+" "+e+r),s.slot="header-content",s.classList.add("headerMargin"),n&&((l=this.utilities.createElement("IMG")).src=this.flyoutData.common.urlPrefix+n,(c=this.utilities.createProductImage(120,120,l)).style.margin="0px",s.appendChild(c)),(u=this.utilities.createElement("DIV")).style.display="flex",u.style.flexDirection="column",u.style.rowGap="25px",u.style.justifyContent="center",u.style.textAlign="left",(d=this.utilities.createElement("SPAN",{style:"font-size: 26px;"})).className="similarSellerTitle",d.textContent=this.flyoutData.strings.commonYouCanSave,u.appendChild(d),e&&((h=this.utilities.createElement("SPAN",{style:"color: var(--text-price-savings-color); font-size: 48px;"})).textContent=e,u.appendChild(h)),(p=this.utilities.createElement("SPAN",{style:"color: #767676; font-size: 12px;"})).className="similarSellerSubtitle",p.textContent=r,u.appendChild(p),s.appendChild(u),i.prepend(s);case 24:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return n.apply(this,arguments)})}],[{key:"CapitalizeText",value:function(t){if(t){var e="";return t.split(" ").forEach((function(t){t.length>0&&(e+=t[0].toUpperCase()+t.substring(1)+" ")})),e.substring(0,e.length-1)}return t}}]),m}(Bb),qP=jP;function ZP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var XP=function(t){u(a,t);var n,i=ZP(a);function a(t,e,n){var o;return s(this,a),f(l(o=i.call(this,t,e,n)),"otherSellersNotificationData",void 0),o}return r(a,[{key:"PostProcessingNotification",value:function(t,e){var n;if(null!==(n=this.otherSellersNotificationData)&&void 0!==n&&n.Success){var i=this.createAddedToCartButton();i&&this.flyoutData.common.shopping.appendChild(i)}}},{key:"RenderNotification",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.next=3,WP.getOtherSellerConfirmationData(this.pageHandlerModule,this.flyoutData);case 3:return this.otherSellersNotificationData=t.sent,this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(n=this.utilities.createElement("DIV",{id:"productAddedPopup"})).slot="header-content",(i=this.utilities.createElement("DIV",{className:"txtMedium"})).className="divNotificationContent",a="",a=null!==(e=this.otherSellersNotificationData)&&void 0!==e&&e.Success?this.utilities.replaceValueInKey("similarSellerNotificationTitle",this.flyoutData.strings.similarSellerNotificationTitle,"$"+this.otherSellersNotificationData.Savings):this.flyoutData.strings.similarSellerNotificationError,r=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},a),i.appendChild(r),n.appendChild(i),s=this.utilities.createNotificationModule(n,this.GetNotificationName(),this),l=new _(A.AddedToCartNotification),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User saw other seller added to cart notification",l,dn.CouponImpressionId),t.abrupt("return",Promise.resolve(s));case 18:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t=this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER;return Promise.resolve(t)}},{key:"GetNotificationName",value:function(){return Mt.SIMILARSELLERS}}]),a}(qP),JP=XP,QP=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .divSustainabilityWrapper {\n                display: flex;\n                flex-direction: row;\n                background: linear-gradient(271.14deg, #8DFFEB -21.94%, rgba(255, 230, 183, 0.49) 52.25%, #D9FDFF 104.12%);\n                height: 50px;\n                width: 100%;\n                margin-top: -19px;\n            }\n            .divSustainabilityIcon {\n                margin: 11px 3px 11px 12px;\n            }\n            .divSustainabilityLink {\n                margin-top: 5px;\n            }\n            #divSustainabilityTitle {\n                font-family: Segoe UI;\n                font-size: 14px;\n                line-height: 20px;\n                margin:11px 2px 9px 2px;\n            }\n\n            .divSustainabilityNotificationWrapper {\n                background: linear-gradient(125.41deg,#FAFEF2 0%, #F6FFF9 59.38%, #F3FEFD 100%);\n                display: flex;\n                flex-direction: row;\n                width: 100%;\n                height: 168px;\n                margin-top: -20px;\n            }\n            .divSustainabilityNotificationIcon {\n                margin:22px 16px;\n            }\n            .divSustainabilityNotificationTextSection {\n                display: flex;\n                flex-direction: column;\n                margin-top: 22px;\n                margin-right: 10px;\n            }\n            .divSustainabilityNotificationTitle {\n                font-family: Segoe UI;\n                font-size: 16px;\n                line-height: 19px;\n                font-weight: 700;\n                margin-bottom: 12px;\n            }\n            .divSustainabilityNotificationDescription {\n                margin-bottom: 12px;\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                color: #2F3132;\n                width: 194px;\n            }\n            .divSustainabilityNotificationLink {\n                height: 12px;\n                width: 60px;\n                position: relative;\n                left: 3px;\n            }\n            .divSustainabilityConfirmationWrapper {\n                background: linear-gradient(125.41deg,#FAFEF2 0%, #F6FFF9 59.38%, #F3FEFD 100%);\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                height: auto;\n                margin-top: -20px;\n            }\n            .divSustainabilityConfirmationIcon {\n                width: 90px;\n                height: 100px;\n                position: relative;\n                top: -39px;\n                left: 19px;\n                margin-right: 31px;\n            }\n            .divSustainabilityConfirmationTitle {\n                font-family: Segoe UI;\n                font-size: 24px;\n                line-height: 31px;\n                font-weight: 600;\n                margin: 12px 16px 14px;\n                text-align: right;\n            }\n            .divSustainabilityConfirmationBottomSection {\n                display: flex;\n                flex-direction: row;\n            }\n            #shareFB, #shareTwitter {\n                border: none;\n                background: none;\n                position: relative;\n                top: -5px;\n            }\n            .divSustainabilityConfirmationTextSection {\n                display: flex;\n                flex-direction: row;\n            }\n            .divSustainabilityConfirmationLink  {\n                height: 16px;\n                position: relative;\n            }\n            .divSustainabilityConfirmationDescription {\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                width: 219px;\n                text-align: right;\n                height: 66px;\n            }\n            .divSustainabilityDescription {\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                width: 206px;\n            }\n\n            #confirmationButtonLearnMore {\n                border: 1.5px solid #000000;\n                border-radius: 4px;\n                background: transparent;\n                color: black;\n                height: 36px;\n                width: 296px;\n                margin-left: 33px;\n                margin-bottom: 18px;\n            }\n            #confirmationButtonLearnMore:hover {\n                border-color: rgba(0, 0, 0, 0.39);\n            }\n            .divShareSection {\n                display: flex;\n                flex-direction: row;\n                margin-left: 50px;\n            }\n            @media screen and (-ms-high-contrast: active) {\n                .divSustainabilityWrapper, .divSustainabilityNotificationWrapper, .divSustainabilityConfirmationWrapper {\n                    background: linear-gradient(96.59deg, rgba(15, 107, 255, 0.3) -13.45%, rgba(13, 19, 77, 0.3) 100.1%), #4A4A4A;\n                }\n                #confirmationButtonLearnMore {\n                    border: 1.5px solid Text;\n                    color: Text;\n                }\n                .divSustainabilityNotificationDescription {\n                    color: rgba(255, 255, 255, 0.9);\n                }\n            }\n        }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        .divSustainabilityWrapper, .divSustainabilityNotificationWrapper, .divSustainabilityConfirmationWrapper {\n            background: linear-gradient(96.59deg, rgba(15, 107, 255, 0.3) -13.45%, rgba(13, 19, 77, 0.3) 100.1%), #4A4A4A;\n        }\n        #confirmationButtonLearnMore {\n            border: 1.5px solid #FFFFFF;\n            color: #FFFFFF;\n        }\n        .divSustainabilityNotificationDescription {\n            color: rgba(255, 255, 255, 0.9);\n        }\n        "}}]),t}();function tO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var eO=function(t){u(a,t);var n,i=tO(a);function a(t,e){var n;return s(this,a),f(l(n=i.call(this)),"assets",void 0),f(l(n),"flyoutData",void 0),f(l(n),"utilities",void 0),f(l(n),"pageHandlerModule",void 0),f(l(n),"logModule",void 0),n.flyoutData=t,n.utilities=e.viewModulesUtilities,n.pageHandlerModule=e.pageHandlerModule,n.logModule=e.logModule,n.assets=new QP,n}return r(a,[{key:"GetModuleName",value:function(){return Rt.SUSTAINABILITY}},{key:"ShouldRenderModule",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;t&&this.pageHandlerModule.TriggerExperiment(Be.sustainability);var e=this.flyoutData.experimentData.isExperimentActive(Be.sustainability)&&null!=t&&t.isDomainSustainabilitySupported;return Promise.resolve(e)}},{key:"populateMainHeader",value:function(){}},{key:"renderModule",value:(n=e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataStoreModule.SustainabilityData)){t.next=11;break}if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),(n=this.utilities.createElement("msft-edge-shopping-section")).id="sustainabilityDiv",!e){t.next=11;break}if(!e.shouldRenderSustainability){t.next=11;break}return i=this.renderWrapper(),n.appendChild(i),this.pageHandlerModule.RecordAsContentViewed(ss.SUSTAINABILITY_LANDING_FOOTER),t.abrupt("return",Promise.resolve(this.CreateModule(n,wt.SUSTAINABILITY,Rt.SUSTAINABILITY,_t.CONTEXTUAL,Ft.BLOCK)));case 11:return t.abrupt("return",Promise.resolve(null));case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"renderWrapper",value:function(){var t=this.utilities.createElement("div");t.className="divSustainabilityWrapper";var e=this.utilities.createElement("IMG"),n=new Image;n.addEventListener("load",(function(){e.src=n.src})),this.flyoutData.common.currentTheme===xt.Dark?n.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilitySmallDark.png":n.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilitySmall.png",e.className="divSustainabilityIcon";var i=this.renderTitle(),o=this.renderLinkToLeanMore();return o.setAttribute("aria-labelledby","divSustainabilityTitle"),t.appendChild(e),t.appendChild(i),t.appendChild(o),t}},{key:"renderTitle",value:function(){var t=this.utilities.createElement("div");return t.id="divSustainabilityTitle",t.textContent=this.flyoutData.strings.sustainabilityString,t}},{key:"renderLinkToLeanMore",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className="divSustainabilityLink",e.appearance="lightweight",e.href="#",e.textContent=this.flyoutData.strings.commonLearnMore,e.addEventListener("click",(function(){t.pageHandlerModule.NavigateToSustainabilityLearnMore(),t.pageHandlerModule.RecordAsUserAction(is.SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE)})),e}}]),a}(Bb),nO=eO;function iO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var oO,aO=function(t){u(n,t);var e=iO(n);function n(t,i){return s(this,n),e.call(this,t,i)}return r(n,[{key:"PostProcessingNotification",value:function(t,e){this.PostProcessing(Rt.SUSTAINABILITY,0,e)}},{key:"RenderNotification",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.ShouldRenderPDPNotification()?t=this.CreatePDPDiv():this.ShouldRenderConfirmationNotification()&&(t=this.CreateConfirmationDiv());var e=this.utilities.createNotificationModule(t,this.GetNotificationName(),this);return Promise.resolve(e)}},{key:"CreatePDPDiv",value:function(){var t=this,e=this.utilities.createElement("div");e.className="divSustainabilityNotificationWrapper";var n=this.utilities.createElement("IMG");this.flyoutData.common.currentTheme===xt.Dark?n.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImageDark.png":n.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImage.png",n.className="divSustainabilityNotificationIcon";var i=this.utilities.createElement("div");i.className="divSustainabilityNotificationTextSection";var o=this.utilities.createElement("div");o.className="divSustainabilityNotificationTitle",o.textContent=this.flyoutData.strings.sustainabilityString,o.setAttribute("aria-level","2"),o.setAttribute("role","heading");var a=this.utilities.createElement("div");a.className="divSustainabilityDescription";var r=this.utilities.createElement("span");r.className="divSustainabilityNotificationDescription";var s=this.flyoutData.strings.sustainabilityDescriptionLight.split("|"),l=this.utilities.createElement("span");l.textContent=s[0];var c=this.utilities.createElement("span",{style:"font-weight:700"});c.textContent=s[1],r.appendChild(l),r.appendChild(c);var u=this.utilities.createElement("fluent-anchor");u.className="divSustainabilityNotificationLink",u.appearance="lightweight",u.href="#",u.textContent=this.flyoutData.strings.commonLearnMore,u.addEventListener("click",(function(){t.pageHandlerModule.NavigateToSustainabilityLearnMore();var e=new Yr(E.SustainabilityLearnMore);t.logModule.LogInfoEvent(S.ButtonClick,"User navigated to explore bing sustainability learn more site",e,dn.CouponImpressionId),t.pageHandlerModule.RecordAsUserAction(is.SUSTAINABILITY_LANDING_FULL_LEARN_MORE)})),a.appendChild(r),a.appendChild(u),i.appendChild(o),i.appendChild(a),e.appendChild(n),e.appendChild(i);var d=new _(A.SustainabilityPDP),h=this.flyoutData.common.domain;return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User viewed sustainability purchase confirmation notification domain:"+h,d,dn.CouponImpressionId),this.pageHandlerModule.RecordAsContentViewed(ss.SUSTAINABILITY_LANDING_FULL),e}},{key:"CreateConfirmationDiv",value:function(){var t=this,e=this.utilities.createElement("div");e.className="divSustainabilityConfirmationWrapper",e.addEventListener("mouseover",i),e.addEventListener("focus",i);var n=this.logModule;function i(){var t=new Yr(E.SustainabilityConfirmationHover);n.LogInfoEvent(S.ButtonClick,"User interacts on the sustainability confirmation notification flyout domain:"+d,t,dn.CouponImpressionId),e.removeEventListener("mouseover",i),e.removeEventListener("focus",i)}var o=this.utilities.createElement("div");o.className="divSustainabilityConfirmationTitle",o.textContent=this.flyoutData.strings.sustainabilityConfirmationTitle;var a=this.utilities.createElement("IMG");this.flyoutData.common.currentTheme===xt.Dark?a.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImageDark.png":a.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImage.png",a.className="divSustainabilityConfirmationIcon";var r=this.utilities.createElement("div");r.className="divSustainabilityConfirmationTextSection";var s=this.utilities.createElement("div");s.className="divSustainabilityConfirmationDescription";var l=this.utilities.createElement("span");l.textContent=this.flyoutData.strings.sustainabilityDescription;var c=this.utilities.createElement("fluent-anchor");c.className="divSustainabilityConfirmationLink",c.appearance="lightweight",c.href="#",c.textContent=this.flyoutData.strings.commonLearnMore,c.addEventListener("click",(function(){var e=new Yr(E.SustainabilityLearnMore);t.logModule.LogInfoEvent(S.ButtonClick,"User navigated to explore bing sustainability learn more sites",e,dn.CouponImpressionId),t.pageHandlerModule.RecordAsUserAction(is.SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE),t.pageHandlerModule.NavigateToSustainabilityLearnMore()})),s.appendChild(l),s.appendChild(c),r.appendChild(a),r.appendChild(s),e.appendChild(o),e.appendChild(r);var u=new _(A.SustainabilityConfirmation),d=this.flyoutData.common.domain;return this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User viewed sustainability purchase confirmation notification domain:"+d,u,dn.CouponImpressionId),this.pageHandlerModule.RecordAsContentViewed(ss.SUSTAINABILITY_PURCHASE_CONFIRMATION),e}},{key:"ShouldRenderNotification",value:function(){return this.ShouldRenderPDPNotification()||this.ShouldRenderConfirmationNotification()?Promise.resolve(!0):Promise.resolve(!1)}},{key:"ShouldRenderPDPNotification",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;return!(!t||!t.shouldRenderSustainability)&&(t.shouldRenderSustainability&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SUSTAINABILITY_LANDING)}},{key:"ShouldRenderConfirmationNotification",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;return!(!t||!t.shouldRenderSustainability)&&(t.shouldRenderSustainability&&this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SUSTAINABILITY_PURCHASE)}},{key:"GetNotificationName",value:function(){return Mt.SUSTAINABILITY}}]),n}(nO),rO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n         msft-package-tracker-card::part(base-card) {\n            --card-width: 325px;\n        }\n\n        msft-package-tracker-card {\n            margin: 0 16px;\n        }\n\n        .my-main-image {\n            max-width: 140px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            msft-package-tracker-card::part(base-card) {\n                background-color: transparent;\n            }\n        }\n            "}},{key:"getCloseButton",value:function(){return mt.getTrustedHTML(oO||(oO=j(['<svg\n        width="16"\n        height="16"\n        aria-hidden="true"\n        viewBox="0 0 16 16"\n        xmlns="http://www.w3.org/2000/svg"\n        >\n        <path\n        d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z"\n        />\n        </svg>'])))}},{key:"getConfirmationNotificationStyles",value:function(){return"\n            #trackingConfirmationButtonContainer {\n                text-align: center;\n                height: auto;\n            }\n            .trackingConfirmationButtonContainerEU {\n                display: grid;\n                grid-template-columns: calc(50% - 22px) calc(50% - 22px);\n                justify-content: center;\n                column-gap: 8px;\n            }\n            .trackingConfirmationPopupContent {\n                display: flex;\n                flex-direction: column;\n                row-gap: 4px;\n                text-align: center;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .trackingOptInButtonEU {\n                margin-bottom: 0px!important;\n                min-height: 48px;\n                align-items: center;\n            }\n            #trackingOptOutButton {\n                font-size: 12px;\n                text-decoration: none;\n            }\n\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                margin-bottom: 10px;\n            }\n            #euOptOutButton::part(control) {\n                white-space: inherit;\n            }\n            #euOptOutButton {\n                height: auto;\n                min-height: 48px;\n            }\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer .btnPrimary,\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer .btnPrimary::part(control) {\n                height: auto;\n                min-height: 32px;\n                max-width: 150px;\n                white-space: normal;\n            }\n            msft-package-tracker-card::part(base-card) {\n                box-shadow: none;\n                display: flex;\n                background-color: transparent;\n                pointer-events: none;\n                cursor: none;\n                padding: 0px;\n            }\n        "}}]),t}();function sO(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function lO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var uO=function(t){u(a,t);var n,i=cO(a);function a(t,e,n,o){var r;return s(this,a),f(l(r=i.call(this)),"assets",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"flyoutData",void 0),f(l(r),"utilities",void 0),f(l(r),"stateManagement",void 0),f(l(r),"logModule",void 0),f(l(r),"commonAssets",void 0),f(l(r),"commonUtils",void 0),f(l(r),"orderStatusTrackingSection",void 0),r.pageHandlerModule=e.pageHandlerModule,r.flyoutData=t,r.utilities=e.viewModulesUtilities,r.assets=new rO,r.stateManagement=n,r.logModule=e.logModule,r.commonAssets=o,r.commonUtils=e,r}return r(a,[{key:"GetModuleName",value:function(){return Rt.ORDERSTATUSTRACKING}},{key:"PostProcessing",value:function(t,e,n){this.createButtonContainer(this.orderStatusTrackingSection)}},{key:"ShouldRenderModule",value:function(){var t,e,n,i,o,a,r,s,l,c,u=null!==(t=null===(e=this.flyoutData)||void 0===e||null===(n=e.dataStoreModule)||void 0===n||null===(i=n.OrderTrackingData)||void 0===i?void 0:i.shouldShowPackageTrackingNotification)&&void 0!==t&&t;if(!1===(null===(o=this.flyoutData)||void 0===o||null===(a=o.dataStoreModule)||void 0===a||null===(r=a.OrderTrackingData)||void 0===r?void 0:r.packageTrackingUserConsented)&&!0===u)return Promise.resolve(!0);var d=!1,h=null===(s=this.flyoutData)||void 0===s||null===(l=s.dataStoreModule)||void 0===l||null===(c=l.OrderTrackingData)||void 0===c?void 0:c.orders;return h&&h.length>0&&(d=!0),Promise.resolve(d)}},{key:"renderModule",value:(n=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=null===(e=this.flyoutData)||void 0===e||null===(n=e.dataStoreModule)||void 0===n||null===(i=n.OrderTrackingData)||void 0===i?void 0:i.orders,p=null!==(a=null===(r=this.flyoutData)||void 0===r||null===(s=r.dataStoreModule)||void 0===s||null===(l=s.OrderTrackingData)||void 0===l?void 0:l.shouldShowPackageTrackingNotification)&&void 0!==a&&a,!1!==(null===(c=this.flyoutData)||void 0===c||null===(u=c.dataStoreModule)||void 0===u||null===(d=u.OrderTrackingData)||void 0===d?void 0:d.packageTrackingUserConsented)||!0!==p){t.next=15;break}return this.orderStatusTrackingSection=this.utilities.createElement("msft-edge-shopping-section"),this.orderStatusTrackingSection.id="orderStatusTrackingSection",this.orderStatusTrackingSection.accordion=!0,this.orderStatusTrackingSection.expanded=!1,this.orderStatusTrackingSection.title=this.flyoutData.strings.packageTrackingDeactivatedTitle,f=new SO(this.flyoutData,this.commonUtils,this.stateManagement,this.commonAssets),t.next=11,f.RenderNotification();case 11:if(!(g=t.sent)||!g.element){t.next=15;break}return this.orderStatusTrackingSection.appendChild(g.element),t.abrupt("return",Promise.resolve(this.CreateModule(this.orderStatusTrackingSection,wt.ORDERSTATUSTRACKING,Rt.ORDERSTATUSTRACKING,_t.HOME,Ft.BLOCK)));case 15:if(!h){t.next=30;break}return m=function(t){var e=bt.ORDERTRACKING;return t&&b.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},v=function t(){if(y){var e=y.shadowRoot;if(e){var n=e.querySelector("fluent-accordion-item");n&&(n.classList.contains("expanded")||x?E||(S.RecordAsUserAction(is.PACKAGE_TRACKING_COLLAPSE_SECTION),E=!0):(S.RecordAsUserAction(is.PACKAGE_TRACKING_EXPAND_SECTION),x=!0))}}x&&E&&y&&y.removeEventListener("click",t)},this.flyoutData.common.isPane?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(y=this.utilities.createElement("msft-edge-shopping-section")).id="orderStatusTrackingSection",C=this.flyoutData.strings.orderTrackingTitle,this.populateOrdersList(y,!1,!1),b=this.flyoutData,this.utilities.createCommonListStructure(y,C,h,this.GetModuleName(),m,this.populateOrdersList.bind(this)),y.addEventListener("click",v),S=this.pageHandlerModule,x=!1,E=!1,t.abrupt("return",Promise.resolve(this.CreateModule(y,wt.ORDERSTATUSTRACKING,Rt.ORDERSTATUSTRACKING,_t.HOME,Ft.BLOCK)));case 30:return t.abrupt("return",Promise.resolve(null));case 31:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"createButtonContainer",value:function(t){if(t){var e,n,i,o=this.utilities.createElement("DIV",{id:"trackingConfirmationButtonContainer"}),a=this.utilities.createElement("DIV",{id:"trackingOptInButtonContainer"});this.isEUMarket()||(a.style.padding="0px 16px",a.style.display="flex",a.style.justifyContent="center",this.flyoutData.common.openedWith!==Tt.Auto&&(a.style.marginTop="10px"));var r=this.createOptInButton(t);if(a.appendChild(r),o.appendChild(a),null!==(e=this.flyoutData)&&void 0!==e&&null!==(n=e.dataStoreModule)&&void 0!==n&&null!==(i=n.CashBackData)&&void 0!==i&&i.isConfirmationPage){this.isEUMarket()&&o.classList.add("trackingConfirmationButtonContainerEU");var s=this.utilities.createElement("DIV",{id:"trackingOptOutButtonContainer"});this.flyoutData.common.openedWith===Tt.Auto?a.style.marginBottom="0px":a.style.marginBottom="10px";var l=this.createOptOutButton(t);s.appendChild(l),o.appendChild(s)}t.appendChild(o)}}},{key:"populateOrdersList",value:function(t,e,n){var i,o,a,r=null===(i=this.flyoutData)||void 0===i||null===(o=i.dataStoreModule)||void 0===o||null===(a=o.OrderTrackingData)||void 0===a?void 0:a.orders;if(r){var s=0;r.length>0&&(s=r.length);var l=0;e?l=bt.ORDERTRACKING:s>bt.ORDERTRACKING&&(s=bt.ORDERTRACKING);for(var c=l;c<s;c++){var u=r[c],d=this.createOrderTile(u,t,r.length);d&&t.appendChild(d),d&&c===l&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d.focus()}}}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.isPane?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping;if(t){var e=t.querySelector("#orderStatusTrackingSection");e&&(e.style.marginTop="0px",e.slot="header-content")}}},{key:"getProgressBarPercentage",value:function(t){if(Se(t))return"0";switch(t.toUpperCase()){case"ORDERED":return"15";case"SHIPPED":return"55";case"DELIVERED":case"RETURNED":case"CANCELED":return"100";default:return"0"}}},{key:"createOrderTile",value:function(t,e,n){var i,o,a=this,r=e.shadowRoot;if(r){var s=r.querySelector("fluent-accordion-item");if(s&&!s.classList.contains("expanded")){this.pageHandlerModule.RecordPackageTrackingAction(os.CARD_VIEWED,t.trackerKey);var l=new _(A.PackageTrackingCardViewed);this.logModule.LogInfoEvent(S.ButtonClick,"Userviewed the package tracking card with key ".concat(t.trackerKey),l)}}var c="";2===t.productsInOrder.length?c=t.productsInOrder.length-1+" more item":t.productsInOrder.length>2&&(c=t.productsInOrder.length-1+" more items");var u=document.createElement("msft-package-tracker-card");u.mainTitle=t.orderSummary,u.otherItemsTitle=c,u.progressPercentage=this.getProgressBarPercentage(t.orderStatus),u.subTitle=null!==(i=null==t||null===(o=t.productsInOrder[0])||void 0===o?void 0:o.productName)&&void 0!==i?i:"",u.heading=t.domain,u.link=t.actionURL;var d,h="",p=sO(t.productsInOrder);try{for(p.s();!(d=p.n()).done;){h+=d.value.productName+" "}}catch(t){p.e(t)}finally{p.f()}var f=this.utilities.replaceValueInKey("dealsTitle",this.flyoutData.strings.productDetailsOrderTracking,t.domain,h);u.setAttribute("aria-describedby",f);var g=this.utilities.createElement("IMG");null!=t&&t.domain&&(g.classList.add("my-icon-image"),g.slot="heading-icon",this.utilities.addFavIconSrc(g,u,t.domain));var m=this.utilities.createElement("fluent-button");if(m.classList.add("more-actions"),m.slot="more-actions",m.setAttribute("aria-label",this.flyoutData.strings.deteTrackerText),m.title=this.flyoutData.strings.deteTrackerText,m.innerHTML=this.assets.getCloseButton(),m)try{m.addEventListener("click",(function(i){a.pageHandlerModule.DeletePackageTrackerByGuid(t.trackerKey),a.pageHandlerModule.RecordAsUserAction(is.DELETE_TRACKER),a.pageHandlerModule.RecordPackageTrackingAction(os.CARD_DELETED,t.trackerKey);var o=new Yr(E.DeletePackageTrackerByGuid);a.logModule.LogInfoEvent(S.ButtonClick,"User deleted package tracking order",o);var r=window.sessionStorage.getItem("totalTrackersDeleted");if(r&&Number(r)){u.remove();var s=Number(r)+1;if(window.sessionStorage.setItem("totalTrackersDeleted",s.toString()),s>=n){var l=a.getEmptyModule();e.appendChild(l)}}else u.remove(),window.sessionStorage.setItem("totalTrackersDeleted","1");a.handleFocus(e),i.stopPropagation()}))}catch(t){}var v=this.utilities.createElement("IMG");t.productsInOrder&&t.productsInOrder.length>0&&""!==t.productsInOrder[0].productImageUrl&&(v.src=this.flyoutData.common.urlPrefix+t.productsInOrder[0].productImageUrl,v.classList.add("my-main-image"),v.slot="main-image",v.setAttribute("aria-hidden","true"));var y=this.utilities.createElement("IMG");return t.productsInOrder.length>1&&t.productsInOrder&&""!==t.productsInOrder[1].productImageUrl&&(y.src=this.flyoutData.common.urlPrefix+t.productsInOrder[1].productImageUrl,y.classList.add("my-other-image"),y.slot="other-image",y.setAttribute("aria-hidden","true")),u.appendChild(m),u.appendChild(v),t.productsInOrder.length>1&&u.appendChild(y),this.managePCLinkEvents(u,t.actionURL,t.trackerKey),u}},{key:"managePCLinkEvents",value:function(t,e,n){var i=this;t.addEventListener("click",(function(){i.flyoutData.common.currentDevice===St.Desktop&&i.navigateToOrder(e,n,cl.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToOrder(e,n,cl.NEW_FOREGROUND_TAB)}))}},{key:"navigateToOrder",value:function(t,e,n){var i=new Yr(E.PackageTrackingOrderClick);this.pageHandlerModule.RecordPackageTrackingAction(os.CARD_CLICKED,e),this.logModule.LogInfoEvent(S.ButtonClick,"Clicked on package tracking order",i),this.pageHandlerModule.NavigateToOrderWithDisposition(t,n)}},{key:"getEmptyModule",value:function(){var t=this.utilities.createElement("DIV",{className:"txtSmall",style:"line-height: 20px; margin-top: 10px; padding-left: 12px;"});return t.textContent=this.flyoutData.strings.checkBackForOrders,t}},{key:"handleFocus",value:function(t){var e=t.querySelectorAll(gl);if(e&&e.length>0)e[0].focus();else{var n=this.flyoutData.common.shopping.querySelectorAll(gl);n&&n.length>0&&n[0].focus()}}},{key:"isEUMarket",value:function(){var t,e,n;return Dl.GetMarket(null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.market,null===(e=this.flyoutData.dataStoreModule.ApiData)||void 0===e||null===(n=e.retailerData)||void 0===n?void 0:n.exclusiveMarket)===Wt.GB}},{key:"changeButtonColorScheme",value:function(t){var e=this.flyoutData.common.currentTheme===xt.Dark?"#02d9c8":"#008076";t.style.color=e,t.style.border="1px solid ".concat(e),t.style.background=this.flyoutData.common.currentTheme===xt.Dark?"#3b3b3b":"#FFFFFF"}},{key:"createOptInButton",value:function(t){var e=this,n=this.utilities.createPrimaryButton();return n.id="trackingOptInButton",this.utilities.shouldRenderSmallNotification()?n.textContent=this.flyoutData.strings.packageTrackingNewOptInButtonText:n.textContent=this.flyoutData.strings.packageTrackingOptInButtonText,n.setAttribute("aria-live","assertive"),this.isEUMarket()&&(this.changeButtonColorScheme(n),this.utilities.shouldRenderSmallNotification()&&(n.style.fontSize="14px",n.style.lineHeight="20px"),n.classList.add("trackingOptInButtonEU")),n.addEventListener("click",(function(){try{var n,i,o=new Yr(E.PackageTrackingOptIn),a=null!==(n=e.flyoutData)&&void 0!==n&&null!==(i=n.dataStoreModule.CashBackData)&&void 0!==i&&i.isConfirmationPage?"User opted in for package tracking on confirmation page":"User opted in for package tracking on flyout";e.logModule.LogInfoEvent(S.ButtonClick,a,o),e.pageHandlerModule.SetPackageTrackingUserConsent(!0),e.pageHandlerModule.RecordAsUserAction(is.PACKAGE_TRACKING_OPT_IN);var r=e.utilities.createElement("DIV",{style:"margin-right: 5px;"});r.innerHTML=e.commonAssets.getGreenCheck(),r.slot="start",r.setAttribute("aria-hidden","true"),e.showTrackingOptInOptOutAcknowledgement(t,r,e.flyoutData.strings.packageTrackingActivatedTitle,e.flyoutData.strings.packageTrackingOptInAcknowledgement)}catch(n){var s=new _(A.OnErrorInvoked);e.logModule.LogErrorEvent(S.ButtonClick,"Package tracking opt in error: ".concat(null==n?void 0:n.message),s),e.showTrackingOptInOptOutAcknowledgement(t,null,e.flyoutData.strings.packageTrackingDeactivatedTitle,e.flyoutData.strings.packageTrackingOptInAcknowledgementFailure)}finally{e.flyoutData.common.isPane||setTimeout((function(){e.pageHandlerModule.DismissPopup()}),4500)}})),n}},{key:"createOptOutButton",value:function(t){var e,n=this;return this.isEUMarket()?((e=this.utilities.createPrimaryButton()).id="euOptOutButton",e.setAttribute("aria-live","assertive"),this.utilities.shouldRenderSmallNotification()&&(e.style.fontSize="14px",e.style.lineHeight="20px"),this.changeButtonColorScheme(e)):(e=this.utilities.createElement("fluent-anchor",{id:"trackingOptOutButton"}),this.isEUMarket()||(e.style.marginTop="8px"),e.setAttribute("href","#"),e.setAttribute("appearance","hypertext"),e.setAttribute("role","button"),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-label",this.flyoutData.strings.packageTrackingOptOutButtonText)),e.textContent=this.flyoutData.strings.packageTrackingOptOutButtonText,e.addEventListener("click",(function(){try{var e,i,o=new Yr(E.PackageTrackingOptOut),a=null!==(e=n.flyoutData)&&void 0!==e&&null!==(i=e.dataStoreModule.CashBackData)&&void 0!==i&&i.isConfirmationPage?"User opted out of package tracking on confirmation page":"User opted out of package tracking on flyout";n.logModule.LogInfoEvent(S.ButtonClick,a,o),n.pageHandlerModule.SetPackageTrackingUserConsent(!1),n.pageHandlerModule.RecordAsUserAction(is.PACKAGE_TRACKING_OPT_OUT);var r=n.utilities.createElement("DIV",{style:"margin-right: 5px;"});r.innerHTML=n.commonAssets.getGreenCheck(),r.slot="start",r.setAttribute("aria-hidden","true"),n.showTrackingOptInOptOutAcknowledgement(t,r,"",n.flyoutData.strings.packageTrackingOptOutAcknowledgement)}catch(e){var s=new _(A.OnErrorInvoked);n.logModule.LogErrorEvent(S.ButtonClick,"Package tracking opt out error: ".concat(null==e?void 0:e.message),s),n.showTrackingOptInOptOutAcknowledgement(t,null,"",n.flyoutData.strings.packageTrackingOptOutAcknowledgementFailure)}finally{setTimeout((function(){n.pageHandlerModule.DismissPopup()}),4500)}})),e}},{key:"showTrackingOptInOptOutAcknowledgement",value:function(t,e,n,i){if(t){for(;t.firstElementChild;)t.firstElementChild.remove();Se(null==t?void 0:t.title)||Se(n)||(t.title=n);var o=this.utilities.createElement("DIV",{className:"txtMedium",id:"packageTrackingAcknowledgementContainer",style:"display: flex; justify-content: center; padding: 12px 0;"});e&&o.appendChild(e);var a=this.utilities.createElement("DIV");a.textContent=i,o.appendChild(a),t.append(o)}return t}}]),a}(Bb),dO=uO;function hO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var pO,fO,gO,mO,vO,yO,CO,bO,SO=function(t){u(n,t);var e=hO(n);function n(t,i,o,a){return s(this,n),e.call(this,t,i,o,a)}return r(n,[{key:"PostProcessingNotification",value:function(t,e){e.classList.add("headerMargin"),e.slot="header-content",this.createButtonContainer(this.flyoutData.common.shopping)}},{key:"GetNotificationName",value:function(){return Mt.TRACKING_CONFIRMATION}},{key:"ShouldRenderNotification",value:function(){var t,e,n,i,o,a,r,s,l;if(!0===(null===(t=this.flyoutData)||void 0===t||null===(e=t.dataStoreModule)||void 0===e||null===(n=e.OrderTrackingData)||void 0===n?void 0:n.packageTrackingUserConsented))return Promise.resolve(!1);var c=!0===(null===(i=this.flyoutData)||void 0===i||null===(o=i.dataStoreModule)||void 0===o||null===(a=o.CashBackData)||void 0===a?void 0:a.isConfirmationPage)&&!0===(null===(r=this.flyoutData)||void 0===r||null===(s=r.dataStoreModule)||void 0===s||null===(l=s.OrderTrackingData)||void 0===l?void 0:l.shouldShowPackageTrackingNotification);return Promise.resolve(c)}},{key:"RenderNotification",value:function(){var t,e,n;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getConfirmationNotificationStyles());var i=this.utilities.createElement("DIV",{id:"trackingConfirmationPopup"}),o=this.createPopupContent();if(i.appendChild(o),null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule)&&void 0!==e&&null!==(n=e.CashBackData)&&void 0!==n&&n.isConfirmationPage){var a=this.utilities.createElement("DIV",{style:"display: flex;\n                                                                            align-items: center; justify-content: center;\n                                                                            padding-top: 12px;"}),r=this.utilities.createElement("msft-package-tracker-card");r.mainTitle=this.flyoutData.strings.packageTrackingOrderPlaced,r.progressPercentage="15";var s=this.createMainItemImage();r.appendChild(s),a.appendChild(r),i.appendChild(a)}var l=this.utilities.createNotificationModule(i,this.GetNotificationName(),this);return Promise.resolve(l)}},{key:"createPopupContent",value:function(){var t,e,n=this.utilities.createElement("DIV",{className:"txtMedium"});if(n.className="trackingConfirmationPopupContent",n.style.width="100%",n.style.display="flex",n.style.justifyContent="center",null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule.CashBackData)&&void 0!==e&&e.isConfirmationPage){var i=this.flyoutData.strings.packageTrackingNotificationTitle,o="margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;";this.utilities.shouldRenderSmallNotification()&&(i=this.flyoutData.strings.packageTrackingNewNotificationTitle,o="margin: 0px; font-weight: 600; font-size: 20px; line-height: 26px; width: calc(100% - 20px);");var a=this.utilities.createElement("H2",{style:o},i);n.appendChild(a)}if(!this.utilities.shouldRenderSmallNotification()){var r=this.flyoutData.strings.packageTrackingNotificationDescription,s="line-height: 20px; width: 80%;\n                                     margin: 0px; color: var(--neutral-foreground-hint);\n                                     text-align: center;";this.utilities.shouldRenderSmallNotification()&&(s="line-height: 16px; font-size: 12px; width: 70%; margin: 0px; color: var(--neutral-foreground-hint)");var l=this.utilities.createElement("P",{className:"txtSmall",style:s},r);n.appendChild(l)}return n}},{key:"createMainItemImage",value:function(){var t=this.utilities.createElement("IMG",{style:"width: 40px; height: 40px; float: left;"});return t.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.common.domain,".png"),t.setAttribute("aria-hidden","true"),t.addEventListener("error",(function(){t.style.visibility="hidden"})),t.classList.add("my-main-image"),t.slot="main-image",t}}]),n}(dO),xO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #divPriceDrop {\n            display: flex;\n            flex-direction: column;\n        }\n        .vppdn_image {\n            width: 100px;\n            height: 100px;\n            border-radius: 8px;\n        }\n        .vppdn_title {\n            font-size: 12px;\n            line-height: 20px;\n            font-weight: 600;\n        }\n        .vppdn_saveMoney {\n            font-size: 32px;\n            line-height: 40px;\n            font-weight: 600;\n            margin-bottom: 8px;\n            white-space: nowrap;\n        }\n        #vppdn_shopButton {\n            height: 40px;\n            margin-bottom: 8px;\n            place-self: center;\n            width: calc(100% - 32px);\n        }\n        #vppdn_shopButton::part(control) {\n            border-width: 2px;\n        }\n        .infoicon {\n            top: 1px !important;\n        }\n        .vppdn_link {\n            font-size: 12px;\n            line-height: 20px;\n            text-align: center;\n            color: #717171;\n            text-decoration: none;\n        }\n        .toolTipsOverlay {\n            display: none;\n        }\n        .toolTipsOverlayShow {\n            border: 1px solid rgba(0, 0, 0, 0.08);\n            box-sizing: border-box;\n            border-radius: 4px;\n            display: flex;\n            flex-direction: column;\n            position: absolute;\n            top: -22px;\n            right: 12px;\n            font-size: 10px;\n            background: #FFFFFF;\n            line-height: 14px;\n            width: 336px;\n            height: 228px;\n            text-align: center;\n            color: rgba(0, 0, 0, 0.6);\n            padding: 7px;\n            z-index:1;\n        }\n        ::part(content) {\n            overflow: unset !important;\n        }\n        .overlayTitle {\n            font-size: 14px;\n            line-height: 20px;\n            color: #000000;\n            font-weight: 500;\n            margin-bottom: 8px;\n        }\n        .overlayDesc {\n            font-size: 12px;\n            line-height: 16px;\n            margin-bottom: 12px;\n        }\n        .gotIt {\n            height: 35px;\n        }\n        .gotIt::part(control) {\n            border-width: 2px;\n        }\n        .learnMore {\n            border:none;\n            background: none;\n            font-size: 14px;\n            line-height: 20px;\n            position: relative;\n            top: 4px;\n        }\n    "}},{key:"getDarkModeStyles",value:function(){return"\n        .vppdn_link {\n            color: #FFFFFF;\n        }\n        "}}]),t}(),EO=function(){function t(e,n,i){s(this,t),f(this,"logModule",void 0),f(this,"utilities",void 0),f(this,"viewedProductPriceDropAssets",void 0),f(this,"pageHandlerModule",void 0),f(this,"flyoutData",void 0),f(this,"commonAssets",void 0),f(this,"viewedProductPriceDropNotificationID","divPriceDrop"),this.utilities=n.viewModulesUtilities,this.viewedProductPriceDropAssets=new xO,this.pageHandlerModule=n.pageHandlerModule,this.flyoutData=e,this.commonAssets=i,this.logModule=n.logModule}return r(t,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:function(){var t=this;if(!this.utilities.shouldRenderSmallNotification()){var e=function t(){var e=new Yr(E.PriceDropProductPageHover);o.LogInfoEvent(S.ButtonClick,"User interacts on the price drop notification flyout",e,dn.CouponImpressionId),i.removeEventListener("mouseover",t),i.removeEventListener("focus",t)},n=document.querySelector("#divContentWrapper"),i=this.utilities.createElement("DIV");i.id=this.viewedProductPriceDropNotificationID,i.addEventListener("mouseover",e),i.addEventListener("focus",e);var o=this.logModule;this.utilities.applyStyles(i,this.viewedProductPriceDropAssets.getStyles(),void 0,this.viewedProductPriceDropAssets.getDarkModeStyles());var a=this.flyoutData.dataStoreModule.ViewedProductListData;if(a&&a.productShowItem){var r=a.productShowItem,s=r.currencySymbol||"$",l="".concat(s).concat(this.toFixedSafe(r.currentPrice,2)),c="".concat(s).concat(this.toFixedSafe(r.olderPrice,2)),u="".concat(s).concat(this.toFixedSafe(r.olderPrice-r.currentPrice,2)),d=this.utilities.createElement("DIV",{style:"display: grid; place-self: center; grid-template-columns: 100px auto;\n                            column-gap: 16px;"}),h=this.utilities.createElement("IMG");h.className="vppdn_image",r.imageUrl&&""!==r.imageUrl&&(r.imageUrl.startsWith("http")||r.imageUrl.startsWith("data:image")||(r.imageUrl="https://"+r.imageUrl),h.src=r.imageUrl,r.title&&h.setAttribute("aria-label",r.title));var p=this.utilities.createElement("DIV",{className:"vppdn_info",style:"display: flex; flex-direction: column; width: 100%;"}),f=this.utilities.createElement("DIV",{className:"vppdn_title"});f.setAttribute("aria-level","2"),f.textContent=this.flyoutData.strings.prodHPriceDropTitle;var g=this.utilities.createElement("DIV",{className:"txtGradient vppdn_saveMoney"});g.textContent=this.utilities.replaceValueInKey("commonSave",this.flyoutData.strings.commonSave,u);var m=this.utilities.createElement("DIV",{style:"\n                            display: flex;\n                            align-items: baseline;\n                        "}),v=this.utilities.createElement("S",{style:"\n                            margin-right: 5px;\n                            color: ".concat(this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#757575",";\n                            font-size: 14px;\n                        ")},c),y=this.utilities.createElement("SPAN",{style:"\n                            position: absolute;\n                            clip: rect(0 0 0 0);\n                        "},this.flyoutData.strings.phOldPrice);y.id="oldPriceClippedText",v.setAttribute("aria-labelledby","oldPriceClippedText"),v.appendChild(y);var C=this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#444444",b=this.utilities.createElement("DIV",{style:"color: ".concat(C,";\n                                font-size: 18px;\n                                line-height: 20px;\n                                font-weight: 600;\n                                margin-bottom: 6px;\n                                margin-right: 8px;")},l),x=this.utilities.createElement("SPAN",{style:"\n                            position: absolute;\n                            clip: rect(0 0 0 0);\n                        "},this.flyoutData.strings.phNewPrice);x.id="newPriceClippedText",b.setAttribute("aria-labelledby","newPriceClippedText"),b.appendChild(x),m.appendChild(b),m.appendChild(v),p.appendChild(f),p.appendChild(g),p.appendChild(m),d.appendChild(h),d.appendChild(p);var T=this.renderShopButton(r.domain,r.productUrl);T.style.placeSelf="center",T.slot="actions";var D=this.utilities.createElement("a");D.setAttribute("href","#"),D.className="vppdn_link",D.textContent=this.flyoutData.strings.prodHPriceDropDonotRemindMe,D.addEventListener("click",(function(){r.productUrl.startsWith("http")?t.pageHandlerModule.DeletePwiloEntry(r.productUrl):(t.pageHandlerModule.DeletePwiloEntry("https://"+r.productUrl),t.pageHandlerModule.DeletePwiloEntry("http://"+r.productUrl)),t.pageHandlerModule.RecordAsUserAction(is.PWILO_NOTIFICATION_PRICE_DROP_DELETE),t.pageHandlerModule.DismissPopup()}));var k=this.utilities.createElement("fluent-button",{style:"position: relative; display: inline; width:10px;bottom: 6px; margin-left: 3px;"});k.appearance="stealth",k.setAttribute("aria-label",this.flyoutData.strings.reminderInfoButtonName);var I=this.utilities.createElement("DIV");I.className="infoicon",I.innerHTML=this.commonAssets.getInfoIcon(),I.setAttribute("aria-hidden","true");var w=this.utilities.createElement("DIV");w.className="toolTipsOverlay";var P=this.utilities.createElement("DIV");P.setAttribute("aria-level","2"),P.className="overlayTitle",P.textContent=this.flyoutData.strings.notificationPrivacyTitle;var O=this.utilities.createElement("DIV");O.className="overlayDesc",O.textContent=this.flyoutData.strings.notificationPrivacyDesc;var R=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row; justify-content: center; column-gap: 16px;"});R.className="buttonGroup";var M=this.utilities.createSecondaryButton();M.style.width="auto",M.classList.add("gotIt"),M.textContent=this.flyoutData.strings.commonGotIt,M.addEventListener("click",(function(t){w.classList.toggle("toolTipsOverlayShow"),!w.classList.contains("toolTipsOverlayShow")&&(i.style.display="flex",T.focus()),un.queueUpdate((function(){parent.postMessage({height:n.offsetHeight,type:"resize_iframe",width:n.offsetWidth},"edge://shopping")}))}));var N=this.utilities.createElement("fluent-button");N.className="learnMore",N.textContent=this.flyoutData.strings.commonLearnMore,N.addEventListener("click",(function(){t.pageHandlerModule.NavigateToShoppingLearnMore()})),R.appendChild(M),R.appendChild(N),w.appendChild(P),w.appendChild(O),w.appendChild(R),k.addEventListener("click",(function(){t.toggleTooltip(w,k,i,M,n)})),k.appendChild(I);var L=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; justify-content: center;"});L.appendChild(d),L.appendChild(T);var F=this.utilities.createElement("DIV",{style:"display:flex; flex-direction: row; place-self: center;"});this.flyoutData.experimentData.isExperimentActive(Be.implicitPriceTrackingFootet)||(F.appendChild(D),F.appendChild(k),this.flyoutData.common.shopping.classList.add("noSections")),i.appendChild(L),this.flyoutData.common.shopping.appendChild(w),i.appendChild(F),this.pageHandlerModule.OnOpenNotification(r.productUrl,r.currentPrice.toString());var H=new _(A.ViewedProductPriceDrop,void 0,void 0,this.flyoutData.common.lastCommittedURL,r.domain);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"User viewed product price drop notification",H,dn.CouponImpressionId)}var B=this.utilities.createNotificationModule(i,this.GetNotificationName(),this);return Promise.resolve(B)}var U=this.flyoutData.dataStoreModule.ViewedProductListData;if(U&&U.productShowItem){var V=U.productShowItem,G=this.utilities.createElement("msft-notification-header");G.slot="header-content";var W=V.currencySymbol||"$",$="".concat(W).concat(this.utilities.formatPrice(V.currentPrice)),z="".concat(W).concat(this.utilities.formatPrice(V.olderPrice)),K="".concat(W).concat(this.utilities.formatPrice(V.olderPrice-V.currentPrice));G.title="Price dropped",G.savings=K,G.oldPrice=z,G.currentPrice=$;var Y=this.utilities.createElement("IMG");V.imageUrl&&""!==V.imageUrl&&(V.imageUrl.startsWith("http")||V.imageUrl.startsWith("data:image")||(V.imageUrl="https://"+V.imageUrl),Y.src=V.imageUrl);var j=this.utilities.createProductImage(88,88,Y,V.title);j.slot="image",G.appendChild(j);var q=this.renderShopButton(V.domain,V.productUrl);q.style.placeSelf="center",q.slot="actions",this.flyoutData.common.shopping.appendChild(q),this.flyoutData.common.shopping.classList.add("noSections");var Z=this.utilities.createNotificationModule(G,this.GetNotificationName(),this);return Promise.resolve(Z)}return Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.ViewedProductListData;return this.pageHandlerModule.TriggerExperiment(Be.priceDropNotification),e&&null!=e&&e.productShowItem?Promise.resolve(null!==(t=this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.experimentData.isExperimentActive(Be.priceDropNotification)&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION)&&void 0!==t&&t):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return Mt.ViewedProductPriceDrop}},{key:"toggleTooltip",value:function(t,e,n,i,o){t.classList.toggle("toolTipsOverlayShow");var a,r,s=t.classList.contains("toolTipsOverlayShow");s?(e.setAttribute("aria-expanded","true"),null===(a=document.getElementById("vppdn_shopButton"))||void 0===a||a.setAttribute("aria-hidden","true"),n.style.display="none"):(e.setAttribute("aria-expanded","false"),null===(r=document.getElementById("vppdn_shopButton"))||void 0===r||r.setAttribute("aria-hidden","false"),n.style.display="flex");un.queueUpdate((function(){i.focus();var e=o.offsetHeight+(s?t.offsetHeight:0);parent.postMessage({height:e,type:"resize_iframe",width:o.offsetWidth},"edge://shopping"),o&&o.addEventListener(hn.onFlyoutResize,(function(){(s=t.classList.contains("toolTipsOverlayShow"))&&parent.postMessage({height:e,type:"resize_iframe",width:o.offsetWidth},"edge://shopping")}))}))}},{key:"renderShopButton",value:function(t,e){var n,i=this;return this.flyoutData.experimentData.isExperimentActive(Be.implicitPriceTrackingFootet)||this.utilities.shouldRenderSmallNotification()?(n=this.utilities.createPrimaryButton()).classList.add("headerMargin"):n=this.utilities.createSecondaryButton(),n.id="vppdn_shopButton",(this.flyoutData.experimentData.isExperimentActive(Be.implicitPriceTrackingFootet)||this.utilities.shouldRenderSmallNotification())&&(n.style.marginBottom="0px"),n.textContent=this.utilities.replaceValueInKey("prodHPriceDropViewAt",this.flyoutData.strings.prodHPriceDropViewAt,t),n.addEventListener("click",(function(){e.startsWith("http")||(e="https://"+e),i.pageHandlerModule.NavigateToRetailerSite(e),i.pageHandlerModule.RecordAsUserAction(is.PWILO_NOTIFICATION_PRICE_DROP);var n=new Yr(E.PriceDropProductPage,i.flyoutData.common.lastCommittedURL,t);i.logModule.LogInfoEvent(S.ButtonClick,"User navigated to retailer page with price drop product",n,dn.CouponImpressionId)})),n}},{key:"toFixedSafe",value:function(t,e){return t&&t.toFixed?t.toFixed(e):""}}]),t}(),AO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .message-bar {\n                border-radius: 4px;\n                display: flex;\n                align-items: center;\n                padding: 8px;\n                width: 100%;\n                text-align: left;\n                box-sizing: border-box;\n                color: #000000;\n                font-size: 12px;\n                margin: 0 12px;\n            }\n\n            .message-bar.success {\n                background-color: #DFF6DD;\n            }\n\n            .message-bar .icon {\n                fill: currentcolor;\n                margin-right: 8px;\n            }\n\n            .message-bar.success .icon {\n                color: #107C10;\n            }\n\n            .message-bar.error .icon {\n                color: #A80000;\n            }\n\n            .message-bar .content {\n                flex: 1;\n                margin-right: 8px;\n            }\n\n            .message-bar.error {\n                background-color: #FDE7E9;\n            }\n\n            .mainTitle {\n                font-size: 20px;\n            }\n\n            .description {\n                margin-top: 4px;\n                margin-bottom: 12px;\n                font-size: 12px;\n                line-height: 16px;\n                text-align: center;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n\n            .card-title {\n                color: #FFF;\n                opacity: 0.5;\n                user-select: none;\n                position: absolute;\n                font-size: 10px;\n            }\n\n            .card-text {\n                color: #FFF;\n                font-size: 14px;\n                user-select: none;\n                position: absolute;\n                font-size: 12px;\n                max-width: 100px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .card-info {\n                margin: 8px 0 12px 0;\n                padding-bottom: 8px;\n            }\n\n            .virtual-card-info-card {\n                margin: 4px 12px;\n                line-height: 16px;\n                font-size: 14px;\n                display: block;\n                padding: 8px 16px;\n                box-sizing: border-box;\n                white-space: nowrap;\n                background: var(--virtual-card-info-background);\n                border-radius: 8px;\n            }\n\n            .virtual-card-info-single-column .card-content {\n                justify-content: space-between;\n            }\n\n            .virtual-card-info-card .card-header {\n                font-weight: 600;\n                margin: 0 0 8px;\n                font-size: 12px;\n            }\n\n            .virtual-card-info-card .card-content {\n                display: flex;\n                align-items: center;\n            }\n\n            .virtual-card-info-card .card-content .content-controls {\n                margin-left: 16px;\n            }\n\n            .virtual-card-info-card .card-content .content-text  {\n                white-space: pre-wrap;\n            }\n\n            :root {\n                --virtual-card-info-background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.13%, rgba(221, 235, 255, 0.6) 100%);\n            }\n\n            .virtual-card-info-card fluent-button {\n                background-color: transparent;\n            }\n\n            .virtual-card-info-card fluent-button:active {\n                background-color: var(--neutral-fill-active);\n            }\n\n            .virtual-card-info-card fluent-button:hover {\n                background-color: var(--neutral-fill-hover);\n            }\n\n            .card-info .card-header, .bnpl-disclaimer {\n                font-weight: 400;\n                color: #717171;\n            }\n\n            @media (-ms-high-contrast: active) {\n                .message-bar .icon {\n                    fill: ButtonText;\n                }\n                .message-bar .cancel {\n                    fill: ButtonText;\n                }\n            }"}},{key:"getNotificationStyles",value:function(){return"\n            #virtual-card-notification h2 {\n                font-weight: 500;\n                margin: 32px 0 16px 0;\n            }\n\n            #virtual-card-notification .description {\n                line-height: 18px;\n            }\n\n            #virtual-card-notification .detail-link {\n                margin: 16px 0;\n            }\n\n            #virtual-card-notification {\n                padding-bottom: 12px;\n            }\n\n            #virtual-card-notification h2 {\n                margin: 8px 0;\n            }\n\n            #virtual-card-notification .description {\n                width: 330px;\n                margin: auto;\n                font-size: 12px;\n            }\n\n            #virtual-card-notification .detail-button {\n                width: 240px;\n                height: 48px;\n                display: block;\n                margin: 16px auto 0;\n                border-radius: 8px;\n                background: transparent;\n                border: 1px solid #008076;\n                outline: none;\n                box-sizing: border-box;\n                fill: inherit;\n                text-align: center;\n                cursor: pointer;\n                font-weight: 600;\n                color: #008076;\n            }\n            #virtual-card-notification .detail-button:hover {\n                background: linear-gradient(267.73deg, #F0FEFF -9.53%, #DBFFFB 45.72%, #F8FDFF 97.76%);\n                color: #008076;\n            }"}},{key:"getDarkModeStyles",value:function(){return"\n            #virtual-card-notification .detail-button {\n                background: rgba(255, 255, 255, 0.09);\n                color: #FFFFFF;\n            }\n            :root {\n                --virtual-card-info-background: linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%);\n            }\n            .card-info .card-header, .bnpl-disclaimer {\n                color: #FFFFFF\n            }\n        "}},{key:"getCopyIcon",value:function(){return mt.getTrustedHTML(pO||(pO=j(['\n        <svg role="img" style="width: 1em" viewBox="0 0 10 12" width="10" height="12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n            <path d="M1 2.085V8.5a2.5 2.5 0 002.336 2.495L3.5 11h4.414A1.5 1.5 0 016.5 12H3a3 3 0 01-3-3V3.5a1.5 1.5 0 011-1.415zM8.5 0A1.5 1.5 0 0110 1.5v7A1.5 1.5 0 018.5 10h-5A1.5 1.5 0 012 8.5v-7A1.5 1.5 0 013.5 0h5zm0 1h-5a.5.5 0 00-.5.5v7a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-7a.5.5 0 00-.5-.5z"/>\n        </svg>'])))}},{key:"getShowIcon",value:function(){return mt.getTrustedHTML(fO||(fO=j(['\n    <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" aria-hidden="true">\n        <path d="M1024 512q150 0 292 39t272 107 246 163 214 203q-98 110-213 203t-246 162-273 108-292 39q-150 0-292-39t-272-107-247-162T0 1024q97-109 213-203t246-162 273-108 292-39zm0 878q76 0 142-29t116-78 79-116 29-143q0-76-29-142t-78-116-116-79-143-29q-76 0-142 29t-116 78-79 116-29 143q0 76 29 142t78 116 116 79 143 29zm-375-54q-55-66-84-146t-29-166q0-86 29-166t84-146q-134 53-251 132t-221 180q103 100 220 179t252 133zm1222-312q-103-100-220-179t-252-133q55 66 84 146t29 166q0 86-29 166t-84 146q134-53 251-132t221-180zm-847-171q35 0 66 13t54 37 37 55 14 66q0 35-13 66t-37 55-55 36-66 14q-35 0-66-13t-55-37-36-54-14-67q0-35 13-66t37-54 54-37 67-14z" />\n    </svg>'])))}},{key:"getHideIcon",value:function(){return mt.getTrustedHTML(gO||(gO=j(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" aria-hidden="true">\n            <path d="M1024 896q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10zm576 256q93 0 174 35t143 96 96 142 35 175q0 93-35 174t-96 143-142 96-175 35q-93 0-174-35t-143-96-96-142-35-175q0-93 35-174t96-143 142-96 175-35zm-320 448q0 66 25 124t68 102 102 69 125 25q47 0 92-13t84-40l-443-443q-26 39-39 84t-14 92zm587 176q26-39 39-84t14-92q0-66-25-124t-69-101-102-69-124-26q-47 0-92 13t-84 40l443 443zM640 1024q0 74 26 139t72 117 108 84 136 42q19 2 38 2t39 0q-22 63-29 128-152 0-294-38t-273-107-247-162T0 1024q97-109 213-203t246-162 273-108 292-39q153 0 296 36t272 104 245 161 211 211l-91 91-8-9q-108-126-232-224t-280-161q48 66 73 144t26 159v6q-65 7-128 29v-35q0-79-30-149t-83-122-122-82-149-31q-79 0-149 30t-122 83-82 122-31 149zm-37 291q-45-64-68-138t-23-153q0-78 23-152t68-139q-120 52-226 126t-200 165q94 91 200 165t226 126z" />\n        </svg>'])))}},{key:"getSuccessIcon",value:function(){return mt.getTrustedHTML(mO||(mO=j(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M1491 595l90 90-749 749-365-365 90-90 275 275 659-659zM1024 0q141 0 272 36t245 103 207 160 160 208 103 245 37 272q0 141-36 272t-103 245-160 207-208 160-245 103-272 37q-141 0-272-36t-245-103-207-160-160-208-103-244-37-273q0-141 36-272t103-245 160-207 208-160T751 37t273-37zm0 1920q123 0 237-32t214-90 182-141 140-181 91-214 32-238q0-123-32-237t-90-214-141-182-181-140-214-91-238-32q-123 0-237 32t-214 90-182 141-140 181-91 214-32 238q0 123 32 237t90 214 141 182 181 140 214 91 238 32z" />\n        </svg>'])))}},{key:"getErrorIcon",value:function(){return mt.getTrustedHTML(vO||(vO=j(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M960 0q133 0 255 34t230 96 194 150 150 195 97 229 34 256q0 133-34 255t-96 230-150 194-195 150-229 97-256 34q-133 0-255-34t-230-96-194-150-150-195-97-229T0 960q0-133 34-255t96-230 150-194 195-150 229-97T960 0zm0 1792q114 0 220-30t199-84 169-130 130-168 84-199 30-221q0-114-30-220t-84-199-130-169-168-130-199-84-221-30q-115 0-221 30t-198 84-169 130-130 168-84 199-30 221q0 114 30 220t84 199 130 169 168 130 199 84 221 30zM896 512h128v640H896V512zm0 768h128v128H896v-128z" />\n        </svg>'])))}},{key:"getCancelButton",value:function(){return mt.getTrustedHTML(yO||(yO=j(['\n        <svg aria-hidden="true" role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M1115 1024l690 691-90 90-691-690-691 690-90-90 690-691-690-691 90-90 691 690 691-690 90 90-690 691z" />\n        </svg>'])))}},{key:"getZipCardBackground",value:function(){return mt.getTrustedHTML(CO||(CO=j(['\n    <svg width="280" height="170" viewBox="0 0 280 170" fill="none" xmlns="http://www.w3.org/2000/svg" style="border-radius: 8px; overflow: hidden;">\n        <path d="M280 0H0V170H280V0Z" fill="url(#zipCardBackground)"/>\n        <path opacity="0.3" d="M22.965 291.636C108.55 291.636 177.931 243.588 177.931 184.318C177.931 125.048 108.55 77 22.965 77C-62.6203 77 -132.001 125.048 -132.001 184.318C-132.001 243.588 -62.6203 291.636 22.965 291.636Z" fill="#411361"/>\n        <path opacity="0.3" d="M267.931 76.9269C353.516 76.9269 422.897 28.879 422.897 -30.3911C422.897 -89.6612 353.516 -137.709 267.931 -137.709C182.345 -137.709 112.965 -89.6612 112.965 -30.3911C112.965 28.879 182.345 76.9269 267.931 76.9269Z" fill="#411361"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M25.9503 34.2636L26.502 38.6662H45.8137L45.1825 33.6247H36.1771L36.0992 32.9993L44.3923 27.3222L43.8382 22.9101H24.5273L25.1593 27.9523H34.1783L34.2578 28.5825L25.9503 34.2636Z" fill="#FFFFFA"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M46.082 22.9099L48.0567 38.6659H67.3836L65.4081 22.9099H46.082Z" fill="#AA8FFF"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M47.9535 20.8192C49.2183 21.9214 51.0428 21.9214 52.0281 20.8192C53.0143 19.717 52.7878 17.9295 51.523 16.8273C50.259 15.7242 48.4345 15.7242 47.4484 16.8273C46.463 17.9295 46.6887 19.717 47.9535 20.8192Z" fill="#FFFFFA"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M80.508 31.0975L74.4596 31.1038L73.9858 27.3227L80.066 27.3274C81.495 27.3439 82.227 28.133 82.345 29.2124C82.421 29.9071 82.097 31.0975 80.508 31.0975ZM87.652 28.583C87.206 25.0411 84.366 22.8949 80.507 22.9098H67.6514L69.6261 38.6667H75.4088L75.0129 35.515H81.133C85.95 35.515 88.154 32.5742 87.652 28.583Z" fill="#FFFFFA"/>\n        <path opacity="0.49814" d="M30.6016 84.0156C29.9245 84.0156 29.3418 83.778 28.8535 83.3027C28.3653 82.8275 28.1211 82.2513 28.1211 81.5742C28.1211 80.9036 28.3653 80.3242 28.8535 79.8359C29.3418 79.3411 29.9245 79.0938 30.6016 79.0938C31.2787 79.0938 31.8548 79.3379 32.3301 79.8262C32.8054 80.3145 33.043 80.8971 33.043 81.5742C33.043 82.2513 32.8054 82.8275 32.3301 83.3027C31.8548 83.778 31.2787 84.0156 30.6016 84.0156ZM40.3868 84.0156C39.7097 84.0156 39.127 83.778 38.6388 83.3027C38.1505 82.8275 37.9063 82.2513 37.9063 81.5742C37.9063 80.9036 38.1505 80.3242 38.6388 79.8359C39.127 79.3411 39.7097 79.0938 40.3868 79.0938C41.0639 79.0938 41.6401 79.3379 42.1153 79.8262C42.5906 80.3145 42.8282 80.8971 42.8282 81.5742C42.8282 82.2513 42.5906 82.8275 42.1153 83.3027C41.6401 83.778 41.0639 84.0156 40.3868 84.0156ZM50.172 84.0156C49.4949 84.0156 48.9123 83.778 48.424 83.3027C47.9357 82.8275 47.6915 82.2513 47.6915 81.5742C47.6915 80.9036 47.9357 80.3242 48.424 79.8359C48.9123 79.3411 49.4949 79.0938 50.172 79.0938C50.8491 79.0938 51.4253 79.3379 51.9005 79.8262C52.3758 80.3145 52.6134 80.8971 52.6134 81.5742C52.6134 82.2513 52.3758 82.8275 51.9005 83.3027C51.4253 83.778 50.8491 84.0156 50.172 84.0156ZM59.9572 84.0156C59.2801 84.0156 58.6975 83.778 58.2092 83.3027C57.7209 82.8275 57.4768 82.2513 57.4768 81.5742C57.4768 80.9036 57.7209 80.3242 58.2092 79.8359C58.6975 79.3411 59.2801 79.0938 59.9572 79.0938C60.6343 79.0938 61.2105 79.3379 61.6857 79.8262C62.161 80.3145 62.3986 80.8971 62.3986 81.5742C62.3986 82.2513 62.161 82.8275 61.6857 83.3027C61.2105 83.778 60.6343 84.0156 59.9572 84.0156Z" fill="white"/>\n        <path opacity="0.49814" d="M75.9346 84.0156C75.2575 84.0156 74.6748 83.778 74.1865 83.3027C73.6983 82.8275 73.4541 82.2513 73.4541 81.5742C73.4541 80.9036 73.6983 80.3242 74.1865 79.8359C74.6748 79.3411 75.2575 79.0938 75.9346 79.0938C76.6117 79.0938 77.1879 79.3379 77.6631 79.8262C78.1384 80.3145 78.376 80.8971 78.376 81.5742C78.376 82.2513 78.1384 82.8275 77.6631 83.3027C77.1879 83.778 76.6117 84.0156 75.9346 84.0156ZM85.7202 84.0156C85.0432 84.0156 84.4602 83.778 83.9722 83.3027C83.4832 82.8275 83.2392 82.2513 83.2392 81.5742C83.2392 80.9036 83.4832 80.3242 83.9722 79.8359C84.4602 79.3411 85.0432 79.0938 85.7202 79.0938C86.3972 79.0938 86.9732 79.3379 87.4482 79.8262C87.9232 80.3145 88.1612 80.8971 88.1612 81.5742C88.1612 82.2513 87.9232 82.8275 87.4482 83.3027C86.9732 83.778 86.3972 84.0156 85.7202 84.0156ZM95.5052 84.0156C94.8282 84.0156 94.2452 83.778 93.7572 83.3027C93.2682 82.8275 93.0242 82.2513 93.0242 81.5742C93.0242 80.9036 93.2682 80.3242 93.7572 79.8359C94.2452 79.3411 94.8282 79.0938 95.5052 79.0938C96.1822 79.0938 96.7582 79.3379 97.2332 79.8262C97.7092 80.3145 97.9462 80.8971 97.9462 81.5742C97.9462 82.2513 97.7092 82.8275 97.2332 83.3027C96.7582 83.778 96.1822 84.0156 95.5052 84.0156ZM105.29 84.0156C104.613 84.0156 104.03 83.778 103.542 83.3027C103.054 82.8275 102.81 82.2513 102.81 81.5742C102.81 80.9036 103.054 80.3242 103.542 79.8359C104.03 79.3411 104.613 79.0938 105.29 79.0938C105.967 79.0938 106.543 79.3379 107.019 79.8262C107.494 80.3145 107.731 80.8971 107.731 81.5742C107.731 82.2513 107.494 82.8275 107.019 83.3027C106.543 83.778 105.967 84.0156 105.29 84.0156Z" fill="white"/>\n        <path opacity="0.49814" d="M121.268 84.0156C120.591 84.0156 120.009 83.778 119.52 83.3027C119.032 82.8275 118.788 82.2513 118.788 81.5742C118.788 80.9036 119.032 80.3242 119.52 79.8359C120.009 79.3411 120.591 79.0938 121.268 79.0938C121.945 79.0938 122.522 79.3379 122.997 79.8262C123.472 80.3145 123.71 80.8971 123.71 81.5742C123.71 82.2513 123.472 82.8275 122.997 83.3027C122.522 83.778 121.945 84.0156 121.268 84.0156ZM131.054 84.0156C130.377 84.0156 129.794 83.778 129.306 83.3027C128.817 82.8275 128.573 82.2513 128.573 81.5742C128.573 80.9036 128.817 80.3242 129.306 79.8359C129.794 79.3411 130.377 79.0938 131.054 79.0938C131.731 79.0938 132.307 79.3379 132.782 79.8262C133.257 80.3145 133.495 80.8971 133.495 81.5742C133.495 82.2513 133.257 82.8275 132.782 83.3027C132.307 83.778 131.731 84.0156 131.054 84.0156ZM140.839 84.0156C140.162 84.0156 139.579 83.778 139.091 83.3027C138.602 82.8275 138.358 82.2513 138.358 81.5742C138.358 80.9036 138.602 80.3242 139.091 79.8359C139.579 79.3411 140.162 79.0938 140.839 79.0938C141.516 79.0938 142.092 79.3379 142.567 79.8262C143.043 80.3145 143.28 80.8971 143.28 81.5742C143.28 82.2513 143.043 82.8275 142.567 83.3027C142.092 83.778 141.516 84.0156 140.839 84.0156ZM150.624 84.0156C149.947 84.0156 149.364 83.778 148.876 83.3027C148.388 82.8275 148.144 82.2513 148.144 81.5742C148.144 80.9036 148.388 80.3242 148.876 79.8359C149.364 79.3411 149.947 79.0938 150.624 79.0938C151.301 79.0938 151.877 79.3379 152.353 79.8262C152.828 80.3145 153.065 80.8971 153.065 81.5742C153.065 82.2513 152.828 82.8275 152.353 83.3027C151.877 83.778 151.301 84.0156 150.624 84.0156Z" fill="white"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M239.658 120.884C241.117 120.884 242.287 121.245 243.032 121.581L242.523 125.174L242.185 124.983C241.491 124.647 240.598 124.324 239.367 124.347C237.894 124.347 237.213 125.084 237.213 125.773C237.204 126.55 238.009 127.062 239.324 127.829C241.496 129.012 242.498 130.447 242.484 132.334C242.455 135.776 239.888 138 235.931 138C234.243 137.979 232.617 137.579 231.738 137.116L232.266 133.403L232.751 133.667C233.988 134.286 234.788 134.537 236.294 134.537C237.376 134.537 238.537 134.029 238.547 132.918C238.554 132.192 238.061 131.674 236.596 130.862C235.168 130.068 233.276 128.739 233.297 126.357C233.319 123.133 235.939 120.884 239.658 120.884ZM209.15 121.411H215.227C216.045 121.445 216.706 121.741 216.934 122.736L218.243 130.313C218.244 130.314 218.243 130.317 218.243 130.318L218.637 132.588L222.326 121.411H226.317L220.385 137.771L216.398 137.775L213.224 124.574C215.112 125.695 216.72 126.993 217.651 128.778C217.411 128.213 217.095 127.575 216.69 126.947C216.242 126.251 215.3 125.363 214.843 124.931L214.775 124.868C213.292 123.467 211.279 122.335 209.104 121.736L209.15 121.411ZM231.807 121.43H227.904L225.463 137.765H229.366L231.807 121.43ZM249.948 121.43H252.905L256 137.765H252.451C252.451 137.765 252.098 135.888 251.984 135.316C251.688 135.316 250.455 135.314 249.294 135.313C248.265 135.311 247.293 135.31 247.087 135.31C246.938 135.752 246.281 137.765 246.281 137.765H242.266L247.945 122.786C248.347 121.722 249.032 121.43 249.948 121.43ZM249.893 126.88C250 126.558 250.138 126.14 250.238 125.823L250.495 127.218C250.495 127.218 251.224 131.081 251.376 131.891L248.219 131.893C248.533 130.96 249.734 127.369 249.734 127.369C249.724 127.39 249.795 127.176 249.893 126.88Z" fill="white"/>\n        <defs>\n            <linearGradient id="zipCardBackground" x1="140.966" y1="-28.1842" x2="147.412" y2="191.269" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#1B1323"/>\n            <stop offset="1" stop-color="#21182A"/>\n            </linearGradient>\n        </defs>\n        </svg>'])))}},{key:"getAffirmCardBackground",value:function(){return mt.getTrustedHTML(bO||(bO=j(['\n        <svg width="280" height="172" viewBox="0 0 280 172" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <g id="Affirm Visa" filter="url(#filter0_ii_1_2)">\n                <rect width="280" height="171.902" rx="9.06191" fill="url(#paint0_linear_1_2)"/>\n                <g id="Frame 63343327" filter="url(#filter1_d_1_2)">\n                    <g id="white_logo-solid_bg 1" clip-path="url(#clip0_1_2)">\n                        <path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M28.5899 45.4986C27.7242 45.4986 27.2832 45.0727 27.2832 44.3727C27.2832 43.0674 28.7402 42.6284 31.3977 42.3462C31.3977 44.0855 30.22 45.4986 28.5817 45.4986H28.5899ZM29.7333 35.7166C27.8336 35.7166 25.6498 36.6091 24.4639 37.5538L25.5468 39.8382C26.4975 38.9685 28.0345 38.2245 29.4213 38.2245C30.7395 38.2245 31.468 38.665 31.468 39.5527C31.468 40.1483 30.9861 40.4501 30.0747 40.5692C26.6674 41.0098 23.9967 41.9497 23.9967 44.5718C23.9967 46.6506 25.4782 47.9086 27.7928 47.9086C29.4458 47.9086 30.9159 46.9916 31.615 45.7874V47.5823H34.6956V40.0618C34.6956 36.9615 32.5411 35.71 29.7349 35.71L29.7333 35.7166Z" fill="white"/>\n                        <path id="Vector_2" fill-rule="evenodd" clip-rule="evenodd" d="M60.6522 36.0543V47.5676H63.9484V42.0198C63.9484 39.3846 65.5459 38.6096 66.6583 38.6096C67.159 38.6057 67.6497 38.7505 68.0679 39.0256L68.6706 35.9825C68.2036 35.7958 67.7035 35.7053 67.2006 35.7166C65.5067 35.7166 64.4417 36.4655 63.7394 37.9895V36.0543H60.6522Z" fill="white"/>\n                        <path id="Vector_3" fill-rule="evenodd" clip-rule="evenodd" d="M83.9463 35.7165C82.2035 35.7165 80.9 36.7445 80.2222 37.7366C79.5933 36.4557 78.2621 35.7165 76.6613 35.7165C74.9201 35.7165 73.713 36.6825 73.156 37.7953V36.0543H69.9774V47.5676H73.2769V41.6396C73.2769 39.5184 74.3925 38.4921 75.433 38.4921C76.3755 38.4921 77.2412 39.1007 77.2412 40.672V47.5676H80.5341V41.6396C80.5341 39.4874 81.622 38.4921 82.7115 38.4921C83.5837 38.4921 84.5082 39.1252 84.5082 40.6492V47.5676H87.8012V39.6082C87.8012 37.0219 86.0583 35.7165 83.9529 35.7165" fill="white"/>\n                        <path id="Vector_4" fill-rule="evenodd" clip-rule="evenodd" d="M52.6305 36.0543H49.6446V34.8844C49.6446 33.3604 50.5152 32.9263 51.265 32.9263C51.7769 32.933 52.2802 33.0587 52.735 33.2935L53.751 30.9716C53.751 30.9716 52.7203 30.2993 50.8468 30.2993C48.7413 30.2993 46.3451 31.4855 46.3451 35.2075V36.0543H41.355V34.8844C41.355 33.3604 42.224 32.9263 42.9754 32.9263C43.4881 32.9263 43.993 33.0524 44.4455 33.2935L45.4614 30.9716C44.8554 30.6175 43.8803 30.2993 42.5589 30.2993C40.4534 30.2993 38.0572 31.4855 38.0572 35.2075V36.0543H36.1493V38.5932H38.0621V47.5676H41.355V38.5932H46.3516V47.5676H49.6446V38.5932H52.6305V36.0543Z" fill="white"/>\n                        <path id="Vector_5" d="M57.8868 36.0543H54.5971V47.5627H57.8868V36.0543Z" fill="white"/>\n                        <path id="Vector_6" fill-rule="evenodd" clip-rule="evenodd" d="M54.718 34.0979H57.9407C59.8208 28.1928 66.1993 23.0023 73.7849 23.0023C83.0104 23.0023 90.9831 30.0187 90.9831 40.9413C91.0112 43.1833 90.7028 45.4169 90.0684 47.5676H93.1964L93.2274 47.4599C93.7545 45.3307 94.0145 43.1443 94.0016 40.9511C94.0016 28.7704 85.1159 20.0033 73.7914 20.0033C64.8958 20.0033 56.9672 26.1711 54.7196 34.1012L54.718 34.0979Z" fill="white"/>\n                    </g>\n                    <g id="Frame 63343326">\n                        <g id="Frame 63343197">\n                            <g id="Frame 63343196">\n                                <g id="Frame 63343325">\n                                    <circle id="Ellipse 1161" cx="27" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1162" cx="39" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1163" cx="51" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1164" cx="63" cy="108.402" r="3" fill="white"/>\n                                </g>\n                            </g>\n                        </g>\n                        <path id="visa" fill-rule="evenodd" clip-rule="evenodd" d="M235.093 127.22C236.96 127.22 238.456 127.657 239.41 128.063L238.758 132.405L238.326 132.174C237.438 131.768 236.296 131.377 234.721 131.405C232.836 131.405 231.964 132.295 231.964 133.128C231.953 134.066 232.983 134.685 234.666 135.612C237.444 137.042 238.728 138.776 238.71 141.055C238.673 145.215 235.387 147.902 230.325 147.902C228.165 147.877 226.084 147.393 224.96 146.834L225.636 142.347L226.257 142.667C227.838 143.415 228.862 143.718 230.79 143.718C232.174 143.718 233.659 143.104 233.671 141.761C233.68 140.884 233.05 140.259 231.176 139.277C229.349 138.318 226.927 136.712 226.954 133.833C226.983 129.939 230.334 127.22 235.093 127.22ZM196.06 127.857H203.834C204.881 127.899 205.726 128.256 206.018 129.459L207.693 138.614C207.694 138.615 207.693 138.616 207.693 138.617C207.693 138.618 207.693 138.619 207.693 138.619L208.197 141.363L212.917 127.857H218.023L210.433 147.626L205.332 147.631L201.271 131.679C203.688 133.034 205.745 134.602 206.936 136.759C206.629 136.077 206.224 135.306 205.706 134.546C205.133 133.706 203.928 132.633 203.343 132.111L203.256 132.034C201.359 130.341 198.783 128.974 196 128.251L196.06 127.857ZM225.047 127.881H220.054L216.93 147.619H221.923L225.047 127.881ZM248.257 127.881H252.04L256 147.619H251.46C251.46 147.619 251.009 145.351 250.863 144.66C250.485 144.66 248.911 144.658 247.429 144.656L247.421 144.656L247.414 144.656C246.099 144.654 244.86 144.652 244.597 144.652C244.407 145.187 243.566 147.619 243.566 147.619H238.429L245.695 129.52C246.209 128.234 247.086 127.881 248.257 127.881ZM248.186 134.467C248.323 134.078 248.501 133.572 248.629 133.189V133.19L248.957 134.875C248.957 134.875 249.889 139.542 250.084 140.521L246.045 140.523C246.447 139.397 247.984 135.057 247.984 135.057C247.97 135.082 248.061 134.823 248.186 134.467Z" fill="white"/>\n                    </g>\n                </g>\n            </g>\n            <defs>\n                <filter id="filter0_ii_1_2" x="0" y="0" width="280" height="171.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="-0.787992"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0.0288889 0 0 0 0 0.0296 0 0 0 0 0.0333333 0 0 0 0.2 0"/>\n                    <feBlend mode="normal" in2="shape" result="effect1_innerShadow_1_2"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="0.393996"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>\n                    <feBlend mode="normal" in2="effect1_innerShadow_1_2" result="effect2_innerShadow_1_2"/>\n                </filter>\n                <filter id="filter1_d_1_2" x="-4" y="0" width="288" height="179.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="4"/>\n                    <feGaussianBlur stdDeviation="2"/>\n                    <feComposite in2="hardAlpha" operator="out"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>\n                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>\n                </filter>\n                <linearGradient id="paint0_linear_1_2" x1="2.27207e-06" y1="4.75535" x2="234.857" y2="156.995" gradientUnits="userSpaceOnUse">\n                    <stop stop-color="#4A4AF4"/>\n                    <stop offset="1" stop-color="#3231C2"/>\n                </linearGradient>\n                <clipPath id="clip0_1_2">\n                    <rect width="70" height="27.9021" fill="white" transform="translate(24 20)"/>\n                </clipPath>\n            </defs>\n        </svg>'])))}},{key:"getKlarnaCardBackground",value:function(){return'\n        <svg width="280" height="172" viewBox="0 0 280 172" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <g id="Klarna Visa" filter="url(#filter0_ii_1_2)">\n                <rect width="280" height="171.902" rx="9.06191" fill="url(#klarna-card-background)"/>\n                <g id="Frame 63343327" filter="url(#filter1_d_1_2)">\n                    <g id="white_logo-solid_bg 1" clip-path="url(#clip0_1_2)" transform="translate(168 13)">\n                        <rect class="cls-1" width="100" height="40.4494" rx="11.7384"/>\n                        <path d="M80.0772,17.7235a6.194,6.194,0,1,0,0,10.2373v.75h3.5145V16.9727H80.0772Zm-3.1964,8.1388a3.0243,3.0243,0,1,1,3.1849-3.02A3.1059,3.1059,0,0,1,76.8808,25.8623Z" fill="white"/>\n                        <rect x="28.2027" y="11.7416" width="3.678" height="16.9694" fill="white"/>\n                        <path d="M64.1542,16.6569a4.2694,4.2694,0,0,0-3.62,1.6383V16.9733h-3.5V28.711h3.5421V22.5424a2.4754,2.4754,0,0,1,2.6383-2.6591c1.5447,0,2.4325.9228,2.4325,2.6348V28.711h3.5107V21.2464C69.1577,18.5146,66.9857,16.6569,64.1542,16.6569Z" fill="white"/>\n                        <path d="M43,17.7235a6.194,6.194,0,1,0,0,10.2373v.75h3.5145V16.9727H43Zm-3.1965,8.1388a3.0243,3.0243,0,1,1,3.1845-3.02A3.1058,3.1058,0,0,1,39.8034,25.8623Z" fill="white"/>\n                        <path d="M51.9513,18.5017V16.9728H48.353V28.7111h3.606v-5.48c0-1.8491,2.0042-2.843,3.3949-2.843.014,0,.0276.0014.0417.0015V16.9735A4.3821,4.3821,0,0,0,51.9513,18.5017Z" fill="white"/>\n                        <path d="M87.323,24.5476a2.2059,2.2059,0,1,0,2.206,2.2059A2.2057,2.2057,0,0,0,87.323,24.5476Z" fill="white"/>\n                        <path d="M25.6675,11.7384H21.8558a9.7488,9.7488,0,0,1-3.9412,7.8678l-1.51,1.131,5.8513,7.9792h4.8106l-5.3837-7.342A13.5049,13.5049,0,0,0,25.6675,11.7384Z" fill="white"/>\n                        <rect x="12.1204" y="11.7384" width="3.8185" height="16.9773" fill="white"/>\n                    </g>\n                    <g id="Frame 63343326">\n                        <path id="visa" fill-rule="evenodd" clip-rule="evenodd" d="M235.093 127.22C236.96 127.22 238.456 127.657 239.41 128.063L238.758 132.405L238.326 132.174C237.438 131.768 236.296 131.377 234.721 131.405C232.836 131.405 231.964 132.295 231.964 133.128C231.953 134.066 232.983 134.685 234.666 135.612C237.444 137.042 238.728 138.776 238.71 141.055C238.673 145.215 235.387 147.902 230.325 147.902C228.165 147.877 226.084 147.393 224.96 146.834L225.636 142.347L226.257 142.667C227.838 143.415 228.862 143.718 230.79 143.718C232.174 143.718 233.659 143.104 233.671 141.761C233.68 140.884 233.05 140.259 231.176 139.277C229.349 138.318 226.927 136.712 226.954 133.833C226.983 129.939 230.334 127.22 235.093 127.22ZM196.06 127.857H203.834C204.881 127.899 205.726 128.256 206.018 129.459L207.693 138.614C207.694 138.615 207.693 138.616 207.693 138.617C207.693 138.618 207.693 138.619 207.693 138.619L208.197 141.363L212.917 127.857H218.023L210.433 147.626L205.332 147.631L201.271 131.679C203.688 133.034 205.745 134.602 206.936 136.759C206.629 136.077 206.224 135.306 205.706 134.546C205.133 133.706 203.928 132.633 203.343 132.111L203.256 132.034C201.359 130.341 198.783 128.974 196 128.251L196.06 127.857ZM225.047 127.881H220.054L216.93 147.619H221.923L225.047 127.881ZM248.257 127.881H252.04L256 147.619H251.46C251.46 147.619 251.009 145.351 250.863 144.66C250.485 144.66 248.911 144.658 247.429 144.656L247.421 144.656L247.414 144.656C246.099 144.654 244.86 144.652 244.597 144.652C244.407 145.187 243.566 147.619 243.566 147.619H238.429L245.695 129.52C246.209 128.234 247.086 127.881 248.257 127.881ZM248.186 134.467C248.323 134.078 248.501 133.572 248.629 133.189V133.19L248.957 134.875C248.957 134.875 249.889 139.542 250.084 140.521L246.045 140.523C246.447 139.397 247.984 135.057 247.984 135.057C247.97 135.082 248.061 134.823 248.186 134.467Z" fill="white"/>\n                    </g>\n                </g>\n            </g>\n            <defs>\n                <filter id="filter0_ii_1_2" x="0" y="0" width="280" height="171.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="-0.787992"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0.0288889 0 0 0 0 0.0296 0 0 0 0 0.0333333 0 0 0 0.2 0"/>\n                    <feBlend mode="normal" in2="shape" result="effect1_innerShadow_1_2"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="0.393996"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>\n                    <feBlend mode="normal" in2="effect1_innerShadow_1_2" result="effect2_innerShadow_1_2"/>\n                </filter>\n                <filter id="filter1_d_1_2" x="-4" y="0" width="288" height="179.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="4"/>\n                    <feGaussianBlur stdDeviation="2"/>\n                    <feComposite in2="hardAlpha" operator="out"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>\n                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>\n                </filter>\n                <linearGradient id="klarna-card-background" x1="2.27207e-06" y1="4.75535" x2="234.857" y2="156.995" gradientUnits="userSpaceOnUse">\n                    <style>\n                        stop.klarna-background-base {\n                            stop-color: #363636;\n                        }\n                        @media (prefers-color-scheme: dark) {\n                            stop.klarna-background-base { stop-color: black; }\n                        }\n                    </style>\n                    <stop class="klarna-background-base" />\n                    <stop class="klarna-background-base" offset="1" />\n                </linearGradient>\n                <clipPath id="clip0_1_2">\n                    <rect width="100" height="37.9021" fill="black" transform="translate(1 1)"/>\n                </clipPath>\n            </defs>\n        </svg>'}},{key:"getErrorImage",value:function(){return"iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAC61BMVEUAAAC0qKY2MzrYzd/91zb/9kxTSV1FImHdz+eSfZ/ej0h1WJJFQZSQg5rcMX9dW1+WhqGYgabLxs69GGeKgJL9yTf652LppknbhkWmfk/pzV67gC/uKkranENwamxRT1LWxs3//WHtu0Tqv15VUVejcJf/6j7rxF7Qx9fONXSDeIvVMmJlX2tiVH/PLnfNxNTKwNHSydmETVi9KWfPN3nBs8i5rcCwnV5NTVuxqrVtYnnbyVTs0jq9J2fDuMrIIz3Hvc27scOwpLjGJkDyMVDaNnlnWm93aoVpYW6ekKddVmv042jBhC2OX3CFXVO3n1786WaUh25OPF1MO1tKOlhPPGBJOlVHOVNFOFD40UL7u0T7vkNCN0z5x0L5xEL6wkNANkdBNkr6zUNEN076tEP7ykNBOkb3zkL5z0L6tkL6y0L4s0P6sUP7x0P5ukL8t0T6uEL7wUP400FMLWNKKGP3v0T51UT3ykLazeL4rkEzMDhPOGHWx9+diqr7xEP/8FE9OEBNNGHPv9pWQV7Txdurl7hRQVtPP1a3pcONfZhYTWL+xUH/0kCvnbs6MESlaWtGREf+1j/Jt9TyqTylk7BYN3UwKTdINVv/5lHGkEm0oMFcU2ZNPlE6LUrSy9ejjrHSI3YrKTPIGG5KPUn82Ub/wELNv9XzxEPGttHArsyNalf+xDcEEkvgn0i7qMf/3kmacVb8z0JEMlT/uEI7MjleSlkkI0onImBAMFxHOkr0uEUtKFT/zEGJdZaDakn4x0c6K1Xvr0deT0qteTPvoEe+rMgVGVPomEjemTDTkC70qUbqojbHiC3Cr84fHlrHElTltUnnLWQkCmLlvEU2LD6PGyvTsUkPIEjLETrWG2D2LD/msUfiMnXaF0jWESrEs82BbI63jUnXrk1vWInmw0PnHTSkhlfmJ1b+4TvHvM4CCTqiYlRyWUHcKHC5k0UwPkSzhEzAnDxSNHLWsk2YOj/PnFI8MWu+tsOATnJvaunrAAAAUnRSTlMABv79/v3+/f7+/k1NWP7A/v1p/t/+o/7+28H+/v6l2yP8/sLZIP7BzmLfh6T93M7OzvuuPf7+/sVpOP7+1s7ezs7Ovqight5Vzpds/fTewYakAMEs9AAAFkhJREFUeNrs0jFuhDAQheHxBdzQbkthIbmBFqXYcM/VXgily0qhpuIOGYOIA3XMFPm/C7z3PBYAAAAAAAAAAAAAAAAAAAAA+K9c7cSeE1VfWSW0fXzEOHRizYU2pirNNVVCXz2fz0cS7cafq1xxh6bSuC3Pe9+IHdceqgQpTON+XtqrQay4PlfxJbfnmx+eOgU6sbAd4VClK1mlOy9XtZgIe5XcJDopp62S4/TB5ux9nq586R9Yr3H5qQ3P3lXJqUqUYkKVty/L8rUJYqD5NX1Zu3it0kkpmjeqV5KnNxY/vh3HXEWVvoLm5cCP3SAG+r3KoUu56fcxmcZJ0+Z5z3uX67m3rcpr0ia5SrkPeP9cTcmc3BKb6Ycqu2um3xLr6dOpy19Od+fp38Tb2+uLcRwH8Ai3rpDzMW5cuRLKjSSEWJttbMwYxthqll3gygppUiJciKUccho55ZyI3DiVC6WQfskh/gDvz+fzfL/f57B59myPvL/P92sjj+fl/X2eOb7nfKKMeieZ8x8ec6CbS0FGjXqH4aT36xdm6+9tPxzQiv4fMtsO15cS4u+mZsydOtiWab9fO/P72aNHj4ZN9GaKI4unD+4g0xeP6CRTvJci14IsMicbM3TognGovkv49Pq6uj3fv3+vVk+o9O/7OmFHKnX3bjqdvvuXXPpZ7yRvv22Lb/PNqfid7+pSTthT/Y7oy93/4OOFwzt3Dh3XnX1evX+1vyNNe3b1fS2ctZLidcjZIS2y72dff//s6vs5oDQAh1la5cusr3279KV4o072YNbkL5MnDxw4viv7jPqJ6qFD1XZpGjki8lY/AQNIXvVJ/ybk7QMyDh5f+5pVvzRZTvTx48d30/qk6qETJ4jepiWRu/QCt+t/9qELnzSp830DhgzA8ffcQed+2WXkyFDUHni74wYCvf+uVqm//Xpzb7JBKTbOFht79xb3tsrtn293+Wdd388D+xw5cACHO19Kd/rqvierX3sw6wuCe53o2PJBM38X00m+zhOSNxJJpEGjyLNYxMRPwQ4N3wH5Ov/Uz33bd8mZfTgk+BLqbQcOlA7k7pyr+56M5acuIBZ9QeDaB/dn+qtW8pNvv95vbE1Iko4U7dl7pBP5ScjXIhnOpUsZDDourafJg14cqHQmx7N92ylE0ZcEpk+vCn3/rlWr1uFwya9s2EopWP5CIplIulLuWH575cq1lI32ZDI4OOvXr7+UuwT5Sf+TQX6qhA9BopN94EDc7F095UBfJVlHYx29Ynl+wwbgWa+SSPBMJgvJMuAFS776b2PVuhuQb15pZS1mhdwVrBLxV1jOJciV6FeONyQ/ADmFat85sHe6iZG3whOf9eVkg+Tqp82s6iVfr8gJbfAI6Fqe28jy0ySXc3izWr7BkpdKvdH7ja3yfnfTcXot36ro7qB36VxdGq5sNXO5a7ynwrGwPJVa6U5lJWqvSP84lLx12K3l8RKlN7pqff9+rzwLOOPb8tG5qQhUWmQgrKc3LBd6yotnOFYfOcfIQ6KjdY98GHWet9kLBN+KoVIWOXTGrt6JXuDSOdO9gZzZSAB5rvSv6Dcg35JXcFN7AXZX56vFamI6t96pzr2tb8RkOfszAeTxUOm2S5fO8/kszeyGmxtwbMXBtbvkbQKxhOWbRY7DQQecBqI6t51AD8T8vFryeDxsunWtx0+SPEtsBO1T6ZAj7s5vtKE75HtTVhiectqZbnXuezKRCzweDp33u5Gf584RLHAjkBcAv0m9G/mNYHJu3WmHmo6AcgRySo90RNONHGp1s+d16fDbOl+xwu9aV9w498F0ruwO+sqN9GwPIGc0lpDpRs6F59nNt7o84aV007n4MOSFWvTXq851SO6527V8RYDOQ6O75YTnMF30CB52NvkKFSBbhTtPO+SIAy93OslxEnUW+TmQV7RgNXKBY2F5SK1r+Sah4yGXtR5xmOTmHa92O+Q+Mbu9feuwX2K5T5Qcdnyosz60DW/kmo7YPtcJD3cweVpKN7e6174xoByBmo6e6VWi2+UC1xs+T3TsePBRecfyNUqOQwVwGkHliCUHXaJKD4cu8u15E6jZTV8wHHIskK8JKG+/4dcGkdMw9tBaV/JNWbPhsd8tPeRWCkHksGPY6S777S46z8luD691kUO9CVNteJajcYrApfM1K9as4AMTC7/hKYuRg+1pPeXo/PGxFeoccjqZOmsgv0VyYXPdTMcIp/XVx0+OhlzRs1a4cy2/SfJruEAbHQNZwYMXLS9T5144Dod8jZcuU9FFTmosDOcRTuuvXq2CPAu55cZkN75Qcsaz3Dcihxvx4DEccnhxIOyXV+YN5MduPXi5L7deOpcJPc8e6f2Jvv8ayZFNedhZropXtd8EfEPyyLXlyzuTI2XgWc7LDsARsZvOTRTd+ROh5WLXkRte03d2S7+2avQmuCGngYBPavw5TVZKxyxsaHQiX07ychlyctM0lSu3kftF5EzPqUe8/nDvuXWWc+UI6FAzHmze71uUXeTG6ADLisM84fhA3a57Pbh8PdHFnCvl1G43H26wz5wKTWB69UTz6cGDQkfltEjrmNS6ROSg80DYKW8w6Q0vx5QctZPfEXfny9VAAOWVXzjkii6dIyKP69YhX9YNvXmi+fwZ07HfcUDNcKGTPK/lLSN0CeSy2yUpLz1l5K5zeF9ZctiZbuBqSuuHB86M7O6CDvnIJ6Dr1jERuBmucwVy34g87YiLbpP7RO12dI6+gde3utRuPtdnLt09qAt6tfnwKdMRorOf8YhqXeSxjuTpdNEr3yGL0FNB5LzdVes5Wkq6fKafOjxzENJN6w+fC53tEmLb6IHkRbccYtGzPKU794t6whEcM856k5J6xF+YOWjPnm7okx4utNHRudzrtqD1vEse0y9int1ONzpNrEw3esh5ijzWibwCOsfy0gsTkf9auudoV60PfzhS0zdZydr5VudA+iQm8nRRWvc+6eA3cldireWAqw2fi2Pa3TS2lU79ig06uqdHurZjswtc6Nm8Vx5rKy8iDrqosd2xbt68ObXZK0d85KAbd07LS/FTby7X9uwh+pgeW2d8lvCGruQxDAc+xhOHlifLSQU3dInYU265/u62m8gmp4GArt18lMQO+b3oILQeAh1Rt7vCs9w/xx5/aJTLyWSxXEy79LzTBS7ymE+0XJWOKW6eJUzJgTf3YrXdIdBh58iNbuS3YtFO5Njt6Bz2NA7vlqfe28nRuT2WPKNLp96pbsE75MfCoVulZxnfTr68tfxHI0kB3t26utNTTnl7/7F7JM9AS43raTPneIF8+bFobfeeUOjmORek86iWl4VedNDToCMir8X8Urt3leSZzPoMkXOykJ/IvCj55WPRMOh6u0OOaHk0gBzBvV703usiL3ciPyZyhLc5FgSrrW/TeUzoR8O61/l3ra7Ooxj+ndPAje6xp0R+BvK/7SFAlDwngypHZJXSbZ1DHhZ9k4qr86ihR+UFr1F5WxO5rh2xs1F6Om3k8p0MlYaOlm/k/a4ecTTi0rtHLvQ9YX24CVzJW9Kjiq7kBu7pnGoXuZzAQ5cTmvscf/XK8gx1rZonMIZDHi497+qcjXarbcWXarcXzFMuWXbi+YNtL8nFjUPO4KZHIVedw42QnAfSovOQ6YhNzjrzhTe1FyRPlInt+HTTerXbX9SiknZnjEUtuSRHU5Wei8O+3in/V/RNJPdP7dznRiIBO8sxvU94utf3GnkLsYqWb0S4dNQuekTUdnn4dNO5v/zxxQTYBaCVvMi1OyNyvxi5TPVxLnTYczn757kkEgmRjgSQ4y43+72MIc85+oTrRB7BcMip7gpvd17ANr+k0fKY7Wy12qAw6SyPdNZ5geAJLl0OyMltskPLvXCn/BLJYQcek/ggm97dcmk9TLq/PGLkcqNLqHMayF92e8S5Roz8dgVwyCUiB1q3rna7Qx7ZHSYd8kgtQqeVs9MLPjD5K/lL6ZztBb7VZRG6q/NIm0TVF5ac4GyviB0DZEsPuOk8fLqR+wXyQqKQQLh3cWMwvUz4opH7Re12+YfCpvWKwKV77vz6ZZd8We/04HL5LwEQ893O9iLpuXQ6Asvp0Pe6PObWZ4gtIfkf1u2YNYooigJwpX/DxtI+f0IEZ1zFlVWQLJJonIkQFhuDBFLEkMZiBUkXazFFIiimsNFGxJ9gYS0I1p53z957817ynNnZOTPMrEKG+XLuvEyRTOVqN3UEvfWdhVt/2lL+jfIQzLsvcwjsSJfOo4kHHIEdZjZPefK1ZW/0IC8bb3bb5Rh27FSv20t82CjfbiX/OAp/ETMWurXu7zRR53F6o7PzdvKhRuxSvNCxy7xvvGgr//5xMh6HaR/HSzzkSPjhnsj7bz037eWpj2WpctlADvboFZ5r/ExeYrMLlHos+SlcDHJ0Ln8SAD7HfZXruw484LnOy37oLi8Tb3TbUefC9sqt9fWNZyr3axncP2+/FzmCyhHCg5rh+uadp/SeWs8+52V22hGTOx5h55nvoMXlCOC0+8Rr65G8/9Yp5yjiwLZ0xnHgSeWR3eks3TuX8Hr2UacdH0R+QjhLj0O6yzlD/tQ4fWcR+iN2XjI86wcP5DXdGoV77yovm2Kd+7wTz2eddMh3/1Buj482gxQL002ejcvrIfPYW/dw2tvK2bnXrnyfd7zT7ErnWoR1j2Mv9Kec9tZyT1o65OtzdU642dOBh3w65dWSSYzpVzrSX7aVV1m5Dzzkx3PK5ce6l+7htGev5vTB9Y703x/CG3ErudZu8AS/EeRbbacdduUncmYSpj0vLwrSX/9Ywu/NdaB/+Xx0eLNRvhWmfaWGPU7SucuLInO71vlI2GtBz5mP3Q8g/8lpz2UbdMj/Ll3oRP8K+a3pefRCNuyUV8OVKpWn61zUeYEd0X/5RSlfQ8Zp7eB787t/KM8mtC7yzS70q5+P9g8PVV5Iwkn/wWOQVzV22m3qne3TrtfwE7S8HjOTw47eNWeWOeu8+N+8gw55N/qno33QVe43rJ8pP4Z8JciH3KxybK5/I50XUZQOQCyHG5HSJ4DrUpfKZ0UUVoTPkNzZzt+lzc1O9E9He3tGj7x+r6XKK0NXjvew8zR+MSq2KGdGY8w88RqVc9qJJbhIO0cuHkPeiX5tD3LSnZ0G8hWRY+SBxjl+iW+WM+m0Q20DL2h90K3zU9841m9t2K0tvXrVjX4pop9vt85ZOwqnXOnkb7x53CjXzu+ujYQOe7TOnVrjVZ4OoG0c9x+/3nalX57Rp5ygJnmA167mZs95e7lE5KKHOe7dO88sHCY/WJzeJKe9hj3RD7vLiWfzwPsrzarL86H84KAz3Qe+4TlHoK4rYVfps76+iNxD+6S1HL8e3PvAp9POCJr4iD6c6zlPEsmReeQ90KfTrHy5Wq402nadyO+IfIAvwGEwwBEHHOXE/zb5s/+VPtbOt1rJ+6Gr/PSdJ3LS6bfAzc4HDUk6J131tsTfX83JB2flT3qh3yCdRWGTmNwj7AgP+dDl+Vjn2HO931c5p2WAhGNKpxy/Hdxf6wNNLI/0XOAt7Ly9nO4MfRU75M/9aqT7WQeA8n5al9LPky9T7vA6Hvh55Pdm8nSNx2FCOzp/DnlTgvw2sih9n/SMXOzhx1stbzSAJ8vcPHLQw7Z2IuoR9hO+zOEU0l4Od1/0aU4OuhUP/VC3Tp3Tjl0r5w74nPJ3cPfY+ln5Q8AVXxOPDe66k5z5R8z5vLQNhnE8PYXUigqDevHSTU/z0pP0D1DnEHbxIMy5waCTHnQkrkioEEpBEZGBIsqGF0chUCxeVmShCkKhJ8k1l6LgZZfRUdhx3/d5Y1rr6pvWST/v877+IInvJ89raOB93+Iqkr6KvHv6bMgz+znf5t6M0Y7VwbO3/BPN7h1zWg1B4igY8O6YhzgNfJ53v+bOBpkTbyjrXtrnvLeYH77N+ewSN+0PVEfW9Vbmnj5YuikA729Lvs2Xoc4nyxZpojT+0VfnkP4i3Fm0Zx6vp/2QVnaOPCTrus7cUfENNyfeeyDtC3jgMRbdJ94CzOk0NPwLb1345VzzeYijQaHM86CHHa9FMmdnedW7iPuza86nUAJypxHfkfqYq24Yhk6QuckWdDeSoBVg3rJ25p9YTJC5gJlCGuYAc8qWEfOIfy15ZeYwFADzeDzJgDrdAagfjYBXbav3vfvK1evo383ySnmlGdqvpg5uhGnrhghdToe/nWBfPgEbl6oqvtqMfZ1MZpONfJg9PMIWwkcv21PH0eOvoX5aUOvotlkun1Pcx0oZ5qoIQ07nls5OGGhbEvlY0zRDFaHb+ewdkrOfsYnwp5jULsNfYH5a0DRNdbHN83sJI1hj2oYqRNaHEmdiTmqyrGrC+2jnI5GLCCqFSzYbxy7TT6X2mTqGuixrLqodLfngvBS1VU0EzGthAQ7q2R4zF6HaeaeZC+eC5H9PdqAeGDuGOty5vR0dDA4GEby0oBQUmwNZ3SsFc42FmmbCZC7ENnPNXOacnONEIrVxqRMCfYZcJzp4L0EWAOayCE1O7wX98Isd25qbEWQOtaB2DfPOmOzbqVZ3GNWdLeJnM1u3+YPDxVSnt3yBP9sKdAzjoVDYxTt83qX59OnnIalzhmOxHk6IM0pceUyEbtHjk5AQ8dXGrxoYBVOhW8QC0n9lolKpWJaiDDAUy3oidY3ehq4oilWp9EqPR0AKQN1SBlIHB5lMZjs1oHRNPcDULerLNutKv7Lei18+HlC31pXUQWZzf21tf3M79ULqGlCHOcTRF9aV/sfMOtT/klvHuA2FMBiAkd6ULa16iu48qUul9lxkQTyJDCzoTRkYLVi4QUfGnIGZE3QNGClDdnCk/BewPxksf2K5zegYQtJmJ6XjzLeLjimtxuxfbGSQftq3SwzZ56Q3WjpOofWS+bqa4fTz8bTXcldrfYjml1HlTtcp+9LsM+hYzoL1XFPS65LD9558qeGz6MEDgOUrLf0N/x72Usr/FDqWkxJyIqe3v9foMJ7+1+lXC0qC56T0c6PrmC3INvbh9MOx/q9aTioFhf8wsnR6XzuqNfPOHjKQLm0mpuPGxV7cFHpdLanT4Xnoyk2ki/bISOmHTveglHAOZtFBCfFa9A+8Y3WlS6R/M5I80kWlu1l0nLp8GvqyTKC3E/5OB1o6nvCh05fh9Bu7doybQBBDYXiQm0mZG6SJlC7JDXIsF6ZBEylpt0yRfhpuwp0YxEqsoIHm+WntdwI+/R4KxO+S3ojo/xD69/y+jID+h6/OQkcf/Lm6DvpXuX8rqc5AHz8SutB3gy40dEHTrTVXuuPBCwN973Pw1j4KfLf0XZNw9O1MB1c35aD/OFRXVWM5eFMYvY/qBPTzwU8Rq289vuaIqh8mD7pEpVcOeh90C1xd4dXtveB3Szcgvc/0xkFvBq6uHPSOPfhOdvAKpo+x0EUUXV0I6H3Qwx388+LgwdWrulZ/utAFTzcSuqlEpQueLm/lga3j4Ke49KzOQte4b33QwdVrXDpN9cBvHUyvRHSFV68al85SXRzon+WBrap60IOvYxqzeiWqLll9uaQnPelJT/oK6Ih/VZTX014WK27bXH+WTcnlcrlcLpfLHTcKRsEoGAWjYBQMcQAANMdXEG0K8Y8AAAAASUVORK5CYII="}}]),t}();function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function DO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?TO(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var IO,wO;!function(t){t.On="1",t.Off="0"}(IO||(IO={})),function(t){t.Success="success",t.Error="error"}(wO||(wO={}));var PO=function(t){u(i,t);var n=kO(i);function i(t,a){var r,c,u,d,h,p,g,m,v,y;return s(this,i),f(l(y=n.call(this)),"assets",void 0),f(l(y),"logModule",void 0),f(l(y),"pageHandlerModule",void 0),f(l(y),"flyoutData",void 0),f(l(y),"utilities",void 0),f(l(y),"currentProviderType",void 0),f(l(y),"strings",void 0),f(l(y),"cardNumberLast4Digit",void 0),f(l(y),"cardHolderName",void 0),f(l(y),"cardExpires",void 0),f(l(y),"GetModuleName",(function(){return Rt.VIRTUAL_CARD})),f(l(y),"ShouldRenderModule",e(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1===(null===(e=y.flyoutData.dataStoreModule)||void 0===e||null===(n=e.VirtualCardData)||void 0===n?void 0:n.hasError));case 1:case"end":return t.stop()}}),t)})))),f(l(y),"populateMainHeader",(function(){})),f(l(y),"renderModule",e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,C,b,S,x,E,A,T,D,k,I,w,P,O,R;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.strings=y.GetStringForCurrentProvider(),y.utilities.applyStyles(y.flyoutData.common.shopping,y.assets.getStyles(),void 0,y.assets.getDarkModeStyles()),(h=document.createElement("msft-edge-shopping-section")).id="virtual-card-section",h.accordion=!1,null!==(e=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==e&&e.isLinking&&(y.flyoutData.dataStoreModule.VirtualCardData.isLinkingSuccess?(g=y.renderMessageBar(y.utilities.replaceValueInKey("virtualCardLinkSuccess",y.flyoutData.strings.virtualCardLinkSuccess,null!==(p=null===(f=y.strings)||void 0===f?void 0:f.payment)&&void 0!==p?p:""),wO.Success),h.appendChild(g)):(C=y.renderMessageBar(y.utilities.replaceValueInKey("virtualCardLinkFail",y.flyoutData.strings.virtualCardLinkFail,null!==(m=null===(v=y.strings)||void 0===v?void 0:v.payment)&&void 0!==m?m:""),wO.Error),h.appendChild(C))),(b=y.utilities.createElement("h2")).classList.add("txtLarge","mainTitle"),b.style.textAlign="center",b.style.fontWeight="500",b.style.marginTop="-20px",b.id="vitual-card-title",b.textContent=null!==(n=null===(i=y.strings)||void 0===i?void 0:i.title)&&void 0!==n?n:"",h.appendChild(b),(S=document.createElement("p")).classList.add("txtMedium","description"),S.id="vitual-card-description",S.textContent=null!==(a=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==a&&a.isAutofillSuccess?null!==(r=null===(s=y.strings)||void 0===s?void 0:s.autofillSuccess)&&void 0!==r?r:"":null!==(l=null===(c=y.strings)||void 0===c?void 0:c.autofillFailed)&&void 0!==l?l:"",h.appendChild(S),x=y.renderVisualizedCard(),h.appendChild(x),(E=document.createElement("div")).classList.add("card-info"),A=y.renderCardInfoCard(),null!==(u=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==u&&u.billingInfo?(D=y.cardHolderName?y.flyoutData.strings.virtualCardBillingInfoHeader:y.flyoutData.strings.virtualCardBillingAddressHeader,k=y.renderBillingInfoCard({contentText:null===(T=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===T?void 0:T.billingInfo,headerText:"".concat(D," "),id:"billing-info"}),E.appendChild(k)):null!==(d=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==d&&d.cardHolderName&&(w=y.renderBillingInfoCard({contentText:null===(I=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===I?void 0:I.cardHolderName,headerText:"".concat(y.flyoutData.strings.virtualCardCardHolderNameHeader," "),id:"billing-info"}),E.appendChild(w)),E.appendChild(A),h.appendChild(E),y.strings&&y.strings.disclaimerText&&((P=document.createElement("div")).className="bnpl-disclaimer",y.applyStyle(P,{fontSize:"10px",lineHeight:"normal",margin:"10px 20px 20px 20px",textAlign:"center"}),O=y.strings.disclaimerText,y.strings.disclaimerLinkUrl&&y.strings.disclaimerLinkText?((R=document.createElement("A")).target="_blank",R.href=y.strings.disclaimerLinkUrl,R.textContent=y.strings.disclaimerLinkText,y.utilities.replaceElementInKey(P,O,R)):P.textContent=O,h.appendChild(P)),t.abrupt("return",y.CreateModule(h,wt.VIRTUAL_CARD,Rt.VIRTUAL_CARD,_t.HOME,Ft.BLOCK));case 29:case"end":return t.stop()}}),t)})))),f(l(y),"GetStringForCurrentProvider",(function(){var t,e;switch(y.currentProviderType){case Ut.ZIP:return{autofillFailed:y.flyoutData.strings.zipPayVirtualCardHeaderAutofillFailedDescription,autofillSuccess:y.flyoutData.strings.zipPayVirtualCardHeaderDescription,cardDetails:y.utilities.replaceValueInKey("VirtualCardDetails",y.flyoutData.strings.zipPayVisualizedCardDetails,y.cardNumberLast4Digit,y.cardHolderName,y.cardExpires),cardUrl:"https://zip.co/us",payment:y.flyoutData.strings.zipPayPayment,title:y.flyoutData.strings.zipPayVirtualCardHeaderTitle};case Ut.AFFIRM:return{autofillFailed:y.flyoutData.strings.affirmVirtualCardHeaderAutofillFailedDescription,autofillSuccess:null!==(t=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==t&&t.billingInfo?y.flyoutData.strings.affirmVirtualCardHeaderDescription:y.flyoutData.strings.affirmVirtualCardHeaderNoBillingInfoDescription,cardDetails:y.utilities.replaceValueInKey("VirtualCardDetails",y.flyoutData.strings.affirmVisualizedCardDetails,y.cardNumberLast4Digit,y.cardExpires),cardUrl:"https://www.affirm.com/user/signin",disclaimerLinkText:y.flyoutData.strings.affirmDisclaimerLinkText,disclaimerLinkUrl:"https://helpcenter.affirm.com/s/",disclaimerText:y.flyoutData.strings.affirmDisclaimerText,payment:y.flyoutData.strings.affirmPayment,title:y.flyoutData.strings.affirmVirtualCardHeaderTitle};case Ut.KLARNA:return{autofillFailed:y.flyoutData.strings.klarnaVirtualCardHeaderAutofillFailedDescription,autofillSuccess:null!==(e=y.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==e&&e.billingInfo?y.flyoutData.strings.klarnaVirtualCardHeaderDescription:y.flyoutData.strings.klarnaVirtualCardHeaderNoBillingInfoDescription,cardDetails:y.utilities.replaceValueInKey("VirtualCardDetails",y.flyoutData.strings.klarnaVisualizedCardDetails,y.cardNumberLast4Digit,y.cardExpires),cardUrl:"https://app.klarna.com/login",disclaimerText:y.utilities.replaceValueInKey("klarnaDisclaimerText",y.flyoutData.strings.klarnaDisclaimerText,y.flyoutData.strings.klarnaCustomerServiceNumber),payment:y.flyoutData.strings.klarnaPayment,title:y.flyoutData.strings.klarnaVirtualCardHeaderTitle}}return null})),f(l(y),"applyStyle",(function(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))})),f(l(y),"renderMessageBar",(function(t,e){var n=document.createElement("div");y.applyStyle(n,{boxSizing:"border-box",display:"flex",marginBottom:"20px",marginTop:"-35px"});var i=document.createElement("div");i.classList.add("message-bar",e),i.setAttribute("role","group"),i.setAttribute("aria-label",t);var o=document.createElement("span");o.setAttribute("aria-hidden","true"),o.classList.add("icon");var a=e===wO.Success?y.assets.getSuccessIcon():y.assets.getErrorIcon();o.innerHTML=a,i.appendChild(o);var r=document.createElement("div");r.classList.add("content"),r.textContent=t,i.appendChild(r);var s=document.createElement("fluent-button");return s.classList.add("cancel"),s.appearance="lightweight",s.style.color="#000",s.ariaLabel=y.flyoutData.strings.dismissMessageAriaLabel,s.innerHTML=y.assets.getCancelButton(),s.addEventListener("click",(function(){i.remove(),y.resizeFlyout()})),i.appendChild(s),n.appendChild(i),n})),f(l(y),"appendZipCardInformation",(function(t){var e=document.createElement("span");y.applyStyle(e,{color:"#FFF",fontFamily:"monospace",fontSize:"18px",left:"164px",position:"absolute",top:"70px",userSelect:"none"}),e.textContent=y.cardNumberLast4Digit;var n=document.createElement("span");n.textContent=y.flyoutData.strings.visualizedCardHolderHeader,n.classList.add("card-title"),y.applyStyle(n,{left:"24px",top:"114px"}),t.appendChild(n);var i=document.createElement("span");i.textContent=y.flyoutData.strings.visualizedCardExpiresHeader,i.classList.add("card-title"),y.applyStyle(i,{left:"124px",top:"114px"}),t.appendChild(i);var o=document.createElement("span");o.textContent=y.cardHolderName,o.classList.add("card-text"),y.applyStyle(o,{left:"24px",top:"130px"}),t.appendChild(o);var a=document.createElement("span");a.textContent=y.cardExpires,a.classList.add("card-text"),y.applyStyle(a,{left:"124px",top:"130px"}),t.appendChild(a),t.appendChild(e)})),f(l(y),"appendAffirmCardInformation",(function(t){var e=document.createElement("span");y.applyStyle(e,{color:"#FFF",fontFamily:"monospace",fontSize:"18px",left:"80px",position:"absolute",top:"96px",userSelect:"none"}),e.textContent=y.cardNumberLast4Digit;var n=document.createElement("span");n.textContent="Exp. ".concat(y.cardExpires),n.classList.add("card-title"),y.applyStyle(n,{color:"white",fontSize:"16px",left:"24px",opacity:"1",top:"127px"}),t.appendChild(n),t.appendChild(e)})),f(l(y),"appendKlarnaCardInformation",(function(t){var e,n,i={color:"white",fontFamily:"monospace",fontWeight:"400",left:"20px",opacity:"1",position:"absolute",userSelect:"none"},o=DO(DO({},i),{},{fontSize:"12px",top:"90px"}),a=DO(DO({},i),{},{fontSize:"12px",top:"105px"}),r=document.createElement("span");y.applyStyle(r,DO(DO({},i),{},{fontSize:"16px",top:"65px"}));var s=null===(e=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===e?void 0:e.cardNumber.match(/.{1,4}/g);r.textContent=(null==s?void 0:s.join(" "))||"";var l=document.createElement("span");l.textContent="MM YY",y.applyStyle(l,o);var c=document.createElement("span");c.textContent="CVV",y.applyStyle(c,DO(DO({},o),{},{left:"94px"}));var u=document.createElement("span");u.textContent="".concat(y.cardExpires),u.classList.add("card-title"),y.applyStyle(u,a);var d=document.createElement("span");d.textContent="".concat(null===(n=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===n?void 0:n.cardCVC),y.applyStyle(d,DO(DO({},a),{},{left:"94px"}));var h=document.createElement("span");h.textContent="Limited Use Virtual Card",y.applyStyle(h,DO(DO({},i),{},{fontSize:"12px",top:"135px"}));var p=document.createElement("span");p.textContent="Commercial",y.applyStyle(p,DO(DO({},i),{},{fontSize:"9px",top:"147px",left:"207px"})),t.appendChild(l),t.appendChild(c),t.appendChild(u),t.appendChild(h),t.appendChild(d),t.appendChild(p),t.appendChild(r)})),f(l(y),"renderVisualizedCard",(function(){var t,e,n=document.createElement("div");switch(n.id="visualized-card",n.setAttribute("aria-label",null!==(t=null===(e=y.strings)||void 0===e?void 0:e.cardDetails)&&void 0!==t?t:""),n.setAttribute("role","img"),y.applyStyle(n,{backgroundImage:'url("data:image/svg+xml;utf8,'.concat(encodeURIComponent(y.GetBackgroundForCurrentProvider()),'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"170px",margin:"0 auto",position:"relative",width:"280px"}),y.currentProviderType){case Ut.ZIP:y.appendZipCardInformation(n);break;case Ut.AFFIRM:y.appendAffirmCardInformation(n);break;case Ut.KLARNA:y.appendKlarnaCardInformation(n)}return n})),f(l(y),"renderCardContent",(function(t){var n,i=t.headerText,a=t.contentText,r=t.id,s=t.sensitive,l=t.showContentToggleTooltip,c=t.hideContentToggleTooltip,u=document.createElement("h3");u.classList.add("card-header"),u.textContent=i;var d="".concat(r,"-show-hide-content"),h=document.createElement("div");h.classList.add("card-content");var p=document.createElement("span");p.classList.add("content-text"),p.textContent=null!==(n=s?null==a?void 0:a.replace(/./g,""):a)&&void 0!==n?n:"",p.id=d,p.dataset.content=a,h.append(p);var f=document.createElement("div");if(f.setAttribute("role","group"),f.setAttribute("aria-label",y.flyoutData.strings.virtualCardDetailsActions),f.classList.add("content-controls"),s&&l&&c){p.setAttribute("aria-hidden","true");var g=document.createElement("fluent-button");g.id="".concat(r,"-show-hide-toggle"),g.style.width="16px",g.style.minWidth="16px",g.style.height="16px",g.style.fill="currentcolor",g.title=l,g.dataset.isShowing=IO.Off,g.ariaLabel=l,g.innerHTML=y.assets.getShowIcon(),g.addEventListener("click",(function(t){var e,n=t.currentTarget,i=(null==n||null===(e=n.dataset)||void 0===e?void 0:e.isShowing)===IO.On,o=document.querySelector("#".concat(d));if(n){var a,r,s,u,h;if(i){if(n.dataset.isShowing=IO.Off,n.innerHTML=y.assets.getShowIcon(),n.title=l,n.ariaLabel=l,o)o.setAttribute("aria-hidden","true"),o.textContent=null!==(a=null===(r=o.dataset)||void 0===r||null===(s=r.content)||void 0===s?void 0:s.replace(/./g,""))&&void 0!==a?a:""}else if(n.dataset.isShowing=IO.On,n.innerHTML=y.assets.getHideIcon(),n.title=c,n.ariaLabel=c,o)o.setAttribute("aria-hidden","false"),o.textContent=null!==(u=null===(h=o.dataset)||void 0===h?void 0:h.content)&&void 0!==u?u:"";n.focus()}})),f.appendChild(g)}var m=document.createElement("span");m.id="indicator-".concat(r),m.setAttribute("aria-live","assertive"),m.setAttribute("aria-relevant","all"),m.setAttribute("aria-atomic","true"),m.style.position="absolute",m.style.left="-999em",m.textContent=y.flyoutData.strings.couponCopied;var v=document.createElement("fluent-button");v.id="".concat(r,"-copy-button"),v.style.width="16px",v.style.minWidth="16px",v.style.height="16px",v.style.fill="currentcolor";var C="".concat(y.flyoutData.strings.copyButtonTooltip," ").concat(i);return v.title=C,v.ariaLabel=C,v.innerHTML=y.assets.getCopyIcon(),v.addEventListener("click",e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.appendChild(m),setTimeout((function(){m.remove()}),3e3),null!=(n=document.querySelector("#".concat(d)))&&null!==(e=n.dataset)&&void 0!==e&&e.content&&((i=document.createElement("textarea")).value=n.dataset.content,document.body.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),document.body.removeChild(i)),v.focus();case 5:case"end":return t.stop()}}),t)})))),f.appendChild(v),h.append(f),[u,h]})),f(l(y),"renderBillingInfoCard",(function(t){var e=document.createElement("div");e.setAttribute("aria-label",t.headerText),e.classList.add("virtual-card-info-card","virtual-card-info-single-column");var n=Zs(y.renderCardContent(t),2),i=n[0],o=n[1];return e.appendChild(i),e.append(o),e})),f(l(y),"GetBackgroundForCurrentProvider",(function(){switch(y.currentProviderType){case Ut.ZIP:return y.assets.getZipCardBackground();case Ut.AFFIRM:return y.assets.getAffirmCardBackground();case Ut.KLARNA:return y.assets.getKlarnaCardBackground();default:return null}})),f(l(y),"renderCardInfoCard",(function(){var t,e,n,i=document.createElement("div");i.classList.add("virtual-card-info-card");var o=document.createElement("div");y.applyStyle(o,{display:"flex",flexDirection:"column",rowGap:"8px"});var a={contentText:null===(t=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===t?void 0:t.cardNumber,headerText:y.flyoutData.strings.virtualCardNumberHeader,hideContentToggleTooltip:y.flyoutData.strings.hideContentToggleTooltipCardNumber,id:"card-number",sensitive:!0,showContentToggleTooltip:y.flyoutData.strings.showContentToggleTooltipCardNumber},r=document.createElement("div");r.setAttribute("aria-label",a.headerText);var s=Zs(y.renderCardContent(a),2),l=s[0],c=s[1];r.appendChild(l),r.appendChild(c),o.appendChild(r),y.applyStyle(r,{flex:"1"});var u=[{contentText:null===(e=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===e?void 0:e.expires,headerText:y.flyoutData.strings.virtualCardExpirationHeader,id:"card-expiration"},{contentText:null===(n=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===n?void 0:n.cardCVC,headerText:y.flyoutData.strings.virtualCardCVCHeader,hideContentToggleTooltip:y.flyoutData.strings.hideContentToggleTooltipCVC,id:"card-cvc",sensitive:!0,showContentToggleTooltip:y.flyoutData.strings.showContentToggleTooltipCVC}],d=document.createElement("div");return u.forEach((function(t){var e=Zs(y.renderCardContent(t),2),n=e[0],i=e[1],o=document.createElement("div");o.setAttribute("aria-label",t.headerText),o.appendChild(n),o.appendChild(i),d.append(o)})),o.appendChild(d),y.applyStyle(d,{display:"flex",gap:"24px"}),i.appendChild(o),i})),y.logModule=a.logModule,y.pageHandlerModule=a.pageHandlerModule,y.flyoutData=t,y.utilities=a.viewModulesUtilities,y.assets=new AO,y.currentProviderType=(null===(r=y.flyoutData.dataStoreModule)||void 0===r||null===(c=r.VirtualCardData)||void 0===c?void 0:c.cardProvider)||Ut.ZIP,y.cardNumberLast4Digit=null!==(u=null===(d=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===d||null===(h=d.cardNumber)||void 0===h?void 0:h.slice(-4))&&void 0!==u?u:"",y.cardHolderName=null!==(p=null===(g=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===g?void 0:g.cardHolderName)&&void 0!==p?p:"",y.cardExpires=null!==(m=null===(v=y.flyoutData.dataStoreModule.VirtualCardData)||void 0===v?void 0:v.expires)&&void 0!==m?m:"",y}return r(i,[{key:"resizeFlyout",value:function(){if(this.flyoutData.dataLoader.IsServerData()){var t=document.querySelector("#divContentWrapper");un.queueUpdate((function(){parent.postMessage({height:t.offsetHeight,type:"resize_iframe"},"edge://shopping")}))}}}]),i}(Bb),OO=PO;function RO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var MO=function(t){u(n,t);var e=RO(n);function n(t,i,o){var a;return s(this,n),f(l(a=e.call(this,i,o)),"stateManagement",void 0),f(l(a),"ShouldRenderNotification",(function(){var t;return Promise.resolve(!0===(null===(t=a.flyoutData.dataStoreModule.VirtualCardData)||void 0===t?void 0:t.hasError))})),f(l(a),"GetNotificationName",(function(){return Mt.VIRTUAL_CARD})),a.flyoutData=i,a.utilities=o.viewModulesUtilities,a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a}return r(n,[{key:"PostProcessingNotification",value:function(t,e){}},{key:"RenderNotification",value:function(){var t,e,n,i,o=this;this.strings=this.GetStringForCurrentProvider(),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getNotificationStyles());var a=document.createElement("div");a.id="virtual-card-notification",this.applyStyle(a,{textAlign:"center"});var r=document.createElement("div");this.applyStyle(r,{backgroundImage:'url("data:image/png;base64,'.concat(this.assets.getErrorImage(),'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"90px",margin:"0 auto",position:"relative",width:"90px"}),a.appendChild(r);var s=document.createElement("h2");s.textContent=this.flyoutData.strings.virtualCardSystemFailureHeader,s.classList.add("txtLarge"),a.appendChild(s);var l=document.createElement("div");l.classList.add("description"),l.textContent=this.utilities.replaceValueInKey("virtualCardSystemFailureDescription",this.flyoutData.strings.virtualCardSystemFailureDescription,null!==(t=null===(e=this.strings)||void 0===e?void 0:e.payment)&&void 0!==t?t:""),a.appendChild(l);var c=document.createElement("fluent-button");c.classList.add("detail-button"),c.textContent=this.utilities.replaceValueInKey("virtualCardSystemFailurebutton",this.flyoutData.strings.virtualCardSystemFailureLink,null!==(n=null===(i=this.strings)||void 0===i?void 0:i.payment)&&void 0!==n?n:""),c.addEventListener("click",(function(){var t,e;o.pageHandlerModule.NavigateToUrl(null!==(t=null===(e=o.strings)||void 0===e?void 0:e.cardUrl)&&void 0!==t?t:"")})),un.queueUpdate((function(){var t,e;null===(t=c.shadowRoot)||void 0===t||null===(e=t.querySelector(".control"))||void 0===e||e.setAttribute("style","\n                width: 100%;\n                height: 100%;\n                border: none;\n                font-size: 16px;\n            ")})),a.appendChild(c);var u=this.utilities.createNotificationModule(a,this.GetNotificationName(),this);return Promise.resolve(u)}}]),n}(OO),NO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #divContentWrapper {\n            width: 376px!important;\n        }\n        ::part(tablist) {\n            place-self: flex-start;\n            margin-left: 10px;\n        }\n        ::part(header-fixed) {\n            display: none;\n        }\n        msft-edge-shopping::part(start-content) {\n            margin-top: 0px!important;\n        }\n        ::part(actions) {\n            display: flex;\n            justify-content: center;\n        }\n        .btnPrimary, .btnPrimaryColor {\n            min-width: 280px;\n            width: calc(100% - 20px)!important;\n        }\n        .headerMargin {\n            width: 100%!important;\n            margin: auto;\n        }\n        .headerBlock .btnPrimary, .btnPrimaryColor {\n            width: calc(100% - 12px)!important;\n        }\n        msft-edge-shopping {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            max-height: unset!important;\n            height: Calc(100vh - 114px) !important;\n        }\n        msft-edge-shopping::part(header) {\n            margin: 0px!important;\n            text-align: left;\n        }\n        msft-edge-shopping-section::part(title) {\n            font-size: 18px;\n            line-height: 24px;\n            font-weight: 600;\n        }\n        .accordionPadding::part(title) {\n            padding: 10px 0px 6px 16px;\n        }\n        .no-padding-header::part(header) {\n            padding: 0;\n        }\n        fluent-tab-panel {\n            padding: 0px;\n        }\n        fluent-design-system-provider {\n            width: 376px!important;\n        }\n        fluent-tabs {\n            -webkit-user-select: none;\n            -webkit-touch-callout: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            background-color: #F3F3F3;\n        }\n        fluent-tab {\n            padding: 0 calc((15 + (var(--design-unit) * 2 * var(--density))) * 1px);\n            margin-top: 16px;\n            height: 22px;\n        }\n        .paneTabText {\n            font-style: normal;\n            font-weight: inherit;\n            font-size: 14px;\n            line-height: 20px;\n        }\n        msft-edge-shopping::part(content) {\n            height: 100%;\n            background-color: #F3F3F3;\n        }\n        ::activeIndicator {\n            display: none;\n        }\n        .tabIconActive path {\n            fill: #417AFF;\n        }\n        .tabSeparator {\n            width: 100%;\n            justify-content: flex-end;\n            border: 1px solid #F1F1F1;\n            margin-bottom: 0px;\n            margin-top: 0px;\n            border-bottom: unset;\n            left: 0px;\n            right: 0px;\n        }\n        .sectionSeparator {\n            width: 376px!important;\n        }\n        #divMainHeader {\n            height: 56px;\n            padding-left: 20px;\n            padding-right: 10px;\n            display: grid;\n            grid-template-columns: auto auto;\n            align-items: center;\n            border-bottom: 1px solid #DDDDDD;\n            align-content: center;\n        }\n        #divActions {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-end;\n            align-items: center;\n        }\n        .bigBlock {\n            width: 100%;\n            height: 136px;\n            border-radius: 8px;\n            background-color: var(--fill-color);\n        }\n        .smallBlock {\n            width: 120px;\n            height: 24px;\n            border-radius: 4px;\n            background-color: var(--fill-color);\n        }\n        .shimmerBlock {\n            display: inline-block;\n            -webkit-mask: linear-gradient(-90deg,#000 30%,#0005,#000 70%) right/300% 100%;\n            background-repeat: no-repeat;\n            animation: shimmerBlock 2.5s infinite;\n        }\n        .btnSeeMore.newSeeMore {\n            transition: box-shadow 500ms;\n        }\n        .btnSeeMore.newSeeMore:hover {\n            box-shadow: 0px 3px 6px rgb(0, 0, 0, 0.12);\n        }\n        .previousSection #previousCashBackSection {\n            margin-left: 0px!important;\n            margin-right: 0px!important;\n        }\n        .previousSection #previousCashBackSection button {\n            margin-bottom: 0px!important;\n            border-radius: 0px!important;\n            border: 0px!important;\n        }\n        .previousSection #divCashBackPopup {\n            margin-top: 4px!important;\n        }\n        .regionBlock {\n            margin: 0 20px 20px 20px;\n            background-color: var(--fill-color);\n            box-sizing: border-box;\n            border-radius: 8px;\n        }\n        .headerBlock::part(header) {\n            margin: 10px 20px 10px 20px!important;\n            background-color: var(--fill-color);\n            box-sizing: border-box;\n            border-radius: 8px;\n            padding: 20px 10px;\n        }\n        .noPaddingBlock::part(header) {\n            padding: 0px!important;\n        }\n        @keyframes shimmerBlock {\n            100% {-webkit-mask-position:left}\n        }\n    }"}},{key:"getDarkModeStyles",value:function(){return"\n        msft-edge-shopping::part(content) {\n            background-color: unset!important;\n        }\n        msft-edge-shopping::part(header) {\n            background-color: unset!important;\n        }\n        #divMainHeader {\n            border-bottom: 1px solid #DDDDDD4a;\n        }\n        fluent-tabs, msft-edge-shopping::part(content) {\n            background-color: #3B3B3B;\n        }\n        .bigBlock {\n            background-color: #424242;\n        }\n        .smallBlock {\n            background-color: #424242;\n        }\n        ::part(activeIndicator) {\n            background-color: #63ADE5;\n        }\n        .regionBlock, .headerBlock::part(header) {\n            background-color: #424242!important;\n        }\n        "}}]),t}();function LO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var _O=function(t){u(n,t);var e=LO(n);function n(t,i,o,a,r,c,u){var d;s(this,n),f(l(d=e.call(this,t,i,o,a,r,c,u)),"tabs",void 0),f(l(d),"assets",new NO),f(l(d),"panelHomeId","panelHome"),f(l(d),"tabHomeId","tabHome"),f(l(d),"panelContextualId","panelContextual"),f(l(d),"tabContextualId","tabContextual"),f(l(d),"contextualShopping","contextualShopping"),f(l(d),"homeShopping","homeShopping"),f(l(d),"domainEligible",!1),f(l(d),"homeModules",void 0),f(l(d),"homeModulesViewed",!1),f(l(d),"contextualModules",void 0),f(l(d),"contextualModulesViewed",!1);var h=document.querySelector("fluent-design-system-provider");return h&&h.removeAttribute("role"),d}return r(n,[{key:"renderModules",value:function(t,e,n){var i=this;this.viewModulesutilities.applyStyles(n,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());var o=performance.now();this.stateManagement.addEventListener(hn.onDataUpdate,(function(t){t&&t.detail&&t.detail.moduleType&&i.styleModulesInPane(t.detail.moduleType,n)})),this.stateManagement.addEventListener(hn.ReRankFlyout,(function(t){i.createLoadingState(i.contextualShopping,i.panelContextualId),un.queueUpdate((function(){setTimeout((function(){var e=new CustomEvent(hn.RequestRefresh,t);i.stateManagement.dispatchEvent(e)}),500)}))})),this.stateManagement.addEventListener(hn.domainEligibility,(function(t){t&&t.detail&&(t.detail.domainEligibility?(i.domainEligible=!0,i.switchTabs(!0)):(i.domainEligible=!1,i.switchTabs(!1)))})),this.stateManagement.addEventListener(hn.flyoutRefresh,(function(){var t=document.querySelector("#divActions");t&&i.createActionButtons(t,n)})),this.stateManagement.addEventListener(hn.PWILODeleted,(function(t){if(t&&t.detail&&void 0!==t.detail.index&&i.viewModulesutilities.isKeyboardClick(t.detail.event)){var e=n.querySelector("#".concat(Yt.CLOSE));e&&e.focus()}})),this.stateManagement.addEventListener(hn.PWILOEmpty,(function(){var e,n=null===(e=t.filter((function(t){return t.paneTab===_t.HOME})))||void 0===e?void 0:e.sort((function(t,e){return t.priority-e.priority}));if(1===n.length&&n[0].name===Rt.PRODUCTHISTORY){var o=document.querySelector("#".concat(i.homeShopping));o&&o.remove();var a=i.tabs.querySelector("#".concat(i.tabHomeId));a&&i.manageTabControls(a,!1,null),i.domainEligible?i.switchTabs(!0):i.switchTabs(!1)}}));var a=[];this.stateManagement.addEventListener(hn.PDPRemoved,(function(e){if(e&&e.detail&&e.detail.moduleName){var n;a.push(e.detail.moduleName);var o=null===(n=t.filter((function(t){return t.paneTab===_t.CONTEXTUAL&&-1===a.findIndex((function(e){return e===t.name}))&&t.name!==Rt.FEEDBACK&&t.name!==Rt.EMPTYCOUPON})))||void 0===n?void 0:n.sort((function(t,e){return t.priority-e.priority}));if(!o||o&&0===o.length){var r=document.querySelector("#".concat(i.panelContextualId));i.createNullState(r),Ye("isPDP","false");var s=document.querySelector("#".concat(i.tabHomeId)),l=document.querySelector("#".concat(i.panelHomeId));s&&l&&(i.manageTabControls(s,!0,l),i.setActiveTabId(i.tabHomeId),i.updateTabItemsStyling(1))}}}));var r=document.querySelector("fluent-tabs");r?this.tabs=r:(this.tabs=this.viewModulesutilities.createElement("fluent-tabs"),this.tabs.setAttribute("orientation","horizontal")),this.renderHomeModules(t,n),this.renderContextualModules(t,n),un.queueUpdate((function(){var e,n,o,a=i.tabs.getAttribute("activeid");a===i.tabContextualId?(n=_t.CONTEXTUAL,o=i.flyoutData.common.shopping):a===i.tabHomeId&&(n=_t.HOME,o=i.flyoutData.common.shoppingPersistent);var r=null===(e=t.filter((function(t){return t.paneTab===n})))||void 0===e?void 0:e.sort((function(t,e){return t.priority-e.priority}));i.viewModulesutilities.handleFlyoutFocus(r,void 0,o,!1)}));var s=performance.now(),l=new _(A.PerfAddModulesToTabs);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"".concat(s-o),l)}},{key:"appendContentToFlyout",value:function(t){var e=this;if(t){if(!document.querySelector("#divMainHeader")){var n=this.createMainShoppingHeader(t);t.appendChild(n)}t.appendChild(this.tabs),un.queueUpdate((function(){var t,n=null===(t=e.tabs.shadowRoot)||void 0===t?void 0:t.querySelector(".tablist");n&&(n.title=e.flyoutData.strings.commonFixedTitle)}))}}},{key:"switchTabs",value:function(t){var e=this.tabs.querySelector("#".concat(this.tabContextualId)),n=this.tabs.querySelector("#".concat(this.tabHomeId)),i=document.querySelector("#".concat(this.panelContextualId));if(t)e&&(this.setActiveTabId(this.tabContextualId),this.updateTabItemsStyling(2),i&&(this.manageTabControls(e,!0,i),this.createLoadingState(this.contextualShopping,this.panelContextualId)));else{var o=document.querySelector("#".concat(this.homeShopping));n&&o?(this.setActiveTabId(this.tabHomeId),this.updateTabItemsStyling(1),this.manageTabControls(n,!0,null),e&&this.manageTabControls(e,!1,i)):e&&i&&(this.setActiveTabId(this.tabContextualId),this.updateTabItemsStyling(2),this.manageTabControls(e,!0,i),this.manageTabControls(n,!1,null),this.createNullState(i))}}},{key:"updateTabItemsStyling",value:function(t){var e,n,i=null===(e=this.tabs.shadowRoot)||void 0===e?void 0:e.querySelector(".activeIndicator"),o=null===(n=this.tabs.shadowRoot)||void 0===n?void 0:n.querySelector(".tablist");i&&(i.style.width="80%",i.style.gridColumn!=="".concat(t)&&(i.style.transform="translateX(0px)",i.style.gridColumn="".concat(t))),o&&(o.style.paddingBottom="15px")}},{key:"createMainShoppingHeader",value:function(t){var e=this.viewModulesutilities.createElement("DIV");e.id="divMainHeader";var n=this.viewModulesutilities.createElement("h1");n.className="txtMedium",n.style.fontWeight="500",n.style.fontSize="16px",n.textContent=this.flyoutData.strings.commonFixedTitlePane;var i=this.viewModulesutilities.createElement("DIV");return i.id="divActions",this.createActionButtons(i,t),e.appendChild(n),e.appendChild(i),e}},{key:"createActionButtons",value:function(t,e){new wb(this.flyoutData,this.viewModulesutilities,this.pageHandlerModule,this.logModule,this.stateManagement).createFlyoutButtons(t,!0,e)}},{key:"renderContextualModules",value:function(t,e){var n,i=this;this.contextualModules=null===(n=t.filter((function(t){return t.paneTab===_t.CONTEXTUAL})))||void 0===n?void 0:n.sort((function(t,e){return t.priority-e.priority}));var o,a=this.tabs.querySelector("#".concat(this.tabContextualId));if(a)o=a;else{(o=this.viewModulesutilities.createElement("fluent-tab")).id=this.tabContextualId,o.style.display="flex",o.style.flexDirection="column";var r=this.viewModulesutilities.createElement("P");r.className="paneTabText",r.style.color="inherit",r.textContent=this.flyoutData.strings.paneForYou,o.appendChild(r),this.tabs.appendChild(o)}if(new MutationObserver((function(){i.handleStyleTabSwitch(o),i.sendCTRLogs(i.tabContextualId)})).observe(o,{attributeFilter:["aria-selected"],attributes:!0}),document.querySelector("#".concat(this.contextualShopping))||(this.renderModulesInTab(this.contextualModules,this.flyoutData.common.shopping,this.panelContextualId,e),this.flyoutData.common.shopping.id=this.contextualShopping,this.flyoutData.common.shopping.fixedTitle=this.flyoutData.strings.commonContextualTab),this.contextualModules&&this.contextualModules.length>0&&this.contextualModules[0].name!==Rt.EMPTYCOUPON&&this.contextualModules[0].name!==Rt.FEEDBACK){this.setActiveTabId(this.tabContextualId),this.updateTabItemsStyling(2);var s=document.querySelector("#".concat(this.panelContextualId));this.manageTabControls(o,!0,s)}else o&&un.queueUpdate((function(){var t=document.querySelector("#".concat(i.homeShopping)),e=document.querySelector("#".concat(i.panelContextualId));if(t){var n=document.querySelector("#".concat(i.tabHomeId)),a=document.querySelector("#".concat(i.panelHomeId));n&&a&&(i.manageTabControls(n,!0,a),i.setActiveTabId(i.tabHomeId),i.updateTabItemsStyling(1),i.createNullState(e))}else e&&(i.manageTabControls(o,!0,e),i.setActiveTabId(i.tabContextualId),i.updateTabItemsStyling(2),i.createNullState(e))}))}},{key:"setActiveTabId",value:function(t){this.tabs.getAttribute("activeid")!==t&&this.tabs.setAttribute("activeid",t),this.sendCTRLogs(t)}},{key:"sendCTRLogs",value:function(t){var e=this;un.queueUpdate((function(){var n=[];if(e.tabs.getAttribute("activeid")===t){var i=t===e.tabHomeId?is.SWITCH_TO_TAB1:is.SWITCH_TO_TAB2;e.pageHandlerModule.RecordAsUserAction(i),t!==e.tabHomeId||e.homeModulesViewed||(n=e.homeModules,e.homeModulesViewed=!0),t!==e.tabContextualId||e.contextualModulesViewed||(n=e.contextualModules,e.contextualModulesViewed=!0),n.forEach((function(t,n){e.viewModulesutilities.sendCTRLog(t,n,e.stateManagement.getState(pn.isAutoApplyVisible),e.stateManagement.getState(pn.topModuleName),e.GetImpressionType(t.name))}))}}))}},{key:"manageTabControls",value:function(t,e,n){if(e){if(n){var i=n.querySelector(".paneNullWrapper");i&&i.remove()}t.style.pointerEvents="unset",t.setAttribute("aria-disabled","false")}else n?this.createNullState(n):(t.style.pointerEvents="none",t.setAttribute("aria-disabled","true"))}},{key:"renderHomeModules",value:function(t,e){var n,i,o=this;this.homeModules=null===(n=t.filter((function(t){return t.paneTab===_t.HOME})))||void 0===n?void 0:n.sort((function(t,e){return t.priority-e.priority}));var a=this.tabs.querySelector("#".concat(this.tabHomeId));if(a)i=a;else{(i=this.viewModulesutilities.createElement("fluent-tab")).id=this.tabHomeId;var r=this.viewModulesutilities.createElement("P");r.className="paneTabText",r.style.color="inherit",r.textContent=this.flyoutData.strings.paneHome,i.appendChild(r),this.tabs.appendChild(i)}new MutationObserver((function(){o.handleStyleTabSwitch(i),o.sendCTRLogs(o.tabHomeId)})).observe(i,{attributeFilter:["aria-selected"],attributes:!0}),document.querySelector("#".concat(this.homeShopping))||(this.renderModulesInTab(this.homeModules,this.flyoutData.common.shoppingPersistent,this.panelHomeId,e),hb.startFetchingShoppingFeedModulesData(this.flyoutData),this.flyoutData.common.shoppingPersistent.id=this.homeShopping,this.flyoutData.common.shoppingPersistent.fixedTitle=this.flyoutData.strings.commonHomeTab,this.homeModules&&this.homeModules.length>0?this.manageTabControls(i,!0,null):this.flyoutData.common.isWebAssistPending?(this.createLoadingState(this.homeShopping,this.panelHomeId),this.manageTabControls(i,!0,null)):this.manageTabControls(i,!1,null))}},{key:"renderModulesInTab",value:function(t,e,n,i){var o,a=document.querySelector("#".concat(n));a?o=a:(o=this.viewModulesutilities.createElement("fluent-tab-panel")).id=n;var r=e;if(t&&t.length>0&&t[0].name!==Rt.EMPTYCOUPON&&t[0].name!==Rt.FEEDBACK){for(var s,l,c=0;c<t.length;c++){var u=t[c];u.element.expanded=!0,c>0&&this.viewModulesutilities.addSectionSeparator(r),r.appendChild(u.element),this.viewModulesutilities.styleModules(u,c,i);try{u.moduleInterface.PostProcessing(u.name,c,u.element),this.styleModulesInPane(u,i,c)}catch(t){var d=new _(A.OnErrorInvoked);this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(u.name," ").concat(Il.getErrorString(t)),d,this.GetImpressionType(u.name))}}this.utilities.viewModulesUtilities.isStoryBookSection(i)||this.setTitle(t[0]);var h=o.querySelector(".paneLoadingWrapper");h&&h.remove();var p=o.querySelector(".paneNullWrapper");p&&p.remove(),o.appendChild(r);var f=null!==(s=t[0].name===Rt.COUPON&&this.flyoutData.common.isCheckoutPage&&(null===(l=this.flyoutData.dataStoreModule.CouponData)||void 0===l?void 0:l.IsAutoApplyAvailable))&&void 0!==s&&s,g="msft-edge-shopping-section"!==t[0].element.nodeName.toLowerCase()&&t[0].moduleLayout===Ft.BLOCK;(f||g)&&this.addClassToShopping(t[0].paneTab,"headerBlock")}a||this.tabs.appendChild(o),un.queueUpdate((function(){var t,e=null===(t=r.shadowRoot)||void 0===t?void 0:t.querySelector(".content");e&&e.scrollTo(0,0),setTimeout((function(){e&&e.scrollTo(0,0)}),200)}))}},{key:"handleStyleTabSwitch",value:function(t){"true"===t.getAttribute("aria-selected")?(t.style.fontWeight="600",t.id===this.tabContextualId?this.updateTabItemsStyling(2):t.id===this.tabHomeId&&this.updateTabItemsStyling(1)):t.style.fontWeight="normal"}},{key:"styleModulesInPane",value:function(t,e,n){var i;t.element.isPane=!0;var o=null!==(i="msft-edge-shopping-section"===t.element.nodeName.toLowerCase())&&void 0!==i&&i;if(t.moduleLayout===Ft.BLOCK)if(0!==n||this.utilities.viewModulesUtilities.isStoryBookSection(e)?o?t.name!==Rt.TIPS&&(t.element.isBlock=!0):t.element.classList.add("regionBlock"):(this.addClassToShopping(t.paneTab,"headerBlock"),t.name===Rt.CASHBACK&&this.flyoutData.common.shopping.classList.add("noPaddingBlock")),t.name===Rt.CASHBACK){var a=this.flyoutData.dataStoreModule.CashBackData;a&&a.userRebatesResponse&&a.userRebatesResponse.isRebatesUser&&t&&a.userRebatesResponse.latestCashbackApproved?t.element.classList.add("previousSection"):0!==n&&(t.element.hasPadding=!0)}else o&&0!==n&&(t.element.hasPadding=!0)}},{key:"addClassToShopping",value:function(t,e){t===_t.CONTEXTUAL?this.flyoutData.common.shopping.classList.add(e):this.flyoutData.common.shoppingPersistent.classList.add(e)}},{key:"createLoadingState",value:function(t,e){var n=this,i=document.querySelector("#".concat(e));if(i){var o=document.querySelector("#".concat(t));o&&o.remove(),(o=document.createElement("msft-edge-shopping")).id=t;var a=this.viewModulesutilities.createElement("DIV",{style:"padding: 20px; display: flex; flex-direction: column; row-gap: 8px;"});a.className="paneLoadingWrapper";var r=this.viewModulesutilities.createElement("DIV");r.className="smallBlock shimmerBlock";var s=this.viewModulesutilities.createElement("DIV");s.className="bigBlock shimmerBlock",a.appendChild(r),a.appendChild(s),a.appendChild(s.cloneNode(!1)),a.appendChild(s.cloneNode(!1)),a.appendChild(r.cloneNode(!1)),a.appendChild(s.cloneNode(!1)),a.appendChild(s.cloneNode(!1)),a.appendChild(s.cloneNode(!1)),o.appendChild(a),i.appendChild(o),setTimeout((function(){un.queueUpdate((function(){if(document.querySelector(".paneLoadingWrapper")){var t,e=new _(A.ErrorPaneStuckLoadingState);n.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"Pane stuck on loading state. Domain Elegible: ".concat(n.domainEligible),e);var i=document.querySelector("#".concat(n.panelHomeId)),a=document.querySelector("#".concat(n.tabHomeId));i&&(null===(t=i.children)||void 0===t?void 0:t.length)>0&&a&&(n.setActiveTabId(n.tabHomeId),n.manageTabControls(a,!0,i),n.updateTabItemsStyling(1)),n.createNullState(o)}}))}),15e3)}}},{key:"createNullState",value:function(t){if(!(null==t?void 0:t.querySelector(".paneNullWrapper"))&&t){for(;t&&t.lastChild;)t.lastChild.remove();t.style.height="calc(100vh - 114px)";var e=this.viewModulesutilities.createElement("DIV");e.className="paneNullWrapper",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="center",e.style.alignItems="center",e.style.textAlign="center",e.style.padding="0 45px",e.style.height="100%",e.style.height="calc(100vh - 300px)";var n=this.viewModulesutilities.createElement("DIV");n.className="nullContentContainer";var i=this.viewModulesutilities.createElement("IMG");this.viewModulesutilities.addImageSrc(i,this.flyoutData.common.resourcesEndpoint+"pane/nullState.png"),i.style.pointerEvents="none",i.setAttribute("aria-hidden","true");var o=this.viewModulesutilities.createElement("H2");o.className="txtLarge",o.style.fontSize="20px",o.textContent=this.flyoutData.strings.paneNullStateMessage,n.appendChild(i),n.appendChild(o),e.appendChild(n),t.appendChild(e);var a=t.querySelector(".paneLoadingWrapper");a&&a.remove()}}}]),n}(Mb),FO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        #aCartSectionWrapper {\n            padding: 0 20px;\n        }\n        .abandonedCartElement {\n            background: var(--fill-color);\n            border-radius: 8px;\n            padding: 12px;\n            margin-bottom: 20px;\n            display: flex;\n            flex-direction: row;\n            column-gap: 12px;\n            cursor: pointer;\n        }\n        .abandonedCartIcon {\n            height: 20px;\n        }\n        .abandonedCartDetails {\n            display: flex;\n            flex-direction: column;\n            row-gap: 2px;\n        }\n        .abandonedCartText {\n            font-weight: 600;\n            font-size: 16px;\n            line-height: 22px;\n            margin: 0px;\n        }\n        .aCartProductDiv {\n            margin-top: 8px;\n            display: flex;\n            flex-direction: row;\n            column-gap: 11px;\n        }"}},{key:"getDarkModeStyles",value:function(){return"\n        "}}]),t}();function HO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var BO,UO,VO,GO,WO,$O,zO=function(t){u(n,t);var e=HO(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"logModule",void 0),o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.pageHandlerModule=i.pageHandlerModule,o.logModule=i.logModule,o.assets=new FO,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.ABANDONED_CART}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.AbandonedCartData,n=!1;e&&e.size>0&&(this.pageHandlerModule.TriggerExperiment(Be.abandonedCart),n=null!==(t=this.flyoutData.experimentData.isExperimentActive(Be.abandonedCart)&&this.flyoutData.common.isPane)&&void 0!==t&&t);return Promise.resolve(n)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping,e=this.utilities.createElement("h2",{style:"font-weight: 600; font-size: 24px;"});e.slot="header-content",e.textContent=this.flyoutData.strings.abandonedCartTitle,t.append(e)}},{key:"renderModule",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=this.utilities.createElement("msft-edge-shopping-section");if(e.id="abandonedCartDiv",null===(t=this.flyoutData.dataStoreModule)||void 0===t?void 0:t.AbandonedCartData){var n;this.populateAbandonedCartList(e,!1,!1);var i=this.flyoutData;this.utilities.createCommonListStructure(e,this.flyoutData.strings.abandonedCartTitle,null===(n=this.flyoutData.dataStoreModule)||void 0===n?void 0:n.AbandonedCartData,this.GetModuleName(),(function(t){var e=bt.ABANDONED_CART,n=t?yn(t.keys()):null;return n&&i.common.bannerContext===Ht.VIEWALL&&(e=n.length),e}),this.populateAbandonedCartList.bind(this),void 0,!1,!0)}return Promise.resolve(this.CreateModule(e,wt.ABANDONED_CART,Rt.ABANDONED_CART,_t.CONTEXTUAL,Ft.LIST))}},{key:"populateAbandonedCartList",value:function(t,e,n){var i=this.flyoutData.dataStoreModule.AbandonedCartData;if(i){var o=0;i.size>0&&(o=i.size);var a=0;e?a=bt.ABANDONED_CART:o>bt.ABANDONED_CART&&(o=bt.ABANDONED_CART);var r=null;e?r=t.querySelector("#aCartSectionWrapper"):(r=this.utilities.createElement("DIV")).id="aCartSectionWrapper";for(var s=yn(i.keys()),l=a;l<o;l++){var c=s[l],u=i.get(c),d=this.createAbandonedCart(c,u);r?d&&(r.appendChild(d),l===a&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d.focus(),e||t.appendChild(r)):d&&(t.appendChild(d),l===a&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&d.focus())}}}},{key:"createAbandonedCart",value:function(t,e){if(!e)return null;var n=this.utilities.createElement("div");n.className="abandonedCartElement";var i=this.utilities.createElement("img");i.className="abandonedCartIcon",i.src=this.utilities.getFavIconSrc(t),i.setAttribute("aria-hidden","true");var o=this.utilities.createElement("div");o.className="abandonedCartDetails";var a=this.utilities.createElement("p");a.className="abandonedCartText",a.textContent=e.RetailerName;var r=this.utilities.createElement("p");r.className="abandonedCartText";var s=this.utilities.createElement("span");s.textContent=e.DiscountRate+"%",s.style.color="#008A21",this.utilities.replaceElementInKey(r,this.flyoutData.strings.abandonedCartPrompt,s);var l=this.utilities.createElement("div");return this.createProductList(l,e.Products),o.append(a),o.append(r),o.append(l),n.append(i),n.append(o),this.addClickHandler(n,t,e),n}},{key:"createProductList",value:function(t,e){t.className="aCartProductDiv";for(var n=e.length<=4?e.length:3,i=0;i!==n;){var o=this.utilities.createElement("div",{style:"\n                    height: 63px;\n                    width: 63px;\n                    line-height: 63px;\n                    background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.03)), url('".concat(e[i].ImageUrl,"');\n                ")});o.className="divProductImageContainer",o.setAttribute("aria-description",e[i].Title),o.setAttribute("role","image"),t.append(o),i++}if(i<e.length){var a=e.length-i,r=this.utilities.createElement("div");r.className="aCartProductImage",r.textContent="+".concat(a),t.append(r)}}},{key:"addClickHandler",value:function(t,e,n){var i=this,o=n.RetailerCartPage?"https://www.".concat(e).concat(n.RetailerCartPage):"https://www.".concat(e);t.addEventListener("click",(function(){var t=new Yr(E.AbandonedCartTile);i.logModule.LogInfoEvent(S.ButtonClick,"Clicked on abandoned cart for ".concat(e),t),i.flyoutData.common.currentDevice===St.Desktop&&i.pageHandlerModule.NavigateToRetailerSite(o,cl.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button){i.pageHandlerModule.NavigateToRetailerSite(o,cl.NEW_FOREGROUND_TAB);var n=new Yr(E.AbandonedCartTile);i.logModule.LogInfoEvent(S.ButtonClick,"Clicked on abandoned cart for ".concat(e),n)}}))}}]),n}(Bb),KO=zO,YO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n        html {\n            overflow: hidden;\n        }\n        .btnBannerPrimary {\n            background: #0078D4;\n            border: none;\n            border-radius: 2px;\n            color: #FFFFFF;\n            min-height: 32px;\n            height: auto;\n            padding: 10px 24px;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            border-width: 0px;\n            cursor: pointer;\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            font-weight: bold;\n            outline: none;\n        }\n        .bannerMainTitleAlt {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 18px;\n            line-height: 25px;\n            margin: 0px;\n        }\n        .btnBannerPrimary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        .btnBannerSecondary {\n            border: none;\n            border-radius: 2px;\n            min-height: 32px;\n            height: auto;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            cursor: pointer;\n            background: rgba(0, 0, 0, 0.07);\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            outline: none;\n            padding: 1px 15px;\n        }\n        .btnBannerSecondary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        #mainDiv {\n            display: grid;\n            grid-template-columns: auto auto auto auto;\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 50px;\n            overflow-y: auto;\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n            z-index: 3000000000;\n        }\n        .divTitle {\n            display: grid;\n            grid-gap: 10px;\n            grid-template-columns: 1fr auto;\n            justify-self: start;\n            grid-column-start: 1;\n            align-items: center;\n            margin-left: 16px;\n            margin-right: 16px;\n        }\n        #divContent {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            justify-self: flex-end;\n            align-items: center;\n            grid-column-start: 4;\n            grid-gap: 10px;\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 22px;\n            margin: 0px;\n        }\n        .copiedIndicator {\n            display: flex;\n            flex-direction: row;\n            width: 100%;\n            height: 100%;\n            z-index: 1;\n            background-color: #0078D4;\n            position: absolute;\n            align-items: center;\n            justify-content: center;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            padding: 0px;\n        }\n        .btnBannerClose {\n            width: 30px;\n            height: 30px;\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            appearance: none;\n            background: none;\n            border-width: 0px;\n            outline: none;\n        }\n        .btnBannerClose:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n            border-radius: 2px;\n        }\n        #btnDisableAutoShowBanner {\n            width: 0px;\n            overflow: hidden;\n            min-width: unset;\n            transition: width 2s;\n        }\n        .bannerBackground1 {\n            background: linear-gradient(269.25deg, #FFFFFF 3.48%, #DDF1FF 34.6%, #DDFDFF 56.91%, #F3FFF9 80.98%, #FFFFFF 100.94%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground2 {\n            background: white;\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground3 {\n            background: linear-gradient(91.11deg, #2250AB -2.43%, #3C79D6 2.35%, #D2EFFF 21.53%, #DBFDFF 42.49%, #63B8E8 52.13%, #3C79D6 58.88%, #2250AB 69.83%, #0840B0 86.55%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground4 {\n            height: 50px;\n            background: linear-gradient(91.11deg, #D2EFFF -2.41%, #DBFDFF 18.89%, #D8F5FF 27.92%, #63B8E8 40.11%, #3C79D6 49.19%, #2250AB 64.05%, #0840B0 89.38%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground5 {\n            height: 50px;\n            background: linear-gradient(269.29deg, #FFF4F8 0.61%, #FFFCDE 21.7%, #FFFDE7 63.38%, #ECFFEF 86.01%, #F1FFFE 99.39%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        #viewMorePricesButton {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            align-items: center;\n            padding: 5px 28px 5px 27px;\n            background: linear-gradient(221.42deg, #FF8A1E -21.61%, #FC5C82 109.89%, #FFD98E 150.42%);\n            box-shadow: 0px 1px 2px 1px rgba(0, 0, 0, 0.1), 0px 4px 4px rgba(0, 0, 0, 0.15);\n            border-radius: 100px;\n        }\n    "}},{key:"getWhiteTriangleButtonIcon",value:function(){return mt.getTrustedHTML(BO||(BO=j(['<svg aria-hidden="true" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M4.39519 6.5125L7.38869 2.8125C7.52119 2.649 7.52819 2.4455 7.44969 2.2835C7.37119 2.1215 7.20569 2 6.99369 2H1.00669C0.794689 2 0.629689 2.121 0.551189 2.2835C0.472689 2.446 0.479689 2.6485 0.612189 2.8125L3.60569 6.5125C3.70669 6.6375 3.85319 6.7 4.00019 6.7C4.14719 6.7 4.29369 6.6375 4.39519 6.5125Z" fill="white"/>\n        </svg>'])))}},{key:"getCloseButtonWhite",value:function(){return mt.getTrustedHTML(UO||(UO=j(['<svg id="flyoutCloseWhite" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z" fill="#FFFFFF"/>\n        </svg>'])))}},{key:"getCloseButtonSeparatorCss",value:function(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid #ECECEC;\n        transform: rotate(90deg);"}},{key:"getCloseButtonSeparatorCssWhite",value:function(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid rgba(255, 255, 255, 0.16);\n        transform: rotate(90deg);"}},{key:"getBannerConfettiImage",value:function(){return mt.getTrustedHTML(VO||(VO=j(['<svg width="405" height="50" viewBox="0 0 405 54" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <mask id="mask0" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="405" height="54">\n        <rect width="405" height="54" fill="#C4C4C4"/>\n        </mask>\n        <g mask="url(#mask0)">\n        <rect width="11.4496" height="11.4496" transform="matrix(-0.691149 0.722712 0.722712 0.691149 216.914 7)" fill="#77E0B5"/>\n        <circle r="5.72479" transform="matrix(-4.37114e-08 1 1 4.37114e-08 6.72479 30.7248)" fill="#77E0B5"/>\n        <rect width="11.4496" height="22.8992" transform="matrix(-0.258819 0.965926 0.965926 0.258819 382.963 23)" fill="#FEAC93"/>\n        <g filter="url(#filter0_f)">\n        <rect width="11.4496" height="22.8992" rx="5.72479" transform="matrix(-0.915822 -0.401584 -0.401584 0.915822 337.682 -1.40186)" fill="#F67173"/>\n        </g>\n        <path d="M111.904 13.3424C117.117 8.12971 125.569 8.12972 130.781 13.3424C135.994 18.5551 135.994 27.0065 130.781 32.2192L111.904 13.3424Z" fill="#F67173"/>\n        <rect width="9.72902" height="6.94028" transform="matrix(-0.5 0.866025 0.866025 0.5 86.8643 -5)" fill="#3F8EF6"/>\n        <rect width="11.4496" height="23.3405" transform="matrix(0.965926 0.258819 0.258819 -0.965926 235 54.5454)" fill="#38D4FA"/>\n        </g>\n        <defs>\n        <filter id="filter0_f" x="309" y="-15" width="37.6817" height="43.5695" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n        <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n        <feGaussianBlur stdDeviation="4.5" result="effect1_foregroundBlur"/>\n        </filter>\n        </defs>\n        </svg>\n        '])))}}]),t}(),jO=function(){function t(e,n,i,o,a){s(this,t),f(this,"ExperimentActive",!1),f(this,"ContentImageFile",void 0),f(this,"ContentImageSize",void 0),f(this,"TitleDivMarginLeft",void 0),f(this,"ContentDivMarginRight",void 0),f(this,"TitleDivSwapElementOrder",!1),f(this,"AddConfetti",!1),f(this,"UseSavingsTextGradient",!1),f(this,"ShowTitleInWhite",!1),f(this,"ClassName",void 0),f(this,"UseWhiteCloseButton",!1),f(this,"ExperimentsData",void 0),f(this,"FlyoutData",void 0),f(this,"PageHandlerModule",void 0),f(this,"Utilities",void 0),f(this,"CommonAssets",void 0),this.ExperimentsData=n,this.FlyoutData=i,this.PageHandlerModule=e,this.Utilities=o,this.CommonAssets=a,n.isPCBannerUXExperimentActive()&&(this.ExperimentActive=!0,n.isExperimentActive(Be.pcBannerUXExperimentation1)?(this.ClassName="bannerBackground1",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="Emoji.png",this.ContentImageSize=32,this.UseSavingsTextGradient=!0):n.isExperimentActive(Be.pcBannerUXExperimentation2)?(this.ClassName="bannerBackground2",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.AddConfetti=!0,this.UseSavingsTextGradient=!0):n.isExperimentActive(Be.pcBannerUXExperimentation3)?(this.ClassName="bannerBackground3",this.TitleDivMarginLeft=375,this.ContentDivMarginRight=187,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):n.isExperimentActive(Be.pcBannerUXExperimentation4)?(this.ClassName="bannerBackground4",this.TitleDivMarginLeft=112,this.ContentDivMarginRight=58,this.TitleDivSwapElementOrder=!0,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):n.isExperimentActive(Be.pcBannerUXExperimentation5)?(this.ClassName="bannerBackground5",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="ClappingHands.png",this.ContentImageSize=36,this.UseSavingsTextGradient=!0):n.isExperimentActive(Be.pcBannerUXExperimentation6)&&(this.ExperimentActive=!0,this.ClassName="bannerBackground6"))}return r(t,[{key:"TriggerActiveExperiment",value:function(){this.ExperimentActive&&(this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation1)?this.PageHandlerModule.TriggerExperiment(Be.pcBannerUXExperimentation1):this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation2)?this.PageHandlerModule.TriggerExperiment(Be.pcBannerUXExperimentation2):this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation3)?this.PageHandlerModule.TriggerExperiment(Be.pcBannerUXExperimentation3):this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation4)&&this.PageHandlerModule.TriggerExperiment(Be.pcBannerUXExperimentation4))}},{key:"RenderViewAllButton",value:function(t,e){function n(t,e){var n=t.querySelector("path");null!==n&&(n.style.fill=e)}var i=0;if(this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation1)||this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation2))i=20,t.innerHTML=this.CommonAssets.getArrowButtonIcon(),n(t,"#FA003C"),t.style.marginRight="-10px";else if(this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation3))i=8,t.innerHTML=(new YO).getWhiteTriangleButtonIcon();else if(this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation4)){t.id="viewMorePricesButton",t.innerText=this.FlyoutData.strings.viewMorePricesButtonText,t.style.color="white";var o=this.Utilities.createElement("DIV");o.innerHTML=this.CommonAssets.getArrowButtonIcon(),n(o,"#FFFFFF"),o.style.float="right",o.style.marginLeft="14px",t.appendChild(o)}else this.ExperimentsData.isExperimentActive(Be.pcBannerUXExperimentation5)&&(i=20,t.innerHTML=this.CommonAssets.getArrowButtonIcon(),n(t,"#FA003C"),t.style.marginRight="-10");if(t.style.backgroundColor="transparent",t.style.border="none",i>0){var a=t.querySelector("SVG");a&&(a.setAttribute("width",i.toString()),a.setAttribute("height",i.toString()))}}}]),t}(),qO=jO,ZO=function(){function t(e,n,i,o,a,r,l,c){var u;s(this,t),f(this,"logModule",void 0),f(this,"pagehandlerModule",void 0),f(this,"data",void 0),f(this,"utilities",void 0),f(this,"stateManagement",void 0),f(this,"classBtnBannerPrimary","btnBannerPrimary"),f(this,"classSpanCouponCode","spanCouponCode"),f(this,"classDivActionButtonWrapper","divActionButtonWrapper"),f(this,"idMainDiv","mainDiv"),f(this,"idContent","divContent"),f(this,"classTitle","divTitle"),f(this,"classBtnViewMorePrices","viewMorePricesButton"),f(this,"classBtnBannerClose","btnBannerClose"),f(this,"classTxtSmall","txtSmall"),f(this,"classCopiedIndicator","copiedIndicator"),f(this,"classActionsButton",gt.Primary),f(this,"cashBackData",void 0),f(this,"isCashbackActivated",void 0),f(this,"cashBackModule",void 0),f(this,"priceHistoryModule",void 0),f(this,"priceComparisonModule",void 0),f(this,"couponsModule",void 0),f(this,"isPriceHistoryExperimentActive",void 0),f(this,"isPriceComparisonExperimentActive",void 0),f(this,"isCashBackExperimentActive",void 0),f(this,"isCouponsExperimentActive",void 0),f(this,"isPCBannerUXExperimentActive",void 0),f(this,"pcBannerUXConfig",void 0),f(this,"assets",void 0),f(this,"commonAssets",void 0),this.logModule=l.logModule,this.pagehandlerModule=l.pageHandlerModule,this.cashBackModule=e,this.priceComparisonModule=n,this.priceHistoryModule=i,this.couponsModule=o,this.data=a,this.cashBackData=this.data.dataStoreModule.CashBackData,this.isCashbackActivated=null===(u=this.cashBackData)||void 0===u?void 0:u.isCashBackActivated,this.stateManagement=r,this.utilities=l.viewModulesUtilities,this.assets=new YO,this.commonAssets=c;var d=this.data.experimentData;this.isPriceHistoryExperimentActive=d.isExperimentActive(Be.bannerShowPriceHistory),this.isPriceComparisonExperimentActive=d.isExperimentActive(Be.bannerShowPriceComparison),this.isCashBackExperimentActive=d.isExperimentActive(Be.bannerShowCashback),this.isCouponsExperimentActive=d.isExperimentActive(Be.bannerShowCoupons),this.isPCBannerUXExperimentActive=d.isPCBannerUXExperimentActive(),this.pcBannerUXConfig=new qO(this.pagehandlerModule,d,a,this.utilities,this.commonAssets)}var n,i,a;return r(t,[{key:"renderBanner",value:(a=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector("#divContentWrapper"))){t.next=29;break}return this.utilities.applyStyles(e,this.assets.getStyles()),n=this.utilities.createElement("fluent-design-system-provider"),this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ClassName?n.className=this.pcBannerUXConfig.ClassName:this.data.common.currentTheme===xt.Dark?n.setAttribute("background-color","#4a4a4a"):n.setAttribute("background-color","#F7F7F7"),n.id=this.idMainDiv,i=this.populateMainHeader(),t.next=9,this.getModuleToRender();case 9:a=t.sent,(r=this.utilities.createElement("DIV")).id=this.idContent,this.pcBannerUXConfig.ExperimentActive&&(r.style.display="flex"),(s=this.utilities.createElement("P",{style:"font-weight: 600"})).className=this.classTxtSmall,this.createBannerContent(a,r,s),this.createBannerMenu(r),n.appendChild(i),n.appendChild(r),e.appendChild(n),n.addEventListener("click",(function(){d.pagehandlerModule.ShowFlyoutFromBanner(Tt.Mouse)})),n.addEventListener("mouseover",(function(){l=setTimeout((function(){d.pagehandlerModule.ShowFlyoutFromBanner(Tt.Mouse)}),500)})),n.addEventListener("mouseout",(function(){l&&clearTimeout(l)})),c=new _(A.BannerRendered),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"user saw banner with ".concat(a),c),this.pagehandlerModule.OnBannerLoad(),(u=document.querySelector("."+this.classBtnViewMorePrices))&&u.addEventListener("keydown",(function(t){"Enter"===t.key&&d.pagehandlerModule.ShowFlyoutFromBanner(Tt.Keyboard),t.stopPropagation()})),document.addEventListener("visibilitychange",(function(t){"hidden"===document.visibilityState?Ye("banneropen","false"):"visible"===document.visibilityState&&Ye("banneropen","true")}));case 29:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t=this.utilities.createElement("DIV",{style:"display:flex;"}),e=this.utilities.createElement("DIV",{style:"float:left;"});e.className=this.classTitle,this.pcBannerUXConfig.ExperimentActive&&(e.style.marginLeft=this.pcBannerUXConfig.TitleDivMarginLeft.toString()+"px");var n=this.utilities.createElement("DIV");n.setAttribute("aria-hidden","true"),n.innerHTML=this.commonAssets.getHeaderIcon();var i=n.querySelector("SVG");i&&(i.setAttribute("width","26px"),i.setAttribute("height","26px"));var o=this.utilities.createElement("H1",{style:"font-weight: 600; color: #000000;"});if(o.className=this.classTxtSmall,o.textContent=this.data.strings.commonFixedTitle,this.pcBannerUXConfig.TitleDivSwapElementOrder?(e.appendChild(o),e.appendChild(n)):(e.appendChild(n),e.appendChild(o)),t.appendChild(e),this.pcBannerUXConfig.AddConfetti){var a=this.utilities.createElement("DIV",{style:"float:left;"});a.setAttribute("aria-hidden","true"),a.innerHTML=this.assets.getBannerConfettiImage(),a.style.marginLeft="40",a.className=this.classTitle,t.appendChild(a)}return t}},{key:"createBannerMenu",value:function(t){var e=this,n=this.pcBannerUXConfig.UseWhiteCloseButton?this.assets.getCloseButtonSeparatorCssWhite():this.assets.getCloseButtonSeparatorCss(),i=this.utilities.createElement("DIV",{style:n});t.appendChild(i);var o,a=document.createElement("fluent-button");a.setAttribute("aria-label",this.data.strings.commonClose),a.id=Yt.CLOSE,a.className=this.classBtnBannerClose,a.style.marginLeft="-15px",a.style.color="#000000",this.pcBannerUXConfig.UseWhiteCloseButton?a.innerHTML=this.assets.getCloseButtonWhite():a.innerHTML=this.commonAssets.getCloseButton(),a.addEventListener("click",(function(){o=new Yr(E.BannerDismiss),e.logModule.LogInfoEvent(S.ButtonClick,"Banner Dismissed",o),e.pagehandlerModule.DismissBanner()}));var r=a.querySelector("SVG");r&&r.setAttribute("aria-hidden","true"),t.appendChild(a)}},{key:"IsPriceComparisonExperimentActive",value:function(){return this.isPriceComparisonExperimentActive||this.isPCBannerUXExperimentActive}},{key:"getModuleToRender",value:(i=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pcBannerUXConfig.TriggerActiveExperiment(),this.pagehandlerModule.TriggerExperiment(Be.bannerShowPriceHistory),this.pagehandlerModule.TriggerExperiment(Be.bannerShowPriceComparison),this.pagehandlerModule.TriggerExperiment(Be.bannerShowCashback),this.pagehandlerModule.TriggerExperiment(Be.bannerShowCoupons),e=this.stateManagement.getState(pn.topModuleName),t.t0=e,t.next=t.t0===Rt.PRICEHISTORY?9:t.t0===Rt.PRICECOMPARISON?12:t.t0===Rt.CASHBACK?15:t.t0===Rt.COUPON?18:21;break;case 9:if(!this.isPriceHistoryExperimentActive){t.next=11;break}return t.abrupt("return",Rt.PRICEHISTORY);case 11:return t.abrupt("break",21);case 12:if(!this.IsPriceComparisonExperimentActive()){t.next=14;break}return t.abrupt("return",Rt.PRICECOMPARISON);case 14:return t.abrupt("break",21);case 15:if(!this.isCashBackExperimentActive){t.next=17;break}return t.abrupt("return",Rt.CASHBACK);case 17:return t.abrupt("break",21);case 18:if(!this.isCouponsExperimentActive){t.next=20;break}return t.abrupt("return",Rt.COUPON);case 20:return t.abrupt("break",21);case 21:if(t.t1=this.isPriceHistoryExperimentActive,!t.t1){t.next=26;break}return t.next=25,this.priceHistoryModule.ShouldRenderModule();case 25:t.t1=t.sent;case 26:if(!t.t1){t.next=28;break}return t.abrupt("return",Rt.PRICEHISTORY);case 28:if(t.t2=this.isPriceComparisonExperimentActive,!t.t2){t.next=33;break}return t.next=32,this.priceComparisonModule.ShouldRenderModule();case 32:t.t2=t.sent;case 33:if(!t.t2){t.next=36;break}return t.abrupt("return",Rt.PRICECOMPARISON);case 36:if(t.t3=this.isCashBackExperimentActive,!t.t3){t.next=41;break}return t.next=40,this.cashBackModule.ShouldRenderModule();case 40:t.t3=t.sent;case 41:if(!t.t3){t.next=51;break}if(!this.isCashbackActivated){t.next=50;break}if(t.t4=this.isCouponsExperimentActive,!t.t4){t.next=48;break}return t.next=47,this.areCouponsHighSuccessRate();case 47:t.t4=t.sent;case 48:if(!t.t4){t.next=50;break}return t.abrupt("return",Rt.COUPON);case 50:return t.abrupt("return",Rt.CASHBACK);case 51:return t.abrupt("return",Rt.COUPON);case 52:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"areCouponsHighSuccessRate",value:(n=e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.data.dataStoreModule.CouponData,t.next=3,this.couponsModule.ShouldRenderModule();case 3:if(!t.sent){t.next=6;break}return i=null!==(n=null==e?void 0:e.Coupons[0].successRate)&&void 0!==n?n:-1,t.abrupt("return",i>=75);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"createBannerContent",value:function(t,e,n){switch(t){case Rt.PRICECOMPARISON:this.renderPriceComparison(e,n);break;case Rt.CASHBACK:this.renderCashBack(e,n);break;case Rt.PRICEHISTORY:this.renderPriceHistory(e,n);break;case Rt.COUPON:default:this.renderCoupons(e,n)}}},{key:"createBannerTitle",value:function(t,e,n,i){if(e&&e.length>0){var o=window.trustedTypes.emptyHTML;if(t.innerHTML=o,t.textContent=e[0],this.pcBannerUXConfig.ExperimentActive&&(t.className="bannerMainTitleAlt"),e.length>1){var a=this.utilities.createElement(n,i);a.textContent=e[1],t.appendChild(a)}if(e.length>2){var r=this.utilities.createElement("P",{style:"display: inline;"});r.textContent=e[2],t.appendChild(r)}}}},{key:"getCouponTextInfo",value:function(t,e){if(t.Coupons[0].successRate>=75)if(t.Coupons.length>1&&(t.Coupons[1].successRate<75||!t.Coupons[1].successRate)){var n=this.data.strings.bannerCouponSingularTitle,i=(n=this.utilities.replaceValueInKey("bannerCouponSingularTitle",n,t.Coupons[0].successRate.toString())).split("|");this.createBannerTitle(e,i,"B")}else{var o=t.Coupons[0].successRate;t.Coupons.length>1&&t.Coupons[0].successRate>t.Coupons[1].successRate&&(o=t.Coupons[1].successRate);var a=this.data.strings.bannerCouponPluralTitle,r=(a=this.utilities.replaceValueInKey("bannerCouponPluralTitle",a,o.toString())).split("|");this.createBannerTitle(e,r,"B")}else if(1===t.Coupons.length){var s=this.data.strings.bannerFoundCouponsSingular.split("|");this.createBannerTitle(e,s,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}else{var l=this.data.strings.bannerFoundCoupons,c=(l=this.utilities.replaceValueInKey("bannerFoundCoupons",l,t.Coupons.length.toString())).split("|");this.createBannerTitle(e,c,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}}},{key:"renderCoupons",value:function(t,e){var n=this,i=this.data.dataStoreModule.CouponData;if(i&&i.Coupons&&i.Coupons.length>0){var o;this.getCouponTextInfo(i,e),t.appendChild(e);var a=2;i.Coupons.length<a&&(a=i.Coupons.length);for(var r=this.data.strings.commonLearnMore,s=null!==(o=i.Coupons[0].successRate>=75)&&void 0!==o&&o,l=0;l<a;l++)s&&i.Coupons[l].successRate>=75?this.createCouponCodeButtons(i,r,l,t):s||this.createCouponCodeButtons(i,r,l,t);var c=document.createElement("fluent-button");i.Coupons.length>1?c.textContent=this.utilities.replaceValueInKey("bannerViewAllCoupons",this.data.strings.bannerViewAllCoupons,i.Coupons.length.toString()):c.textContent=this.data.strings.bannerViewAllCouponsSingular,c.addEventListener("click",(function(){n.pagehandlerModule.StartShopping(Tt.Banner,"viewAll")})),t.appendChild(c)}}},{key:"createCouponCodeButtons",value:function(t,e,n,i){var o=this.createBannerButtonWrapper(t.Coupons[n].couponCode+" "+this.data.strings.couponCopyLabel),a=this.utilities.createElement("BUTTON");a.className=this.classBtnBannerPrimary;var r=this.utilities.createElement("SPAN");if(r.className=this.classSpanCouponCode,r.textContent=t.Coupons[n].couponCode,r.style.display="none",e.length>t.Coupons[n].couponCode.length){a.textContent=e,o.appendChild(a);var s=this.createHoverDiv(t.Coupons[n].couponCode,!1);s&&o.appendChild(s)}else{a.textContent=t.Coupons[n].couponCode,o.appendChild(a);var l=this.createHoverDiv(e,!0);l&&o.appendChild(l)}o.appendChild(r),i.appendChild(o),this.manageBannerEvents(o,Rt.COUPON)}},{key:"renderPriceComparison",value:function(t,e){var n=this.data.dataStoreModule.PriceComparisonData;if(n&&n.CompetingPrices&&n.CompetingPrices.length>0){var i,o=n.CompetingPrices[0].IntendedPrice,a=n.CompetingPrices[0].SellerName,r=n.CompetingPrices[0];if(-1!==n.Price&&n.CompetingPrices.forEach((function(t){var e=t.IntendedPrice;e&&o&&e<o&&(o=e,a=t.SellerName,r=t)})),o&&(i=n.Price-o),i>1){if(this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ContentImageFile){var s=this.utilities.createElement("DIV");s.style.width=this.pcBannerUXConfig.ContentImageSize.toString()+"px",s.style.height=this.pcBannerUXConfig.ContentImageSize.toString()+"px",s.setAttribute("aria-hidden","true"),s.style.background='url( "'.concat(this.data.common.resourcesEndpoint,"banner/").concat(this.pcBannerUXConfig.ContentImageFile,'") no-repeat'),t.appendChild(s)}var l=(this.pcBannerUXConfig.ExperimentActive?this.data.strings.bannerFoundBestPriceAlt:this.data.strings.bannerFoundBestPrice).split("|");if(e.style.fontWeight="400",e.style.color="#000000",this.createBannerTitle(e,l,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e),this.pcBannerUXConfig.ExperimentActive){var c=this.utilities.createElement("DIV",{style:"top: 0px; position: fixed; opacity: 0; pointer-events: none;"});c.setAttribute("aria-live","assertive"),t.appendChild(c),c.innerText=this.data.strings.pcNotificationNarratorIntro+this.data.strings.commonFixedTitle+". "+this.data.strings.bannerFoundBestPriceAlt+" "+this.utilities.replaceValueInKey("pcNotificationTitle",this.data.strings.pcNotificationTitle,"".concat(r.CurrencySymbol).concat(i.toFixed(2)));var u=this.utilities.createElement("DIV",{style:"display:flex; grid-gap:5px;font-weight: 600;"}),d=this.pcBannerUXConfig.UseSavingsTextGradient?"background: linear-gradient(to right, #D0006A, #FF6B00);\n                        color: transparent;\n                        -webkit-background-clip: text;":"color: white;\n                        font-weight: 600;",h=this.utilities.createElement("DIV",{style:d});h.innerText=this.data.strings.commonYouCanSave,h.className="bannerMainTitleAlt",u.appendChild(h);var p="".concat(r.CurrencySymbol).concat(i.toFixed(2));if(this.pcBannerUXConfig.UseSavingsTextGradient)h.innerText+=" "+p;else{var f=this.utilities.createElement("DIV",{style:"font-weight: bold; color: orange;"});f.textContent=p+"!",f.className="bannerMainTitleAlt",f.style.fontWeight="bold",u.appendChild(f)}this.pcBannerUXConfig.ShowTitleInWhite&&(e.style.color="white"),t.appendChild(u)}else{var g=this.data.strings.bannerVisitItem,m=this.utilities.replaceValueInKey("bannerVisitItem",this.data.strings.bannerSave,"".concat(r.CurrencySymbol).concat(i.toFixed(2)),a),v=this.createBannerButtonWrapper(m+" "+g),y=this.utilities.createElement("BUTTON");if(y.className=this.classBtnBannerPrimary,g.length>m.length){y.textContent=g;var C=this.createHoverDiv(m,!1);v.appendChild(y),v.appendChild(C)}else{y.textContent=m;var b=this.createHoverDiv(g,!0);v.appendChild(y),v.appendChild(b)}t.appendChild(v),this.manageBannerEvents(v,Rt.PRICECOMPARISON,r)}}else{var S=this.data.strings.bannerYouHaveBestPrice.split("|");this.createBannerTitle(e,S,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e)}this.renderPCBannerViewAllButton(t,i>0)}}},{key:"renderPCBannerViewAllButton",value:function(t,e){var n;this.pcBannerUXConfig.ExperimentActive?((n=document.createElement("BUTTON")).setAttribute("aria-label","Find better prices"),n.classList.add(this.classBtnViewMorePrices),this.pcBannerUXConfig.RenderViewAllButton(n,this.data.common.resourcesEndpoint)):((n=document.createElement("fluent-button")).classList.add(this.classBtnViewMorePrices),n.textContent=e?this.data.strings.bannerViewAll:this.data.strings.pcPriceSectionTitle),t.appendChild(n)}},{key:"renderCashBack",value:function(t,n){var i=this,a=this.data.dataStoreModule.CashBackData,r=this.cashBackModule.retrieveCashBackAmount(),s=this.utilities;if(r){if(null!=a&&a.isCashBackActivated){var l=this.data.strings.bannerCashBackOnTitle,c=(l=this.utilities.replaceValueInKey("bannerCashBackOnTitle",l,r)).split("|");this.createBannerTitle(n,c,"B"),t.appendChild(n)}else{var u=this.data.strings.bannerCashBackOffTitle,d=(u=this.utilities.replaceValueInKey("bannerCashBackOffTitle",u,r)).split("|");this.createBannerTitle(n,d,"B"),t.appendChild(n);var h=s.createElement("fluent-button");this.styleDefaultState(h),h.textContent=this.data.strings.cbActivateButtonRefresh,h.addEventListener("click",function(){var t=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.cashBackModule.handleActivateCashbackClick(h,e,"Cash back activated from banner");case 2:t.sent?(i.cashBackModule.styleActivatedState(h),u=i.data.strings.bannerCashBackOnTitle,u=i.utilities.replaceValueInKey("bannerCashBackOnTitle",u,r),d=u.split("|"),i.createBannerTitle(n,d,"B")):i.styleDefaultState(h);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.appendChild(h)}var p=document.createElement("fluent-button");p.textContent=this.data.strings.bannerSeeDetails,p.addEventListener("click",(function(){var t=new Yr(E.RebatesLearnMore);i.pagehandlerModule.RecordAsUserAction(is.REBATES_LEARN_MORE),i.logModule.LogInfoEvent(S.ButtonClick,"User navigated to rebates see details from banner",t,dn.CouponImpressionId),i.pagehandlerModule.NavigateToLearnMore(cl.NEW_FOREGROUND_TAB)})),t.appendChild(p)}}},{key:"renderPriceHistory",value:function(t,e){var n=this,i=this.data.dataStoreModule.PriceHistoryData;if(i&&i.CurrentPrice&&i.DailyPrices&&i.DailyPrices.length>1){var o=i.getPriceHistoryType(),a=this.priceHistoryModule.createPriceHistoryTypeIllustration(o,!0);t.appendChild(a);var r,s=i.ProductDetails&&i.ProductDetails.currency&&""!==i.ProductDetails.currency?i.ProductDetails.currency:"$",l=this.priceHistoryModule.getPriceDifference(i,o);switch(o){case Xs.PRICEDROP:l&&(r=this.data.strings.bannerPriceDropTitle,r=this.utilities.replaceValueInKey("bannerPriceDropTitle",r,"".concat(s).concat(l.toFixed(2))));break;case Xs.PRICEINCREASE:l&&(r=this.data.strings.bannerPriceIncreaseTitle,r=this.utilities.replaceValueInKey("bannerPriceIncreaseTitle",r,"".concat(s).concat(l.toFixed(2))));break;case Xs.FAIRPRICE:default:r=this.data.strings.bannerPriceStableTitle}var c=r.split("|");this.createBannerTitle(e,c,"B"),t.appendChild(e);var u=document.createElement("fluent-button");u.textContent=this.data.strings.bannerShowPriceHistory,u.addEventListener("click",(function(){n.pagehandlerModule.StartShopping(Tt.Auto,"viewPriceHistory")})),t.appendChild(u)}}},{key:"styleDefaultState",value:function(t){t.style.minWidth="175px",t.appearance="accent",t.style.fontSize="14px",t.style.borderRadius="2px",t.style.marginTop="0px",t.style.height="32px",t.className+=" ".concat(this.classActionsButton),t.style.width="auto"}},{key:"removeFocusBanner",value:function(t){var e=t.querySelector(".".concat(this.classCopiedIndicator)),n=t.querySelector("BUTTON");e&&n&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}},{key:"createBannerButtonWrapper",value:function(t){var e=this.utilities.createElement("DIV");return e.style.position="relative",e.className=this.classDivActionButtonWrapper,e.setAttribute("role","button"),e.setAttribute("aria-label",t),e}},{key:"manageBannerEvents",value:function(t,e,n){var i=this;t.addEventListener("mouseover",(function(){i.addFocusBanner(t)})),t.addEventListener("mouseout",(function(){i.removeFocusBanner(t)})),t.addEventListener("focusin",(function(){i.addFocusBanner(t)})),t.addEventListener("focusout",(function(){i.removeFocusBanner(t)})),t.addEventListener("click",(function(){if(e===Rt.COUPON){var o,a=null===(o=t.querySelector(".spanCouponCode"))||void 0===o?void 0:o.textContent;a&&i.pagehandlerModule.StartShopping(Tt.Auto,a)}else e===Rt.PRICECOMPARISON&&n&&i.priceComparisonModule.navigateToRetailer(n,cl.NEW_FOREGROUND_TAB)})),e===Rt.PRICECOMPARISON&&n&&t.addEventListener("mousedown",(function(t){if(1===t.button)i.priceComparisonModule.navigateToRetailer(n,cl.NEW_FOREGROUND_TAB)}))}},{key:"addFocusBanner",value:function(t){if(t.querySelector("BUTTON")){var e=t.querySelector(".".concat(this.classCopiedIndicator));e&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}}},{key:"createHoverDiv",value:function(t,e){var n=this.utilities.createElement("DIV");n.className="".concat(this.classBtnBannerPrimary," ").concat(this.classCopiedIndicator);var i=this.utilities.createElement("SPAN");return i.textContent=t,n.style.visibility=e?"hidden":"visible",n.appendChild(i),n}}]),t}(),XO=ZO,JO=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            #divCheckoutWrapper {\n                margin-bottom: 10px;\n                justify-content: center;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n            }\n\n            #divAddressSection>p,\n            #divPaymentSection>p\n            {\n                max-width: unset;\n                margin:0 12px;\n                font-size: 14px;\n                line-height: 20px;\n            }\n\n            #divAddressSection>p:last-of-type,\n            #divPaymentSection>p:last-of-type\n            {\n                padding-bottom: 16px;\n            }\n            #divPaymentSection.divPaymentSectionWithZipVirtualCard {\n                margin-top: 12px;\n            }\n            #divPaymentSection p:last-of-type\n            {\n                font-size: 12px;\n                line-height: 16px;\n                margin-top: 12px;\n            }\n            #divPaymentSection ::part(control) {\n                margin:auto;\n            }\n\n            #divAddressSection .shipttl,\n            #divPaymentSection .payttl {\n                display:inline-block;\n                margin:12px 12px 8px 12px;\n                font-size: 12px;\n                line-height: 16px;\n            }\n\n            #divAddressSection img,\n            #divPaymentSection img  {\n                float:left;\n            }\n\n            #divPaymentSection .cardimg {\n                float:none;\n                display:inline-block;\n            }\n            .c011145 {\n                fill:rgba(0, 0, 0, 0.55);\n            }\n\n            #divPaymentSection,\n            #divAddressSection {\n                width: 100%;\n                height: fit-content;\n                background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.13%, rgba(221, 235, 255, 0.6) 100%);\n                border-radius: 4px;\n            }\n            #divPaymentSection[data-enabled='false'] .radio-banner,\n            #divPaymentSection[data-enabled='false'] .payttl,\n            #divPaymentSection[data-enabled='false'] .txtExtraSmall,\n            #divPaymentSection[data-enabled='false'] #divCard,\n            #divPaymentSection[data-enabled='false'] #divPaymentButton,\n            #divPaymentSection[data-enabled='false'] #zipCardTurnOff,\n            #divPaymentSection[data-enabled='false'] #msZipDescription {\n                opacity: var(--disabled-opacity);\n            }\n            #divPaymentSection[data-enabled='false'] #divPaymentButton,\n            #divPaymentSection[data-enabled='false'] #learnMore {\n                pointer-events: none;\n            }\n            #couponCheckoutDiv {\n                width: 100%;\n                height: 60px;\n                background: #E8F5FF;\n                border-radius: 4px;\n                padding-top: 12px;\n                margin-top: 12px;\n            }\n            #couponTopText {\n                font-size: 14px;\n                line-height: 20px;\n                color: rgba(0, 0, 0, 0.83);\n                margin: 0 12px 8px;\n            }\n            #couponBottomText {\n                font-size: 12px;\n                line-height: 16px;\n                color: rgba(0, 0, 0, 0.55);\n                margin: 0 12px 16px;\n            }\n            @media screen and (-ms-high-contrast: white-on-black) {\n                .c011145 {\n                    fill:#FFFFFF;\n                }\n            }\n            @media screen and (-ms-high-contrast: black-on-white) {\n                .c011145 {\n                    fill:#000000;\n                }\n            }\n\n            #divPaymentSection {\n                margin-top: 2px;\n            }\n\n            #divAddressSection {\n                margin-top: 12px;\n            }\n\n            #divAddressSection fluent-anchor,\n            #divPaymentSection fluent-anchor  {\n                float:right;\n                font-size:14px;\n                line-height:16px;\n                color:#0078d4;\n            }\n            #divPaymentSection fluent-checkbox {\n                margin-left: 44px;\n            }\n\n            #divPaymentSection ::part(label) {\n                font-size:12px !important;\n                line-height:16px;\n            }\n            .show {\n                display: block !important;\n            }\n            .shadow {\n                background-color: rgba(0, 0, 0, 0.07) !important;\n                border-radius: 2px;\n            }\n            .listbox {\n                display: none;\n                position: absolute;\n                z-index: 1;\n                width: 308px;\n                left: 26px;\n                box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n                border-radius: 4px;\n            }\n            #divPaymentButton,\n            #divAddressButton {\n                float: right;\n                position: relative;\n                top: 13px;\n            }\n            .checkoutButton {\n                width: auto;\n                min-width: 336px;\n                max-width: 100%;\n                height: 48px;\n            }\n            ::part(footer) {\n                border: none;\n                padding-top: 0;\n            }\n            .option {\n                width: 300px;\n                height: 50px;\n                position: relative;\n                left: -1px;\n                white-space: normal;\n            }\n            .option:hover {\n                border-radius: 2px;\n            }\n            .switchButton {\n                float: unset;\n                position: unset;\n                top: unset;\n            }\n            #defaultshippingAddress {\n                max-width: unset;\n            }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        #couponCheckoutDiv {\n            background: #253D51;\n        }\n        #divPaymentSection, #divAddressSection {\n            background: linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%);\n        }\n        .c011145\n        {\n            fill:#FFFFFF;\n        }\n        #couponBottomText,\n        #couponTopText{\n            color: #FFFFFF;\n        }\n        "}},{key:"getEcImg",value:function(){return mt.getTrustedHTML(GO||(GO=j(['<svg aria-hidden="true" width="32" height="32" style="position: relative;bottom: -10px;margin-right:10px;" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M17.2355 30.0548L0.761976 21.9761C0.0946049 21.6249 -0.186392 20.817 0.129731 20.1497L5.0472 10.1742C5.39845 9.50684 6.20632 9.22584 6.87369 9.54196L23.3472 17.6207C24.0146 17.9719 24.2956 18.7798 23.9795 19.4472L19.0971 29.4226C18.7459 30.1251 17.938 30.4061 17.2355 30.0548Z" fill="#1F65F1"/>\n        <path d="M5.78485 20.6414L3.08024 19.3067C2.79924 19.1662 2.69386 18.8501 2.83436 18.5691L4.02861 16.1103C4.1691 15.8293 4.48523 15.724 4.76623 15.8645L7.47084 17.1992C7.75184 17.3397 7.85721 17.6558 7.71671 17.9368L6.52247 20.3956C6.38197 20.6765 6.03072 20.7819 5.78485 20.6414Z" fill="#F5F5F5"/>\n        <path d="M6.87369 23.3108L2.09672 20.9574C1.88597 20.852 1.81572 20.6062 1.92109 20.3954C2.02647 20.1847 2.27234 20.1144 2.48309 20.2198L7.26006 22.5732C7.47081 22.6785 7.54106 22.9244 7.43569 23.1352C7.36544 23.3459 7.08444 23.4162 6.87369 23.3108Z" fill="#F5F5F5"/>\n        <path d="M9.82419 24.751L8.38407 24.0485C8.17332 23.9431 8.10307 23.6972 8.20845 23.4865C8.31382 23.2757 8.5597 23.2055 8.77045 23.3109L10.2106 24.0134C10.4213 24.1187 10.4916 24.3646 10.3862 24.5754C10.2808 24.7861 10.0349 24.8564 9.82419 24.751Z" fill="#F5F5F5"/>\n        <path d="M13.5123 26.5774L11.2643 25.4885C11.0536 25.3832 10.9833 25.1373 11.0887 24.9266C11.1941 24.7158 11.4399 24.6456 11.6507 24.7509L13.8987 25.8398C14.1094 25.9452 14.1797 26.191 14.0743 26.4018C13.9689 26.5774 13.7231 26.6828 13.5123 26.5774Z" fill="#F5F5F5"/>\n        <path d="M30.6883 17.1288L10.7374 19.3768C9.89442 19.4822 9.15679 18.8851 9.08654 18.0421L7.68155 5.95913C7.57617 5.11613 8.1733 4.37851 9.01629 4.30826L28.9672 2.06027C29.8102 1.9549 30.5478 2.55202 30.618 3.39501L31.9879 15.4779C32.0933 16.2858 31.4962 17.0234 30.6883 17.1288Z" fill="url(#paint0_linear)"/>\n        <path d="M18.9397 6.38456C17.6671 6.53071 16.754 7.68079 16.9001 8.95334C17.0463 10.2259 18.1964 11.139 19.4689 10.9929C20.7415 10.8467 21.6546 9.69664 21.5085 8.42409C21.3623 7.15154 20.2122 6.23841 18.9397 6.38456ZM16.6599 11.8991C16.0231 11.9723 15.5615 12.5429 15.6351 13.1841C15.747 14.1583 16.3111 14.8377 17.1161 15.2298C17.9087 15.6159 18.9298 15.7239 19.9982 15.6012C21.0666 15.4785 22.0366 15.1418 22.721 14.5861C23.4162 14.0217 23.8115 13.2321 23.6997 12.2579C23.6266 11.6217 23.0515 11.1651 22.4153 11.2381L16.6599 11.8991Z" fill="white"/>\n        <path d="M0.358427 6.65309C0.237604 6.66481 0.188649 6.50166 0.295969 6.44493C1.26242 5.93449 1.82453 4.89045 1.71889 3.80203C1.70716 3.68121 1.87032 3.63226 1.92704 3.73958C2.43749 4.70603 3.48153 5.26813 4.56994 5.1625C4.69077 5.15077 4.73972 5.31392 4.6324 5.37065C3.66595 5.8811 3.10384 6.92514 3.20948 8.01355C3.22121 8.13437 3.05805 8.18333 3.00133 8.07601C2.49088 7.10956 1.44684 6.54745 0.358427 6.65309Z" fill="#FFBE00"/>\n        <path d="M24.8737 25.806C24.707 25.8222 24.6395 25.5972 24.7875 25.5189C26.1205 24.8149 26.8958 23.3749 26.7501 21.8737C26.734 21.707 26.959 21.6395 27.0372 21.7875C27.7413 23.1205 29.1813 23.8958 30.6825 23.7501C30.8492 23.7339 30.9167 23.959 30.7687 24.0372C29.4357 24.7413 28.6604 26.1813 28.8061 27.6825C28.8222 27.8491 28.5972 27.9167 28.519 27.7686C27.8149 26.4356 26.3749 25.6603 24.8737 25.806Z" fill="#FFBE00"/>\n        <defs>\n        <linearGradient id="paint0_linear" x1="33.9999" y1="1.99994" x2="4.33482" y2="0.260614" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#FE7002"/>\n        <stop offset="0.9935" stop-color="#FFBE00"/>\n        </linearGradient>\n        </defs>\n        </svg>'])))}},{key:"getChevron",value:function(){return mt.getTrustedHTML(WO||(WO=j(['<svg width="20" height="20" viewBox="0 0 20 20" class="c011145" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.15 8.35a.5.5 0 01.7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z"></path></svg>'])))}}]),t}();!function(t){t.DefaultPayment="defaultPaymentGuid",t.DefaultProfile="defaultProfileGuid",t.BNPLProvider="BNPLProvider",t.TotalAmountDialogDataJson="totalAmountDialogDataJson"}($O||($O={}));var QO=function(){function t(){s(this,t),f(this,"Guid",void 0),f(this,"Email",void 0),f(this,"FirstName",void 0),f(this,"MiddleName",void 0),f(this,"LastName",void 0),f(this,"FullName",void 0),f(this,"AddressLines",void 0),f(this,"City",void 0),f(this,"State",void 0),f(this,"Country",void 0),f(this,"Zip",void 0),f(this,"PhoneNumber",void 0),f(this,"Honorific",void 0)}return r(t,[{key:"UpdateFields",value:function(t,e,n,i,o,a,r,s,l,c,u,d,h){this.Guid=h,this.Email=t,this.FirstName=e,this.MiddleName=n,this.LastName=i,this.FullName=o,this.AddressLines=a,this.City=r,this.State=s,this.Country=l,this.Zip=c,this.PhoneNumber=u,this.Honorific=d}}],[{key:"CreateFromCheckoutData",value:function(e){var n,i=e.cardholder;return null!=i&&i.address1&&(n=new t).UpdateFields("",i.firstName,i.middleName,i.lastName,i.name,i.address1+"\n"+i.address2,i.city,i.state,i.country,i.postalCode,"","",""),n}},{key:"CreateFromSettingsData",value:function(e){var n,i,o=new t;return o.UpdateFields(null===(n=e.Emails)||void 0===n?void 0:n[0],e.FirstName,e.MiddleName,e.LastName,e.FullName,e.AddressLines,e.City,e.State,e.Country,e.Zip,null===(i=e.PhoneNumbers)||void 0===i?void 0:i[0],e.Honorific,e.Guid),o}}]),t}(),tR=function(){function t(){s(this,t),f(this,"Guid",void 0),f(this,"ExpMonth",void 0),f(this,"ExpYear",void 0),f(this,"FullName",void 0),f(this,"CardNumber",void 0),f(this,"CardType",void 0),f(this,"CardCVC",void 0),f(this,"Address",void 0),f(this,"FirstName",""),f(this,"MiddleName",""),f(this,"LastName","")}return r(t,[{key:"UpdateFields",value:function(t,e,n,i,o,a,r,s){if(this.Guid=t,this.ExpMonth=e,this.ExpYear=n,this.FullName=i,this.CardNumber=o,this.CardType=a,this.CardCVC=null!=r?r:"",this.Address=s?QO.CreateFromSettingsData(new Fc(s)):void 0,i){var l,c,u,d=i.split(" ");this.FirstName=null!==(l=d.shift())&&void 0!==l?l:"",this.LastName=null!==(c=d.pop())&&void 0!==c?c:"",this.MiddleName=null!==(u=d[0])&&void 0!==u?u:""}}}],[{key:"CreateFromCheckoutData",value:function(e){var n=e.card,i=e.cardholder,o=H[n.brand.toUpperCase().trim()],a=new t;return a.UpdateFields("",n.expirationMonth,n.expirationYear,null==i?void 0:i.name,n.number,o,n.cvc),a}},{key:"CreateFromSettingsData",value:function(e){var n=new t;return n.UpdateFields(e.Guid,e.ExpMonth,e.ExpYear,e.FullName,e.CardNumber,e.CardType,void 0,e.Address),n}}]),t}(),eR=r((function t(e){s(this,t),f(this,"amount",void 0),f(this,"lowerThreshold",void 0),f(this,"period",void 0),f(this,"upperThreshold",void 0),this.amount=e.amount,this.lowerThreshold=e.lowerThreshold,this.period=e.period,this.upperThreshold=e.upperThreshold})),nR=eR,iR=function(){function t(){s(this,t),f(this,"Profile",void 0),f(this,"Payment",void 0),f(this,"paymentGuid",void 0),f(this,"profileGuid",void 0),f(this,"SkipAutoApply",void 0),f(this,"IsSkipPayment",void 0),f(this,"IsSkipProfile",void 0),f(this,"BNPLProvider",void 0),f(this,"TotalAmountDialogData",void 0)}return r(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}();function oR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return aR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function aR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function rR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var sR,lR=function(t){u(n,t);var e=rR(n);function n(t,i,o){var a,r,c;return s(this,n),f(l(c=e.call(this)),"assets",void 0),f(l(c),"pageHandlerModule",void 0),f(l(c),"stateManagement",void 0),f(l(c),"logModule",void 0),f(l(c),"flyoutData",void 0),f(l(c),"utilities",void 0),f(l(c),"isZipPayVirtualCardEnabled",void 0),f(l(c),"isAutofillPaymentEnabled",void 0),f(l(c),"cradTypeNameMap",void 0),f(l(c),"shouldRenderOtherPaymentOptions",void 0),f(l(c),"otherPaymentOptions",void 0),f(l(c),"autoFillClickHandler",void 0),c.pageHandlerModule=o.pageHandlerModule,c.logModule=o.logModule,c.stateManagement=t,c.flyoutData=i,c.utilities=o.viewModulesUtilities,c.assets=new JO,c.autoFillClickHandler=c.autoFillHandler.bind(l(c)),c.isZipPayVirtualCardEnabled=c.flyoutData.experimentData.isExperimentActive(Be.showPaymentOptions),c.isAutofillPaymentEnabled=!0,c.otherPaymentOptions=null!==(a=c.flyoutData.dataStoreModule.PaymentOptionsData)&&void 0!==a?a:[],c.shouldRenderOtherPaymentOptions=c.isZipPayVirtualCardEnabled&&c.otherPaymentOptions.length>0,c.cradTypeNameMap=(f(r={},H.MASTERCARD,c.flyoutData.strings.masterCardPayment),f(r,H.VISA,c.flyoutData.strings.visaPayment),f(r,H.AMEX,c.flyoutData.strings.amexPayment),f(r,H.DISCOVER,c.flyoutData.strings.discoverPayment),f(r,H.ZIP,c.flyoutData.strings.zipPayPayment),r),c}return r(n,[{key:"GetModuleName",value:function(){return Rt.CHECKOUTAUTOFILL}},{key:"ShouldRenderModule",value:function(){var t,e,n=null!==(t=null===(e=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===e?void 0:e.shouldRenderCheckoutAutofill)&&void 0!==t&&t;return Promise.resolve(n)}},{key:"renderModule",value:function(){var t=this;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());var e=document.createElement("DIV");e.style.paddingLeft="16px",e.style.paddingRight="16px";var n=this.createAutofillSection(this.isZipPayVirtualCardEnabled?this.flyoutData.strings.checkoutAddressSectionTitle:this.flyoutData.strings.checkoutSectionTitle,"checkoutAutofillSection"),i=this.createAutofillSection(this.flyoutData.strings.checkoutPaymentSectionTitle,"paymentAutofillSection");if(!this.stateManagement.getState(pn.isAutoApplyVisible)){var o=new _(A.ExpressCheckout);this.LogInfoEvent(S.EdgeFlyoutStatus,"",o),setTimeout((function(){un.queueUpdate((function(){var t=document.querySelector("#couponSection");t&&(t.accordion=!0,t.expanded=!1)}))}),10)}var a=this.utilities.createElement("DIV");a.id="divCheckoutWrapper";var r=this.utilities.createElement("DIV");r.id="divAddressSection";var s=this.utilities.createElement("P");s.className="shipttl",s.textContent=this.flyoutData.strings.checkoutShippingAddress;var l=document.createElement("fluent-listbox");l.setAttribute("ariaLabel",this.flyoutData.strings.checkoutShippingAddress),l.className="listbox",l.id="addressListbox",l.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Enter"!==t.key||(l&&l.classList.toggle("show"),u&&(u.classList.toggle("shadow"),u.focus()),t.preventDefault())}));var c=this.utilities.createElement("P");c.id="defaultshippingAddress";var u=this.utilities.createElement("a",{style:"cursor: pointer;\n                height: 20px;\n                width: 20px;\n                position: relative;\n                background-position: center;\n                top: 11px;\n                right: 14px;"});u.setAttribute("href","#"),u.setAttribute("role","button"),u.setAttribute("aria-haspopup","listbox"),u.setAttribute("aria-label",this.flyoutData.strings.checkoutShippingAddress),u.id="divAddressButton",u.innerHTML=this.assets.getChevron();var d=this.flyoutData.dataStoreModule.CheckoutUserData;if(d&&d.Profiles&&d.Profiles.length>0){var h=ze($O.DefaultProfile);if(h){var p=this.getAddressInfoByGuid(h);p&&(c.innerText=this.formAddress(p))}if(!c.innerText){var f=null==d?void 0:d.Profiles[0].AddressLines,g=(null==d?void 0:d.Profiles[0].City)+", "+(null==d?void 0:d.Profiles[0].State)+", "+(null==d?void 0:d.Profiles[0].Country),m="ZIP "+(null==d?void 0:d.Profiles[0].Zip);c.innerText=(null==d?void 0:d.Profiles[0].FullName)+", "+f+", "+g+", "+m,qe($O.DefaultProfile),Ye($O.DefaultProfile,null==d?void 0:d.Profiles[0].Guid),h=null==d?void 0:d.Profiles[0].Guid}var v=d.Profiles.find((function(t){return t.Guid===h}));if(v){var y=this.GetAddressOption(v,c);l.appendChild(y),l.addEventListener("keydown",(function(e){if("Enter"===e.key){var n=l.querySelector(".selected");n&&(c.innerText=n.innerText,qe($O.DefaultProfile),Ye($O.DefaultProfile,v.Guid),t.resizeIframe())}}))}var C,b=oR(d.Profiles);try{var x=function(){var e=C.value;if(e){if(e.Guid===h)return"continue";var n=t.GetAddressOption(e,c);l.appendChild(n)}l.addEventListener("keydown",(function(n){if("Enter"===n.key){var i=l.querySelector(".selected");i&&(c.innerText=i.innerText,qe($O.DefaultProfile),Ye($O.DefaultProfile,e.Guid),t.resizeIframe())}}))};for(b.s();!(C=b.n()).done;)x()}catch(t){b.e(t)}finally{b.f()}}u.setAttribute("aria-describedby",c.id),u.addEventListener("click",(function(t){l&&(l.classList.toggle("show"),u.classList.toggle("shadow"),"true"===u.getAttribute("aria-expanded")?u.setAttribute("aria-expanded","false"):u.setAttribute("aria-expanded","true")),t.stopPropagation()})),u.addEventListener("keydown",(function(t){"Enter"===t.key&&(l&&(l.classList.toggle("show"),u.classList.toggle("shadow"),"true"===u.getAttribute("aria-expanded")?u.setAttribute("aria-expanded","false"):u.setAttribute("aria-expanded","true"),l.focus()),t.preventDefault()),"Esc"===t.key&&"true"===u.getAttribute("aria-expanded")&&u.setAttribute("aria-expanded","false"),t.stopPropagation()})),r.appendChild(s),r.appendChild(u),r.appendChild(l),r.appendChild(c);var E=this.utilities.createElement("DIV");E.id="divPaymentSection";var T=this.utilities.createElement("P");T.textContent=this.flyoutData.strings.checkoutPaymentInfo,T.className="payttl";var D=document.createElement("fluent-listbox");D.className="listbox",D.id="paymentListbox",D.ariaLabel=this.flyoutData.strings.checkoutPaymentInfo,D.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Enter"!==t.key||(D&&D.classList.toggle("show"),R&&(R.classList.toggle("shadow"),R.focus()),t.preventDefault())}));var k=this.utilities.createElement("DIV",{style:"display:block;\n            margin-left: 14px;"}),I=this.utilities.createElement("P",{style:"display:inline-block;\n            margin: 0;\n            font-size: 14px;\n            line-height: 20px;"});I.id="defaultCardInfo";var w=this.utilities.createElement("IMG",{style:"display: inline-block;\n            margin-right: 10px;\n            position: relative;\n            top: 1px;"});w.setAttribute("aria-hidden","true");var P="";k.appendChild(w),k.appendChild(I),k.id="divCard";var O="height: 20px;\n            width: 20px;\n            background-position: center;\n            position: relative;\n            top: 11px;\n            right: 14px;",R=this.utilities.createElement("a",{style:O});if(R.innerHTML=this.assets.getChevron(),R.setAttribute("href","#"),R.setAttribute("role","button"),R.setAttribute("aria-haspopup","listbox"),R.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentInfo),R.id="divPaymentButton",d&&d.Payments&&d.Payments.length>0){var M=ze($O.DefaultPayment);if(M){var N=this.getPaymentInfoByGuid(M);N&&(I.innerText=this.formCardInfo(N),w.src=this.GetSrcByCardType(N.CardType),P=N.CardType)}if(!I.innerText){var L=" "+d.Payments[0].MaskedCardNumber;w.src=this.GetSrcByCardType(d.Payments[0].CardType),this.PopulateCardNumberhtml(I,{cardNumber:L,expDate:d.Payments[0].ExpMonth+"/"+d.Payments[0].ExpYear.substr(2)}),P=d.Payments[0].CardType,qe($O.DefaultPayment),Ye($O.DefaultPayment,d.Payments[0].Guid),M=d.Payments[0].Guid}var F=d.Payments.find((function(t){return t.Guid===M}));if(F){var H=this.GetPaymentOption(F,I,w);D.appendChild(H),D.addEventListener("keydown",(function(e){if("Enter"===e.key){var n=D.querySelector(".selected");n&&t.paymentListboxOptionClickHandler(I,F,n,w)}}))}var B,U=oR(d.Payments);try{var V=function(){var e=B.value;if(e){if(e.Guid===M)return"continue";var n=t.GetPaymentOption(e,I,w);D.appendChild(n),D.addEventListener("keydown",(function(n){if("Enter"===n.key){var i=D.querySelector(".selected");i&&t.paymentListboxOptionClickHandler(I,e,i,w)}}))}};for(U.s();!(B=U.n()).done;)V()}catch(t){U.e(t)}finally{U.f()}}R.setAttribute("aria-describedby",I.id),R.addEventListener("click",(function(t){D&&(D.classList.toggle("show"),R.classList.toggle("shadow"),"true"===R.getAttribute("aria-expanded")?R.setAttribute("aria-expanded","false"):R.setAttribute("aria-expanded","true")),t.stopPropagation()})),R.addEventListener("keydown",(function(t){"Enter"===t.key&&(D&&(D.classList.toggle("show"),R.classList.toggle("shadow"),"true"===R.getAttribute("aria-expanded")?R.setAttribute("aria-expanded","false"):R.setAttribute("aria-expanded","true"),D.focus()),t.preventDefault()),"Esc"===t.key&&"true"===R.getAttribute("aria-expanded")&&R.setAttribute("aria-expanded","false"),t.stopPropagation()})),window.onclick=function(t){if(!t.target.matches("#divAddressButton")&&!t.target.matches("#divPaymentButton")){var e,n=document.getElementsByClassName("listbox");for(e=0;e<n.length;e++){var i=n[e];i.classList.contains("show")&&i.classList.remove("show")}R.classList.contains("shadow")&&R.classList.remove("shadow"),u.classList.contains("shadow")&&u.classList.remove("shadow")}if(t.target.matches("#divAddressButton")){var o=document.getElementById("paymentListbox");o&&o.classList.contains("show")&&o.classList.remove("show"),R.classList.contains("shadow")&&R.classList.remove("shadow")}if(t.target.matches("#divPaymentButton")){var a=document.getElementById("addressListbox");a&&a.classList.contains("show")&&a.classList.remove("show"),u.classList.contains("shadow")&&u.classList.remove("shadow")}};var G=this.utilities.createElement("P");if(G.textContent=this.flyoutData.strings.checkoutSameBilling,G.className="txtExtraSmall billSameAsShipAddressCheckbox",E.appendChild(T),this.shouldRenderOtherPaymentOptions&&this.otherPaymentOptions){var W,$=document.createElement("fluent-radio-group");$.className="paymentInfoRadioGroup",$.id="paymentRadioGroup",$.style.marginLeft="20px",$.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentInfo),$.value=Ut.CARD,$.appendChild(this.getPaymentOptionRadioBanner(Ut.CARD,{paymentButton:R,paymentListbox:D})),$.appendChild(this.getPaymentOptionRadio(Ut.CARD,{defaultCardDiv:k,defaultCardInfo:I,defaultCardType:P,paymentButton:R,paymentButtonStyle:O,paymentListbox:D}));var z,K=new Map,Y=oR(this.otherPaymentOptions);try{for(Y.s();!(z=Y.n()).done;){var j,q,Z,X,J=z.value;$.appendChild(this.getPaymentOptionRadioBanner(J.providerName,{otherPaymentOption:J})),$.appendChild(this.getPaymentOptionRadio(J.providerName,{otherPaymentOption:J})),K.set(J.providerName,new nR({amount:null!==(j=J.amount)&&void 0!==j?j:"",lowerThreshold:null!==(q=J.lowerThreshold)&&void 0!==q?q:"",period:null!==(Z=J.period)&&void 0!==Z?Z:"",upperThreshold:null!==(X=J.upperThreshold)&&void 0!==X?X:""}))}}catch(t){Y.e(t)}finally{Y.f()}E.appendChild(D),E.appendChild($);var Q=null===(W=this.otherPaymentOptions)||void 0===W?void 0:W[0];if(null!=Q&&Q.managePaymentLabel&&null!=Q&&Q.managePaymentLinkText){var tt=this.utilities.createElement("P",{style:"display :block;\n                    margin-left: 50px;\n                    font-size: 10px;\n                    line-height: 14px;\n                    min-width: 240px;"}),et=this.utilities.createElement("fluent-anchor",{style:"float: none;\n                    font-size: 10px;"});tt.id="zipCardTurnOff",et.id="turnOffZipLink",et.setAttribute("href","#"),et.setAttribute("appearance","hypertext"),et.textContent=null==Q?void 0:Q.managePaymentLinkText,this.utilities.populateSingleChildHtml(tt,null==Q?void 0:Q.managePaymentLabel,et),et.addEventListener("click",(function(){t.navigateToTurnOffZipURL()})),et.addEventListener("keydown",(function(e){"Enter"===e.key&&t.navigateToTurnOffZipURL()})),E.appendChild(tt)}var nt=this.utilities.createElement("p",{style:"display :block;\n                margin-left: 50px;\n                margin-top: 4px;\n                font-size: 10px;\n                line-height: 14px;\n                min-width: 240px;"});nt.id="msZipDescription",nt.textContent=this.flyoutData.strings.msZipDescription,E.appendChild(nt),$.onchange=function(){if(G.style.display="block",G.setAttribute("aria-hidden","false"),nt.style.paddingBottom="0px",qe($O.BNPLProvider),$.value===Ut.ZIP){Ye($O.BNPLProvider,$.value);var e=JSON.stringify(K.get($.value));Ye($O.TotalAmountDialogDataJson,e),G.setAttribute("aria-hidden","true"),G.style.display="none",nt.style.paddingBottom="16px",t.pageHandlerModule.RecordAsUserAction(is.EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED)}t.setButtonNameAndAction({button:document.querySelector(".checkoutButton")}),t.resizeIframe()}}else qe($O.BNPLProvider),E.appendChild(R),E.appendChild(D),E.appendChild(k);if(E.appendChild(G),a.appendChild(r),this.isZipPayVirtualCardEnabled){var it=document.createElement("fluent-switch");it.className="switchButton",it.checked=!0,it.setAttribute("role","switch"),it.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentSectionTitle),it.addEventListener("change",(function(e){t.setAutofillPaymentStatus(e.target.checked);var n=document.getElementById("turnOffZipLink");n&&(n.style.pointerEvents=e.target.checked?"unset":"none")})),it.addEventListener("keydown",(function(t){"Enter"===t.key&&(it.checked=!it.checked)}));var ot=i.querySelector(".divSectionTitle");ot&&ot.appendChild(it),i.appendChild(E),E.classList.add("divPaymentSectionWithZipVirtualCard")}else a.appendChild(E);n.appendChild(a),this.isZipPayVirtualCardEnabled?(e.appendChild(n),e.appendChild(i)):(n.style.paddingLeft="16px",n.style.paddingRight="16px");var at=this.isZipPayVirtualCardEnabled?e:n,rt=this.CreateModule(at,wt.CHECKOUTAUTOFILL,Rt.CHECKOUTAUTOFILL,_t.CONTEXTUAL,Ft.BLOCK);return this.isZipPayVirtualCardEnabled&&(this.pageHandlerModule.RecordAsUserAction(is.EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE),this.shouldRenderOtherPaymentOptions&&this.pageHandlerModule.RecordAsUserAction(is.EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN)),Promise.resolve(rt)}},{key:"GetSrcByCardType",value:function(t){return t===H.MASTERCARD?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/mastercard.png"):t===H.VISA?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/visa.png"):t===H.AMEX?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/amex.png"):t===H.DISCOVER?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/discover.png"):t===H.ZIP?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/zip.png"):"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/default.png")}},{key:"GetNameByCardType",value:function(t){return this.cradTypeNameMap[t]||""}},{key:"PostProcessing",value:function(t,e,n){var i;(null===(i=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===i?void 0:i.shouldRenderCheckoutAutofill)&&this.createExpressCheckoutButton()}},{key:"createExpressCheckoutButton",value:function(){var t=this.utilities.createPrimaryButton();t.appearance="accent",t.style.fontSize="16px",t.style.borderRadius="4px",t.style.marginBottom="2px",this.flyoutData.experimentData.isExperimentActive(Be.newStandardStyle)?this.utilities.shouldRenderSmallNotification()?t.classList.add(gt.PrimarySmallNotification,"checkoutButton"):t.classList.add(gt.Primary,"checkoutButton"):t.classList.add(gt.PrimaryColor,"checkoutButton");var e=this.utilities.createElement("DIV");e.slot="footer",e.appendChild(t),this.setButtonNameAndAction({button:t,buttonType:Bt.AUTO_FILL}),this.flyoutData.common.shopping.prepend(e)}},{key:"populateMainHeader",value:function(){var t=this.utilities.createElement("H2");t.className="txtLarge",t.style.textAlign="center",t.style.fontWeight="500",t.textContent=this.flyoutData.strings.checkoutFillOnly,t.slot="header-content",t.setAttribute("heading-level","2"),this.flyoutData.common.shopping.appendChild(t)}},{key:"getUserChoiceConfiguration",value:function(t){var e,n=new iR,i=this.isAutofillPaymentEnabled&&this.BNPLProvider();n.SkipAutoApply=t,n.BNPLProvider=i||null,n.IsSkipPayment=Boolean(i)||!this.isAutofillPaymentEnabled;var o=null!==(e=ze($O.TotalAmountDialogDataJson))&&void 0!==e?e:"{}";if(n.TotalAmountDialogData=new nR(JSON.parse(o)),this.flyoutData.dataLoader.IsServerData()){if(!n.IsSkipPayment){var a=ze($O.DefaultPayment);a&&(n.paymentGuid=a)}var r=ze($O.DefaultProfile);return r&&(n.profileGuid=r),n}if(!n.IsSkipPayment){var s=ze($O.DefaultPayment);if(s){var l=this.getPaymentInfoByGuid(s);if(l){var c=tR.CreateFromSettingsData(l);n.Payment=c}}}var u=ze($O.DefaultProfile);if(u){var d=this.getAddressInfoByGuid(u);if(d){var h=QO.CreateFromSettingsData(d);n.Profile=h}}return n}},{key:"setButtonNameAndAction",value:function(t){var e=t.button,n=t.buttonType,i=void 0===n?"":n;if(e&&(""===i?i=null==e?void 0:e.getAttribute("button-type"):e.setAttribute("button-type",i),e.removeEventListener("click",this.autoFillClickHandler),i===Bt.AUTO_FILL))e.textContent=this.BNPLProvider()&&this.isAutofillPaymentEnabled?this.utilities.replaceValueInKey("checkoutButtonWithoutAAForOtherPayment",this.flyoutData.strings.checkoutButtonWithoutAAForOtherPayment,this.flyoutData.strings.zipPayPayment):this.flyoutData.strings.checkoutButtonWithoutAA,e.addEventListener("click",this.autoFillClickHandler)}},{key:"paymentListboxOptionClickHandler",value:function(t,e,n,i){if(t.innerText=n.innerText,i.src=this.GetSrcByCardType(e.CardType),qe($O.DefaultPayment),Ye($O.DefaultPayment,e.Guid),this.shouldRenderOtherPaymentOptions){var o=document.querySelector(".cardInfoRadioOption"),a=document.querySelector(".paymentInfoRadioGroup");o&&a&&(a.value!==Ut.CARD&&o.click(),this.setRadioAriaLabel(Ut.CARD,e.CardType,n.innerText,o))}}},{key:"getPaymentOptionRadioBanner",value:function(t,e){var n=this,i=this.utilities.createElement("DIV",{style:"width: 100%; font-size: 12px; margin-bottom: 4px; display: flex; justify-content: space-between;"});switch(i.classList.add("txtMedium","radio-banner"),t){case Ut.CARD:i.innerText=this.flyoutData.strings.cardPaymentOptionBanner;var o=e||{},a=o.paymentButton,r=o.paymentListbox;if(a&&r){var s=this.utilities.createElement("DIV",{style:"margin-right: 14px;"});r.style.marginTop="30px",r.setAttribute("aria-label",this.flyoutData.strings.checkoutCreditOrDebitCardDropDown),a.setAttribute("aria-label",this.flyoutData.strings.checkoutCreditOrDebitCardDropDown),s.appendChild(a),i.appendChild(s)}break;case Ut.ZIP:i.style.marginTop="4px",i.innerText=this.flyoutData.strings.otherPaymentMethodBanner;var l=(e||{}).otherPaymentOption;if(l){var c=document.createElement("fluent-anchor");c.id="learnMoreAboutZip",c.setAttribute("href","#"),c.setAttribute("style","font-size : 12px;\n                        float: none;\n                        margin-right: auto;\n                        margin-left: 10px;"),c.setAttribute("appearance","hypertext"),c.setAttribute("aria-label",this.utilities.replaceValueInKey("howItWorkLinkAriaLabel",this.flyoutData.strings.howItWorkLinkAriaLabel,null==l?void 0:l.helpInformation,this.flyoutData.strings.buyNowPayLater)),c.className+=" txtSmall",c.textContent=null==l?void 0:l.helpInformation,c.addEventListener("click",(function(){n.navigateToBNPLLearnMore()})),c.addEventListener("keydown",(function(t){"Enter"===t.key&&n.navigateToBNPLLearnMore()})),i.appendChild(c)}}return i}},{key:"navigateToBNPLLearnMore",value:function(){this.pageHandlerModule.RecordAsUserAction(is.EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED),this.pageHandlerModule.NavigateToBNPLLearnMore()}},{key:"getPaymentOptionRadio",value:function(t,e){var n=document.createElement("fluent-radio");switch(n.value=t,t){case Ut.CARD:var i=e||{},o=i.defaultCardDiv,a=i.defaultCardType,r=i.defaultCardInfo,s=i.paymentButton,l=i.paymentButtonStyle;if(o&&r&&s&&l){var c=this.utilities.createElement("DIV",{style:"display:flex;\n                        width: 260px;"});s.setAttribute("style",l),s.style.position="static",o.style.marginLeft="0px",c.appendChild(o),c.setAttribute("aria-hidden","true"),n.className="cardInfoRadioOption",this.setRadioAriaLabel(t,null!=a?a:"",r.innerText,n),n.appendChild(c)}break;case Ut.ZIP:var u=(e||{}).otherPaymentOption;if(u){var d=this.utilities.createElement("DIV"),h=this.utilities.createElement("IMG",{style:"display: inline;\n                        margin-right: 10px;\n                        vertical-align: bottom;\n                        position: relative;\n                        float: none;\n                        height: 20px"}),p=this.utilities.createElement("span",{style:"display:inline;\n                        margin: 0;\n                        font-size: 14px;\n                        line-height: 20px;"});h.src=this.GetSrcByCardType("Z"),p.textContent=null==u?void 0:u.projectedMonthlyPaymentDetails,p.classList.add("zipCardInfo"),d.appendChild(h),d.appendChild(p),d.setAttribute("aria-hidden","true"),n.className="zipRadioOption",this.setRadioAriaLabel(t,H.ZIP,p.textContent,n),n.appendChild(d)}}return n}},{key:"navigateToTurnOffZipURL",value:function(){this.pageHandlerModule.RecordAsUserAction(is.EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED),this.pageHandlerModule.NavigateToTurnOffZip()}},{key:"setRadioAriaLabel",value:function(t,e,n,i){var o=this.GetNameByCardType(e)+" "+n;switch(t){case Ut.CARD:i=i||document.querySelector(".cardInfoRadioOption");case Ut.ZIP:i=i||document.querySelector(".zipRadioOption")}i&&i.setAttribute("aria-label",o)}},{key:"PopulateCardNumberhtml",value:function(t,e){var n=document.createElement("span");n.style.fontWeight="600",n.textContent=e.cardNumber;var i=document.createElement("span");i.textContent=" ".concat(this.flyoutData.strings.checkoutValidTill," ");var o=document.createElement("span");o.style.fontWeight="600",o.textContent=e.expDate;var a=window.trustedTypes.emptyHTML;t.innerHTML=a,t.appendChild(n).appendChild(i).appendChild(o)}},{key:"formAddress",value:function(t){var e=t.AddressLines,n=t.City+", "+t.State+", "+t.Country,i="".concat(this.flyoutData.strings.checkoutZip," ").concat(t.Zip);return t.FullName+", "+e+", "+n+", "+i}},{key:"formCardInfo",value:function(t){return" "+t.MaskedCardNumber+" ".concat(this.flyoutData.strings.checkoutValidTill," ")+t.ExpMonth+"/"+t.ExpYear.substr(2)}},{key:"getPaymentInfoByGuid",value:function(t){var e=this.flyoutData.dataStoreModule.CheckoutUserData;if(e&&e.Payments){var n,i=oR(e.Payments);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o&&o.Guid===t)return o}}catch(t){i.e(t)}finally{i.f()}}}},{key:"getAddressInfoByGuid",value:function(t){var e=this.flyoutData.dataStoreModule.CheckoutUserData;if(e&&e.Profiles){var n,i=oR(e.Profiles);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o&&o.Guid===t)return o}}catch(t){i.e(t)}finally{i.f()}}}},{key:"getAutoFillHandlerMetrics",value:function(){var t,e;return this.BNPLProvider()&&this.isAutofillPaymentEnabled?(t=is.EXPRESS_CHECKOUT_FORZIP,e=E.ECWithBNPL):!this.BNPLProvider()&&this.isAutofillPaymentEnabled?(t=is.EXPRESS_CHECKOUT,e=E.ExpressCheckout):(t=is.EXPRESS_CHECKOUT_WITHOUT_PAYMENT,e=E.ECWithoutPayment),{userAction:t,buttonName:e}}},{key:"autoFillHandler",value:function(){var t=this.getAutoFillHandlerMetrics(),e=t.userAction,n=t.buttonName;this.pageHandlerModule.RecordAsUserAction(e);var i=new Yr(n);this.LogInfoEvent(S.ButtonClick,"",i),this.pageHandlerModule.ApplyAllCouponsWithExpressCheckout(this.getUserChoiceConfiguration(!0))}},{key:"BNPLProvider",value:function(){return ze($O.BNPLProvider)}},{key:"LogInfoEvent",value:function(t,e,n){this.logModule.LogInfoEvent(t,e,n,dn.CouponImpressionId)}},{key:"GetAddressOption",value:function(t,e){var n=this,i=t.AddressLines,o=t.City+", "+t.State+", "+t.Country,a="ZIP "+t.Zip,r=this.utilities.createElement("P");r.innerText=t.FullName+", "+i+", "+o+", "+a;var s=document.createElement("fluent-option");return s.innerText=r.innerText,s.classList.add("option"),s.addEventListener("click",(function(){e.innerText=s.innerText,qe($O.DefaultProfile),Ye($O.DefaultProfile,t.Guid),n.resizeIframe()})),s}},{key:"GetPaymentOption",value:function(t,e,n){var i=this,o=" "+t.MaskedCardNumber,a=this.utilities.createElement("P");this.PopulateCardNumberhtml(a,{cardNumber:o,expDate:t.ExpMonth+"/"+t.ExpYear.substr(2)});var r=document.createElement("fluent-option");if(r.innerText=a.innerText,r.className="option",r.style.height="32px",this.isZipPayVirtualCardEnabled){var s=this.utilities.createElement("IMG",{style:"display: inline-block;\n                margin-right: 10px;\n                position: relative;\n                top: 1px;"});s.src=this.GetSrcByCardType(t.CardType),s.setAttribute("aria-hidden","true"),r.appendChild(s),r.setAttribute("aria-label",this.GetNameByCardType(t.CardType)+a.innerText)}return r.addEventListener("click",(function(){return i.paymentListboxOptionClickHandler(e,t,r,n)})),r}},{key:"resizeIframe",value:function(){if(this.flyoutData.dataLoader.IsServerData()){var t=document.querySelector("#divContentWrapper");un.queueUpdate((function(){parent.postMessage({height:t.offsetHeight,type:"resize_iframe"},"edge://shopping")}))}}},{key:"createAutofillSection",value:function(t,e){var n;n=this.utilities.createElement("DIV");var i=this.utilities.createElement("DIV");if(i.className="divSectionTitle",this.isZipPayVirtualCardEnabled)i.setAttribute("style","display: flex; align-items: center; justify-content: space-between;");else{i.setAttribute("style","display: flex; flex-direction: row; justify-content: center; align-items: center; column-gap: 4px;");var o=this.utilities.createElement("IMG");o.setAttribute("aria-hidden","true"),o.src=this.flyoutData.common.resourcesEndpoint+"expressCheckout/smallIcons/card.png",i.appendChild(o)}var a=this.utilities.createElement("SPAN");return a.textContent=t,a.className="txtSmall",a.setAttribute("heading-level","3"),i.appendChild(a),n.appendChild(i),n.id=e,n.className="txtMedium",n}},{key:"setAutofillPaymentStatus",value:function(t){var e=document.querySelector("#paymentRadioGroup"),n=document.querySelector("#divPaymentSection"),i=document.querySelector("#divPaymentButton"),o=document.querySelector("#learnMoreAboutZip");e&&(e.disabled=!t,e.setAttribute("tabindex",t?"auto":"-1")),n&&n.setAttribute("data-enabled",t.toString()),i&&i.setAttribute("aria-disabled",(!t).toString()),o&&(o.setAttribute("aria-disabled",(!t).toString()),o.style.pointerEvents=t?"":"none"),this.isAutofillPaymentEnabled=t,this.setSubmitButtonStatus()}},{key:"setSubmitButtonStatus",value:function(){if(this.isZipPayVirtualCardEnabled){var t=document.querySelector(".checkoutButton");t&&this.setButtonNameAndAction({button:t,buttonType:Bt.AUTO_FILL})}}}]),n}(Bb),cR=lR;function uR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function dR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function hR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}!function(t){t.enus="en-us",t.engb="en-gb",t.enca="en-ca"}(sR||(sR={}));var pR=function(t){u(x,t);var n,i,a,c,d,h,p,g,m,v,y,C,b=hR(x);function x(t,e,n,i){var o,a,r,c;return s(this,x),f(l(c=b.call(this)),"assets",null),f(l(c),"flyoutData",void 0),f(l(c),"utilities",void 0),f(l(c),"pageHandlerModule",void 0),f(l(c),"logModule",void 0),f(l(c),"shouldRenderClipping",void 0),f(l(c),"clippingCompleted",!1),f(l(c),"market",void 0),f(l(c),"discount",void 0),f(l(c),"initialPrice",void 0),f(l(c),"commonAssets",void 0),f(l(c),"stateManagement",void 0),c.flyoutData=t,c.utilities=e.viewModulesUtilities,c.pageHandlerModule=e.pageHandlerModule,c.logModule=e.logModule,c.stateManagement=n,c.commonAssets=i,c.market=Dl.GetMarket(null===(o=c.flyoutData.dataStoreModule.ApiData)||void 0===o?void 0:o.market,null===(a=c.flyoutData.dataStoreModule.ApiData)||void 0===a||null===(r=a.retailerData)||void 0===r?void 0:r.exclusiveMarket),c}return r(x,[{key:"GetModuleName",value:function(){return Rt.COUPONCLIPPING}},{key:"CalculateRanking",value:function(){return this.clippingCompleted?Ct.InformPage:Ct.SaveMoneyPage}},{key:"SetClippingCompleted",value:function(t){this.clippingCompleted=t}},{key:"ShouldRenderModule",value:(C=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.shouldRenderClipping){t.next=2;break}return t.abrupt("return",this.shouldRenderClipping);case 2:return t.next=4,this.setShouldRenderClipping();case 4:return e=!!this.shouldRenderClipping&&!!this.flyoutData.common.lastCommittedURL,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"PostProcessing",value:function(t,e,n){var i=this;if(this.shouldRenderClipping&&0===e&&!this.clippingCompleted){var o=this.utilities.createElement("DIV");o.slot="actions",o.classList.add("headerMargin"),this.flyoutData.common.isPane&&(o.style.display="flex",o.style.justifyContent="center");var a=this.utilities.createPrimaryButton();o&&a&&(a.textContent=this.getClippingButtonTitle(),a.setAttribute("aria-labelledby","clippingTitle"),a.setAttribute("aria-describedby","clippingTitle"),a.addEventListener("click",(function(){i.flyoutData.experimentData.isExperimentActive(Be.autoClipExp)&&i.turnOnAutoClip(i.flyoutData.common.domain);var t=new Yr(E.AutoApply);i.pageHandlerModule.RecordAsUserAction(is.CLIP_COUPON),i.logModule.LogInfoEvent(S.ButtonClick,"Coupon clipped",t,dn.CouponImpressionId),i.pageHandlerModule.StartEdgeDriver(JSON.stringify({action:BP.Clipping,data:{discount:i.discount,initialPrice:i.initialPrice}})),i.flyoutData.common.isPane||i.pageHandlerModule.DismissPopup()})),o.appendChild(a),this.flyoutData.common.shopping.prepend(o));var r=this.flyoutData.common.shopping.querySelector("#clippingSection");r&&un.queueUpdate((function(){var t,e=null===(t=r.shadowRoot)||void 0===t?void 0:t.querySelector("[slot=heading]");e&&(e.style.display="none")}))}}},{key:"renderModule",value:(y=e(o().mark((function t(){var e,n,i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setInitialAndDiscountPrice();case 2:if(!this.clippingCompleted){t.next=13;break}return t.t0=this,t.next=6,this.renderCompleted();case 6:return t.t1=t.sent,t.t2=wt.COUPONCLIPPING,t.t3=Rt.COUPONCLIPPING,t.t4=_t.CONTEXTUAL,t.t5=Ft.BLOCK,e=t.t0.CreateModule.call(t.t0,t.t1,t.t2,t.t3,t.t4,t.t5),t.abrupt("return",Promise.resolve(e));case 13:return(n=this.utilities.createElement("DIV")).id="clippingSection",i=this.createMainTitle(this.discount),n.appendChild(i),a=this.flyoutData.experimentData.isExperimentActive(Be.autoClipExp),this.utilities.shouldRenderSmallNotification()&&!a||(r=this.createSubtitle(this.initialPrice,this.discount),n.appendChild(r)),this.utilities.shouldRenderSmallNotification()&&n.classList.add("headerMargin"),s=this.CreateModule(n,wt.COUPONCLIPPING,Rt.COUPONCLIPPING,_t.CONTEXTUAL,Ft.BLOCK),t.abrupt("return",Promise.resolve(s));case 22:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#clippingSection");t&&(t.style.marginTop="0px",t.slot="header-content"),this.flyoutData.common.openedWith===Tt.Auto&&this.flyoutData.common.popupOrigination===Fe.AUTO_SHOW_COUPONS_CLIPPING&&this.flyoutData.common.shopping.classList.add("noSections")}},{key:"renderCompleted",value:(v=e(o().mark((function t(){var e,n,i,a,r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.utilities.createElement("DIV")).id="clippingSection",(n=this.utilities.createElement("H2")).id="clippingTitle",n.className="txtLarge",n.style.textAlign="center",i=this.flyoutData.strings.clippedTitle,this.discount?(a=this.utilities.createElement("SPAN"),r=this.utilities.formatPrice(this.discount,this.market),a.textContent=Dl.replaceStringsPlaceholders("".concat(Dt.currency).concat(r),this.market),a.className="txtGradient",a.style.fontSize="26px",a.style.lineHeight="30px",a.style.fontWeight="600",this.utilities.shouldRenderSmallNotification()||(s=this.utilities.createElement("BR"),a.appendChild(s)),this.utilities.populateSingleChildHtml(n,i,a)):(i=i.split(/\$\d/).join("").replace("  "," "),n.textContent=i),e.appendChild(n),l=this.createClippedCouponSubTitleSection(),e.appendChild(l),t.abrupt("return",Promise.resolve(e));case 12:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"createClippedCouponSubTitleSection",value:function(){var t=this.utilities.createElement("DIV");t.slot="actions",t.style.display="flex",t.style.justifyContent="center",t.style.marginTop="27px",t.style.marginBottom="22px",t.style.height="22px";var e=this.utilities.createElement("DIV");e.innerHTML=this.commonAssets.getGreenCheck(),e.slot="start",this.market===sR.engb&&(e.style.marginRight="6px"),e.style.marginTop="8px",t.appendChild(e);var n=this.utilities.createElement("DIV");return n.textContent=this.getClippedSubTitle(),n.style.fontSize="16px",n.style.maxWidth="220px",n.style.width="100%",n.style.marginTop="8px",n.style.fontWeight="500",n.style.marginLeft="5px",this.flyoutData.common.currentTheme===xt.Dark?(n.style.color="#FFFFFF",n.style.borderColor="#FFFFFF"):n.style.color="#000000",t.appendChild(n),t}},{key:"createMainTitle",value:function(t){var e=this.utilities.createElement("H2");return e.id="clippingTitle",this.utilities.shouldRenderSmallNotification()?(e.className="txtMedium",e.style.fontSize="20px",e.style.lineHeight="26px",e.style.fontWeight="600"):(e.className="txtLarge",e.style.fontSize="26px",e.style.lineHeight="36px",e.style.fontWeight="600",e.style.marginLeft="40px",e.style.marginRight="40px"),e.style.textAlign="center",e.style.marginBottom="8px",e.textContent=this.getClippingDefaultTitle(),t&&this.getClippingMainTitle(t,e),e}},{key:"createSubtitle",value:function(t,e){var n=this.utilities.createElement("H2");if(n.id="clippingSubtitle",n.className="txtLarge",n.style.textAlign="center",n.style.fontSize="12px",n.style.fontWeight="400",n.style.lineHeight="16px",n.style.marginBottom="4px",n.textContent=this.flyoutData.strings.defaultClippingSubTitle,this.flyoutData.common.currentTheme===xt.Light&&(n.style.color="gray"),this.flyoutData.experimentData.isExperimentActive(Be.autoClipExp))return n.textContent=this.flyoutData.strings.autoClipSubTitle,n;if(t&&e){var i=(e/t*100).toFixed(0),o=this.utilities.replaceValueInKey("clippingSubTitle",this.flyoutData.strings.clippingSubTitle,i).split("|");if(3!==o.length)return n;var a=this.utilities.createElement("B");a.textContent=o[1];var r=document.createTextNode(o[2]);n.textContent=o[0],n.appendChild(a),n.appendChild(r)}return n}},{key:"setInitialAndDiscountPrice",value:(m=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(e=this.flyoutData.dataStoreModule.ApiData)||void 0===e?void 0:e.retailerData,r=null==a?void 0:a.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL),s=null==r||null===(n=r.clippingSelectors)||void 0===n?void 0:n.orderTotalDataElementSelector,l=null==r||null===(i=r.clippingSelectors)||void 0===i?void 0:i.discountSelector,this.clippingCompleted&&(l=null==r||null===(c=r.clippingSelectors)||void 0===c?void 0:c.clippedDiscountSelector),t.next=7,this.getInitialPrice(s);case 7:return u=t.sent,t.next=10,this.getAmazonClippingDiscount(u,l);case 10:d=t.sent,this.initialPrice=u,this.discount=d;case 13:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"getInitialPrice",value:(g=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this.getFirstVisibleElement(e);case 4:return n=t.sent,t.abrupt("return",Jr.getInitialPrice(null==n?void 0:n.InnerText));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"getAmazonClippingDiscount",value:(p=e(o().mark((function t(e,n){var i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e||!n){t.next=6;break}return t.next=4,this.getFirstVisibleElement(n);case 4:a=t.sent,i=Jr.getAmazonClippingDiscount(e,null==a?void 0:a.InnerText);case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),r=new _(A.OnErrorInvoked),this.logModule.LogErrorEvent(S.EdgeFlyoutStatus,"Clipping flyout getDiscount error, with Type: ".concat(t.t0.name,", with message: ").concat(t.t0.message),r);case 13:return t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t,e){return p.apply(this,arguments)})},{key:"setShouldRenderClipping",value:(h=e(o().mark((function t(){var e,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getClippingSelectors()){t.next=4;break}return this.shouldRenderClipping=!1,t.abrupt("return");case 4:return t.next=6,this.isClippingAvailable(e);case 6:if(n=t.sent,i=this.flyoutData.common.isPane,!n||!this.clippingCompleted||i){t.next=13;break}return t.next=11,this.stateManagement.getState(pn.renderedViewModuleCount);case 11:t.t0=t.sent,n=0===t.t0;case 13:this.shouldRenderClipping=n;case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getClippingSelectors",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData,n=null==e?void 0:e.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL);return null==n?void 0:n.clippingSelectors}},{key:"getAutoEnabledDomains",value:function(){if(this.flyoutData.experimentData.isExperimentActive(Be.autoClipExp)){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0);if(t){var e=t[Qr.AutoClipData];try{var n=JSON.parse(e);if(null!=n&&n.enabledDomains)return n.enabledDomains}catch(t){}}}}},{key:"isClippingAvailable",value:(d=e(o().mark((function t(e){var n,i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.signedInSelector,a=e.clipCouponSelector,r=e.alreadyClippedSelector,this.pageHandlerModule.TriggerExperiment(Be.autoClipExp),(null==(s=this.flyoutData.common)?void 0:s.popupOrigination)!==Fe.AUTO_SHOW_COUPONS_CLIPPING||s.openedWith!==Tt.Auto){t.next=9;break}return this.clippingCompleted=!1,t.abrupt("return",!0);case 9:if(l=!1,!(c=null==s||null===(n=s.pageStatus)||void 0===n?void 0:n.PageValidations)){t.next=19;break}if(!c.includes(Os.COUPONS_CLIPPING)){t.next=17;break}l=!0,t.next=19;break;case 17:case 40:return t.abrupt("return",!1);case 19:if(l){t.next=26;break}return t.next=22,this.isElementVisible(i);case 22:if(t.sent){t.next=26;break}return t.abrupt("return",!1);case 26:return t.next=28,this.isElementVisible(r);case 28:if(this.clippingCompleted=t.sent,(u=s.lastClippingAutoApplyDetailsForCurrentUrl)&&(this.clippingCompleted=this.clippingCompleted||!(null==u||!u.cart_value)),!this.clippingCompleted){t.next=34;break}return t.abrupt("return",!0);case 34:return t.next=36,this.isElementVisible(a);case 36:if(!t.sent){t.next=40;break}return t.abrupt("return",!0);case 41:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"turnOnAutoClip",value:function(t){var e=this.getAutoEnabledDomains();if(void 0===e&&(e=[]),!e.includes(t)){e.push(t);var n=new ds,i={enabledDomains:e};n.stringValue=JSON.stringify(i),this.pageHandlerModule.SetStorageValue(Qr.AutoClipData,n)}}},{key:"isElementVisible",value:(c=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.getFirstVisibleElement(e);case 4:return n=t.sent,t.abrupt("return",!!n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"getVisibleElement",value:(a=e(o().mark((function t(e){var n,i,a,r,s,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.split(";"),i=uR(n),t.prev=2,i.s();case 4:if((a=i.n()).done){t.next=21;break}return r=a.value,t.prev=6,t.next=9,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(r);case 9:if(s=t.sent,l=JSON.parse(s.extractedValues),!(s.found&&(null==l?void 0:l.offsetHeight)>0&&(null==l?void 0:l.offsetWidth)>0)){t.next=14;break}return c={InnerText:s.innerText,offsetHeight:l.offsetHeight,offsetWidth:l.offsetWidth},t.abrupt("return",c);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6);case 19:t.next=4;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(2),i.e(t.t1);case 26:return t.prev=26,i.f(),t.finish(26);case 29:return t.abrupt("return",Promise.resolve(void 0));case 30:case"end":return t.stop()}}),t,this,[[2,23,26,29],[6,16]])}))),function(t){return a.apply(this,arguments)})},{key:"getFirstVisibleElement",value:(i=e(o().mark((function t(e){var n,i,a,r,s,l,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllVisibleElements(e);case 2:if(void 0!==(n=t.sent)){t.next=7;break}return t.next=6,this.getVisibleElement(e);case 6:return t.abrupt("return",t.sent);case 7:t.prev=7,i=JSON.parse(n),a=uR(i),t.prev=10,a.s();case 12:if((r=a.n()).done){t.next=33;break}s=r.value,l=uR(s),t.prev=15,l.s();case 17:if((c=l.n()).done){t.next=23;break}if(!((u=c.value)&&u.offsetHeight>0&&u.offsetWidth>0)){t.next=21;break}return t.abrupt("return",u);case 21:t.next=17;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(15),l.e(t.t0);case 28:return t.prev=28,l.f(),t.finish(28);case 31:t.next=12;break;case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(10),a.e(t.t1);case 38:return t.prev=38,a.f(),t.finish(38);case 41:t.next=46;break;case 43:t.prev=43,t.t2=t.catch(7);case 46:return t.abrupt("return",void 0);case 47:case"end":return t.stop()}}),t,this,[[7,43],[10,35,38,41],[15,25,28,31]])}))),function(t){return i.apply(this,arguments)})},{key:"getAllVisibleElements",value:(n=e(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.pageHandlerModule.RunQuerySelectorAllOnBodyWithReponse(e);case 3:return n=t.sent,t.abrupt("return",n.response);case 7:t.prev=7,t.t0=t.catch(0);case 10:return t.abrupt("return",Promise.resolve(void 0));case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return n.apply(this,arguments)})},{key:"getClippingButtonTitle",value:function(){return this.flyoutData.experimentData.isExperimentActive(Be.autoClipExp)?this.flyoutData.strings.autoClipButtonTitle:this.market===sR.engb?this.flyoutData.strings.clippingButtonTitleEnGb:this.flyoutData.strings.clippingButtonTitle}},{key:"getClippedSubTitle",value:function(){return this.market===sR.engb?this.flyoutData.strings.clippedSubTitleEnGb:this.flyoutData.strings.clippedSubTitle}},{key:"getClippingMainTitle",value:function(t,e){var n,i=this.utilities.createElement("SPAN"),o=this.utilities.formatPrice(t,this.market);if(i.textContent=Dl.replaceStringsPlaceholders("".concat(Dt.currency).concat(o),this.market),i.style.color="var(--text-price-savings-color)",this.utilities.shouldRenderSmallNotification())i.style.fontSize="20px",i.style.lineHeight="26px",i.style.fontWeight="600";else{i.style.fontSize="26px",i.style.lineHeight="30px",i.style.fontWeight="600";var a=this.utilities.createElement("BR");i.appendChild(a)}n=this.market===sR.engb?this.flyoutData.strings.clippingMainTitleEnGb:this.utilities.shouldRenderSmallNotification()?this.flyoutData.strings.clippingMainTitleSmallNotification:this.flyoutData.strings.clippingMainTitle,this.utilities.populateSingleChildHtml(e,n,i)}},{key:"getClippingDefaultTitle",value:function(){return this.market===sR.engb?this.flyoutData.strings.defaultClippingTitleEnGb:this.flyoutData.strings.defaultClippingTitle}}]),x}(Bb),fR=pR;function gR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function mR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function vR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var yR=function(t){u(n,t);var e=vR(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"utilities",void 0),f(l(o),"component",void 0),f(l(o),"flyoutData",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"cachedContainer",void 0),o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.initializeComponent(),document.addEventListener(cb.HubPageDataLoaded,o.handleHubPageDataLoaded.bind(l(o)),!1),o}return r(n,[{key:"ShouldRenderModule",value:function(){return Promise.resolve(this.flyoutData.experimentData.isExperimentActive(Be.startShoppingHomeModules)&&!!this.flyoutData.common.muid)}},{key:"renderModule",value:function(){this.cachedContainer||(this.cachedContainer=this.utilities.createElement("DIV"),this.cachedContainer.id="feedModule",this.cachedContainer.appendChild(this.component));var t=this.CreateModule(this.cachedContainer,this.GetModulePriority(),this.GetModuleName(),_t.HOME,Ft.SQUARES);return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t,e=this.flyoutData.common.shoppingPersistent.querySelector("#feedModule");e&&(e.slot="header-content",null===(t=e.parentElement)||void 0===t||t.classList.add("no-padding-header"),e.children[0]&&(e.children[0].isPolePosition=!0))}},{key:"GetModuleName",value:function(){return this.GetFeedModuleName()}},{key:"initializeComponent",value:function(){this.component=this.utilities.createElement("msft-product-feed"),this.component.navigateToRetailer=this.navigateToRetailer.bind(this),this.component.logShowMoreButtonClicked=this.logShowMoreButtonClicked.bind(this)}},{key:"transformShoppingEntities",value:function(t){if(!t||0===t.length)return[];var e,n=gR(t);try{for(n.s();!(e=n.n()).done;){var i,o=e.value;if(o.dealPercentage){var a=this.flyoutData.strings.percentageOff.replace("{0}",o.dealPercentage);o.dealPercentageLocalized=a}if(o.destination||(o.destinationUrl?o.destination=o.destinationUrl:o.clickPingUrl?o.destination=o.clickPingUrl:o.destination=this.generateStartShoppingPDPUrl(o.globalOfferId,o.title)),null!==(i=o.priceInfo)&&void 0!==i&&i.price){var r=parseFloat(o.priceInfo.price.replace(/[^0-9]/gi,""))/100;if(o.priceInfo.priceIntText=Math.floor(r).toLocaleString(this.flyoutData.common.market||"en-us"),o.priceInfo.priceHundredthText=(r-Math.floor(r)).toFixed(2).substring(2),o.priceInfo.originalPrice){var s=(parseFloat(o.priceInfo.originalPrice.replace(/[^0-9]/gi,""))/100).toLocaleString(this.flyoutData.common.market||"en-us",{minimumFractionDigits:2});o.priceInfo.originalPrice=o.priceInfo.priceCurrencySymbol+s}}}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"navigateToRetailer",value:function(t){var e,n=new Yr(this.GetCardName()),i=this.GetFeedModuleName();switch(this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RETAILER),this.logModule.LogInfoEvent(S.ButtonClick,"Navigation to another retailer from feed module: ".concat(this.GetFeedModuleName()),n),i){case Rt.TRENDING_OFFERS:e=is.FEED_TRENDING_OFFERS;break;case Rt.DAILY_DEALS:e=is.FEED_DAILY_DEALS;break;case Rt.INFINITE_CATEGORY_FEED:e=is.FEED_INFINITE_CATEGORY;break;default:e=null}e&&this.pageHandlerModule.RecordAsUserAction(e),this.pageHandlerModule.NavigateToRetailerSite(t)}},{key:"logShowMoreButtonClicked",value:function(){var t,e=new Yr(this.GetShowMoreButtonName()),n=this.GetFeedModuleName();switch(this.logModule.LogInfoEvent(S.ButtonClick,"Show more button clicked for feed module: ".concat(n),e),n){case Rt.TRENDING_OFFERS:t=is.FEED_TRENDING_OFFERS_SHOW_MORE;break;case Rt.DAILY_DEALS:t=is.FEED_DAILY_DEALS_SHOW_MORE;break;case Rt.INFINITE_CATEGORY_FEED:t=is.FEED_INFINITE_CATEGORY_SHOW_MORE;break;default:t=null}t&&this.pageHandlerModule.RecordAsUserAction(t)}},{key:"generateStartShoppingPDPUrl",value:function(t,e){var n=this.flyoutData.common.market||"en-us",i="https://www.msn.".concat("zh-cn"===n?"cn":"com"),o="fr-fr"===n?"achats":"shopping",a=new URLSearchParams;return a.set("pid",t),e&&a.set("title",e),"".concat(i,"/").concat(n,"/").concat(o,"?").concat(a.toString())}}]),n}(Bb);function CR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var bR=function(t){u(n,t);var e=CR(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n,[{key:"handleHubPageDataLoaded",value:function(t){var e,n,i;(null===(e=t.detail)||void 0===e||null===(n=e.dailyDeals)||void 0===n?void 0:n.length)>0&&("1"===(null===(i=t.detail.dailyDealsMetadata)||void 0===i?void 0:i.forYou)?this.component.title=this.flyoutData.strings.dailyDealsPersonalizedTitle:this.component.title=this.flyoutData.strings.dailyDealsTitle,this.component.shoppingEntities=this.transformShoppingEntities(t.detail.dailyDeals))}},{key:"GetFeedModuleName",value:function(){return Rt.DAILY_DEALS}},{key:"GetModulePriority",value:function(){return wt.DAILY_DEALS}},{key:"GetCardName",value:function(){return E.DailyDealsCard}},{key:"GetShowMoreButtonName",value:function(){return E.DailyDealsShowMore}}]),n}(yR),SR=bR,xR=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .gradient {\n                color: transparent;\n                background: linear-gradient(92.78deg, #00D4A1 -58.01%, #0048D4 44.73%, #6A00D4 141.23%);\n                -webkit-background-clip: text;\n            }\n            .dealsLink:hover {\n                background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%)!important;\n            }\n            "}},{key:"getDarkModeStyles",value:function(){return"\n            .gradient {\n                background: linear-gradient(92.78deg, #71FFDD -58.01%, #71FFDD -58.01%, #9CBEFF 44.73%, #D3A6FF 141.23%);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            "}}]),t}();function ER(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var AR,TR,DR=function(t){u(n,t);var e=ER(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.assets=new xR,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.DEALS}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.CouponData,n=null!==(t=e&&e.Deals&&e.Deals.length>0)&&void 0!==t&&t;return Promise.resolve(n)}},{key:"renderModule",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=this.createElement("msft-edge-shopping-section");e.id="dealsSection";var n=null===(t=this.flyoutData.dataStoreModule.CouponData)||void 0===t?void 0:t.Deals;if(n){var i,o=n.length.toString()+" deal"+(n.length>1?"s":"");this.populateDealsList(e,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(e,o,null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.Deals,this.GetModuleName(),(function(t){var e=bt.DEAL;return t&&a.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populateDealsList.bind(this))}return Promise.resolve(this.CreateModule(e,wt.DEALS,Rt.DEALS,_t.CONTEXTUAL,Ft.BLOCK))}},{key:"populateDealsList",value:function(t,e,n){var i,o=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.Deals;if(o){var a=0;o.length>0&&(a=o.length);var r=0;e?r=bt.DEAL:a>bt.DEAL&&(a=bt.DEAL);for(var s=r;s<a;s++){var l=o[s],c=this.createDealsTile(l.headerText,l.id,l.offerUrl);t.appendChild(c),s===r&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&c&&c.focus()}}}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shopping&&this.flyoutData.dataStoreModule.CouponData&&this.flyoutData.dataStoreModule.CouponData.Deals.length>0){var t=this.utilities.createElement("DIV",{style:"width: 100%; overflow: hidden; position: relative; display: flex; flex-direction: row; justify-content: flex-start; column-gap: 10px;"}),e=this.utilities.createElement("DIV",{style:"display: flex;\n                    flex-direction: column;\n                    justify-content: center;\n                    text-align:left;\n                    vertical-align: middle;"}),n=this.utilities.createElement("P",{style:"font-weight: 600;\n                        color: var(--neutral-foreground-rest);\n                        place-self: center;"});n.className="txtLarge",n.style.fontSize="18px",n.style.lineHeight="21px";var i=this.utilities.replaceValueInKey("dealsTitle",this.flyoutData.strings.dealsTitle,this.utilities.CapitalizeWordsInString(this.flyoutData.dataStoreModule.CouponData.FriendlyDomainName));this.flyoutData.common.isPane||(t.style.marginBottom="13px"),n.style.fontWeight="400",n.style.placeSelf="unset",n.style.fontSize="20px",n.style.lineHeight="23px",i=this.utilities.CapitalizeWordsInString(this.flyoutData.dataStoreModule.CouponData.FriendlyDomainName),n.textContent=i,e.appendChild(n),e.style.rowGap="2px";var o=this.utilities.createElement("P");o.className="txtSmall",o.style.fontSize="12px",o.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#FFFFFF":"#666666",o.textContent=this.utilities.replaceValueInKey("dealsSubTitle",this.flyoutData.strings.dealsSubTitle,this.flyoutData.dataStoreModule.CouponData.DomainName),e.appendChild(o);var a=this.utilities.createElement("IMG",{style:"width: 38px; height: 38px; float: left;\n                box-shadow: 0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(0.11 * (2 - var(--background-luminance, 1)))), 0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(0.13 * (2 - var(--background-luminance, 1))));\n                border: 1px solid;\n                border-radius: 8px;\n                border-color: #ECECEC;"});if(a.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.dataStoreModule.CouponData.DomainName,".png"),a.setAttribute("aria-hidden","true"),a.addEventListener("error",(function(){t.style.gridTemplateColumns="auto",a.style.visibility="hidden"})),t.appendChild(a),t.appendChild(e),this.flyoutData.common.isPane){var r=this.flyoutData.common.shopping.querySelector("#dealsSection");r&&(r.prepend(t),r.slot="header-content")}else t.slot="header-content",this.flyoutData.common.shopping.appendChild(t)}}},{key:"createElement",value:function(t,e,n){var i=document.createElement(t);return e&&i.setAttribute("style",e),n&&(i.innerText=n),i}},{key:"managePCLinkEvents",value:function(t,e,n){var i=this,o=this.flyoutData.common.currentDevice;t.addEventListener("click",(function(){o===St.Desktop&&i.navigateToRetailer(e,n,cl.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToRetailer(e,n,cl.NEW_FOREGROUND_TAB)}))}},{key:"navigateToRetailer",value:function(t,e,n){var i=new Yr(E.NavigateToRetailerOffer);this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_DEAL_OFFER),this.logModule.LogInfoEvent(S.ButtonClick,"",i),this.pageHandlerModule.NavigateToDealWithDisposition(t,e,n)}},{key:"createDealsTile",value:function(t,e,n){var i=this.utilities.createElement("BUTTON",{style:"background: transparent;\n                --elevation: 5;\n                overflow: hidden;\n                align-items: center;\n                padding: 12px 12px 10px;\n                margin-bottom: 10px;\n                cursor: pointer;\n                border: calc(var(--outline-width) * 1px) solid transparent;\n                border-radius: calc(var(--elevated-corner-radius) * 1px);\n                text-align: left;\n                display: table;\n                width: 100%;"});i.className="divDealsLink";var o=this.utilities.createElement("DIV",{style:"position: relative; height: 100%; display: grid; grid-template-columns: auto 60% auto; grid-gap: 20px;"});i.style.border="none";i.style.borderTop="1px solid ".concat("rgb(236, 236, 236, 0.08)"),i.style.marginBottom="0px",i.className+=" dealsLink",o.style.alignItems="center",i.appendChild(o);var a=this.utilities.createElement("IMG",{style:"width: 32px; height: 32px; place-self: center"});a.src=this.flyoutData.common.resourcesEndpoint+"retailerBranding/SquareIcons/DollarIcon.png",a.addEventListener("error",(function(){o.style.gridTemplateColumns="auto",o.removeChild(a)})),a.setAttribute("aria-hidden","true"),o.appendChild(a);var r=this.utilities.createElement("DIV",{style:"justify-content: space-around;\n                flex-direction: column;\n                max-width: 192px;"});o.appendChild(r);var s=this.utilities.createElement("P",{style:"margin: 0px;\n                    margin-bottom: 5px;"});s.className="txtMedium",s.style.fontWeight="600",s.style.fontSize="14px",s.style.lineHeight="16px",s.style.color="var(--neutral-foreground-rest)",s.textContent=t,r.appendChild(s),i.setAttribute("aria-label","".concat(this.flyoutData.strings.getDeal,", ").concat(t)),i.setAttribute("role","button");var l=this.utilities.createElement("P");return l.className="txtSmall gradient",l.style.fontWeight="500",l.style.fontSize="12px",l.style.lineHeight="14px",l.style.placeSelf="center",l.textContent=this.flyoutData.strings.getDeal,o.appendChild(l),this.managePCLinkEvents(i,e,n),i}}]),n}(Bb),kR=DR,IR=function(){function t(){s(this,t)}return r(t,[{key:"getThumbsUp",value:function(){return mt.getTrustedHTML(AR||(AR=j(['<svg aria-hidden="true" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n                                          <path d="M8.9999 3.0102C8.9999 1.38227 8.23983 0.211066 6.99563 0.211066C6.3457 0.211066 6.10136 0.572932 5.86823 1.40827L5.73083 1.92287C5.6635 2.162 5.5463 2.5692 5.3795 3.14353C5.37503 3.15893 5.36843 3.17347 5.3599 3.1868L3.4487 6.17727C2.99667 6.88453 2.32969 7.4282 1.54577 7.7284L1.23025 7.8492C0.399096 8.1674 -0.0834571 9.03658 0.0859628 9.91029L0.355623 11.301C0.516576 12.1311 1.14568 12.7917 1.9669 12.993L7.05203 14.2393C8.7395 14.6529 10.4451 13.6296 10.8744 11.9461L11.8176 8.2466C12.1133 7.08713 11.413 5.90747 10.2534 5.6118C10.0785 5.5672 9.8987 5.54467 9.7181 5.54467L8.50256 5.54467C8.8333 4.45607 8.9999 3.6162 8.9999 3.0102ZM1.06768 9.71993C0.99067 9.32279 1.21001 8.92771 1.58781 8.78306L1.90333 8.66226C2.88707 8.2856 3.72406 7.60333 4.29132 6.7158L6.2025 3.72533C6.2625 3.6314 6.30876 3.52933 6.33983 3.42233L6.70776 2.14213L6.8489 1.6146C6.94183 1.28927 6.98863 1.21107 6.99563 1.21107C7.5741 1.21107 7.9999 1.86713 7.9999 3.0102C7.9999 3.59987 7.7827 4.5672 7.34403 5.88693C7.23643 6.2106 7.47736 6.54467 7.8185 6.54467L9.7181 6.54467C9.81536 6.54467 9.91216 6.5568 10.0064 6.5808C10.6308 6.74 11.0078 7.3752 10.8486 7.99953L9.90536 11.699C9.61163 12.8509 8.4447 13.551 7.2901 13.2681L2.20495 12.0217C1.76276 11.9133 1.42401 11.5576 1.33734 11.1107L1.06768 9.71993Z" fill="currentcolor"/>\n                                          </svg>\n                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">\n                                          <path d="M9.03773 5.54467C9.34493 4.59327 9.5 3.76053 9.5 3.04247C9.5 1.44333 8.874 0.210867 7.83334 0.210867C7.3002 0.210867 7.11474 0.510667 6.91167 1.24187L6.7318 1.92287C6.66454 2.162 6.54733 2.5692 6.38047 3.14353C6.376 3.15893 6.36947 3.17347 6.36087 3.1868L4.44971 6.17727C3.99768 6.88453 3.3307 7.4282 2.54678 7.7284L1.70862 8.04927C1.17971 8.2518 0.872628 8.80489 0.980441 9.36089L1.43788 11.72C1.54931 12.2947 1.98484 12.752 2.55337 12.8914L8.05307 14.2393C9.74053 14.6529 11.4461 13.6296 11.8754 11.9461L12.9246 7.83093C13.1748 6.8498 12.5822 5.85167 11.6011 5.60147C11.4531 5.56373 11.3009 5.54467 11.1481 5.54467L9.03773 5.54467Z" fill="currentcolor"/>\n                                          </svg>'])))}},{key:"getThumbsDown",value:function(){return mt.getTrustedHTML(TR||(TR=j(['<svg aria-hidden="true" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n                                          <path d="M8.99965 11.9898C8.99965 13.6177 8.23958 14.7889 6.99539 14.7889C6.34545 14.7889 6.10112 14.4271 5.86798 13.5917L5.73058 13.0771C5.66325 12.838 5.54605 12.4308 5.37925 11.8565C5.37479 11.8411 5.36819 11.8265 5.35965 11.8132L3.44846 8.82273C2.99642 8.11547 2.32944 7.5718 1.54552 7.2716L1.23 7.1508C0.398852 6.8326 -0.0837017 5.96342 0.0857183 5.08971L0.355378 3.69899C0.516332 2.86893 1.14544 2.20833 1.96665 2.00705L7.05178 0.760694C8.73925 0.347101 10.4449 1.37039 10.8741 3.05394L11.8174 6.7534C12.1131 7.91287 11.4127 9.09253 10.2532 9.3882C10.0783 9.4328 9.89845 9.45533 9.71785 9.45533H8.50232C8.83305 10.5439 8.99965 11.3838 8.99965 11.9898ZM1.06743 5.28007C0.990425 5.67721 1.20977 6.07229 1.58757 6.21694L1.90309 6.33774C2.88683 6.7144 3.72382 7.39667 4.29108 8.2842L6.20225 11.2747C6.26225 11.3686 6.30852 11.4707 6.33958 11.5777L6.70752 12.8579L6.84865 13.3854C6.94158 13.7107 6.98839 13.7889 6.99539 13.7889C7.57385 13.7889 7.99965 13.1329 7.99965 11.9898C7.99965 11.4001 7.78245 10.4328 7.34379 9.11307C7.23619 8.7894 7.47712 8.45533 7.81825 8.45533H9.71785C9.81512 8.45533 9.91192 8.4432 10.0061 8.4192C10.6305 8.26 11.0076 7.6248 10.8484 7.00047L9.90512 3.30101C9.61138 2.14911 8.44445 1.44896 7.28985 1.73195L2.2047 2.9783C1.76251 3.08668 1.42377 3.44239 1.3371 3.88935L1.06743 5.28007Z" fill="currentcolor"/>\n                                          </svg>\n                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">\n                                          <path d="M9.03773 9.45533C9.34493 10.4067 9.5 11.2395 9.5 11.9575C9.5 13.5567 8.874 14.7891 7.83334 14.7891C7.3002 14.7891 7.11474 14.4893 6.91167 13.7581L6.7318 13.0771C6.66454 12.838 6.54733 12.4308 6.38047 11.8565C6.376 11.8411 6.36947 11.8265 6.36087 11.8132L4.44971 8.82273C3.99768 8.11547 3.3307 7.5718 2.54678 7.2716L1.70862 6.95073C1.17971 6.7482 0.872628 6.19511 0.980441 5.63911L1.43788 3.27999C1.54931 2.70533 1.98484 2.24799 2.55337 2.10865L8.05307 0.760693C9.74053 0.3471 11.4461 1.37039 11.8754 3.05394L12.9246 7.16907C13.1748 8.1502 12.5822 9.14833 11.6011 9.39853C11.4531 9.43627 11.3009 9.45533 11.1481 9.45533L9.03773 9.45533Z" fill="currentcolor"/>\n                                          </svg>'])))}},{key:"getStyles",value:function(){return"\n        #feedbackDiv {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            border-top: 1px solid #F1F1F1;\n            background: var(--fill-color);\n        }\n        #feedbackPrompt {\n            font-size: 12px;\n            line-height: 16px;\n            margin-left: 12px;\n            margin-top: 12px;\n            margin-bottom: 10px;\n            font-weight: 600;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        .iconButton {\n            border-color: transparent;\n            background: transparent;\n            margin-top: 5px;\n            width: 32px;\n            height: 32px;\n            cursor: pointer;\n        }\n        :is(.iconButton:hover, .iconButton:focus) {\n            background: #E6E6E6;\n            border-radius: 2px;\n            outline: none;\n        }\n        .feedbackText {\n            font-size: 14px;\n            line-height: 18px;\n            margin: 0px;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        #closeButton {\n            margin-top: 2px;\n            margin-left: auto;\n            margin-right: 5px;\n            padding: 0px;\n            border: none;\n            background: transparent;\n            cursor: pointer;\n        }\n        #closeButton:focus {\n            outline: none;\n            border: 2px solid #898989;\n            border-radius: 3px;\n        }\n        #feedbackDivThanks {\n            background: linear-gradient(90deg, #EEFCFF 20.31%, #F5F9FF 46.87%, #FFFFFF 98.44%);\n            padding: 10px;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            border-top: 1px solid #F1F1F1;\n            column-gap: 12px;\n        }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        #feedbackDiv {\n            background: #3b3b3b;\n            border-top: 1px solid rgb(241, 241, 241, 0.08);\n        }\n        #feedbackDivThanks {\n            background: linear-gradient(90deg, #324654 20.31%, #3E444E 46.87%, #3b3b3b 98.44%);\n            border-top: 1px solid rgb(241, 241, 241, 0.08);\n        }\n        #feedbackPrompt, .feedbackText {\n            color: rgba(255, 255, 255, 0.83);\n        }\n        :is(.iconButton:hover, .iconButton:focus) {\n            background: #5f5f5f;\n        }\n        #closeButton svg path {\n            fill: #FFFFFF;\n        }\n        "}}]),t}();function wR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return PR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function PR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function OR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var RR=new Map;RR[0]=E.FeedbackDislikeMenu0,RR[1]=E.FeedbackDislikeMenu1,RR[2]=E.FeedbackDislikeMenu2,RR[3]=E.FeedbackDislikeMenu3,RR[4]=E.FeedbackDislikeMenu4;var MR=function(t){u(h,t);var n,i,a,c=OR(h);function h(t,n,i,a){var r,u,d;return s(this,h),f(l(d=c.call(this)),"assets",void 0),f(l(d),"flyoutData",void 0),f(l(d),"utilities",void 0),f(l(d),"logModule",void 0),f(l(d),"pageHandlerModule",void 0),f(l(d),"commonAssets",void 0),f(l(d),"clientId",void 0),f(l(d),"options",void 0),f(l(d),"isBNPL",void 0),f(l(d),"feedbackPromptText",void 0),f(l(d),"stateManagement",void 0),f(l(d),"isShortVersion",!1),f(l(d),"isEventCall",!1),f(l(d),"wrapperHeight",void 0),d.flyoutData=t,d.utilities=n.viewModulesUtilities,d.logModule=n.logModule,d.pageHandlerModule=n.pageHandlerModule,d.commonAssets=a,d.assets=new IR,d.stateManagement=i,d.clientId="",d.isBNPL=!(null===(r=d.flyoutData.dataStoreModule)||void 0===r||null===(u=r.VirtualCardData)||void 0===u||!u.cardProvider),d.options=[],d.isBNPL?(d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue($s,"")),d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(zs,""))):(d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(Us,"")),d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(Vs,"")),d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(Gs,"")),d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(Ws,""))),d.options.push(d.flyoutData.dataLoader.GetLoadTimeDataValue(Ks,"")),d.feedbackPromptText=d.isBNPL?d.flyoutData.strings.bnplFeedbackPrompt:d.flyoutData.strings.feedbackPrompt,d.stateManagement.addEventListener(hn.CreateShortFeedbackModule,function(){var t=e(o().mark((function t(e){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.detail&&e.detail.callback)){t.next=15;break}if(d.isEventCall=!0,n=document.querySelector("#feedbackDiv"),t.t0=!n,!t.t0){t.next=8;break}return t.next=7,d.ShouldRenderModule();case 7:t.t0=t.sent;case 8:if(!t.t0){t.next=15;break}return d.isShortVersion=!0,d.wrapperHeight=e.detail.wrapperHeight,t.next=13,d.renderModule();case 13:(i=t.sent)&&i.element&&(e.detail.callback(i),d.isEventCall=!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d.stateManagement.addEventListener(hn.CreateFeedbackModule,function(){var t=e(o().mark((function t(e){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.detail&&e.detail.callback)){t.next=15;break}if(d.isEventCall=!0,n=document.querySelector("#feedbackDiv"),t.t0=!n,!t.t0){t.next=8;break}return t.next=7,d.ShouldRenderModule();case 7:t.t0=t.sent;case 8:if(!t.t0){t.next=15;break}return d.isShortVersion=!1,d.wrapperHeight=e.detail.wrapperHeight,t.next=13,d.renderModule();case 13:(i=t.sent)&&i.element&&(e.detail.callback(i),d.isEventCall=!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d}return r(h,[{key:"GetModuleName",value:function(){return Rt.FEEDBACK}},{key:"ShouldRenderModule",value:function(){return this.isEventCall||this.flyoutData.common.openedWith===Tt.Auto&&!this.utilities.showNewFooter()&&!this.flyoutData.common.seeInfoFromPCNotification?this.isBNPL?Promise.resolve(this.flyoutData.dataLoader.GetLoadTimeDataValue("is_bnpl_feedback_enabled",!1)):Promise.resolve(this.flyoutData.dataLoader.GetLoadTimeDataValue("is_feedback_enabled",!1)):Promise.resolve(!1)}},{key:"populateMainHeader",value:function(){}},{key:"renderModule",value:(a=e(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),(e=this.utilities.createElement("div")).id="feedbackDiv",e.style.zIndex="50",e.style.position="sticky",e.style.bottom="0px",e.style.alignItems="center",e.style.display="flex",e.style.flexDirection="row",e.style.marginLeft="10px",e.style.marginRight="10px",e.setAttribute("role","group"),this.createFeedbackPrompt(e),t.abrupt("return",Promise.resolve(this.CreateModule(e,wt.MAX,Rt.FEEDBACK,_t.CONTEXTUAL,Ft.BLOCK)));case 14:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"ShowAlways",value:function(){return!0}},{key:"createFeedbackPrompt",value:(i=e(o().mark((function t(n){var i,a,r,s,l,c=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=this.utilities.createElement("p")).className="txtSmall",i.id="feedbackPrompt",i.textContent=this.feedbackPromptText,this.flyoutData.common.isPane&&(i.style.fontSize="14px",i.style.lineHeight="20px"),n.setAttribute("aria-labelledby","feedbackPrompt"),a=this.utilities.createElement("msft-micro-feedback"),this.isShortVersion||(a.style.marginRight="6px",a.style.marginLeft="auto"),(r=this.utilities.createElement("msft-micro-feedback-item")).ariaLabel=this.flyoutData.strings.feedbackAriaLike,r.className="iconButton",r.innerHTML=this.assets.getThumbsUp(),r.addEventListener("click",function(){var t=e(o().mark((function t(e){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.microFeedbackLog("like");case 2:for(;n.lastChild;)n.lastChild.remove();if(i=c.utilities.isKeyboardClick(e),c.createThankYouDialogue(n,i),!c.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=8;break}return t.next=8,c.utilities.userEngagementUtilities.addEngagement(ll.POSITIVE,c.flyoutData.common.popupOrigination,c.stateManagement.getState(pn.topModuleName),qs.likeWeight);case 8:e.preventDefault();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(s=this.utilities.createElement("msft-micro-feedback-item")).ariaLabel=this.flyoutData.strings.feedbackAriaDislike,s.id="btnFeedbackDislike",s.setAttribute("flyout-vertical-position","top"),s.className="iconButton",s.innerHTML=this.assets.getThumbsDown(),l=this.createDislikeMenu(n,s),s.addEventListener("click",function(){var t=e(o().mark((function t(e){var i,a,r,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=document.querySelector("#divContentWrapper"),(void 0!==c.wrapperHeight&&c.wrapperHeight<=220||void 0!==a&&a.offsetHeight<=250)&&(c.flyoutData.common.openedWith===Tt.Auto&&s.setAttribute("flyout-vertical-position","bottom"),c.utilities.shouldRenderSmallNotification()?(l.style.maxWidth="200px",l.style.maxHeight="75px"):l.style.maxHeight="100px"),!s.selected){for(;n.lastChild;)n.lastChild.remove();r=c.utilities.isKeyboardClick(e),c.createThankYouDialogue(n,r)}if(u=null!==(i=e.target.textContent)&&void 0!==i?i:"",-1!==c.options.indexOf(u)||!c.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=8;break}return t.next=8,c.utilities.userEngagementUtilities.addEngagement(ll.NEGATIVE,c.flyoutData.common.popupOrigination,c.stateManagement.getState(pn.topModuleName),qs.dislikeDefaultWeight);case 8:if(u!==c.flyoutData.dataLoader.GetLoadTimeDataValue(Vs,"")||!c.flyoutData.experimentData.isExperimentActive(Be.ruleBasedTriggering)){t.next=11;break}return t.next=11,c.utilities.userEngagementUtilities.addEngagement(ll.NEGATIVE,c.flyoutData.common.popupOrigination,c.stateManagement.getState(pn.topModuleName),js.get(Vs));case 11:if(u!==c.flyoutData.dataLoader.GetLoadTimeDataValue(Us,"")){t.next=14;break}return t.next=14,c.utilities.userEngagementUtilities.increaseCouponExpectationWeight(c.flyoutData.common.popupOrigination,c.stateManagement.getState(pn.topModuleName));case 14:return t.next=16,c.microFeedbackLog("unlike");case 16:e.preventDefault();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.append(r),a.append(s),this.flyoutData.common.isPane&&un.queueUpdate((function(){var t,e,n=null===(t=r.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-button");n&&(n.style.backgroundColor="unset");var i=null===(e=s.shadowRoot)||void 0===e?void 0:e.querySelector("fluent-button");i&&(i.style.backgroundColor="unset")})),this.isShortVersion||n.append(i),n.append(a);case 26:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"createDislikeMenu",value:function(t,e){var n=this,i=this.utilities.createElement("fluent-menu");i.id="dislikeMenu",i.slot="menu",i.style.width="270px",i.style.overflow="auto",i.setAttribute("aria-label","Reason for thumbs down"),i.addEventListener("click",(function(e){n.dislikeMenuLog(t,!1,e)})),i.addEventListener("keydown",(function(i){"Enter"===i.key?n.dislikeMenuLog(t,!0,i):"Tab"===i.key&&n.handleMenuDismiss(e,t,!0)})),document.addEventListener("click",(function(){n.handleMenuDismiss(e,t,!1)}));var o,a=wR(this.options);try{for(a.s();!(o=a.n()).done;){var r=o.value;if(""!==r){var s=this.utilities.createElement("fluent-menu-item");s.textContent=r,i.append(s)}}}catch(t){a.e(t)}finally{a.f()}return e.append(i),i}},{key:"createThankYouDialogue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id="feedbackDivThanks",t.style.position="sticky",t.setAttribute("aria-labelledby","feedbackText");var i=this.utilities.createElement("img");i.src=this.flyoutData.common.resourcesEndpoint+"feedbackIcons/like_1.png",i.setAttribute("aria-hidden","true"),i.style.height="fit-content";var o=this.utilities.createElement("p");o.className="txtSmall feedbackText",o.textContent=this.flyoutData.strings.feedbackThanks,this.flyoutData.common.isPane&&(o.style.fontSize="14px",o.style.lineHeight="20px"),this.isShortVersion&&(o.style.fontSize="12px",t.style.background="var(--fill-color)",t.style.padding="0px",t.parentElement&&(t.parentElement.style.gridTemplateColumns="calc(40% - 26px) calc(60% - 26px)"));var a=this.utilities.createElement("div");a.innerHTML=this.commonAssets.getCloseButton(),a.setAttribute("aria-hidden","true"),a.style.height="16px",a.style.fill="var(--neutral-foreground-rest)";var r=this.utilities.createElement("fluent-button");r.appendChild(a),r.id="closeButton",r.style.cursor="pointer",r.appearance="stealth",r.setAttribute("aria-label",this.flyoutData.strings.feedbackAriaClose),r.addEventListener("click",(function(n){var i=new Yr(E.FeedbackClose);e.logModule.LogInfoEvent(S.ButtonClick,"Closed out of feedback module",i);var o=e.flyoutData.common.shopping.querySelector("#".concat(Yt.CLOSE)),a=e.utilities.isKeyboardClick(n);if(o&&a&&o.focus(),e.isShortVersion)t.style.visibility="hidden";else{t.remove();var r=e.flyoutData.common.shopping.querySelectorAll("hr");r&&r.length>0&&r[r.length-1].remove()}})),t.append(i),t.append(o),t.append(r),n&&r&&r.focus()}},{key:"toJSON",value:function(t){try{var e=JSON.stringify(t),n=JSON.parse(e);return n&&Array.isArray(n)&&0===n.length||"object"===d(n)&&0===Object.entries(n).length?void 0:n}catch(t){return}}},{key:"getLogData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.flyoutData.dataLoader.GetLoadTimeDataValue("is_metrics_reporting_enabled",!1);if(!n)return{};var i,o,a,r=this.flyoutData.dataStoreModule;if("MicroFeedbackVote"===t)i={fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===Tt.Auto};else if("MicroFeedbackFollowUpVote"===t){var s=this.options.indexOf(e);i={answer:e,answerId:s,clientFeedbackId:this.clientId,fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===Tt.Auto,itemId:0,vote:"dislike"}}if(this.isBNPL)return i;if(e===this.options[0])i.couponData=this.toJSON(null===(o=r.CouponData)||void 0===o?void 0:o.Coupons),i.dealsData=this.toJSON(null===(a=r.CouponData)||void 0===a?void 0:a.Deals),i.exclusiveCouponsData=this.toJSON(r.ExclusiveCouponsData),i.groceryCouponData=this.toJSON(r.GroceryCouponData);else if(e===this.options[1])i.orderTrackingData=this.toJSON(r.OrderTrackingData);else if(e===this.options[2]){var l;i.priceComparisonData=this.toJSON(r.PriceComparisonData),i.priceHistoryData=this.toJSON(r.PriceHistoryData),i.priceHistoryData&&null!==(l=i.priceHistoryData.ProductDetails)&&void 0!==l&&l.base64ProductImage&&(i.priceHistoryData.ProductDetails.base64ProductImage=void 0)}else if(e===this.options[4]){var c;i.cashbackData=this.toJSON(r.CashBackData),i.orderTrackingData=this.toJSON(r.OrderTrackingData),i.rewardsData=this.toJSON(r.RewardData),i.virtualCardData=this.toJSON(r.VirtualCardData),i.pinterestData=this.toJSON(r.PinterestData),i.tipsData=this.toJSON(null===(c=r.NudgeTipsData)||void 0===c?void 0:c.Tips),i.sustainabilityData=this.toJSON(r.SustainabilityData),i.topRetailerData=this.toJSON(r.TopRetailerData)}return i}},{key:"handleMenuDismiss",value:function(t,e,n){if(t.selected&&!t.menuVisible||n){for(;e.lastChild;)e.lastChild.remove();this.createThankYouDialogue(e,n)}}},{key:"microFeedbackLog",value:(n=e(o().mark((function t(e){var n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="like"===e?E.FeedbackLike:E.FeedbackDislike,i=new Yr(n),a=this.getLogData("MicroFeedbackVote"),this.logModule.LogInfoEvent(S.ButtonClick,"Vote: "+e,i),this.flyoutData.common.openedWith!==Tt.Auto||this.flyoutData.common.popupOrigination!==Fe.AUTO_SHOW_COUPONS_CHECKOUT||"unlike"!==e){t.next=8;break}return t.next=8,this.utilities.addNegativeEngagement(this.flyoutData.common.popupOrigination,1,144e5);case 8:return t.next=10,this.pageHandlerModule.SendMicroFeedbackVote(e,a,this.isBNPL);case 10:null!=(r=t.sent)&&r.clientFeedbackId&&(this.clientId=r.clientFeedbackId);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"dislikeMenuLog",value:function(t,e,n){var i,o=null!==(i=n.target.textContent)&&void 0!==i?i:"",a=this.options.indexOf(o),r=RR[a];r||(r=E.Unknown);var s=new Yr(r),l=this.getLogData("MicroFeedbackFollowUpVote",o);for(this.logModule.LogInfoEvent(S.ButtonClick,"Clicked follow up menu option for feedback: "+this.clientId,s),this.pageHandlerModule.SendMicroFeedbackFollowUpVote(this.clientId,a.toString(),o,l,this.isBNPL),"Other"===o&&this.pageHandlerModule.OpenMicroFeedback(JSON.stringify(l));t.lastChild;)t.lastChild.remove();this.createThankYouDialogue(t,e)}}]),h}(Bb),NR=MR;function LR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function _R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function FR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var HR=function(t){u(a,t);var n,i=FR(a);function a(t,e,n,o){var r;return s(this,a),f(l(r=i.call(this)),"assets",void 0),f(l(r),"commonAssets",void 0),f(l(r),"utilities",void 0),f(l(r),"groceryUtilities",void 0),f(l(r),"flyoutData",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"logModule",void 0),f(l(r),"stateModule",void 0),f(l(r),"activatedCashbackItems",void 0),r.flyoutData=t,r.utilities=e.viewModulesUtilities,r.groceryUtilities=new ww(t,e),r.pageHandlerModule=e.pageHandlerModule,r.logModule=e.logModule,r.assets=new Aw,r.commonAssets=n,r.activatedCashbackItems=[],r.stateModule=o,r}return r(a,[{key:"GetModuleName",value:function(){return Rt.GROCERY_CASHBACK_ACTIVATED}},{key:"ShouldRenderModule",value:function(){var t,e,n,i;if(!this.flyoutData.experimentData.isExperimentActive(Be.groceryCashback)||!this.flyoutData.common.isRebatesEnabled)return Promise.resolve(!1);var o=null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e?void 0:e.Cashback;if(o&&o.ItemizedCashback){var a=this.flyoutData.common.domain,r=Je.GetActivatedCashbackItems(a),s=r.activatedItems,l=[];if(r.activatedItemsList){var c,u=LR(s);try{for(u.s();!(c=u.n()).done;){var d=c.value,h=new ic,p=new tc,f=r.activatedItemsList[d];p.title=d,p.upc=f.upc,p.url=f.url,h.cashBackProducts.push(p),h.value=f.value,h.id=f.offerId,h.imageUrl=f.imageUrl,h.description=f.description,h.minQty=f.limit,l.push(h)}}catch(t){u.e(t)}finally{u.f()}}this.activatedCashbackItems=l.filter((function(t){return t.imageUrl&&t.cashBackProducts[0].title&&t.value&&t.id&&t.cashBackProducts[0].upc&&t.cashBackProducts[0].url&&t.description&&!o.SubmittedOfferIds.includes(t.id)}))}var g=null!==(n=(null===(i=this.activatedCashbackItems)||void 0===i?void 0:i.length)>0)&&void 0!==n&&n;return Promise.resolve(g)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping,e=this.utilities.createElement("p");e.textContent=this.flyoutData.strings.gcbActivatedSectionTitle,e.slot="header-content",e.style.alignSelf="flex-start",e.style.margin="0px",t.append(e)}},{key:"renderModule",value:(n=e(o().mark((function t(){var e,n,i,a,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateModule.getState(pn.ICOffersRendered)||this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),a=this.utilities.createElement("msft-edge-shopping-section"),(null===(e=this.flyoutData.dataStoreModule)||void 0===e||null===(n=e.GroceryCouponData)||void 0===n||null===(i=n.Cashback)||void 0===i?void 0:i.ItemizedCashback)&&(r=function(t){var e=bt.GROCERY_CASHBACK;return t&&s.common.bannerContext===Ht.VIEWALL&&(e=t.length),e},s=this.flyoutData,this.activatedCashbackItems&&this.activatedCashbackItems.length>0&&(this.populateGroceryActivatedCashbackList(a,!1,!1),this.utilities.createCommonListStructure(a,this.flyoutData.strings.gcbActivatedSectionTitle,this.activatedCashbackItems,this.GetModuleName(),r,this.populateGroceryActivatedCashbackList.bind(this)))),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackActivated),dn.CouponImpressionId),t.abrupt("return",Promise.resolve(this.CreateModule(a,wt.GROCERY_CASHBACK_ACTIVATED,Rt.GROCERY_CASHBACK_ACTIVATED,_t.CONTEXTUAL,Ft.SQUARES)));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"populateGroceryActivatedCashbackList",value:function(t,e,n){if(this.activatedCashbackItems){var i=0;this.activatedCashbackItems.length>0&&(i=this.activatedCashbackItems.length);var o=0;e?(o=bt.GROCERY_CASHBACK,this.pageHandlerModule.RecordAsUserAction(is.CLICK_ITEMIZED_CASHBACK_SEE_ALL),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackActivatedSeeAll),dn.CouponImpressionId)):i>bt.GROCERY_CASHBACK&&(i=bt.GROCERY_CASHBACK);var a=null;e?a=t.querySelector("#gcSectionActivated"):((a=this.utilities.createElement("DIV")).className="gcSectionWrapper",a.id="gcSectionActivated",this.flyoutData.common.isPane&&(a.style.padding="0px 20px"));for(var r=o;r<i;r++){var s=this.activatedCashbackItems[r],l=this.createGroceryCashbackActivatedTile(s);if(a&&l){if(r===o&&e){var c=this.utilities.createElement("hr");c.className="gcHR",a.appendChild(c)}if(a.appendChild(l),r!==i-1){var u=this.utilities.createElement("hr");u.className="gcHR",a.appendChild(u)}r===o&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&l.focus(),e||t.appendChild(a)}}}}},{key:"navigateToRetailer",value:function(t){var e=new Yr(E.ActivatedGroceryItem);this.pageHandlerModule.RecordAsUserAction(is.ACTIVATED_CLICK_ITEMIZED_CASHBACK),this.logModule.LogInfoEvent(S.ButtonClick,"Navigation to product details page from activated cashback",e,dn.CouponImpressionId),this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackActivatedNavigateToRetailer),dn.CouponImpressionId),this.pageHandlerModule.NavigateToRetailerSite(t.cashBackProducts[0].url)}},{key:"createGroceryCashbackActivatedTile",value:function(t){var e=this,n=this.utilities.createElement("a");n.href="#",n.className="groceryCashback",n.setAttribute("role","group"),n.addEventListener("click",(function(){e.navigateToRetailer(t)}));var i=this.utilities.createElement("div");i.className="gcImageDiv",i.style.backgroundImage="url('".concat(t.imageUrl,"')"),i.setAttribute("aria-hidden","true");var o=this.utilities.createElement("div",{style:"\n            display: flex;\n            flex-direction: column;\n            row-gap: 4px;\n            width: 160px;\n        "}),a=this.utilities.createElement("p");a.className="gcTitle",a.textContent=t.cashBackProducts[0].title;var r=this.utilities.createElement("div");r.className="gcCashbackDiv";var s=this.utilities.createElement("p");s.className="gcCashback";var l="".concat(Dt.currency).concat(this.groceryUtilities.getCashbackString(t.value));if(l===Dt.currency)return null;s.textContent=this.utilities.replaceValueInKey("gcbCashBack",this.flyoutData.strings.gcbCashBack,l),s.textContent=Dl.replaceStringsPlaceholders(s.textContent);var c=this.utilities.createElement("div");c.slot="hover-anchor",c.setAttribute("aria-label","Info icon"),c.innerHTML=this.commonAssets.getInfoIcon();var u=t.id,d=t.cashBackProducts[0].title,h=this.logModule,p=this.pageHandlerModule;var f=this.utilities.createElement("msft-shopping-tooltip");f.className="gcTooltip",f.width="225px",f.caratLeftOffset="145px",f.content=this.utilities.CapitalizeString(t.description.replace(/on (any )*/,"").trim()),f.linkText="Details",f.linkHandler=function(){var t=new Yr(E.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(u);h.LogInfoEvent(S.ButtonClick,"Navigated to disclaimer for ".concat(d),t),p.RecordAsUserAction(is.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),p.NavigateToUrl(e)},f.addEventListener("click",(function(t){t.stopPropagation()})),f.addEventListener("hover",(function(){var t=new Yr(E.GroceryItemTooltipViewed);e.pageHandlerModule.RecordAsUserAction(is.HOVER_INFO_ICON_ITEMIZED_CASHBACK),e.logModule.LogInfoEvent(S.ButtonClick,"Grocery item-level cashback tooltip viewed",t,dn.CouponImpressionId)})),f.append(c),r.append(s),r.append(f),r.addEventListener("mouseover",(function(){e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackActivatedHover),dn.CouponImpressionId)})),o.append(a),o.append(r);var g=this.utilities.createElement("div");g.className="gcButtonColorful",g.style.margin="5px",g.setAttribute("role","presentation");var m=this.utilities.createElement("fluent-button");return m.className="gcButton",m.textContent=this.flyoutData.strings.gcbButtonShop,m.addEventListener("click",(function(){e.logModule.LogInfoEvent(S.EdgeFlyoutStatus,"",new _(A.ItemizedCashbackShopCartClick),dn.CouponImpressionId)})),g.append(m),n.setAttribute("aria-label","Activated "+a.textContent+" "+s.textContent),n.append(i),n.append(o),n.append(g),n}}]),a}(Bb),BR=HR,UR=function(){function t(){s(this,t)}return r(t,[{key:"getHeaderStyles",value:function(){return"#groceryHeaderDiv {\n            width: calc(100% - 24px);\n            overflow: hidden;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n        }\n        #groceryHeaderTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            text-align:left;\n            vertical-align: middle;\n            row-gap: 2px;\n        }\n        #groceryHeaderRetailer {\n            font-weight: 400;\n            color: var(--neutral-foreground-rest);\n            place-self: unset;\n            font-size: 20px;\n            line-height: 23px;\n            margin-left: 4px;\n        }\n        #groceryHeaderText {\n            color: #666666;\n            font-size: 12px;\n            margin-left: 4px;\n        }\n        #groceryHeaderIcon {\n            width: 48px;\n            height: 48px;\n            float: left;\n            border: 1px solid;\n            border-radius: 8px;\n            border-color: #ECECEC;\n        }\n        #groceryHeaderButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 500;\n            height: 21px;\n            width: 65px;\n            border-color: transparent;\n            border-radius: 2px;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        #groceryHeaderButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='groceryHeaderButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        #divColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            margin-top: 18px;\n            margin-left: auto;\n            margin-right: 4px;\n            padding: 1.5px;\n            padding-bottom: 2px;\n            padding-left: 2px;\n            height: min-content;\n        }\n        #divColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }\n        "}},{key:"darkModeHeaderStyles",value:function(){return"\n        #groceryHeaderText {\n            color: #C3C3C3;\n        }\n        #groceryHeaderButton {\n            background: #3b3b3b;\n            color: #02d9c8;\n            border-radius: 3px;\n        }\n        #divColorful {\n            padding-top: 1px;\n            padding-left: 2px;\n        }\n        "}},{key:"getStyles",value:function(){return"\n            #grocerySectionWrapper {\n                display: grid;\n                grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                grid-gap: 12px;\n                margin-bottom: 10px;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n            #groceryCouponDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }\n            msft-shopping-recommendation {\n                border: 1px solid;\n                border-color: #ECECEC;\n            }\n            msft-shopping-recommendation::part(image-container) {\n                background: white;\n            }\n            msft-shopping-recommendation::part(control) {\n                box-shadow: none;\n            }\n            msft-shopping-recommendation::part(control):focus {\n                box-shadow: 0px 0px 0px 2px #898989;\n            }\n            msft-shopping-recommendation::part(price-container) {\n                min-height: 53px;\n                padding: 0px 9px;\n            }\n            ::part(badge) {\n                background: linear-gradient(92.91deg, #15835B 31.47%, #499F2B 99.7%);\n                bottom: 127px;\n                left: 5px;\n                border-radius: 4px;\n            }\n            #divGroceryCouponWrapper {\n                margin-left: 8px;\n                margin-right: 8px;\n            }"}}]),t}();function VR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var GR=function(t){u(n,t);var e=VR(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"groceryUtilities",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"logModule",void 0),o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.groceryUtilities=new ww(t,i),o.pageHandlerModule=i.pageHandlerModule,o.logModule=i.logModule,o.assets=new UR,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.GROCERY_COUPON}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.GroceryCouponData,n=null!==(t=this.flyoutData.dataLoader.IsServerData()&&e&&e.DigitalCoupons.length>0)&&void 0!==t&&t;return Promise.resolve(n)}},{key:"populateMainHeader",value:function(){var t,e=this.flyoutData.common.shopping;if(e&&null!==(t=this.flyoutData.dataStoreModule.GroceryCouponData)&&void 0!==t&&t.DigitalCoupons&&this.flyoutData.dataStoreModule.GroceryCouponData.DigitalCoupons.length>0){var n=this.groceryUtilities.createGroceryHeader(Rt.GROCERY_COUPON,is.DIGITAL_GROCERY_COUPONS_SEEALL,E.DigitalGroceryCouponSeeAll,"Clicked on see all grocery digital coupons","https://www.msn.com/en-us/foodanddrink/groceries/digital");n&&e.appendChild(n)}}},{key:"renderModule",value:function(){var t,e;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getHeaderStyles());var n=this.utilities.createElement("msft-edge-shopping-section");if(n.id="groceryCouponDiv",null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e?void 0:e.DigitalCoupons){var i,o;this.populateGroceryCouponList(n,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(n,this.flyoutData.strings.gcSectionTitle,null===(i=this.flyoutData.dataStoreModule)||void 0===i||null===(o=i.GroceryCouponData)||void 0===o?void 0:o.DigitalCoupons,this.GetModuleName(),(function(t){var e=bt.GROCERY_COUPON;return t&&a.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populateGroceryCouponList.bind(this))}return Promise.resolve(this.CreateModule(n,wt.GROCERY_COUPON,Rt.GROCERY_COUPON,_t.CONTEXTUAL,Ft.LIST))}},{key:"populateGroceryCouponList",value:function(t,e,n){var i,o=null===(i=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===i?void 0:i.DigitalCoupons;if(o){var a=0;o.length>0&&(a=o.length);var r=0;e?r=bt.GROCERY_COUPON:a>bt.GROCERY_COUPON&&(a=bt.GROCERY_COUPON);var s=null;e?s=t.querySelector("#grocerySectionWrapper"):(s=this.utilities.createElement("DIV")).id="grocerySectionWrapper";for(var l=r;l<a;l++){var c=o[l],u=this.createGroceryCouponTile(c);s?u&&(s.appendChild(u),l===r&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&u.focus(),e||t.appendChild(s)):u&&(t.appendChild(u),l===r&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&u.focus())}}}},{key:"createGroceryCouponTile",value:function(t){var e=this.utilities.createElement("msft-shopping-recommendation"),n=this.groceryUtilities.extractProductFromDescription(t.offerDescription);return Se(n)||n.length<10?e.textContent=t.brandName:e.textContent=n,e.setAttribute("current-price",this.utilities.replaceValueInKey("saveX",this.flyoutData.strings.commonSave,"$".concat(t.offerValue))),e.style.borderColor=this.flyoutData.common.currentTheme===xt.Dark?"#8C8C8C":"#ECECEC",this.createImage(null==t?void 0:t.offerImage,e),this.managePCLinkEvents(e,null==t?void 0:t.offerExpiryDate,null==t?void 0:t.retailerClickThroughUrl),e}},{key:"createImage",value:function(t,e){if(t){var n=this.utilities.createElement("IMG");n.src=t,n.slot="image",n.setAttribute("aria-hidden","true"),e.appendChild(n)}}},{key:"managePCLinkEvents",value:function(t,e,n){var i=this;t.addEventListener("click",(function(){i.pageHandlerModule.RecordAsUserAction(is.DIGITAL_GROCERY_COUPONS_CLICK);var t=new Yr(E.DigitalGroceryCouponClick);i.logModule.LogInfoEvent(S.ButtonClick,"Clicked on digital coupons",t),i.flyoutData.common.currentDevice===St.Desktop&&i.navigateToOffer(e,n,cl.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button){i.navigateToOffer(e,n,cl.NEW_FOREGROUND_TAB),i.pageHandlerModule.RecordAsUserAction(is.DIGITAL_GROCERY_COUPONS_CLICK);var o=new Yr(E.DigitalGroceryCouponClick);i.logModule.LogInfoEvent(S.ButtonClick,"Clicked on grocery digital coupons",o)}}))}},{key:"navigateToOffer",value:function(t,e,n){var i=new Yr(E.NavigateToRecommendedDeal);this.pageHandlerModule.RecordAsUserAction(is.NAVIGATE_TO_RECOMMENDATION_OFFER),this.logModule.LogInfoEvent(S.ButtonClick,"Clicked on recommended offer",i),this.pageHandlerModule.NavigateToRecommendationWithDisposition(t,e,n)}}]),n}(Bb),WR=GR;function $R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return zR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function zR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function KR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var YR,jR=function(t){u(c,t);var n,i,a=KR(c);function c(){var t;s(this,c);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return f(l(t=a.call.apply(a,[this].concat(n))),"requestParamsList",void 0),f(l(t),"initialFeedsCount",2),t}return r(c,[{key:"initializeComponent",value:function(){this.component=this.utilities.createElement("msft-infinite-product-feeds"),this.component.navigateToRetailer=this.navigateToRetailer.bind(this),this.component.logShowMoreButtonClicked=this.logShowMoreButtonClicked.bind(this)}},{key:"handleHubPageDataLoaded",value:(i=e(o().mark((function t(e){var n,i,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.requestParamsList=[],a=new Set,(null==e||null===(n=e.detail)||void 0===n||null===(i=n.trendingCategoryDeals)||void 0===i?void 0:i.length)>0){r=$R(e.detail.trendingCategoryDeals);try{for(r.s();!(s=r.n()).done;)null!=(u=s.value)&&null!==(l=u.categoryInfo_2)&&void 0!==l&&l.categoryId&&null!==(c=u.categoryInfo_2)&&void 0!==c&&c.categoryName&&!a.has(u.categoryInfo_2.categoryName)&&(a.add(u.categoryInfo_2.categoryName),this.requestParamsList.push({id:u.categoryInfo_2.categoryId,title:u.categoryInfo_2.categoryName}))}catch(t){r.e(t)}finally{r.f()}d=$R(e.detail.trendingOffers);try{for(d.s();!(h=d.n()).done;)null!=(g=h.value)&&null!==(p=g.categoryInfo_2)&&void 0!==p&&p.categoryId&&null!=g&&null!==(f=g.categoryInfo_2)&&void 0!==f&&f.categoryName&&!a.has(g.categoryInfo_2.categoryName)&&(a.add(g.categoryInfo_2.categoryName),this.requestParamsList.push({id:g.categoryInfo_2.categoryId,title:g.categoryInfo_2.categoryName}))}catch(t){d.e(t)}finally{d.f()}m=$R(e.detail.popularCategories);try{for(m.s();!(v=m.n()).done;)null!=(y=v.value)&&y.id&&null!=y&&y.title&&!a.has(y.title)&&(a.add(y.title),this.requestParamsList.push({id:y.id,title:y.title}))}catch(t){m.e(t)}finally{m.f()}}for(C=[],b=0;this.requestParamsList.length>0&&b<this.initialFeedsCount;b++)C.push(this.getNextFeed());return t.next=7,Promise.all(C);case 7:S=t.sent,this.component.infiniteProductFeedsData=S,this.component.initializeBuffer(this.getNextFeed.bind(this));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"GetFeedModuleName",value:function(){return Rt.INFINITE_CATEGORY_FEED}},{key:"GetModulePriority",value:function(){return wt.MAX}},{key:"GetCardName",value:function(){return E.InfiniteCategoryFeedCard}},{key:"GetShowMoreButtonName",value:function(){return E.InfiniteCategoryFeedShowMore}},{key:"getNextFeed",value:(n=e(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((null===(e=this.requestParamsList)||void 0===e?void 0:e.length)>0)){t.next=6;break}return t.next=3,hb.fetchTrendingCategoryOffers(this.requestParamsList.shift(),this.flyoutData);case 3:return n=t.sent,this.transformShoppingEntities(n.shoppingEntities),t.abrupt("return",n);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),c}(yR),qR=jR,ZR=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .payment-options .card {\n                height: 88px;\n                margin: 10px 0 20px;\n            }\n            .payment-options .content {\n                display: flex;\n            }\n            .payment-options .bank-logo {\n                width: 144px;\n                height: 88px;\n                box-sizing: border-box;\n\n            }\n            .payment-options .bank-logo.zipPay {\n                padding: 26px 0 0 30px;\n                -webkit-clip-path: polygon(96% 0, 100% 100%, 0 100%, 0 0);\n                background: #1A0826;\n            }\n            .payment-options .end-content {\n                margin-left: 14px;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n            .payment-options .end-content p {\n                margin: 0;\n                line-height: 16px;\n            }\n            .payment-options .footer {\n                display: flex;\n                line-height: 16px;\n            }\n            .payment-options .wallet-link {\n                margin-left: 3px;\n                line-height: 16px;\n                height: 16px;\n            }\n            "}},{key:"getDarkModeStyles",value:function(){return"\n        .payment-options .bank-logo.zipPay {\n            background: white;\n        }\n        .payment-options .bank-logo.zipPay svg path.lightTheme{\n            fill: #1A0826;\n        }\n        "}},{key:"getIcon",value:function(t){return{zipPay:mt.getTrustedHTML(YR||(YR=j(['<svg width="80" height="31" viewBox="0 0 80 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M1.80142 24.8119L2.49982 30.793H26.9471L26.148 23.944H14.7478L14.6492 23.0943L25.1477 15.3817L24.4462 9.38779H0L0.800065 16.2379H12.2175L12.3182 17.094L1.80142 24.8119Z" fill="#FFFFFA"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M27.2871 9.38742L29.7869 30.7927H54.2535L51.7527 9.38742H27.2871Z" fill="#AA8FFF"/>\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M29.6562 6.54705C31.2574 8.04447 33.5671 8.04447 34.8144 6.54705C36.0628 5.04964 35.7761 2.62128 34.175 1.12386C32.5749 -0.374621 30.2651 -0.374621 29.0168 1.12386C27.7694 2.62128 28.0551 5.04964 29.6562 6.54705Z" fill="#FFFFFA"/>\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M70.8676 20.5106L63.2106 20.5191L62.6108 15.3824L70.3075 15.3888C72.117 15.4112 73.0442 16.4832 73.1936 17.9497C73.2892 18.8934 72.8784 20.5106 70.8676 20.5106ZM79.9113 17.0946C79.3461 12.2828 75.7514 9.36703 70.8656 9.38724H54.5918L57.0916 30.7937H64.4122L63.911 26.512H71.6585C77.7561 26.512 80.5467 22.5167 79.9113 17.0946Z" fill="#FFFFFA"/>\n            </svg>\n            '])))}[t]}}]),t}();function XR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var JR=function(t){u(n,t);var e=XR(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),f(l(o),"populatePaymentOptionsList",(function(t,e,n){var i,a=o.flyoutData.dataStoreModule.PaymentOptionsData;if(a){a.length>0&&(i=a.length);var r=0,s=o.flyoutData.experimentData.isExperimentActive(Be.showWalletFooter),l=!1;if(e){var c=new Yr(E.SeeMorePaymentOptions);o.logModule.LogInfoEvent(S.ButtonClick,"See more payment options",c),r=bt.PAYMENT_OPTIONS,l=s}else i>bt.PAYMENT_OPTIONS?i=bt.PAYMENT_OPTIONS:l=s;for(var u=r;u<i;u++){var d=o.utilities.createElement("fluent-card");d.className="card";var h=o.utilities.createElement("div");h.className="content";var p=o.utilities.createElement("div");p.className="start-content";var f=o.utilities.createElement("div");f.className="bank-logo ".concat(a[u].providerName),f.innerHTML=o.assets.getIcon(a[u].providerName),p.appendChild(f),h.appendChild(p);var g=o.utilities.createElement("div");g.className="end-content";var m=o.utilities.createElement("p");m.className="detail",m.textContent=a[u].projectedMonthlyPaymentDetails;var v=o.utilities.createElement("p");v.className="suggestion",v.textContent=a[u].paymentSuggestion,g.appendChild(m),g.appendChild(v),h.appendChild(g),d.appendChild(h),t.appendChild(d)}if(l){var y=o.utilities.createElement("div");y.className="footer";var C=o.utilities.createElement("fluent-anchor");C.textContent=o.flyoutData.strings.microsoftWalletLinkText,C.className="wallet-link",C.appearance="lightweight",C.addEventListener("click",(function(){o.pageHandlerModule.NavigateToWallet()})),o.utilities.populateSingleChildHtml(y,o.flyoutData.strings.microsoftWalletManage,C),t.appendChild(y)}}})),o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.assets=new ZR,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.PAYMENT_OPTIONS}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.PaymentOptionsData,n=null!==(t=e&&e.length>0&&this.flyoutData.experimentData.isExperimentActive(Be.showPaymentOptionsOnProductPage))&&void 0!==t&&t;return Promise.resolve(n)}},{key:"renderModule",value:function(){var t=this.utilities.createElement("msft-edge-shopping-section");this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),t.className="payment-options",t.id="paymentOptionsSection",this.populatePaymentOptionsList(t,!1,!1),this.utilities.createCommonListStructure(t,this.flyoutData.strings.paymentOptionLabel,this.flyoutData.dataStoreModule.PaymentOptionsData,this.GetModuleName(),(function(t){return bt.PAYMENT_OPTIONS}),this.populatePaymentOptionsList);var e=this.CreateModule(t,wt.PAYMENT_OPTIONS,Rt.PAYMENT_OPTIONS,_t.HOME,Ft.BLOCK);t.addEventListener("click",(function e(){if(t){var a=t.shadowRoot;if(a){var r=a.querySelector("fluent-accordion-item");r&&(r.classList.contains("expanded")||i?o||(n.RecordAsUserAction(is.PAYMENT_OPTIONS_COLLAPSE_SECTION),o=!0):(n.RecordAsUserAction(is.PAYMENT_OPTIONS_EXPAND_SECTION),i=!0))}}i&&o&&t&&t.removeEventListener("click",e)}));var n=this.pageHandlerModule,i=!1,o=!1;return Promise.resolve(e)}},{key:"populateMainHeader",value:function(){}}]),n}(Bb),QR=JR,tM=function(){function t(){s(this,t)}return r(t,[{key:"getHeaderStyles",value:function(){return"#groceryHeaderDiv {\n            width: calc(100% - 24px);\n            overflow: hidden;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n        }\n        #groceryHeaderTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            text-align:left;\n            vertical-align: middle;\n            row-gap: 2px;\n        }\n        #groceryHeaderRetailer {\n            font-weight: 400;\n            color: var(--neutral-foreground-rest);\n            place-self: unset;\n            font-size: 20px;\n            line-height: 23px;\n            margin-left: 4px;\n        }\n        #groceryHeaderText {\n            color: #666666;\n            font-size: 12px;\n            margin-left: 4px;\n        }\n        #groceryHeaderIcon {\n            width: 48px;\n            height: 48px;\n            float: left;\n            border: 1px solid;\n            border-radius: 8px;\n            border-color: #ECECEC;\n        }\n        #groceryHeaderButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 500;\n            height: 21px;\n            width: 65px;\n            border-color: transparent;\n            border-radius: 2px;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        #groceryHeaderButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='groceryHeaderButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        #divColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            margin-top: 18px;\n            margin-left: auto;\n            margin-right: 4px;\n            padding: 1.5px;\n            padding-bottom: 2px;\n            padding-left: 2px;\n            height: min-content;\n        }\n        #divColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }"}},{key:"getDarkModeHeaderStyles",value:function(){return"\n        #groceryHeaderText {\n            color: #C3C3C3;\n        }\n        #groceryHeaderButton {\n            background: #3b3b3b;\n            color: #02d9c8;\n            border-radius: 3px;\n        }\n        #divColorful {\n            padding-top: 1px;\n            padding-left: 2px;\n        }\n        "}},{key:"getStyles",value:function(){return"\n            #divPrintableCouponWrapper {\n                display: grid;\n                grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                grid-gap: 12px;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n            #printableCouponDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }\n            msft-shopping-coupon-printable {\n                height: 212px;\n                color: #666666;\n                font-size: 12px;\n                border-radius: 8px;\n            }\n            msft-shopping-coupon-printable::part(image-container) {\n                background: white;\n            }\n            #printableSeeMore {\n                margin-left: 14px;\n                margin-top: 2px;\n                font-size: 12px;\n            }\n            fluent-button[id*='printableSeeMore']::part(control) {\n                z-index: 10;\n            }\n            #divButtonWrapper {\n                display: flex;\n                justify-content: center;\n                background: linear-gradient(179.23deg, rgba(255, 255, 255, 0) 0.66%, rgba(255, 255, 255, 0.88) 28.29%, #FFFFFF 59.77%);\n                width: 100%;\n                position: sticky;\n                column-span: all;\n                padding-bottom: 1px;\n                z-index: 12;\n                margin-bottom: 12px;\n            }\n            #divButtonWrapper.isNotSticky {\n                background: transparent;\n                z-index: 0;\n            }\n            #printButton {\n                background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n                font-size: 16px;\n                line-height: 20px;\n                color: white;\n                width: calc(100% - 24px);\n                min-height: 48px;\n                border-radius: 8px;\n                align-items: center;\n            }\n            #printButton:disabled {\n                background: #B8B8B8;\n                opacity: 1;\n            }\n            fluent-button[id*='printableHeaderButton']::part(control):focus {\n                box-shadow: 0 0 3px 3px #898989;\n            }\n            fluent-button[id*='printButton']::part(control):focus {\n                box-shadow: 0 0 3px 3px #898989;\n            }\n            #seeAllBottom {\n                margin-left: calc(50% - 20px);\n                color: #0078D4;\n                font-size: 12px;\n                font-weight: 500;\n            }\n            fluent-button[id*='seeAllBottom']::part(control) {\n                z-index: 10;\n            }"}},{key:"getDarkModeStyles",value:function(){return"\n            #printableSeeMore {\n                color: #43adff;\n            }\n            #divButtonWrapper {\n                background: linear-gradient(179.23deg, rgba(59, 59, 59, 0) 9.66%, rgba(59, 59, 59, 0.88) 38.29%, #3b3b3b 59.77%);\n            }\n            #seeAllBottom {\n                color: #6bbfff;\n            }\n        "}}]),t}(),eM=r((function t(e){s(this,t),f(this,"couponId",void 0),f(this,"redemptionLimit",void 0),e&&(this.couponId=e.couponId,this.redemptionLimit=e.redemptionLimit)}));function nM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return iM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iM(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function iM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var oM=function(){function t(){s(this,t),f(this,"NationalOffers",void 0),f(this,"HashCode",void 0)}return r(t,null,[{key:"create",value:function(e){var n,i=new t;if(i.NationalOffers=[],(null==e||null===(n=e.NationalOffers)||void 0===n?void 0:n.length)>0){var o,a=nM(e.NationalOffers);try{for(a.s();!(o=a.n()).done;){var r=o.value;i.NationalOffers.push(new eM(r))}}catch(t){a.e(t)}finally{a.f()}}return i.HashCode=null==e?void 0:e.HashCode,i}}]),t}();function aM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return rM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rM(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function rM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function sM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var lM,cM,uM,dM,hM,pM,fM=function(t){u(a,t);var n,i=sM(a);function a(t,e){var n,o,r,c;s(this,a),f(l(c=i.call(this)),"assets",void 0),f(l(c),"flyoutData",void 0),f(l(c),"utilities",void 0),f(l(c),"groceryUtilities",void 0),f(l(c),"pageHandlerModule",void 0),f(l(c),"logModule",void 0),f(l(c),"coupons",void 0),f(l(c),"scriptData",void 0),c.flyoutData=t,c.utilities=e.viewModulesUtilities,c.groceryUtilities=new ww(t,e),c.pageHandlerModule=e.pageHandlerModule,c.logModule=e.logModule,c.coupons=[],c.assets=new tM;var u=null===(n=t.dataStoreModule)||void 0===n||null===(o=n.GroceryCouponData)||void 0===o||null===(r=o.PrintableCoupons)||void 0===r?void 0:r.HashCode;return u&&(c.scriptData=new oM,c.scriptData.HashCode=u),c}return r(a,[{key:"GetModuleName",value:function(){return Rt.PRINTABLE_COUPON}},{key:"ShouldRenderModule",value:function(){var t,e,n;this.pageHandlerModule.TriggerExperiment(Be.groceryAutoshow);var i=null===(t=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===t?void 0:t.PrintableCoupons,o=null!==(e=i&&(null===(n=i.NationalOffers)||void 0===n?void 0:n.length)>0)&&void 0!==e&&e;return Promise.resolve(o)}},{key:"populateMainHeader",value:function(){var t,e,n=this.flyoutData.common.shopping;if(n&&null!==(t=this.flyoutData.dataStoreModule.GroceryCouponData)&&void 0!==t&&null!==(e=t.PrintableCoupons)&&void 0!==e&&e.NationalOffers&&this.flyoutData.dataStoreModule.GroceryCouponData.PrintableCoupons.NationalOffers.length>0){var i=this.groceryUtilities.createGroceryHeader(Rt.PRINTABLE_COUPON,is.CLICK_SEEALL_PRINTABLE_COUPON,E.SeeAllPrintableCoupons,"Clicked on see all grocery printable coupons","https://www.msn.com/en-us/foodanddrink/groceries/printable");i&&n.appendChild(i)}}},{key:"renderModule",value:function(){var t,e;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getHeaderStyles(),void 0,this.assets.getDarkModeHeaderStyles()),this.scriptData.NationalOffers=[];var n=this.utilities.createElement("msft-edge-shopping-section");if(n.id="printableCouponDiv",null===(t=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===t||null===(e=t.PrintableCoupons)||void 0===e?void 0:e.NationalOffers){var i,o;this.populatePrintableCouponList(n,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(n,this.flyoutData.strings.gcSectionTitle,null===(i=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===i||null===(o=i.PrintableCoupons)||void 0===o?void 0:o.NationalOffers,this.GetModuleName(),(function(t){var e=a.common.openedWith===Tt.Auto?bt.PRINTABLE_COUPON_AUTO:bt.PRINTABLE_COUPON;return t&&a.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populatePrintableCouponList.bind(this)),this.createPrintButton(n)}return Promise.resolve(this.CreateModule(n,wt.PRINTABLE_COUPON,Rt.PRINTABLE_COUPON,_t.CONTEXTUAL,Ft.SQUARES))}},{key:"populatePrintableCouponList",value:function(t,e,n){var i,o,a,r=this,s=null===(i=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===i||null===(o=i.PrintableCoupons)||void 0===o?void 0:o.NationalOffers,l=null===(a=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===a?void 0:a.PrintableCoupons.NationalOffersImageUrlPrefix;if(s&&l){var c,u,d=0,h=s.length;h>0&&(d=h);var p=0,f=this.flyoutData.common.openedWith===Tt.Auto?bt.PRINTABLE_COUPON_AUTO:bt.PRINTABLE_COUPON;e?p=f:d>f&&(d=f);var g,m,v=null;e?v=t.querySelector("#divPrintableCouponWrapper"):((v=this.utilities.createElement("DIV")).id="divPrintableCouponWrapper",this.flyoutData.common.isPane&&(v.style.marginLeft="20px",v.style.marginRight="20px")),l=l.slice(0,4)+"s"+l.slice(4);for(var y=ze("printableCouponData"),C=y?JSON.parse(y):null,b=0,x=p;b<d-p&&x<h;x++){var A=s[x];if(C&&C[A.couponId])if(C[A.couponId]===A.redemptionLimit)continue;var T=this.createPrintableCouponTile(A,l);b++,T&&(v?(v.appendChild(T),e||t.appendChild(v)):t.appendChild(T),x===p&&e&&n&&this.flyoutData.common.currentDevice===St.Desktop&&T&&T.focus())}if((null!==(c=null===(u=v)||void 0===u?void 0:u.children.length)&&void 0!==c?c:0)%2!=0)null===(g=v)||void 0===g||null===(m=g.lastChild)||void 0===m||m.remove();if(e){var D=this.utilities.createElement("fluent-button");D.textContent="See all",D.id="seeAllBottom",D.appearance="lightweight",D.addEventListener("click",(function(){r.pageHandlerModule.RecordAsUserAction(is.CLICK_SEEALL_PRINTABLE_COUPON);var t=new Yr(E.SeeAllPrintableCoupons);r.logModule.LogInfoEvent(S.ButtonClick,"Clicked on see all grocery printable coupons",t),r.pageHandlerModule.NavigateToCouponPage("https://www.msn.com/en-us/foodanddrink/groceries/printable")}));var k=t.children.length;t.insertBefore(D,t.children[k-2])}}}},{key:"createPrintableCouponTile",value:function(t,e){var n=this,i=this.utilities.createElement("msft-shopping-coupon-printable");i.deselectable=!0,i.nameId=t.couponId,i.isSelected=!1;var o=this.retrieveSavingsString(t);i.name=o;var a=this.groceryUtilities.extractProductFromDescription(t.description);if(Se(a)||a.length<10?i.description=t.brand+" "+t.categoryDescription:i.description=a,this.coupons.includes(a))return null;this.coupons.push(a),i.unselectedAriaLabel="Unselected",i.selectedAriaLabel="Selected",i.setAttribute("aria-checked","false");var r=this.utilities.createElement("img");return r.src=e+t.imageUrlSuffix,r.slot="image",r.setAttribute("aria-hidden","true"),i.append(r),i.addEventListener("selected-changed",(function(){var e,o=null===(e=n.flyoutData.dataStoreModule.GroceryCouponData)||void 0===e?void 0:e.PrintableCoupons.NationalOffers;if(o)if(i.isSelected){i.setAttribute("aria-checked","false");var a,r=aM(o);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.couponId===t.couponId){n.scriptData.NationalOffers.push(s);break}}}catch(t){r.e(t)}finally{r.f()}n.pageHandlerModule.RecordAsUserAction(is.SELECT_PRINTABLE_COUPON);var l=new Yr(E.PrintableCouponSelected);n.logModule.LogInfoEvent(S.ButtonClick,"Selected printable coupon",l)}else{i.setAttribute("aria-checked","true");for(var c=0;c<n.scriptData.NationalOffers.length;c++)if(n.scriptData.NationalOffers[c].couponId===t.couponId){n.scriptData.NationalOffers.splice(c,1);break}n.pageHandlerModule.RecordAsUserAction(is.SELECT_PRINTABLE_COUPON);var u=new Yr(E.PrintableCouponSelected);n.logModule.LogInfoEvent(S.ButtonClick,"Deselected printable coupon",u)}})),i}},{key:"createPrintButton",value:(n=e(o().mark((function t(e){var n,i,a,r=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.querySelector(".btnSeeMore"))&&(this.flyoutData.common.openedWith!==Tt.Auto&&(n.slot=""),this.flyoutData.common.isPane?(n.style.width="calc(100% - 40px)",n.style.marginTop="12px"):n.id="printableSeeMore"),(i=this.utilities.createElement("DIV")).id="divButtonWrapper",i.setAttribute("role","presentation"),(a=document.createElement("fluent-button")).id="printButton",a.setAttribute("aria-live","assertive"),a.setAttribute("role","presentation"),this.flyoutData.common.isPane&&(a.style.width="calc(100% - 40px)"),a.textContent="Print coupons",a.disabled=!0,document.addEventListener("selected-changed",(function(){var t=r.scriptData.NationalOffers.length;t>0?(a.textContent=1===t?"Print 1 coupon":"Print "+t+" coupons",a.disabled=!1):(a.textContent="Print coupons",a.disabled=!0)})),a.addEventListener("click",(function(){if(!a.disabled){r.pageHandlerModule.PrintCoupons(JSON.stringify(r.scriptData)),r.pageHandlerModule.RecordAsUserAction(is.PRINT_COUPONS_CLICK);var t=new Yr(E.PrintGroceryCoupons);r.logModule.LogInfoEvent(S.ButtonClick,"Clicked on print coupon button",t);var e=ze("printableCouponData"),n=e?JSON.parse(e):null;n||(n=new Map);var i,o=aM(r.scriptData.NationalOffers);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=n[s.couponId];n[s.couponId]=l||1}}catch(t){o.e(t)}finally{o.f()}Ye("printableCouponData",JSON.stringify(n))}})),i.append(a),this.observeFooter(i),e.append(i);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"observeFooter",value:function(t){try{new IntersectionObserver((function(t){var e=Zs(t,1)[0];e.target.classList.toggle("isNotSticky",1===e.intersectionRatio)}),{threshold:[1]}).observe(t)}catch(t){}}},{key:"retrieveSavingsString",value:function(t){var e=t.value.toString();if(e.length>2){var n=e.length-2;e="Save $"+e.slice(0,n)+"."+e.substring(n)}else e="Save $0."+e;return e}}]),a}(Bb),gM=fM,mM=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .prodHAnnotation {\n                color: #6E6E6E;\n            }\n            #pdhWraper msft-product-card {\n                transition: box-shadow 1s;\n            }\n            #pdhWraper msft-product-card:hover {\n                background: inherit;\n                box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.12);\n            }\n            #pdhWraper msft-product-card::part(divTextContent) {\n                font-weight: 400;\n            }\n            #pdhWraper msft-product-card::part(control) {\n                padding: 0 12px;\n            }\n            @media (forced-colors: active) {\n                .prodHAnnotation {\n                    color: highlightText;\n                }\n            }\n            "}},{key:"getDarkModeStyles",value:function(){return"\n        .prodHAnnotation {\n            color: #FFFFFF;\n        }\n        "}},{key:"getPriceDropAnnotation",value:function(){return mt.getTrustedHTML(lM||(lM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">\n        <path d="M10.0428 8.84145C9.78112 8.84145 9.569 9.05357 9.569 9.31523V11.5262C9.569 11.7879 9.78112 12 10.0428 12C10.3044 12 10.5166 11.7879 10.5166 11.5262V9.31523C10.5166 9.05357 10.3044 8.84145 10.0428 8.84145ZM6.41042 6.15922C6.41042 5.89756 6.62254 5.68544 6.88421 5.68544C7.14587 5.68544 7.35799 5.89756 7.35799 6.15922V11.5262C7.35799 11.7879 7.14587 12 6.88421 12C6.62254 12 6.41042 11.7879 6.41042 11.5262V6.15922ZM3.72562 7.1057C3.46396 7.1057 3.25184 7.31783 3.25184 7.57949V11.5262C3.25184 11.7879 3.46396 12 3.72562 12C3.98729 12 4.19941 11.7879 4.19941 11.5262V7.57949C4.19941 7.31783 3.98729 7.1057 3.72562 7.1057ZM0.0932617 3.7892C0.0932617 3.52753 0.305384 3.31541 0.567048 3.31541C0.828713 3.31541 1.04084 3.52753 1.04084 3.7892V11.5262C1.04084 11.7879 0.828713 12 0.567048 12C0.305384 12 0.0932617 11.7879 0.0932617 11.5262V3.7892Z" fill="#107C10"/>\n        <path d="M11.5621 7.57916L8.6854 7.57949L8.62112 7.57516C8.38986 7.54379 8.21162 7.34556 8.21162 7.1057L8.21595 7.04141C8.24732 6.81016 8.44554 6.63192 8.6854 6.63192H10.3841L6.65215 2.89926L4.73787 4.73788L4.68473 4.78375C4.49925 4.92137 4.23604 4.90608 4.06784 4.73787L0.138768 0.808805L0.0928953 0.755666C-0.0447267 0.570187 -0.0294364 0.306974 0.138768 0.138769C0.323793 -0.0462563 0.623784 -0.0462563 0.808809 0.138769L4.40287 3.73283L6.31716 1.89419L6.3703 1.84832C6.55578 1.7107 6.819 1.726 6.9872 1.89421L11.055 5.96293L11.0553 4.26053L11.0596 4.19624C11.091 3.96498 11.2892 3.78674 11.5291 3.78674C11.7908 3.78674 12.0029 3.99886 12.0029 4.26053L12.0026 7.12371L11.9967 7.18322L11.9881 7.22365L11.976 7.26412L11.9515 7.32118L11.9173 7.37811L11.8898 7.41373L11.8641 7.44155C11.8229 7.48274 11.776 7.51476 11.7259 7.53679L11.6879 7.55293L11.6254 7.57037L11.5621 7.57916Z" fill="#107C10"/>\n        </svg>'])))}},{key:"getPriceIncreaseAnnotation",value:function(){return mt.getTrustedHTML(cM||(cM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">\n        <path d="M8.25 0.5625C8.25 0.25184 8.50184 0 8.8125 0H10.6875C10.9982 0 11.25 0.25184 11.25 0.5625V2.4375C11.25 2.74816 10.9982 3 10.6875 3C10.3768 3 10.125 2.74816 10.125 2.4375V1.92049L6.77275 5.27275C6.55308 5.49242 6.19692 5.49242 5.97725 5.27275L4.125 3.4205L0.960248 6.58525C0.740578 6.80492 0.384422 6.80492 0.164752 6.58525C-0.0549174 6.36558 -0.0549174 6.00942 0.164752 5.78975L3.72725 2.22725C3.94692 2.00758 4.30308 2.00758 4.52275 2.22725L6.375 4.0795L9.3295 1.125H8.8125C8.50184 1.125 8.25 0.87316 8.25 0.5625ZM0.5625 9C0.87316 9 1.125 9.25184 1.125 9.5625V11.4375C1.125 11.7482 0.87316 12 0.5625 12C0.25184 12 0 11.7482 0 11.4375V9.5625C0 9.25184 0.25184 9 0.5625 9ZM4.125 7.3125C4.125 7.00184 3.87316 6.75 3.5625 6.75C3.25184 6.75 3 7.00184 3 7.3125V11.4375C3 11.7482 3.25184 12 3.5625 12C3.87316 12 4.125 11.7482 4.125 11.4375V7.3125ZM6.5625 8.25C6.87316 8.25 7.125 8.50184 7.125 8.8125V11.4375C7.125 11.7482 6.87316 12 6.5625 12C6.25184 12 6 11.7482 6 11.4375V8.8125C6 8.50184 6.25184 8.25 6.5625 8.25ZM10.125 5.8125C10.125 5.50184 9.87316 5.25 9.5625 5.25C9.25184 5.25 9 5.50184 9 5.8125V11.4375C9 11.7482 9.25184 12 9.5625 12C9.87316 12 10.125 11.7482 10.125 11.4375V5.8125Z" fill="#D83B01"/>\n        </svg>'])))}},{key:"getPriceDecreaseTrendIcon",value:function(t){return t?mt.getTrustedHTML(uM||(uM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 0L4 6L0 0H8Z" fill="#43E498"/>\n            </svg>']))):mt.getTrustedHTML(dM||(dM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n                <path d="M8 0L4 6L0 0H8Z" fill="#028948"/>\n                </svg>'])))}},{key:"getPriceIncreaseTrendIcon",value:function(t){return t?mt.getTrustedHTML(hM||(hM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 6L4 0L0 6H8Z" fill="#F9A1AC"/>\n            </svg>']))):mt.getTrustedHTML(pM||(pM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 6L4 0L0 6H8Z" fill="#C82B45"/>\n            </svg>'])))}}]),t}();function vM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yM(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function yM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function CM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var bM,SM,xM=function(t){u(n,t);var e=CM(n);function n(t,i,o,a){var r;return s(this,n),f(l(r=e.call(this)),"assets",void 0),f(l(r),"logModule",void 0),f(l(r),"pageHandlerModule",void 0),f(l(r),"flyoutData",void 0),f(l(r),"utilities",void 0),f(l(r),"stateManagementModule",void 0),f(l(r),"newPwiloData",void 0),f(l(r),"sectionId","productHistorySection"),f(l(r),"commonAssets",void 0),f(l(r),"previousLink",null),f(l(r),"parent",void 0),f(l(r),"showAllItems",!1),f(l(r),"telemetrySent",!1),r.logModule=o.logModule,r.pageHandlerModule=o.pageHandlerModule,r.flyoutData=i,r.utilities=o.viewModulesUtilities,r.assets=new mM,r.stateManagementModule=t,r.commonAssets=a,r.flyoutData.common.isPane?r.parent=r.flyoutData.common.shoppingPersistent:r.parent=r.flyoutData.common.shopping,r}return r(n,[{key:"GetModuleName",value:function(){return Rt.PRODUCTHISTORY}},{key:"ShouldRenderModule",value:function(){var t,e,n,i=this,o=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==o||null===(t=o.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS&&(null==o?void 0:o.CompetingPrices)&&(null==o?void 0:o.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);var a=this.flyoutData.dataStoreModule.ProductHistoryData,r=null!==(n=a&&a.length>0&&this.flyoutData.dataLoader.IsServerData()&&this.flyoutData.experimentData.isExperimentActive(Be.showProductHistory))&&void 0!==n&&n;return r&&(this.stateManagementModule.addEventListener(hn.PWILOPriceHistory,(function(t){if(t&&t.detail&&t.detail.data){var e=t.detail.data.webAssistEntities;if(e){i.newPwiloData=!0;var n=[];e&&e.length>0&&e.forEach((function(t){n.push(new Lc(t))})),i.flyoutData.dataStoreModule.ProductHistoryData=n,document.querySelector("#".concat(i.sectionId))&&i.addProdHistoryAnnotation()}}})),this.stateManagementModule.addEventListener(hn.ModulesRendered,(function(){i.newPwiloData&&un.queueUpdate((function(){i.addProdHistoryAnnotation()}))}))),Promise.resolve(r)}},{key:"renderModule",value:function(){var t=this;this.utilities.applyStyles(this.parent,this.assets.getStyles());var e=this.utilities.createElement("msft-edge-shopping-section");function n(t){return bt.PRODUCTHISTORY}e.id=this.sectionId,this.stateManagementModule.addEventListener(hn.PWILODeleted,(function(i){if(i&&i.detail&&void 0!==i.detail.index){var o;if(t.flyoutData.dataStoreModule.ProductHistoryData=null===(o=t.flyoutData.dataStoreModule.ProductHistoryData)||void 0===o?void 0:o.filter((function(t,e){return e!==i.detail.index})),t.flyoutData.dataStoreModule.ProductHistoryData&&t.flyoutData.dataStoreModule.ProductHistoryData.length>0){var a,r=document.querySelector("#".concat(t.sectionId," #pdhWraper"));a=t.flyoutData.common.isPane?document.querySelector("#".concat(t.sectionId," .btnSeeMore")):document.querySelector("#".concat(t.sectionId," .divSeeMore")),r&&(r.remove(),a&&a.remove(),un.queueUpdate((function(){t.populateProductHistoryList(e,t.showAllItems,!1),t.showAllItems||t.utilities.createCommonListStructure(e,t.flyoutData.strings.prodHSectionTitle,t.flyoutData.dataStoreModule.ProductHistoryData,t.GetModuleName(),n,t.populateProductHistoryList.bind(t),void 0,!0),t.flyoutData.common.isPane&&un.queueUpdate((function(){e.expanded=!0}))})))}else if(e){e.remove();var s=new CustomEvent(hn.PWILOEmpty);t.stateManagementModule.dispatchEvent(s)}if(t.utilities.isKeyboardClick(i.detail.event)){var l=t.parent.querySelector("#".concat(Yt.CLOSE));l&&l.focus()}}})),this.populateProductHistoryList(e,!1,!1),this.utilities.createCommonListStructure(e,this.flyoutData.strings.prodHSectionTitle,this.flyoutData.dataStoreModule.ProductHistoryData,this.GetModuleName(),n,this.populateProductHistoryList.bind(this),void 0,!0);var i=this.CreateModule(e,wt.PRODUCTHISTORY,Rt.PRODUCTHISTORY,_t.HOME,Ft.LIST);e.addEventListener("click",(function t(){if(e){var n=e.shadowRoot;if(n){var i=n.querySelector("fluent-accordion-item");i&&(i.classList.contains("expanded")||a?r||(o.RecordAsUserAction(is.PRODUCT_HISTORY_COLLAPSE_SECTION),r=!0):(o.RecordAsUserAction(is.PRODUCT_HISTORY_EXPAND_SECTION),a=!0))}}a&&r&&e&&e.removeEventListener("click",t)}));var o=this.pageHandlerModule,a=!1,r=!1;return Promise.resolve(i)}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shoppingPersistent){var t=this.flyoutData.common.shoppingPersistent.querySelector("#".concat(this.sectionId));if(t){t.style.marginTop="0px",t.slot="header-content";var e=t.querySelector("#pdhWraper");e&&(e.style.margin="0px!important")}}}},{key:"PostProcessing",value:function(t,e,n){un.queueUpdate((function(){var t,e=null===(t=n.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var i,o=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector(".region");o&&(o.style.marginBottom="0px")}}))}},{key:"addProdHistoryAnnotation",value:function(t,e){var n=this.flyoutData.dataStoreModule.ProductHistoryData;if(n&&n.length>0)if(this.newPwiloData){var i=document.querySelector("#".concat(this.sectionId)),o=null==i?void 0:i.querySelectorAll("msft-product-card");if(o&&o.length===n.length)for(var a=0;a<n.length;a++)o[a].hasAnnotation||this.createAnnotation(o[a],n[a]);else if(o&&o.length>0&&i&&!t&&void 0===e){var r,s=vM(o);try{for(s.s();!(r=s.n()).done;){r.value.remove()}}catch(t){s.e(t)}finally{s.f()}this.populateProductHistoryList(i,!1,!1)}}else t&&void 0!==e&&!t.hasAnnotation&&this.createAnnotation(t,n[e])}},{key:"populateProductHistoryList",value:function(t,e,n){var i,o=this,a=document.querySelector("#".concat(this.sectionId," #pdhWraper"));a||((a=this.utilities.createElement("DIV")).id="pdhWraper",this.flyoutData.common.isPane&&(a.style.borderRadius="8px",a.style.display="flex",a.style.flexDirection="column",a.style.rowGap="12px",a.style.margin="0 20px 12px"));var r=this.flyoutData.dataStoreModule.ProductHistoryData;if(r){r.length>0&&(i=r.length);var s=0;if(e)if(this.showAllItems=!0,this.telemetrySent)s=0;else{var l=new Yr(E.SeeMoreRetailers);this.logModule.LogInfoEvent(S.ButtonClick,"See more product history",l),s=bt.PRODUCTHISTORY,this.telemetrySent=!0}else i>bt.PRODUCTHISTORY&&(i=bt.PRODUCTHISTORY);for(var c=function(i){var l=document.createElement("msft-product-card");l.price=r[i].entity.price,l.description=r[i].title,l.href="#",r[i].domain&&(l.retailer=r[i].domain,o.createProductImages(l,r[i])),o.flyoutData.common.isPane&&(l.style.backgroundColor="var(--fill-color)",l.isProductHistoryPane=!0,l.style.borderRadius="8px"),o.addProdHistoryAnnotation(l,i),o.addDeleteButton(l,r[i],o.previousLink,t,i),o.manageProductLinkEvents(l,r[i]),a.appendChild(l),i===s&&e&&n&&o.flyoutData.common.currentDevice===St.Desktop&&l&&un.queueUpdate((function(){l.focus()})),o.previousLink=l},u=s;u<i;u++)c(u);t.appendChild(a)}}},{key:"addDeleteButton",value:function(t,e,n,i,o){var a=this,r=this.utilities.createElement("fluent-button");r.slot="deleteEntry",r.appearance="stealth",r.style.visibility="hidden",r.addEventListener("click",(function(n){t.remove(),e.url.startsWith("http")?a.pageHandlerModule.DeletePwiloEntry(e.url):(a.pageHandlerModule.DeletePwiloEntry("https://"+e.url),a.pageHandlerModule.DeletePwiloEntry("http://"+e.url));var i=new CustomEvent(hn.PWILODeleted,{detail:{event:n,index:o}});a.stateManagementModule.dispatchEvent(i)})),t.addEventListener("mouseover",(function(){a.setButtonVisibility(r,!0)})),t.addEventListener("mouseout",(function(){a.setButtonVisibility(r,!1)})),t.addEventListener("focus",(function(){a.setButtonVisibility(r,!0)})),t.addEventListener("keydown",(function(t){t.shiftKey?a.setButtonVisibility(r,!1):a.setButtonVisibility(r,!0)})),document.addEventListener("keydown",(function(e){if(e.shiftKey)if(n&&document.activeElement===t){var o=n.querySelector("fluent-button");o&&un.queueUpdate((function(){o.focus()}))}else{var a=i.querySelector(".btnSeeMore");a&&document.activeElement===a&&un.queueUpdate((function(){r.focus()}))}})),r.addEventListener("blur",(function(){a.setButtonVisibility(r,!1)})),r.addEventListener("focus",(function(){r.setAttribute("aria-label",a.flyoutData.strings.prodHDeleteItem)})),r.title=this.flyoutData.strings.prodHDeleteItem;var s=this.utilities.createElement("DIV");s.setAttribute("aria-hidden","true"),s.innerHTML=this.utilities.commonAssets.getCloseButton(),r.appendChild(s),t.appendChild(r)}},{key:"setButtonVisibility",value:function(t,e){e?t.style.visibility="visible":(t.style.visibility="hidden",t.setAttribute("aria-label",""))}},{key:"createAnnotation",value:function(t,e){if(!t.querySelector(".prodHBottomAnnotation")){var n=e.newTimestamp;if(n&&"No data found"!==n&&e.entity){var i,o=e.entity.latestPrice,a=e.entity.priceValue,r=null!==(i=e.entity.priceCurrency)&&void 0!==i?i:"$",s=parseFloat(a.toString()),l=null;if(s&&!isNaN(s)&&o&&-1!==o&&(o>s?l=Vt.PRICEINCREASE:o<s&&(l=Vt.PRICEDROP)),l){var c=this.utilities.createElement("msft-attribution");c.className="prodHBottomAnnotation";var u=this.utilities.createElement("DIV"),d=!1,h=this.flyoutData.common.currentTheme===xt.Dark;if(l===Vt.PRICEDROP){var p,f=!1;if(void 0!==o&&void 0!==s&&s>0&&(p=(s-o)/s*100,f=!0),f){var g=this.utilities.toFixedSafe(p,0);c.textContent=this.utilities.replaceValueInKey("prodHPriceDropRefresh",this.flyoutData.strings.prodHPriceDropRefresh,"".concat(g,"%")),c.className="prodHAnnotation",u.innerHTML=this.assets.getPriceDecreaseTrendIcon(h),d=!0,c.style.color=h?"#43E498":"#028948"}}else if(l===Vt.PRICEINCREASE){var m,v=!1;if(void 0!==o&&void 0!==s&&o>0&&(m=(o-s)/o*100,v=!0),v){var y=this.utilities.toFixedSafe(m,0);c.textContent=this.utilities.replaceValueInKey("prodHPriceIncreaseRefresh",this.flyoutData.strings.prodHPriceIncreaseRefresh,"".concat(y,"%")),c.className="prodHAnnotation",u.innerHTML=this.assets.getPriceIncreaseTrendIcon(h),d=!0,c.style.color=h?"#F9A1AC":"#C82B45"}}if(s){var C=this.utilities.createElement("P");C.className="txtSmall prodHAnnotation",C.style.fontSize="12px",C.style.marginTop="4px",C.slot="previous-price";var b=this.utilities.formatPrice(s);C.textContent=this.utilities.replaceValueInKey("prodHAnnotation",this.flyoutData.strings.prodHAnnotation,"".concat(r).concat(b)),C.style.textAlign="end",t.appendChild(C);var S=this.utilities.formatPrice(o);t.price="".concat(r).concat(S)}d&&(u.slot="image",u.style.display="flex",c.appendChild(u)),c.slot="end",c.textContent&&(t.appendChild(c),t.style.height="115px",t.hasAnnotation=!0)}}}}},{key:"createProductImages",value:function(t,e){var n=document.createElement("IMG");this.utilities.addFavIconSrc(n,t,e.domain),n.style.width="16px",n.style.height="16px",n.style.marginRight="calc(var(--design-unit) * 2px)";var i=this.utilities.createElement("IMG");e.entity.image&&""!==e.entity.image?this.utilities.addImageSrc(i,e.entity.image):this.utilities.addImageSrc(i,this.commonAssets.getDefaultProductImage());var o=this.utilities.createProductImage(64,64,i);o.slot="image",t.appendChild(o)}},{key:"manageProductLinkEvents",value:function(t,e){var n=this;t.addEventListener("click",(function(t){t.target&&"deleteEntry"!==t.target.slot&&n.navigateToRetailer(e)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToRetailer(e)}))}},{key:"navigateToRetailer",value:function(t,e){var n=new Yr(E.NavigatedToAnotherRetailer);this.pageHandlerModule.RecordAsUserAction(is.PRODUCT_HISTORY_NAVIGATION),this.pageHandlerModule.RecordAsUserEngagement(rl.PRODUCT_HISTORY_NAVIGATION),this.logModule.LogInfoEvent(S.ButtonClick,"Navigation to another retailer from product history",n),this.pageHandlerModule.NavigateToRetailerSite(t.url,e)}}]),n}(Bb),EM=xM,AM=function(){function t(){s(this,t)}return r(t,[{key:"getAggregateRatingLineStyles",value:function(){return"\n        span[part=title] .csrc { padding-left: 5px; }\n        .csrc { padding-right: 2px; }\n        .csrc svg {\n            vertical-align: text-bottom;\n            padding-bottom: 1px;\n        }"}},{key:"getStyles",value:function(){return"\n            msft-horizontal-card-slider msft-shopping-link, .vid_cds msft-shopping-link {\n                margin: 0 !important;\n            }\n            #review-and-ratings-container {\n                padding: 0 16px 20px;\n                border-radius: 8px;\n                display: flex;\n                flex-direction: column;\n                row-gap: 12px;\n            }\n            #review-and-ratings-container msft-product-card {\n                border-radius: 8px;\n                background-color: var(--fill-color);\n                overflow: hidden;\n                height: 92px;\n            }\n            #review-and-ratings-container msft-product-card::part(control) {\n                border: none;\n            }\n            .vid_cds {\n                display: flex;\n                column-gap: 8px;\n            }\n            .vid_cds msft-shopping-link { flex: 1 }\n            msft-shopping-link + .vid_cds { margin-top: 5px; }\n            .vid_cds:last-of-type { margin-bottom: 5px; }\n            .vid_thv, .vid_thh { position: relative; }\n            .vid_thv img {\n                border-radius: 4px 4px 0 0;\n                max-width: 100%;\n            }\n            .vid_thh {\n                overflow: hidden;\n            }\n            .vid_thh img {\n                border-radius: 4px 0 0 4px;\n            }\n            .vid_thh {\n                max-width: unset;\n                max-height: unset;\n            }\n            .vid_thov {\n                position: absolute;\n                bottom: 0;\n                right: 0;\n                margin: 8px;\n                border-radius: 2px\n            }\n            .vid_thov span {\n                background-color: rgba(0,0,0,0.75);\n                color: #fff;\n                padding: 1px 4px;\n                font-weight: bold;\n                font-size: 11px;\n                line-height: 14px;\n                float: right;\n            }\n            .vid_thov .vid_thply {\n                background-image: url(".concat(this.getPlayIconUri(),");\n                background-repeat: no-repeat;\n                background-position: center;\n                width: 7px;\n                height: 14px;\n            }")}},{key:"getExpertReviewShoppingLinkShadowStyles",value:function(){return"\n            .control {\n                padding: 8px 15px 10px 15px !important;\n                grid-template-columns: auto 1fr auto !important;\n                grid-template-rows: minmax(20px, auto) 1fr;\n                grid-row-gap: 8px;\n            }\n            .control .caption, .provider, .cardtitle {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }\n            .provider, .cardtitle { font-size: 14px; }\n            .cardtitle { grid-column: 1 / 3; }\n            .rating { font-size: 16px; }\n            .control .caption {\n                grid-column: 1 / 4;\n                font-weight: normal;\n            }"}},{key:"getCommonEntityHeaderStyles",value:function(){return"\n            #rrPHHeader {\n                width: 100%;\n                text-align: left;\n            }\n            .ce_head {\n                display: flex;\n                flex-direction: row;\n                width: 100%;\n            }\n            .ce_im {\n                display: flex;\n                align-items: center;\n            }\n            .ce_im img { object-fit: contain; }\n            .ce_im + .ce_info {\n                width: 216px;\n                margin-right: 0;\n            }\n            .ce_info {\n                display: flex;\n                flex-direction: column;\n                margin: 0 12px;\n            }\n            .ce_info > div {\n                margin-bottom: 8px;\n                text-align: initial;\n            }\n            .ce_pcbest {\n                display: flex;\n                font-size: 12px;\n            }\n            .ce_pcill { margin: 2px 6px 0 0; }\n            .ce_info .ce_pcbest {\n                background: rgba(16, 124, 16, 0.08);\n                padding: 4px 8px;\n                border-radius: 4px;\n                margin-bottom: 4px;\n            }\n            .ce_info .ce_title {\n                font-size: 16px;\n                font-weight: 600;\n                line-height: normal;\n                margin-top: 4px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }\n            .ce_head .ph_ill > div { line-height: 16px; }"}},{key:"getPlayIconUri",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAIBAMAAADHKvg1AAAAIVBMVEX///////////////////////////////////////////9/gMdvAAAACnRSTlMAETNEVWaImbvuo4D1oAAAAB9JREFUCB1jmMoABKuaQcSqQhCxKgFGgLhNQIkpQAwA8zkLyQAl6F0AAAAASUVORK5CYII="}},{key:"getCommonEntityHeaderBestPriceIcon",value:function(t){return t===xt.Dark?mt.getTrustedHTML(bM||(bM=j(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM10.5757 5.57574L7 9.15147L5.42426 7.57574C5.18995 7.34142 4.81005 7.34142 4.57574 7.57574C4.34142 7.81005 4.34142 8.18995 4.57574 8.42426L6.57574 10.4243C6.81005 10.6586 7.18995 10.6586 7.42426 10.4243L11.4243 6.42426C11.6586 6.18995 11.6586 5.81005 11.4243 5.57574C11.1899 5.34142 10.8101 5.34142 10.5757 5.57574Z" fill="#4BDBA2"/></svg>']))):mt.getTrustedHTML(SM||(SM=j(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM10.5757 5.57574L7 9.15147L5.42426 7.57574C5.18995 7.34142 4.81005 7.34142 4.57574 7.57574C4.34142 7.81005 4.34142 8.18995 4.57574 8.42426L6.57574 10.4243C6.81005 10.6586 7.18995 10.6586 7.42426 10.4243L11.4243 6.42426C11.6586 6.18995 11.6586 5.81005 11.4243 5.57574C11.1899 5.34142 10.8101 5.34142 10.5757 5.57574Z" fill="#107C10"/></svg>'])))}}]),t}();function TM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return DM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DM(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function DM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function kM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var IM=function(t){u(n,t);var e=kM(n);function n(t,i,o){var a;return s(this,n),f(l(a=e.call(this)),"assets",void 0),f(l(a),"stateManagement",void 0),f(l(a),"pageHandlerModule",void 0),f(l(a),"logModule",void 0),f(l(a),"flyoutData",void 0),f(l(a),"utilities",void 0),f(l(a),"ratingsRendered",!1),a.stateManagement=t,a.pageHandlerModule=o.pageHandlerModule,a.logModule=o.logModule,a.flyoutData=i,a.utilities=o.viewModulesUtilities,a.assets=new AM,a}return r(n,[{key:"GetModuleName",value:function(){return Rt.RATINGSANDREVIEWS}},{key:"ShouldRenderModule",value:function(){var t=this,e=this.flyoutData.dataStoreModule.RatingsAndReviewsData,n=!!e&&(e.hasExpertReviews||e.hasVideos);return n&&this.stateManagement.addEventListener(hn.CreateInlineRating,(function(e){e.detail&&e.detail.moduleName&&e.detail.callback&&!t.ratingsRendered&&(t.createInlineRating(e.detail.moduleName,e.detail.callback),t.ratingsRendered=!0)})),Promise.resolve(n)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(t){var e,i=this.utilities.createElement("msft-edge-shopping-section");i.id=n.ShoppingSectionId;var o=this.utilities.createElement("DIV");o.id=n.ReviewAndRatingsContainerId,this.flyoutData.common.isPane&&(o.style.padding="0px 20px 20px"),i.accordion=!0,i.expanded=!1,i.title=null!==(e=t.sectionTitle)&&void 0!==e?e:t.hasExpertReviews?t.hasVideos?this.flyoutData.strings.rrExpertAndVideoReviews:this.flyoutData.strings.rrExpertReviews:this.flyoutData.strings.rrVideoReviews,i.append(o),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var a=this.RankOrderedCards(t),r={l:[]};this.RenderCards(o,a,r);var s=JSON.stringify(r);this.logModule.LogInfoEvent(S.EdgeFlyoutStatus,s,new _(A.RatingsAndReviewsRendered));var l=this.CreateModule(i,wt.RATINGSANDREVIEWS,Rt.RATINGSANDREVIEWS,_t.CONTEXTUAL,Ft.LIST);return Promise.resolve(l)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#"+n.ShoppingSectionId);if(t&&(t.accordion=!1),this.flyoutData.common.shopping.querySelector("#divPriceHistorySection .ph_ill")){var e=this.CreateCommonEntityHeader();e.slot="header-content",this.flyoutData.common.shopping.appendChild(e)}else{if(this.flyoutData.common.shopping.querySelectorAll("#priceComparisonSection")){var i=new CustomEvent(hn.pcCreateHeader);this.stateManagement.dispatchEvent(i)}}}},{key:"PostProcessing",value:function(t,e,n){un.queueUpdate((function(){var t,e=null===(t=n.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var i,o=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector(".region");o&&(o.style.marginBottom="0px")}}))}},{key:"CreateCommonEntityHeader",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=this.utilities.createElement("div");if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getCommonEntityHeaderStyles()),this.flyoutData.common.shopping.querySelector("#divPriceHistorySection .ph_ill")){e.id="rrPHHeader";var n=new CustomEvent(hn.CreatePHHeader,{detail:{section:e}});this.stateManagement.dispatchEvent(n);var i=e.querySelector(".ph_info");if(i){var o=this.createInlineRating(Rt.RATINGSANDREVIEWS);o&&i.appendChild(o)}}else if(null!=t&&t.CompetingPrices&&t.CompetingPrices.length>0&&t.lowestPrice<0){var a,r,s,l,c=this.utilities.createElement("div",{className:"ce_info"});e.className="ce_head";var u=this.utilities.createElement("div",{className:"ce_pcbest"},this.flyoutData.strings.pcBestPriceHeader),d=this.utilities.createElement("div",{className:"ce_pcill"});d.innerHTML=this.assets.getCommonEntityHeaderBestPriceIcon(this.flyoutData.common.currentTheme),null===(a=d.firstElementChild)||void 0===a||a.setAttribute("role","presentation"),u.insertAdjacentElement("afterbegin",d),c.appendChild(u);var h=null!==(r=null!==(s=null==t?void 0:t.entityName)&&void 0!==s?s:null===(l=this.flyoutData.dataStoreModule.RatingsAndReviewsData)||void 0===l?void 0:l.entityName)&&void 0!==r?r:"Product";c.appendChild(this.utilities.createElement("div",{className:"ce_title"},h));var p=this.createInlineRating(Rt.RATINGSANDREVIEWS);p&&c.appendChild(p),e.appendChild(c)}return e}},{key:"createInlineRating",value:function(t,e){var n=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(null!=n&&n.aggregateRating){var i=this.createAggregateRatingElement(n.aggregateRating);if(i){var o=this.utilities.createElement("div",{className:"rr_inl"}),a=o.attachShadow({mode:"open"});this.utilities.applyStyles(a,this.assets.getAggregateRatingLineStyles()),a.appendChild(i);var r=this.logModule;r.LogInfoEvent(S.EdgeFlyoutStatus,t?"Rendered in ".concat(t):"Rendered",new _(A.InlineRatingRendered));return o.addEventListener("click",(function t(){r.LogInfoEvent(S.ButtonClick,"First click",new Yr(E.ClickInlineRating)),o.removeEventListener("click",t)})),e&&e(o),o}}}},{key:"RankOrderedCards",value:function(t){var e=[],n=t.hasExpertReviews,i=t.hasVideos;if(n&&!i&&t.expertReviews)e=t.expertReviews;else if(!n&&i&&t.videos){var o,a=TM(t.videos);try{for(a.s();!(o=a.n()).done;){o.value.cardOrientation=zc.V}}catch(t){a.e(t)}finally{a.f()}e=t.videos}else t.expertReviews&&t.videos&&(e=t.expertReviews.concat(t.videos));return e.sort(Wc.Compare),e}},{key:"createStarRatingElement",value:function(t){var e=t.normalizedValue,n=e.toFixed(1),i=this.utilities.createElement("span",{className:"csrc",role:"img",title:"Star rating: ".concat(n," out of ").concat(Bc.NormalizedMaxRating)}),o="http://www.w3.org/2000/svg",a=this.flyoutData.common.currentTheme===xt.Dark?"#fff":"#2b2b2b",r=document.createElementNS(o,"svg");r.setAttribute("height",14..toString()),r.setAttribute("width",(16*Bc.NormalizedMaxRating).toString());var s=document.createElementNS(o,"defs"),l=document.createElementNS(o,"path");l.setAttribute("d","M7 1.435l1.386 4.161 4.221.09-3.364 2.662 1.223 4.217L7 10.049l-3.466 2.516 1.223-4.217-3.364-2.662 4.221-.09L7 1.435l1.386 4.161z"),l.setAttribute("id","rnr_st"),l.setAttribute("stroke",a),l.setAttribute("stroke-width","0.8"),s.appendChild(l),r.appendChild(s);for(var c=0;c<Bc.NormalizedMaxRating;c++){var u=void 0;if(e>=c+1)u=a;else if(e>c){var d=Math.round(15+70*(e-c))+"%",h=document.createElementNS(o,"linearGradient");h.id="rnr_sth";var p=document.createElementNS(o,"stop");p.setAttribute("offset",d),p.setAttribute("stop-color",a);var f=document.createElementNS(o,"stop");f.setAttribute("offset",d),f.setAttribute("stop-opacity","0"),h.appendChild(p),h.appendChild(f),r.appendChild(h),u="url(#rnr_sth)"}else u="none";var g=document.createElementNS(o,"use");g.setAttribute("fill",u),g.setAttribute("transform","translate(".concat(16*c," .5) scale(.95 .95)")),g.setAttribute("href","#rnr_st"),r.appendChild(g)}return i.appendChild(r),i}},{key:"createAggregateRatingElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";if(t){var n=this.utilities.createElement(e);if(n.appendChild(this.createStarRatingElement(t)),t.totalReviews){var i=this.utilities.createElement("span",{"aria-label":"User ratings",style:"color: var(--neutral-focus-hint); font-size: var(--type-ramp-minus-1-font-size);"},"(".concat(t.totalReviews,")"));n.appendChild(i)}return n}}},{key:"RenderCards",value:function(t,e,i){for(var o=0,a=0;o<e.length&&a<n.MaxCardRows;o++,a++){var r=e[o],s=Zc.Narrow(r),l=void 0===s?r:void 0;if(s){var c=[s];if(i.l.push({t:"V",id:s.id,o:zc[s.cardOrientation]}),s.cardOrientation===zc.H)for(;(null===(u=e[o+1])||void 0===u?void 0:u.cardOrientation)===zc.H;){var u,d=e[++o];c.push(d),i.l.push({t:"V",id:d.id,o:zc[d.cardOrientation]})}this.renderVideosCarousel(c,t)}else l&&(this.renderExpertReview(l,t),i.l.push({t:"R",id:l.id}))}}},{key:"addNavigateHandler",value:function(t,e,n,i,o,a){var r=this.logModule,s=this.pageHandlerModule,l=function(){r.LogInfoEvent(S.ButtonClick,"Id:".concat(i),new Yr(n)),s.RecordAsUserAction(a),e(s,i,o,cl.NEW_FOREGROUND_TAB)};t.addEventListener("click",(function(){l()})),t.addEventListener("mousedown",(function(t){1===t.button&&l()}))}},{key:"renderExpertReview",value:function(t,e){var n,i=this;(n=this.utilities.createElement("msft-product-card")).shadowRoot&&(n.href="#",this.addNavigateHandler(n,(function(t,e,n,i){return t.NavigateToProfessionalReviewWithDisposition(e,n,i)}),E.ClickExpertReview,t.id,t.url,is.NAVIGATE_TO_PROFESSIONAL_REVIEW),this.utilities.applyStyles(n.shadowRoot,this.assets.getExpertReviewShoppingLinkShadowStyles()),this.stateManagement.addEventListener(hn.ModulesRendered,(function(){var e,o=null===(e=n.shadowRoot)||void 0===e?void 0:e.querySelector(".control");if(o){for(;o.childElementCount>0;)o.removeChild(o.children[0]);var a=!!t.attribution;if(a)o.appendChild(i.utilities.createElement("div",{className:"cardtitle"},t.title));else{if(t.favIconDomain){var r=i.utilities.createElement("img",{className:"icon",role:"presentation"});i.utilities.addFavIconSrc(r,o,t.favIconDomain)}o.appendChild(i.utilities.createElement("div",{className:"provider"},t.provider))}if(t.rating){var s=i.utilities.createElement("div",{className:"rating"},t.rating.rawValue.toFixed(1)),l=i.utilities.createElement("SPAN");l.textContent="/"+t.rating.maxValue,l.style.fontWeight="normal",i.flyoutData.common.currentTheme===xt.Dark?l.style.color="#FFFFFF":l.style.color="#666666",s.appendChild(l),o.appendChild(s)}if(t.caption){var c=t.caption;if(c.length>160){var u=c.match(/^.{160}\S{0,20}/),d=u&&u[0]?u[0]:c.substr(0,160);d.length<c.length&&(c=d+"...")}o.appendChild(i.utilities.createElement("div",{className:"caption"},c))}if(a&&t.attribution){var h=i.utilities.createElement("msft-attribution");if(h.innerText=t.attribution,t.favIconDomain){var p=i.utilities.createElement("img",{className:"icon",role:"presentation",slot:"image"});i.utilities.addFavIconSrc(p,h,t.favIconDomain)}o.appendChild(h)}}})),e.appendChild(n))}},{key:"renderVideosCarousel",value:function(t,e){if(t&&t.length>0){var i=e;2===t.length&&(i=this.utilities.createElement("div",{className:"vid_cds"}));for(var o=0;o<t.length&&o<n.MaxVideos;o++)this.renderVideo(t[o],i,t.length);t.length>1&&e.appendChild(i)}}},{key:"renderVideo",value:function(t,e,n){var i,o,a=n>2,r=n>1,s=a?128:r?166:146,l=r?160:92,c=t.publisher?t.creator?"".concat(t.publisher," > ").concat(t.creator):t.publisher:t.creator,u=t.title;t.creator&&(u+=" from "+t.creator),t.publisher&&(u+=" on "+t.publisher),u+="  Duration: "+t.durationLabel,(o=this.utilities.createElement("msft-product-card",{"aria-label":u})).isVideoCard=!0,o.description=t.title,o.retailer=c,o.href="#",this.addNavigateHandler(o,(function(t,e,n,i){return t.NavigateToVideoReviewWithDisposition(e,n,i)}),E.ClickVideoReview,t.id,t.clickthroughUrl,is.NAVIGATE_TO_VIDEO_REVIEW);var d=this.utilities.createElement("style");d.textContent="\n.control {\n    height: ".concat(l," !important;\n    padding: 0 !important;\n}\n.control .content {\n    padding: 8px;\n    display: block;\n}\nmsft-attribution.attribution { grid-template-columns: initial; }"),r?(a&&(d.textContent+=".control { width: ".concat(s," !important; }")),d.textContent+="\n.control {\n    grid-template-columns: 1fr !important;\n    grid-template-rows: auto 1fr;\n}"):d.textContent+="\n.control {\n    grid-template-columns: auto 1fr !important;\n    column-gap: 2px !important;\n}\n.control .content { padding-right: 10px; }",null===(i=o.shadowRoot)||void 0===i||i.appendChild(d);var h=this.utilities.createElement("div",{className:r?"vid_thv":"vid_thh"});h.slot="image",r||(h.style.height=l+"px");var p=this.utilities.createElement("img",{role:"presentation"});p.width=s,p.height=r?l-74:l;var f=this.flyoutData.common.urlPrefix;t.thumbnailUrl?p.src="".concat(f).concat(t.thumbnailUrl,"&w=").concat(p.width,"&h=").concat(p.height,"&c=7&rs=1"):t.thumbnailId&&(p.src="".concat(f,"https://th.bing.com/th?id=").concat(t.thumbnailId,"&pid=Api&w=").concat(p.width,"&h=").concat(p.height,"&c=7&rs=1")),p.style.borderRadius="0px",p.style.marginRight="calc(var(--design-unit) * 2px)",h.appendChild(p);var g=this.utilities.createElement("div",{className:"vid_thov"});t.durationText&&g.appendChild(this.utilities.createElement("span",{className:"vid_thdur"},t.durationText)),g.appendChild(this.utilities.createElement("span",{className:"vid_thply"})),h.appendChild(g),o.appendChild(h),e.appendChild(o)}}]),n}(Bb);f(IM,"ShoppingSectionId","sectRatingsAndReviews"),f(IM,"MaxCardRows",3),f(IM,"MaxVideos",5),f(IM,"ReviewAndRatingsContainerId","review-and-ratings-container");var wM=IM,PM=function(){function t(){s(this,t)}return r(t,[{key:"getStyles",value:function(){return"\n            .iconDiv {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                margin-inline-end: 12px;\n                overflow: hidden;\n                background: rgba(0, 0, 0, 0.02);\n                border: 1px solid transparent;\n                border-radius: calc(var(--corner-radius) * 2px);\n            }\n            .tipsDiv {\n                background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n                --elevation: 5;\n                overflow: hidden;\n                align-items: center;\n                padding: 10px 0 10px 0;\n                border-radius: calc(var(--elevated-corner-radius) * 1px);\n                text-align: left;\n                display: table;\n                width: calc(100% - 22px);\n                margin: auto;\n                margin-bottom: 10px;\n            }\n            #gotItButtonWrapper {\n                background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n                border-radius: 6px;\n                height: 42px;\n                box-sizing: border-box;\n                padding: 1.5px;\n                margin-left: 10px;\n                margin-right: 10px;\n            }\n            #gotItButton {\n                width: 100%;\n                height: 39px;\n                border-radius: 5px;\n            }\n            fluent-button[id*='gotItButton']::part(control) {\n                background: white;\n                font-size: 14px;\n                font-weight: 450;\n                line-height: 20px;\n                color: #008076;\n            }\n            @media (prefers-color-scheme: dark) {\n            }\n        "}},{key:"getDarkModeStyles",value:function(){return"\n        fluent-button[id*='gotItButton']::part(control) {\n            background: #3b3b3b;\n            color: #2ef4ff;\n        }\n    "}}]),t}();function OM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var RM,MM,NM=function(t){u(d,t);var n,i,a,c=OM(d);function d(t,e){var n;return s(this,d),f(l(n=c.call(this)),"assets",void 0),f(l(n),"flyoutData",void 0),f(l(n),"utilities",void 0),f(l(n),"pageHandlerModule",void 0),f(l(n),"logModule",void 0),n.flyoutData=t,n.utilities=e.viewModulesUtilities,n.pageHandlerModule=e.pageHandlerModule,n.logModule=e.logModule,n.assets=new PM,n}return r(d,[{key:"GetModuleName",value:function(){return Rt.TIPS}},{key:"ShouldRenderModule",value:function(){var t=this.hasTips();return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t,e,n=this.flyoutData.common.shopping;if(n&&this.flyoutData.dataStoreModule.NudgeTipsData&&(null===(t=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===t||null===(e=t.Tips)||void 0===e?void 0:e.length)>0){var i=this.utilities.createElement("H2");i.className="txtLarge",i.style.textAlign="center",i.style.fontWeight="500";var o=this.flyoutData.dataStoreModule.NudgeTipsData.Tips.length>1?this.utilities.replaceValueInKey("tipsMainTitle",this.flyoutData.strings.tipsMainTitle,this.flyoutData.dataStoreModule.NudgeTipsData.Tips.length.toString()):this.flyoutData.strings.tipsTiltleSingle;i.textContent=o,i.slot="header-content",n.appendChild(i)}}},{key:"renderModule",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());var e=this.utilities.createElement("msft-edge-shopping-section"),n=null===(t=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===t?void 0:t.Tips;if(n){var i,o=n.length>1?this.utilities.replaceValueInKey("tipsSubTitle",this.flyoutData.strings.tipsSubTitle,n.length.toString()):this.flyoutData.strings.tipsSubTitleSingle;this.populateTipsList(e,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(e,o,null===(i=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===i?void 0:i.Tips,this.GetModuleName(),(function(t){var e=bt.TIPS;return t&&a.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populateTipsList.bind(this))}try{var r=Date.now(),s=!1,l=this.logModule,c=this.pageHandlerModule,u=function(){var t=Date.now()-r;if(s&&t>=1e3){c.RecordAsUserAction(is.TIPS_CLICK);var e=new Yr(E.TipsDwellTime);l.LogInfoEvent(S.ButtonClick,"Viewed Tips",e)}};e.onmouseover=function(){if(r=Date.now(),e){var t=e.shadowRoot;if(t){var n=t.querySelector("fluent-accordion-item");n&&n.classList.contains("expanded")||(s=!0)}}},e.onmouseleave=u,e.onmouseout=u}catch(t){}return Promise.resolve(this.CreateModule(e,wt.TIPS,Rt.TIPS,_t.CONTEXTUAL,Ft.BLOCK))}},{key:"hasTips",value:function(){var t,e=this.flyoutData.dataStoreModule.NudgeTipsData;return null!==(t=e&&e.Tips&&e.Tips.length>0)&&void 0!==t&&t}},{key:"populateTipsList",value:(a=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=null===(a=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===a?void 0:a.Tips)){t.next=17;break}s=0,r.length>0&&(s=r.length),l=0,n?l=bt.TIPS:s>bt.TIPS&&(s=bt.TIPS),c=l;case 7:if(!(c<s+1)){t.next=17;break}return u=r[c],t.next=11,this.createTipTile(u,c,r.length);case 11:(d=t.sent)&&e.appendChild(d),c===l&&n&&i&&this.flyoutData.common.currentDevice===St.Desktop&&d&&d.focus();case 14:c++,t.next=7;break;case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)})},{key:"createTipTile",value:(i=e(o().mark((function t(e,n,i){var a,r,s,l,c,u,d,h,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==i){t.next=2;break}return t.abrupt("return",this.tipsButton());case 2:if((a=this.utilities.createElement("DIV")).className="tipsDiv",this.flyoutData.common.isPane&&(a.style.padding="0px!important",a.style.marginBottom="0px!important"),r=this.utilities.createElement("DIV",{style:"position: relative; height: 100%; display: grid; grid-template-columns: auto 60% auto;"}),a.appendChild(r),(s=this.utilities.createElement("DIV")).className="iconDiv",l=this.utilities.createElement("IMG",{style:"width: 110px; height: 66px; place-self: center"}),s.style.background="none",l.style.width="40px",l.style.height="40px","Shipping"===e.IconType?l.src=this.flyoutData.common.resourcesEndpoint+"tips/ShippingNew.png":"Gift"===e.IconType?l.src=this.flyoutData.common.resourcesEndpoint+"tips/GiftNew.png":(e.IconType,l.src=this.flyoutData.common.resourcesEndpoint+"tips/MoneyNew.png"),l.addEventListener("error",(function(){r.style.gridTemplateColumns="auto",r.removeChild(l)})),l.setAttribute("aria-hidden","true"),s.appendChild(l),r.appendChild(s),c=this.utilities.createElement("DIV",{style:"justify-content: space-around;\n                flex-direction: column;\n                margin-top: 10px;\n                max-width: 192px;"}),r.appendChild(c),(u=this.utilities.createElement("P",{style:"margin: 0px;\n                    margin-bottom: 5px;"})).className="txtSmall",u.style.fontSize="12px",u.style.lineHeight="16px",u.style.color="var(--neutral-foreground-rest)",u.textContent=e.Text,!e.MinimumPurchase){t.next=31;break}return t.next=29,this.GetAmountForFreeShipping(e);case 29:(d=t.sent)>0?(h=e.Text.replace("$x","$"+d.toFixed(2).toString()),u.textContent=h):"Shipping"===e.IconType?(p=this.utilities.replaceValueInKey("tipsFreeShipping",this.flyoutData.strings.tipsFreeShipping,"$"+e.MinimumPurchase.toString()),u.textContent=p):e.Text.includes("Add $x more")&&(f=e.Text.replace("Add $x more",this.utilities.replaceValueInKey("tipsMinimumPurchase",this.flyoutData.strings.tipsMinimumPurchase,"$"+e.MinimumPurchase.toString())),u.textContent=f);case 31:return c.appendChild(u),a.setAttribute("aria-label","".concat(e.Text)),a.setAttribute("tabIndex","0"),t.abrupt("return",a);case 35:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"GetAmountForFreeShipping",value:(n=e(o().mark((function t(e){var n,i,a,r,s,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=21;break}if(!(n=e.RetailerData.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL))){t.next=21;break}if(i=n.orderSubTotalElementSelector,a=n.orderTotalDataElementSelector,!i){t.next=14;break}return t.next=8,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(i);case 8:if(r=t.sent,!(s=r.innerText)||!e.MinimumPurchase){t.next=12;break}return t.abrupt("return",e.MinimumPurchase-Te.GetPriceStringAsNumber(s));case 12:t.next=21;break;case 14:if(!a){t.next=21;break}return t.next=17,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(a);case 17:if(l=t.sent,!(c=l.innerText)||!e.MinimumPurchase){t.next=21;break}return t.abrupt("return",e.MinimumPurchase-Te.GetPriceStringAsNumber(c));case 21:return t.abrupt("return",0);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tipsButton",value:function(){var t=this;if(!this.flyoutData.common.isPane){var e=this.utilities.createElement("div");e.setAttribute("role","presentation"),e.id="gotItButtonWrapper";var n=this.utilities.createElement("fluent-button");return n.id="gotItButton",n.textContent=this.flyoutData.strings.commonGotIt,n.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(is.TIPS_CLICK);var e=new Yr(E.TipsGotIt);t.logModule.LogInfoEvent(S.ButtonClick,"Tips Got it button click",e),t.pageHandlerModule.DismissPopup()})),e.append(n),e}return null}}]),d}(Bb),LM=NM,_M=function(){function t(){s(this,t)}return r(t,[{key:"getTagLeft",value:function(){return mt.getTrustedHTML(RM||(RM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="3.5" height="15" viewBox="0 0.5 3.5 15" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.37993 0.517212H2C1.17157 0.517212 0.5 1.18879 0.5 2.01721V13.0133C0.5 13.8417 1.17157 14.5133 2 14.5133H3.37993V0.517212Z" fill="#0078D4"/>'])))}},{key:"getTagRight",value:function(){return mt.getTrustedHTML(MM||(MM=j(['<svg xmlns="http://www.w3.org/2000/svg" width="7.5" height="15" viewBox="1 0.5 7 15" fill="none"><path fill-rule="evenodd" clip-rule:"evenodd" d="M0.379883 14.5111C0.809365 14.4946 1.21231 14.2945 1.48503 13.9599L5.96665 8.46189C6.41642 7.91011 6.41642 7.11821 5.96665 6.56643L1.48503 1.06838C1.21231 0.73381 0.809365 0.533669 0.379883 0.517212V14.5111Z" fill="#0078D4"/>'])))}},{key:"getStyles",value:function(){return"\n        #divRebatesWrapper {\n            width: calc(100% - 4px);\n            margin-bottom: 0px;\n            margin-left: 12px;\n            margin-right: 12px;\n        }\n        #textHeader {\n            font-size: 12px;\n            line-height: 16px;\n            text-align: left;\n            margin-left: 13px;\n        }\n        #divBoxWrapper {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n            border-radius: 4px;\n            padding: 12px;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n        }\n        #divTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            vertical-align: middle;\n            row-gap: 2px;\n            width: 50%;\n        }\n        #textRecentEarnings {\n            font-size: 12px;\n            line-height: 16px;\n            margin: 0px;\n        }\n        #linkViewActivity {\n            text-decoration: none;\n            margin-top: 10px;\n        }\n        #linkViewActivity:hover {\n            text-decoration: none;\n        }\n        #textViewActivity {\n            font-size: 10px;\n            font-weight: 500;\n            line-height: 14px;\n            margin: 0px;\n        }\n        #textBalance {\n            font-size: 10px;\n            line-height: 14px;\n            margin: 0px;\n        }\n        #numberCurrentBalance {\n            font-size: 18px;\n            line-height: 100%;\n            margin: 0px;\n        }\n        .retailerText {\n            display: flex;\n            line-height: 18px;\n            font-size: 10px;\n            margin-top: -5px;\n            margin-bottom: -3px;\n            width: 125px;\n            text-align: center;\n        }\n        .retailerIcon {\n            max-width: 100px;\n        }\n        .spanArrowValue {\n            display: flex;\n            height: 14px;\n            line-height: 14px;\n            font-size: 10px;\n            background: #0078D4;\n            color: #fff;\n            font-weight: 500;\n            float: left;\n        }\n        .divArrowValue {\n            display: inline-flex;\n            padding-top: 4px;\n            padding-left: 2px;\n            vertical-align: middle;\n        }\n        msft-shopping-cashback-card::part(control) {\n            border: none;\n        }\n        @media (forced-colors: active) {\n            .activated {\n                background-color: Highlight;\n                forced-color-adjust: none;\n                color: highlightText;\n            }\n            .activated: focus {\n                box-shadow: 0 0 0 2px HighlightText inset;\n                border-color: buttonText;\n            }\n            .imgCBTag {\n                display: none;\n            }\n        }"}}]),t}();function FM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return HM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HM(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function HM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function BM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var UM=new Map;UM.set("usd","$");var VM=function(t){u(n,t);var e=BM(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"assets",void 0),f(l(o),"logModule",void 0),f(l(o),"pageHandlerModule",void 0),f(l(o),"flyoutData",void 0),f(l(o),"utilities",void 0),o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.flyoutData=t,o.utilities=i.viewModulesUtilities,o.assets=new _M,o}return r(n,[{key:"GetModuleName",value:function(){return Rt.TOP_RETAILERS}},{key:"ShouldRenderModule",value:function(){var t,e,n,i,o=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==o||null===(t=o.segment)||void 0===t?void 0:t.toLowerCase())===Gt.AUTOS&&(null==o?void 0:o.CompetingPrices)&&(null==o?void 0:o.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);if(null!==(n=this.flyoutData)&&void 0!==n&&n.dataStoreModule&&null!==(i=this.flyoutData)&&void 0!==i&&i.dataLoader){var a=this.flyoutData.dataStoreModule.TopRetailerData,r=this.flyoutData.dataLoader.IsServerData();if(a&&r)return Promise.resolve(!0)}return Promise.resolve(!1)}},{key:"renderModule",value:function(){var t;this.flyoutData.common.isPane?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=document.createElement("msft-edge-shopping-section");e.id="topRetailerDiv",e.setAttribute("aria-label",this.flyoutData.strings.cbTopRetailerTitle);var n=null===(t=this.flyoutData.dataStoreModule.TopRetailerData)||void 0===t?void 0:t.Retailers;if(n&&n.length>0){this.populateRetailerList(e,!1,!1,this.flyoutData.common.bannerContext);var i=this.flyoutData;this.utilities.createCommonListStructure(e,this.flyoutData.strings.cbTopRetailerTitle,n,this.GetModuleName(),(function(t){var e=bt.GROCERY_COUPON;return t&&i.common.bannerContext===Ht.VIEWALL&&(e=t.length),e}),this.populateEmptyBannerRetailerList.bind(this));var o=this.CreateModule(e,wt.TOP_RETAILERS,Rt.TOP_RETAILERS,_t.HOME,Ft.SQUARES);return Promise.resolve(o)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e,n=this,i=this.flyoutData.common.isPane;e=i?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping;var o=null===(t=this.flyoutData.dataStoreModule.CashBackData)||void 0===t?void 0:t.userRebatesResponse,a=this.utilities.createElement("DIV");if(a.id="divRebatesWrapper",a.slot="header-content",i&&(a.style.marginLeft="20px",a.style.marginRight="20px"),o&&o.isRebatesUser&&void 0!==o.latestCashbackApproved&&o.latestCashbackApprovedCurrency&&void 0!==o.cashbackAvailable&&void 0!==o.lifetimeBalance){var r=this.utilities.createElement("P");r.style.marginTop="0px",r.id="textHeader",r.textContent=this.flyoutData.strings.cbSnapshotTitle,r.setAttribute("role","heading"),r.setAttribute("aria-level","3"),this.flyoutData.common.isPane&&(r.style.fontSize="16px",r.style.lineHeight="24px",r.style.fontWeight="500");var s=this.utilities.createElement("DIV");s.id="divBoxWrapper";var l=this.utilities.createElement("DIV");l.id="divTextWrapper",l.style.textAlign="left";var c=this.roundNumber(o.latestCashbackApproved),u=o.latestCashbackApprovedCurrency,d=UM.get(u);d=d||"$";var h=this.utilities.createElement("P");h.id="textRecentEarnings",h.textContent=this.utilities.replaceValueInKey("bannerRecentPurchase",this.flyoutData.strings.bannerRecentPurchase,"".concat(d).concat(c));var p=this.utilities.createElement("A");p.id="linkViewActivity",p.slot="header-actions";var f=this.utilities.createElement("P");f.id="textViewActivity",f.textContent=this.flyoutData.strings.cbViewAccount,f.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#6dc0ff":"#0078D4",p.appendChild(f),p.href="#",p.addEventListener("click",(function(){n.pageHandlerModule.NavigateToBingRebatesHistory()})),l.append(h),l.append(p);var g=this.utilities.createElement("DIV");g.id="divTextWrapper",g.style.textAlign="right",g.setAttribute("role","group");var m=this.utilities.createElement("P");m.id="textBalance",m.textContent=this.flyoutData.strings.cbCurrBalance,m.style.fontVariant="small-caps",m.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#c0c0c0":"#8e8e8e";var v=this.roundNumber(o.cashbackAvailable),y=this.utilities.createElement("P");y.id="numberCurrentBalance",y.textContent="".concat(d).concat(v);var C=this.roundNumber(o.lifetimeBalance),b=this.utilities.createElement("P");b.id="textBalance",b.style.color=this.flyoutData.common.currentTheme===xt.Dark?"#c0c0c0":"#8e8e8e",b.textContent=this.utilities.replaceValueInKey("bannerLifetime",this.flyoutData.strings.bannerLifetime,"".concat(d).concat(C)),b.style.marginTop="9px",g.setAttribute("aria-label",m.textContent+": "+y.textContent+", "+b.textContent),g.append(m),g.append(y),g.append(b),s.append(l),s.append(g),a.append(r),a.append(s)}var S=this.utilities.createElement("P");S.style.marginBottom="0px",S.id="textHeader",S.textContent=this.flyoutData.strings.trSectionTitle,S.setAttribute("role","heading"),S.setAttribute("aria-level","3"),this.flyoutData.common.isPane&&(S.style.fontSize="16px",S.style.lineHeight="24px",S.style.fontWeight="500"),a.append(S),e.append(a)}},{key:"populateEmptyBannerRetailerList",value:function(t,e,n){this.populateRetailerList(t,e,n,"")}},{key:"populateRetailerList",value:function(t,e,n,i){var o,a,r=null===(o=this.flyoutData.dataStoreModule.TopRetailerData)||void 0===o?void 0:o.Retailers;if(r){r.length>0&&(a=r.length);var s=0,l=this.flyoutData.common.isPane;if(e){var c=new Yr(E.SeeMoreTopRetailers);this.pageHandlerModule.RecordAsUserAction(is.VIEW_MORE_TOP_RETAILERS),this.logModule.LogInfoEvent(S.ButtonClick,"",c),s=bt.TOP_RETAILERS}else a>bt.TOP_RETAILERS&&"viewAll"!==i&&(a=bt.TOP_RETAILERS);var u=null;e?u=t.querySelector("#divTopRetailerWrapper"):(u=this.utilities.createElement("DIV",{style:"\n                    display: grid;\n                    grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                    grid-gap: 12px;\n                    margin-bottom: 10px;\n                    margin-left: ".concat(l?"20px":"12px",";\n                    margin-right: ").concat(l?"20px":"12px",";")})).id="divTopRetailerWrapper";for(var d=s;d<a;d++)u?(this.createRetailerTile(u,r[d],i,s,e,n,d),e||t.appendChild(u)):this.createRetailerTile(t,r[d],i,s,e,n,d)}}},{key:"createRetailerTile",value:function(t,e,n,i,o,a,r){var s=this,l=document.createElement("msft-shopping-cashback-card");l.layout="grid",l.href="#",l.ariaRoledescription="button";var c=e.merchantFullName,u=this.retrieveCashBackAmount(e),d=this.utilities.replaceValueInKey("trAriaLabel",this.flyoutData.strings.trAriaLabel,u,c);l.ariaLabel=d;var h=document.createElement("div");h.className="retailerText";var p=this.createCommissionArrow(!0,u);p.setAttribute("aria-hidden","true");var f=this.flyoutData.strings.cbRetailerTitle;this.utilities.populateSingleChildHtml(h,f,p);var g=document.createElement("img");g.src=e.image,g.alt=this.utilities.replaceValueInKey("trImageLabel",this.flyoutData.strings.commonAriaLogo,c),g.slot="image",l.appendChild(g),l.appendChild(h),t.appendChild(l),l.addEventListener("click",(function(){s.pageHandlerModule.RecordAsUserAction(is.CASHBACK_RETAILER_CLICK);var t=new Yr(E.CashbackRetailer);s.logModule.LogInfoEvent(S.ButtonClick,"Clicked to go to cashback retailer site",t),s.pageHandlerModule.NavigateToRetailerSite(e.originalUrl)}));var m=this.flyoutData.common.currentDevice;r===i&&o&&a&&m===St.Desktop&&l?l.focus():o&&m===St.Mobile&&un.queueUpdate((function(){l.setAttribute("marker","1");var t=l.parentNode;if(t){var e,n=FM(t.children);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.shadowRoot;if(o){var a=o.querySelector(".indicator");null==i.getAttribute("marker")?a&&(a.style.display="none"):a.style.display="flex"}}}catch(t){n.e(t)}finally{n.f()}}}))}},{key:"roundNumber",value:function(t){var e=parseFloat(t);return(Math.round(100*e)/100).toString()}},{key:"retrieveCashBackAmount",value:function(t){var e="",n="",i="";return t.commissionType&&(n=t.commissionType,i=t.commissionValue),"%"===n?e="".concat(i).concat("%"):"flat"===n&&(e="".concat("$").concat(i)),e}},{key:"createCommissionArrow",value:function(t,e,n){var i=this.utilities.createElement("DIV");i.className="imgCBTag",i.innerHTML=this.assets.getTagLeft(),i.style.float="left";var o=this.utilities.createElement("DIV");o.className="imgCBTag",o.innerHTML=this.assets.getTagRight(),o.style.float="left",o.style.paddingLeft="-0.5px";var a=this.utilities.createElement("SPAN");a.textContent=e,a.className="spanArrowValue";var r=this.utilities.createElement("DIV");return r.className="divArrowValue",r.appendChild(i),r.appendChild(a),r.appendChild(o),n&&n(r),r}}]),n}(Bb),GM=VM;function WM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var $M=function(t){u(n,t);var e=WM(n);function n(){return s(this,n),e.apply(this,arguments)}return r(n,[{key:"handleHubPageDataLoaded",value:function(t){var e,n,i;(null===(e=t.detail)||void 0===e||null===(n=e.trendingOffers)||void 0===n?void 0:n.length)>0&&("1"===(null===(i=t.detail.trendingOffersMetadata)||void 0===i?void 0:i.forYou)?this.component.title=this.flyoutData.strings.trendingOffersPersonalizedTitle:this.component.title=this.flyoutData.strings.trendingOffersTitle,this.component.shoppingEntities=this.transformShoppingEntities(t.detail.trendingOffers))}},{key:"GetFeedModuleName",value:function(){return Rt.TRENDING_OFFERS}},{key:"GetModulePriority",value:function(){return wt.TRENDING_OFFERS}},{key:"GetCardName",value:function(){return E.TrendingOffersCard}},{key:"GetShowMoreButtonName",value:function(){return E.TrendingOffersShowMore}}]),n}(yR),zM=$M,KM=function(){function t(e,n,i){s(this,t),f(this,"cashBackModule",void 0),f(this,"checkoutAutofillModule",void 0),f(this,"couponsModule",void 0),f(this,"dealsModule",void 0),f(this,"recommendationsModule",void 0),f(this,"recommendationsNotificationModule",void 0),f(this,"clippingModule",void 0),f(this,"priceComparisonModule",void 0),f(this,"priceHistoryModule",void 0),f(this,"bannerModule",void 0),f(this,"flyoutRendererModule",void 0),f(this,"paneRendererModule",void 0),f(this,"ratingsAndReviewsModule",void 0),f(this,"stateManagementModule",void 0),f(this,"productHistoryModule",void 0),f(this,"similarSellerModule",void 0),f(this,"tipsModule",void 0),f(this,"flyoutData",void 0),f(this,"utilities",void 0),f(this,"commonAssets",void 0),f(this,"rewardModule",void 0),f(this,"cashBackNotificationModule",void 0),f(this,"similarSellersNotificationModule",void 0),f(this,"rewardNotificationModule",void 0),f(this,"priceComparisonNotificationModule",void 0),f(this,"paymentOptionsModule",void 0),f(this,"exclusiveCouponsNotificationModule",void 0),f(this,"exclusiveCouponsModule",void 0),f(this,"microNotificationModule",void 0),f(this,"orderStatusTrackingModule",void 0),f(this,"sustainabilityModule",void 0),f(this,"sustainabilityNotificationModule",void 0),f(this,"trackingConfirmationNotificationModule",void 0),f(this,"virtualCardModule",void 0),f(this,"virtualCardNotificationModule",void 0),f(this,"viewedProductPriceDropNotificationModule",void 0),f(this,"topRetailersModule",void 0),f(this,"groceryCouponModule",void 0),f(this,"printableCouponModule",void 0),f(this,"giftCardModule",void 0),f(this,"giftCardNotificationModule",void 0),f(this,"feedbackModule",void 0),f(this,"groceryCashbackModule",void 0),f(this,"groceryCashbackActivatedModule",void 0),f(this,"groceryCashbackNotificationModule",void 0),f(this,"autosMarketplaceModule",void 0),f(this,"AutosPriceInsightModule",void 0),f(this,"autosMarketplaceNotificationModule",void 0),f(this,"autosPriceInsightNotificationModule",void 0),f(this,"priceHistoryNotificationModule",void 0),f(this,"trendingOffersModule",void 0),f(this,"dailyDealsModule",void 0),f(this,"couponsNotificationModule",void 0),f(this,"infiniteCategoryFeedModule",void 0),f(this,"shopRunnerSignUpNotificationModule",void 0),f(this,"shopRunnerModule",void 0),f(this,"abandonedCartModule",void 0),this.flyoutData=e,this.utilities=n,this.commonAssets=i}return r(t,[{key:"GetCouponModule",value:function(){return this.couponsModule||(this.couponsModule=new aw(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.couponsModule}},{key:"GetDealsModule",value:function(){return this.dealsModule||(this.dealsModule=new kR(this.flyoutData,this.utilities)),this.dealsModule}},{key:"GetRecommendationsModule",value:function(){return this.recommendationsModule||(this.recommendationsModule=new yP(this.flyoutData,this.utilities)),this.recommendationsModule}},{key:"GetRecommendationsNotificationModule",value:function(){return this.recommendationsNotificationModule||(this.recommendationsNotificationModule=new DP(this.flyoutData,this.utilities)),this.recommendationsNotificationModule}},{key:"GetSimilarSellerModule",value:function(){return this.similarSellerModule||(this.similarSellerModule=new qP(this.flyoutData,this.utilities,this.commonAssets)),this.similarSellerModule}},{key:"GetTipsModule",value:function(){return this.tipsModule||(this.tipsModule=new LM(this.flyoutData,this.utilities)),this.tipsModule}},{key:"GetCashBackModule",value:function(){return this.cashBackModule||(this.cashBackModule=new $I(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.cashBackModule}},{key:"GetPriceComparisonModule",value:function(){return this.priceComparisonModule||(this.priceComparisonModule=new qw(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceComparisonModule}},{key:"GetPriceHistoryModule",value:function(){return this.priceHistoryModule||(this.priceHistoryModule=new dP(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceHistoryModule}},{key:"GetClippingModule",value:function(){return this.clippingModule||(this.clippingModule=new fR(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.clippingModule}},{key:"GetRatingsAndReviewsModule",value:function(){return this.ratingsAndReviewsModule||(this.ratingsAndReviewsModule=new wM(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.ratingsAndReviewsModule}},{key:"GetTrendingOffersModule",value:function(){return this.trendingOffersModule||(this.trendingOffersModule=pb.getFeedModuleOrCreate(Rt.TRENDING_OFFERS,zM,this.flyoutData,this.utilities)),this.trendingOffersModule}},{key:"GetDailyDealsModule",value:function(){return this.dailyDealsModule||(this.dailyDealsModule=pb.getFeedModuleOrCreate(Rt.DAILY_DEALS,SR,this.flyoutData,this.utilities)),this.dailyDealsModule}},{key:"GetInfiniteCategoryFeedModule",value:function(){return this.infiniteCategoryFeedModule||(this.infiniteCategoryFeedModule=pb.getFeedModuleOrCreate(Rt.INFINITE_CATEGORY_FEED,qR,this.flyoutData,this.utilities)),this.infiniteCategoryFeedModule}},{key:"GetBannerModule",value:function(){return this.bannerModule||(this.bannerModule=new XO(this.GetCashBackModule(),this.GetPriceComparisonModule(),this.GetPriceHistoryModule(),this.GetCouponModule(),this.flyoutData,this.GetStateManagementModule(),this.utilities,this.commonAssets)),this.bannerModule}},{key:"GetFlyoutRendererModule",value:function(){if(!this.flyoutRendererModule){var t,e,n=null!==(t=null===(e=this.flyoutData.common.lastCommittedURL)||void 0===e?void 0:e.includes("pinterest.com/pin"))&&void 0!==t&&t;this.flyoutRendererModule=new _b(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets,n?this.GetAvailableGuestModules():this.GetAvailableModules(),this.GetAvailableNotificationModules(),this.GetBannerModule())}return this.flyoutRendererModule}},{key:"GetPaneRendererModule",value:function(){return this.paneRendererModule||(this.paneRendererModule=new _O(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets,this.GetAvailableModules(),this.GetAvailableNotificationModules(),this.GetBannerModule())),this.paneRendererModule}},{key:"GetCheckoutAutofillModule",value:function(){return this.checkoutAutofillModule||(this.checkoutAutofillModule=new cR(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.checkoutAutofillModule}},{key:"GetStateManagementModule",value:function(t){var e;this.stateManagementModule||(e=t||document.querySelector("#divContentWrapper"),this.stateManagementModule=new gn(this.utilities.logModule,e));return this.stateManagementModule}},{key:"GetProductHistoryModule",value:function(){return this.productHistoryModule||(this.productHistoryModule=new EM(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.productHistoryModule}},{key:"GetRewardModule",value:function(){return this.rewardModule||(this.rewardModule=new RP(this.flyoutData,this.utilities,this.GetStateManagementModule())),this.rewardModule}},{key:"GetOrderStatusTrackingModule",value:function(){return this.orderStatusTrackingModule||(this.orderStatusTrackingModule=new dO(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.orderStatusTrackingModule}},{key:"GetSustainabilityModule",value:function(){return this.sustainabilityModule||(this.sustainabilityModule=new nO(this.flyoutData,this.utilities)),this.sustainabilityModule}},{key:"GetTrackingConfirmationNotificationModule",value:function(){return this.trackingConfirmationNotificationModule||(this.trackingConfirmationNotificationModule=new SO(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.trackingConfirmationNotificationModule}},{key:"GetCashBackNotificationModule",value:function(){return this.cashBackNotificationModule||(this.cashBackNotificationModule=new qI(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.cashBackNotificationModule}},{key:"GetSimilarSellersNotificationModule",value:function(){return this.similarSellersNotificationModule||(this.similarSellersNotificationModule=new JP(this.flyoutData,this.utilities,this.commonAssets)),this.similarSellersNotificationModule}},{key:"GetRewardNotificationModule",value:function(){return this.rewardNotificationModule||(this.rewardNotificationModule=new NP(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.rewardNotificationModule}},{key:"GetPriceComparisonNotificationModule",value:function(){return this.priceComparisonNotificationModule||(this.priceComparisonNotificationModule=new Qw(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceComparisonNotificationModule}},{key:"GetExclusiveCouponsNotificationModule",value:function(){return this.exclusiveCouponsNotificationModule||(this.exclusiveCouponsNotificationModule=new vw(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.exclusiveCouponsNotificationModule}},{key:"GetGiftCardNotificationModule",value:function(){return this.giftCardNotificationModule||(this.giftCardNotificationModule=new Ew(this.flyoutData,this.utilities,this.commonAssets)),this.giftCardNotificationModule}},{key:"GetExclusiveCouponsModule",value:function(){return this.exclusiveCouponsModule||(this.exclusiveCouponsModule=new pw(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.exclusiveCouponsModule}},{key:"GetPaymentOptionsModule",value:function(){return this.paymentOptionsModule||(this.paymentOptionsModule=new QR(this.flyoutData,this.utilities)),this.paymentOptionsModule}},{key:"GetMicroNotificationModule",value:function(){return this.microNotificationModule||(this.microNotificationModule=new Gw(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.microNotificationModule}},{key:"GetViewedProductPriceDropNotificationModule",value:function(){return this.viewedProductPriceDropNotificationModule||(this.viewedProductPriceDropNotificationModule=new EO(this.flyoutData,this.utilities,this.commonAssets)),this.viewedProductPriceDropNotificationModule}},{key:"GetVirtualCardModule",value:function(){return this.virtualCardModule||(this.virtualCardModule=new OO(this.flyoutData,this.utilities)),this.virtualCardModule}},{key:"GetVirtualCardNotificationModule",value:function(){return this.virtualCardNotificationModule||(this.virtualCardNotificationModule=new MO(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.virtualCardNotificationModule}},{key:"GetSustainabilityNotificationModule",value:function(){return this.sustainabilityNotificationModule||(this.sustainabilityNotificationModule=new aO(this.flyoutData,this.utilities)),this.sustainabilityNotificationModule}},{key:"GetTopRetailersModule",value:function(){return this.topRetailersModule||(this.topRetailersModule=new GM(this.flyoutData,this.utilities)),this.topRetailersModule}},{key:"GetGroceryCouponModule",value:function(){return this.groceryCouponModule||(this.groceryCouponModule=new WR(this.flyoutData,this.utilities)),this.groceryCouponModule}},{key:"GetPrintableCouponModule",value:function(){return this.printableCouponModule||(this.printableCouponModule=new gM(this.flyoutData,this.utilities)),this.printableCouponModule}},{key:"GetGiftCardModule",value:function(){return this.giftCardModule||(this.giftCardModule=new Sw(this.flyoutData,this.utilities,this.commonAssets)),this.giftCardModule}},{key:"GetFeedbackModule",value:function(){return this.feedbackModule||(this.feedbackModule=new NR(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.feedbackModule}},{key:"GetGroceryCashbackModule",value:function(){return this.groceryCashbackModule||(this.groceryCashbackModule=new Nw(this.flyoutData,this.utilities,this.commonAssets,this.GetStateManagementModule())),this.groceryCashbackModule}},{key:"GetGroceryCashbackActivatedModule",value:function(){return this.groceryCashbackActivatedModule||(this.groceryCashbackActivatedModule=new BR(this.flyoutData,this.utilities,this.commonAssets,this.GetStateManagementModule())),this.groceryCashbackActivatedModule}},{key:"GetGroceryCashbackNotificationModule",value:function(){return this.groceryCashbackNotificationModule||(this.groceryCashbackNotificationModule=new Bw(this.flyoutData,this.utilities,this.commonAssets,this.GetStateManagementModule())),this.groceryCashbackNotificationModule}},{key:"GetAutosMarketplaceModule",value:function(){return this.autosMarketplaceModule||(this.autosMarketplaceModule=new Gb(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.autosMarketplaceModule}},{key:"GetAutosPriceInsightModule",value:function(){return this.AutosPriceInsightModule||(this.AutosPriceInsightModule=new EI(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.AutosPriceInsightModule}},{key:"GetAutosMarketplaceNotificationModule",value:function(){return this.autosMarketplaceNotificationModule||(this.autosMarketplaceNotificationModule=new Kb(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.autosMarketplaceNotificationModule}},{key:"GetAutosPriceInsightNotificationModule",value:function(){return this.autosPriceInsightNotificationModule||(this.autosPriceInsightNotificationModule=new II(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.autosPriceInsightNotificationModule}},{key:"GetPriceHistoryNotificationModule",value:function(){return this.priceHistoryNotificationModule||(this.priceHistoryNotificationModule=new fP(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceHistoryNotificationModule}},{key:"GetCouponsNotificationModule",value:function(){return this.couponsNotificationModule||(this.couponsNotificationModule=new cw(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.couponsNotificationModule}},{key:"GetShopRunnerSignUpNotificationModule",value:function(){return this.shopRunnerSignUpNotificationModule||(this.shopRunnerSignUpNotificationModule=new VP(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.shopRunnerSignUpNotificationModule}},{key:"GetShopRunnerModule",value:function(){return this.shopRunnerModule||(this.shopRunnerModule=new FP(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.shopRunnerModule}},{key:"GetAbandonedCartModule",value:function(){return this.abandonedCartModule||(this.abandonedCartModule=new KO(this.flyoutData,this.utilities)),this.abandonedCartModule}},{key:"GetAvailableModules",value:function(){return this.flyoutData.experimentData.isPCBannerUXExperimentActive()?[this.GetPriceComparisonModule()]:[this.GetVirtualCardModule(),this.GetCheckoutAutofillModule(),this.GetCashBackModule(),this.GetPriceHistoryModule(),this.GetPriceComparisonModule(),this.GetClippingModule(),this.GetCouponModule(),this.GetDealsModule(),this.GetRatingsAndReviewsModule(),this.GetRecommendationsModule(),this.GetProductHistoryModule(),this.GetRewardModule(),this.GetGiftCardModule(),this.GetOrderStatusTrackingModule(),this.GetShopRunnerModule(),this.GetSimilarSellerModule(),this.GetSustainabilityModule(),this.GetTipsModule(),this.GetPaymentOptionsModule(),this.GetTopRetailersModule(),this.GetGroceryCouponModule(),this.GetPrintableCouponModule(),this.GetExclusiveCouponsModule(),this.GetGroceryCashbackModule(),this.GetGroceryCashbackActivatedModule(),this.GetAutosMarketplaceModule(),this.GetAutosPriceInsightModule(),this.GetTrendingOffersModule(),this.GetDailyDealsModule(),this.GetInfiniteCategoryFeedModule(),this.GetFeedbackModule(),this.GetAbandonedCartModule()]}},{key:"GetAvailableGuestModules",value:function(){return[this.GetCashBackModule(),this.GetPriceHistoryModule(),this.GetPriceComparisonModule(),this.GetCouponModule(),this.GetDealsModule(),this.GetRatingsAndReviewsModule(),this.GetRecommendationsModule(),this.GetProductHistoryModule(),this.GetGiftCardModule(),this.GetRewardModule(),this.GetOrderStatusTrackingModule(),this.GetSustainabilityModule(),this.GetTipsModule(),this.GetTopRetailersModule(),this.GetGroceryCouponModule(),this.GetPrintableCouponModule(),this.GetFeedbackModule(),this.GetExclusiveCouponsModule(),this.GetAutosMarketplaceModule(),this.GetAutosPriceInsightModule()]}},{key:"GetAvailableNotificationModules",value:function(){var t=[];return this.flyoutData.common.openedWith===Tt.Auto&&(t=[this.GetCouponsNotificationModule(),this.GetGroceryCashbackNotificationModule(),this.GetRecommendationsNotificationModule(),this.GetGiftCardNotificationModule(),this.GetExclusiveCouponsNotificationModule(),this.GetCashBackNotificationModule(),this.GetTrackingConfirmationNotificationModule(),this.GetShopRunnerSignUpNotificationModule(),this.GetSimilarSellersNotificationModule(),this.GetRewardNotificationModule(),this.GetSustainabilityNotificationModule(),this.GetPriceComparisonNotificationModule(),this.GetMicroNotificationModule(),this.GetVirtualCardNotificationModule(),this.GetViewedProductPriceDropNotificationModule(),this.GetAutosMarketplaceNotificationModule(),this.GetAutosPriceInsightNotificationModule(),this.GetPriceHistoryNotificationModule()]),t}}]),t}(),YM=function(){function t(e,n,i,o,a,r){s(this,t),f(this,"EventType",void 0),f(this,"JsonData",void 0),f(this,"LogLevel",void 0),f(this,"Message",void 0),f(this,"ClientContext",void 0),f(this,"ImpressionId",void 0),f(this,"EventTime",void 0),this.LogLevel=e,this.EventType=n,this.JsonData=i,this.Message=o,this.ClientContext=r,this.ImpressionId=a,this.EventTime=(new Date).getTime()}return r(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}(),jM=function(){function t(){s(this,t)}return r(t,[{key:"LogInfoEvent",value:function(t,e,n,i){this.LogClientEvent(b.Information,t,e,n,i)}},{key:"LogErrorEvent",value:function(t,e,n,i){this.LogClientEvent(b.Error,t,e,n,i)}}]),t}();function qM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}var ZM=function(t){u(n,t);var e=qM(n);function n(t,i){var o;return s(this,n),f(l(o=e.call(this)),"pagehandlerModule",void 0),f(l(o),"jsVersion",void 0),f(l(o),"appClientInfoIname",void 0),f(l(o),"edgeImpressionId",void 0),f(l(o),"couponImpressionId",void 0),f(l(o),"domainName",void 0),f(l(o),"buildVersion",void 0),o.jsVersion=i,o.appClientInfoIname=M.Edge,o.pagehandlerModule=t,o.buildVersion=xs.GetBuildVersion(),o}return r(n,[{key:"setData",value:function(t,e){t===dn.EdgeImpressionId?this.edgeImpressionId=e:t===dn.CouponImpressionId?this.couponImpressionId=e:t===dn.DomainName?this.domainName=e:t===dn.Client&&(this.appClientInfoIname=e)}},{key:"LogClientEvent",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dn.EdgeImpressionId;this.domainName&&!i.Domain&&(i.Domain=this.domainName);var a="";switch(o){case dn.CouponImpressionId:a=this.couponImpressionId||this.edgeImpressionId;break;case dn.EdgeImpressionId:default:a=this.edgeImpressionId||this.couponImpressionId}var r=new Ss(this.appClientInfoIname,this.jsVersion,this.buildVersion),s=new YM(t,e,JSON.stringify(i),n,a,r);this.pagehandlerModule.SendBingTelemetry(s.ToString())}}]),n}(jM),XM=ZM,JM=function(){function t(e){s(this,t),f(this,"PopupOrigination",void 0),f(this,"AutoShowFeature",void 0),f(this,"ShoppingDataGroup",void 0),f(this,"pageHandler",void 0),f(this,"shoppingActions",void 0),f(this,"shoppingContent",void 0),f(this,"shoppingEngagement",void 0),f(this,"shoppingWindowOpenDisposition",void 0),f(this,"packageTrackingActions",void 0),f(this,"telemetryFunctionName","sendBingTelemetry"),e?this.pageHandler=e:(this.PopupOrigination=mojom.PopupOrigination,this.AutoShowFeature=mojom.AutoShowFeature,this.ShoppingDataGroup=mojom.ShoppingDataGroup,this.pageHandler=mojom&&mojom.ShoppingHandler.getRemote(),this.shoppingActions=mojom.ShoppingActions,this.shoppingContent=mojom.ShoppingContent,this.packageTrackingActions=mojom.PackageTrackingActions,this.shoppingEngagement=mojom.ShoppingEngagement,this.shoppingWindowOpenDisposition=mojom.ShoppingWindowOpenDisposition,this.InitiatePageInterface())}var n,i,a,l,c,u,d,h,p,g;return r(t,[{key:"OpenPane",value:function(){return!(!this.pageHandler.openPane||"function"!=typeof this.pageHandler.openPane)&&(this.CallPageHandlerFunction(this.pageHandler.openPane,"openPane"),!0)}},{key:"onActivateRebatesStateChanged",value:function(t){if(t!==Nt.ACTIVATED&&t!==Nt.STARTED&&t!==Nt.PENDING_ACTIVATION_IN_PROFILE&&t!==Nt.PENDING_ENROLL_REBATES_USER&&t!==Nt.PENDING_SIGN_INTO_PROFILE&&t!==Nt.PENDING_SWITCH_TO_MSA_PROFILE){var e=document.querySelector("#divContentWrapper");if(e){var n=new CustomEvent(hn.onRebatesTelemetryFail,{detail:{status:t}});e.dispatchEvent(n)}}else if(t===Nt.ACTIVATED){var i=document.querySelector("#divContentWrapper");if(i){var o=new CustomEvent(hn.onRebatesTelemetrySuccess);i.dispatchEvent(o)}}}},{key:"onActivateRewardsStateChanged",value:function(t){if(t!==Lt.ACTIVATED&&t!==Lt.STARTED&&t!==Lt.PENDING_ACTIVATION_IN_PROFILE&&t!==Lt.PENDING_ENROLL_REWARDS_USER&&t!==Lt.PENDING_SIGN_INTO_PROFILE&&t!==Lt.PENDING_SWITCH_TO_MSA_PROFILE){var e=document.querySelector("#divContentWrapper");if(e){var n=new CustomEvent(hn.onRewardsTelemetryFail,{detail:{status:t}});e.dispatchEvent(n)}}else if(t===Lt.ACTIVATED){var i=document.querySelector("#divContentWrapper");if(i){var o=new CustomEvent(hn.onRewardsTelemetrySuccess);i.dispatchEvent(o)}}}},{key:"InitiatePageInterface",value:function(){var t=this;if(mojom&&"function"==typeof mojom.PageCallbackRouter){var e=new mojom.PageCallbackRouter;this.CallPageHandlerFunction(this.pageHandler.registerPage,"registerPage",e.$.bindNewPipeAndPassRemote()),e.onActivateRebatesStateChanged&&e.onActivateRebatesStateChanged.addListener(function(e){t.onActivateRebatesStateChanged(e)}.bind(this));try{e.onActivateRewardsStateChanged&&e.onActivateRewardsStateChanged.addListener(function(e){t.onActivateRewardsStateChanged(e)}.bind(this))}catch(t){}}}},{key:"NavigateToSettings",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToSettings,"navigateToSettings")}},{key:"NavigateToEdgeUrl",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.navigateToEdgeUrl,"navigateToEdgeUrl",t,e)}},{key:"NavigateToWallet",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToWallet,"navigateToWallet")}},{key:"NavigateToTurnOffZip",value:function(){this.NavigateToUrl("edge://settings/payments")}},{key:"NavigateToPrivacyStatement",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToPrivacyStatement,"navigateToPrivacyStatement")}},{key:"NavigateToTermsStatement",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToTermsStatement,"navigateToTermsStatement")}},{key:"NavigateToCookieConsentStatement",value:function(){}},{key:"NavigateToLearnMore",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToLearnMore,"navigateToLearnMore",e)}},{key:"NavigateToRedeemRewards",value:function(){this.NavigateToUrl("https://rewards.microsoft.com/Signin?idru=%2Fredeem/")}},{key:"NavigateToSustainabilityLearnMore",value:function(){this.NavigateToUrl("https://aka.ms/AAeuh78")}},{key:"NavigateToShoppingLearnMore",value:function(){this.NavigateToUrl("https://docs.microsoft.com/en-us/microsoft-edge/privacy-whitepaper/#shopping")}},{key:"NavigateToPcbProductPage",value:function(t){this.NavigateToUrl(t)}},{key:"NavigateToPrivacyLearnMore",value:function(){this.NavigateToUrl("https://go.microsoft.com/fwlink/?linkid=2194724")}},{key:"NavigateToMoreRebatesSites",value:function(){this.NavigateToUrl("https://www.bing.com/stores/edge/cashback")}},{key:"NavigateToBingReates",value:function(){this.NavigateToUrl("https://www.bing.com/rebates")}},{key:"NavigateToMicrosoftRewards",value:function(){this.NavigateToUrl("https://www.microsoft.com/rewards")}},{key:"NavigateToPrivacyCookiesStatement",value:function(){this.NavigateToUrl("https://go.microsoft.com/fwlink/?LinkID=521839")}},{key:"NavigateToTermsStatementFlyout",value:function(){this.NavigateToUrl("https://www.microsoft.com/bing/rebates-terms")}},{key:"NavigateToBingRebatesHistory",value:function(){this.NavigateToUrl("https://www.bing.com/rebates/history")}},{key:"NavigateToRewardsInfo",value:function(){this.NavigateToUrl("https://bing.com/rewards")}},{key:"NavigateToBNPLLearnMore",value:function(){this.NavigateToUrl("https://aka.ms/EdgeBNPL")}},{key:"NavigateToRetailerSite",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.navigateToAlternateRetailer,"navigateToAlternateRetailer",t,void 0===e?cl.NEW_FOREGROUND_TAB:e)}},{key:"NavigateToCouponPage",value:function(t){}},{key:"GetStorageValue",value:(g=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pageHandler.getStorageValue){t.next=4;break}return t.next=3,this.pageHandler.getStorageValue(e);case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",Promise.resolve(null));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"SetStorageValue",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.setStorageValue,"setStorageValue",t,e)}},{key:"AddItemFromOtherSeller",value:function(t){this.CallPageHandlerFunction(this.pageHandler.addItemFromOtherSeller,"addItemFromOtherSeller",t)}},{key:"StartEdgeDriver",value:function(t){this.CallPageHandlerFunction(this.pageHandler.startEdgeDriverScript,"startEdgeDriver","",t)}},{key:"NavigateToRebatesPayouts",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToRebatesPayouts,"navigateToRebatesPayouts",e)}},{key:"NavigateToDealWithDisposition",value:function(t,e,n){var i=this.shoppingWindowOpenDisposition[n];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToDealWithDisposition,"navigateToDealWithDisposition",t,i)}},{key:"SetIsPersonalizedShoppingEnabled",value:function(t){this.pageHandler.setIsPersonalizedShoppingEnabled(t)}},{key:"NavigateToRecommendationWithDisposition",value:function(t,e,n){var i=this.shoppingWindowOpenDisposition[n];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToRecommendationWithDisposition,"navigateToRecommendationWithDisposition",t,i)}},{key:"NavigateToOrderWithDisposition",value:function(t,e){}},{key:"NavigateToOtherSellerWithDisposition",value:function(t,e){var n=this.shoppingWindowOpenDisposition[e];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.navigateToOtherSellerWithDisposition,"navigateToOtherSellerWithDisposition",t,n)}},{key:"NavigateToRebatesAccount",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToRebatesAccount,"navigateToRebatesAccount",e)}},{key:"NavigateToProfessionalReviewWithDisposition",value:function(t,e,n){var i=this.shoppingWindowOpenDisposition[n];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToProfessionalReviewWithDisposition,"navigateToProfessionalReviewWithDisposition",t,i)}},{key:"NavigateToVideoReviewWithDisposition",value:function(t,e,n){var i=this.shoppingWindowOpenDisposition[n];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToVideoReviewWithDisposition,"navigateToVideoReviewWithDisposition",t,i)}},{key:"SendBingTelemetry",value:function(t){this.CallPageHandlerFunction(this.pageHandler.sendBingTelemetry,"sendBingTelemetry",t,"-1.0")}},{key:"RecordAsUserAction",value:function(t){if(this.shoppingActions){var e=this.shoppingActions[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsUserAction,"recordAsUserAction",e)}}},{key:"RecordPackageTrackingAction",value:function(t,e){if(this.packageTrackingActions){var n=this.packageTrackingActions[t];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.recordPackageTrackingAction,"recordPackageTrackingAction",n,e)}}},{key:"RecordAsUserEngagement",value:function(t){if(this.shoppingEngagement){var e=this.shoppingEngagement[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsUserEngagement,"recordAsUserEngagement",e)}}},{key:"RecordAsContentViewed",value:function(t){if(this.shoppingContent){var e=this.shoppingContent[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsContentViewed,"recordAsContentViewed",e)}}},{key:"StartShopping",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.startShopping,"startShopping",t,e)}},{key:"DismissPopup",value:function(){this.CallPageHandlerFunction(this.pageHandler.dismissPopup,"dismissPopup")}},{key:"SnoozePopup",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.snoozePopup,"snoozePopup")}},{key:"DismissBanner",value:function(){Ye("banneropen","false"),this.CallPageHandlerFunction(this.pageHandler.dismissBanner,"dismissBanner")}},{key:"OnBannerLoad",value:function(){Ye("banneropen","true"),this.CallPageHandlerFunction(this.pageHandler.onBannerLoad,"onBannerLoad")}},{key:"ShowFlyoutFromBanner",value:function(t){this.CallPageHandlerFunction(this.pageHandler.showFlyoutFromBanner,"showFlyoutFromBanner",t)}},{key:"DeletePackageTrackerByGuid",value:function(t){this.CallPageHandlerFunction(this.pageHandler.deletePackageTrackerByGuid,"deletePackageTrackerByGuid",t)}},{key:"NavigateToUrlBackground",value:function(t,e,n){this.CallPageHandlerFunction(this.pageHandler.navigateToUrlBackground,"navigateToUrlBackground",t,e)}},{key:"AutoShowForAllFeatures",value:function(t){if(this.pageHandler.allowAutoShowForFeature&&"function"==typeof this.pageHandler.allowAutoShowForFeature)for(var e=0,n=[Fe.AUTO_SHOW_LOWER_PRICE_FOUND,Fe.AUTO_SHOW_REBATES,Fe.AUTO_SHOW_REBATES_CONFIRMATION,Fe.AUTO_SHOW_REBATES_ORGANIC,Fe.AUTO_SHOW_PRICE_HISTORY,Fe.AUTO_SHOW_REBATES_ORGANIC_NEW,Fe.AUTO_SHOW_REBATES_CHECKOUT,Fe.AUTO_SHOW_PERSONALIZED_CASHBACK,Fe.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION,Fe.AUTO_SHOW_EXPRESS_CHECKOUT,Fe.AUTO_SHOW_SERVER_DRIVEN_REWARDS,Fe.AUTO_SHOW_COUPONS_CLIPPING,Fe.AUTO_SHOW_OTHER_SELLERS,Fe.AUTO_SHOW_RECOMMENDATIONS,Fe.AUTO_SHOW_GIFT_CARD,Fe.AUTO_SHOW_ATTAINABLE_COUPONS,Fe.AUTO_SHOW_PACKAGE_TRACKING,Fe.AUTO_SHOW_VIRTUAL_CARD,Fe.AUTO_SHOW_PROFESSIONAL_REVIEWS,Fe.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK];e<n.length;e++){var i=n[e];this.CallPageHandlerFunction(this.pageHandler.allowAutoShowForFeature,"allowAutoShowForFeature",t,i)}}},{key:"AllowAutoShow",value:function(t,e){this.pageHandler.allowAutoShowForFeature&&"function"==typeof this.pageHandler.allowAutoShowForFeature&&e?this.CallPageHandlerFunction(this.pageHandler.allowAutoShowForFeature,"allowAutoShowForFeature",t,e):this.CallPageHandlerFunction(this.pageHandler.allowAutoShow,"allowAutoShow",t)}},{key:"SetAllowOrganicRebates",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setAllowOrganicRebates,"setAllowOrganicRebates",t)}},{key:"TriggerExperiment",value:function(t){this.CallPageHandlerFunction(this.pageHandler.triggerExperiment,"triggerExperiment",t)}},{key:"TriggerSupportedExperiments",value:function(t){this.CallPageHandlerFunction(this.pageHandler.triggerSupportedExperiments,"triggerSupportedExperiments",yn(t.values()))}},{key:"SendBingVisibilityRequest",value:function(t){this.CallPageHandlerFunction(this.pageHandler.sendBingVisibilityRequest,"sendBingVisibilityRequest",t)}},{key:"ApplyAllCoupons",value:function(){this.CallPageHandlerFunction(this.pageHandler.applyAllCoupons,"applyAllCoupons")}},{key:"PrintCoupons",value:function(t){try{this.CallPageHandlerFunction(this.pageHandler.printCoupons,"printCoupons",t)}catch(t){}}},{key:"ApplyAllCouponsWithExpressCheckout",value:function(t){this.CallPageHandlerFunction(this.pageHandler.applyAllCouponsWithExpressCheckout,"applyAllCouponsWithExpressCheckout",t.ToString())}},{key:"ActivateRebates",value:(p=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.activateRebates();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.activateRebates(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"ActivateRewards",value:(h=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.activateRewards();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.activateRewards(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"RunQuerySelectorOnBodyWithReponse",value:(d=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.runQuerySelectorOnBody(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"RunQuerySelectorAllOnBodyWithReponse",value:(u=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.runQuerySelectorOnBody(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"RunQuerySelectorOnBodyWithValues",value:(c=e(o().mark((function t(e,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.runQuerySelectorOnBodyWithValues(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"CopyCoupon",value:function(t){navigator.clipboard.writeText(t)}},{key:"DeletePwiloEntry",value:function(t){return this.pageHandler.deletePwiloEntry(t)}},{key:"OnOpenNotification",value:function(t,e){if(this.pageHandler.onOpenNotification)return this.pageHandler.onOpenNotification(t,e)}},{key:"AllowServerDrivenNotifications",value:function(t){return this.pageHandler.allowServerDrivenNotifications(t)}},{key:"GetProfilesData",value:(l=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(!chrome||!chrome.autofillPrivate)return e("can not find profiles.");chrome.autofillPrivate.getAddressList((function(n){n?t(n):e("can not find profiles")}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"GetPaymentsData",value:(a=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(!chrome||!chrome.autofillPrivate)return e("can not find payments.");chrome.autofillPrivate.getCreditCardList((function(n){n?t(n):e("can not find payments")}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"CancelAutoDismiss",value:function(){}},{key:"RecordRenderTime",value:function(t){}},{key:"SetPackageTrackingUserConsent",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setPackageTrackingUserConsent,"setPackageTrackingUserConsent",t)}},{key:"SetPackageTrackingFREShown",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setPackageTrackingFREShown,"setPackageTrackingFREShown",t)}},{key:"SendMicroFeedbackVote",value:(i=e(o().mark((function t(e,n,i){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.pageHandler.sendMicroFeedbackVote(e,n,i);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e,n){return i.apply(this,arguments)})},{key:"SendMicroFeedbackFollowUpVote",value:function(t,e,n,i,o){try{this.CallPageHandlerFunction(this.pageHandler.sendMicroFeedbackFollowUpVote,"sendMicroFeedbackFollowUpVote",n,e,t,i,o)}catch(t){}}},{key:"OpenMicroFeedback",value:function(t){try{this.CallPageHandlerFunction(this.pageHandler.openMicroFeedback,"openMicroFeedback",t)}catch(t){}}},{key:"NavigateToUrl",value:function(t){t&&window.open(t,"_blank","noopener,noreferrer")}},{key:"GetAnid",value:(n=e(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.getAnid();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.getAnid(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"DisablePopupForDomain",value:function(t){var e={popupOrigination:t,type:"disablePopupOriginationForDomain"};this.CallPageHandlerFunction(e,"disablePopupOriginationForDomain",!1)}},{key:"SendBackgroundAAMetrics",value:function(t){}},{key:"CallPageHandlerFunction",value:function(t,e){try{if(t&&"function"==typeof t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];i&&i.length>0?t.apply(this.pageHandler,i):t.apply(this.pageHandler)}else if(e!==this.telemetryFunctionName){var a="".concat(e," is not a function");this.SendPageHandlerErrorTelemetry(a)}}catch(t){if(e!==this.telemetryFunctionName){var r="Error calling function ".concat(e," - ").concat(t);this.SendPageHandlerErrorTelemetry(r)}}}},{key:"SendPageHandlerErrorTelemetry",value:function(t){var e=new _(A.ErrorPageHandlerFunction),n=new Ss(M.Edge,K),i=new YM(b.Error,S.EdgeFlyoutStatus,JSON.stringify(e),t,"",n);this.SendBingTelemetry(i.ToString())}}]),t}(),QM=new JM;function tN(){return(tN=e(o().mark((function t(){var e,n,i,a,r,s,l,c,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(new db).initializeComponents(),e=new Tu,n=new Eu(St.Desktop,e),i=new XM(QM,K),a=new jt,r=new Il(QM,i,n,a),s=new KM(n,r,a),r.viewModulesUtilities.addCommonStyles(a),t.next=11,n.initializeModuleData(i,QM,n);case 11:return eN(n,r.viewModulesUtilities,a),n.experimentData.experiments&&n.experimentData.experiments.size>0&&QM.TriggerSupportedExperiments(n.experimentData.experiments),nN(n.dataStoreModule,n.common.domain,i,e),r.viewModulesUtilities.trapFlyoutFocusMac(),l=document.querySelector("#divContentWrapper"),t.next=18,s.GetFlyoutRendererModule().createModules(l);case 18:c=new Y,new MutationObserver((function(){c.HandleAdditionalBody()})).observe(document,{attributes:!0,childList:!0,subtree:!0}),aN(n.common.popupOrigination,i,QM,s),iN(e,n.common.openedWith,n.common.isCheckoutPage,i),t.next=33;break;case 25:t.prev=25,t.t0=t.catch(0),u=new XM(QM,K),d=new _(A.OnErrorInvoked),u.setData(dn.Client,M.Edge),u.LogErrorEvent(S.EdgeFlyoutStatus,"V1 initialize error ".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message),d),document.querySelector("msft-edge-shopping")||sN(u,new jt,new Tu,"V1 Initialize");case 33:case"end":return t.stop()}}),t,null,[[0,25]])})))).apply(this,arguments)}function eN(t,e,n){var i=document.querySelector("head"),o=t.common.shopping;if(i){var a=i.querySelector("title"),r=t.strings;if(!a||a.innerText!==r.commonFixedTitle){var s=e.createElement("title");s.innerText=r.commonFixedTitle,i.appendChild(s),function(t,e){var n=document.createElement("DIV");n.innerHTML=t.getHeaderIcon(),n.slot="header-icon",e.appendChild(n)}(n,o),t.experimentData.isPCBannerUXExperimentActive()?o.fixedTitle=r.pcPriceSectionTitle:o.fixedTitle=r.commonFixedTitle}}}function nN(t,e,n,i){try{var o=i.GetLoadTimeDataValue("impressionId",""),a=t.ApiData?t.ApiData.impressionId:"",r=null!=o?o:"";n.setData(dn.CouponImpressionId,a),n.setData(dn.EdgeImpressionId,r),n.setData(dn.DomainName,e),n.setData(dn.Client,M.Edge)}catch(t){var s=new _(A.OnErrorInvoked);n.LogErrorEvent(S.EdgeFlyoutStatus,"Data creation Exception at InitializeCouponsApiData",s)}}function iN(t,e,n,i){var o=e&&e===Tt.Auto?A.AutoTrigger:A.UserTrigger,a=new _(o);if(i.LogInfoEvent(S.EdgeFlyoutStatus,function(t){var e={lastCommittedUrl:t.GetLoadTimeDataValue("lastCommittedURL",""),navChain:oN(t)};return JSON.stringify(e)}(t),a),n){var r=new _(A.OpenedInCheckout);i.LogInfoEvent(S.EdgeFlyoutStatus,"",r)}}function oN(t){var e=t.GetLoadTimeDataValue("bingRedirectChainForInitialDomainNavigation",null),n="";return e&&e instanceof Array&&e.length>0&&(n=e.filter((function(t){return t.includes("bing.com")||t.includes("microsoft.com")})).join("||")),n}function aN(t,e,n,i){return rN.apply(this,arguments)}function rN(){return(rN=e(o().mark((function t(e,n,i,a){var r,s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,r=null,s=i.PopupOrigination,e!==(null==s?void 0:s.AUTO_SHOW_BING_SEARCH)){t.next=11;break}return t.next=8,a.GetCouponModule().ShouldRenderModule();case 8:r=t.sent,t.next=27;break;case 11:if(e!==(null==s?void 0:s.AUTO_SHOW_URL_PARAM_REBATES)){t.next=17;break}return t.next=14,a.GetCashBackModule().ShouldRenderModule();case 14:r=t.sent,t.next=27;break;case 17:if(e!==(null==s?void 0:s.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON)){t.next=23;break}return t.next=20,a.GetPriceComparisonModule().ShouldRenderModule();case 20:r=t.sent,t.next=27;break;case 23:if(e!==(null==s?void 0:s.AUTO_SHOW_URL_PARAM_PRICE_HISTORY)){t.next=27;break}return t.next=26,a.GetPriceHistoryModule().ShouldRenderModule();case 26:r=t.sent;case 27:null!==r&&(l=new _(A.AutoOpenUsingUrlParam),n.LogInfoEvent(S.EdgeFlyoutStatus,"Auto open using url param - ".concat(e," - is succeeded: ").concat(r),l)),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(2);case 33:case"end":return t.stop()}}),t,null,[[2,30]])})))).apply(this,arguments)}function sN(t,e,n,i){var o=new Su(n),a=At.LTR,r=xt.Light;try{o.Create(St.Desktop);var s=n.GetLoadTimeDataValue("dark_theme",!1);r=xt.Light,s&&(r=xt.Dark);var l=n.GetLoadTimeDataValue("is_rtl",!1);a=At.LTR,l&&(a=At.RTL)}catch(t){}new gb(t,QM,o,r,a,e).renderErrorUI(i)}window.onerror=function(t,e,n,i,o){var a=new _(A.OnErrorInvoked),r=new XM(QM,K);return r.setData(dn.Client,M.Edge),r.LogErrorEvent(S.EdgeFlyoutStatus,"v1 window on error - ".concat((null==o?void 0:o.message)||JSON.stringify(t)),a),document.querySelector("msft-edge-shopping")||sN(r,new jt,new Tu,"v1 window on error ".concat((null==o?void 0:o.message)||JSON.stringify(t))),!0},document.addEventListener("DOMContentLoaded",(function(){return tN.apply(this,arguments)}))}()}();